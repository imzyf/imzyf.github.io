<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mysql | ZYF.IM BLOG</title>
<meta name=keywords content><meta name=description content="Code. Create. Conquer."><meta name=author content="Me"><link rel=canonical href=https://zyf.im/tags/mysql/><link crossorigin=anonymous href=/assets/css/stylesheet.4997c86cdc3165a43745858554a5b14aaf4d3769db9f06a36b0c69ef98eb2927.css integrity="sha256-SZfIbNwxZaQ3RYWFVKWxSq9NN2nbnwajawxp75jrKSc=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zyf.im/tags/mysql/index.xml><link rel=alternate hreflang=en href=https://zyf.im/tags/mysql/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/tags/mysql/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="Mysql"><meta property="og:description" content="Code. Create. Conquer."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mysql"><meta name=twitter:description content="Code. Create. Conquer."></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/tags/>Tags</a></div><h1>Mysql
<a href=/tags/mysql/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>MySQL 5.6 5.7 组内排序的区别</h2></header><div class=entry-content><p>MySQL 5.7 对比 5.6 有很多的变化。一个常见的需求：按条件分组后，取出每组中某字段最大值的那条记录。其实就是组内排序的问题，我的做法是：子查询先进行倒序排序，外层查询分组。
示例 +----+----+-------+ | id | no | name | +----+----+-------+ | 5 | 5 | Mike | | 4 | 4 | Herry | | 3 | 3 | wyett | | 2 | 2 | John | | 7 | 2 | John | | 1 | 1 | Mike | | 6 | 1 | John | | 8 | 1 | Mike | | 9 | 1 | Mike | +----+----+-------+ 要求：取出每人（按 name），最大 no 的记录。
...</p></div><footer class=entry-footer><span title='2017-04-20 20:00:00 +0000 UTC'>April 20, 2017</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;765 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to MySQL 5.6 5.7 组内排序的区别" href=https://zyf.im/2017/04/20/mysql-group-by-and-order-by-difference-between-56-57/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>MySQL 管理用户与访问授权</h2></header><div class=entry-content><p>MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。
-- 创建用户 + 授权 GRANT ALL PRIVILEGES ON _._ TO 'tom'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION; -- 查询权限 SHOW GRANTS FOR 'tom'@'%'; -- 授权 GRANT SELECT ON `my_db`.* TO 'tom'@'%'; -- 撤权 REVOKE ALL PRIVILEGES ON `my_db`.* FROM 'tom'@'%'; REVOKE GRANT OPTION ON `my_db`.* from 'tom'@'%'; -- not necessary FLUSH PRIVILEGES; 管理用户 创建用户 CREATE USER 'username'@'host' IDENTIFIED BY 'password'; username：创建的用户名 host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 % password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器 例子：
...</p></div><footer class=entry-footer><span title='2017-04-11 11:00:00 +0000 UTC'>April 11, 2017</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;376 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to MySQL 管理用户与访问授权" href=https://zyf.im/2017/04/11/mysql-manage-user-and-grant/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>MySQL LIMIT 查询优化</h2></header><div class=entry-content><p>最近常在 SQL 中使用到 LIMIT ? ?，在执行 LIMIT 0, 1000 与 LIMIT 100000, 1000 时，查询速度明显有很大的区别，而且随着 LIMIT 的偏移量的增加，查询速度越来越慢。是否有办法对 SQL 中 LIMIT 查询进行优化呢？
LIMIT 速度慢的原因 LIMIT 100000, 1000 的意思扫描满足条件的 101000 行，扔掉前面的 100000 行，返回最后的 1000 行，问题就在这里。
LIMIT 优化思路 1、尽可能从索引中直接获取数据，避免或减少直接扫描行数据的频率 2、尽可能减少扫描的记录数，也就是先确定起始的范围，再往后取 N 条记录即可
LIMIT 优化示例 原始 SQL -- 含条件 SELECT * FROM `t1` WHERE ftype=1 ORDER BY id DESC LIMIT 100, 10; -- 不含 WHERE SELECT * FROM `t1` ORDER BY id DESC LIMIT 100, 10; 子查询优化 SQL -- 采用子查询的方式优化，在子查询里先从索引获取到最大 id，然后倒序排，再取 10 行结果集 -- 注意这里采用了 2 次倒序排，因此在取 LIMIT 的 start 值时，比原来的值加了 10，即 935510，否则结果将和原来的不一致 SELECT * FROM (SELECT * FROM `t1` WHERE id > ( SELECT id FROM `t1` WHERE ftype=1 ORDER BY id DESC LIMIT 935510, 1) LIMIT 10) T ORDER BY id DESC; INNER 优化 SQL -- 采用 INNER JOIN 优化，JOIN 子句里也优先从索引获取 ID 列表，然后直接关联查询获得最终结果，这里不需要加 10 SELECT * FROM `t1` INNER JOIN ( SELECT id FROM `t1` WHERE ftype=1 ORDER BY id DESC LIMIT 935500,10) t2 USING (id); 1、要学着使用 EXPLAIN 对 SQL 进行优化调整 2、推荐使用 INNER 优化 SQL 3、发现了一个 ubuntu 中监控 MySQL 的 mytop 命令，刚刚安装还没细研究
...</p></div><footer class=entry-footer><span title='2016-09-18 14:00:00 +0000 UTC'>September 18, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;200 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to MySQL LIMIT 查询优化" href=https://zyf.im/2016/09/18/mysql-limit-query-optimization/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>IMOOC 与MySQL的零距离接触</h2></header><div class=entry-content><p>涵盖全部 MySQL 数据库的基础，MySQL 数据库的基础知识、数据表的常用操作及各种约束的使用，以及综合的运用各种命令实现记录进行 CURD 等操作。
MySQL 安装与配置 数据类型 流程控制与运算符 DDL、DCL、DQL、DML 常用函数 表类型（存储引擎） 图形化工具 修改 MySQL 提示符 MySQL 客户端的默认提示符是 mysql>，基本上没什么实际作用。其实可以修改这个提示符，让它显示一些有用的信息，例如当前所在的数据库等。修改方法有四种，其中前两种只对当前连接有效，后两种则对所有连接有效。
连接客户端时通过参数指定 mysql --prompt="(\u@\h) [\d]> " my.cnf
[mysql] prompt=mysql(\\u@\\h:\\d)> 这样提示符就会变成 (user@host) [database]>。其中常用的字符参数有：
\D 完整的日期 \d 当前数据库 \h 服务器名称 \u 当前用户 连接上客户端后，通过 prompt 命令修改
prompt (\u@\h) [\d]> 在 MySQL 的配置文件中配置。
prompt=(\\u@\\h) [\\d]>\\_ 通过环境变量配置。
export MYSQL_PS1="(\u@\h) [\d]> " 参考：http://renial.iteye.com/blog/773675
MySQL 语法规范 关键字和函数名称全部 大写 数据库名称，表名称，字段名称全部 小写 SQL 语句必须以 分号结尾 数据库操作 数据库创建：CREATE 语法：CREATE {DATABASE SCHEMA} [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset_name DATABASE 和 SCHEMA 是相同的，任选其一 IF NOT EXISTS:如果创建的数据库存在，则不只报出 warning，不写会报错 CHRARCTER SET utf8:为表设置编码方式，如果不设置则用 mysql 默认的编码方式 查看数据库列表：SHOW SHOW { DATABASE SCHEMAS } [LIKE ‘pattern’ WHERE expr] SHOW CREATE DATABASE xx：显示 xx 数据库信息 数据库的修改：ALTER 修改数据库编码方式：ALTER { DATABASE SCHEMAS } [db_name][default] CHARACTER SET [=] charset_name 删除数据库：DROP 删除数据库：DROP { DATABASE SCHEMAS } [IF EXISTS] db_name; --修改mysql操作符为当前日期 mysql -uroot -proot prompt \D --展示所有数据库 show databases; --创建数据库 create database if not exists t1 character set gbk; --展示数据库t1的创建命令和编码形式 show create database t1; --修改数据库编码格式 alter database t2 character set = utf8; --删除数据库 drop database if exists t1; --展示警告信息 show warnings; 四、数据类型 ...</p></div><footer class=entry-footer><span title='2016-07-31 10:00:00 +0000 UTC'>July 31, 2016</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;508 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to IMOOC 与MySQL的零距离接触" href=https://zyf.im/2016/07/31/imooc-meet-mysql-notes/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>IMOOC MySQL开发技巧</h2></header><div class=entry-content><p>主要涉及：JOIN 、JOIN 更新、GROUP BY HAVING 数据查重/去重。
INNER INNER JOIN、LEFT JOIN、RIGHT JOIN、FULL JOIN(MySQL 不支持)、CROSS JOIN
这是在网上找到的非常好的一篇博文，图解 JOIN 语句：
CODING HORROR-A Visual Explanation of SQL Joins
下图可以很清楚的明白，JOIN 的数据选取范围：
更新使用过滤条件中包括本身的表 更新 t1 t2 表中 col_a 重复的字段：
UPDATE t1 SET col_a = 'hi' WHERE t1.col_a IN ( SELECT b.col_a FROM t1 a INNER JOIN t2 b on a.col_a = b.col_a ) ; ERROR:1093 可转换为：
UPDATE t1 aa JOIN( SELECT b.col_a FROM t1 a INNER JOIN t2 b on a.col_a = b.col_a )bb on aa.col_a= bb.col_a SET col_a = 'hi' ; 查询重复数据、删除重复数据 利用 GROUP BY 和 HAVING 查询重复数据：
...</p></div><footer class=entry-footer><span title='2016-07-25 10:00:00 +0000 UTC'>July 25, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;142 words&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to IMOOC MySQL开发技巧" href=https://zyf.im/2016/07/25/imooc-mysql-development-skills-notes/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://zyf.im/tags/mysql/>«&nbsp;Prev&nbsp;</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>