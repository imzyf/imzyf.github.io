<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.148.2"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ZYF.IM BLOG</title><meta name=keywords content="ZYF,ZYF.IM,Blog,Portfolio,PaperMod"><meta name=description content="Code. Create. Conquer."><meta name=author content="Me"><link rel=canonical href=https://zyf.im/><link crossorigin=anonymous href=/assets/css/stylesheet.63618a0fd0c7dd946ad6f368012c097fc6e5a8464cefd289c140dd28c01ec58d.css integrity="sha256-Y2GKD9DH3ZRq1vNoASwJf8blqEZM79KJwUDdKMAexY0=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zyf.im/index.xml><link rel=alternate type=application/json href=https://zyf.im/index.json><link rel=alternate hreflang=en href=https://zyf.im/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="ZYF.IM BLOG"><meta property="og:description" content="Code. Create. Conquer."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="ZYF.IM BLOG"><meta name=twitter:description content="Code. Create. Conquer."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"ZYF.IM BLOG","url":"https://zyf.im/","description":"Code. Create. Conquer.","logo":"https://zyf.im/favicon.ico","sameAs":["https://github.com/","https://space.bilibili.com/29991589","/links/"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>Hi there ğŸ‘‹</h1></header><div class=entry-content>Welcome to my blog</div><footer class=entry-footer><div class=social-icons><a href=https://github.com/ target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://space.bilibili.com/29991589 target=_blank rel="noopener noreferrer me" title=Bilibili><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="1.3333" y="6" width="21.333" height="15.333" rx="4" ry="4"/><path d="m8 12.4v1.2"/><path d="m16 12.4v1.2"/><path d="m5.8853 2.6667L8.552 5.3334"/><path d="m18.115 2.6667-2.6667 2.6667"/></svg>
</a><a href=/links/ target=_blank rel="noopener noreferrer me" title=Link><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>NGINX å¯ç”¨ HTTP/3</h2></header><div class=entry-content><p>ç®€ä»‹ HTTP/2 è§£å†³äº†â€œå¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€ä¼˜å…ˆçº§â€ç­‰ HTTP/1.x çš„ç“¶é¢ˆï¼Œä½†ä»å— TCP å…ˆå¤©é™åˆ¶ã€‚
HTTP/3 åˆ™æŠŠåŒæ ·çš„è¯­ä¹‰æ¬åˆ° QUICï¼ŒQuick UDP Internet Connections æ˜¯ Google è®¾è®¡çš„ä¸€ç§åŸºäº UDP çš„å¤šè·¯å¤ç”¨å®‰å…¨ä¼ è¾“å±‚åè®®ã€‚æ ‡å‡†åŒ–åï¼ŒHTTP/3 = HTTP over QUICã€‚
å±‚çº§ HTTP/2 HTTP/3 ä¼ è¾“ TCP (å¿…)+ TLS1.2/1.3ï¼ˆå¤šæ•°åœºæ™¯ï¼‰ QUIC (UDP ä¹‹ä¸Š)+ TLS1.3ï¼ˆå¼ºåˆ¶ï¼‰ æµï¼ˆStreamï¼‰ Mux åœ¨ TCP é‡Œçš„é€»è¾‘æµ Mux åœ¨ QUIC åŸç”Ÿæµ å¤´å‹ç¼© HPACK QPACKï¼ˆé¿å…é˜Ÿå¤´é˜»å¡ï¼‰ HTTP/2 æµè§ˆå™¨è¦æ±‚å¿…é¡»è·‘åœ¨ TLS ä¹‹ä¸Šï¼ˆALPN=â€œh2â€ï¼‰ã€‚æ ˆå˜ä¸º HTTP/2 â†’ TLS â†’ TCP â†’ IPã€‚ HTTP/3 ä½¿ç”¨ QUIC æ›¿æ¢ TCPï¼Œæ ˆå˜ä¸º HTTP/3 â†’ QUIC (æ‹¥å¡/é‡ä¼ ) â†’ UDP â†’ IPï¼ŒåŠ å¯†é›†æˆåœ¨ QUICï¼ˆåŸºäº TLS 1.3ï¼‰ã€‚ Mux multiplex å¤šè·¯å¤ç”¨ HTTP/2 å¿…é¡»é¡ºåºä¼ è¾“ï¼Œè€Œ HTTP/3 æ”¯æŒä¹±åº å¦‚æœæ²¿ç”¨ HPACKï¼Œä¸¢ä¸€ä¸ª UDP åŒ…å°±ä¼šè®©æ‰€æœ‰æµçš„å¤´éƒ¨è§£ç å¡ä½ï¼Œå› æ­¤ IETF ä¸º HTTP/3 è®¾è®¡äº† QPACK æ¥â€œé¿å¼€é˜Ÿå¤´é˜»å¡ (Head-of-Line Blocking, HoL)â€ã€‚ è¿æ¥è¿ç§»ã€‚é€šè¿‡ Connection ID è¯†åˆ«ä¼šè¯ï¼ŒIP æˆ–ç«¯å£æ”¹å˜ï¼ˆå¦‚ç§»åŠ¨ç½‘ç»œ/Wi-Fi åˆ‡æ¢ï¼‰æ— éœ€é‡æ–°å»ºç«‹è¿æ¥ã€‚ ä½¿ç”¨ HTTP3 çš„ç½‘ç«™ï¼š
...</p></div><footer class=entry-footer><span title='2025-06-27 10:12:12 +0800 CST'>June 27, 2025</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;418 words&nbsp;Â·&nbsp;Me, LLM</footer><a class=entry-link aria-label="post link to NGINX å¯ç”¨ HTTP/3" href=https://zyf.im/2025/06/27/nginx-enable-http3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åœ¨æœ¬åœ°ç¯å¢ƒä½¿ç”¨ HTTPS</h2></header><div class=entry-content><p>å…¬ç½‘ç¯å¢ƒä½¿ç”¨ HTTPS å‚è€ƒï¼šä½¿ç”¨ Certbot è·å– Letâ€™s Encrypt é¢å‘çš„ TLS è¯ä¹¦ ï½œ ZYF.IMã€‚
ç®€ä»‹ HTTPSï¼ˆHyperText Transfer Protocol Secureï¼‰æ˜¯åœ¨ HTTP ä¹‹ä¸Šé€šè¿‡ TLS/SSL å®ç°åŠ å¯†çš„å®‰å…¨é€šä¿¡åè®®ï¼Œç”¨æ¥ä¿æŠ¤æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®æœºå¯†æ€§ã€å®Œæ•´æ€§ä¸èº«ä»½å¯ä¿¡æ€§ã€‚
å¼€å§‹å®éªŒ mkcert ä¼šåœ¨æœ¬åœ°ç”Ÿæˆä¸€å¥—æ ¹ CAï¼ˆåŒ…å«æ ¹è¯ä¹¦å’Œç§é’¥ï¼‰ï¼Œå¹¶æŠŠæ ¹è¯ä¹¦å¯¼å…¥ç³»ç»Ÿ/æµè§ˆå™¨çš„ä¿¡ä»»åˆ—è¡¨ã€‚éšåï¼Œå®ƒç”¨è¿™å¥— CA çš„ç§é’¥ä¸º localhost ç­‰åŸŸåç­¾å‘æœåŠ¡å™¨è¯ä¹¦ï¼›å› ä¸ºæ ¹è¯ä¹¦å·²è¢«ä¿¡ä»»ï¼Œæµè§ˆå™¨è®¿é—®æ—¶å°±ä¼šæŠŠæœåŠ¡å™¨è¯ä¹¦è§†ä¸ºå¯ä¿¡ã€‚
brew install mkcert mkcert -install mkcert localhost # The certificate is at "./localhost.pem" and the key at "./localhost-key.pem" âœ… # vi default.conf server { listen 443 ssl; server_name localhost; ssl_certificate /etc/ssl/certs/localhost.pem; ssl_certificate_key /etc/ssl/certs/localhost-key.pem; # åªå…è®¸ TLSv1.2 å’Œ TLSv1.3 åè®®ï¼Œæ˜¾ç¤ºç¦æ­¢ TLSv1.0 å’Œ TLSv1.1 åè®® ssl_protocols TLSv1.2 TLSv1.3; # åªä¿ç•™é«˜å¼ºåº¦ã€å¸¦èº«ä»½éªŒè¯ã€ä¸”ä¸ä½¿ç”¨ MD5 çš„ TLS 1.2ï¼ˆåŠä»¥ä¸‹ï¼‰å¥—ä»¶ ssl_ciphers HIGH:!aNULL:!MD5; # ä¼˜å…ˆä½¿ç”¨æœåŠ¡å™¨ç«¯åŠ å¯†å¥—ä»¶ ssl_prefer_server_ciphers on; location / { root /usr/share/nginx/html; index index.html index.htm; } } docker run -d --name nginx-ssl \ -p 8443:443 \ -v ./default.conf:/etc/nginx/conf.d/default.conf:ro \ -v ./localhost.pem:/etc/ssl/certs/localhost.pem:ro \ -v ./localhost-key.pem:/etc/ssl/certs/localhost-key.pem:ro \ nginx:alpine # docker rm -f nginx-ssl # docker container restart nginx-ssl æµ‹è¯• æ¸¸è§ˆå™¨ æ¸¸è§ˆå™¨è®¿é—® https://localhost:8443/ï¼Œå¦‚æœè¯ä¹¦æ˜¯ç»¿è‰²çš„ï¼Œè¯´æ˜æˆåŠŸäº†ã€‚
...</p></div><footer class=entry-footer><span title='2025-06-26 12:00:00 +0800 CST'>June 26, 2025</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;691 words&nbsp;Â·&nbsp;Me, LLM</footer><a class=entry-link aria-label="post link to åœ¨æœ¬åœ°ç¯å¢ƒä½¿ç”¨ HTTPS" href=https://zyf.im/2025/06/26/use-https-in-local-environment/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>PHP Migrating 8.3 to 8.4</h2></header><div class=entry-content><p>ç®€ä»‹ PHP 8.4 å¼•å…¥äº†è®¸å¤šæ–°ç‰¹æ€§ï¼Œå¦‚å±æ€§é’©å­ï¼ˆProperty Hooksï¼‰ã€éå¯¹ç§°å¯è§æ€§ï¼ˆAsymmetric Visibilityï¼‰ä»¥åŠæ›´æ–°çš„ DOM API ç­‰ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸»è¦å˜åŒ–å’Œå¦‚ä½•è¿›è¡Œè¿ç§»ã€‚
å‚è€ƒèµ„æº åœ¨çº¿æµ‹è¯•ç¯å¢ƒï¼šhttps://onlinephp.io/ å®˜æ–¹å‘å¸ƒè¯´æ˜ï¼šhttps://www.php.net/releases/8.4/en.php è¿ç§»æŒ‡å—ï¼šhttps://www.php.net/manual/en/migration84.php æ›´æ–°è¯¦æƒ…ï¼šhttps://php.watch/versions/8.4 PHP 8.4 æ–°ç‰¹æ€§ å±æ€§é’©å­ä¸éå¯¹ç§°å¯è§æ€§ // å±æ€§é’©å­ï¼ˆProperty Hooksï¼‰ä¸éå¯¹ç§°å¯è§æ€§ï¼ˆAsymmetric Visibilityï¼‰ class User { private bool $isModified = false; public function __construct(public private(set) string $first, private string $last) { } public string $fullName { get => $this->first . " " . $this->last; set { [$this->first, $this->last] = explode(' ', $value, 2); $this->isModified = true; } } } $user = new User("Ming", "Li"); echo $user->fullName; // è¾“å‡º: Ming Li $user->fullName = "Hong Xiao"; echo $user->fullName; // è¾“å‡º: Hong Xiao // éå¯¹ç§°å¯è§æ€§ç¤ºä¾‹ echo $user->first; // è¾“å‡º: Hong $user->first = "Hua"; // é”™è¯¯: Fatal error: Uncaught Error: Cannot modify private(set) property User::$first å±æ€§é’©å­å…è®¸æˆ‘ä»¬å®šä¹‰å±æ€§çš„è·å–å’Œè®¾ç½®è¡Œä¸ºï¼Œè€Œéå¯¹ç§°å¯è§æ€§å…è®¸æˆ‘ä»¬ä¸ºå±æ€§è®¾ç½®ä¸åŒçš„è¯»å†™æƒé™ã€‚åœ¨ä¸Šä¾‹ä¸­ï¼Œ$first å±æ€§å¯ä»¥å…¬å¼€è¯»å–ä½†åªèƒ½ç§æœ‰å†™å…¥ã€‚
å¯ç©ºç±»å‹è§£åŒ… PHP 8.4 å¼•å…¥äº†å¯ç©ºç±»å‹è§£åŒ…æ“ä½œç¬¦ ??=ï¼Œå¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­è§£åŒ…å¯ç©ºå€¼ï¼š
...</p></div><footer class=entry-footer><span title='2025-02-01 17:42:42 +0800 CST'>February 1, 2025</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;499 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to PHP Migrating 8.3 to 8.4" href=https://zyf.im/2025/02/01/php-migrating-83-to-84/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>PHP Migrating 8.2 to 8.3</h2></header><div class=entry-content><p>å®éªŒç¯å¢ƒï¼šhttps://onlinephp.io/ https://www.php.net/releases/8.3/en.php https://www.php.net/manual/en/migration83.php https://php.watch/versions/8.3 PHP 8.3 contains many new features, such as explicit typing of class constants, deep-cloning of readonly properties and additions to the randomness functionality.
New Features 8.3 // Typed class constants // Include class, trait, interface, enum trait TestTrait { final protected const string TEST = 'test'; } interface TestInterface { public const string TEST = 'test'; } enum TestEnum: string { public const string TEST = 'test'; } // Similar to return types, class constant types can also be "narrowed", or kept the same in a sub-class or an implementation. This follows LSP. class ParentClass { public const string|int VALUE = 'MyValue'; } class ChildClass extends ParentClass { public const string VALUE = 'MyValue'; } json_validate('[1, 2, 3]'); // true json_validate('{1, 2, 3]'); // false // Dynamic class constant and Enum member fetch support class Foo { const PHP = 'PHP 8.3'; } $searchableConstant = 'PHP'; echo constant(Foo::class . "::{$searchableConstant}"); echo Foo::{$searchableConstant}; // instead of `constant()` // Random extension // public function getFloat( // float $min, float $max, // \Random\IntervalBoundary $boundary = \Random\IntervalBoundary::ClosedOpen // ): float // // enum IntervalBoundary { // case ClosedOpen; // case ClosedClosed; // case OpenClosed; // case OpenOpen; // } $rng = new Random\Randomizer(); echo $rng->getFloat(0, 10, \Random\IntervalBoundary::OpenOpen); // 6.7810757668383 // Generate a random number in the range 0 &lt;= and &lt; 1: $rng = new Random\Randomizer(); echo $rng->nextFloat(); // 0.21185336351144 // Returns a random number sequence of a requested length ($length parameter), only containing a bytes from the requested series of bytes ($string parameter). $rng = new Random\Randomizer(); $chars = 'AEIOU'; echo $rng->getBytesFromString($chars, 1); // "E" echo $rng->getBytesFromString($chars, 5); // "AIIEO" // #[\Override] attribute // PHP enforces that the targeted class method must be overriding or implementing a parent/interface method. class ParentClass { protected function demo() {} } class ChildClass extends ParentClass { #[\Override] protected function demo() {} // âœ… æ˜ç¡®è¦†ç›– #[\Override] protected function demmo() {} // âŒ Fatal error (æ‹¼å†™é”™è¯¯) } New Functions 8.3 // Pad a multibyte string to a certain length with another multibyte string echo mb_str_pad('ä¸­å›½', 6, 'çˆ±', STR_PAD_RIGHT) . "\n"; echo mb_str_pad('ä¸­å›½', 6, 'çˆ±', STR_PAD_LEFT) . "\n"; echo mb_str_pad('ä¸­å›½äºº', 6, 'çˆ±', STR_PAD_BOTH) . "\n"; // ä¸­å›½çˆ±çˆ±çˆ±çˆ± // çˆ±çˆ±çˆ±çˆ±ä¸­å›½ // çˆ±ä¸­å›½äººçˆ±çˆ± Backward Incompatible Changes 8.3 // Assigning a negative index n to an empty array will now make sure that the next index is n + 1 instead of 0. $arr = []; $arr[-5] = 'a'; $arr[] = 'b'; var_dump($arr); // PHP8.3 â†’ [-5 => 'a', -4 => 'b'] // PHP &lt;8.3 â†’ [-5 => 'a', 0 => 'b'] â€“ EOF â€“
...</p></div><footer class=entry-footer><span title='2024-08-01 17:37:13 +0800 CST'>August 1, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;426 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to PHP Migrating 8.2 to 8.3" href=https://zyf.im/2024/08/01/php-migrating-82-to-83/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>PHP Migrating 8.1 to 8.2</h2></header><div class=entry-content><p>å®éªŒç¯å¢ƒï¼šhttps://onlinephp.io/ https://www.php.net/releases/8.2/en.php https://www.php.net/manual/en/migration82.php https://php.watch/versions/8.2 https://github.com/symfony/polyfill/tree/1.x/src/Php82 PHP 8.2 brings type-system improvements for expressive and fine-grained type-safety, readonly classes, sensitive parameter redaction support, new random extension, and many new features along with several changes to streamline and modernize PHP language.
New Features 8.2 // Readonly Classes // Complete class properties become immutable when declared readonly readonly class User { public function __construct(public string $username, public string $email) { } } // All properties automatically become readonly $user = new User('john_doe', 'john@example.com'); $user->email = 'new@example.com'; // Fatal error: Uncaught Error: Cannot modify readonly property User::$email // Combine union and intersection types using Disjunctive Normal Form // æå–èŒƒå¼ï¼Œå…è®¸é€šè¿‡ |ï¼ˆè”åˆï¼‰å’Œ &ï¼ˆäº¤å‰ï¼‰è¿ç®—ç¬¦ç»„åˆç±»å‹ function process((Countable&amp;Iterator)|null $item) { return $item; } // Use null, true, false as independent types function alwaysFalse(): false {} function alwaysNull(): null {} function alwaysTrue(): true {} // Define constants directly in traits trait NetworkTrait { public const TIMEOUT = 60; } // Hide sensitive data in stack traces function hashPassword(#[\SensitiveParameter] string $password) { debug_print_backtrace(); } hashPassword('secret123'); // Before #0 /home/user/scripts/code.php(7): hashPassword('secret123') // PHP8.2 #0 /home/user/scripts/code.php(7): hashPassword(Object(SensitiveParameterValue)) // Consolidated RNG functions with OOP interface $randomizer = new \Random\Randomizer(); echo $randomizer->getInt(1, 100); // Random integer New Functions 8.2 // Parses any data size recognized by PHP INI values ini_parse_quantity('256M'); // 268435456 Deprecated Features 8.2 // ${var} String Interpolation Deprecated $name = 'Li'; echo "Hello ${name}"; // should be `{$name}` // Deprecated: Using ${var} in strings is deprecated, use {$var} instead $var = 'name'; echo "Hello ${$var}"; // should be `{$$var}` // Deprecated: Using ${expr} (variable variables) in strings is deprecated, use {${expr}} â€“ EOF â€“
...</p></div><footer class=entry-footer><span title='2024-07-01 09:24:50 +0800 CST'>July 1, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;260 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to PHP Migrating 8.1 to 8.2" href=https://zyf.im/2024/07/01/php-migrating-81-to-82/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>MongoDB é«˜æ‰‹è¯¾</h2></header><div class=entry-content><p>04 ç‰¹è‰²åŠä¼˜åŠ¿ å¯¹è±¡æ¨¡å‹ï¼Œå¿«é€Ÿå“åº”ä¸šåŠ¡å˜åŒ–ï¼š
å¤šå½¢æ€§ï¼šåŒä¸€ä¸ªé›†åˆä¸­å¯ä»¥åŒ…å«ä¸åŒå­—æ®µï¼ˆç±»å‹ï¼‰çš„æ–‡æ¡£å¯¹è±¡ã€‚ åŠ¨æ€æ€§ï¼šçº¿ä¸Šä¿®æ”¹æ•°æ®æ¨¡å¼ï¼Œä¿®æ”¹æ˜¯åº”ç”¨ä¸æ•°æ®åº“å‡æ— é¡»ä¸‹çº¿ã€‚ æ•°æ®æ²»ç†ï¼šæ”¯æŒä½¿ç”¨JSONSchema æ¥è§„èŒƒæ•°æ®æ¨¡å¼ã€‚åœ¨ä¿è¯æ¨¡å¼çµæ´»åŠ¨æ€çš„å‰æä¸‹ï¼Œæä¾›æ•°æ®æ²»ç†èƒ½åŠ›ã€‚ å¿«é€Ÿçš„å¼€å‘ï¼š
åªå­˜å‚¨åœ¨ä¸€ä¸ªå­˜å‚¨åŒºè¯»å†™ã€‚ åèŒƒå¼ã€æ— å…³è”çš„ç»„ç»‡æå¤§ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ã€‚ ç¨‹åº API è‡ªç„¶ï¼Œå¼€å‘é€Ÿåº¦å¿«ã€‚ åŸç”Ÿçš„é«˜å¯ç”¨ï¼š
Replica Set - 2 to 50 ä¸ªæˆå‘˜ï¼Œå»ºè®®å•æ•°ã€‚ è‡ªæ¢å¤ã€‚ å¤šä¸­å¿ƒå®¹ç¾èƒ½åŠ›ã€‚ æ»šåŠ¨æœåŠ¡ï¼Œæœ€å°åŒ–æœåŠ¡ç»ˆç«¯ã€‚ æ¨ªå‘æ‰©å±•èƒ½åŠ›ï¼š
éœ€è¦çš„æ—¶å€™æ— ç¼æ‰©å±•ã€‚ åº”ç”¨å…¨é€æ˜ã€‚ å¤šç§æ•°æ®åˆ†å¸ƒç­–ç•¥ã€‚ è½»æ¾æ”¯æŒ TB-PB æ•°é‡çº§ã€‚ 06 åŸºæœ¬æ“ä½œ cloud.mongodb.com äº‘æœåŠ¡ æ ·æœ¬æ•°æ® | geektime-mongodb-course tar -xvf dump.tar.gz mongorestore --uri="mongodb://root:root@10.130.0.12/?&amp;authMechanism=SCRAM-SHA-1" // æ’å…¥ db.fruit.insertOne({name: "apple"}) db.fruit.insertMany([ {name: "apple"}, {name: "pear"}, {name: "orange"}, ]) // æŸ¥è¯¢ db.customers.find({username: "fmiller", name: "Elizabeth Ray"}) db.customers.find({username: /^f/}) db.customers.find({$or: [{username: /^f/}, {name: /^E/}]}) a &lt;> 1 {a: {$ne: 1}} a > 1 {a: {$gt: 1}} a >= 1 {a: {$gte: 1}} a &lt; 1 {a: {$lt: 1}} a &lt;= 1 {a: {$lte: 1}} a=1 OR b=1 {$or: [{a: 1}, {b: 1}]} a IS NULL {a: {$exists: false}} a IS (1,2,3) {a: {$in: [1, 2, 3]}} // åŒæ—¶æ»¡è¶³ {$eleMatch: {"city": "Rome", "country": "USA"}} // æŠ•å½± projection // like select db.customers.find({username: /^f/}, {name: 0, email: 0}) db.customers.find({username: /^f/}, {_id: 1, name: 1}) // remove db.customers.remove({username: "abrown"}) // update db.customers.updateOne({username: "fmiller"}, {$set: {from: "China"}}) db.customers.updateMany({username: "fmiller"}, {$set: {from: "China"}}) // $set $unset // $push $pushAll $pop æ•°ç»„æ“ä½œ // $pull $pullAll å¦‚æœåŒ¹é…ï¼Œä»æ•°ç»„ä¸­åˆ é™¤ç›¸åº”çš„å¯¹è±¡ // $addToSet å¦‚æœä¸å­˜åœ¨åˆ™å¢åŠ ä¸€ä¸ªå€¼åˆ°æ•°ç»„ // drop db.fruit.drop() show collections db db.dropDatabase() show dbs 08 èšåˆæŸ¥è¯¢ Aggregation Framework
...</p></div><footer class=entry-footer><span title='2023-04-19 10:47:10 +0800 CST'>April 19, 2023</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;1333 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to MongoDB é«˜æ‰‹è¯¾" href=https://zyf.im/2023/04/19/mongodb-course/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>æ­£åˆ™è¡¨è¾¾å¼</h2></header><div class=entry-content><p>00 regex101 regulex ihateregex 01 å…ƒå­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼ â€”â€” å­—ç¬¦ä¸²çš„è§„åˆ™ã€‚
å…ƒå­—ç¬¦å°±æ˜¯æŒ‡é‚£äº›åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„ä¸“ç”¨å­—ç¬¦ã€‚
ç‰¹æ®Šå•å­—ç¬¦ . ä»»æ„å­—ç¬¦ï¼ˆæ¢è¡Œé™¤å¤–ï¼‰ \d ä»»æ„æ•°å­— \D ä»»æ„éæ•°å­— \w A-Za-z0-9_ \W \s ç©ºç™½ç¬¦ \S ç©ºç™½ç¬¦ \r å›è½¦ç¬¦ \n æ¢è¡Œç¬¦ \f æ¢é¡µç¬¦ \t åˆ¶è¡¨ç¬¦ \v å‚ç›´åˆ¶è¡¨ç¬¦ èŒƒå›´ | æˆ– [abc] å¤šé€‰ä¸€ [a-z] ä¹‹é—´ [^abc] å–åï¼Œä¸èƒ½æ˜¯æ‹¬å·ä¸­çš„ä»»æ„å•ä¸ªå…ƒç´  é‡è¯ * 0&lt;= + 1&lt;= ? 0æˆ–1 {m} m {m,} m&lt;= {m,n} m-n 02 é‡è¯ä¸è´ªå©ª è´ªå©ª(Greedy) *ï¼šåŒ¹é…æœ€é•¿ã€‚åœ¨è´ªå©ªé‡è¯æ¨¡å¼ä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šå°½å¯èƒ½é•¿åœ°å»åŒ¹é…ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸”ä¼šå›æº¯ã€‚
preg_match_all("/a*/i", "aaabb", $matches); var_dump($matches); éè´ªå©ª(Reluctant) +?ï¼šåŒ¹é…æœ€çŸ­ã€‚åœ¨éè´ªå©ªé‡è¯æ¨¡å¼ä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šåŒ¹é…å°½å¯èƒ½çŸ­çš„å­—ç¬¦ä¸²ã€‚
ENVï¼šPython3
import re re.findall(r'a*', 'aaabb') # è´ªå©ªæ¨¡å¼ # ['aaa', '', '', ''] re.findall(r'a*?', 'aaabb') # éè´ªå©ªæ¨¡å¼ # ['', 'a', '', 'a', '', 'a', '', '', ''] re.findall(r'".+"', '"the little cat" is a toy, it lokks "a little bad"') # è´ªå©ªæ¨¡å¼ # ['"the little cat" is a toy, it lokks "a little bad"'] re.findall(r'".+?"', '"the little cat" is a toy, it lokks "a little bad"') # éè´ªå©ªæ¨¡å¼ # ['"the little cat"', '"a little bad"'] ç‹¬å æ¨¡å¼(Possessive) ++ï¼šåŒè´ªå©ªä¸€æ ·åŒ¹é…æœ€é•¿ã€‚ä¸è¿‡åœ¨ç‹¬å é‡è¯æ¨¡å¼ä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°½å¯èƒ½é•¿åœ°å»åŒ¹é…å­—ç¬¦ä¸²ï¼Œä¸€æ—¦åŒ¹é…ä¸æˆåŠŸå°±ä¼šç»“æŸåŒ¹é…è€Œ ä¸ä¼šå›æº¯ã€‚
...</p></div><footer class=entry-footer><span title='2023-03-01 15:31:15 +0800 CST'>March 1, 2023</span>&nbsp;Â·&nbsp;7 min&nbsp;Â·&nbsp;1441 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to æ­£åˆ™è¡¨è¾¾å¼" href=https://zyf.im/2023/03/01/regular-expression-getting-started/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Kubernetes å…¥é—¨å®æˆ˜ Part3</h2></header><div class=entry-content><p>24 PersistentVolume æ•°æ®æŒä¹…åŒ– PersistentVolume å±äºé›†ç¾¤çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯å’Œ Node å¹³çº§çš„ä¸€ç§å¯¹è±¡ï¼ŒPod å¯¹å®ƒæ²¡æœ‰ç®¡ç†æƒï¼Œåªæœ‰ä½¿ç”¨æƒã€‚
StorageClass å®ƒæŠ½è±¡äº†ç‰¹å®šç±»å‹çš„å­˜å‚¨ç³»ç»Ÿï¼ˆæ¯”å¦‚ Cephã€NFSï¼‰ï¼Œåœ¨ PVC å’Œ PV ä¹‹é—´å……å½“â€œåè°ƒäººâ€çš„è§’è‰²ï¼Œå¸®åŠ© PVC æ‰¾åˆ°åˆé€‚çš„ PVã€‚
# vim host-path-pv-pvc.yml apiVersion: v1 kind: PersistentVolume metadata: # åªæœ‰ 10MB å®¹é‡çš„å­˜å‚¨è®¾å¤‡ name: host-10m-pv spec: # kubectl explain PersistentVolume.spec.storageClassName storageClassName: host-vol # kubectl explain PersistentVolume.spec.accessModes accessModes: # ReadWriteOnceï¼šå­˜å‚¨å·å¯è¯»å¯å†™ï¼Œä½†åªèƒ½è¢«ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„ Pod æŒ‚è½½ã€‚ # ReadOnlyManyï¼šå­˜å‚¨å·åªè¯»ä¸å¯å†™ï¼Œå¯ä»¥è¢«ä»»æ„èŠ‚ç‚¹ä¸Šçš„ Pod å¤šæ¬¡æŒ‚è½½ã€‚ # ReadWriteManyï¼šå­˜å‚¨å·å¯è¯»å¯å†™ï¼Œä¹Ÿå¯ä»¥è¢«ä»»æ„èŠ‚ç‚¹ä¸Šçš„ Pod å¤šæ¬¡æŒ‚è½½ã€‚ - ReadWriteOnce capacity: # Ki/Mi/Gi storage: 10Mi hostPath: path: /tmp/host-10m-pv/ --- # PVC ä¸è¡¨ç¤ºå®é™…çš„å­˜å‚¨ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œç”³è¯·â€æˆ–è€…â€œå£°æ˜â€ apiVersion: v1 kind: PersistentVolumeClaim metadata: name: host-5m-pvc spec: storageClassName: host-vol accessModes: - ReadWriteOnce resources: requests: storage: 5Mi mkdir /tmp/host-10m-pv kubectl apply -f host-path-pv-pvc.yml kubectl get pv # NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE # host-10m-pv 10Mi RWO Retain Bound default/host-5m-pvc host-vol 4s kubectl get pvc # NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE # host-5m-pvc Bound host-10m-pv 10Mi RWO host-vol 6s # vim host-pvc-pod.yml apiVersion: v1 kind: Pod metadata: name: host-pvc-pod spec: volumes: - name: host-pvc-vol persistentVolumeClaim: claimName: host-5m-pvc containers: - name: ngx-pvc-pod image: nginx:alpine ports: - containerPort: 80 volumeMounts: - name: host-pvc-vol mountPath: /tmp kubectl apply -f host-pvc-pod.yml kubectl get pod -o wide kubectl exec -it host-pvc-pod -- sh cd /tmp && touch a.md # check in worker node /tmp/host-10m-pv/ 25 NFS ç½‘ç»œå…±äº«å­˜å‚¨ â€¦
...</p></div><footer class=entry-footer><span title='2023-02-24 17:24:14 +0800 CST'>February 24, 2023</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;205 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to Kubernetes å…¥é—¨å®æˆ˜ Part3" href=https://zyf.im/2023/02/24/kubernetes-getting-started-part3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Kubernetes å…¥é—¨å®æˆ˜ Part2</h2></header><div class=entry-content><p>17 å¤šèŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ åœ¨è…¾è®¯äº‘ TencentOS Server 3.1 (TK4) ä¸‹æµ‹è¯•ï¼š
master SA3.MEDIUM4 2 æ ¸ 4GB 5Mbps worker S5.SMALL2 1 æ ¸ 2GB 1Mbps worker S5.SMALL2 1 æ ¸ 2GB 1Mbps # ä¿®æ”¹æº https://mirrors.cloud.tencent.com/ mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.cloud.tencent.com/repo/centos7_base.repo yum clean all yum makecache # install docker yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine yum install -y yum-utils yum-config-manager \ --add-repo \ https://download.docker.com/linux/centos/docker-ce.repo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin systemctl start docker docker -v docker run hello-world ä¸€äº›å‡†å¤‡å·¥ä½œï¼š
...</p></div><footer class=entry-footer><span title='2023-02-22 17:11:27 +0800 CST'>February 22, 2023</span>&nbsp;Â·&nbsp;13 min&nbsp;Â·&nbsp;2610 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to Kubernetes å…¥é—¨å®æˆ˜ Part2" href=https://zyf.im/2023/02/22/kubernetes-getting-started-part2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Kubernetes å…¥é—¨å®æˆ˜ Part1</h2></header><div class=entry-content><p>01 åˆè¯† Docker apt install -y docker.io service docker start usermod -aG docker ${USER} docker version docker info docker ps docker pull busybox # show all images docker images https://docs.docker.com/get-started/overview/
02 è¢«éš”ç¦»çš„è¿›ç¨‹ docker pull alpine docker run -it alpine sh cat /etc/os-release éš”ç¦»èµ„æºï¼Œä¿è¯ç³»ç»Ÿå®‰å…¨ï¼Œæé«˜èµ„æºçš„åˆ©ç”¨ç‡ã€‚
èµ„æºéš”ç¦»æä¾›äº†ä¸‰ç§æŠ€æœ¯ï¼šnamespaceã€ cgroupã€chrootï¼ˆpivot_rottï¼‰ã€‚
03 å®¹å™¨åŒ–çš„åº”ç”¨ Build once, Run anywhere.
åº”ç”¨ç¨‹åºä¸å†ç›´æ¥å’Œæ“ä½œç³»ç»Ÿæ‰“äº¤é“ï¼Œè€Œæ˜¯å°è£…æˆé•œåƒï¼Œå†äº¤ç»™å®¹å™¨ç¯å¢ƒå»è¿è¡Œã€‚
# remove image docker rmi busybox # å¼€å¯ä¸€ä¸ªäº¤äº’å¼æ“ä½œçš„ Shell docker run -it busybox # åœ¨åå°è¿è¡Œ docker run -d busybox # ä¸ºå®¹å™¨èµ·ä¸€ä¸ªåå­— docker run -d --name xxx busybox # ä¸ä¿å­˜å®¹å™¨ï¼Œåªè¦è¿è¡Œå®Œæ¯•å°±è‡ªåŠ¨æ¸…é™¤ docker run --rm busybox echo "hello docker" docker stop xxx # remove container docker rm xxx # show all container docker ps -a docker exec xxx echo "hello docker" 05 é•œåƒä»“åº“ https://github.com/docker-library/official-images https://hub.docker.com/u/library ç”¨æˆ·å/åº”ç”¨å:æ ‡ç­¾ å®˜æ–¹é•œåƒç”¨æˆ·åæ˜¯ libraryã€‚
...</p></div><footer class=entry-footer><span title='2023-02-15 14:46:38 +0800 CST'>February 15, 2023</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;1790 words&nbsp;Â·&nbsp;Me</footer><a class=entry-link aria-label="post link to Kubernetes å…¥é—¨å®æˆ˜ Part1" href=https://zyf.im/2023/02/15/kubernetes-getting-started-part1/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://zyf.im/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>