[{"title":"Yii2 æºç é˜…è¯» 04 - Application","url":"/2021/09/15/reading-yii2-source-code-04/","content":"\nä¹¦æ¥ä¸Šæ–‡ `yii\\web\\Application` ç±»çš„å±‚çº§ç»“æ„ï¼š\n\n```bash\nyii\\base\\Configurable\n|--- yii\\base\\BaseObject\n     |--- yii\\base\\Component\n          |--- yii\\di\\ServiceLocator\n               |--- yii\\base\\Module\n                    |--- yii\\base\\Application\n                         |--- yii\\web\\Application\n```\n\n## yii\\base\\Application\n\nApplication is the base class for all application classes.\n\n> å‚è§ï¼š[åº”ç”¨ï¼ˆApplicationsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-applications)\n\n<img src=\"https://www.yiiframework.com/doc/guide/2.0/zh-cn/images/application-lifecycle.png\" />\n\nè·¯å¾„å±æ€§ï¼š\n\n- `@property string $basePath` The root directory of the application.\n- `@property string $runtimePath` The directory that stores runtime files. Defaults to the \"runtime\" subdirectory under `basePath`.\n- `@property string $vendorPath` The directory that stores vendor files. Defaults to \"vendor\" directory under `basePath`.\n\né…ç½®å±æ€§ï¼š\n\n- `@property-write array $container` Values given in terms of name-value pairs. This property is write-only.\n- `@property string $timeZone` The time zone used by this application.\n- `@property-read string $uniqueId` The unique ID of the module.\n\nç»„ä»¶å±æ€§ï¼š\n\n- \\yii\\web\\AssetManager $assetManager\n- \\yii\\rbac\\ManagerInterface $authManager\n- \\yii\\caching\\CacheInterface $cache\n- \\yii\\db\\Connection $db\n- \\yii\\web\\ErrorHandler|\\yii\\console\\ErrorHandler $errorHandler\n- \\yii\\i18n\\Formatter $formatter\n- \\yii\\i18n\\I18N $i18n\n- \\yii\\log\\Dispatcher $log\n- \\yii\\mail\\MailerInterface $mailer\n- \\yii\\web\\Request|\\yii\\console\\Request $request\n- \\yii\\web\\Response|\\yii\\console\\Response $response\n- \\yii\\base\\Security $security\n- \\yii\\web\\UrlManager $urlManager\n- View|\\yii\\web\\View $view\n\n$stateï¼š\n\n- STATE_BEGIN 0\n- STATE_INIT 1\n- STATE_BEFORE_REQUEST 2\n- STATE_HANDLING_REQUEST 3\n- STATE_AFTER_REQUEST 4\n- STATE_SENDING_RESPONSE 5\n- STATE_END 6\n\n### æ„é€ å‡½æ•°\n\n```php\n/**\n * Constructor.\n * @param array $config name-value pairs that will be used to initialize the object properties.\n * Note that the configuration must contain both [[id]] and [[basePath]].\n * @throws InvalidConfigException if either [[id]] or [[basePath]] configuration is missing.\n */\npublic function __construct($config = [])\n{\n    // ç»‘å®š app\n    Yii::$app = $this;\n    // è®¾ç½®å½“å‰è¯·æ±‚è¿™ä¸ª module class çš„å®ä¾‹ã€‚\n    static::setInstance($this);\n    // è®¾ç½®çŠ¶æ€ä¸º begin 0\n    $this->state = self::STATE_BEGIN;\n    // éªŒè¯ id basePath å¿…å¡«ï¼Œè®¾ç½®é…ç½®ï¼Œæ³¨å†Œæ ¸å¿ƒ components\n    $this->preInit($config);\n    // æ³¨å†Œå¼‚å¸¸å¤„ç†\n    $this->registerErrorHandler($config);\n    // BaseObject construct\n    Component::__construct($config);\n}\n\n/**\n * è®¾ç½®å½“å‰è¯·æ±‚è¿™ä¸ª module class çš„å®ä¾‹ã€‚\n * @param Module|null $instance the currently requested instance of this module class.\n * If it is `null`, the instance of the calling class will be removed, if any.\n */\npublic static function setInstance($instance)\n{\n    if ($instance === null) {\n        unset(Yii::$app->loadedModules[get_called_class()]);\n    } else {\n        // loadedModules: list of loaded modules indexed by their class names.\n        Yii::$app->loadedModules[get_class($instance)] = $instance;\n    }\n}\n\n/**\n * Pre-initializes the application.\n * è°ƒç”¨æ­¤æ–¹æ³•å¼€å§‹çš„ application çš„æ„é€ å‡½æ•°ã€‚\n * å®ƒåˆå§‹åŒ–ä¸€äº›é‡è¦çš„ application propertiesã€‚\n * å¦‚æœä½ é‡å†™è¿™ä¸ªæ–¹æ³•,è¯·ç¡®ä¿ä½ è°ƒç”¨çˆ¶å®ç°ã€‚\n * @param array $config the application configuration\n * @throws InvalidConfigException if either [[id]] or [[basePath]] configuration is missing.\n */\npublic function preInit(&$config)\n{\n    // id å¿…å¡«\n    if (!isset($config['id'])) {\n        throw new InvalidConfigException('The \"id\" configuration for the Application is required.');\n    }\n    // basePath å¿…å¡«\n    if (isset($config['basePath'])) {\n        $this->setBasePath($config['basePath']);\n        unset($config['basePath']);\n    } else {\n        throw new InvalidConfigException('The \"basePath\" configuration for the Application is required.');\n    }\n\n    if (isset($config['vendorPath'])) {\n        $this->setVendorPath($config['vendorPath']);\n        unset($config['vendorPath']);\n    } else {\n        // set \"@vendor\"\n        $this->getVendorPath();\n    }\n    if (isset($config['runtimePath'])) {\n        $this->setRuntimePath($config['runtimePath']);\n        unset($config['runtimePath']);\n    } else {\n        // set \"@runtime\"\n        $this->getRuntimePath();\n    }\n\n    if (isset($config['timeZone'])) {\n        $this->setTimeZone($config['timeZone']);\n        unset($config['timeZone']);\n    } elseif (!ini_get('date.timezone')) {\n        $this->setTimeZone('UTC');\n    }\n\n    if (isset($config['container'])) {\n        $this->setContainer($config['container']);\n        unset($config['container']);\n    }\n\n    // merge core components with custom components\n    // coreComponents:\n    // [\n    //   'log' => ['class' => 'yii\\log\\Dispatcher'],\n    //   'view' => ['class' => 'yii\\web\\View'],\n    //   'formatter' => ['class' => 'yii\\i18n\\Formatter'],\n    //   'i18n' => ['class' => 'yii\\i18n\\I18N'],\n    //   'mailer' => ['class' => 'yii\\swiftmailer\\Mailer'],\n    //   'urlManager' => ['class' => 'yii\\web\\UrlManager'],\n    //   'assetManager' => ['class' => 'yii\\web\\AssetManager'],\n    //   'security' => ['class' => 'yii\\base\\Security'],\n    // ];\n    foreach ($this->coreComponents() as $id => $component) {\n        if (!isset($config['components'][$id])) {\n            $config['components'][$id] = $component;\n        } elseif (is_array($config['components'][$id]) && !isset($config['components'][$id]['class'])) {\n            $config['components'][$id]['class'] = $component['class'];\n        }\n    }\n}\n\n/**\n * æ³¨å†Œ errorHandler ç»„ä»¶ä½œä¸ºä¸€ä¸ª PHP é”™è¯¯å¤„ç†ç¨‹åºã€‚\n * @param array $config application config\n */\nprotected function registerErrorHandler(&$config)\n{\n    // åœ¨ BaseYii ä¸­ é»˜è®¤æ˜¯ true\n    if (YII_ENABLE_ERROR_HANDLER) {\n        if (!isset($config['components']['errorHandler']['class'])) {\n            echo \"Error: no errorHandler component is configured.\\n\";\n            exit(1);\n        }\n        $this->set('errorHandler', $config['components']['errorHandler']);\n        unset($config['components']['errorHandler']);\n        // \\yii\\web\\ErrorHandler|\\yii\\console\\ErrorHandler\n        //\n        $this->getErrorHandler()->register();\n    }\n}\n```\n\nå¼‚å¸¸å¤„ç† ErrorHandlerï¼š\n\n```php\n/**\n * Register this error handler.\n * @since 2.0.32 this will not do anything if the error handler was already registered\n */\npublic function register()\n{\n    if (!$this->_registered) {\n        ini_set('display_errors', false);\n        set_exception_handler([$this, 'handleException']);\n        if (defined('HHVM_VERSION')) {\n            set_error_handler([$this, 'handleHhvmError']);\n        } else {\n            set_error_handler([$this, 'handleError']);\n        }\n        if ($this->memoryReserveSize > 0) {\n            $this->_memoryReserve = str_repeat('x', $this->memoryReserveSize);\n        }\n        register_shutdown_function([$this, 'handleFatalError']);\n        $this->_registered = true;\n    }\n}\n```\n\n### init\n\n```php\n/**\n * {@inheritdoc}\n */\npublic function init()\n{\n    $this->state = self::STATE_INIT;\n    $this->bootstrap();\n}\n\n/**\n * åˆå§‹åŒ–æ‰©å±•å¹¶æ‰§è¡Œå¼•å¯¼ç»„ä»¶ã€‚\n * This method is called by [[init()]] after the application has been fully configured.\n * If you override this method, make sure you also call the parent implementation.\n */\nprotected function bootstrap()\n{\n    // æ³¨å†Œç»‘å®š extensions\n    if ($this->extensions === null) {\n        // @vendor/yiisoft/extensions.php:\n        // return array (\n        //   'yiisoft/yii2-bootstrap4' =>\n        //   array (\n        //     'name' => 'yiisoft/yii2-bootstrap4',\n        //     'version' => '2.0.10.0',\n        //     'alias' =>\n        //     array (\n        //       '@yii/bootstrap4' => $vendorDir . '/yiisoft/yii2-bootstrap4/src',\n        //     ),\n        //   ),\n        //   'yiisoft/yii2-faker' =>\n        //   array (\n        //     'name' => 'yiisoft/yii2-faker',\n        //     'version' => '2.0.5.0',\n        //     'alias' =>\n        //     array (\n        //       '@yii/faker' => $vendorDir . '/yiisoft/yii2-faker/src',\n        //     ),\n        //   ),\n        //   ...\n        // );\n        $file = Yii::getAlias('@vendor/yiisoft/extensions.php');\n        $this->extensions = is_file($file) ? include $file : [];\n    }\n    foreach ($this->extensions as $extension) {\n        if (!empty($extension['alias'])) {\n            foreach ($extension['alias'] as $name => $path) {\n                Yii::setAlias($name, $path);\n            }\n        }\n        if (isset($extension['bootstrap'])) {\n            $component = Yii::createObject($extension['bootstrap']);\n            // æ­¤ $component å¦‚æœå®ç°äº† BootstrapInterface æ‰§è¡Œ bootstrap æ–¹æ³•\n            if ($component instanceof BootstrapInterface) {\n                Yii::debug('Bootstrap with ' . get_class($component) . '::bootstrap()', __METHOD__);\n                $component->bootstrap($this);\n            } else {\n                Yii::debug('Bootstrap with ' . get_class($component), __METHOD__);\n            }\n        }\n    }\n\n    // $this->bootstrap: list of components that should be run during the application [[bootstrap()|bootstrapping process]].\n    // å…è®¸ä½ ç”¨æ•°ç»„æŒ‡å®šå¯åŠ¨é˜¶æ®µ bootstrapping process éœ€è¦è¿è¡Œçš„ç»„ä»¶ã€‚\n    //\n    // configuration adjustments for 'dev' environment\n    // $config['bootstrap'][] = 'debug';\n    // $config['modules']['debug'] = 'yii\\debug\\Module';\n    //\n    // æ³¨æ„ï¼šå¯åŠ¨å¤ªå¤šçš„ç»„ä»¶ä¼šé™ä½ç³»ç»Ÿæ€§èƒ½ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°è¿è¡Œå¯åŠ¨ç»„ä»¶ï¼Œ å› æ­¤è°¨æ…é…ç½®å¯åŠ¨ç»„ä»¶ã€‚\n    foreach ($this->bootstrap as $mixed) {\n        $component = null;\n        if ($mixed instanceof \\Closure) {\n            Yii::debug('Bootstrap with Closure', __METHOD__);\n            if (!$component = call_user_func($mixed, $this)) {\n                continue;\n            }\n        } elseif (is_string($mixed)) {\n            if ($this->has($mixed)) {\n                $component = $this->get($mixed);\n            } elseif ($this->hasModule($mixed)) {\n                $component = $this->getModule($mixed);\n            } elseif (strpos($mixed, '\\\\') === false) {\n                throw new InvalidConfigException(\"Unknown bootstrapping component ID: $mixed\");\n            }\n        }\n\n        if (!isset($component)) {\n            $component = Yii::createObject($mixed);\n        }\n\n        // æ­¤ $component å¦‚æœå®ç°äº† BootstrapInterface æ‰§è¡Œ bootstrap æ–¹æ³•\n        if ($component instanceof BootstrapInterface) {\n            Yii::debug('Bootstrap with ' . get_class($component) . '::bootstrap()', __METHOD__);\n            $component->bootstrap($this);\n        } else {\n            Yii::debug('Bootstrap with ' . get_class($component), __METHOD__);\n        }\n    }\n}\n```\n\n### run\n\n```php\n/**\n * Runs the application.\n * This is the main entrance of an application.\n * @return int the exit status (0 means normal, non-zero values mean abnormal)\n */\npublic function run()\n{\n    try {\n        // ä¿®æ”¹çŠ¶æ€\n        $this->state = self::STATE_BEFORE_REQUEST;\n        // æ‰§è¡Œ beforeRequest\n        $this->trigger(self::EVENT_BEFORE_REQUEST);\n\n        // ä¿®æ”¹çŠ¶æ€\n        $this->state = self::STATE_HANDLING_REQUEST;\n        // abstract: Handles the specified request.\n        $response = $this->handleRequest($this->getRequest());\n\n        // ä¿®æ”¹çŠ¶æ€\n        $this->state = self::STATE_AFTER_REQUEST;\n        // æ‰§è¡Œ afterRequest\n        $this->trigger(self::EVENT_AFTER_REQUEST);\n\n        // ä¿®æ”¹çŠ¶æ€\n        $this->state = self::STATE_SENDING_RESPONSE;\n        // å‘é€ response\n        $response->send();\n\n        // ä¿®æ”¹çŠ¶æ€\n        $this->state = self::STATE_END;\n\n        // è¿”å› response é€€å‡ºçŠ¶æ€\n        return $response->exitStatus;\n    } catch (ExitException $e) {\n        $this->end($e->statusCode, isset($response) ? $response : null);\n        return $e->statusCode;\n    }\n}\n\n/**\n * ç»ˆæ­¢ application.\n * è¯¥æ–¹æ³•æ›¿æ¢ `exit()` å‡½æ•°ï¼Œç¡®ä¿å®Œæˆåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸç»ˆæ­¢åº”ç”¨ç¨‹åº\n * @param int $status é€€å‡ºçŠ¶æ€(0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œå…¶ä»–è¡¨ç¤ºå¼‚å¸¸é€€å‡º)ã€‚\n * @param Response $response the response to be sent. If not set, the default application [[response]] component will be used.\n * @throws ExitException if the application is in testing mode\n */\npublic function end($status = 0, $response = null)\n{\n    // å¦‚æœå½“å‰çŠ¶æ€æ˜¯ STATE_BEFORE_REQUEST | STATE_HANDLING_REQUEST\n    // æ‰§è¡Œ STATE_AFTER_REQUEST\n    if ($this->state === self::STATE_BEFORE_REQUEST || $this->state === self::STATE_HANDLING_REQUEST) {\n        // è®¾ç½®ä¸º STATE_AFTER_REQUEST\n        $this->state = self::STATE_AFTER_REQUEST;\n        $this->trigger(self::EVENT_AFTER_REQUEST);\n    }\n\n    // å¦‚æœå½“å‰çŠ¶æ€ä¸æ˜¯ STATE_SENDING_RESPONSE | STATE_END\n    if ($this->state !== self::STATE_SENDING_RESPONSE && $this->state !== self::STATE_END) {\n        // è®¾ç½®ä¸º STATE_END\n        $this->state = self::STATE_END;\n        $response = $response ?: $this->getResponse();\n        $response->send();\n    }\n\n    // å¦‚æœæ˜¯ env testï¼ŒæŠ›å‡ºå¼‚å¸¸\n    if (YII_ENV_TEST) {\n        throw new ExitException($status);\n    }\n\n    exit($status);\n}\n```\n\n## yii\\web\\Application\n\n> Application is the base class for all web application classes.\n\nå±æ€§ï¼š\n\n- `@property-read ErrorHandler $errorHandler` The error handler application component.\n- `@property string $homeUrl` The homepage URL.\n- `@property-read Request $request` The request component.\n- `@property-read Response $response` The response component.\n- `@property-read Session $session` The session component.\n- `@property-read User $user` The user component.\n\nå±æ€§ï¼š\n\n- `public $defaultRoute = 'site';` the default route of this application.\n- `public $catchAll;` å®ƒæŒ‡å®šä¸€ä¸ªè¦å¤„ç†æ‰€æœ‰ç”¨æˆ·è¯·æ±‚çš„ æ§åˆ¶å™¨æ–¹æ³•ï¼Œ é€šå¸¸åœ¨ç»´æŠ¤æ¨¡å¼ä¸‹ä½¿ç”¨ï¼ŒåŒä¸€ä¸ªæ–¹æ³•å¤„ç†æ‰€æœ‰ç”¨æˆ·è¯·æ±‚ã€‚è¯¥é…ç½®ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€é¡¹æŒ‡å®šåŠ¨ä½œçš„è·¯ç”±ï¼Œå‰©ä¸‹çš„æ•°ç»„é¡¹ (key-value æˆå¯¹) æŒ‡å®šä¼ é€’ç»™åŠ¨ä½œçš„å‚æ•°ã€‚\n- `public $controller;` the currently active controller instance\n\n```php\n[\n    'catchAll' => [\n        'offline/notice',\n        'param1' => 'value1',\n        'param2' => 'value2',\n    ],\n]\n```\n\n### bootstrap\n\n```php\nprotected function bootstrap()\n{\n    $request = $this->getRequest();\n    // /pc/site/yii-app/web\n    Yii::setAlias('@webroot', dirname($request->getScriptFile()));\n    // /\n    Yii::setAlias('@web', $request->getBaseUrl());\n\n    parent::bootstrap();\n}\n```\n\n### handleRequest\n\næ ¸å¿ƒæ–¹æ³•ï¼š\n\n```php\n/**\n * Handles the specified request.\n *\n * @param Request $request the request to be handled\n *\n * @return Response the resulting response\n *\n * @throws NotFoundHttpException if the requested route is invalid\n */\npublic function handleRequest($request)\n{\n    // è·å– route params\n    if (empty($this->catchAll)) {\n        try {\n            list($route, $params) = $request->resolve();\n        } catch (UrlNormalizerRedirectException $e) {\n            $url = $e->url;\n            if (is_array($url)) {\n                if (isset($url[0])) {\n                    // ensure the route is absolute\n                    $url[0] = '/'.ltrim($url[0], '/');\n                }\n                $url += $request->getQueryParams();\n            }\n\n            return $this->getResponse()->redirect(Url::to($url, $e->scheme), $e->statusCode);\n        }\n    } else {\n        // 'catchAll' => [\n        //     'offline/notice',\n        //     'param1' => 'value1',\n        //     'param2' => 'value2',\n        // ],\n        // çº¦å®š idx 0 æ˜¯è·¯ç”±\n        $route = $this->catchAll[0];\n        $params = $this->catchAll;\n        unset($params[0]);\n    }\n\n    try {\n        Yii::debug(\"Route requested: '$route'\", __METHOD__);\n        // ç»‘å®šè·¯ç”±\n        $this->requestedRoute = $route;\n        // æ‰§è¡Œ Module->runAction\n        $result = $this->runAction($route, $params);\n        // å¦‚æœç»“æœæ˜¯ Response åˆ™ç›´æ¥è¿”å›\n        if ($result instanceof Response) {\n            return $result;\n        }\n\n        // å¦åˆ™è·å– Responseï¼Œå°†ç»“æœç»‘å®šåˆ° $response->data\n        $response = $this->getResponse();\n        if (null !== $result) {\n            $response->data = $result;\n        }\n\n        return $response;\n    } catch (InvalidRouteException $e) {\n        throw new NotFoundHttpException(Yii::t('yii', 'Page not found.'), $e->getCode(), $e);\n    }\n}\n```\n\n### coreComponents\n\n```php\npublic function coreComponents()\n{\n    return array_merge(parent::coreComponents(), [\n        'request' => ['class' => 'yii\\web\\Request'],\n        'response' => ['class' => 'yii\\web\\Response'],\n        'session' => ['class' => 'yii\\web\\Session'],\n        'user' => ['class' => 'yii\\web\\User'],\n        'errorHandler' => ['class' => 'yii\\web\\ErrorHandler'],\n    ]);\n}\n```\n\n-- EOF --\n","tags":["php","yii2"],"categories":["yii2"]},{"title":"åˆ†ç»„èšåˆ OVER PARTITION BY","url":"/2021/09/14/sql-over-partition-by/","content":"\n## åœ¨ HIVE ä¸­\n\næœ€è¿‘åœ¨ä½¿ç”¨ HIVEï¼Œéœ€è¦ç»Ÿè®¡ `å½“å¹´ç´¯è®¡å’Œ` è¿™æ ·çš„æŒ‡æ ‡ï¼Œè¯·æ•™åŒäº‹åå‘ç°äº† `OVER(PARTITION BY)` å¼€çª—å‡½æ•°ã€‚\n\nåˆ†æå‡½æ•°ç”¨äºè®¡ç®—åŸºäºç»„çš„æŸç§èšåˆå€¼ï¼Œå®ƒå’Œèšåˆå‡½æ•°çš„ä¸åŒä¹‹å¤„æ˜¯ï¼šå¯¹äºæ¯ä¸ªç»„è¿”å›å¤šè¡Œï¼Œè€Œèšåˆå‡½æ•°å¯¹äºæ¯ä¸ªç»„åªè¿”å›ä¸€è¡Œã€‚\n\nå¼€çª—å‡½æ•°æŒ‡å®šäº†åˆ†æå‡½æ•°å·¥ä½œçš„æ•°æ®çª—å£å¤§å°ï¼Œè¿™ä¸ªæ•°æ®çª—å£å¤§å°å¯èƒ½ä¼šéšç€è¡Œçš„å˜åŒ–è€Œå˜åŒ–ã€‚\n\næµ‹è¯•è¯­å¥ï¼š\n\n```sql\nCREATE TABLE default.test_over_partition (\n  `fdate` Date,\n  `year` Int,\n  `month` Int,\n  `category1` String,\n  `category2` String,\n  `income` Double\n);\n\nINSERT INTO hdp_fin_dash_ods.test_over_partition (`fdate`,`year`,`month`,`category1`,`category2`,`income`) VALUES\n('2020-01-01',2020,1,'3C','ç”µè„‘','1010'),\n('2020-01-01',2020,1,'3C','æ‰‹æœº','1011'),\n('2020-02-01',2020,2,'3C','ç”µè„‘','1012'),\n('2020-02-01',2020,2,'3C','æ‰‹æœº','1013'),\n('2020-03-01',2020,3,'3C','ç”µè„‘','1014'),\n('2020-03-01',2020,3,'3C','æ‰‹æœº','1015'),\n('2021-04-01',2021,4,'3C','ç”µè„‘','1016'),\n('2021-04-01',2021,4,'3C','æ‰‹æœº','1017'),\n('2021-05-01',2021,5,'3C','ç”µè„‘','1018'),\n('2021-05-01',2021,5,'3C','æ‰‹æœº','1019');\n\n-- æŸ¥è¯¢æ¯å¹´æ¯ category2 æ—¥ç´¯è®¡ income\n\nSELECT `fdate`,`year`,`month`,`category1`,`category2`,`income`\n,SUM(income) OVER (PARTITION BY `year`,`category1`,`category2` ORDER BY fdate) AS ttl_year_income\nFROM hdp_fin_dash_ods.test_over_partition;\n```\n\n<img src=\"https://user-images.githubusercontent.com/9289792/133225004-be0d2c88-e713-407b-b41d-da44e16ac960.png\" />\n\n## åœ¨ MySQL ä¸­\n\n> Before MySQL 8.0 you can't use window functions like ROW_NUMBER.\n\n## References\n\n- [Mysql åˆ†ç»„èšåˆå®ç° over partition by åŠŸèƒ½ | cnblogs](https://www.cnblogs.com/zhwbqd/p/4205821.html)\n- [Emulating PARTITION OVER with MySQL 5.7 | stackoverflow](https://stackoverflow.com/questions/58645949/emulating-partition-over-with-mysql-5-7)\n\n-- EOF --\n","tags":["hive","sql"]},{"title":"Yii2 æºç é˜…è¯» 03 - ServiceLocator Module","url":"/2021/07/28/reading-yii2-source-code-03/","content":"\nä¹¦æ¥ä¸Šæ–‡ `yii\\web\\Application` ç±»çš„å±‚çº§ç»“æ„ï¼š\n\n```bash\nyii\\base\\Configurable\n|--- yii\\base\\BaseObject\n     |--- yii\\base\\Component\n          |--- yii\\di\\ServiceLocator\n               |--- yii\\base\\Module\n                    |--- yii\\base\\Application\n                         |--- yii\\web\\Application\n```\n\n## yii\\di\\ServiceLocator\n\n> å‚è§ï¼š[æœåŠ¡å®šä½å™¨ï¼ˆService Locatorï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-service-locator)\n\nServiceLocator implements a [service locator](http://en.wikipedia.org/wiki/Service_locator_pattern).\n\nåœ¨é¦–æ¬¡è¯·æ±‚æŸä¸ªæœåŠ¡æ—¶ï¼ŒæœåŠ¡å®šä½å™¨åœ¨ JNDI ä¸­æŸ¥æ‰¾æœåŠ¡ï¼Œå¹¶ç¼“å­˜è¯¥æœåŠ¡å¯¹è±¡ã€‚å½“å†æ¬¡è¯·æ±‚ç›¸åŒçš„æœåŠ¡æ—¶ï¼ŒæœåŠ¡å®šä½å™¨ä¼šåœ¨å®ƒçš„ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œè¿™æ ·å¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚\n\nè¦ä½¿ç”¨ ServiceLocatorï¼Œé¦–å…ˆéœ€è¦é€šè¿‡è°ƒç”¨ set() æˆ– setComponents() å°† component IDs æ³¨å†Œåˆ°å®šä½å™¨çš„ç›¸åº”ç»„ä»¶å®šä¹‰ä¸­ã€‚\n\nç„¶åå¯ä»¥è°ƒç”¨ get() æ¥æ£€ç´¢å…·æœ‰æŒ‡å®š ID çš„ componentã€‚å®šä½å™¨å°†æ ¹æ®å®šä¹‰è‡ªåŠ¨å®ä¾‹åŒ–å’Œé…ç½® componentã€‚\n\n```php\n$locator = new \\yii\\di\\ServiceLocator;\n$locator->setComponents([\n  'db' => [\n    'class' => 'yii\\db\\Connection',\n    'dsn' => 'sqlite:path/to/file.db',\n  ],\n  'cache' => [\n    'class' => 'yii\\caching\\DbCache',\n    'db' => 'db',\n  ],\n  'search' => SolrServiceBuilder::build('127.0.0.1'),\n]);\n\n$db = $locator->get('db');  // or $locator->db\n$cache = $locator->get('cache');  // or $locator->cache\n```\n\nå› ä¸º \\yii\\base\\Module ç»§æ‰¿è‡ª ServiceLocatorï¼Œæ‰€ä»¥ modules å’Œ application éƒ½æ˜¯ service locatorsã€‚\n\n- `@property array $components` ç»„ä»¶å®šä¹‰æˆ–å·²åŠ è½½çš„ç»„ä»¶å®ä¾‹çš„åˆ—è¡¨ (ID => definition or instance).\n- `private array $_components` å•ä¾‹ç»„ä»¶ **å®ä¾‹** çš„ id ç´¢å¼•ã€‚\n- `private array $_definitions` ç»„ä»¶ **å®šä¹‰** çš„ id ç´¢å¼•ã€‚\n\n```php\n/**\n  * å‘æ­¤å®šä½å™¨æ³¨å†Œç»„ä»¶å®šä¹‰ã€‚\n  *\n  * For example,\n  *\n  * // a class name\n  * $locator->set('cache', 'yii\\caching\\FileCache');\n  *\n  * // a configuration array\n  * $locator->set('db', [\n  *     'class' => 'yii\\db\\Connection',\n  *     'dsn' => 'mysql:host=127.0.0.1;dbname=demo',\n  *     'username' => 'root',\n  *     'password' => '',\n  *     'charset' => 'utf8',\n  * ]);\n  *\n  * // an anonymous function\n  * $locator->set('cache', function ($params) {\n  *     return new \\yii\\caching\\FileCache;\n  * });\n  *\n  * // an instance\n  * $locator->set('cache', new \\yii\\caching\\FileCache);\n  *\n  * If a component definition with the same ID already exists, it will be overwritten.\n  *\n  * @param string $id         component ID (e.g. `db`).\n  * @param mixed  $definition è¦æ³¨å†Œåˆ°æ­¤å®šä½å™¨çš„ç»„ä»¶å®šä¹‰ã€‚\n  *\n  * @throws InvalidConfigException if the definition is an invalid configuration array\n  */\npublic function set($id, $definition)\n{\n    // ç§»é™¤ä¹‹å‰çš„ component å®ä¾‹\n    unset($this->_components[$id]);\n\n    if ($definition === null) {\n        // ç§»é™¤ä¹‹å‰çš„ component å®šä¹‰\n        unset($this->_definitions[$id]);\n        return;\n    }\n\n    if (is_object($definition) || is_callable($definition, true)) {\n        // an object, a class name, or a PHP callable\n        $this->_definitions[$id] = $definition;\n    } elseif (is_array($definition)) {\n        // a configuration array\n        // æ•°ç»„ä¸­å¿…é¡»æœ‰ class\n        if (isset($definition['__class'])) {\n            $this->_definitions[$id] = $definition;\n            $this->_definitions[$id]['class'] = $definition['__class'];\n            unset($this->_definitions[$id]['__class']);\n        } elseif (isset($definition['class'])) {\n            $this->_definitions[$id] = $definition;\n        } else {\n            throw new InvalidConfigException(\"The configuration for the \\\"$id\\\" component must contain a \\\"class\\\" element.\");\n        }\n    } else {\n        throw new InvalidConfigException(\"Unexpected configuration type for the \\\"$id\\\" component: \" . gettype($definition));\n    }\n}\n```\n\nçŸ¥è¯†ç‚¹ï¼š\n\n`is_callable($definition, true)` ä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°ä¸º true æ—¶ï¼Œåªæ£€æŸ¥æ ¼å¼ï¼ˆå­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼‰ï¼Œä¸æ£€æµ‹å†…å®¹ï¼ˆæ˜¯å¦çœŸçš„å­˜åœ¨ï¼Œæ˜¯å¦çœŸçš„å¯è¢«è°ƒç”¨ï¼‰ã€‚\n\n```php\nvar_dump(is_callable('ä¸æ˜¯æ–¹æ³•åçš„å­—ç¬¦ä¸²', false)); // bool(false)\nvar_dump(is_callable('ä¸æ˜¯æ–¹æ³•åçš„å­—ç¬¦ä¸²', true));  // bool(true)\n\nvar_dump(is_callable(['éšä¾¿å†™ï¼Œä¸æ˜¯å¯¹è±¡', 'éšä¾¿å†™ï¼Œä¸æ˜¯å¯¹è±¡çš„æ–¹æ³•å'], false)); // bool(false)\nvar_dump(is_callable(['éšä¾¿å†™ï¼Œä¸æ˜¯å¯¹è±¡', 'éšä¾¿å†™ï¼Œä¸æ˜¯å¯¹è±¡çš„æ–¹æ³•å'], true));  // bool(true)\n```\n\n```php\n/**\n * Registers a set of component definitions in this locator.\n */\npublic function setComponents($components)\n{\n    foreach ($components as $id => $component) {\n        $this->set($id, $component);\n    }\n}\n```\n\n```php\n/**\n  * è¿”å›å…·æœ‰æŒ‡å®š ID çš„ç»„ä»¶å®ä¾‹ã€‚\n  *\n  * @param string $id             component ID (e.g. `db`).\n  * @param bool   $throwException whether to throw an exception if `$id` is not registered with the locator before\n  *\n  * @return object|null the component of the specified ID. If `$throwException` is false and `$id` is not registered before, null will be returned.\n  *\n  * @throws InvalidConfigException if `$id` refers to a nonexistent component ID\n  *\n  * @see has()\n  * @see set()\n  */\npublic function get($id, $throwException = true)\n{\n    // å·²å®ä¾‹åŒ–è¿‡\n    if (isset($this->_components[$id])) {\n        return $this->_components[$id];\n    }\n\n    if (isset($this->_definitions[$id])) {\n        // å·²å®šä¹‰ æœªå®ä¾‹åŒ–\n        $definition = $this->_definitions[$id];\n        if (is_object($definition) && !$definition instanceof Closure) {\n            // æ˜¯å¯¹è±¡ & éé—­åŒ… ç›´æ¥èµ‹å€¼\n            return $this->_components[$id] = $definition;\n        }\n        // å®ä¾‹åŒ–æ ¸å¿ƒæ–¹æ³•\n        return $this->_components[$id] = Yii::createObject($definition);\n    } elseif ($throwException) {\n        throw new InvalidConfigException(\"Unknown component ID: $id\");\n    }\n\n    return null;\n}\n```\n\nYii åº”ç”¨ç¨‹åºæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¨¡å—æ ‘ã€‚\n\n> å‚è§ï¼š[éå†æ ‘ï¼ˆTree traversalï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-service-locator#tree-traversal)\n\n## yii\\base\\Module\n\nModule æ˜¯æ¨¡å—å’Œåº”ç”¨ç¨‹åºç±»çš„åŸºç±»ã€‚\n\nModule ä»£è¡¨ä¸€ä¸ªå­åº”ç”¨ç¨‹åºï¼Œå®ƒæœ¬èº«åŒ…å« MVC å…ƒç´ ï¼Œå¦‚æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨ç­‰ã€‚\n\nä¸€ä¸ªæ¨¡å—å¯ä»¥ç”± `modules|sub-modules` ç»„æˆã€‚\n\n> å‚è§ï¼š[æ¨¡å—](https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-modules)\n\n- @property-write array $aliases è¢«å®šä¹‰çš„åˆ«åæ•°ç»„\n- @property string $basePath module çš„æ ¹ç›®å½•\n- @property string $layoutPath å¸ƒå±€æ–‡ä»¶çš„æ ¹ç›®å½• é»˜è®¤å€¼ {viewPath}/layouts\n- @property array $modules æ¨¡å—ï¼ˆç´¢å¼•æ˜¯ IDsï¼‰\n- @property-read string $uniqueId modules çš„å”¯ä¸€ ID\n- @property string $version module çš„ç‰ˆæœ¬\n- @property string $viewPath view files çš„æ ¹ç›®å½• é»˜è®¤å€¼ {basePath}/views\n\nå±æ€§ï¼š\n\n- public $params = []; è‡ªå®šä¹‰çš„æ¨¡å—å‚æ•° (name => value)\n- public string $id; å”¯ä¸€ ID\n- public Module|null $module; è¯¥æ¨¡å—çš„çˆ¶æ¨¡å—ã€‚null è¿™ä¸ªæ¨¡å—æ²¡æœ‰çˆ¶æ¨¡å—ã€‚\n- public string|bool|null $layout;\n- public $controllerMap = [];\n- public string|null $controllerNamespace; if the namespace of this module is `foo\\bar` default `foo\\bar\\controllers`ã€‚\n- public $defaultRoute = 'default'; The route may consist of child module ID, controller ID, and/or action ID.\n- private $\\_version;\n\n> å‚è§ï¼š[ç±»è‡ªåŠ¨åŠ è½½ï¼ˆAutoloadingï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-autoloading)\n\näº‹ä»¶ï¼š\n\n- EVENT_BEFORE_ACTION before executing a controller action\n- EVENT_AFTER_ACTION after executing a controller action\n\n```php\npublic function __construct($id, $parent = null, $config = [])\n{\n    $this->id = $id;\n    $this->module = $parent;\n    parent::__construct($config);\n}\n```\n\nçŸ¥è¯†ç‚¹ï¼š\n\næ–¹æ³•é‡è½½ï¼ˆoverloadï¼‰æ˜¯ç±»çš„å¤šæ€çš„ä¸€ç§å®ç°ã€‚æ–¹æ³•åœ¨è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè™½ç„¶æ–¹æ³•åå­—ç›¸åŒï¼Œä½†æ ¹æ®å‚æ•°çš„ä¸åŒå¯ä»¥è‡ªåŠ¨è°ƒç”¨ç›¸åº”çš„å‡½æ•°ã€‚ä½†æ˜¯ PHP å¹¶ä¸ç›´æ¥æ”¯æŒï¼Œåªç”¨é€šè¿‡ `__call` æˆ–è€… `func_get_args()` `func_num_args()` + `call_user_func_array()` å®ç°ã€‚\n\næ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰å¦é‡å†™çˆ¶ç±»æ–¹æ³•åªä¼šæ ¹æ®æ–¹æ³•åæ˜¯å¦ä¸€è‡´åˆ¤æ–­ï¼ˆ5.3 ä»¥åé‡å†™çˆ¶ç±»æ–¹æ³•å‚æ•°ä¸ªæ•°å¿…é¡»ä¸€è‡´ï¼‰ã€‚è®¿é—®çº§åˆ«åªå¯ä»¥ç­‰äºæˆ–è€…å®½æ¾äºçˆ¶ç±»ï¼ˆprivate çš„é‡å†™å¯ä»¥æ˜¯ private protected public ä½›æ˜¯é‡æ–°å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼‰ã€‚final ä¿®é¥°çš„ç±»æ–¹æ³•ä¸å¯è¢«å­ç±»é‡å†™ã€‚\n\n`__construct` çš„å‚æ•°å­ç±»å¯ä»¥ä¸çˆ¶ç±»ä¸åŒã€‚\n\n```php\n/**\n * è¿”å›å½“å‰è¯·æ±‚çš„è¿™ä¸ªæ¨¡å—ç±»çš„å®ä¾‹ã€‚\n * å¦‚æœå½“å‰æœªè¯·æ±‚æ¨¡å—ç±»ï¼Œåˆ™è¿”å› nullã€‚\n * æä¾›æ­¤æ–¹æ³•æ˜¯ä¸ºäº†è®©æ‚¨ä»æ¨¡å—å†…çš„ä»»ä½•ä½ç½®è®¿é—®æ¨¡å—å®ä¾‹ã€‚\n * @return static|null\n */\npublic static function getInstance()\n{\n    $class = get_called_class();\n    return isset(Yii::$app->loadedModules[$class]) ? Yii::$app->loadedModules[$class] : null;\n}\n```\n\n`get_called_class();` PHP 5.5 åç­‰äº `static::class` the \"Late Static Binding\" class name.\n\n```php\n/**\n * è¿”å›ä¸€ä¸ª IDï¼Œè¯¥ ID åœ¨å½“å‰åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æ¨¡å—ä¸­å”¯ä¸€æ ‡è¯†æ­¤æ¨¡å—ã€‚\n * æ³¨æ„ï¼Œå¦‚æœæ¨¡å—æ˜¯ä¸€ä¸ª applicationï¼Œå°†è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚\n * @return string the unique ID of the module.\n */\npublic function getUniqueId()\n{\n    // åˆ¤æ–­æ˜¯å¦æœ‰çˆ¶æ¨¡å—\n    return $this->module ? ltrim($this->module->getUniqueId() . '/' . $this->id, '/') : $this->id;\n}\n```\n\n```php\n/**\n  * è¿”å›æ¨¡å—çš„æ ¹ç›®å½•ã€‚\n  * å®ƒé»˜è®¤æ˜¯åŒ…å«æ¨¡å—ç±»æ–‡ä»¶çš„ç›®å½•ã€‚\n  * @return string the root directory of the module.\n  */\npublic function getBasePath()\n{\n    if ($this->_basePath === null) {\n        // åå°„\n        $class = new \\ReflectionClass($this);\n        // $class->getFileName() è·å–ç±»æ–‡ä»¶çš„å…¨è·¯å¾„\n        // dirname è·å–æ–‡ä»¶çš„ç›®å½•\n        $this->_basePath = dirname($class->getFileName());\n    }\n\n    return $this->_basePath;\n}\n```\n\n```php\n/**\n * è®¾ç½®æ¨¡å—çš„æ ¹ç›®å½•ã€‚\n * æ­¤æ–¹æ³•åªèƒ½åœ¨ æ„é€ å‡½æ•° çš„å¼€å¤´è°ƒç”¨ã€‚\n * @param string $path the root directory of the module.\n * @throws InvalidArgumentException if the directory does not exist.\n */\npublic function setBasePath($path)\n{\n    $path = Yii::getAlias($path);\n    $p = strncmp($path, 'phar://', 7) === 0 ? $path : realpath($path);\n    if (is_string($p) && is_dir($p)) {\n        $this->_basePath = $p;\n    } else {\n        throw new InvalidArgumentException(\"The directory does not exist: $path\");\n    }\n}\n```\n\n```php\n$dir = './../yii2-app-basic/../';\nvar_dump(dirname($dir));\nvar_dump(realpath($dir));\n\n// realpath è¿”å›è§„èŒƒåŒ–çš„ç»å¯¹è·¯å¾„å\n// string(19) \"./../yii2-app-basic\"\n// string(23) \"/Users/bob/web\"\n\n// äºŒè¿›åˆ¶å®‰å…¨çš„å‰ n ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æ¯”è¾ƒ\n// strncmp($path, 'phar://', 7) === 0\n```\n\n```php\n/**\n * Returns current module version.\n * å¦‚æœversionæœªæ˜¾å¼è®¾ç½®ï¼Œå°†ä½¿ç”¨ defaultVersion() æ–¹æ³•ç¡®å®šå…¶å€¼ã€‚\n * @return string the version of this module.\n * @since 2.0.11\n */\npublic function getVersion()\n{\n    if ($this->_version === null) {\n        $this->_version = $this->defaultVersion();\n    } else {\n        // åˆ¤æ–­ _version æ˜¯å¦æ˜¯æ ‡é‡\n        if (!is_scalar($this->_version)) {\n            // å¯¹é—­åŒ…çš„æ”¯æŒ\n            $this->_version = call_user_func($this->_version, $this);\n        }\n    }\n\n    return $this->_version;\n}\n```\n\n```php\n/**\n * è¿è¡Œç”±è·¯æŒ‡å®šçš„æ§åˆ¶å™¨åŠ¨ä½œã€‚\n * è¿™ä¸ªæ–¹æ³•è§£ææŒ‡å®šçš„è·¯ç”±ï¼Œå¹¶åˆ›å»ºç›¸åº”çš„å­æ¨¡å—ã€æ§åˆ¶å™¨å’ŒåŠ¨ä½œå®ä¾‹ã€‚\n * ç„¶åè°ƒç”¨ Controller::runAction() ä»¥ä½¿ç”¨ç»™å®šçš„å‚æ•°è¿è¡Œæ“ä½œã€‚\n * å¦‚æœè·¯ç”±ä¸ºç©ºï¼Œè¯¥æ–¹æ³•å°†ä½¿ç”¨ defaultRouteã€‚\n * @param string $route the route that specifies the action.\n * @param array $params the parameters to be passed to the action\n * @return mixed the result of the action.\n * @throws InvalidRouteException if the requested route cannot be resolved into an action successfully.\n */\npublic function runAction($route, $params = [])\n{\n    // åˆ›å»º ctrl è§ä¸‹æ–‡\n    $parts = $this->createController($route);\n    if (is_array($parts)) {\n        /* @var $controller Controller */\n        list($controller, $actionID) = $parts;\n        // è·å–æ—§çš„\n        $oldController = Yii::$app->controller;\n        // ç»‘å®šæ–°çš„\n        Yii::$app->controller = $controller;\n        // è¿è¡Œ ctrl action\n        $result = $controller->runAction($actionID, $params);\n        // å¦‚æœæ—§çš„ä¸ç­‰äºç©ºï¼Œå›ç»‘å®šæ—§çš„\n        if ($oldController !== null) {\n            Yii::$app->controller = $oldController;\n        }\n\n        // è¿”å›ç»“æœ\n        return $result;\n    }\n\n    // è·å–æ ‡ç¤º\n    $id = $this->getUniqueId();\n    throw new InvalidRouteException('Unable to resolve the request \"' . ($id === '' ? $route : $id . '/' . $route) . '\".');\n}\n\n/**\n * åŸºäºç»™å®šçš„è·¯ç”±åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨å®ä¾‹ã€‚\n *\n * è·¯ç”±åº”è¯¥æ˜¯ç›¸å¯¹äºè¿™ä¸ªæ¨¡å—çš„ã€‚è¯¥æ–¹æ³•å®ç°äº†ä»¥ä¸‹ç®—æ³•æ¥è§£æç»™å®šçš„è·¯ç”±:\n *\n * 1. å¦‚æœè·¯ç”±ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ defaultRoute;\n * 2. å¦‚æœåœ¨ controllerMap ä¸­æ‰¾åˆ°è·¯ç”±çš„ç¬¬ä¸€ä¸ªæ®µï¼Œåˆ™æ ¹æ® controllerMap ä¸­æ‰¾åˆ°çš„ç›¸åº”é…ç½®åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨;\n * 3. å¦‚æœè·¯ç”±çš„ç¬¬ä¸€ä¸ªç‰‡æ®µæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ¨¡å— IDï¼Œå¦‚ modules ä¸­å£°æ˜çš„ï¼Œç”¨è·¯ç”±çš„å…¶ä½™éƒ¨åˆ†è°ƒç”¨æ¨¡å—çš„ createController();\n * 4. ç»™å®šçš„è·¯ç”±æ ¼å¼ä¸º `abc/def/xyz`. å°è¯• `abc\\DefController` æˆ–è€… `abc\\def\\XyzController` class within the [[controllerNamespace|controller namespace]].\n *\n * å¦‚æœä¸Šé¢çš„ä»»ä½•ä¸€ä¸ªæ­¥éª¤è§£æä¸ºä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå®ƒå°†ä¸è·¯ç”±çš„å…¶ä½™éƒ¨åˆ†ä¸€èµ·è¿”å›ï¼Œåè€…å°†è¢«è§†ä¸ºåŠ¨ä½œ IDã€‚å¦åˆ™ï¼Œå°†è¿”å› falseã€‚\n *\n * @param string $route the route consisting of module, controller and action IDs.\n * @return array|bool å¦‚æœæ§åˆ¶å™¨åˆ›å»ºæˆåŠŸï¼Œå®ƒå°†ä¸è¯·æ±‚çš„æ“ä½œIDä¸€èµ·è¿”å›ã€‚å¦åˆ™å°†è¿”å› falseã€‚\n * @throws InvalidConfigException if the controller class and its file do not match.\n */\npublic function createController($route)\n{\n    if ($route === '') {\n        $route = $this->defaultRoute;\n    }\n\n    // double slashes or leading/ending slashes may cause substr problem\n    $route = trim($route, '/');\n    if (strpos($route, '//') !== false) {\n        return false;\n    }\n\n    if (strpos($route, '/') !== false) {\n        // abc/def/xyz\n        // id: abc\n        // route: def/xyz\n        list($id, $route) = explode('/', $route, 2);\n    } else {\n        $id = $route;\n        $route = '';\n    }\n\n    // module and controller map take precedence\n    if (isset($this->controllerMap[$id])) {\n        // é€šè¿‡ controllerMap åˆ›å»º\n        $controller = Yii::createObject($this->controllerMap[$id], [$id, $this]);\n        return [$controller, $route];\n    }\n    // è·å–çˆ¶çº§æ¨¡å—\n    $module = $this->getModule($id);\n    if ($module !== null) {\n        // é€šè¿‡çˆ¶çº§æ¨¡å—åˆ›å»º\n        return $module->createController($route);\n    }\n\n    // id abc\n    // route def/xyz\n    if (($pos = strrpos($route, '/')) !== false) {\n        $id .= '/' . substr($route, 0, $pos);\n        $route = substr($route, $pos + 1);\n    }\n    // id abc/def\n    // route xyz\n\n    // åˆ›å»º ctrl è§ä¸‹æ–‡\n    $controller = $this->createControllerByID($id);\n    if ($controller === null && $route !== '') {\n        $controller = $this->createControllerByID($id . '/' . $route);\n        $route = '';\n    }\n\n    return $controller === null ? false : [$controller, $route];\n}\n\n\n/**\n * é€šè¿‡ç»™å®šçš„ controller ID åˆ›å»º controller\n *\n * æ§åˆ¶å™¨ ID ä¸è¯¥æ¨¡å—ç›¸å…³ã€‚æ§åˆ¶å™¨ç±»çš„å‘½åç©ºé—´åº”è¯¥åœ¨ controllerNamespace ä¸‹ã€‚\n *\n * æ³¨æ„ï¼Œæ­¤æ–¹æ³•ä¸æ£€æŸ¥ modules æˆ– controllerMapã€‚\n *\n * @param string $id the controller ID.\n * @return Controller|null å¦‚æœæ§åˆ¶å™¨ ID æ— æ•ˆï¼Œåˆ™ä¸º nullã€‚\n * @throws InvalidConfigException if the controller class and its file name do not match. æ­¤å¼‚å¸¸åªä¼šåœ¨ debug æ¨¡å¼æŠ›å‡ºã€‚\n */\npublic function createControllerByID($id)\n{\n    // id abc/def\n    $pos = strrpos($id, '/');\n    if ($pos === false) {\n        $prefix = '';\n        $className = $id;\n    } else {\n        $prefix = substr($id, 0, $pos + 1);\n        $className = substr($id, $pos + 1);\n    }\n    // prefix abc\n    // className def\n\n    // Checks if class name or prefix is incorrect\n    if ($this->isIncorrectClassNameOrPrefix($className, $prefix)) {\n        return null;\n    }\n    // https://www.pagecolumn.com/tool/pregtest.htm\n    // ä¸­åˆ’çº¿è½¬å¤§é©¼å³°\n    $className = preg_replace_callback('%-([a-z0-9_])%i', function ($matches) {\n            return ucfirst($matches[1]);\n        }, ucfirst($className)) . 'Controller';\n    $className = ltrim($this->controllerNamespace . '\\\\' . str_replace('/', '\\\\', $prefix) . $className, '\\\\');\n    if (strpos($className, '-') !== false || !class_exists($className)) {\n        return null;\n    }\n\n    // one of its parents or implements it\n    // ä¸ instanceof çš„åŒºåˆ«æ˜¯ï¼šinstanceof å¯ä»¥æ˜¯æ­¤ç±»çš„å®ä¾‹ï¼Œis_subclass_of è¦æ˜¯æ­¤ç±»çš„å­ç±»\n    if (is_subclass_of($className, 'yii\\base\\Controller')) {\n        $controller = Yii::createObject($className, [$id, $this]);\n        return get_class($controller) === $className ? $controller : null;\n    } elseif (YII_DEBUG) {\n        throw new InvalidConfigException('Controller class must extend from \\\\yii\\\\base\\\\Controller.');\n    }\n\n    return null;\n}\n\n/**\n * Checks if class name or prefix is incorrect\n *\n * @param string $className\n * @param string $prefix\n * @return bool\n */\nprivate function isIncorrectClassNameOrPrefix($className, $prefix)\n{\n    if (!preg_match('%^[a-z][a-z0-9\\\\-_]*$%', $className)) {\n        return true;\n    }\n    if ($prefix !== '' && !preg_match('%^[a-z0-9_/]+$%i', $prefix)) {\n        return true;\n    }\n\n    return false;\n}\n```\n\n## References\n\n- [PHP é¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹æ·±å…¥ç†è§£æ–¹æ³•é‡è½½ä¸æ–¹æ³•è¦†ç›–ï¼ˆå¤šæ€ï¼‰| cnblogs](https://www.cnblogs.com/joyco773/p/6023180.html)\n- [PHP ç±»æ–¹æ³•é‡å†™åŸåˆ™ | cnblogs](https://www.cnblogs.com/joyco773/p/6020334.html)\n\n-- EOF --\n","tags":["php","yii2"],"categories":["yii2"]},{"title":"Yii2 æºç é˜…è¯» 02 - Configurable BaseObject Component","url":"/2021/07/27/reading-yii2-source-code-02/","content":"\nä¹¦æ¥ä¸Šæ–‡ `yii\\web\\Application` ç±»çš„å±‚çº§ç»“æ„ï¼š\n\n```bash\nyii\\base\\Configurable\n|--- yii\\base\\BaseObject\n     |--- yii\\base\\Component\n          |--- yii\\di\\ServiceLocator\n               |--- yii\\base\\Module\n                    |--- yii\\base\\Application\n                         |--- yii\\web\\Application\n```\n\n## yii\\base\\Configurable\n\næ˜¯ä¸€ä¸ª `interface`ã€‚å®ç°æ­¤æ¥å£æ„å‘³ç€ï¼šè¿™äº›ç±»æ”¯æŒé€šè¿‡å…¶ `__constructor` çš„æœ€åä¸€ä¸ªæ•°ç»„å‚æ•°ï¼Œè®¾ç½®å…¶ `properties`ã€‚ä¾‹å¦‚ï¼š\n\n```php\npublic function __constructor($param1, $param2, ..., $config = [])\n```\n\né€šè¿‡ `Yii::configure($this, $config);` å®ç°ï¼š\n\n```php\npublic static function configure($object, $properties)\n{\n    foreach ($properties as $name => $value) {\n        $object->$name = $value;\n    }\n\n    return $object;\n}\n```\n\nè¯¥æ¥å£æ²¡æœ‰å£°æ˜ä»»ä½•ä¸€ä¸ªæ–¹æ³•ã€‚ä¸»è¦ç»™ `yii\\di\\Container` ä½¿ç”¨ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å°† å¯¹è±¡é…ç½® ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å®ç°ç±»çš„æ„é€ å‡½æ•°ï¼Œåæ–‡å†ç ”ç©¶ã€‚\n\n> å‚è§ï¼š[é…ç½®ï¼ˆConfigurationsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-configurations)\n\n## yii\\base\\BaseObject\n\næ˜¯ä¸ªåŸºç±»ï¼›å®ç°äº† `property`ã€`åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ` ç›¸å…³åŠŸèƒ½ã€‚\n\nå‡ ä¹æ¯ä¸ª Yii æ¡†æ¶çš„æ ¸å¿ƒç±»éƒ½ç»§æ‰¿è‡ª `yii\\base\\BaseObject` æˆ–å…¶å­ç±»ã€‚\n\n### property å±æ€§\n\né€šè¿‡é‡å†™ `__get` `__set` å®ç°å±æ€§ç”± getter/setter å®šä¹‰ã€‚\n\n```php\nprivate $_label;\n\npublic function getLabel()\n{\n  return $this->_label;\n}\n\npublic function setLabel($value)\n{\n  $this->_label = trim($value);\n}\n```\n\ngetter/setter å®šä¹‰çš„ å±æ€§ ä¸ ç±»æˆå‘˜å˜é‡ åŒºåˆ«æ˜¯ï¼šå½“è¿™ç§å±æ€§è¢«è¯»å–æ—¶ï¼Œå¯¹åº”çš„ getter æ–¹æ³•å°†è¢«è°ƒç”¨ï¼›è€Œå½“å±æ€§è¢«èµ‹å€¼æ—¶ï¼Œå¯¹åº”çš„ setter æ–¹æ³•å°±è°ƒç”¨ã€‚å¦‚ï¼š\n\n```php\n// equivalent to $label = $object->getLabel();\n$label = $object->label;\n\n// equivalent to $object->setLabel('abc');\n$object->label = 'abc';\n```\n\nè¿™é‡Œæœ‰ä¸ªæŠ€å·§ï¼Œåœ¨ç±»ä¸Šå¯ä»¥é€šè¿‡æ³¨é‡Šå¸®åŠ© IDE æç¤ºå±æ€§ï¼š\n\n```php\n/**\n * @property-read Behavior[] $behaviors ..\n */\nclass Component extends BaseObject\n{\n}\n```\n\nå¦‚æœä¸€ä¸ªå±æ€§åªæœ‰ä¸€ä¸ª getter æ–¹æ³•è€Œæ²¡æœ‰ setter æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒå°±è¢«è®¤ä¸ºæ˜¯ `åªè¯»çš„`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯•å›¾ä¿®æ”¹å±æ€§å€¼å°†å¯¼è‡´ `InvalidCallException`ã€‚\n\nå¯ä»¥è°ƒç”¨ `hasProperty()`ã€`canGetProperty()`ã€`canSetProperty()` æ¥æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨ã€‚ä¾æ‰˜çš„æ–¹æ³• `method_exists`ã€`property_exists`ã€‚\n\né€šè¿‡ getter/setter å®šä¹‰çš„ å±æ€§ ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šè§„åˆ™å’Œé™åˆ¶ï¼š\n\n- è¿™ç±»å±æ€§çš„åå­—æ˜¯ **ä¸åŒºåˆ†å¤§å°å†™ case-insensitive** çš„ã€‚å¦‚ï¼Œ`$object->label` å’Œ `$object->Label` æ˜¯åŒä¸€ä¸ªå±æ€§ã€‚ å› ä¸º PHP æ–¹æ³•åæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ï¼ˆæ‰€ä»¥å†…éƒ¨å‡½æ•°æ˜¯ä¸‹åˆ’çº¿å‘½åæ³•ï¼Ÿï¼‰\n- å¦‚æœè¿™ç±»å±æ€§çš„åå­—å’Œç±»æˆå‘˜å˜é‡ç›¸åŒï¼Œä»¥åè€…ä¸ºå‡†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä»¥ä¸Š Foo ç±»æœ‰ä¸ª label æˆå‘˜å˜é‡ï¼Œç„¶åç»™ `$object->label = 'abc'` èµ‹å€¼ï¼Œå°†èµ‹ç»™æˆå‘˜å˜é‡è€Œä¸æ˜¯ setter setLabel() æ–¹æ³•ã€‚è¿™æ˜¯å› ä¸º `__set` æ˜¯åœ¨æ²¡æœ‰æ­¤æˆå‘˜å˜é‡æ˜¯è§¦å‘ã€‚\n- è¿™äº›å±æ€§ä¸æ”¯æŒå¯è§æ€§ã€‚å¦‚æœå±æ€§æ˜¯å…¬å…±çš„ã€å—ä¿æŠ¤çš„æˆ–ç§æœ‰çš„ï¼Œå®ƒä¸å®šä¹‰çš„ getter/setter æ–¹æ³•æ²¡æœ‰åŒºåˆ«ã€‚\n- è¿™ç±»å±æ€§åªèƒ½ç”±éé™æ€ getter/setter å®šä¹‰ï¼Œé™æ€æ–¹æ³•ä¸ä¼šä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†ã€‚\n- å¯¹ property_exists() çš„è°ƒç”¨ï¼Œæ— æ³•åˆ¤æ–­é­”æ³•å±æ€§ã€‚åº”è¯¥è°ƒç”¨ hasProperty()ã€‚\n\nğŸ¤” æ€è€ƒï¼šè¿™é‡Œå¢å¼ºäº†ç±»çš„å±æ€§çš„æ“ä½œï¼Œæ˜¯å¦ä¸åˆ©äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸ç†è§£ï¼Œå› ä¸ºçœ‹èµ·æ¥æ–¹ä¾¿çš„ç›´æ¥çš„å±æ€§æ“ä½œæ˜¯å¦ç ´åäº†å°è£…æ€§ï¼Ÿ\n\n> è¯¦ç»†å‚è§ï¼š[å±æ€§ï¼ˆPropertiesï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-properties)\n\n### initialization life cycle\n\nå®ç°äº†å¯¹è±¡åˆå§‹åŒ–çš„ç”Ÿå‘½å‘¨æœŸ `initialization life cycle`ï¼š\n\n1. `__construct` è¢«è°ƒç”¨ã€‚\n2. å¯¹è±¡å±æ€§å°†æ ¹æ® [Configurable](#yii\\base\\Configurable) è¢«åˆå§‹åŒ–ã€‚\n3. `init()` è¢«è°ƒç”¨ã€‚\n\n2ã€3 å‘ç”Ÿåœ¨æ„é€ å‡½æ•°çš„å°¾éƒ¨ï¼Œæ¨èåœ¨ `init()` å†è¿›è¡Œç›¸å…³åˆå§‹åŒ–æ“ä½œï¼Œå› ä¸ºæ­¤æ—¶å¯¹è±¡å±æ€§å·²ç»å®Œæˆäº†è®¾ç½®ã€‚\n\nä¸ºä¿è¯ä»¥ä¸Šç”Ÿå‘½å‘¨æœŸï¼ŒBaseObject çš„å­ç±»åº”è¯¥åƒå¦‚ä¸‹æ–¹å¼é‡æ–°æ„é€ æ–¹æ³•ï¼š\n\n```php\npublic function __construct($param1, $param2, ..., $config = [])\n{\n    ...\n    parent::__construct($config);\n}\n```\n\n## yii\\base\\Component\n\n> å‚è§ï¼š[ç»„ä»¶ï¼ˆComponentsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-components)\n\næ˜¯ä¸ªåŸºç±»ï¼›é™¤äº†åœ¨çˆ¶ç±» [BaseObject](#yii\\base\\BaseObject) ä¸­å®ç°çš„ `property` ç‰¹æ€§å¤–ï¼Œè¿˜æä¾›äº† `event`ã€`behavior` ç‰¹æ€§ã€‚\n\n- `private $_events` the attached event handlers (event name => handlers)\n- `private $_eventWildcards` (event name wildcard => handlers)\n- `private $_behaviors` the attached behaviors (behavior name => behavior). This is `null` when not initialized.\n\n### Events äº‹ä»¶\n\n> å‚è§ï¼š[äº‹ä»¶ï¼ˆEventsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-events)\n\nEvent is a way to \"inject\" custom code into existing code at certain places.\n\näº‹ä»¶ç§°æ ‡è¯†åœ¨å®šä¹‰å®ƒçš„ç±»ä¸­åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚äº‹ä»¶åç§° **åŒºåˆ†å¤§å°å†™ case-sensitive**ã€‚\n\nè°ƒç”¨ `on()` é™„åŠ åˆ°ä¸€ä¸ªäº‹ä»¶ã€‚ä¸€ä¸ªæˆ–å¤šä¸ª PHP å›è°ƒå‡½æ•°ï¼Œç§°ä¸º _event handlers äº‹ä»¶å¤„ç†å™¨_ã€‚\n\n```php\n/**\n * Attaches an event handler to an event.\n *\n * The event handler must be a valid PHP callback.\n *\n * function ($event) { ... }         // anonymous function\n * [$object, 'handleClick']          // $object->handleClick()\n * ['Page', 'handleClick']           // Page::handleClick()\n * 'handleClick'                     // global function handleClick()\n *\n * äº‹ä»¶å¤„ç†ç¨‹åºå¿…é¡»ä½¿ç”¨ä»¥ä¸‹ç­¾åå®šä¹‰ï¼Œ\n *\n * function ($event)\n *\n * Since 2.0.14 you can specify event name as a wildcard pattern:\n *\n * $component->on('event.group.*', function ($event) {\n *     Yii::trace($event->name . ' is triggered.');\n * });\n *\n * @param string $name the event name\n * @param callable $handler the event handler\n * @param mixed $data äº‹ä»¶è§¦å‘æ—¶è¦ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºçš„æ•°æ®ã€‚\n *                    å½“äº‹ä»¶å¤„ç†å™¨è¢«è°ƒç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ event::data è®¿é—®è¯¥æ•°æ®ã€‚\n * @param bool $append æ˜¯å¦å°† æ–°çš„äº‹ä»¶å¤„ç†ç¨‹åº è¿½åŠ åˆ°ç°æœ‰å¤„ç†ç¨‹åºåˆ—è¡¨çš„ æœ«å°¾ã€‚\n *                     å¦‚æœä¸º falseï¼Œæ–°çš„å¤„ç†ç¨‹åº å°†æ’å…¥åˆ°ç°æœ‰å¤„ç†ç¨‹åºåˆ—è¡¨çš„å¼€å¤´ã€‚\n * @see off()\n */\npublic function on($name, $handler, $data = null, $append = true)\n{\n    // ç¡®ä¿åœ¨ behaviors() ä¸­å£°æ˜çš„è¡Œä¸ºè¢«é™„åŠ åˆ°è¿™ä¸ªç»„ä»¶ã€‚\n    $this->ensureBehaviors();\n\n    if (strpos($name, '*') !== false) {\n        // é€šé…ç¬¦æ¨¡å¼\n        if ($append || empty($this->_eventWildcards[$name])) {\n            $this->_eventWildcards[$name][] = [$handler, $data];\n        } else {\n            array_unshift($this->_eventWildcards[$name], [$handler, $data]);\n        }\n        return;\n    }\n\n    if ($append || empty($this->_events[$name])) {\n        // append = true æ’å…¥å°¾éƒ¨\n        $this->_events[$name][] = [$handler, $data];\n    } else {\n        // æ’å…¥å¤´éƒ¨\n        array_unshift($this->_events[$name], [$handler, $data]);\n    }\n}\n```\n\nè°ƒç”¨ `trigger()` æ¥ raise ä¸€ä¸ªäº‹ä»¶ï¼š\n\n```php\n/**\n * Triggers an event.\n * å®ƒè°ƒç”¨äº‹ä»¶çš„æ‰€æœ‰é™„åŠ å¤„ç†ç¨‹åºï¼ŒåŒ…æ‹¬ class-level å¤„ç†ç¨‹åºã€‚\n *\n * @param string $name the event name\n * @param Event $event the event parameter. å¦‚æœä¸è®¾ç½®ï¼Œå°†åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ Event å¯¹è±¡ã€‚\n */\npublic function trigger($name, Event $event = null)\n{\n    $this->ensureBehaviors();\n\n    $eventHandlers = [];\n    foreach ($this->_eventWildcards as $wildcard => $handlers) {\n        if (StringHelper::matchWildcard($wildcard, $name)) {\n            $eventHandlers = array_merge($eventHandlers, $handlers);\n        }\n    }\n\n    if (!empty($this->_events[$name])) {\n        $eventHandlers = array_merge($eventHandlers, $this->_events[$name]);\n    }\n\n    if (!empty($eventHandlers)) {\n        if ($event === null) {\n            $event = new Event();\n        }\n        if ($event->sender === null) {\n            $event->sender = $this;\n        }\n        $event->handled = false;\n        $event->name = $name;\n        foreach ($eventHandlers as $handler) {\n            // $handler is [callable $handler, $data]\n            $event->data = $handler[1];\n            // è°ƒç”¨\n            call_user_func($handler[0], $event);\n            // å¦‚æœäº‹ä»¶ handled = trueï¼Œåœæ­¢è¿›ä¸€æ­¥çš„å¤„ç†\n            if ($event->handled) {\n                return;\n            }\n        }\n    }\n\n    // è°ƒç”¨ class-level attached å¤„ç†ç¨‹åº\n    // static $_eventWildcards and $_events\n    // å¾…ç ”ç©¶\n    Event::trigger($this, $name, $event);\n}\n```\n\næ¨èä½¿ç”¨ç±»å¸¸é‡æ¥è¡¨ç¤ºäº‹ä»¶åï¼š\n\n1. å®ƒå¯ä»¥é˜²æ­¢æ‹¼å†™é”™è¯¯å¹¶æ”¯æŒ IDE çš„è‡ªåŠ¨å®Œæˆã€‚\n2. åªè¦ç®€å•æ£€æŸ¥å¸¸é‡å£°æ˜å°±èƒ½äº†è§£ä¸€ä¸ªç±»æ”¯æŒå“ªäº›äº‹ä»¶ã€‚\n\nç±»çº§åˆ«çš„äº‹ä»¶å¤„ç†å™¨ï¼š\n\n```php\n/**\n * Attaches an event handler to a class-level event.\n *\n * When a class-level event is triggered, event handlers attached\n * to that class and all parent classes will be invoked.\n *\n * @param string   $class   the fully qualified class name to which the event handler needs to attach\n * @param string   $name    the event name\n * @param callable $handler the event handler\n * @param mixed    $data    äº‹ä»¶è§¦å‘æ—¶è¦ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºçš„æ•°æ®ã€‚\n *                          When the event handler is invoked, this data can be accessed via [[Event::data]].\n * @param bool     $append  whether to append new event handler to the end of the existing\n *                          handler list. If `false`, the new handler will be inserted at the beginning of the existing handler list.\n *\n * @see off()\n */\npublic static function on($class, $name, $handler, $data = null, $append = true) {\n    ...\n    if ($append || empty(self::$_events[$name][$class])) {\n        self::$_events[$name][$class][] = [$handler, $data];\n    } else {\n        array_unshift(self::$_events[$name][$class], [$handler, $data]);\n    }\n}\n```\n\nä¾‹å­ï¼š\n\n```php\nEvent::on(ActiveRecord::className(), ActiveRecord::EVENT_AFTER_INSERT, function ($event) {\n    Yii::trace(get_class($event->sender) . ' is inserted.');\n});\n\n// Since 2.0.14 you can specify either class name or event name as a wildcard pattern:\n\nEvent::on('app\\models\\db\\*', '*Insert', function ($event) {\n    Yii::trace(get_class($event->sender) . ' is inserted.');\n});\n```\n\næ¯å½“ `ActiveRecord` æˆ–å…¶å­ç±»çš„å®ä¾‹è§¦å‘ `EVENT_AFTER_INSERT` äº‹ä»¶æ—¶ï¼Œ è¿™ä¸ªäº‹ä»¶å¤„ç†å™¨éƒ½ä¼šæ‰§è¡Œã€‚åœ¨è¿™ä¸ªå¤„ç†å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ `$event->sender` è·å–è§¦å‘äº‹ä»¶çš„å¯¹è±¡ã€‚\n\nYou can also attach a handler to an event when configuring a component with a configuration array.\nThe syntax is like the following:\n\n```php\n[\n  'on add' => function ($event) { ... }\n]\n```\n\nwhere `on add` stands for attaching an event to the `add` event.\n\nå…¶ä»–å®˜æ–¹æ–‡æ¡£ï¼š\n\n- [ä½¿ç”¨æ¥å£äº‹ä»¶ï¼ˆEvents using interfacesï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-events#interface-level-event-handlers)\n- [å…¨å±€äº‹ä»¶ï¼ˆGlobal Eventsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-events#global-events)\n- [é€šé…ç¬¦äº‹ä»¶ï¼ˆWildcard Eventsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-events#wildcard-events)\n\n### Behaviors è¡Œä¸º\n\n> å‚è§ï¼š[è¡Œä¸ºï¼ˆBehaviorsï¼‰](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-behaviors)\n\nè¡Œä¸ºæ˜¯ `yii\\base\\Behavior` æˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚è¡Œä¸ºï¼Œä¹Ÿç§°ä¸º `mixins`ï¼Œå¯ä»¥æ— é¡»æ”¹å˜ç±»ç»§æ‰¿å…³ç³»å³å¯å¢å¼ºä¸€ä¸ªå·²æœ‰çš„ `Component` ç±»åŠŸèƒ½ã€‚\n\nå®ƒå¯ä»¥å°†è‡ªå·±çš„æ–¹æ³•å’Œå±æ€§ æ³¨å…¥ åˆ°ç»„ä»¶ä¸­ï¼Œå¹¶é€šè¿‡ç»„ä»¶ç›´æ¥è®¿é—®å®ƒä»¬ã€‚å®ƒè¿˜å¯ä»¥å“åº”ç»„ä»¶ä¸­è§¦å‘çš„äº‹ä»¶ï¼Œä»è€Œæ‹¦æˆªæ­£å¸¸çš„ä»£ç æ‰§è¡Œã€‚\n\nå®šä¹‰è¡Œä¸ºï¼Œ`yii\\base\\Behavior`ï¼š\n\n- `public $owner` Component|nullï¼Œè¡Œä¸ºçš„æ‰€æœ‰è€…ã€‚\n- `private $_attachedEvents` Attached events handlersã€‚\n\n`yii\\base\\Behavior` ä¸º owner çš„ events å£°æ˜äº‹ä»¶å¤„ç†å™¨ï¼š\n\n```php\n/**\n * ä¸º owner çš„ events å£°æ˜äº‹ä»¶å¤„ç†å™¨ã€‚\n *\n * å­ç±»å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³• æ¥å£°æ˜å“ªäº› PHP å›è°ƒå‡½æ•°åº”è¯¥é™„åŠ åˆ° owner ç»„ä»¶çš„äº‹ä»¶ä¸Šã€‚\n *\n * The callbacks can be any of the following:\n *\n * - method in this behavior: `'handleClick'`, equivalent to `[$this, 'handleClick']`\n * - object method: `[$object, 'handleClick']`\n * - static method: `['Page', 'handleClick']`\n * - anonymous function: `function ($event) { ... }`\n *\n * The following is an example:\n *\n * [\n *     Model::EVENT_BEFORE_VALIDATE => 'myBeforeValidate',\n *     Model::EVENT_AFTER_VALIDATE => 'myAfterValidate',\n * ]\n *\n * @return array äº‹ä»¶å (array keys) and ç›¸åº”çš„äº‹ä»¶å¤„ç†å™¨æ–¹æ³• (array values).\n */\npublic function events()\n{\n    return [];\n}\n```\n\n`yii\\base\\Component` è®¿é—®è¡Œä¸ºä¸­çš„ **å±æ€§** çš„é€»è¾‘ï¼š\n\n```php\npublic function __get($name)\n{\n  ...\n    // behavior property\n    $this->ensureBehaviors();\n    foreach ($this->_behaviors as $behavior) {\n        if ($behavior->canGetProperty($name)) {\n            return $behavior->$name;\n        }\n    }\n  ...\n}\n```\n\n`yii\\base\\Component` è®¿é—®è¡Œä¸ºä¸­çš„ **æ–¹æ³•** çš„é€»è¾‘ï¼š\n\n```php\npublic function __call($name, $params)\n{\n    $this->ensureBehaviors();\n    foreach ($this->_behaviors as $object) {\n        if ($object->hasMethod($name)) {\n            return call_user_func_array([$object, $name], $params);\n        }\n    }\n    throw new UnknownMethodException('Calling unknown method: '.get_class($this).\"::$name()\");\n}\n```\n\n`yii\\base\\Component` é™„åŠ è¡Œä¸ºï¼š\n\n```php\n/**\n * Attaches a behavior to this component.\n * This method will create the behavior object based on the given\n * configuration. After that, the behavior object will be attached to\n * this component by calling the [[Behavior::attach()]] method.\n *\n * @param string                $name     the name of the behavior\n * @param string|array|Behavior $behavior the behavior configuration.\n * This can be one of the following:\n *\n *  - a [[Behavior]] object\n *  - a string specifying the behavior class\n *  - an object configuration array that will be passed to [[Yii::createObject()]] to create the behavior object.\n *\n * @return Behavior the behavior object\n *\n * @see detachBehavior()\n */\npublic function attachBehavior($name, $behavior)\n{\n    $this->ensureBehaviors();\n\n    return $this->attachBehaviorInternal($name, $behavior);\n}\n\n/**\n * Makes sure that the behaviors declared in [[behaviors()]] are attached to this component.\n */\npublic function ensureBehaviors()\n{\n    // å¦‚å±æ€§çš„æ³¨é‡Šï¼ŒThis is `null` when not initialized.\n    if ($this->_behaviors === null) {\n        // æœªåˆå§‹åŒ–\n        $this->_behaviors = [];\n        foreach ($this->behaviors() as $name => $behavior) {\n            $this->attachBehaviorInternal($name, $behavior);\n        }\n    }\n}\n\n/**\n * Attaches a behavior to this component.\n * @param string|int $name the name of the behavior. å¦‚æœè¿™æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¿™æ„å‘³ç€è¯¥è¡Œä¸ºæ˜¯åŒ¿åçš„ã€‚\n *                         å¦åˆ™ï¼Œè¯¥è¡Œä¸ºæ˜¯å‘½åè¡Œä¸ºï¼Œä»»ä½•å…·æœ‰ç›¸åŒåç§°çš„ç°æœ‰è¡Œä¸ºå°†é¦–å…ˆåˆ†ç¦»ã€‚\n * @param string|array|Behavior $behavior the behavior to be attached\n * @return Behavior the attached behavior.\n */\nprivate function attachBehaviorInternal($name, $behavior)\n{\n    if (!($behavior instanceof Behavior)) {\n        // å½“æ˜¯ string or array æ—¶\n        $behavior = Yii::createObject($behavior);\n    }\n    if (is_int($name)) {\n        // name æ˜¯æ•°å­—\n        // 1. ç»‘å®š behavior çš„ owner ä¸º $this\n        // 2. åœ¨ events é‡Œ å£°æ˜é™„åŠ äº‹ä»¶å¤„ç†å™¨\n        $behavior->attach($this);\n        // æ³¨å†Œ\n        $this->_behaviors[] = $behavior;\n    } else {\n        if (isset($this->_behaviors[$name])) {\n            // å·²ç»å­˜åœ¨ï¼Œè§£ç»‘\n            $this->_behaviors[$name]->detach();\n        }\n        // ç»‘å®š\n        $behavior->attach($this);\n        // æ³¨å†Œ\n        $this->_behaviors[$name] = $behavior;\n    }\n\n    return $behavior;\n}\n```\n\n- [æ¯”è¾ƒè¡Œä¸ºä¸ Traits](https://www.yiiframework.com/doc/guide/2.0/zh-cn/concept-behaviors#comparison-with-traits)\n\n`yii\\behaviors` å±‚çº§ç»“æ„ï¼š\n\n```bash\nBehavior\n|---- AttributeBehavior\n      |---- BlameableBehavior è‡ªåŠ¨ä½¿ç”¨å½“å‰ç”¨æˆ· ID å¡«å……æŒ‡å®šçš„å±æ€§ã€‚\n      |---- OptimisticLockBehavior ä¹è§‚é” ä½¿ç”¨åˆ—åè‡ªåŠ¨å‡çº§æ¨¡å‹çš„é”ç‰ˆæœ¬ã€‚\n      |---- SluggableBehavior è‡ªåŠ¨ç”¨ä¸€ä¸ªå€¼å¡«å……æŒ‡å®šçš„å±æ€§ï¼Œè¯¥å€¼å¯ä»¥åœ¨URLä¸­ä½¿ç”¨ã€‚\n      |---- TimestampBehavior è‡ªåŠ¨ç”¨å½“å‰æ—¶é—´æˆ³å¡«å……æŒ‡å®šçš„å±æ€§ã€‚\n\n|---- AttributesBehavior\n|---- AttributeTypecastBehavior æä¾›è‡ªåŠ¨æ¨¡å‹å±æ€§ç±»å‹è½¬æ¢çš„èƒ½åŠ›ã€‚\n|---- CacheableWidgetBehavior å¯ç¼“å­˜å°éƒ¨ä»¶è¡Œä¸ºæ ¹æ®æŒ‡å®šçš„æŒç»­æ—¶é—´å’Œä¾èµ–å…³ç³»è‡ªåŠ¨ç¼“å­˜å°éƒ¨ä»¶å†…å®¹ã€‚\n```\n\n`yii\\behaviors\\AttributeBehavior` å½“ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè‡ªåŠ¨å°†æŒ‡å®šçš„å€¼èµ‹ç»™ ActiveRecord å¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ã€‚\n\n- `public $attributes = [];` è¦ç”¨ value æŒ‡å®šçš„å€¼è‡ªåŠ¨å¡«å……çš„å±æ€§åˆ—è¡¨ã€‚\n- `public $value;` å°†åˆ†é…ç»™å½“å‰å±æ€§çš„å€¼ã€‚è¿™å¯ä»¥æ˜¯åŒ¿åå‡½æ•°ã€‚\n- `public $skipUpdateOnClean = true;` æ˜¯å¦åœ¨ $owner æœªè¢«ä¿®æ”¹æ—¶è·³è¿‡æ­¤è¡Œä¸ºã€‚\n- `public $preserveNonEmptyValues = false;` æ˜¯å¦ä¿ç•™åŸæ¥éç©ºå±æ€§å€¼ã€‚\n\n```php\n/**\n * Evaluates å±æ€§å€¼å¹¶å°†å…¶åˆ†é…ç»™å½“å‰å±æ€§ã€‚\n * @param Event $event\n */\npublic function evaluateAttributes($event)\n{\n    if ($this->skipUpdateOnClean\n        && $event->name == ActiveRecord::EVENT_BEFORE_UPDATE\n        // è¿”å›è‡ªæœ€è¿‘åŠ è½½æˆ–ä¿å­˜ä»¥æ¥å·²è¢«ä¿®æ”¹çš„å±æ€§å€¼ å¦‚æœæ²¡æœ‰ä¿®æ”¹è¿”å› []\n        && empty($this->owner->dirtyAttributes)\n    ) {\n        return;\n    }\n\n    // $event->name eg ActiveRecord::EVENT_BEFORE_INSERT\n    if (!empty($this->attributes[$event->name])) {\n        // str -> [str]\n        $attributes = (array) $this->attributes[$event->name];\n        $value = $this->getValue($event);\n        foreach ($attributes as $attribute) {\n            // ignore attribute names which are not string (e.g. when set by TimestampBehavior::updatedAtAttribute)\n            // ç¡®ä¿ attribute æ˜¯å­—ç¬¦ä¸²\n            if (is_string($attribute)) {\n                if ($this->preserveNonEmptyValues && !empty($this->owner->$attribute)) {\n                    // ä¿ç•™åŸæ¥éç©ºå±æ€§å€¼\n                    continue;\n                }\n                $this->owner->$attribute = $value;\n            }\n        }\n    }\n}\n```\n\n`AttributeBehavior` ä½¿ç”¨ä¾‹å­ï¼š\n\n```php\npublic function behaviors()\n{\n  return [\n    [\n      'class' => AttributeBehavior::class,\n      'attributes' => [\n          ActiveRecord::EVENT_BEFORE_INSERT => 'attribute1',\n          ActiveRecord::EVENT_BEFORE_UPDATE => 'attribute2',\n      ],\n      'value' => function ($event) {\n          return 'some value';\n      },\n    ],\n  ];\n}\n```\n\n`yii\\behaviors\\OptimisticLockBehavior` ä¹è§‚é” ä½¿ç”¨åˆ—åè‡ªåŠ¨å‡çº§æ¨¡å‹çš„é”ç‰ˆæœ¬ã€‚\n\nä¹è§‚é”å®šå…è®¸å¤šä¸ªç”¨æˆ·è®¿é—®åŒä¸€è®°å½•è¿›è¡Œç¼–è¾‘ï¼Œä»è€Œé¿å…æ½œåœ¨çš„å†²çªã€‚å¦‚æœç”¨æˆ·è¯•å›¾åœ¨ä¸€äº›è¿‡æœŸæ•°æ®ä¸Šä¿å­˜è®°å½•ï¼ˆå› ä¸ºå¦ä¸€ä¸ªç”¨æˆ·ä¿®æ”¹äº†æ•°æ®ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡º `StaleObjectException` å¼‚å¸¸ï¼Œå¹¶è·³è¿‡æ›´æ–°æˆ–åˆ é™¤æ“ä½œã€‚\n\n-- EOF --\n","tags":["php","yii2"],"categories":["yii2"]},{"title":"Yii2 æºç é˜…è¯» 01 - index.php","url":"/2021/07/26/reading-yii2-source-code-01/","content":"\n## web/index\n\næ­¥éª¤ï¼š\n\n1. defined const\n2. composer vendor/autoload\n3. require Yii.php\n4. require config web.php\n5. new Application and run()\n\n### Yii.php\n\n1ã€2 æ¯”è¾ƒç®€å•ï¼Œä» 3 å¼€å§‹ï¼Œè¿›å…¥ `/../vendor/yiisoft/yii2/Yii.php'` é¦–è¡Œï¼š\n\n```php\nrequire __DIR__ . '/BaseYii.php';\n```\n\nè¿›å…¥ `BaseYii.php`ï¼š\n\nå¤´éƒ¨ä»æ˜¯ defined constï¼Œ`YII_DEBUG false` `YII_ENV prod`ï¼›\n\n`YII_ENABLE_ERROR_HANDLER true` é»˜è®¤å¯ç”¨é”™è¯¯å¤„ç†ï¼Œåœ¨ `yii\\base\\Application::registerErrorHandler` ä¸­ä½¿ç”¨ï¼š\n\n```php\n/**\n  * Registers the errorHandler component as a PHP error handler.\n  * @param array $config application config\n  */\nprotected function registerErrorHandler(&$config)\n{\n    if (YII_ENABLE_ERROR_HANDLER) {\n        if (!isset($config['components']['errorHandler']['class'])) {\n            echo \"Error: no errorHandler component is configured.\\n\";\n            exit(1);\n        }\n        $this->set('errorHandler', $config['components']['errorHandler']);\n        unset($config['components']['errorHandler']);\n        $this->getErrorHandler()->register();\n    }\n}\n```\n\n`$this->set` è°ƒç”¨çš„ `yii\\di\\ServiceLocator::set` æ³¨å†Œ component å®šä¹‰å®šä½å™¨ï¼Œåæ–‡å†åˆ†æã€‚\n\nè·å– error handler æ³¨å†Œ `yii\\base\\ErrorHandler`ï¼š\n\n```php\n/**\n * Register this error handler.\n * @since 2.0.32 this will not do anything if the error handler was already registered\n */\npublic function register()\n{\n    if (!$this->_registered) {\n        ini_set('display_errors', false);\n        set_exception_handler([$this, 'handleException']);\n        if (defined('HHVM_VERSION')) {\n            set_error_handler([$this, 'handleHhvmError']);\n        } else {\n            set_error_handler([$this, 'handleError']);\n        }\n        if ($this->memoryReserveSize > 0) {\n            $this->_memoryReserve = str_repeat('x', $this->memoryReserveSize);\n        }\n        register_shutdown_function([$this, 'handleFatalError']);\n        $this->_registered = true;\n    }\n}\n```\n\né”™è¯¯å¤„ç†ï¼š\n\n- set_exception_handler è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†\n- set_error_handler è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰çš„é”™è¯¯å¤„ç†å‡½æ•°\n- register_shutdown_function å®šä¹‰ PHP ç¨‹åºæ‰§è¡Œå®Œæˆåæ‰§è¡Œçš„å‡½æ•°\n\nåœ¨ `handleError` é‡Œæœ€åï¼Œå°†æŠ›å‡º `yii\\base\\ErrorException`ï¼Œå°†å¤„ç†äº¤ç»™ `handleException`ã€‚\n\n> æ›´è¯¦ç»†çš„ å¼‚å¸¸å¤„ç† å°†åœ¨åæ–‡å†åˆ†æï¼Œæ­¤å¤„ä¸å±•å¼€ã€‚\n\n`BaseYii` is the core helper class for the Yii framework.\n\nè¿”å› `Yii` ç±»ï¼š\n\n```php\nclass Yii extends \\yii\\BaseYii\n{\n}\n// æ²¡æœ‰å†æ·»åŠ é¢å¤–çš„å±æ€§æˆ–æ–¹æ³•ã€‚\n\n// æ³¨å†Œè‡ªåŠ¨åŠ è½½çš„æ‰§è¡Œæ–¹æ³• Yii::autoload\nspl_autoload_register(['Yii', 'autoload'], true, true);\n\n// $classMap æ˜¯ Yii è‡ªåŠ¨åŠ è½½æœºåˆ¶ä½¿ç”¨çš„ ç±»æ˜ å°„\n// æ•°ç»„é”®æ˜¯ç±»å(ä¸å¸¦å‰å¯¼åæ–œæ )ï¼Œæ•°ç»„å€¼æ˜¯ç›¸åº”çš„ç±»æ–‡ä»¶è·¯å¾„(æˆ–[è·¯å¾„åˆ«å])\n// ä¸»è¦è¢«ç”¨äº Yii::autoload\nYii::$classMap = require __DIR__ . '/classes.php';\n\n// Container the dependency injection (DI) container used by createObject()\n// å¯ä»¥ä½¿ç”¨ Container::set() æ¥è®¾ç½®ç±»æ‰€éœ€çš„ä¾èµ–é¡¹åŠå…¶åˆå§‹å±æ€§å€¼\nYii::$container = new yii\\di\\Container();\n```\n\nåˆ†æä¸‹ `Yii::autoload($className)`ï¼š\n\n```php\n/**\n * Class autoload loader.\n *\n * å½“ PHP é‡åˆ°æœªçŸ¥ç±»æ—¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•ã€‚\n * è¯¥æ–¹æ³•å°†æŒ‰ç…§ä»¥ä¸‹è¿‡ç¨‹å°è¯• include ç±»æ–‡ä»¶:\n *\n * 1. Search in [[classMap]];\n * 2. If the class is namespaced (e.g. `yii\\base\\Component`),\n *    å®ƒå°†å°è¯•åŒ…å«ä¸ç›¸åº”è·¯å¾„ åˆ«å ç›¸å…³è”çš„æ–‡ä»¶ (e.g. `@yii/base/Component.php`);\n *\n * This autoloader allows loading classes that follow the [PSR-4 standard](http://www.php-fig.org/psr/psr-4/)\n * and have its top-level namespace or sub-namespaces defined as path aliases.\n *\n * @param string $className ä¸å¸¦å‰å¯¼åæ–œæ  \"\\\" çš„å®Œå…¨é™å®šç±»å\n * @throws UnknownClassException if the class does not exist in the class file\n */\npublic static function autoload($className)\n{\n    if (isset(static::$classMap[$className])) {\n        // 1. Search in [[classMap]];\n        // æ¡†æ¶çš„ç±»\n        $classFile = static::$classMap[$className];\n        if (strpos($classFile, '@') === 0) {\n            // å¯ä»¥åˆ©ç”¨è¿™é‡Œé‡å†™æ¡†æ¶é‡Œçš„ç±» éå¸¸å·§å¦™\n            // When aliases `@yii` and `@yii/bootstrap` are defined, classes in the `yii\\bootstrap` namespace\n            // will be loaded using the `@yii/bootstrap` alias which points to the directory where bootstrap extension\n            // files are installed and all classes from other `yii` namespaces will be loaded from the yii framework directory.\n            $classFile = static::getAlias($classFile);\n        }\n    } elseif (strpos($className, '\\\\') !== false) {\n        // å« \\\n        // èµ°åˆ°è¿™é‡Œçš„ç±»ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±å†™çš„ç±»ï¼Œéæ¡†æ¶çš„\n        // eg. yii\\console\\Controller\n        //     @yii/console/Controller.php\n        //     /var/www/service/vendor/yiisoft/yii2/console/Controller.php\n        // PSR4 è§„åˆ™\n        $classFile = static::getAlias('@' . str_replace('\\\\', '/', $className) . '.php', false);\n        if ($classFile === false || !is_file($classFile)) {\n            // å¤„ç†ä¸äº†ï¼Œäº¤ç»™ composer å°è¯•å¤„ç†\n            return;\n        }\n    } else {\n        // æ²¡æœ‰å‘½åç©ºé—´ï¼Ÿä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘å‘¢ï¼Ÿ\n        return;\n    }\n\n    // æ ¸å¿ƒ\n    include $classFile;\n\n    if (YII_DEBUG && !class_exists($className, false) && !interface_exists($className, false) && !trait_exists($className, false)) {\n        // if the class does not exist in the class file\n        throw new UnknownClassException(\"Unable to find '$className' in file: $classFile. Namespace missing?\");\n    }\n}\n```\n\n> æ›´è¯¦ç»†çš„ `yii\\di\\Container` å°†åœ¨åæ–‡å†åˆ†æï¼Œæ­¤å¤„ä¸å±•å¼€ã€‚\n\n### yii\\web\\Application\n\nå†è¿”å› `index.php`ï¼Œç¬¬ 5 æ­¥ï¼š\n\n```php\n(new yii\\web\\Application($config))->run();\n```\n\n`yii\\web\\Application` ç±»çš„å±‚çº§ç»“æ„ï¼š\n\n```bash\nyii\\base\\Configurable\n|--- yii\\base\\BaseObject\n     |--- yii\\base\\Component\n          |--- yii\\di\\ServiceLocator\n               |--- yii\\base\\Module\n                    |--- yii\\base\\Application\n                         |--- yii\\web\\Application\n```\n\n```php\n/**\n * Runs the application.\n * This is the main entrance of an application.\n * @return int the exit status (0 means normal, non-zero values mean abnormal)\n */\npublic function run()\n{\n    try {\n        $this->state = self::STATE_BEFORE_REQUEST;\n        $this->trigger(self::EVENT_BEFORE_REQUEST);\n\n        $this->state = self::STATE_HANDLING_REQUEST;\n        $response = $this->handleRequest($this->getRequest());\n\n        $this->state = self::STATE_AFTER_REQUEST;\n        $this->trigger(self::EVENT_AFTER_REQUEST);\n\n        $this->state = self::STATE_SENDING_RESPONSE;\n        $response->send();\n\n        $this->state = self::STATE_END;\n\n        return $response->exitStatus;\n    } catch (ExitException $e) {\n        $this->end($e->statusCode, isset($response) ? $response : null);\n        return $e->statusCode;\n    }\n}\n```\n\n| Application state      | value | desc                                                    |\n| ---------------------- | ----- | ------------------------------------------------------- |\n| STATE_BEGIN            | 0     | just started åœ¨ base\\Application \\_\\_construct          |\n| STATE_INIT             | 1     | initializing åœ¨ base\\Application init                   |\n| STATE_BEFORE_REQUEST   | 2     | triggering EVENT_BEFORE_REQUEST åœ¨ base\\Application run |\n| STATE_HANDLING_REQUEST | 3     | handling åœ¨ base\\Application run                        |\n| STATE_AFTER_REQUEST    | 4     | triggering EVENT_AFTER_REQUEST åœ¨ base\\Application run  |\n| STATE_SENDING_RESPONSE | 5     | send response åœ¨ base\\Application run                   |\n| STATE_END              | 6     | has ended åœ¨ base\\Application run                       |\n\nè¿™é‡Œå°±æ¶‰åŠå¾ˆå¤šæ ¸å¿ƒæ¦‚å¿µäº†ï¼Œä¸‹èŠ‚è§ã€‚\n\n-- EOF --\n","tags":["php","yii2"],"categories":["yii2"]},{"title":"PHP __invoke ä½¿ç”¨","url":"/2021/07/20/php-invoke-is-anybody-using-it/","content":"\nwhy they are magic? Because they are magically called by PHP when specific actions happen.\n\nThe `__invoke()` method is called when a script tries to call an object as a function.\n\n```php\n<?php\nclass CallableClass\n{\n    public function __invoke($x)\n    {\n        var_dump($x);\n    }\n}\n$obj = new CallableClass;\n$obj(5);\nvar_dump(is_callable($obj));\n```\n\n```bash\nint(5)\nbool(true)\n```\n\n## ä½¿ç”¨æ˜æ˜¾çš„æ“ä½œæ–¹æ³•åˆå§‹åŒ–\n\nä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æœ‰ä¸€ä¸ªæä¾›è€…æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚\n\n[aws-sdk-php/src/Endpoint/PatternEndpointProvider.php](https://github.com/aws/aws-sdk-php/blob/master/src/Endpoint/PatternEndpointProvider.php)\n\n```php\npublic function __invoke(array $args = [])\n{\n    $service = isset($args['service']) ? $args['service'] : '';\n    $region = isset($args['region']) ? $args['region'] : '';\n    $keys = [\"{$region}/{$service}\", \"{$region}/*\", \"*/{$service}\", \"*/*\"];\n\n    foreach ($keys as $key) {\n        if (isset($this->patterns[$key])) {\n            return $this->expand(\n                $this->patterns[$key],\n                isset($args['scheme']) ? $args['scheme'] : 'https',\n                $service,\n                $region\n            );\n        }\n    }\n\n    return null;\n}\n```\n\nå®ƒä½¿ç”¨ invoke ä½¿ç”¨ä¸€äº›å‚æ•°æä¾›ç«¯ç‚¹ã€‚æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨è¿™ä¸ªç±»ï¼Ÿ\n\n```php\npublic function testReturnsNullWhenUnresolved()\n{\n    $e = new PatternEndpointProvider(['foo' => ['rules' => []]]);\n    $this->assertNull($e(['service' => 'foo', 'region' => 'bar']));\n}\n```\n\n## å°è¯•ä½¿ç”¨å•åŠ¨ä½œæ§åˆ¶å™¨ï¼Ÿ\n\næ§åˆ¶å™¨åº”è¯¥å¤§è€Œå¹¿æ³›ï¼Ÿä»–ä»¬ä¸åº”è¯¥ã€‚æˆ‘ä»¬åº”è¯¥æœ‰ç˜¦æ§åˆ¶å™¨å’Œèƒ–æœåŠ¡ã€‚\n\nåœ¨è¿™é‡Œï¼Œinvoke å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåªå¤„ç†å•ä¸ªåŠ¨ä½œçš„æ§åˆ¶å™¨ï¼Œå¹¶åœ¨å…¶ä¸Šæ”¾ç½®å•ä¸ª invoke æ–¹æ³•ã€‚\n\nè¿™ä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬å®ç°å•ä¸€èŒè´£åŸåˆ™ï¼Œå³ SOLID ä¸­çš„ Sï¼Œè¿™æ˜¯å‰äº”ä¸ªé¢å‘å¯¹è±¡è®¾è®¡ (OOD) åŸåˆ™çš„é¦–å­—æ¯ç¼©å†™è¯ã€‚\n\n> A class should have one and only one reason to change, meaning that a class should have only one job.\n\nåœ¨ Laravel ä¸­çš„ä¾‹å­ï¼š[Single Action Controllers | laravel](https://laravel.com/docs/5.7/controllers#single-action-controllers)ï¼š\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\User;\nuse App\\Http\\Controllers\\Controller;\n\nclass ShowProfile extends Controller\n{\n    /**\n     * Show the profile for the given user.\n     *\n     * @param  int  $id\n     * @return View\n     */\n    public function __invoke($id)\n    {\n        return view('user.profile', ['user' => User::findOrFail($id)]);\n    }\n}\n```\n\nç„¶åï¼Œåœ¨æ³¨å†Œè·¯ç”±æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŒ‡å®šæ–¹æ³•åç§°ã€‚åªæœ‰ç±»åã€‚\n\n```php\n<?php\nRoute::get('user/{id}', 'ShowProfile');\n```\n\nThis way we can have Single Action Controllers.\n\n## References\n\n- [PHP invoke: is anybody using it? | medium](https://luis-barros-nobrega.medium.com/php-invoke-is-anybody-using-it-1933c64d17f1)\n- [\\_\\_invoke() | php](https://www.php.net/manual/en/language.oop5.magic.php#object.invoke)\n\n-- EOF --\n","tags":["php"]},{"title":"PHP strict_types ä¸¥æ ¼æ¨¡å¼","url":"/2021/07/19/php-strict-types/","content":"\n- ä¸¥æ ¼æ¨¡å¼çš„å£°æ˜ _å¿…é¡»_ æ”¾åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ã€‚\n- ä¸¥æ ¼æ¨¡å¼ä¸ä»…ä½œç”¨äºå‡½æ•°å‚æ•°çš„ç±»å‹å£°æ˜ï¼Œä¹Ÿä½œç”¨äºå‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚\n\nå£°æ˜ PHP æ–‡ä»¶ä½œä¸ºä¸¥æ ¼æ¨¡å¼çš„ä¸€ä¸ªå¥½äº‹æ˜¯ï¼Œå®é™…ä¸Šåªé€‚ç”¨äºå½“å‰æ–‡ä»¶ã€‚è¿™ç¡®ä¿äº†è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸¥æ ¼ç±»å‹ï¼Œä½†æ˜¯ä»–æ²¡æœ‰å½±å“åˆ°æ•´ä¸ªé¡¹ç›®ä¸­çš„å…¶ä»–æ–‡ä»¶ã€‚è¿™å…è®¸ä½ ä¸€æ­¥ä¸€æ­¥çš„è¿ç§»éä¸¥æ ¼æ¨¡å¼çš„ä»£ç ã€‚\n\nä½¿ç”¨æç¤ºç±»å‹æ²¡æœ‰ strict_types å¯èƒ½å¯¼è‡´å¾®å¦™çš„é”™è¯¯ã€‚\n\nä¸¥æ ¼ç±»å‹ä¹‹å‰ï¼Œ`int $x` æ„å‘³ç€ `$x must have a value coercible to an int`ã€‚\n\n- a float (example: 13.1459 -> 13)\n- a bool (example: true -> 1)\n- a null (example: null -> 0)\n- a string with leading digits (example: â€œ15 Treesâ€ -> 15)\n\nè®¾ç½®ä¸¥æ ¼æ¨¡å¼åï¼Œyou tell the engine that `int $x` means `$x must only be an int proper, no type coercion allowed`ã€‚\n\nè°ç»™æ›´å…³å¿ƒ `strict_type` è¿™è¡Œï¼Ÿis more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:\n\nThe types in this current scope are treated strictly.\n\n## å¯¹æ¯”\n\n```php\n<?php\nfunction add(int $a, int $b): int\n{\n  return $a + $b;\n}\n\nvar_dump(add(1.0, 2.0));\n```\n\nè¿è¡Œè¾“å‡º `int(3)`ã€‚\n\n```php\n<?php\ndeclare(strict_types=1);\nfunction add(int $a, int $b): int\n{\n  return $a + $b;\n}\n\nvar_dump(add(1.0, 2.0));\n```\n\nè¿è¡Œè¾“å‡ºï¼š\n\n```bash\nPHP Fatal error:  Uncaught TypeError: Argument 1 passed to add() must be of the type int, float given, ...\n```\n\n## å£°æ˜ä½ç½®\n\nå¿…é¡»åœ¨è„šæœ¬æœ€å‰ã€‚ä¸èƒ½å†™åœ¨è„šæœ¬çš„ä¸­é—´ï¼Œå¦‚ä¸‹å†™æ³•æ˜¯é”™è¯¯çš„ï¼š\n\n```php\n<?php\nfunction add(int $a, int $b): int\n{\n  return $a + $b;\n}\ndeclare(strict_types=1);\n\nvar_dump(add(1.0, 2.0));\n```\n\nè¿è¡ŒåæŠ¥é”™ï¼š\n\n```bash\nPHP Fatal error:  strict_types declaration must be the very first statement in the script in ...\n```\n\nä¸å¾—ä½¿ç”¨ block mode è¿›è¡Œå£°æ˜ï¼š\n\n```php\n<?php\ndeclare(strict_types=1) {\n  var_dump(1);\n}\n```\n\nè¿è¡ŒåæŠ¥é”™ï¼š\n\n```bash\nPHP Fatal error:  strict_types declaration must not use block mode in ...\n```\n\n## å¤šæ–‡ä»¶åœºæ™¯\n\n### ä¾‹å­ 1\n\n`A.php`\n\n```php\n<?php\n// ä¸¥æ ¼æ¨¡å¼\ndeclare(strict_types=1);\nfunction add(int $a, int $b): int\n{\n  return $a + $b;\n}\n```\n\n`B.php`\n\n```php\n<?php\n// éä¸¥æ ¼æ¨¡å¼\nrequire 'A.php';\n// è¿åäº† A çš„å®šä¹‰\nvar_dump(add(1.0, 2.0));\n```\n\nè¿è¡Œ\n\n```bash\nphp B.php\n\nint(3)\n```\n\n### ä¾‹å­ 2\n\n`A.php`\n\n```php\n<?php\n// éä¸¥æ ¼æ¨¡å¼\nfunction add(int $a, int $b): int\n{\n  return $a + $b;\n}\n```\n\n`B.php`\n\n```php\n<?php\n// ä¸¥æ ¼æ¨¡å¼\ndeclare(strict_types=1);\nrequire 'A.php';\n// è¿åäº† A çš„å®šä¹‰\nvar_dump(add(1.0, 2.0));\n```\n\nè¿è¡Œ\n\n```bash\nphp B.php\n\nPHP Fatal error:  Uncaught TypeError: Argument 1 passed to add() must be of the type int, float given, called in ...\n```\n\n### å°ç»“\n\n- å‡½æ•°å®šä¹‰æ—¶çš„ä¸¥æ ¼æ¨¡å¼ï¼Œè¡Œä¸ºå¹¶ä¸ä¼šå‡ºç°ä»€ä¹ˆä¸åŒã€‚\n- å‡½æ•°æ‰§è¡Œæ—¶çš„ï¼Œä¸¥æ ¼æ¨¡å¼ä¼šå‡ºç°å·®å¼‚ã€‚\n- `declare(strict_types=1);` çš„å£°æ˜æœ¬èº«åœ¨ A.php æ–‡ä»¶ä¸­å®Œæˆã€‚è¢« B.php æ–‡ä»¶ requireï¼Œè€Œ B.php å¹¶æ²¡æœ‰å®šä¹‰ä¸¥æ ¼æ¨¡å¼ï¼Œé‚£ä¹ˆæ‰§è¡Œ require çš„ B.php æ–‡ä»¶ä¸ä¼šå˜æˆä¸¥æ ¼æ¨¡å¼ã€‚\n\n## æ€»ç»“\n\nåªæœ‰åœ¨å†™ declare çš„æ–‡ä»¶çš„æ‰§è¡Œéƒ¨åˆ†æ‰ä¼šæ‰§è¡Œä¸¥æ ¼æ¨¡å¼ï¼Œè¯¥æ–‡ä»¶ä¸­è°ƒç”¨çš„å…¶å®ƒå‡½æ•°ï¼ˆå…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°ï¼‰ä¹Ÿä¼šè¢«å½±å“ã€‚\n\nè‹¥æœæƒ³å®Œå…¨ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œæ¯”è¾ƒç®€å•çš„æ–¹æ³•æ˜¯åœ¨æ‰€æœ‰ php æ–‡ä»¶éƒ½å†™ä¸Š `declare(strict_types=1);`ã€‚\n\n## å·¥å…·\n\næ¨èè‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·ï¼š[symplify/easy-coding-standard](https://github.com/symplify/easy-coding-standard)ã€‚\n\n## References\n\n- [å…³äº declare(strict_types=1) çš„æœ‰æ•ˆèŒƒå›´ | segmentfault](https://segmentfault.com/a/1190000018389227)\n- [Strict Types in PHP | medium](https://chemaclass.medium.com/strict-types-in-php-d4166bd25394)\n- [Scalar type declarations | php](https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.scalar-type-declarations)\n- [Strict typing | php](https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.strict)\n\n-- EOF --\n","tags":["php"]},{"title":"Git and GitHub Secrets","url":"/2021/07/12/git-and-github-secrets/","content":"\n## è®°ä½å¯†ç \n\nGit è®°ä½å¯†ç é…ç½®åï¼Œä¸ç”¨æ¯æ¬¡ pullã€push éƒ½éœ€è¦è¾“å…¥å¯†ç ï¼š\n\n```bash\ngit config --global credential.helper store\n```\n\nä¼šåœ¨ `cat ~/.gitconfig` çœ‹åˆ°ï¼š\n\n```bash\n[credential]\n    helper = store\n```\n\n## å¿«é€Ÿæ£€å‡ºä¸Šä¸€ä¸ªåˆ†æ”¯\n\n```bash\ngit checkout -\n```\n\n## æäº¤ç©ºæ”¹åŠ¨\n\n```bash\ngit commit -m \"empty commit\" --allow-empty\n```\n\nåœ¨å¦‚ä¸‹å‡ ç§æƒ…å†µä¸‹æ˜¯æœ‰æ„ä¹‰ï¼š\n\n- æ ‡è®°ä¸€æ‰¹å·¥ä½œæˆ–ä¸€ä¸ªæ–°åŠŸèƒ½çš„å¼€å§‹ã€‚\n- è®°å½•ä½ å¯¹é¡¹ç›®è¿›è¡Œäº†è·Ÿä»£ç æ— å…³çš„æ”¹åŠ¨ã€‚\n- è·Ÿä½¿ç”¨ä½ ä»“åº“çš„å…¶ä»–äººäº¤æµã€‚\n- ä½œä¸ºä»“åº“çš„ç¬¬ä¸€æ¬¡æäº¤ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æäº¤æ—¥åæ˜¯ä¸èƒ½è¢« rebase çš„ï¼š`git commit -m \"init repo\" --allow-empty`ã€‚\n\n## æ›´ç›´è§‚çš„ status\n\n```bash\ngit status -sb\n```\n\n## æ›´ç›´è§‚çš„ log\n\n```bash\ngit log --all --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an %ae>%Creset' --abbrev-commit --date=relative\n```\n\n## æäº¤ä¿¡æ¯æŸ¥è¯¢\n\næ‰¾åˆ°å…¶ä¸­å’Œæœç´¢æ¡ä»¶ç›¸åŒ¹é…çš„æœ€è¿‘çš„ä¸€æ¡ã€‚query ï¼ˆåŒºåˆ«å¤§å°å†™ï¼‰æ˜¯ä½ æƒ³è¦æœç´¢çš„è¯è¯­ã€‚\n\n```bash\ngit show :/query\n```\n\n## åˆ†æ”¯åˆå¹¶\n\næ˜¾ç¤ºæ‰€æœ‰å·²ç»åˆå¹¶åˆ°ä½ å½“å‰åˆ†æ”¯çš„åˆ†æ”¯åˆ—è¡¨ï¼š\n\n```bash\ngit branch --merged\n```\n\nç›¸ååœ°ï¼š\n\n```bash\ngit branch --no-merged\n```\n\n## .gitconfig\n\næ‰“å¼€ç¼–è¾‘ï¼š\n\n```bash\nvim ~/.gitconfig\n```\n\nå‘½ä»¤ä¿®æ”¹ï¼š\n\n```bash\ngit config --global alias.co 'checkout'\ngit config --global alias.ac 'add -A . && commit'\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an %ae>%Creset' --abbrev-commit\"\n```\n\n## GitHub\n\n### æ•´è¡Œé«˜äº®\n\nå¤šè¡Œé«˜äº®ä¹Ÿå¯ä»¥ï¼Œæ¯”å¦‚ç”¨ #L53-L60 é€‰æ‹©èŒƒå›´ï¼Œæˆ–è€…æŒ‰ä½ shift é”®ï¼Œç„¶åå†ç‚¹å‡»é€‰æ‹©çš„ä¸¤è¡Œã€‚\n\n```bash\nhttps://github.com/rails/rails/blob/master/activemodel/lib/active_model.rb#L53-L60\n```\n\n### ç”¨ commit ä¿¡æ¯å…³é—­ issue\n\nå¦‚æœæŸä¸ªæäº¤ä¿®å¤äº†ä¸€ä¸ª Issueï¼Œå½“æäº¤åˆ° master åˆ†æ”¯æ—¶ï¼Œæäº¤ä¿¡æ¯é‡Œå¯ä»¥ä½¿ç”¨ fix/fixes/fixed , close/closes/closed æˆ–è€… resolve/resolves/resolved ç­‰å…³é”®è¯ï¼Œåé¢å†è·Ÿä¸Š Issue å·ï¼Œè¿™æ ·å°±ä¼šå…³é—­è¿™ä¸ª Issueã€‚\n\n```bash\ngit commit -m \"Fix screwup, fixes #12\"\n```\n\n### é“¾æ¥å…¶ä»–ä»“åº“çš„ Issue\n\nå¦‚æœä½ æƒ³å¼•ç”¨åˆ°åŒä¸€ä¸ªä»“åº“ä¸­çš„ä¸€ä¸ª Issueï¼Œåªéœ€ä½¿ç”¨äº•å· # åŠ ä¸Š Issue å·ï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨åˆ›å»ºåˆ°æ­¤ Issue çš„é“¾æ¥ã€‚\n\nè¦é“¾æ¥åˆ°å…¶ä»–ä»“åº“çš„ Issueï¼Œå°±ä½¿ç”¨ `user_name/repo_name#ISSUE_NUMBER` çš„æ–¹å¼ï¼Œä¾‹å¦‚ `tiimgreen/toc#12`ã€‚\n\n## Reference\n\n- [Git and GitHub Secrets | speakerdeck](https://speakerdeck.com/holman/git-and-github-secrets)\n- [More Git and GitHub Secrets | speakerdeck](https://speakerdeck.com/holman/more-git-and-github-secrets)\n\n-- EOF --\n","tags":["git"]},{"title":"å¦‚ä½•åšå¥½æŠ€æœ¯ååŒåŠç®¡ç†","url":"/2021/07/08/how-to-do-technical-management/","content":"\nã€Šå¦‚ä½•åšå¥½æŠ€æœ¯ååŒåŠç®¡ç† â€”â€” åˆä½œä¼™ä¼´ç¯‡ã€‹ä¸€æ¬¡æ²™é¾™åçš„ç¬”è®°ã€‚\n\n## æ‹›äºº\n\n- æ³¨é‡æ‹›äººç¯èŠ‚ï¼›åœ¨è¿™ä¸€æ­¥è¦å¡ä¸¥ï¼Œå› ä¸ºå…¥èŒåå†æŠ˜è…¾å°±æ›´è´¹æ—¶è´¹åŠ›äº†ã€‚\n- è¦å…³æ³¨çš„ç‚¹ï¼šåŸºç¡€æ°´å¹³ï¼ˆå·¥ç¨‹èƒ½åŠ›ï¼‰ã€ç¦»èŒåŸå› ï¼ˆæ˜¯å¦èƒ½é•¿ä¹…ï¼‰ã€ä¸ªäººæ€§æ ¼ï¼ˆæ°”åœºæ˜¯å¦ç›¸åˆï¼‰ã€‚\n\n## å…¥èŒ\n\n- ä¸»åŠ¨æ²Ÿé€šæ˜¯é‡è¦çš„ç‰¹è´¨ã€‚è¿˜æœ‰è´£ä»»å¿ƒã€å¯å¡‘æ€§ã€æ‰§è¡ŒåŠ›ã€‚\n- å‰ç´§åæ¾ï¼›å‰æœŸè¦åš code reviewï¼Œå…»æˆå¥½ä¹ æƒ¯ã€‚\n- å…³æ³¨æµ‹è¯•åŒå­¦ä»¥åŠå…¶ä»–åŒå­¦å¯¹å…¶çš„åé¦ˆã€‚äº†è§£å·¥ä½œçŠ¶æ€ã€è´¨é‡ã€‚\n- åœ¨çªç ´åº•çº¿ååº”è¯¥å½“æœºç«‹æ–­ï¼Œæ— éœ€å¿ƒå­˜å¹»æƒ³ã€‚\n\n## å¿ƒæ€\n\n- æ²¡æœ‰å½’å®¿æ„Ÿï¼›owner æ„è¯†ã€‚\n- æ¯ä¸€ä½éƒ½æ˜¯ç»„å†…çš„ä¸€å‘˜ã€‚\n\n## ç®¡ç†\n\n- æ—©ä¼šï¼›ä»»åŠ¡å®‰æ’ï¼Œè·Ÿè¸ªè¿›åº¦ã€‚ä¸èƒ½ä¸é—»ä¸é—®ï¼Œæœ€åå®¹æ˜“æŠ“çã€‚\n- è¶…è¿‡ 30min è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œç›´æ¥æ²Ÿé€šï¼Œé¿å…å›¢é˜Ÿæ—¶é—´çš„æµªè´¹ã€‚\n- è¯»ä¹¦ä¼šï¼Œç»„å†…åˆ†äº«ï¼›æ‰“é€ ä¸€ä¸ªå¥½çš„æŠ€æœ¯æ°›å›´ï¼Œè¿™é‡Œä¸åªæ˜¯å·¥ä½œï¼Œè¿˜èƒ½æˆé•¿ã€‚\n- è¦å¯¹ä»»åŠ¡çš„å·¥ä½œé‡æœ‰åˆ¤æ–­ï¼›å¹¶ä¸”æ˜ç¡®å¼€å‘è§„æ¨¡ï¼Œå¹¶ä¸”è¿›è¡Œæ ¸å¯¹ï¼Œé˜²æ­¢ â€œå¤§äº‹å°åšï¼Œå°é¢˜å¤§åšâ€ã€‚\n- é€šè¿‡å…ˆç¼–å†™å¥½å•å…ƒæµ‹è¯•ã€æ¡†æ¶ç»“æ„ã€interfaceï¼Œæ§åˆ¶éœ€æ±‚å®ç°ã€ä»£ç è´¨é‡ã€‚\n- åœ¨æ— æ³•è¿›è¡Œæ¨ªå‘å¯¹æ¯”çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¯¹æ¯”åŠ å…¥å‰åæ˜¯å¦é‡Šæ”¾è‡ªèº«ç”Ÿäº§åŠ›æ¥è¿›è¡Œåˆ¤æ–­ã€‚\n- ä¸‰ä¸ªå¡ç‚¹ï¼šéœ€æ±‚è¯„å®¡ã€æŠ€æœ¯å®ç°è¯„å®¡ã€æµ‹è¯•ç”¨ä¾‹è¯„å®¡ï¼ŒæŠŠå…³è´¨é‡ã€‚\n\n-- EOF --\n","tags":["thinking"]},{"title":"ã€è®¾è®¡æ¨¡å¼ä¹‹ç¾ã€‘ç¬”è®° Part 2","url":"/2021/02/06/the-beauty-of-design-patterns-reading-notes-part2/","content":"\n## 11\n\né¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain Driven Designï¼Œç®€ç§° DDDï¼‰ã€‚\n\n### ä»€ä¹ˆæ˜¯åŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼ï¼Ÿ\n\nUserEntity å’Œ UserRepository ç»„æˆäº†æ•°æ®è®¿é—®å±‚ï¼ŒUserBo å’Œ UserService ç»„æˆäº†ä¸šåŠ¡é€»è¾‘å±‚ï¼ŒUserVo å’Œ UserController åœ¨è¿™é‡Œå±äºæ¥å£å±‚ã€‚\n\nService å±‚çš„æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œè¢«åˆ†å‰²ä¸º BO å’Œ Service ä¸¤ä¸ªç±»ä¸­ã€‚åƒ UserBo è¿™æ ·ï¼ŒåªåŒ…å«æ•°æ®ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œå°±å«ä½œè´«è¡€æ¨¡å‹ï¼ˆAnemic Domain Modelï¼‰ã€‚\n\nè¿™ç§è´«è¡€æ¨¡å‹å°†æ•°æ®ä¸æ“ä½œåˆ†ç¦»ï¼Œç ´åäº†é¢å‘å¯¹è±¡çš„å°è£…ç‰¹æ€§ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹é£æ ¼ã€‚\n\n### ä»€ä¹ˆæ˜¯åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ï¼Ÿ\n\né¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œå³ DDDï¼Œä¸»è¦æ˜¯ç”¨æ¥æŒ‡å¯¼å¦‚ä½•è§£è€¦ä¸šåŠ¡ç³»ç»Ÿï¼Œåˆ’åˆ†ä¸šåŠ¡æ¨¡å—ï¼Œå®šä¹‰ä¸šåŠ¡é¢†åŸŸæ¨¡å‹åŠå…¶äº¤äº’ã€‚\n\nåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼ï¼Œé‡ Service è½» BOï¼›åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ï¼Œè½» Service é‡ Domainã€‚\n\n### ä¸ºä»€ä¹ˆåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼å¦‚æ­¤å—æ¬¢è¿ï¼Ÿ\n\n- ç³»ç»Ÿä¸šåŠ¡å¯èƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œç®€å•åˆ°å°±æ˜¯åŸºäº SQL çš„ CRUD æ“ä½œ\n- å……è¡€æ¨¡å‹çš„è®¾è®¡è¦æ¯”è´«è¡€æ¨¡å‹æ›´åŠ æœ‰éš¾åº¦ã€‚æˆ‘ä»¬ä»ä¸€å¼€å§‹å°±è¦è®¾è®¡å¥½é’ˆå¯¹æ•°æ®è¦æš´éœ²å“ªäº›æ“ä½œï¼Œå®šä¹‰å“ªäº›ä¸šåŠ¡é€»è¾‘ã€‚è€Œä¸æ˜¯åƒè´«è¡€æ¨¡å‹é‚£æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰æ•°æ®ï¼Œä¹‹åæœ‰ä»€ä¹ˆåŠŸèƒ½å¼€å‘éœ€æ±‚ï¼Œæˆ‘ä»¬å°±åœ¨ Service å±‚å®šä¹‰ä»€ä¹ˆæ“ä½œï¼Œä¸éœ€è¦äº‹å…ˆåšå¤ªå¤šè®¾è®¡ã€‚\n- æ€ç»´å·²å›ºåŒ–ï¼Œè½¬å‹æœ‰æˆæœ¬ã€‚\n\n### ä»€ä¹ˆé¡¹ç›®åº”è¯¥è€ƒè™‘ä½¿ç”¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ï¼Ÿ\n\né€‚åˆä¸šåŠ¡å¤æ‚çš„ç³»ç»Ÿå¼€å‘ã€‚æ¯”å¦‚ï¼ŒåŒ…å«å„ç§åˆ©æ¯è®¡ç®—æ¨¡å‹ã€è¿˜æ¬¾æ¨¡å‹ç­‰å¤æ‚ä¸šåŠ¡çš„é‡‘èç³»ç»Ÿã€‚\n\nä¸¤ç§ä¸åŒçš„å¼€å‘æ¨¡å¼ä¼šå¯¼è‡´ä¸åŒçš„å¼€å‘æµç¨‹ã€‚åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼çš„å¼€å‘æµç¨‹ï¼Œåœ¨åº”å¯¹å¤æ‚ä¸šåŠ¡ç³»ç»Ÿçš„å¼€å‘çš„æ—¶å€™æ›´åŠ æœ‰ä¼˜åŠ¿ã€‚\n\nDDD è¿™ç§å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦äº‹å…ˆç†æ¸…æ¥šæ‰€æœ‰çš„ä¸šåŠ¡ï¼Œå®šä¹‰é¢†åŸŸæ¨¡å‹æ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•ã€‚é¢†åŸŸæ¨¡å‹ç›¸å½“äºå¯å¤ç”¨çš„ä¸šåŠ¡ä¸­é—´å±‚ã€‚æ–°åŠŸèƒ½éœ€æ±‚çš„å¼€å‘ï¼Œéƒ½åŸºäºä¹‹å‰å®šä¹‰å¥½çš„è¿™äº›é¢†åŸŸæ¨¡å‹æ¥å®Œæˆã€‚\n\n## 12\n\n### ä¸€ä¸ªè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿ\n\nå……å€¼ã€æç°ã€æ”¯ä»˜ã€æŸ¥è¯¢ä½™é¢ã€æŸ¥è¯¢äº¤æ˜“æµæ°´ã€‚ç”šè‡³è¿˜æœ‰å†»ç»“ã€é€æ”¯ã€è½¬èµ ç­‰ã€‚\n\næ•´ä¸ªé’±åŒ…ç³»ç»Ÿä¸€éƒ¨åˆ†å•çº¯è·Ÿåº”ç”¨å†…çš„è™šæ‹Ÿé’±åŒ…è´¦æˆ·æ‰“äº¤é“ï¼Œå¦ä¸€éƒ¨åˆ†å•çº¯è·Ÿé“¶è¡Œè´¦æˆ·æ‰“äº¤é“ã€‚æˆ‘ä»¬åŸºäºè¿™æ ·ä¸€ä¸ªä¸šåŠ¡åˆ’åˆ†ï¼Œç»™ç³»ç»Ÿè§£è€¦ï¼Œå°†æ•´ä¸ªé’±åŒ…ç³»ç»Ÿæ‹†åˆ†ä¸ºä¸¤ä¸ªå­ç³»ç»Ÿï¼šè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿå’Œä¸‰æ–¹æ”¯ä»˜ç³»ç»Ÿã€‚\n\n![image](https://user-images.githubusercontent.com/9289792/107135323-ba50b780-6934-11eb-8b85-1738440f42bc.png)\n\nä¸ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œåªå®ç°æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚\n\n```java\npublic class VirtualWalletService {\n  // é€šè¿‡æ„é€ å‡½æ•°æˆ–è€… IOC æ¡†æ¶æ³¨å…¥\n  private VirtualWalletRepository walletRepo;\n  private VirtualWalletTransactionRepository transactionRepo;\n\n  public VirtualWallet getVirtualWallet(Long walletId ) {\n    VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);\n    VirtualWallet wallet = convert(walletEntity);\n    return wallet;\n  }\n\n  public BigDecimal getBalance(Long walletId) {\n    return virtualWalletRepo.getBalance(walletId);\n  }\n\n  public void debit(Long walletId, BigDecimal amount) {\n    VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);\n\n    // è´«è¡€å‹\n    // BigDecimal balance = walletEntity.getBalance();\n    // if (balance.compareTo(amount) < 0) {\n    //   throw new NoSufficientBalanceException(...);\n    // }\n    // walletRepo.updateBalance(walletId, balance.subtract(amount));\n\n    // DDD\n    VirtualWallet wallet = convert(walletEntity);\n    wallet.debit(amount);\n    walletRepo.updateBalance(walletId, wallet.balance());\n  }\n\n  public void credit(Long walletId, BigDecimal amount) {\n    VirtualWalletEntity walletEntity = walletRepo.getWalletEntity(walletId);\n\n    // è´«è¡€å‹\n    // BigDecimal balance = walletEntity.getBalance();\n    // walletRepo.updateBalance(walletId, balance.add(amount));\n\n    // DDD\n    VirtualWallet wallet = convert(walletEntity);\n    wallet.credit(amount);\n    walletRepo.updateBalance(walletId, wallet.balance());\n  }\n\n  public void transfer(Long fromWalletId, Long toWalletId, BigDecimal amount) {\n    VirtualWalletTransactionEntity transactionEntity = new VirtualWalletTransactionEntity();\n    transactionEntity.setAmount(amount);\n    transactionEntity.setCreateTime(System.currentTimeMillis());\n    transactionEntity.setFromWalletId(fromWalletId);\n    transactionEntity.setToWalletId(toWalletId);\n    transactionEntity.setStatus(Status.TO_BE_EXECUTED);\n    Long transactionId = transactionRepo.saveTransaction(transactionEntity);\n    try {\n      debit(fromWalletId, amount);\n      credit(toWalletId, amount);\n    } catch (InsufficientBalanceException e) {\n      transactionRepo.updateStatus(transactionId, Status.CLOSED);\n      // ...rethrow exception e...\n    } catch (Exception e) {\n      transactionRepo.updateStatus(transactionId, Status.FAILED);\n      // ...rethrow exception e...\n    }\n    transactionRepo.updateStatus(transactionId, Status.EXECUTED);\n  }\n}\n```\n\né¢†åŸŸæ¨¡å‹ VirtualWallet ç±»å¾ˆå•è–„ï¼ŒåŒ…å«çš„ä¸šåŠ¡é€»è¾‘å¾ˆç®€å•ã€‚ç›¸å¯¹äºåŸæ¥çš„è´«è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯ï¼Œè¿™ç§å……è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯ï¼Œè²Œä¼¼å¹¶æ²¡æœ‰å¤ªå¤§ä¼˜åŠ¿ã€‚è¿™ä¹Ÿæ˜¯å¤§éƒ¨åˆ†ä¸šåŠ¡ç³»ç»Ÿéƒ½ä½¿ç”¨åŸºäºè´«è¡€æ¨¡å‹å¼€å‘çš„åŸå› ã€‚ä¸è¿‡ï¼Œå¦‚æœè™šæ‹Ÿé’±åŒ…ç³»ç»Ÿéœ€è¦æ”¯æŒæ›´å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£å……è¡€æ¨¡å‹çš„ä¼˜åŠ¿å°±æ˜¾ç°å‡ºæ¥äº†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æ”¯æŒé€æ”¯ä¸€å®šé¢åº¦å’Œå†»ç»“éƒ¨åˆ†ä½™é¢çš„åŠŸèƒ½ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é‡æ–°æ¥çœ‹ä¸€ä¸‹ VirtualWallet ç±»çš„å®ç°ä»£ç ã€‚\n\n```java\npublic class VirtualWallet {\n  private Long id;\n  private Long createTime = System.currentTimeMillis();\n  private BigDecimal balance = BigDecimal.ZERO;\n  private boolean isAllowedOverdraft = true;\n  private BigDecimal overdraftAmount = BigDecimal.ZERO;\n  private BigDecimal frozenAmount = BigDecimal.ZERO;\n\n  public VirtualWallet(Long preAllocatedId) {\n    this.id = preAllocatedId;\n  }\n\n  public BigDecimal balance() {\n    return this.balance;\n  }\n\n  public BigDecimal getAvaliableBalance() {\n    BigDecimal totalAvaliableBalance = this.balance.subtract(this.frozenAmount);\n    if (isAllowedOverdraft) {\n      totalAvaliableBalance += this.overdraftAmount;\n    }\n    return totalAvaliableBalance;\n  }\n\n  public void debit(BigDecimal amount) {}\n  public void credit(BigDecimal amount) {}\n\n  public void freeze(BigDecimal amount) { ... }\n  public void unfreeze(BigDecimal amount) { ...}\n  public void increaseOverdraftAmount(BigDecimal amount) { ... }\n  public void decreaseOverdraftAmount(BigDecimal amount) { ... }\n  public void closeOverdraft() { ... }\n  public void openOverdraft() { ... }\n}\n```\n\nå¦‚æœåŠŸèƒ½ç»§ç»­æ¼”è¿›ï¼Œæˆ‘ä»¬å¯ä»¥å¢åŠ æ›´åŠ ç»†åŒ–çš„å†»ç»“ç­–ç•¥ã€é€æ”¯ç­–ç•¥ã€æ”¯æŒé’±åŒ…è´¦å·ï¼ˆVirtualWallet id å­—æ®µï¼‰è‡ªåŠ¨ç”Ÿæˆçš„é€»è¾‘ï¼ˆä¸æ˜¯é€šè¿‡æ„é€ å‡½æ•°ç»å¤–éƒ¨ä¼ å…¥ IDï¼Œè€Œæ˜¯é€šè¿‡åˆ†å¸ƒå¼ ID ç”Ÿæˆç®—æ³•æ¥è‡ªåŠ¨ç”Ÿæˆ IDï¼‰ç­‰ç­‰ã€‚\n\n### è¾©è¯æ€è€ƒä¸çµæ´»åº”ç”¨\n\nä¸¤ç§ä»£ç è®¾è®¡ä¸å®ç°ä¸­ï¼Œå¹¶æ²¡æœ‰å®Œå…¨å°† Service ç±»å»æ‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæˆ–è€…è¯´ï¼ŒService ç±»åœ¨è¿™ç§æƒ…å†µä¸‹æ‹…å½“çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿå“ªäº›åŠŸèƒ½é€»è¾‘ä¼šæ”¾åˆ° Service ç±»ä¸­ï¼Ÿ\n\n1. Service ç±»è´Ÿè´£ä¸ Repository äº¤æµã€‚è·å–æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œè½¬åŒ–æˆé¢†åŸŸæ¨¡å‹ VirtualWalletï¼Œç„¶åç”±é¢†åŸŸæ¨¡å‹ VirtualWallet æ¥å®Œæˆä¸šåŠ¡é€»è¾‘ï¼Œæœ€åè°ƒç”¨ Repository ç±»çš„æ–¹æ³•ï¼Œå°†æ•°æ®å­˜å›æ•°æ®åº“ã€‚ä¹‹æ‰€ä»¥è®© VirtualWalletService ç±»ä¸ Repository æ‰“äº¤é“ï¼Œè€Œä¸æ˜¯è®©é¢†åŸŸæ¨¡å‹ VirtualWallet ä¸ Repository æ‰“äº¤é“ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬æƒ³ä¿æŒé¢†åŸŸæ¨¡å‹çš„ç‹¬ç«‹æ€§ï¼Œä¸ä¸ä»»ä½•å…¶ä»–å±‚çš„ä»£ç ï¼ˆRepository å±‚çš„ä»£ç ï¼‰æˆ–å¼€å‘æ¡†æ¶ï¼ˆæ¯”å¦‚ Springã€MyBatisï¼‰è€¦åˆåœ¨ä¸€èµ·ï¼Œå°†æµç¨‹æ€§çš„ä»£ç é€»è¾‘ï¼ˆæ¯”å¦‚ä» DB ä¸­å–æ•°æ®ã€æ˜ å°„æ•°æ®ï¼‰ä¸é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œè®©é¢†åŸŸæ¨¡å‹æ›´åŠ å¯å¤ç”¨ã€‚\n2. Service ç±»è´Ÿè´£è·¨é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡èšåˆåŠŸèƒ½ã€‚VirtualWalletService ç±»ä¸­çš„ transfer() è½¬è´¦å‡½æ•°ä¼šæ¶‰åŠä¸¤ä¸ªé’±åŒ…çš„æ“ä½œï¼Œå› æ­¤è¿™éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘æ— æ³•æ”¾åˆ° VirtualWallet ç±»ä¸­ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠè½¬è´¦ä¸šåŠ¡æ”¾åˆ° VirtualWalletService ç±»ä¸­äº†ã€‚å½“ç„¶ï¼Œè™½ç„¶åŠŸèƒ½æ¼”è¿›ï¼Œä½¿å¾—è½¬è´¦ä¸šåŠ¡å˜å¾—å¤æ‚èµ·æ¥ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è½¬è´¦ä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œè®¾è®¡æˆä¸€ä¸ªç‹¬ç«‹çš„é¢†åŸŸæ¨¡å‹ã€‚\n3. Service ç±»è´Ÿè´£ä¸€äº›éåŠŸèƒ½æ€§åŠä¸ä¸‰æ–¹ç³»ç»Ÿäº¤äº’çš„å·¥ä½œã€‚æ¯”å¦‚å¹‚ç­‰ã€äº‹åŠ¡ã€å‘é‚®ä»¶ã€å‘æ¶ˆæ¯ã€è®°å½•æ—¥å¿—ã€è°ƒç”¨å…¶ä»–ç³»ç»Ÿçš„ RPC æ¥å£ç­‰ï¼Œéƒ½å¯ä»¥æ”¾åˆ° Service ç±»ä¸­ã€‚\n\n### å°ç»“\n\nåŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼è·ŸåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼ç›¸æ¯”ï¼Œä¸»è¦åŒºåˆ«åœ¨ Service å±‚ã€‚åœ¨åŸºäºå……è¡€æ¨¡å‹çš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å°†éƒ¨åˆ†åŸæ¥åœ¨ Service ç±»ä¸­çš„ä¸šåŠ¡é€»è¾‘ç§»åŠ¨åˆ°äº†ä¸€ä¸ªå……è¡€çš„ Domain é¢†åŸŸæ¨¡å‹ä¸­ï¼Œè®© Service ç±»çš„å®ç°ä¾èµ–è¿™ä¸ª Domain ç±»ã€‚\n\nåœ¨åŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼ä¸‹ï¼ŒService ç±»å¹¶ä¸ä¼šå®Œå…¨ç§»é™¤ï¼Œè€Œæ˜¯è´Ÿè´£ä¸€äº›ä¸é€‚åˆæ”¾åœ¨ Domain ç±»ä¸­çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè´Ÿè´£ä¸ Repository å±‚æ‰“äº¤é“ã€è·¨é¢†åŸŸæ¨¡å‹çš„ä¸šåŠ¡èšåˆåŠŸèƒ½ã€å¹‚ç­‰äº‹åŠ¡ç­‰éåŠŸèƒ½æ€§çš„å·¥ä½œã€‚\n\nåŸºäºå……è¡€æ¨¡å‹çš„ DDD å¼€å‘æ¨¡å¼è·ŸåŸºäºè´«è¡€æ¨¡å‹çš„ä¼ ç»Ÿå¼€å‘æ¨¡å¼ç›¸æ¯”ï¼ŒController å±‚å’Œ Repository å±‚çš„ä»£ç åŸºæœ¬ä¸Šç›¸åŒã€‚è¿™æ˜¯å› ä¸ºï¼ŒRepository å±‚çš„ Entity ç”Ÿå‘½å‘¨æœŸæœ‰é™ï¼ŒController å±‚çš„ VO åªæ˜¯å•çº¯ä½œä¸ºä¸€ç§ DTOã€‚ä¸¤éƒ¨åˆ†çš„ä¸šåŠ¡é€»è¾‘éƒ½ä¸ä¼šå¤ªå¤æ‚ã€‚ä¸šåŠ¡é€»è¾‘ä¸»è¦é›†ä¸­åœ¨ Service å±‚ã€‚æ‰€ä»¥ï¼ŒRepository å±‚å’Œ Controller å±‚ç»§ç»­æ²¿ç”¨è´«è¡€æ¨¡å‹çš„è®¾è®¡æ€è·¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\né—ç•™é—®é¢˜ï¼šEntity ä¸ Domain çš„è½¬æ¢åº”è¯¥æ”¾åœ¨å“ªé‡Œï¼Ÿ\n\n## 13 å¦‚ä½•å¯¹æ¥å£é‰´æƒè¿™æ ·ä¸€ä¸ªåŠŸèƒ½å¼€å‘åšé¢å‘å¯¹è±¡åˆ†æï¼Ÿ\n\né¢å‘å¯¹è±¡åˆ†æï¼ˆOOAï¼‰ã€é¢å‘å¯¹è±¡è®¾è®¡ï¼ˆOODï¼‰ã€é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼Œæ˜¯é¢å‘å¯¹è±¡å¼€å‘çš„ä¸‰ä¸ªä¸»è¦ç¯èŠ‚ã€‚\n\næˆ‘ä»¬éœ€è¦é€šè¿‡æ²Ÿé€šã€æŒ–æ˜ã€åˆ†æã€å‡è®¾ã€æ¢³ç†ï¼Œææ¸…æ¥šå…·ä½“çš„éœ€æ±‚æœ‰å“ªäº›ï¼Œå“ªäº›æ˜¯ç°åœ¨è¦åšçš„ï¼Œå“ªäº›æ˜¯æœªæ¥å¯èƒ½è¦åšçš„ï¼Œå“ªäº›æ˜¯ä¸ç”¨è€ƒè™‘åšçš„ã€‚\n\n> åŠ å¯†ä¹‹åçš„å¯†ç åŠ AppIDï¼Œå¯èƒ½è¢« **é‡æ”¾æ”»å‡»**ã€‚\n\nè°ƒç”¨æ–¹å°†è¯·æ±‚æ¥å£çš„ URL è·Ÿ AppIDã€å¯†ç æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œç„¶åè¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆä¸€ä¸ª tokenã€‚\n\n![image](https://user-images.githubusercontent.com/9289792/107141538-3ca4a000-6964-11eb-903f-404295e31ebf.png)\n\nè¿™æ ·çš„è®¾è®¡ä»ç„¶å­˜åœ¨é‡æ”¾æ”»å‡»çš„é£é™©ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ– token ç”Ÿæˆç®—æ³•ï¼Œå¼•å…¥ä¸€ä¸ªéšæœºå˜é‡ï¼Œè®©æ¯æ¬¡æ¥å£è¯·æ±‚ç”Ÿæˆçš„ token éƒ½ä¸ä¸€æ ·ã€‚\n\nå¾®æœåŠ¡ç«¯åœ¨æ”¶åˆ°è¿™äº›æ•°æ®ä¹‹åï¼Œä¼šéªŒè¯å½“å‰æ—¶é—´æˆ³è·Ÿä¼ é€’è¿‡æ¥çš„æ—¶é—´æˆ³ï¼Œæ˜¯å¦åœ¨ä¸€å®šçš„æ—¶é—´çª—å£å†…ï¼ˆæ¯”å¦‚ä¸€åˆ†é’Ÿï¼‰ã€‚\n\n![image](https://user-images.githubusercontent.com/9289792/107141588-ba68ab80-6964-11eb-8cc4-c84ddf91a6d4.png)\n\n## 14\n\n1. æŠŠ URLã€AppIDã€å¯†ç ã€æ—¶é—´æˆ³æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼›\n2. å¯¹å­—ç¬¦ä¸²é€šè¿‡åŠ å¯†ç®—æ³•åŠ å¯†ç”Ÿæˆ tokenï¼›\n3. å°† tokenã€AppIDã€æ—¶é—´æˆ³æ‹¼æ¥åˆ° URL ä¸­ï¼Œå½¢æˆæ–°çš„ URLï¼›\n4. è§£æ URLï¼Œå¾—åˆ° tokenã€AppIDã€æ—¶é—´æˆ³ç­‰ä¿¡æ¯ï¼›\n5. ä»å­˜å‚¨ä¸­å–å‡º AppID å’Œå¯¹åº”çš„å¯†ç ï¼›\n6. æ ¹æ®æ—¶é—´æˆ³åˆ¤æ–­ token æ˜¯å¦è¿‡æœŸå¤±æ•ˆï¼›\n7. éªŒè¯ä¸¤ä¸ª token æ˜¯å¦åŒ¹é…ï¼›\n\n1ã€2ã€6ã€7 éƒ½æ˜¯è·Ÿ token æœ‰å…³ï¼Œè´Ÿè´£ token çš„ç”Ÿæˆã€éªŒè¯ï¼›3ã€4 éƒ½æ˜¯åœ¨å¤„ç† URLï¼Œè´Ÿè´£ URL çš„æ‹¼æ¥ã€è§£æï¼›5 æ˜¯æ“ä½œ AppID å’Œå¯†ç ï¼Œè´Ÿè´£ä»å­˜å‚¨ä¸­è¯»å– AppID å’Œå¯†ç ã€‚AuthTokenã€Urlã€CredentialStorageã€‚\n\n## 15\n\n-- EOF --\n","tags":["design-patterns"]},{"title":"ã€è®¾è®¡æ¨¡å¼ä¹‹ç¾ã€‘ç¬”è®° Part 1","url":"/2021/02/05/the-beauty-of-design-patterns-reading-notes-part1/","content":"\n## 00\n\nKISS åŸåˆ™ï¼ˆKeep It Simple and Stupidï¼‰ï¼Œè¿™ä¸ªåŸåˆ™ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œä¸€çœ‹è²Œä¼¼å°±æ‡‚äº†ï¼Œé‚£æˆ‘é—®ä½ ï¼Œæ€æ ·çš„ä»£ç æ‰ç®—æ˜¯è¶³å¤Ÿç®€å•å‘¢ï¼Ÿæ€æ ·æ‰ç®—ä¸å¤Ÿç®€å•éœ€è¦ä¼˜åŒ–å‘¢ï¼Ÿ\n\nâ€œTalk is cheap, show me the code.â€\n\n## 01\n\nä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼šåº”å¯¹é¢è¯•ä¸­çš„è®¾è®¡æ¨¡å¼ç›¸å…³é—®é¢˜ï¼›å‘Šåˆ«å†™è¢«äººåæ§½çš„çƒ‚ä»£ç ï¼›æé«˜å¤æ‚ä»£ç çš„è®¾è®¡å’Œå¼€å‘èƒ½åŠ›ï¼›è®©è¯»æºç ã€å­¦æ¡†æ¶äº‹åŠåŠŸå€ï¼›ä¸ºä½ çš„èŒåœºå‘å±•åšé“ºå«ã€‚\n\n## 02\n\nçµæ´»æ€§ï¼ˆflexibilityï¼‰ã€å¯æ‰©å±•æ€§ï¼ˆextensibilityï¼‰ã€å¯ç»´æŠ¤æ€§ï¼ˆmaintainabilityï¼‰ã€å¯è¯»æ€§ï¼ˆreadabilityï¼‰ã€å¯ç†è§£æ€§ï¼ˆunderstandabilityï¼‰ã€æ˜“ä¿®æ”¹æ€§ï¼ˆchangeabilityï¼‰ã€å¯å¤ç”¨ï¼ˆreusabilityï¼‰ã€å¯æµ‹è¯•æ€§ï¼ˆtestabilityï¼‰ã€æ¨¡å—åŒ–ï¼ˆmodularityï¼‰ã€é«˜å†…èšä½è€¦åˆï¼ˆhigh cohesion loose couplingï¼‰ã€é«˜æ•ˆï¼ˆhigh effciencyï¼‰ã€é«˜æ€§èƒ½ï¼ˆhighperformanceï¼‰ã€å®‰å…¨æ€§ï¼ˆsecurityï¼‰ã€å…¼å®¹æ€§ï¼ˆcompatibilityï¼‰ã€æ˜“ç”¨æ€§ï¼ˆusabilityï¼‰ã€æ•´æ´ï¼ˆcleanï¼‰ã€æ¸…æ™°ï¼ˆclarityï¼‰ã€ç®€å•ï¼ˆsimpleï¼‰ã€ç›´æ¥ï¼ˆstraightforwardï¼‰ã€å°‘å³æ˜¯å¤šï¼ˆless code is moreï¼‰ã€æ–‡æ¡£è¯¦å°½ï¼ˆwell-documentedï¼‰ã€åˆ†å±‚æ¸…æ™°ï¼ˆwell-layeredï¼‰ã€æ­£ç¡®æ€§ï¼ˆcorrectnessã€bug freeï¼‰ã€å¥å£®æ€§ï¼ˆrobustnessï¼‰ã€é²æ£’æ€§ï¼ˆrobustnessï¼‰ã€å¯ç”¨æ€§ï¼ˆreliabilityï¼‰ã€å¯ä¼¸ç¼©æ€§ï¼ˆscalabilityï¼‰ã€ç¨³å®šæ€§ï¼ˆstabilityï¼‰ã€ä¼˜é›…ï¼ˆelegantï¼‰ã€å¥½ï¼ˆgoodï¼‰ã€åï¼ˆbadï¼‰\n\næˆ‘ä»¬å¹¶ä¸èƒ½é€šè¿‡å•ä¸€çš„ç»´åº¦å»è¯„ä»·ä¸€æ®µä»£ç å†™çš„å¥½åã€‚æ¯”å¦‚ï¼Œå³ä½¿ä¸€æ®µä»£ç çš„å¯æ‰©å±•æ€§å¾ˆå¥½ï¼Œä½†å¯è¯»æ€§å¾ˆå·®ï¼Œé‚£æˆ‘ä»¬ä¹Ÿä¸èƒ½è¯´è¿™æ®µä»£ç è´¨é‡é«˜ã€‚\n\nå¦‚æœç”¨æ•°å­—æ¥é‡åŒ–ä»£ç çš„å¯è¯»æ€§çš„è¯ï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªè¿ç»­çš„åŒºé—´å€¼ï¼Œè€Œé 0ã€1 è¿™æ ·çš„ç¦»æ•£å€¼ã€‚\n\nä»£ç è´¨é‡çš„è¯„ä»·æœ‰å¾ˆå¼ºçš„ä¸»è§‚æ€§ã€‚\n\næœ‰äº›è¯è¯­è¿‡äºç¬¼ç»Ÿã€æŠ½è±¡ï¼Œæ¯”è¾ƒåå‘å¯¹äºæ•´ä½“çš„æè¿°ï¼Œæ¯”å¦‚ä¼˜é›…ã€å¥½ã€åã€æ•´æ´ã€æ¸…æ™°ç­‰ï¼›æœ‰äº›è¿‡äºç»†èŠ‚ã€åé‡æ–¹æ³•è®ºï¼Œæ¯”å¦‚æ¨¡å—åŒ–ã€é«˜å†…èšä½è€¦åˆã€æ–‡æ¡£è¯¦å°½ã€åˆ†å±‚æ¸…æ™°ç­‰ï¼›æœ‰äº›å¯èƒ½å¹¶ä¸ä»…ä»…å±€é™äºç¼–ç ï¼Œè·Ÿæ¶æ„è®¾è®¡ç­‰ä¹Ÿæœ‰å…³ç³»ï¼Œæ¯”å¦‚å¯ä¼¸ç¼©æ€§ã€å¯ç”¨æ€§ã€ç¨³å®šæ€§ç­‰ã€‚\n\n### å¯ç»´æŠ¤æ€§ï¼ˆmaintainabilityï¼‰\n\nç ´ååŸæœ‰ä»£ç è®¾è®¡ã€ä¸å¼•å…¥æ–°çš„ bug çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå¿«é€Ÿåœ°ä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç ã€‚ä¸ä¹‹ç›¸åï¼Œä¿®æ”¹æˆ–è€…æ·»åŠ ä»£ç éœ€è¦å†’ç€æå¤§çš„å¼•å…¥æ–° bug çš„é£é™©ï¼Œå¹¶ä¸”éœ€è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½å®Œæˆã€‚\n\nç åˆ†å±‚æ¸…æ™°ã€æ¨¡å—åŒ–å¥½ã€é«˜å†…èšä½è€¦åˆã€éµä»åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹çš„è®¾è®¡åŸåˆ™ç­‰ç­‰ï¼Œé‚£å°±å¯èƒ½æ„å‘³ç€ä»£ç æ˜“ç»´æŠ¤ã€‚\n\n### å¯è¯»æ€§ï¼ˆreadabilityï¼‰\n\nâ€œä»»ä½•å‚»ç“œéƒ½ä¼šç¼–å†™è®¡ç®—æœºèƒ½ç†è§£çš„ä»£ç ã€‚å¥½çš„ç¨‹åºå‘˜èƒ½å¤Ÿç¼–å†™äººèƒ½å¤Ÿç†è§£çš„ä»£ç ã€‚â€\n\næ˜¯å¦ç¬¦åˆç¼–ç è§„èŒƒã€å‘½åæ˜¯å¦è¾¾æ„ã€æ³¨é‡Šæ˜¯å¦è¯¦å°½ã€å‡½æ•°æ˜¯å¦é•¿çŸ­åˆé€‚ã€æ¨¡å—åˆ’åˆ†æ˜¯å¦æ¸…æ™°ã€æ˜¯å¦ç¬¦åˆé«˜å†…èšä½è€¦åˆç­‰ç­‰ã€‚\n\ncode review æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æµ‹éªŒä»£ç å¯è¯»æ€§çš„æ‰‹æ®µã€‚å¦‚æœä½ çš„åŒäº‹å¯ä»¥è½»æ¾åœ°è¯»æ‡‚ä½ å†™çš„ä»£ç ï¼Œé‚£è¯´æ˜ä½ çš„ä»£ç å¯è¯»æ€§å¾ˆå¥½ï¼›å¦‚æœåŒäº‹åœ¨è¯»ä½ çš„ä»£ç æ—¶ï¼Œæœ‰å¾ˆå¤šç–‘é—®ï¼Œé‚£å°±è¯´æ˜ä½ çš„ä»£ç å¯è¯»æ€§æœ‰å¾…æé«˜äº†ã€‚\n\n### å¯æ‰©å±•æ€§ï¼ˆextensibilityï¼‰\n\næˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æˆ–å°‘é‡ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ‰©å±•çš„æ–¹å¼æ·»åŠ æ–°çš„åŠŸèƒ½ä»£ç ã€‚è¯´ç›´ç™½ç‚¹å°±æ˜¯ï¼Œä»£ç é¢„ç•™äº†ä¸€äº›åŠŸèƒ½æ‰©å±•ç‚¹ï¼Œä½ å¯ä»¥æŠŠæ–°åŠŸèƒ½ä»£ç ï¼Œç›´æ¥æ’åˆ°æ‰©å±•ç‚¹ä¸Šï¼Œè€Œä¸éœ€è¦å› ä¸ºè¦æ·»åŠ ä¸€ä¸ªåŠŸèƒ½è€Œå¤§åŠ¨å¹²æˆˆï¼Œæ”¹åŠ¨å¤§é‡çš„åŸå§‹ä»£ç ã€‚\n\nâ€œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾â€ã€‚\n\n### çµæ´»æ€§ï¼ˆflexibilityï¼‰\n\nå¦‚æœä¸€æ®µä»£ç æ˜“æ‰©å±•ã€æ˜“å¤ç”¨æˆ–è€…æ˜“ç”¨ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç§°è¿™æ®µä»£ç å†™å¾—æ¯”è¾ƒçµæ´»ã€‚\n\n- å½“æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ä»£ç çš„æ—¶å€™ï¼ŒåŸæœ‰çš„ä»£ç å·²ç»é¢„ç•™å¥½äº†æ‰©å±•ç‚¹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œåªè¦åœ¨æ‰©å±•ç‚¹ä¸Šæ·»åŠ æ–°çš„ä»£ç å³å¯ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´ä»£ç æ˜“æ‰©å±•ï¼Œè¿˜å¯ä»¥è¯´ä»£ç å†™å¾—å¥½çµæ´»ã€‚\n- å½“æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œå‘ç°åŸæœ‰ä»£ç ä¸­ï¼Œå·²ç»æŠ½è±¡å‡ºäº†å¾ˆå¤šåº•å±‚å¯ä»¥å¤ç”¨çš„æ¨¡å—ã€ç±»ç­‰ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´ä»£ç æ˜“å¤ç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯´ä»£ç å†™å¾—å¥½çµæ´»ã€‚\n- å½“æˆ‘ä»¬ä½¿ç”¨æŸç»„æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœè¿™ç»„æ¥å£å¯ä»¥åº”å¯¹å„ç§ä½¿ç”¨åœºæ™¯ï¼Œæ»¡è¶³å„ç§ä¸åŒçš„éœ€æ±‚ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥è¯´æ¥å£æ˜“ç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯´è¿™ä¸ªæ¥å£è®¾è®¡å¾—å¥½çµæ´»æˆ–è€…ä»£ç å†™å¾—å¥½çµæ´»ã€‚\n\n### ç®€æ´æ€§ï¼ˆsimplicityï¼‰\n\nå°½é‡ä¿æŒä»£ç ç®€å•ã€‚ä»£ç ç®€å•ã€é€»è¾‘æ¸…æ™°ï¼Œä¹Ÿå°±æ„å‘³ç€æ˜“è¯»ã€æ˜“ç»´æŠ¤ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå¾€å¾€ä¹Ÿä¼šæŠŠç®€å•ã€æ¸…æ™°æ”¾åˆ°é¦–ä½ã€‚\n\nKISS åŸåˆ™ï¼Œæ€ä»æ·±è€Œè¡Œä»ç®€ï¼ŒçœŸæ­£çš„é«˜æ‰‹èƒ½äº‘æ·¡é£è½»åœ°ç”¨æœ€ç®€å•çš„æ–¹æ³•è§£å†³æœ€å¤æ‚çš„é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªç¼–ç¨‹è€æ‰‹è·Ÿç¼–ç¨‹æ–°æ‰‹çš„æœ¬è´¨åŒºåˆ«ä¹‹ä¸€ã€‚\n\n### å¯å¤ç”¨æ€§ï¼ˆreusabilityï¼‰\n\nå°½é‡å‡å°‘é‡å¤ä»£ç çš„ç¼–å†™ï¼Œå¤ç”¨å·²æœ‰çš„ä»£ç ã€‚\n\nå½“è®²åˆ°é¢å‘å¯¹è±¡ç‰¹æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®²åˆ°ç»§æ‰¿ã€å¤šæ€å­˜åœ¨çš„ç›®çš„ä¹‹ä¸€ï¼Œå°±æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ï¼›å½“è®²åˆ°è®¾è®¡åŸåˆ™çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®²åˆ°å•ä¸€èŒè´£åŸåˆ™ä¹Ÿè·Ÿä»£ç çš„å¯å¤ç”¨æ€§ç›¸å…³ï¼›å½“è®²åˆ°é‡æ„æŠ€å·§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®²åˆ°è§£è€¦ã€é«˜å†…èšã€æ¨¡å—åŒ–ç­‰éƒ½èƒ½æé«˜ä»£ç çš„å¯å¤ç”¨æ€§ã€‚å¯è§ï¼Œå¯å¤ç”¨æ€§ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ä»£ç è¯„ä»·æ ‡å‡†ï¼Œæ˜¯å¾ˆå¤šè®¾è®¡åŸåˆ™ã€æ€æƒ³ã€æ¨¡å¼ç­‰æ‰€è¦è¾¾åˆ°çš„æœ€ç»ˆæ•ˆæœã€‚\n\nDRYï¼ˆDonâ€™t Repeat Yourselfï¼‰è®¾è®¡åŸåˆ™ã€‚\n\n### å¯æµ‹è¯•æ€§ï¼ˆtestabilityï¼‰\n\nä»£ç å¯æµ‹è¯•æ€§çš„å¥½åï¼Œèƒ½ä»ä¾§é¢ä¸Šéå¸¸å‡†ç¡®åœ°ååº”ä»£ç è´¨é‡çš„å¥½åã€‚ä»£ç çš„å¯æµ‹è¯•æ€§å·®ï¼Œæ¯”è¾ƒéš¾å†™å•å…ƒæµ‹è¯•ï¼Œé‚£åŸºæœ¬ä¸Šå°±èƒ½è¯´æ˜ä»£ç è®¾è®¡å¾—æœ‰é—®é¢˜ã€‚\n\n## 03\n\n### é¢å‘å¯¹è±¡\n\n- é¢å‘å¯¹è±¡çš„å››å¤§ç‰¹æ€§ï¼šå°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€é¢\n- å‘å¯¹è±¡ç¼–ç¨‹ä¸é¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„åŒºåˆ«å’Œè”ç³»\n- é¢å‘å¯¹è±¡åˆ†æã€é¢å‘å¯¹è±¡è®¾è®¡ã€é¢å‘å¯¹è±¡ç¼–ç¨‹\n- æ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„åº”ç”¨åœºæ™¯\n- åŸºäºæ¥å£è€Œéå®ç°ç¼–ç¨‹çš„è®¾è®¡æ€æƒ³\n- å¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿çš„è®¾è®¡æ€æƒ³\n- é¢å‘è¿‡ç¨‹çš„è´«è¡€æ¨¡å‹å’Œé¢å‘å¯¹è±¡çš„å……è¡€æ¨¡å‹\n\n### è®¾è®¡åŸåˆ™\n\næŒ‡å¯¼æˆ‘ä»¬ä»£ç è®¾è®¡çš„ä¸€äº›ç»éªŒæ€»ç»“ã€‚\n\n- SOLID åŸåˆ™ SRP å•ä¸€èŒè´£åŸåˆ™\n- SOLID åŸåˆ™ OCP å¼€é—­åŸåˆ™\n- SOLID åŸåˆ™ SP é‡Œå¼æ›¿æ¢åŸåˆ™\n- SOLID åŸåˆ™ ISP æ¥å£éš”ç¦»åŸåˆ™\n- SOLID åŸåˆ™ DIP ä¾èµ–å€’ç½®åŸåˆ™\n- DRY åŸåˆ™ã€KISS åŸåˆ™ã€YAGNI åŸåˆ™ã€LOD æ³•åˆ™\n\n### è®¾è®¡æ¨¡å¼\n\né’ˆå¯¹è½¯ä»¶å¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„ä¸€äº›è®¾è®¡é—®é¢˜ï¼Œæ€»ç»“å‡ºæ¥çš„ä¸€å¥—è§£å†³æ–¹æ¡ˆæˆ–è€…è®¾è®¡æ€è·¯ã€‚\n\nå¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼è¦è§£å†³çš„éƒ½æ˜¯ä»£ç çš„å¯æ‰©å±•æ€§é—®é¢˜ã€‚\n\n1. åˆ›å»ºå‹ å¸¸ç”¨çš„æœ‰ï¼šå•ä¾‹æ¨¡å¼ã€å·¥å‚æ¨¡å¼ï¼ˆå·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚ï¼‰ã€å»ºé€ è€…æ¨¡å¼ã€‚ä¸å¸¸ç”¨çš„æœ‰ï¼šåŸå‹æ¨¡å¼ã€‚\n2. ç»“æ„å‹ å¸¸ç”¨çš„æœ‰ï¼šä»£ç†æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€è£…é¥°è€…æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€‚ä¸å¸¸ç”¨çš„æœ‰ï¼šé—¨é¢æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚\n3. è¡Œä¸ºå‹ å¸¸ç”¨çš„æœ‰ï¼šè§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€‚ä¸å¸¸ç”¨çš„æœ‰ï¼šè®¿é—®è€…æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€ä¸­ä»‹æ¨¡å¼ã€‚\n\n### ç¼–ç¨‹è§„èŒƒ\n\nä¸»è¦è§£å†³çš„æ˜¯ä»£ç çš„å¯è¯»æ€§é—®é¢˜ã€‚\n\n### ä»£ç é‡æ„\n\nåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œåªè¦è½¯ä»¶åœ¨ä¸åœåœ°è¿­ä»£ï¼Œå°±æ²¡æœ‰ä¸€åŠ³æ°¸é€¸çš„è®¾è®¡ã€‚\n\nåœ¨å¼€å‘åˆæœŸï¼Œé™¤éç‰¹åˆ«å¿…é¡»ï¼Œæˆ‘ä»¬ä¸€å®šä¸è¦è¿‡åº¦è®¾è®¡ï¼Œåº”ç”¨å¤æ‚çš„è®¾è®¡æ¨¡å¼ã€‚è€Œæ˜¯å½“ä»£ç å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å†é’ˆå¯¹é—®é¢˜ï¼Œåº”ç”¨åŸåˆ™å’Œæ¨¡å¼è¿›è¡Œé‡æ„ã€‚è¿™æ ·å°±èƒ½æœ‰æ•ˆé¿å…å‰æœŸçš„è¿‡åº¦è®¾è®¡ã€‚\n\n- é‡æ„çš„ç›®çš„ï¼ˆwhyï¼‰ã€å¯¹è±¡ï¼ˆwhatï¼‰ã€æ—¶æœºï¼ˆwhenï¼‰ã€æ–¹æ³•ï¼ˆhowï¼‰ï¼›\n- ä¿è¯é‡æ„ä¸å‡ºé”™çš„æŠ€æœ¯æ‰‹æ®µï¼šå•å…ƒæµ‹è¯•å’Œä»£ç çš„å¯æµ‹è¯•æ€§ï¼›\n- ä¸¤ç§ä¸åŒè§„æ¨¡çš„é‡æ„ï¼šå¤§é‡æ„ï¼ˆå¤§è§„æ¨¡é«˜å±‚æ¬¡ï¼‰å’Œå°é‡æ„ï¼ˆå°è§„æ¨¡ä½å±‚æ¬¡ï¼‰ã€‚\n\n### äº”è€…è”ç³»\n\né¢å‘å¯¹è±¡ç¼–ç¨‹å› ä¸ºå…¶å…·æœ‰ä¸°å¯Œçš„ç‰¹æ€§ï¼ˆå°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ï¼Œå¯ä»¥å®ç°å¾ˆå¤šå¤æ‚çš„è®¾è®¡æ€è·¯ï¼Œæ˜¯å¾ˆå¤šè®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼ç­‰ç¼–ç å®ç°çš„åŸºç¡€ã€‚\n\nè®¾è®¡åŸåˆ™æ˜¯æŒ‡å¯¼æˆ‘ä»¬ä»£ç è®¾è®¡çš„ä¸€äº›ç»éªŒæ€»ç»“ï¼Œå¯¹äºæŸäº›åœºæ™¯ä¸‹ï¼Œæ˜¯å¦åº”è¯¥åº”ç”¨æŸç§è®¾è®¡æ¨¡å¼ï¼Œå…·æœ‰æŒ‡å¯¼æ„ä¹‰ã€‚æ¯”å¦‚ï¼Œâ€œå¼€é—­åŸåˆ™â€æ˜¯å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼ˆç­–ç•¥ã€æ¨¡æ¿ç­‰ï¼‰çš„æŒ‡å¯¼åŸåˆ™ã€‚\n\nè®¾è®¡æ¨¡å¼æ˜¯é’ˆå¯¹è½¯ä»¶å¼€å‘ä¸­ç»å¸¸é‡åˆ°çš„ä¸€äº›è®¾è®¡é—®é¢˜ï¼Œæ€»ç»“å‡ºæ¥çš„ä¸€å¥—è§£å†³æ–¹æ¡ˆæˆ–è€…è®¾è®¡æ€è·¯ã€‚åº”ç”¨è®¾è®¡æ¨¡å¼çš„ä¸»è¦ç›®çš„æ˜¯æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ã€‚ä»æŠ½è±¡ç¨‹åº¦ä¸Šæ¥è®²ï¼Œè®¾è®¡åŸåˆ™æ¯”è®¾è®¡æ¨¡å¼æ›´æŠ½è±¡ã€‚è®¾è®¡æ¨¡å¼æ›´åŠ å…·ä½“ã€æ›´åŠ å¯æ‰§è¡Œã€‚\n\nç¼–ç¨‹è§„èŒƒä¸»è¦è§£å†³çš„æ˜¯ä»£ç çš„å¯è¯»æ€§é—®é¢˜ã€‚ç¼–ç è§„èŒƒç›¸å¯¹äºè®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼ï¼Œæ›´åŠ å…·ä½“ã€æ›´åŠ åé‡ä»£ç ç»†èŠ‚ã€æ›´åŠ èƒ½è½åœ°ã€‚æŒç»­çš„å°é‡æ„ä¾èµ–çš„ç†è®ºåŸºç¡€ä¸»è¦å°±æ˜¯ç¼–ç¨‹è§„èŒƒã€‚\n\né‡æ„ä½œä¸ºä¿æŒä»£ç è´¨é‡ä¸ä¸‹é™çš„æœ‰æ•ˆæ‰‹æ®µï¼Œåˆ©ç”¨çš„å°±æ˜¯é¢å‘å¯¹è±¡ã€è®¾è®¡åŸåˆ™ã€è®¾è®¡æ¨¡å¼ã€ç¼–ç è§„èŒƒè¿™äº›ç†è®ºã€‚\n\n![image](https://user-images.githubusercontent.com/9289792/106997160-59eb3a00-67bd-11eb-8f71-db5336d3e77f.png)\n\n## 04\n\né¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼æˆ–ç¼–ç¨‹é£æ ¼ã€‚å®ƒä»¥ç±»æˆ–å¯¹è±¡ä½œä¸ºç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒï¼Œå¹¶å°†å°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€å››ä¸ªç‰¹æ€§ï¼Œä½œä¸ºä»£ç è®¾è®¡å’Œå®ç°çš„åŸºçŸ³ã€‚\n\n## 05\n\n### å°è£…ï¼ˆEncapsulationï¼‰\n\nå°è£…ä¹Ÿå«ä½œä¿¡æ¯éšè—æˆ–è€…æ•°æ®è®¿é—®ä¿æŠ¤ã€‚ç±»é€šè¿‡æš´éœ²æœ‰é™çš„è®¿é—®æ¥å£ï¼Œæˆæƒå¤–éƒ¨ä»…èƒ½é€šè¿‡ç±»æä¾›çš„æ–¹å¼æ¥è®¿é—®å†…éƒ¨ä¿¡æ¯æˆ–è€…æ•°æ®ã€‚\n\nå°è£…ç‰¹æ€§å­˜åœ¨çš„æ„ä¹‰ï¼Œä¸€æ–¹é¢æ˜¯ä¿æŠ¤æ•°æ®ä¸è¢«éšæ„ä¿®æ”¹ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼›å¦ä¸€æ–¹é¢æ˜¯ä»…æš´éœ²æœ‰é™çš„å¿…è¦æ¥å£ï¼Œæé«˜ç±»çš„æ˜“ç”¨æ€§ã€‚\n\n### æŠ½è±¡ï¼ˆAbstractionï¼‰\n\næŠ½è±¡å¯ä»¥é€šè¿‡æ¥å£ç±»æˆ–è€…æŠ½è±¡ç±»æ¥å®ç°ï¼Œä½†ä¹Ÿå¹¶ä¸éœ€è¦ç‰¹æ®Šçš„è¯­æ³•æœºåˆ¶æ¥æ”¯æŒã€‚\n\næŠ½è±¡å­˜åœ¨çš„æ„ä¹‰ï¼Œä¸€æ–¹é¢æ˜¯æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ã€ç»´æŠ¤æ€§ï¼Œä¿®æ”¹å®ç°ä¸éœ€è¦æ”¹å˜å®šä¹‰ï¼Œå‡å°‘ä»£ç çš„æ”¹åŠ¨èŒƒå›´ï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒä¹Ÿæ˜¯å¤„ç†å¤æ‚ç³»ç»Ÿçš„æœ‰æ•ˆæ‰‹æ®µï¼Œèƒ½æœ‰æ•ˆåœ°è¿‡æ»¤æ‰ä¸å¿…è¦å…³æ³¨çš„ä¿¡æ¯ã€‚\n\næä¾›â€œå‡½æ•°â€è¿™ä¸€éå¸¸åŸºç¡€çš„è¯­æ³•æœºåˆ¶ï¼Œå°±å¯ä»¥å®ç°æŠ½è±¡ç‰¹æ€§ã€æ‰€ä»¥ï¼Œå®ƒæ²¡æœ‰å¾ˆå¼ºçš„â€œç‰¹å¼‚æ€§â€ï¼Œæœ‰æ—¶å€™å¹¶ä¸è¢«çœ‹ä½œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹æ€§ä¹‹ä¸€ã€‚\n\nåœ¨å®šä¹‰ï¼ˆæˆ–è€…å«å‘½åï¼‰ç±»çš„æ–¹æ³•çš„æ—¶å€™ï¼Œä¹Ÿè¦æœ‰æŠ½è±¡æ€ç»´ï¼Œä¸è¦åœ¨æ–¹æ³•å®šä¹‰ä¸­ï¼Œæš´éœ²å¤ªå¤šçš„å®ç°ç»†èŠ‚ï¼Œä»¥ä¿è¯åœ¨æŸä¸ªæ—¶é—´ç‚¹éœ€è¦æ”¹å˜æ–¹æ³•çš„å®ç°é€»è¾‘çš„æ—¶å€™ï¼Œä¸ç”¨å»ä¿®æ”¹å…¶å®šä¹‰ã€‚getPictureUrl å¥½äº getAliyunPictureUrlã€‚\n\n### ç»§æ‰¿ï¼ˆInheritanceï¼‰\n\nç»§æ‰¿æ˜¯ç”¨æ¥è¡¨ç¤ºç±»ä¹‹é—´çš„ is-a å…³ç³»ã€‚ç»§æ‰¿ä¸»è¦æ˜¯ç”¨æ¥è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ã€‚\n\nå¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿ã€‚\n\n### å¤šæ€ï¼ˆPolymorphismï¼‰\n\nå¤šæ€æ˜¯æŒ‡å­ç±»å¯ä»¥æ›¿æ¢çˆ¶ç±»ï¼Œåœ¨å®é™…çš„ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨å­ç±»çš„æ–¹æ³•å®ç°ã€‚\n\nå¤šæ€è¿™ç§ç‰¹æ€§ä¹Ÿéœ€è¦ç¼–ç¨‹è¯­è¨€æä¾›ç‰¹æ®Šçš„è¯­æ³•æœºåˆ¶æ¥å®ç°ï¼Œæ¯”å¦‚ç»§æ‰¿ã€æ¥å£ç±»ã€duck-typingã€‚å¤šæ€å¯ä»¥æé«˜ä»£ç çš„æ‰©å±•æ€§å’Œå¤ç”¨æ€§ï¼Œæ˜¯å¾ˆå¤šè®¾è®¡æ¨¡å¼ã€è®¾è®¡åŸåˆ™ã€ç¼–ç¨‹æŠ€å·§çš„ä»£ç å®ç°åŸºç¡€ã€‚\n\nåªè¦ä¸¤ä¸ªç±»å…·æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°å¤šæ€ï¼Œå¹¶ä¸è¦æ±‚ä¸¤ä¸ªç±»ä¹‹é—´æœ‰ä»»ä½•å…³ç³»ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ duck-typingï¼Œæ˜¯ä¸€äº›åŠ¨æ€è¯­è¨€æ‰€ç‰¹æœ‰çš„è¯­æ³•æœºåˆ¶ã€‚\n\n## 06\n\nç›¸è¾ƒäºé¢å‘å¯¹è±¡ç¼–ç¨‹ä»¥ç±»ä¸ºç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒï¼Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹åˆ™æ˜¯ä»¥è¿‡ç¨‹ï¼ˆæˆ–æ–¹æ³•ï¼‰ä½œä¸ºç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒã€‚å®ƒæœ€ä¸»è¦çš„ç‰¹ç‚¹å°±æ˜¯æ•°æ®å’Œæ–¹æ³•ç›¸åˆ†ç¦»ã€‚ç›¸è¾ƒäºé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹è¯­è¨€æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä¸æ”¯æŒä¸°å¯Œçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ç‰¹æ€§ï¼Œæ¯”å¦‚ç»§æ‰¿ã€å¤šæ€ã€å°è£…ã€‚\n\né¢å‘å¯¹è±¡ç¼–ç¨‹ç›¸æ¯”é¢å‘è¿‡ç¨‹ç¼–ç¨‹æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ\n\n- å¯¹äºå¤§è§„æ¨¡å¤æ‚ç¨‹åºçš„å¼€å‘ï¼Œç¨‹åºçš„å¤„ç†æµç¨‹å¹¶éå•ä¸€çš„ä¸€æ¡ä¸»çº¿ï¼Œè€Œæ˜¯é”™ç»¼å¤æ‚çš„ç½‘çŠ¶ç»“æ„ã€‚\n- é¢å‘å¯¹è±¡ç¼–ç¨‹æ¯”èµ·é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œæ›´èƒ½åº”å¯¹è¿™ç§å¤æ‚ç±»å‹çš„ç¨‹åºå¼€å‘ã€‚é¢å‘å¯¹è±¡ç¼–ç¨‹ç›¸æ¯”é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œå…·æœ‰æ›´åŠ ä¸°å¯Œçš„ç‰¹æ€§ï¼ˆå°è£…ã€æŠ½è±¡ã€ç»§æ‰¿ã€å¤šæ€ï¼‰ã€‚åˆ©ç”¨è¿™äº›ç‰¹æ€§ç¼–å†™å‡ºæ¥çš„ä»£ç ï¼Œæ›´åŠ æ˜“æ‰©å±•ã€æ˜“å¤ç”¨ã€æ˜“ç»´æŠ¤ã€‚\n- ä»ç¼–ç¨‹è¯­è¨€è·Ÿæœºå™¨æ‰“äº¤é“çš„æ–¹å¼çš„æ¼”è¿›è§„å¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€æ¯”èµ·é¢å‘è¿‡ç¨‹ç¼–ç¨‹è¯­è¨€ï¼Œæ›´åŠ äººæ€§åŒ–ã€æ›´åŠ é«˜çº§ã€æ›´åŠ æ™ºèƒ½ã€‚\n\n## 07\n\n### æ»¥ç”¨ getterã€setter æ–¹æ³•\n\nå°½ç®¡ getter æ–¹æ³•ç›¸å¯¹ setter æ–¹æ³•è¦å®‰å…¨äº›ï¼Œä½†æ˜¯å¦‚æœè¿”å›çš„æ˜¯é›†åˆå®¹å™¨ï¼ˆæ¯”å¦‚ä¾‹å­ä¸­çš„ List å®¹å™¨ï¼‰ï¼Œä¹Ÿè¦é˜²èŒƒé›†åˆå†…éƒ¨æ•°æ®è¢«ä¿®æ”¹çš„å±é™©ã€‚\n\n```java\npublic class ShoppingCart {\n    // ... çœç•¥å…¶ä»–ä»£ç ...\n    public List<ShoppingCartItem> getItems() {\n        return Collections.unmodifiableList(this.items);\n    }\n}\npublic class UnmodifiableList<E> extends UnmodifiableCollection<E> implements List<E> {\n    public boolean add(E e) {\n        throw new UnsupportedOperationException();\n    }\n    public void clear() {\n        throw new UnsupportedOperationException();\n    }\n    // ... çœç•¥å…¶ä»–ä»£ç ...\n}\n```\n\n### æ»¥ç”¨å…¨å±€å˜é‡å’Œå…¨å±€æ–¹æ³•\n\nConstants ç±»ã€Utils ç±»çš„è®¾è®¡å°½é‡èƒ½åšåˆ°èŒè´£å•ä¸€ï¼Œå®šä¹‰ä¸€äº›ç»†åŒ–çš„å°ç±»ã€‚\n\né™æ€æˆå‘˜å˜é‡å½’å±äºç±»ä¸Šçš„æ•°æ®ï¼Œè¢«æ‰€æœ‰çš„å®ä¾‹åŒ–å¯¹è±¡æ‰€å…±äº«ï¼Œä¹Ÿç›¸å½“äºä¸€å®šç¨‹åº¦ä¸Šçš„å…¨å±€å˜é‡ã€‚\n\né™æ€æ–¹æ³•å°†æ–¹æ³•ä¸æ•°æ®åˆ†ç¦»ï¼Œç ´åäº†å°è£…ç‰¹æ€§ï¼Œæ˜¯å…¸å‹çš„é¢å‘è¿‡ç¨‹é£æ ¼ã€‚\n\nåªåŒ…å«é™æ€æ–¹æ³•ä¸åŒ…å«ä»»ä½•å±æ€§çš„ Utils ç±»ï¼Œæ˜¯å½»å½»åº•åº•çš„é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹é£æ ¼ã€‚è¦å°½é‡é¿å…æ»¥ç”¨ï¼Œä¸è¦ä¸åŠ æ€è€ƒåœ°éšæ„å»å®šä¹‰ Utils ç±»ã€‚\n\n### å®šä¹‰æ•°æ®å’Œæ–¹æ³•åˆ†ç¦»çš„ç±»\n\nController å±‚è´Ÿè´£æš´éœ²æ¥å£ç»™å‰ç«¯è°ƒç”¨ï¼ŒService å±‚è´Ÿè´£æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ŒRepository å±‚è´Ÿè´£æ•°æ®è¯»å†™ã€‚\n\nè€Œåœ¨æ¯ä¸€å±‚ä¸­ï¼Œæˆ‘ä»¬åˆä¼šå®šä¹‰ç›¸åº”çš„ VOï¼ˆView Objectï¼‰ã€BOï¼ˆBusiness Objectï¼‰ã€Entityã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒVOã€BOã€Entity ä¸­åªä¼šå®šä¹‰æ•°æ®ï¼Œä¸ä¼šå®šä¹‰æ–¹æ³•ï¼Œæ‰€æœ‰æ“ä½œè¿™äº›æ•°æ®çš„ä¸šåŠ¡é€»è¾‘éƒ½å®šä¹‰åœ¨å¯¹åº”çš„ Controller ç±»ã€Service ç±»ã€Repository ç±»ä¸­ã€‚è¿™å°±æ˜¯å…¸å‹çš„é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹é£æ ¼ã€‚\n\n> å®é™…ä¸Šï¼Œè¿™ç§å¼€å‘æ¨¡å¼å«ä½œåŸºäº `è´«è¡€æ¨¡å‹çš„å¼€å‘æ¨¡å¼`ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç°åœ¨éå¸¸å¸¸ç”¨çš„ä¸€ç§ Web é¡¹ç›®çš„å¼€å‘æ¨¡å¼ã€‚çœ‹åˆ°è¿™é‡Œï¼Œä½ å†…å¿ƒé‡Œåº”è¯¥æœ‰å¾ˆå¤šç–‘æƒ‘å§ï¼Ÿæ—¢ç„¶è¿™ç§å¼€å‘æ¨¡å¼æ˜æ˜¾è¿èƒŒé¢å‘å¯¹è±¡çš„ç¼–ç¨‹é£æ ¼ï¼Œä¸ºä»€ä¹ˆå¤§éƒ¨åˆ† Web é¡¹ç›®éƒ½æ˜¯åŸºäºè¿™ç§å¼€å‘æ¨¡å¼æ¥å¼€å‘å‘¢ï¼Ÿ\n\n### åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆå®¹æ˜“å†™å‡ºé¢å‘è¿‡ç¨‹é£æ ¼çš„ä»£ç ï¼Ÿ\n\né¢å‘è¿‡ç¨‹ç¼–ç¨‹é£æ ¼æ°æ°ç¬¦åˆäººçš„è¿™ç§æµç¨‹åŒ–æ€ç»´æ–¹å¼ã€‚è€Œé¢å‘å¯¹è±¡ç¼–ç¨‹é£æ ¼æ­£å¥½ç›¸åã€‚å®ƒæ˜¯ä¸€ç§è‡ªåº•å‘ä¸Šçš„æ€è€ƒæ–¹å¼ã€‚\n\nå®ƒä¸æ˜¯å…ˆå»æŒ‰ç…§æ‰§è¡Œæµç¨‹æ¥åˆ†è§£ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ä»»åŠ¡ç¿»è¯‘æˆä¸€ä¸ªä¸€ä¸ªçš„å°çš„æ¨¡å—ï¼ˆä¹Ÿå°±æ˜¯ç±»ï¼‰ï¼Œè®¾è®¡ç±»ä¹‹é—´çš„äº¤äº’ï¼Œæœ€åæŒ‰ç…§æµç¨‹å°†ç±»ç»„è£…èµ·æ¥ï¼Œå®Œæˆæ•´ä¸ªä»»åŠ¡ã€‚\n\nåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œç±»çš„è®¾è®¡è¿˜æ˜¯æŒºéœ€è¦æŠ€å·§ï¼ŒæŒºéœ€è¦ä¸€å®šè®¾è®¡ç»éªŒçš„ã€‚ä½ è¦å»æ€è€ƒå¦‚ä½•å°è£…åˆé€‚çš„æ•°æ®å’Œæ–¹æ³•åˆ°ä¸€ä¸ªç±»é‡Œï¼Œå¦‚ä½•è®¾è®¡ç±»ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä½•è®¾è®¡ç±»ä¹‹é—´çš„äº¤äº’ç­‰ç­‰è¯¸å¤šè®¾è®¡é—®é¢˜ã€‚\n\n### é¢å‘è¿‡ç¨‹ç¼–ç¨‹åŠé¢å‘è¿‡ç¨‹ç¼–ç¨‹è¯­è¨€å°±çœŸçš„æ— ç”¨æ­¦ä¹‹åœ°äº†å—ï¼Ÿ\n\nå¦‚æœæˆ‘ä»¬å¼€å‘çš„æ˜¯å¾®å°ç¨‹åºï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæ•°æ®å¤„ç†ç›¸å…³çš„ä»£ç ï¼Œä»¥ç®—æ³•ä¸ºä¸»ï¼Œæ•°æ®ä¸ºè¾…ï¼Œé‚£è„šæœ¬å¼çš„é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹é£æ ¼å°±æ›´é€‚åˆä¸€äº›ã€‚\n\n## 08\n\n### æŠ½è±¡ç±»å’Œæ¥å£çš„è¯­æ³•ç‰¹æ€§\n\næŠ½è±¡ç±»ä¸å…è®¸è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ã€‚å®ƒå¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ã€‚æ–¹æ³•æ—¢å¯ä»¥åŒ…å«ä»£ç å®ç°ï¼Œä¹Ÿå¯ä»¥ä¸åŒ…å«ä»£ç å®ç°ã€‚ä¸åŒ…å«ä»£ç å®ç°çš„æ–¹æ³•å«ä½œæŠ½è±¡æ–¹æ³•ã€‚å­ç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ã€‚æ¥å£ä¸èƒ½åŒ…å«å±æ€§ï¼Œåªèƒ½å£°æ˜æ–¹æ³•ï¼Œæ–¹æ³•ä¸èƒ½åŒ…å«ä»£ç å®ç°ã€‚ç±»å®ç°æ¥å£çš„æ—¶å€™ï¼Œå¿…é¡»å®ç°æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚\n\n### æŠ½è±¡ç±»å’Œæ¥å£å­˜åœ¨çš„æ„ä¹‰\n\næŠ½è±¡ç±»æ˜¯å¯¹æˆå‘˜å˜é‡å’Œæ–¹æ³•çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§ is-a å…³ç³»ï¼Œæ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨é—®é¢˜ã€‚æ¥å£ä»…ä»…æ˜¯å¯¹æ–¹æ³•çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§ has-a å…³ç³»ï¼Œè¡¨ç¤ºå…·æœ‰æŸä¸€ç»„è¡Œä¸ºç‰¹æ€§ï¼Œæ˜¯ä¸ºäº†è§£å†³è§£è€¦é—®é¢˜ï¼Œéš”ç¦»æ¥å£å’Œå…·ä½“çš„å®ç°ï¼Œæé«˜ä»£ç çš„æ‰©å±•æ€§ã€‚\n\nä»ç±»çš„ç»§æ‰¿å±‚æ¬¡ä¸Šæ¥çœ‹ï¼ŒæŠ½è±¡ç±»æ˜¯ä¸€ç§è‡ªä¸‹è€Œä¸Šçš„è®¾è®¡æ€è·¯ï¼Œå…ˆæœ‰å­ç±»çš„ä»£ç é‡å¤ï¼Œç„¶åå†æŠ½è±¡æˆä¸Šå±‚çš„çˆ¶ç±»ï¼ˆä¹Ÿå°±æ˜¯æŠ½è±¡ç±»ï¼‰ã€‚è€Œæ¥å£æ­£å¥½ç›¸åï¼Œå®ƒæ˜¯ä¸€ç§è‡ªä¸Šè€Œä¸‹çš„è®¾è®¡æ€è·¯ã€‚\n\n## 09\n\nâ€œProgram to an interface, not animplementationâ€ã€‚â€œåŸºäºæŠ½è±¡è€Œéå®ç°ç¼–ç¨‹â€ã€‚\n\nè¶ŠæŠ½è±¡ã€è¶Šé¡¶å±‚ã€è¶Šè„±ç¦»å…·ä½“æŸä¸€å®ç°çš„è®¾è®¡ï¼Œè¶Šèƒ½æé«˜ä»£ç çš„çµæ´»æ€§ï¼Œè¶Šèƒ½åº”å¯¹æœªæ¥çš„éœ€æ±‚å˜åŒ–ã€‚å¥½çš„ä»£ç è®¾è®¡ï¼Œä¸ä»…èƒ½åº”å¯¹å½“ä¸‹çš„éœ€æ±‚ï¼Œè€Œä¸”åœ¨å°†æ¥éœ€æ±‚å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä»ç„¶èƒ½å¤Ÿåœ¨ä¸ç ´ååŸæœ‰ä»£ç è®¾è®¡çš„æƒ…å†µä¸‹çµæ´»åº”å¯¹ã€‚\n\nâ€œç»†èŠ‚æ˜¯é­”é¬¼â€ã€‚\n\n1. å‡½æ•°çš„å‘½åä¸èƒ½æš´éœ²ä»»ä½•å®ç°ç»†èŠ‚ã€‚\n2. å°è£…å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚\n3. ä¸ºå®ç°ç±»å®šä¹‰æŠ½è±¡çš„æ¥å£ã€‚\n\næŠ½è±¡æ„è¯†ã€å°è£…æ„è¯†ã€æ¥å£æ„è¯†ã€‚\n\n## 10\n\nç»§æ‰¿å±‚æ¬¡è¿‡æ·±ã€è¿‡å¤æ‚ï¼Œä¹Ÿä¼šå½±å“åˆ°ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚\n\né¸Ÿ -> ä¼šé£ã€ä¸ä¼šé£ã€ä¼šå«ã€ä¸ä¼šå«ã€ä¼šä¸‹è›‹ã€ä¸ä¼šä¸‹è›‹ã€‚\n\nåˆ©ç”¨ç»„åˆï¼ˆcompositionï¼‰ã€æ¥å£ã€å§”æ‰˜ï¼ˆdelegation è§£å†³ã€‚\n\n```java\n// æ¥å£\npublic interface Flyable {\n  void fly();\n}\n\n// æé«˜å¤ç”¨æ€§\npublic class FlyAbility implements Flyable {\n  @Override\n  public void fly() {\n    //...\n  }\n}\n\npublic class Sparrow implements Flyable {\n  // ç»„åˆ\n  private FlyAbility flyAbility = new FlyAbility();\n  @Override\n  public void fly() {\n    // å§”æ‰˜\n    flyAbility.fly();\n  }\n}\n```\n\nç»§æ‰¿æ”¹å†™æˆç»„åˆæ„å‘³ç€è¦åšæ›´ç»†ç²’åº¦çš„ç±»çš„æ‹†åˆ†ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæˆ‘ä»¬è¦å®šä¹‰æ›´å¤šçš„ç±»å’Œæ¥å£ã€‚ç±»å’Œæ¥å£çš„å¢å¤šä¹Ÿå°±æˆ–å¤šæˆ–å°‘åœ°å¢åŠ ä»£ç çš„å¤æ‚ç¨‹åº¦å’Œç»´æŠ¤æˆæœ¬ã€‚\n\nç»„åˆå¹¶ä¸å®Œç¾ï¼Œç»§æ‰¿ä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ã€‚\n\nå¦‚æœç±»ä¹‹é—´çš„ç»§æ‰¿ç»“æ„ç¨³å®šï¼Œå±‚æ¬¡æ¯”è¾ƒæµ…ï¼Œå…³ç³»ä¸å¤æ‚ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤§èƒ†åœ°ä½¿ç”¨ç»§æ‰¿ã€‚åä¹‹ï¼Œæˆ‘ä»¬å°±å°½é‡ä½¿ç”¨ç»„åˆæ¥æ›¿ä»£ç»§æ‰¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è®¾è®¡æ¨¡å¼ã€ç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ï¼Œä¼šå›ºå®šä½¿ç”¨ç»§æ‰¿ï¼ˆæ¨¡æ¿æ¨¡å¼ï¼ˆtemplate patternï¼‰ï¼‰æˆ–è€…ç»„åˆï¼ˆè£…é¥°è€…æ¨¡å¼ï¼ˆdecoratorpatternï¼‰ã€ç­–ç•¥æ¨¡å¼ï¼ˆstrategy patternï¼‰ã€ç»„åˆæ¨¡å¼ï¼ˆcomposite patternï¼‰ï¼‰ã€‚\n\n-- EOF --\n","tags":["design-patterns"]},{"title":"MySQL Code Snippet","url":"/2021/01/29/mysql-code-snippet/","content":"\n## æŸ¥çœ‹ä¼˜åŒ–åçš„ SQL\n\nåœ¨è”è¡¨æŸ¥è¯¢æ—¶æ¯”è¾ƒæœ‰æ•ˆæœã€‚\n\n```bash\nEXPLAIN <ä½ çš„ SQL>;\nSHOW WARNINGS;\n```\n\n## ON vs USING\n\n[MySQL ON vs USING? | stackoverflow](https://stackoverflow.com/questions/11366006/mysql-on-vs-using)\n\n## References\n\n- [ç¼–ç¨‹å°æŠ€å·§ï¼ˆ3ï¼‰ï¼šæŸ¥çœ‹ä¼˜åŒ–åçš„ SQL](https://www.standbyside.com/2019/06/19/tips-of-coding-3/)\n\n-- EOF --\n","tags":["mysql"]},{"title":"PHP æœˆä»½åŠ å‡é—®é¢˜","url":"/2021/01/27/php-strtotime-month/","content":"\n## çœ‹ç°è±¡\n\n```php\nvar_dump(date(\"Y-m-d\", strtotime(\"+1 month\", strtotime(\"2020-07-31\"))));\n// string(10) \"2020-08-31\" ç¬¦åˆé¢„æœŸ\n\nvar_dump(date(\"Y-m-d\", strtotime(\"+1 month\", strtotime(\"2020-05-31\"))));\n// string(10) \"2020-07-01\" ä¸ç¬¦åˆé¢„æœŸï¼Œé¢„æœŸ 2020-06-30\n\nvar_dump(date(\"Y-m-d\", strtotime(\"-1 month\", strtotime(\"2020-02-29\"))));\n// string(10) \"2020-01-29\" ç¬¦åˆé¢„æœŸ\n\nvar_dump(date(\"Y-m-d\", strtotime(\"-1 month\", strtotime(\"2020-03-31\"))));\n// string(10) \"2020-03-02\" ä¸ç¬¦åˆé¢„æœŸï¼Œé¢„æœŸ 2020-02-29\n\n\n// Carbon\\Carbon\nCarbon::parse(\"2020-07-31\")->addMonth()->toDateString();\n// \"2020-08-31\"\nCarbon::parse(\"2020-05-31\")->addMonth()->toDateString();\n// \"2020-07-01\"\nCarbon::parse(\"2020-02-29\")->subMonth()->toDateString();\n// \"2020-01-29\"\nCarbon::parse(\"2020-03-31\")->subMonth()->toDateString();\n// \"2020-03-02\"\n\n// ç»“æœä¸ strtotime ä¸€è‡´ã€‚\n```\n\n## åŸå› \n\n```php\nvar_dump(date(\"Y-m-d\", strtotime(\"+1 month\", strtotime(\"2020-05-31\"))));\n// string(10) \"2020-07-01\"\n```\n\ndate å†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼š\n\n1. `2020-05-31` åš `+1 month` ä¹Ÿå°±æ˜¯ `2020-06-31`ã€‚\n2. å†åšæ—¥æœŸè§„èŒƒåŒ–ï¼Œå› ä¸ºæ²¡æœ‰ `06-31`ï¼Œæ‰€ä»¥ `06-31` å°±ç­‰äºäº† `07-01`ã€‚\n\n```php\nvar_dump(date(\"Y-m-d\", strtotime(\"2020-06-31\")));\n// string(10) \"2017-07-01\"\n\nvar_dump(date(\"Y-m-d\", strtotime(\"next month\", strtotime(\"2017-01-31\"))));\n// string(10) \"2017-03-03\"\n\nvar_dump(date(\"Y-m-d\", strtotime(\"last month\", strtotime(\"2017-03-31\"))));\n// string(10) \"2017-03-03\"\n```\n\n## è§£å†³æ–¹æ¡ˆ\n\n```php\nvar_dump(date(\"Y-m-d\", strtotime(\"last day of -1 month\", strtotime(\"2017-03-31\"))));\n// string(10) \"2017-02-28\"\n\nvar_dump(date(\"Y-m-d\", strtotime(\"first day of +1 month\", strtotime(\"2017-08-31\"))));\n// string(10) \"2017-09-01\"\n\n// ä½†è¦æ³¨æ„çŸ­è¯­çš„å«ä¹‰ï¼š\nvar_dump(date(\"Y-m-d\", strtotime(\"last day of -1 month\", strtotime(\"2017-03-01\"))));\n// string(10) \"2017-02-28\"\n```\n\nå¦‚æœä½¿ç”¨ `Carbon\\Carbon` å¯ä»¥ç”¨ `subMonthNoOverflow` ä¸ `addMonthNoOverflow` é˜²æ­¢è¿›ä½ï¼š\n\n```php\nCarbon::parse('2020-03-31')->subMonthNoOverflow()->toDateString();\n// \"2020-02-29\"\n\nCarbon::parse(\"2020-05-31\")->addMonthNoOverflow()->toDateString();\n// \"2020-06-30\"\n```\n\n## References\n\n- [Why does subMonth not work correctly? | github](https://github.com/briannesbitt/Carbon/issues/428)\n- [ä»¤äººå›°æƒ‘çš„ strtotime | laruence](https://www.laruence.com/2018/07/31/3207.html)\n\n-- EOF --\n","tags":["php"]},{"title":"Yii2 Code Snippet","url":"/2021/01/19/yii2-code-snippet/","content":"\n## gii CLI\n\n```bash\nphp yii help gii/mode\n\nphp yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns='app\\models\\gii' --tableName=\"*\"\n\n# å¤šæ•°æ®åº“\nphp yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=\"hub_db\" --ns='app\\models\\hub\\gii' --tableName=\"*\"\n```\n\n## è¿æ¥æ•°æ®åº“æ—¶è®¾ç½®æ—¶åŒº\n\n```php\n  'class' => 'yii\\db\\Connection',\n  'dsn' => 'mysql:host=mysql;port=3306;dbname=hub',\n  'username' => 'root',\n  'password' => 'root',\n  'charset' => 'utf8',\n\n  // å…³é—­æ—¥å¿—è®°å½•ï¼Œé˜²æ­¢è¢« logs å¹³å°æ‹¿èµ°\n  'enableLogging' => YII_DEBUG ? true : false,\n  'enableProfiling' => YII_DEBUG ? true : false,\n\n  // è®¾ç½®æ—¶åŒº\n  'on afterOpen' => static function ($event) {\n    // set 'Asia/Bangkok' timezone\n    $event->sender->createCommand(\"SET time_zone='+08:00';\")->execute();\n  },\n```\n\n## ActiveRecord one\n\n> `yii\\db\\ActiveRecord::findOne()` å’Œ `yii\\db\\ActiveQuery::one()` éƒ½ä¸ä¼šæ·»åŠ  LIMIT 1 åˆ° ç”Ÿæˆçš„ SQL è¯­å¥ä¸­ã€‚å¦‚æœä½ çš„æŸ¥è¯¢ä¼šè¿”å›å¾ˆå¤šè¡Œçš„æ•°æ®ï¼Œ ä½ æ˜ç¡®çš„åº”è¯¥åŠ ä¸Š `limit(1)` æ¥æé«˜æ€§èƒ½ï¼Œæ¯”å¦‚ `Customer::find()->limit(1)->one()`ã€‚\n\n## DB where\n\n- å­—ç¬¦ä¸²æ ¼å¼ï¼Œä¾‹å¦‚ï¼š`'status=1'`\n- å“ˆå¸Œæ ¼å¼ï¼Œä¾‹å¦‚ï¼š `['status' => 1, 'type' => 2]`\n- æ“ä½œç¬¦æ ¼å¼ï¼Œä¾‹å¦‚ï¼š`['like', 'name', 'test']`\n- å¯¹è±¡æ ¼å¼ï¼Œä¾‹å¦‚ï¼š`new LikeCondition('name', 'LIKE', 'test')`\n\n### ç®€å•æ¡ä»¶\n\n```php\n// SQL: (type = 1) AND (status = 2).\n$cond = ['type' => 1, 'status' => 2]\n\n// SQL: (id IN (1, 2, 3)) AND (status = 2)\n$cond = ['id' => [1, 2, 3], 'status' => 2]\n\n// SQL: status IS NULL\n$cond = ['status' => null]\n```\n\n### AND OR\n\n```php\n// SQL: `id=1 AND id=2`\n$cond = ['and', 'id=1', 'id=2']\n\n// SQL: `type=1 AND (id=1 OR id=2)`\n$cond = ['and', 'type=1', ['or', 'id=1', 'id=2']]\n\n// SQL: `type=1 AND (id=1 OR id=2)`\n// æ­¤å†™æ³• '=' å¯ä»¥æ¢æˆå…¶ä»–æ“ä½œç¬¦ï¼Œä¾‹ï¼šin like != >= ç­‰\n$cond = [\n    'and',\n    ['=', 'type', 1],\n    [\n        'or',\n        ['=', 'id', '1'],\n        ['=', 'id', '2'],\n    ]\n]\n```\n\n### NOT\n\n```php\n// SQL: `NOT (attribute IS NULL)`\n$cond = ['not', ['attribute' => null]]\n```\n\n### BETWEEN\n\n```php\n// not between ç”¨æ³•ç›¸åŒ\n// SQL: `id BETWEEN 1 AND 10`\n$cond = ['between', 'id', 1, 10]\n```\n\n### IN\n\n```php\n// not in ç”¨æ³•ç›¸åŒ\n// SQL: `id IN (1, 2, 3)`\n$cond = ['between', 'id', 1, 10]\n$cond = ['id' => [1, 2, 3]]\n\n// IN æ¡ä»¶ä¹Ÿé€‚ç”¨äºå¤šå­—æ®µ\n// SQL: (`id`, `name`) IN ((1, 'foo'), (2, 'bar'))\n$cond = ['in', ['id', 'name'], [['id' => 1, 'name' => 'foo'], ['id' => 2, 'name' => 'bar']]]\n\n// ä¹Ÿé€‚ç”¨äºå†…åµŒ SQL è¯­å¥\n$cond = ['in', 'user_id', (new Query())->select('id')->from('users')->where(['active' => 1])]\n```\n\n### LIKE\n\n```php\n// SQL: `name LIKE '%tester%'`\n$cond = ['like', 'name', 'tester']\n\n// SQL: `name LIKE '%test%' AND name LIKE '%sample%'`\n$cond = ['like', 'name', ['test', 'sample']]\n\n// SQL: `name LIKE '%tester'`\n$cond = ['like', 'name', '%tester', false]\n```\n\n### EXIST\n\n```php\n// not existsç”¨æ³•ç±»ä¼¼\n// SQL: EXISTS (SELECT \"id\" FROM \"users\" WHERE \"active\"=1)\n$cond = ['exists', (new Query())->select('id')->from('users')->where(['active' => 1])]\n```\n\n## References\n\n- [æŸ¥è¯¢æ„å»ºå™¨ | yiiframework](https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-query-builder)\n- [YII where æ¡ä»¶ | csdn](https://blog.csdn.net/u013697959/article/details/79687746)\n\n-- EOF --\n","tags":["php","yii2","code-snippet"],"categories":["yii2"]},{"title":"Yii2 Vue è·¨åŸŸé—®é¢˜","url":"/2021/01/10/yii2-vue-cors/","content":"\n## æ—§çš„è§£å†³åŠæ³•\n\nåœ¨æ§åˆ¶å™¨çš„ behaviors æ–¹æ³•ä¸­å¢åŠ ä¸‹é¢çš„ä»£ç ï¼š\n\n```php\npublic function behaviors()\n{\n    $behaviors = parent::behaviors();\n    if (YII_ENV_DEV) {\n        // add CORS filter\n        $behaviors['corsFilter'] = [\n            'class' => Cors::class,\n            'cors' => [\n                'Origin' => ['http://localhost:8080'],\n                'Access-Control-Request-Method' => ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'],\n                'Access-Control-Request-Headers' => ['*'],\n                'Access-Control-Allow-Credentials' => true,\n                'Access-Control-Max-Age' => 86400,\n                'Access-Control-Expose-Headers' => [],\n            ],\n        ];\n    }\n\n    return $behaviors;\n}\n```\n\nä¸Šè¾¹é…ç½®çš„è§£é‡Šï¼š\n\n- `Origin` å³ `Access-Control-Allow-Origin` è¡¨ç¤ºï¼šå“åº”å¤´æŒ‡å®šäº†è¯¥å“åº”çš„èµ„æºæ˜¯å¦è¢«å…è®¸ä¸ç»™å®šçš„ origin å…±äº«ã€‚\n- `Access-Control-Request-Method` ç”¨äºé€šçŸ¥æœåŠ¡å™¨åœ¨çœŸæ­£çš„è¯·æ±‚ä¸­ä¼šé‡‡ç”¨å“ªç§ HTTP æ–¹æ³•ã€‚å› ä¸ºé¢„æ£€è¯·æ±‚æ‰€ä½¿ç”¨çš„æ–¹æ³•æ€»æ˜¯ `OPTIONS` ï¼Œä¸å®é™…è¯·æ±‚æ‰€ä½¿ç”¨çš„æ–¹æ³•ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä¸ªè¯·æ±‚å¤´æ˜¯å¿…è¦çš„ã€‚\n- `Access-Control-Request-Headers` ç”¨äºé€šçŸ¥æœåŠ¡å™¨åœ¨çœŸæ­£çš„è¯·æ±‚ä¸­ä¼šé‡‡ç”¨å“ªäº›è¯·æ±‚å¤´ã€‚\n- `Access-Control-Allow-Credentials` è¡¨ç¤ºæ˜¯å¦å¯ä»¥å°†å¯¹è¯·æ±‚çš„å“åº”æš´éœ²ç»™é¡µé¢ã€‚è¿”å› true åˆ™å¯ä»¥ï¼Œå…¶ä»–å€¼å‡ä¸å¯ä»¥ã€‚\n- `Access-Control-Max-Age` è¡¨ç¤ºè¿”å›ç»“æœï¼ˆå³ `Access-Control-Allow-Methods` å’Œ `Access-Control-Allow-Headers` æä¾›çš„ä¿¡æ¯ï¼‰ å¯ä»¥è¢«ç¼“å­˜å¤šä¹…ã€‚\n- `Access-Control-Expose-Headers` åˆ—å‡ºäº†å“ªäº›é¦–éƒ¨å¯ä»¥ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†æš´éœ²ç»™å¤–éƒ¨ã€‚\n\næ³¨æ„ï¼š\n\nå¦‚æœè®¾ç½® `Origin` ä¸º `['*']`ï¼Œå³æ‰€æœ‰çš„å‰ç«¯è·¨åŸŸè¯·æ±‚å¯ä»¥æ¥å—ï¼ŒåŒæ—¶æŠŠ `Access-Control-Allow-Credentials` è®¾ç½®ä¸º `true`ï¼ŒYii ä¼šç›´æ¥æŠ¥é”™ï¼š**Allowing credentials for wildcard origins is insecure. Please specify more restrictive origins or set 'credentials' to false in your CORS configuration.**ã€‚\n\nå‘Šè¯‰ä½ ä½¿ç”¨é€šé…ç¬¦çš„å‡­è¯æ˜¯ä¸å®‰å…¨çš„ï¼Œè®©ä½ è®¾ç½®æ›´ä¸¥æ ¼çš„ `Origin` æˆ–è€…æŠŠ `Access-Control-Allow-Credentials` è®¾ç½®ä¸º `false`ã€‚\n\nä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ `Access-Control-Allow-Credentials` ä¸º `true` å¹¶ä¸” `Access-Control-Allow-Origin` ä¸º `*`ã€‚\n\nå› ä¸º `Access-Control-Allow-Credentials` çš„æ„æ€å°±æ˜¯å…è®¸è·¨åŸŸè¯·æ±‚åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å‡­è¯ï¼Œæ¯”å¦‚ `cookie`ï¼Œåšèº«ä»½è¯†åˆ«ï¼Œä½†æ˜¯ä½ åˆæŠŠ `Access-Control-Allow-Origin` è®¾ç½®ä¸º `*`ï¼Œè¿™æ˜¯è¯´ä¸é€šçš„ï¼Œæ˜¯ç›¸æ‚–çš„ã€‚\n\nå…·ä½“å¯å‚è€ƒï¼š[Reason: Credential is not supported if the CORS header 'Access-Control-Allow-Origin' is '\\*' | mozilla](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials)\n\n## æ–°çš„é—®é¢˜\n\nä¸Šé¢çš„ç†è®ºä¸Šè§£å†³äº†è·¨åŸŸé—®é¢˜ï¼Œä½†æ˜¯æ–°ç‰ˆ Chrome æ ¹æ® Cookie çš„ SameSite å±æ€§ï¼Œä»ç„¶ä¼šé˜»æ­¢ Cookie çš„å‘é€ `network` `show filtered out request cookies`ã€‚\n\nå‚è€ƒï¼š\n\n- [Whatâ€™s New In DevTools (Chrome 79) | medium](https://medium.com/faun/whats-new-in-devtools-chrome-79-1b2df6cdd759)\n- [Cookie çš„ SameSite å±æ€§ | ruanyifeng](https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html)\n\nåœ¨å¼€å‘ç¯å¢ƒæ ¹æ²»è·¨åŸŸé—®é¢˜ï¼Œä½¿ç”¨ `webpack-dev-server` ä»£ç†ã€‚\n\nå‰ç«¯ï¼šabc.test\nåç«¯ï¼šabc-api.test\nä»£ç†ï¼š`abc.test/web-api` -> `abc-api.test`\n\n```js\n  proxy: {\n    '/web-api/': {\n      target: 'http://abc-api.test/',\n      pathRewrite: { '^/web-api': '' },\n      changeOrigin: true, // é»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç†æ—¶ä¼šä¿ç•™ä¸»æœºå¤´çš„æ¥æºï¼Œæ‚¨å¯ä»¥å°† changeOrigin è®¾ç½®ä¸ºtrue æ¥è¦†ç›–æ­¤è¡Œä¸ºã€‚\n      secure: false, // æ¥å—åœ¨ HTTPS ä¸Šè¿è¡Œå¸¦æœ‰æ— æ•ˆè¯ä¹¦çš„åç«¯æœåŠ¡å™¨ã€‚\n    },\n  }\n```\n\nå‚è€ƒï¼š[dev-server devserverproxy | webpack](https://webpack.js.org/configuration/dev-server/#devserverproxy)\n\n> æ˜¯å¦å¯ä»¥ jwt æ¥è§£å†³å¾…ç ”ç©¶ã€‚\n\n## References\n\n- [è§£å†³ Yii2 + Vue å‰åå°åˆ†ç¦»æ—¶è·¨åŸŸçš„é—®é¢˜ | shiqidu](https://www.shiqidu.com/d/846)\n- [è·¨æºèµ„æºå…±äº«ï¼ˆCORSï¼‰ | mozilla](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS)\n\n-- EOF --\n","tags":["php","yii2","vue"]},{"title":"ä¼˜åŒ– PHP-FPM","url":"/2020/12/30/optimization-of-php-fpm/","content":"\n## TL;DR\n\n- [php-fpm.conf | php.net](https://www.php.net/manual/zh/install.fpm.configuration.php)\n\n```bash\ncat php-fpm.conf | grep '^[^;]'\n```\n\n```conf\n[www]\nuser = nobody\ngroup = nobody\nlisten = 127.0.0.1:10071\n\n#php-fpmè¿›ç¨‹å¯åŠ¨æ¨¡å¼ï¼Œpmå¯ä»¥è®¾ç½®ä¸ºstaticå’Œdynamicå’Œondemand\n#å¦‚æœé€‰æ‹©staticï¼Œåˆ™è¿›ç¨‹æ•°å°±æ•°å›ºå®šçš„ï¼Œç”±pm.max_childrenæŒ‡å®šå›ºå®šçš„å­è¿›ç¨‹æ•°ã€‚\npm = dynamic\n\n#å¦‚æœé€‰æ‹©dynamicï¼Œåˆ™è¿›ç¨‹æ•°æ˜¯åŠ¨æ€å˜åŒ–çš„,ç”±ä»¥ä¸‹å‚æ•°å†³å®šï¼š\n#å­è¿›ç¨‹æœ€å¤§æ•°\npm.max_children = 50\n#å¯åŠ¨æ—¶çš„è¿›ç¨‹æ•°ï¼Œé»˜è®¤å€¼ä¸º: min_spare_servers + (max_spare_servers - min_spare_servers) / 2\npm.start_servers = 2\n# ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å°å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å°äºæ­¤å€¼ï¼Œåˆ™åˆ›å»ºæ–°çš„å­è¿›ç¨‹\npm.min_spare_servers = 1\n# ä¿è¯ç©ºé—²è¿›ç¨‹æ•°æœ€å¤§å€¼ï¼Œå¦‚æœç©ºé—²è¿›ç¨‹å¤§äºæ­¤å€¼ï¼Œæ­¤è¿›è¡Œæ¸…ç†\npm.max_spare_servers = 3\n```\n\n## static è¿˜æ˜¯ dynamic\n\nå¾ˆå¤šäººææƒ§ç—‡æ¥è¢­ï¼Œä¸çŸ¥é“é€‰ä»€ä¹ˆå¥½ï¼Ÿ\n\nä¸€èˆ¬åŸåˆ™æ˜¯ï¼šåŠ¨æ€é€‚åˆå°å†…å­˜æœºå™¨ï¼Œçµæ´»åˆ†é…è¿›ç¨‹ï¼Œçœå†…å­˜ã€‚é™æ€é€‚ç”¨äºå¤§å†…å­˜æœºå™¨ï¼ŒåŠ¨æ€åˆ›å»ºå›æ”¶è¿›ç¨‹å¯¹æœåŠ¡å™¨èµ„æºä¹Ÿæ˜¯ä¸€ç§æ¶ˆè€—ã€‚\n\nå¦‚æœä½ çš„å†…å­˜å¾ˆå¤§ï¼Œæœ‰ 8-20Gï¼ŒæŒ‰ç…§ä¸€ä¸ª php-fpm è¿›ç¨‹ 20M ç®—ï¼Œ100 ä¸ªå°± 2G å†…å­˜äº†ï¼Œé‚£å°±å¯ä»¥å¼€å¯ static æ¨¡å¼ã€‚å¦‚æœä½ çš„å†…å­˜å¾ˆå°ï¼Œæ¯”å¦‚æ‰ 256Mï¼Œé‚£å°±è¦å°å¿ƒè®¾ç½®äº†ï¼Œå› ä¸ºä½ çš„æœºå™¨é‡Œé¢çš„å…¶ä»–çš„è¿›ç¨‹ä¹Ÿç®—éœ€è¦å ç”¨å†…å­˜çš„ï¼Œæ‰€ä»¥è®¾ç½®æˆ dynamic æ˜¯æœ€å¥½çš„ï¼Œæ¯”å¦‚ï¼špm.max_chindren = 8, å ç”¨å†…å­˜ 160M å·¦å³ï¼Œè€Œä¸”å¯ä»¥éšæ—¶å˜åŒ–ï¼Œå¯¹äºä¸€åŠè®¿é—®é‡çš„ç½‘ç«™è¶³å¤Ÿäº†ã€‚\n\n## æ…¢æ—¥å¿—æŸ¥è¯¢\n\n```conf\n# æ…¢è¯·æ±‚çš„è®°å½•æ—¥å¿—,é…åˆrequest_slowlog_timeoutä½¿ç”¨ï¼Œé»˜è®¤å…³é—­\nslowlog = log/$pool.log.slow\n\n# å½“ä¸€ä¸ªè¯·æ±‚è¯¥è®¾ç½®çš„è¶…æ—¶æ—¶é—´åï¼Œå°±ä¼šå°†å¯¹åº”çš„PHPè°ƒç”¨å †æ ˆä¿¡æ¯å®Œæ•´å†™å…¥åˆ°æ…¢æ—¥å¿—ä¸­. è®¾ç½®ä¸º '0' è¡¨ç¤º 'Off'\nrequest_slowlog_timeout = 10s\n\n# è®¾ç½®å•ä¸ªè¯·æ±‚çš„è¶…æ—¶ä¸­æ­¢æ—¶é—´. è¯¥é€‰é¡¹å¯èƒ½ä¼šå¯¹php.iniè®¾ç½®ä¸­çš„'max_execution_time'å› ä¸ºæŸäº›ç‰¹æ®ŠåŸå› æ²¡æœ‰ä¸­æ­¢è¿è¡Œçš„è„šæœ¬æœ‰ç”¨. è®¾ç½®ä¸º '0' è¡¨ç¤º 'Off'.å½“ç»å¸¸å‡ºç°502é”™è¯¯æ—¶å¯ä»¥å°è¯•æ›´æ”¹æ­¤é€‰é¡¹ã€‚\nrequest_terminate_timeout = 0\n```\n\n## References\n\n- [æŸ¥è¯¢æ„å»ºå™¨ | yiiframework](https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-query-builder)\n- [YII where æ¡ä»¶ | csdn](https://blog.csdn.net/u013697959/article/details/79687746)\n\n-- EOF --\n","tags":["php"]},{"title":"MySQL ç©ºæ ¼é—®é¢˜","url":"/2020/11/28/mysql-blank-space/","content":"\n## çœ‹ç°è±¡\n\nåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®åº“è¡¨ï¼Œæ’å…¥æµ‹è¯•æ•°æ®ï¼š\n\n```sql\nCREATE TABLE `blank_space` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `uid` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',\n  `desc` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `uniq_key` (`uid`) USING BTREE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nINSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (1, 'abc ', 'æœ«å°¾1ä¸ª');\nINSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (2, ' abc', 'å¼€å¤´1ä¸ª');\nINSERT INTO `blank_space`(`id`, `uid`, `desc`) VALUES (3, '  abc', 'å¼€å¤´2ä¸ª');\n```\n\n| id  | uid     | desc      |\n| --- | ------- | --------- |\n| 1   | abc\\_   | æœ«å°¾ 1 ä¸ª |\n| 2   | \\_abc   | å¼€å¤´ 1 ä¸ª |\n| 3   | \\_\\_abc | å¼€å¤´ 2 ä¸ª |\n\n> uid å®é™…ä¸Šæ²¡æœ‰ `_`ï¼Œè¿™æ ·å†™æ˜¯ä¸ºäº†çœ‹åˆ°ç©ºæ ¼ã€‚\n\næ‰§è¡Œæ“ä½œï¼š\n\n```sql\nSELECT * FROM blank_space WHERE uid = 'abc';\n\nSELECT * FROM blank_space WHERE uid = 'abc ';\n\nSELECT * FROM blank_space WHERE uid = 'abc   ';\n```\n\néƒ½å¯ä»¥æŸ¥è¯¢å‡ºï¼š\n\n| id  | uid   | desc      |\n| --- | ----- | --------- |\n| 1   | abc\\_ | æœ«å°¾ 1 ä¸ª |\n\næ‰§è¡Œæ“ä½œï¼š\n\n```sql\nINSERT INTO `blank_space`(`uid`, `desc`) VALUES ('abc', 'æ— ç©ºæ ¼');\n-- 1062 - Duplicate entry 'abc' for key 'uniq_key', Time: 0.322000s\n\nINSERT INTO `blank_space`(`uid`, `desc`) VALUES ('abc  ', 'æœ«ä½ä¸¤ä¸ª');\n-- 1062 - Duplicate entry 'abc' for key 'uniq_key', Time: 0.322000s\n```\n\n## åŸå› \n\nMySQL æ ¡å¯¹è§„åˆ™å±äº PADSPACEï¼Œä¼šå¿½ç•¥å°¾éƒ¨ç©ºæ ¼ã€‚é’ˆå¯¹çš„æ˜¯ varchar char text ç­‰æ–‡æœ¬ç±»çš„æ•°æ®ç±»å‹ã€‚æ­¤ä¸º SQL æ ‡å‡†åŒ–è¡Œä¸ºã€‚æ— éœ€è¦è®¾ç½®ä¹Ÿæ— æ³•æ”¹å˜ã€‚\n\n## è§£å†³æ–¹æ¡ˆ\n\n```sql\nSELECT * FROM blank_space WHERE uid = BINARY 'abc';\n-- 0 records\n\nSELECT * FROM blank_space WHERE uid = BINARY 'abc ';\n-- 1 records\n\nSELECT * FROM blank_space WHERE uid = BINARY 'abc   ';\n-- 0 records\n\n\nSELECT * FROM blank_space WHERE uid like 'abc';\n-- 0 records\n\nSELECT * FROM blank_space WHERE uid like 'abc ';\n-- 1 records\n\nSELECT * FROM blank_space WHERE uid like 'abc   ';\n-- 0 records\n```\n\n> BINARY ä¸æ˜¯å‡½æ•°ï¼Œæ˜¯ç±»å‹è½¬æ¢è¿ç®—ç¬¦ï¼Œå®ƒç”¨æ¥å¼ºåˆ¶å®ƒåé¢çš„å­—ç¬¦ä¸²ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç†è§£æˆç²¾ç¡®åŒ¹é…ã€‚\n\n## çº¦æŸæ”»å‡»\n\n**éœ€è¦åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ã€‚**\n\n```sql\nSET sql_mode = '';\n\nCREATE TABLE `blank_space_attack` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `uid` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',\n  `pwd` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nINSERT INTO `blank_space_attack`(`id`, `uid`, `pwd`) VALUES (1, 'admin', '123');\nINSERT INTO `blank_space_attack`(`id`, `uid`, `pwd`) VALUES (2, 'tim', '234');\n```\n\næ”»å‡»ï¼š\n\n```sql\nINSERT INTO `blank_space_attack`(`uid`, `pwd`) VALUES ('admin      1', 'easy');\n```\n\nç»“æœï¼š\n\n```sql\n\nselect * from blank_space_attack where uid = \"admin\" and pwd = \"easy\";\n```\n\n| id  | uid             | desc |\n| --- | --------------- | ---- |\n| 3   | admin\\_\\_\\_\\_\\_ | easy |\n\n### é™åˆ¶æ¡ä»¶\n\n- æœåŠ¡ç«¯æ²¡æœ‰å¯¹ç”¨æˆ·åé•¿åº¦è¿›è¡Œé™åˆ¶ã€‚å¦‚æœæœåŠ¡ç«¯é™åˆ¶äº†ç”¨æˆ·åé•¿åº¦å°±ä¸èƒ½å¯¼è‡´æ•°æ®åº“æˆªæ–­ï¼Œä¹Ÿå°±æ²¡æœ‰åˆ©ç”¨æ¡ä»¶ã€‚\n- ç™»é™†éªŒè¯çš„ SQL è¯­å¥å¿…é¡»æ˜¯ç”¨æˆ·åå’Œå¯†ç ä¸€èµ·éªŒè¯ã€‚å¦‚æœæ˜¯éªŒè¯æµç¨‹æ˜¯å…ˆæ ¹æ®ç”¨æˆ·åæŸ¥æ‰¾å‡ºå¯¹åº”çš„å¯†ç ï¼Œç„¶åå†æ¯”å¯¹å¯†ç çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿä¸èƒ½è¿›è¡Œåˆ©ç”¨ã€‚å› ä¸ºå½“ä½¿ç”¨ admin ä¸ºç”¨æˆ·åæ¥æŸ¥è¯¢å¯†ç çš„è¯ï¼Œæ•°æ®åº“æ­¤æ—¶å°±ä¼šè¿”å›ä¸¤æ¡è®°å½•ï¼Œè€Œä¸€èˆ¬å–ç¬¬ä¸€æ¡åˆ™æ˜¯ç›®æ ‡ç”¨æˆ·çš„è®°å½•ï¼Œé‚£ä¹ˆä½ ä¼ è¾“çš„å¯†ç è‚¯å®šæ˜¯å’Œç›®æ ‡ç”¨æˆ·å¯†ç åŒ¹é…ä¸ä¸Šçš„ã€‚\n- éªŒè¯æˆåŠŸåè¿”å›çš„å¿…é¡»æ˜¯ç”¨æˆ·ä¼ é€’è¿›æ¥çš„ç”¨æˆ·åï¼Œè€Œä¸æ˜¯ä»æ•°æ®åº“å–å‡ºçš„ç”¨æˆ·åã€‚å› ä¸ºå½“æˆ‘ä»¬ä»¥ç”¨æˆ· admin å’Œå¯†ç  easy ç™»é™†æ—¶ï¼Œå…¶å®æ•°æ®åº“è¿”å›çš„æ˜¯æˆ‘ä»¬è‡ªå·±çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè€Œæˆ‘ä»¬çš„ç”¨æˆ·åå…¶å®æ˜¯ `admin_____`ï¼Œå¦‚æœæ­¤åçš„ä¸šåŠ¡é€»è¾‘ä»¥è¯¥ç”¨æˆ·åä¸ºå‡†ï¼Œé‚£ä¹ˆå°±ä¸èƒ½è¾¾åˆ°è¶Šæƒçš„ç›®çš„äº†ã€‚\n\n## References\n\n- [SQL çº¦æŸæ”»å‡» | v0n](https://www.v0n.top/2019/08/05/SQL%E7%BA%A6%E6%9D%9F%E6%94%BB%E5%87%BB/)\n- [è®°ä¸€æ¬¡æ•°æ®åº“ç©ºæ ¼é—®é¢˜ | iluoy](https://iluoy.com/articles/295)\n- [Mysql æŸ¥è¯¢æ¡ä»¶ä¸­å­—ç¬¦ä¸²å°¾éƒ¨æœ‰ç©ºæ ¼ä¹Ÿèƒ½åŒ¹é…ä¸Šçš„é—®é¢˜ | xjnotxj](https://www.cnblogs.com/xjnotxj/p/9019866.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"åœ¨ Laravel ä¹‹å¤–ä½¿ç”¨ illuminate ç»„ä»¶","url":"/2020/09/11/use-illuminate-components-without-laravel/","content":"\nå½“ä»£æ¡†æ¶åŸºæœ¬éƒ½æ˜¯æœ‰ç»„ä»¶æ„æˆï¼Œè¿™ä½¿å¾—æ¡†æ¶å˜å¾—æ›´åŠ çµæ´»ã€‚[The Laravel Components | github](https://github.com/illuminate) Laravel ä¸­æœ‰ä¸å°‘ä¼˜è´¨ç»„ä»¶ï¼Œé‚£å¦‚ä½•åœ¨ Laravel ä¹‹å¤–ä½¿ç”¨ illuminate ç»„ä»¶å‘¢ï¼Ÿ\n\n## illuminate/validation\n\nä»¥ [illuminate/validation](https://github.com/illuminate/validation) ä¸ºä¾‹ï¼Œvalidation æœ‰ä¸°å¯Œçš„æ•°æ®éªŒè¯åŠŸèƒ½ã€‚\n\nåœ¨é¡¹ç›®çš„ `composer.json` æ–‡ä»¶ä¸­æ·»åŠ ï¼š\n\n```json\n...\n    \"require\": {\n      ...\n      \"illuminate/validation\": \"^5.8\",\n...\n```\n\nä» [Laravel-Lang/lang](https://github.com/Laravel-Lang/lang/tree/master/src/zh_CN) é¡¹ç›®ä¸­å¤åˆ¶éœ€è¦çš„è¯­è¨€æ–‡ä»¶æ”¾åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚\n\nä¾‹å¦‚ï¼šåœ¨ Yii2 é¡¹ç›®ä¸­ï¼Œå¤åˆ¶å¯¹åº”è¯­è¨€æ–‡ä»¶åˆ°é¡¹ç›®ä¸­çš„ `assets/lang/zh-CN/validation.php`ã€‚\n\nåˆ›å»º `common/Validator.php`ï¼š\n\n```php\n<?php\n\nnamespace app\\common;\n\nuse Illuminate\\Filesystem\\Filesystem;\nuse Illuminate\\Translation\\FileLoader;\nuse Illuminate\\Translation\\Translator;\nuse Illuminate\\Validation\\Factory;\n\nclass Validator\n{\n  private static $instance = null;\n\n  private function __construct()\n  {\n  }\n\n  public static function getInstance(): Factory\n  {\n    if (null === static::$instance) {\n      $translationPath = get_alias('@assets/lang');\n      $translationLocale = 'zh-CN';\n      $transFileLoader = new FileLoader(new Filesystem(), $translationPath);\n      $translator = new Translator($transFileLoader, $translationLocale);\n      static::$instance = new Factory($translator);\n    }\n\n    return static::$instance;\n  }\n}\n```\n\nåœ¨å…¨å±€å‡½æ•°æ–‡ä»¶æ·»åŠ ï¼š\n\n```php\n// https://learnku.com/docs/laravel/5.8/validation/3899#manually-creating-validators\n// $rules = [\n//   'name' => 'required|string|min:2|max:5',\n//   'code' => 'required|string|min:2|max:5',\n// ];\nfunction validator(array $data, array $rules, array $messages = [], array $customAttributes = [])\n{\n  return \\app\\common\\Validator::getInstance()->make($data, $rules, $messages, $customAttributes);\n}\n```\n\næµ‹è¯•ä½¿ç”¨ï¼š\n\n```php\n$rules = ['name' => 'required|numeric'];\n$customAttributes = ['name' => 'My name'];\n$messages = ['name.required' => 'A name is required',];\n\n$validator = validator($data, $rules, $customAttributes, $messages);\nif ($validator->fails()) {\n    $errors = $validator->errors()->all();\n    Response::error(Errors::ParamsInvalid, implode(',', $errors), $errors);\n}\n```\n\n-- EOF --\n","tags":["php"]},{"title":"Redis æ­£åˆ™æ‰¹é‡åˆ é™¤ key","url":"/2020/08/17/redis-matching-a-pattern-delete-keys/","content":"\n```lua\nEVAL \"return redis.call('del', 'defaultKey', unpack(redis.call('keys', ARGV[1])))\" 0 prefix:*\n```\n\nå¾ªç¯åˆ é™¤ï¼š\n\n```lua\nEVAL \"local keys = redis.call('keys', ARGV[1]) \\n for i=1,#keys,5000 do \\n redis.call('del', unpack(keys, i, math.min(i+4999, #keys))) \\n end \\n return keys\" 0 prefix:*\n```\n\n## References\n\n- [How to atomically delete keys matching a pattern using Redis | stackoverflow](https://stackoverflow.com/questions/4006324/how-to-atomically-delete-keys-matching-a-pattern-using-redis)\n\n-- EOF --\n","tags":["redis"]},{"title":"MySQL JSON æ•°æ®ç±»å‹","url":"/2020/08/14/mysql-json-data-type/","content":"\n[The JSON Data Type | mysql](https://dev.mysql.com/doc/refman/5.7/en/json.html)\n\n> As of MySQL 5.7.8, MySQL supports a native JSON data type\n\n[JSON Function Reference | mysql](https://dev.mysql.com/doc/refman/5.7/en/json-function-reference.html)\n\nA JSON column cannot have a non-NULL default value.\n\n## ç´¢å¼•\n\nè®¾ç½®è™šæ‹Ÿåˆ— -> è™šæ‹Ÿåˆ—å»ºç«‹ç´¢å¼•\n\nåœ¨ MySQL 5.7 ä¸­ï¼Œæ”¯æŒä¸¤ç§ Generated Columnï¼Œå³ Virtual Generated Column å’Œ Stored Generated Columnï¼Œå‰è€…åªå°† Generated Column ä¿å­˜åœ¨æ•°æ®å­—å…¸ä¸­ï¼ˆè¡¨çš„å…ƒæ•°æ®ï¼‰ï¼Œå¹¶ä¸ä¼šå°†è¿™ä¸€åˆ—æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼›åè€…ä¼šå°† Generated Column æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¯»å–çš„æ—¶å€™è®¡ç®—æ‰€å¾—ã€‚å¾ˆæ˜æ˜¾ï¼Œåè€…å­˜æ”¾äº†å¯ä»¥é€šè¿‡å·²æœ‰æ•°æ®è®¡ç®—è€Œå¾—çš„æ•°æ®ï¼Œéœ€è¦æ›´å¤šçš„ç£ç›˜ç©ºé—´ï¼Œä¸ Virtual Column ç›¸æ¯”å¹¶æ²¡æœ‰ä¼˜åŠ¿ï¼Œå› æ­¤ï¼ŒMySQL 5.7 ä¸­ï¼Œä¸æŒ‡å®š Generated Column çš„ç±»å‹ï¼Œé»˜è®¤æ˜¯ Virtual Columnã€‚\n\nå¦‚æœéœ€è¦ Stored Generated Golumn çš„è¯ï¼Œå¯èƒ½åœ¨ Virtual Generated Column ä¸Šå»ºç«‹ç´¢å¼•æ›´åŠ åˆé€‚ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½ä½¿ç”¨ Virtual Generated Columnï¼Œè¿™ä¹Ÿæ˜¯ MySQL é»˜è®¤çš„æ–¹å¼ã€‚\n\n```json\n{\n  \"id\": 1,\n  \"name\": \"Sally\",\n  \"games_played\": {\n    \"Battlefield\": {\n      \"weapon\": \"sniper rifle\",\n      \"rank\": \"Sergeant V\",\n      \"level\": 20\n    }\n  }\n}\n```\n\n```sql\nCREATE TABLE `players` (\n  `id` INT UNSIGNED NOT NULL,\n  `player_and_games` JSON NOT NULL,\n  `names_virtual` VARCHAR(20) GENERATED ALWAYS AS (`player_and_games` ->> '$.name') NOT NULL,\n  PRIMARY KEY (`id`)\n);\n```\n\n## åœ¨ Yii2 ä¸­çš„ä½¿ç”¨\n\n```php\n$query = static::find()\n    ->andWhere(['=', new Expression(\"`json_value` -> '$.source'\"), new JsonExpression($array_param)]);\n```\n\n## References\n\n- [MySQL 5.7 æ–°ç‰¹æ€§ JSON çš„åˆ›å»ºï¼Œæ’å…¥ï¼ŒæŸ¥è¯¢ï¼Œæ›´æ–°](https://www.lnmp.cn/mysql-57-new-features-json.html)\n- [MySQL Â· æœ€ä½³å®è·µ Â· å¦‚ä½•ç´¢å¼• JSON å­—æ®µ](http://mysql.taobao.org/monthly/2017/12/09/)\n- [MySQL å¸¸ç”¨ Json å‡½æ•° | cnblogs](https://www.cnblogs.com/waterystone/p/5626098.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"Composer vendor æäº¤è‡³ Git","url":"/2020/08/10/commit-composer-vendor-to-git/","content":"\n## åº”è¯¥å°† vendor æäº¤åˆ° Git å—\n\nä¸€èˆ¬å»ºè®®æ˜¯ **ä¸**ã€‚`vendor` ç›®å½•åº”æ·»åŠ åˆ° `.gitignore`ã€‚\n\næœ€ä½³å®è·µæ˜¯è®©æ‰€æœ‰å¼€å‘äººå‘˜ä½¿ç”¨ Composer æ¥å®‰è£…ä¾èµ–é¡¹ã€‚ç±»ä¼¼åœ°ï¼Œæ„å»ºæœåŠ¡å™¨ã€CIã€éƒ¨ç½²å·¥å…·ç­‰éƒ½åº”è¯¥ä½œä¸ºé¡¹ç›®å¯åŠ¨çš„ä¸€éƒ¨åˆ†æ¥è¿è¡Œ Composerã€‚\n\nè™½ç„¶åœ¨æŸäº›ç¯å¢ƒä¸‹è¿™æ ·åšå¾ˆè¯±äººï¼Œä½†ä¹Ÿä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼š\n\n- å¤§å‹ VCS å­˜å‚¨åº“çš„å¤§å°å’Œæ›´æ–°ä»£ç æ—¶çš„å·®å¼‚ã€‚\n- åœ¨ä½ è‡ªå·±çš„ VCS å¤åˆ¶ä½ æ‰€æœ‰ä¾èµ–çš„å†å²ã€‚\n- å°†é€šè¿‡ git å®‰è£…çš„ä¾èµ–é¡¹æ·»åŠ åˆ° git repo ä¸­å°†æ˜¾ç¤ºä¸º `submodules`ã€‚è¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯çœŸæ­£çš„ `submodules`ï¼Œæ‚¨å°†ä¼šé‡åˆ°é—®é¢˜ã€‚\n\nå¦‚æœä½ çœŸçš„è§‰å¾—ä½ å¿…é¡»è¿™æ ·åšï¼Œä½ æœ‰å‡ ä¸ªé€‰æ‹©ï¼š\n\n- é™åˆ¶è‡ªå·±å®‰è£…å¸¦æ ‡è®°çš„ç‰ˆæœ¬ï¼ˆæ²¡æœ‰ dev ç‰ˆæœ¬ï¼‰ï¼Œè¿™æ ·å°±åªèƒ½å®‰è£…å‹ç¼©ç‰ˆï¼Œå¹¶é¿å…ä¸ git `submodules` æœ‰å…³çš„é—®é¢˜ã€‚\n- Use `--prefer-dist` or set `preferred-install` to `dist` in your config.\n- Remove the `.git` directory of every dependency after the installation, then you can add them to your git repo. You can do that with `rm -rf vendor/\\*\\*/.git` in ZSH or `find vendor/ -type d -name \".git\" -exec rm -rf {} \\;` in Bash. ä½†è¿™æ„å‘³ç€æ‚¨å¿…é¡»åœ¨è¿è¡Œ composer æ›´æ–°ä¹‹å‰ä»ç£ç›˜ä¸­åˆ é™¤è¿™äº›ä¾èµ–é¡¹ã€‚\n- Add a `.gitignore` rule `/vendor/**/.git` to ignore all the vendor `.git` folders. è¿™ç§æ–¹æ³•ä¸éœ€è¦åœ¨è¿è¡Œç¼–å†™å™¨æ›´æ–°ä¹‹å‰ä»ç£ç›˜åˆ é™¤ä¾èµ–é¡¹ã€‚\n\n## æˆ‘çš„åšæ³•\n\n> é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯ä¸ç¡®ä¿¡åšæ³•æ˜¯å¦æ­£ç¡®ã€‚\n\nå› ä¸ºç½‘ç»œç¯å¢ƒä¸éƒ¨ç½²çš„åŸå› ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ˜¯å°† `vendor` ç›®å½•æäº¤åˆ° `git` ä¸­çš„ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­ç¡®å®å‡ºç°äº†ï¼Œéƒ¨åˆ†ç±»åº“æˆä¸ºäº† `submodules`ï¼Œæ— æ³•æŠŠçœŸå®çš„ä»£ç æäº¤è¿› gitã€‚\n\nå¯å°è¯•æ‰§è¡Œï¼š\n\n```bash\ngit rm rf --cache vendor\ngit add .\ngit commit -m \"add vendor\"\n```\n\n## References\n\n- [Should I commit the dependencies in my vendor directory? | getcomposer](https://getcomposer.org/doc/faqs/should-i-commit-the-dependencies-in-my-vendor-directory.md)\n\n-- EOF --\n","tags":["php","composer","git"]},{"title":"PHP Swoft æ¡†æ¶ç¯å¢ƒé…ç½®","url":"/2020/08/07/deploy-swoft-framework/","content":"\n## å®‰è£… Swoole\n\n```bash\npecl install swoole\n```\n\nå¯èƒ½å‡ºç°ï¼š\n\n```txt\nConnection to `ssl://pecl.php.net:443â€² failed:\n```\n\n```bash\n# æ£€æŸ¥\nphp -r \"print_r(openssl_get_cert_locations());\"\n\nArray\n(\n    [default_cert_file] => /private/etc/ssl/cert.pem\n    [default_cert_file_env] => SSL_CERT_FILE\n    [default_cert_dir] => /private/etc/ssl/certs\n    [default_cert_dir_env] => SSL_CERT_DIR\n    [default_private_dir] => /private/etc/ssl/private\n    [default_default_cert_area] => /private/etc/ssl\n    [ini_cafile] =>\n    [ini_capath] =>\n)\n\nls /private/etc/ssl/\n# ç°æ²¡æœ‰ cert.pem è¿™ä¸ªè¯ä¹¦\n\n# ä¸‹è½½è¯ä¹¦\nwget -c https://curl.haxx.se/ca/cacert.pem /private/etc/ssl/cert.pem --no-check-certificate\n\n# å†æ¬¡æ‰§è¡Œ\npecl install swoole\n```\n\n## PEAR PECL Composer\n\n[PEAR](http://pear.php.net/)ï¼šPHP Extension and Application Repositoryï¼ŒPEAR å°† PHP ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­å¸¸ç”¨çš„åŠŸèƒ½ç¼–å†™æˆç±»åº“ï¼Œæ¶µç›–äº†é¡µé¢å‘ˆç°ã€æ•°æ®åº“è®¿é—®ã€æ–‡ä»¶æ“ä½œã€æ•°æ®ç»“æ„ã€ç¼“å­˜æ“ä½œã€ç½‘ç»œåè®®ã€WebService ç­‰è®¸å¤šæ–¹é¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¸‹è½½è¿™äº›ç±»åº“å¹¶é€‚å½“çš„ä½œä¸€äº›å®šåˆ¶ä»¥å®ç°è‡ªå·±éœ€è¦çš„åŠŸèƒ½ã€‚é¿å…é‡å¤å‘æ˜â€œè½¦è½®â€ã€‚PEAR çš„å‡ºç°å¤§å¤§æé«˜äº† PHP ç¨‹åºçš„å¼€å‘æ•ˆç‡å’Œå¼€å‘è´¨é‡ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦åœ¨ä»£ç ä¸­è¿›è¡Œ Include æ‰èƒ½å¤Ÿä½¿ç”¨ã€‚ä½†åŸºæœ¬å·²ç»æ²¡è½ï¼Œè¢« Composer å–è€Œä»£ä¹‹ã€‚\n\n[PECL](https://pecl.php.net/)ï¼šPHP Extension Community Libraryï¼Œæ˜¯ä½¿ç”¨ C è¯­è¨€å¼€å‘çš„ï¼Œé€šå¸¸ç”¨äºè¡¥å……ä¸€äº›ç”¨ PHP éš¾ä»¥å®Œæˆçš„åº•å±‚åŠŸèƒ½ï¼Œå¾€å¾€éœ€è¦é‡æ–°ç¼–è¯‘æˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®åæ‰èƒ½åœ¨ç”¨æˆ·è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨ã€‚ç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒåº•å±‚çš„æ‰©å±•ã€‚PECL æ˜¯ PEAR çš„ä¸€éƒ¨åˆ†ã€‚\n\nå®˜ç½‘è¯´æ˜ï¼šhttps://pecl.php.net/\n\negï¼šå®‰è£… Reids æ‰©å±• https://pecl.php.net/package/redis\n\n```bash\npecl install redis\n```\n\nComposerï¼šPHP çš„åŒ…ç®¡ç†å·¥å…·ï¼Œä¼˜ç‚¹åœ¨äºä»…éœ€è¦æä¾›ä¸€ä¸ª composer.json æ–‡ä»¶ï¼Œç”³æ˜éœ€è¦ç”¨åˆ°çš„ä¸‰æ–¹åº“ï¼Œä¸€ä¸ªç®€å•çš„å‘½ä»¤å°±èƒ½å°†å…¶ä¾èµ–å…¨éƒ¨è£…å¥½ã€‚\n\nç›®å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ Composer æ¥ç®¡ç† PHP ä»£ç åŒ…ï¼Œä½¿ç”¨ PECL æ¥ç®¡ç† C æ‰©å±•ã€‚\n\n## References\n\n- [å…³äº PHP çš„æ‰©å±• PECLã€PEARã€Composer | su520](http://itman.su520.com/2017/08/23/pecl-%E5%92%8C-pear-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F/)\n\n-- EOF --\n","tags":["php","swoft"]},{"title":"tcpdump å…¥é—¨ä½¿ç”¨","url":"/2020/06/29/tcpdump-getting-started/","content":"\ntcpdump æ˜¯ Unix/Linux ä¸‹çš„æŠ“åŒ…å·¥å…·ï¼Œå¯ä»¥é’ˆå¯¹æŒ‡å®šç½‘å¡ã€ç«¯å£ã€åè®®è¿›è¡ŒæŠ“åŒ…ã€‚\n\n<!-- more -->\n\n## å­—å¤ªå¤šä¸çœ‹\n\n```bash\nsudo tcpdump host api.test and tcp port 80 -A -nn\nsudo tcpdump dst api.test and tcp port 80 -A\n```\n\n## ä¸€ä¸¾æˆåå¤©ä¸‹çŸ¥\n\n```bash\nman tcpdump\n```\n\n## è·å–é€‚é…å™¨åˆ—è¡¨\n\n```bash\ntcpdump -D\ntcpdump --list-interfaces\n\n1.en0 [Up, Running]\n2.p2p0 [Up, Running]\n3.awdl0 [Up, Running]\n4.llw0 [Up, Running]\n5.utun0 [Up, Running]\n6.utun1 [Up, Running]\n7.utun2 [Up, Running]\n8.en5 [Up, Running]\n9.lo0 [Up, Running, Loopback]\n10.bridge0 [Up, Running]\n11.en1 [Up, Running]\n12.en2 [Up, Running]\n13.en3 [Up, Running]\n14.en4 [Up, Running]\n15.gif0 [none]\n16.stf0 [none]\n17.XHC0 [none]\n18.XHC1 [none]\n19.ap1 [none]\n20.XHC20 [none]\n21.VHC128 [none]\n```\n\n## ç›‘å¬é€‚é…å™¨\n\nListen on interface.\n\nmacOS ä¸‹ç›‘å¬é€‚é…å™¨ï¼Œå¿…é¡»ä½¿ç”¨ root æƒé™ã€‚\n\n```bash\nsudo tcpdump -i en0\n\nsudo tcpdump -i 1\n```\n\n## è¿‡æ»¤ç›‘å¬é€‚é…å™¨\n\n### è¿‡æ»¤ä¸»æœº\n\n```bash\n# æŠ“å–æ‰€æœ‰ç»è¿‡ en0ï¼Œç›®çš„æˆ–æºåœ°å€æ˜¯ 192.168.50.1 çš„ç½‘ç»œæ•°æ®\nsudo tcpdump -i en0 host 192.168.50.1\n\n# æºåœ°å€\nsudo tcpdump -i en0 src host 192.168.50.1\n\n# ç›®çš„åœ°å€\nsudo tcpdump -i en0 dst host 192.168.50.1\n```\n\n### è¿‡æ»¤ç«¯å£\n\n```bash\nsudo tcpdump -i en0 port 8080\n```\n\n### è¿‡æ»¤ç½‘æ®µ\n\n```bash\nsudo tcpdump -i en0 net 192.168\n```\n\n### åè®®è¿‡æ»¤\n\n```bash\nsudo tcpdump -i en0 tcp\nsudo tcpdump -i en0 udp\nsudo tcpdump -i en0 ip\nsudo tcpdump -i en0 arp\nsudo tcpdump -i en0 icmp\n```\n\n### ä½¿ç”¨è¡¨è¾¾å¼\n\n- ä¸ï¼š&& æˆ– and\n- æˆ–ï¼š|| æˆ– or\n- éï¼š! æˆ– not\n\n## é€‰é¡¹\n\ntcpdump é»˜è®¤åªä¼šæˆªå–å‰ 96 å­—èŠ‚çš„å†…å®¹ï¼Œè¦æƒ³æˆªå–æ‰€æœ‰çš„æŠ¥æ–‡å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ -s numberï¼Œ number å°±æ˜¯ä½ è¦æˆªå–çš„æŠ¥æ–‡å­—èŠ‚æ•°ï¼Œå¦‚æœæ˜¯ 0 çš„è¯ï¼Œè¡¨ç¤ºæˆªå–æŠ¥æ–‡å…¨éƒ¨å†…å®¹ã€‚\n\n- -i any ç›‘å¬æ‰€æœ‰çš„ç½‘å¡\n- -n ä¸è¦è§£æåŸŸåï¼Œä¼šä¼˜å…ˆæš‚æ—¶ä¸»æœºçš„åå­—\n- -nn ä¸å±•ç¤ºä¸»æœºåå’Œç«¯å£åï¼ˆæ¯”å¦‚ 443 ç«¯å£ä¼šè¢«å±•ç¤ºæˆ httpsï¼‰\n- -A åªä½¿ç”¨ ascii æ‰“å°æŠ¥æ–‡çš„å…¨éƒ¨æ•°æ®ï¼Œä¸è¦å’Œ -X ä¸€èµ·ä½¿ç”¨ã€‚æˆªå– http è¯·æ±‚çš„æ—¶å€™å¯ä»¥ç”¨ sudo tcpdump -nSA port 80\n- -X åŒæ—¶ç”¨ hex å’Œ ascii æ˜¾ç¤ºæŠ¥æ–‡çš„å†…å®¹\n- -XX åŒ -Xï¼Œä½†åŒæ—¶æ˜¾ç¤ºä»¥å¤ªç½‘å¤´éƒ¨\n- -S æ˜¾ç¤ºç»å¯¹çš„åºåˆ—å·ï¼ˆsequence numberï¼‰ï¼Œè€Œä¸æ˜¯ç›¸å¯¹ç¼–å·\n- -s æˆªå–çš„åŒ…å­—èŠ‚é•¿åº¦ï¼Œé»˜è®¤æƒ…å†µä¸‹ tcpdump ä¼šå±•ç¤º 96 å­—èŠ‚çš„é•¿åº¦ï¼Œè¦è·å–å®Œæ•´çš„é•¿åº¦å¯ä»¥ç”¨ -s0 æˆ–è€… -s1600ã€‚\n- -v, -vv, -vvvï¼šæ˜¾ç¤ºæ›´å¤šçš„è¯¦ç»†ä¿¡æ¯\n- -c number æˆªå– number ä¸ªæŠ¥æ–‡ï¼Œç„¶åç»“æŸ\n\n## Flags\n\n> [tcpdump Flags | readthedocs](https://amits-notes.readthedocs.io/en/latest/networking/tcpdump.html#id2)\n\n| TCP Flag | Flag    | Meaning                                                        |\n| -------- | ------- | -------------------------------------------------------------- |\n| SYN      | S       | Syn packet, a session establishment request. ä¸€ä¸ªä¼šè¯å»ºç«‹è¯·æ±‚  |\n| ACK      | A       | Ack packet, acknowledge senderâ€™s data. ç¡®è®¤å‘é€æ–¹çš„æ•°æ®        |\n| FIN      | F       | Finish flag, indication of termination. ç»ˆæ­¢çš„çš„æ ‡è¯†           |\n| RESET    | R       | Reset, indication of immediate abort of conn. æŒ‡ä»¤ç«‹å³ä¸­æ­¢     |\n| PUSH     | P       | Push, immediate push of data from sender. ä»å‘é€æ–¹ç«‹å³æ¨é€æ•°æ® |\n| URGENT   | U       | Urgent, takes precedence over other data. ä¼˜å…ˆäºå…¶ä»–æ•°æ®       |\n| NONE     | A dot . | Placeholder, usually used for ACK. å ä½ç¬¦ï¼Œé€šå¸¸ç”¨äº ACK        |\n\n## å®ä¾‹\n\næŠ“å–æ‰€æœ‰ç»è¿‡ eth1ï¼Œç›®çš„åœ°å€æ˜¯ 192.168.1.254 æˆ– 192.168.1.200 ç«¯å£æ˜¯ 80 çš„ TCP æ•°æ®ï¼š\n\n```bash\nsudo tcpdump -i eth1 '((tcp) and (port 80) and ((dst host 192.168.1.254) or (dst host\n192.168.1.200)))'\n```\n\næŠ“å–æ‰€æœ‰ç»è¿‡ eth1ï¼Œç›®çš„ç½‘ç»œæ˜¯ 192.168ï¼Œä½†ç›®çš„ä¸»æœºä¸æ˜¯ 192.168.1.200 çš„ TCP æ•°æ®ï¼š\n\n```bash\nsudo tcpdump -i eth1 '((tcp) and ((dst net 192.168) and (not dst host 192.168.1.200)))'\n```\n\nåªæŠ“ SYN åŒ…ï¼š\n\n```bash\nsudo tcpdump -i eth1 'tcp[tcpflags] = tcp-syn'\n```\n\næŠ“ SYN, ACKï¼š\n\n```bash\nsudo tcpdump -i eth1 'tcp[tcpflags] & tcp-syn != 0 and tcp[tcpflags] & tcp-ack != 0'\n```\n\næŠ“ DNS è¯·æ±‚æ•°æ®ï¼š\n\n```bash\nsudo tcpdump -i en0 udp dst port 53\n```\n\n-c å‚æ•°å¯¹äºè¿ç»´äººå‘˜æ¥è¯´ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ï¼Œå› ä¸ºæµé‡æ¯”è¾ƒå¤§çš„æœåŠ¡å™¨ï¼Œé äººå·¥ CTRL+C è¿˜æ˜¯æŠ“çš„å¤ªå¤šï¼Œäºæ˜¯å¯ä»¥ç”¨ -c å‚æ•°æŒ‡å®šæŠ“å¤šå°‘ä¸ªåŒ…ï¼š\n\n```bash\nsudo time tcpdump -nn -i en0 'tcp[tcpflags] = tcp-syn' -c 10000 > /dev/null\n```\n\nå®æ—¶æŠ“å–ç«¯å£å· 8000 çš„ GET åŒ…ï¼Œç„¶åå†™å…¥ GET.logï¼š\n\n```bash\nsudo tcpdump -i eth0 '((port 8000) and (tcp[(tcp[12]>>2):4]=0x47455420))' -nnAl -w /tmp/GET.log\n```\n\n## ä¸‰æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹\n\n### TCP è¿æ¥å»ºç«‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰\n\nå®¢æˆ·ç«¯ Aï¼ŒæœåŠ¡å™¨ Bï¼Œåˆå§‹åºå· seqï¼Œç¡®è®¤å· ackã€‚\n\nåˆå§‹çŠ¶æ€ï¼šB å¤„äºç›‘å¬çŠ¶æ€ï¼ŒA å¤„äºæ‰“å¼€çŠ¶æ€ã€‚\n\n- A -> B : seq = x ï¼ˆA å‘ B å‘é€è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼ŒA è¿›å…¥åŒæ­¥å‘é€çŠ¶æ€ SYN-SENTï¼‰\n- B -> A : ack = x + 1,seq = y ï¼ˆB æ”¶åˆ°æŠ¥æ–‡æ®µï¼Œå‘ A å‘é€ç¡®è®¤ï¼ŒB è¿›å…¥åŒæ­¥æ”¶åˆ°çŠ¶æ€ SYN-RCVDï¼‰\n- A -> B : ack = y + 1 ï¼ˆA æ”¶åˆ° B çš„ç¡®è®¤åï¼Œå†æ¬¡ç¡®è®¤ï¼ŒA è¿›å…¥è¿æ¥çŠ¶æ€ ESTABLISHEDï¼‰\n\nè¿æ¥åçš„çŠ¶æ€ï¼šB æ”¶åˆ° A çš„ç¡®è®¤åï¼Œè¿›å…¥è¿æ¥çŠ¶æ€ ESTABLISHEDã€‚\n\nä¸ºä»€ä¹ˆè¦æ¡æ‰‹è¦ä¸‰æ¬¡ï¼Ÿé˜²æ­¢å¤±æ•ˆçš„è¿æ¥è¯·æ±‚çªç„¶ä¼ åˆ°æœåŠ¡å™¨ç«¯ï¼Œè®©æœåŠ¡å™¨ç«¯è¯¯è®¤ä¸ºè¦å»ºç«‹è¿æ¥ã€‚\n\n### TCP è¿æ¥é‡Šæ”¾ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰\n\n- A -> B : seq = u ï¼ˆA å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œè¿›å…¥ç»ˆæ­¢ç­‰å¾… 1 çŠ¶æ€ FIN-WAIT-1ï¼‰\n- B -> A : ack = u + 1,seq = v ï¼ˆB æ”¶åˆ°æŠ¥æ–‡æ®µï¼Œå‘å‡ºç¡®è®¤ï¼ŒTCP å¤„äºåŠå…³é—­ï¼ŒB è¿˜å¯å‘ A å‘æ•°æ®ï¼ŒB è¿›å…¥å…³é—­ç­‰å¾…çŠ¶æ€ WAITï¼‰\n- B -> A : ack = u + 1,seq = w ï¼ˆB é‡å¤å‘é€ç¡®è®¤å·ï¼Œè¿›å…¥æœ€åç¡®è®¤çŠ¶æ€ LAST-ACKï¼‰\n- A -> B : ack = w + 1,seq = u + 1 ï¼ˆA å‘å‡ºç¡®è®¤ï¼Œè¿›å…¥æ—¶é—´ç­‰å¾…çŠ¶æ€ TIME-WAITï¼‰\n\nç»è¿‡æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨è®¾ç½®çš„æ—¶é—´ 2MSL åï¼ŒA æ‰è¿›å…¥ CLOSED çŠ¶æ€ã€‚\n\nä¸ºä»€ä¹ˆ A è¿›å…¥ TIME-WAIT åå¿…é¡»ç­‰å¾… 2MSLï¼š\n\n- ä¿è¯ A å‘é€çš„æœ€åä¸€ä¸ª ACK æŠ¥æ–‡æ®µèƒ½è¾¾åˆ° B\n- é˜²æ­¢å¤±æ•ˆçš„æŠ¥æ–‡æ®µå‡ºç°åœ¨è¿æ¥ä¸­\n\n### éœ€è¦æ€è€ƒçš„é—®é¢˜\n\né—®é¢˜ 1: è¯·è¯¦ç»†æè¿°ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹\nè¦æ±‚ç†Ÿæ‚‰ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„æœºåˆ¶ï¼Œè¦æ±‚ç”»å‡ºçŠ¶æ€å›¾ã€‚\n\né—®é¢˜ 2: å››æ¬¡æŒ¥æ‰‹ä¸­ TIME_WAIT çŠ¶æ€å­˜åœ¨çš„ç›®çš„æ˜¯ä»€ä¹ˆ?\nè¿™ä¸ªé—®é¢˜æ˜¯ç”»å‡ºå››æ¬¡æŒ¥æ‰‹çŠ¶æ€å›¾ï¼Œä¼šå¼•ç”³é—®ä½ ã€‚ä¸æ’é™¤è¿˜ä¼šé—®ä¸ºä»€ä¹ˆå››æ¬¡æŒ¥æ‰‹æ˜¯å››æ¬¡ä¸æ˜¯äºŒæ¬¡ç­‰é—®é¢˜ã€‚æœ€å¥½æ˜¯æŠŠç›¸å…³é—®é¢˜å‡æŒæ¡ã€‚\n\né—®é¢˜ 3: TCP æ˜¯é€šè¿‡ä»€ä¹ˆæœºåˆ¶ä¿éšœå¯é æ€§çš„?\nä»å››ä¸ªæ–¹é¢è¿›è¡Œå›ç­”ï¼ŒACK ç¡®è®¤æœºåˆ¶ã€è¶…æ—¶é‡ä¼ ã€æ»‘åŠ¨çª—å£ä»¥åŠæµé‡æ§åˆ¶ï¼Œæ·±å…¥çš„è¯è¦æ±‚è¯¦ç»†è®²å‡ºæµé‡æ§åˆ¶çš„æœºåˆ¶ã€‚\n\n### æŠ“åŒ…åˆ†ææ¡æ‰‹è¿‡ç¨‹\n\n```bash\nsudo tcpdump -i en0 host www.qq.com and tcp -S -c 50\n```\n\n![tcpdump æŠ“åŒ…åˆ†ææ¡æ‰‹è¿‡ç¨‹](https://user-images.githubusercontent.com/9289792/87918568-3377e280-caa9-11ea-831a-95000e308ad8.png)\n\n## References\n\n- [macOS ä¸‹ä½¿ç”¨ tcpdump æŠ“åŒ… | jianshu](https://www.jianshu.com/p/a57a5b0e58f0)\n- [tcpdump | readthedocs](https://amits-notes.readthedocs.io/en/latest/networking/tcpdump.html)\n- [TCP ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ä¸ TcpDump æŠ“åŒ…åˆ†æ | æ¸…æ³‰ç™½çŸ³](https://www.cnblogs.com/fonxian/p/6565209.html)\n\n-- EOF --\n","tags":["linux"]},{"title":"é…ç½® Laradock PhpStorm Xdubug","url":"/2020/05/26/config-laradock-phpstorm-xdubug/","content":"\næœ€è¿‘åœ¨å­¦ä¹  Yii2 çš„æºç ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•æ‰€ä»¥ç ”ç©¶ä¸‹ Laradock + PhpStorm + Xdubug çš„é…ç½®ã€‚\n\n## ç¯å¢ƒ\n\n- macOS\n- Laradock v10.0\n\nè¯·ä¿è¯ Laradock æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥å‡å°‘ä¸å¿…è¦çš„éº»çƒ¦ã€‚ä¹Ÿæ¨èä½¿ç”¨æˆ‘ç²¾ç®€è¿‡çš„é¡¹ç›® [imzyf/my-dock | github](https://github.com/imzyf/my-dock)ã€‚\n\n<!-- more -->\n\n## é…ç½® Laradock\n\n```bash\nvim .env\n\nWORKSPACE_INSTALL_XDEBUG=true\nPHP_FPM_INSTALL_XDEBUG=true\n```\n\né‡æ–°ç¼–è¯‘ php-fpm å’Œ workspace å®¹å™¨ï¼š\n\n```bash\ndocker-compose build php-fpm workspace\n```\n\n## é…ç½® PhpStorm\n\n### é…ç½® Docker\n\nPreferences > Build, Execution, Deploymnent > Docker\n\n![docker](https://user-images.githubusercontent.com/9289792/82999144-302d2100-a03b-11ea-8a21-08bc67838fc2.png)\n\n### é…ç½® PHP\n\nPreferences > Languages & Frameworks > PHPï¼ŒPHP CLI Interpreter ç‚¹ `...`\n\n![php 1](https://user-images.githubusercontent.com/9289792/82997395-e7746880-a038-11ea-98ca-d68052d5bd22.png)\n\nç‚¹å‡» +ï¼Œé€‰æ‹© From Docker, Vagrant...\n\n![php 2](https://user-images.githubusercontent.com/9289792/82997724-55209480-a039-11ea-8235-4a0479aeb832.png)\n\nDebugger å¯ä»¥æ˜¾ç¤ºå‡º Xdebugã€‚\n\n### é…ç½® Servers\n\nPreferences > Languages & Frameworks > PHP > Servers\n\n![server](https://user-images.githubusercontent.com/9289792/82998171-f7d91300-a039-11ea-89e7-50b79664b0f6.png)\n\næ³¨æ„ï¼šName å¿…é¡»å¡«å†™ Laradock ä¸­çš„ PHP_IDE_CONFIG ä¹Ÿå°±å°±æ˜¯ `laradock`ã€‚\n\n### é…ç½® Xdebug\n\nPreferences > Languages & Frameworks > PHP > Debugã€‚ç‚¹å‡» `Validate`ï¼Œå¡«å†™ã€‚\n\n![Xdebug](https://user-images.githubusercontent.com/9289792/82998451-530b0580-a03a-11ea-925a-1770df95eb66.png)\n\nrun > Edit Configurationsï¼Œæ·»åŠ  PHP Remote Debugã€‚IDE key ä¸º `PHPSTORM`ã€‚\n\n![Xdebug2](https://user-images.githubusercontent.com/9289792/82998663-95ccdd80-a03a-11ea-9dc4-5d00d012e7df.png)\n\n## é…ç½® Chrome\n\nä¸‹è½½æ’ä»¶ [Xdebug helper](https://chrome.google.com/webstore/detail/eadndfjplgieldjbigjakmdgkmoaaaoc)ï¼Œå³é”®å›¾æ ‡ é…ç½®ã€‚\n\n![chrome](https://user-images.githubusercontent.com/9289792/82998865-d3316b00-a03a-11ea-94cc-a6642fa0cdbf.png)\n\n## enjoy\n\n![start](https://user-images.githubusercontent.com/9289792/82999306-636fb000-a03b-11ea-9c0f-a059fbc47fd3.png)\n\nå¼€å¯ debugï¼Œç„¶åè®¿é—®é¡µé¢ã€‚\n\n![fly](https://user-images.githubusercontent.com/9289792/82999463-96b23f00-a03b-11ea-922a-4c91169628a9.png)\n\nèŠœæ¹–èµ·é£ã€‚\n\n## References\n\n- [Laradock ä½¿ç”¨ PhpStorm Debug ä»£ç  | learnku](https://learnku.com/articles/24389)\n- [Set Debugger Using Xdebug With PHPStorm & Laradock | medium](https://medium.com/@chenpohsun_12588/set-debugger-using-xdebug-with-phpstorm-laradock-454e8c2ad0d9)\n\n-- EOF --\n","tags":["php","phpstorm"]},{"title":"PHP float ç²¾åº¦","url":"/2020/05/09/php-float-precision/","content":"\n## å®ä¾‹ 1\n\n```php\n$a = 1.1;\nvar_dump(gettype($a)); // string(6) \"double\"\nvar_dump($a); // float(1.1)\n```\n\n## å®ä¾‹ 2\n\n```php\n$a = \"123456789.1100110011\";\n$a = (float) $a;\nvar_dump($a); // float(123456789.11001)\nvar_dump(sprintf('%.11f', $a)); // string(21) \"123456789.11001099646\"\n\n$b = 123456789.11001;\nvar_dump($b); // float(123456789.11001)\nvar_dump(sprintf('%.11f', $b)); // string(21) \"123456789.11000999808\"\n\n$c = '123456789.1100110011';\n$c = (float) $c;\nvar_dump($c); // float(123456789.11001)\n$c = (string) $c;\nvar_dump($c); // string(15) \"123456789.11001\"\n$c = (float) $c;\nvar_dump($c); // float(123456789.11001)\nvar_dump(sprintf('%.11f', $c)); // string(21) \"123456789.11000999808\"\n\n\nvar_dump($a === $b); // bool(false) - è¯´æ˜ $a è¿˜æ˜¯æºå¸¦ç€ float çš„ç²¾åº¦\nvar_dump($b === $c); // bool(true)\n```\n\n## å®ä¾‹ 3\n\n```php\n// # 1\nvar_dump(120085 === 1200.85 * 100); // bool(false)\n\n// # 2\nvar_dump(120085 == 1200.85 * 100); // bool(false)\n\n// # 3\nvar_dump(120081 == 1200.81 * 100); // bool(true)\n\n// # 4\nvar_dump(120085 - 1200.85 * 100); // float(1.4551915228367E-11)\n```\n\n## å®ä¾‹ 4\n\n```php\n$a = 0.1;\n$b = 0.9;\n$c = 1;\n\nvar_dump(($a + $b) == $c); // bool(true)\nvar_dump(($c - $b) == $a); // bool(false)\n\nvar_dump(sprintf('%.20f', $a + $b)); // string(22) \"1.00000000000000000000\"\nvar_dump(sprintf('%.20f', $c - $b)); // string(22) \"0.09999999999999997780\"\n\nvar_dump((0.5 - 0.25) === 0.25); // bool(true) 0.5 äºŒè¿›åˆ¶ 0.1ï¼Œ0.25 äºŒè¿›åˆ¶ 0.01\nvar_dump((0.25 + 0.25) === 0.5); // bool(true)\n```\n\n## åˆ†æ\n\nçœ‹æ–‡æ¡£ï¼š\n\n- [gettype | php.net](https://www.php.net/manual/zh/function.gettype.php)\n- [Float æµ®ç‚¹å‹ | php.net](https://www.php.net/manual/zh/language.types.float.php)\n\n> æµ®ç‚¹å‹ï¼ˆä¹Ÿå«æµ®ç‚¹æ•° floatï¼ŒåŒç²¾åº¦æ•° double æˆ–å®æ•° realï¼‰\n> æµ®ç‚¹æ•°çš„å­—é•¿å’Œå¹³å°ç›¸å…³ï¼Œå°½ç®¡é€šå¸¸æœ€å¤§å€¼æ˜¯ 1.8e308 å¹¶å…·æœ‰ 14 ä½åè¿›åˆ¶æ•°å­—çš„ç²¾åº¦ï¼ˆ64 ä½ IEEE æ ¼å¼ï¼‰ã€‚\n> æ‰€ä»¥æ°¸è¿œä¸è¦ç›¸ä¿¡æµ®ç‚¹æ•°ç»“æœç²¾ç¡®åˆ°äº†æœ€åä¸€ä½ï¼Œä¹Ÿæ°¸è¿œä¸è¦æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœç¡®å®éœ€è¦æ›´é«˜çš„ç²¾åº¦ï¼Œåº”è¯¥ä½¿ç”¨ä»»æ„ç²¾åº¦æ•°å­¦å‡½æ•°æˆ–è€… gmp å‡½æ•°ã€‚\n\nå®ä¾‹ 1ï¼šè¯´æ˜åœ¨ PHP ä¸­ `float` ä¸ `dobule` æ˜¯ä¸€å›äº‹ã€‚åœ¨ C çº§åˆ«ï¼Œæ‰€æœ‰å†…å®¹éƒ½å­˜å‚¨ä¸º doubleã€‚\n\nå®ä¾‹ 2ã€3ï¼šfloat çš„æ¯”è¾ƒç»“æœæ˜¯ _è§†æƒ…å†µè€Œå®š_ï¼Œ**æ°¸è¿œä¸è¦ç›¸ä¿¡æµ®ç‚¹æ•°ç»“æœç²¾ç¡®åˆ°äº†æœ€åä¸€ä½**ã€‚\n\nå®ä¾‹ 4ï¼šå‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºæµ®ç‚¹æ•°è®¡ç®—æ¶‰åŠç²¾åº¦ï¼Œå½“æµ®ç‚¹æ•°è½¬ä¸ºäºŒè¿›åˆ¶æ—¶æœ‰å¯èƒ½ä¼šé€ æˆç²¾åº¦ä¸¢å¤±ã€‚\n\n## æµ®ç‚¹æ•°è½¬äºŒè¿›åˆ¶æ–¹æ³•\n\næ•´æ•°éƒ¨åˆ†é‡‡ç”¨é™¤ä»¥ 2 å–ä½™æ–¹æ³•ï¼Œå°æ•°éƒ¨åˆ†é‡‡ç”¨ä¹˜ä»¥ 2 å–æ•´æ–¹æ³•ã€‚\n\nä¾‹å¦‚ï¼šæŠŠæ•°å­— 8.5 è½¬ä¸ºäºŒè¿›åˆ¶ï¼š\n\næ•´æ•°éƒ¨åˆ†æ˜¯ 8ï¼š\n\n- 8/2=4 8%2=0\n- 4/2=2 4%2=0\n- 2/2=1 2%2=0\n- 1 æ¯” 2 å°ï¼Œå› æ­¤ä¸éœ€è¦è®¡ç®—ä¸‹å»ï¼Œæ•´æ•° 8 çš„äºŒè¿›åˆ¶ä¸º 1000\n\nå°æ•°éƒ¨åˆ†æ˜¯ 0.5ï¼š\n\n- 0.5x2 = 1.0\n- å› å–æ•´åå°æ•°éƒ¨åˆ†ä¸º 0ï¼Œå› æ­¤ä¸éœ€è¦å†è®¡ç®—ä¸‹å»ï¼Œå°æ•° 0.5 çš„äºŒè¿›åˆ¶ä¸º 0.1\n\n`8.5` çš„äºŒè¿›åˆ¶ä¸º `1000.1`ã€‚\n\nè®¡ç®—æ•°å­— 0.9 çš„äºŒè¿›åˆ¶ï¼š\n\n- 0.9x2 = 1.8\n- 0.8x2 = 1.6\n- 0.6x2 = 1.2\n- 0.2x2 = 0.4\n- 0.4x2 = 0.8\n- 0.8x2 = 1.6\n- ... ä¹‹åä¸æ–­å¾ªç¯ä¸‹å»ï¼Œå½“æˆªå–ç²¾åº¦ä¸º N æ—¶ï¼ŒN åçš„æ•°ä¼šè¢«èˆå»ï¼Œå¯¼è‡´ç²¾åº¦ä¸¢å¤±ã€‚\n\nå®ä¾‹ 4 ä¸­ `0.9` åœ¨è½¬ä¸ºäºŒè¿›åˆ¶æ—¶ç²¾åº¦ä¸¢å¤±ï¼Œå¯¼è‡´æ¯”è¾ƒæ—¶å‡ºç°é”™è¯¯ã€‚\n\n> ä½ çœ‹ä¼¼æœ‰ç©·çš„å°æ•°ï¼Œåœ¨è®¡ç®—æœºçš„äºŒè¿›åˆ¶è¡¨ç¤ºé‡Œå´æ˜¯æ— ç©·çš„ã€‚\n\nè®¡ç®—æ•°å­— 0.25 çš„äºŒè¿›åˆ¶ï¼š\n\n- 0.25x2 = 0.5\n- 0.5x2 = 1.0\n\n`0.25` çš„äºŒè¿›åˆ¶ä¸º `0.01`ã€‚\n\n## float æ¯”è¾ƒæ–¹æ³•\n\n### ä½¿ç”¨ round æ–¹æ³•å¤„ç†åå†æ¯”è¾ƒ\n\n```php\nvar_dump(120085 == round(1200.85 * 100));\n// bool(true)\n\nvar_dump(12008.5 === round(1200.85 * 10, 1));\n// bool(true)\n\nvar_dump(1200.85 === round(1200.8499999, 2));\n// bool(true)\n```\n\n### ä½¿ç”¨é«˜ç²¾åº¦è¿ç®—æ–¹æ³•\n\nè§æ–‡æ¡£ [BC æ•°å­¦ å‡½æ•° | php.net](https://www.php.net/manual/zh/ref.bc.php)ã€‚\n\n```php\nvar_dump((1 - 0.9) == 0.1); // bool(false)\nvar_dump(bcsub(1, 0.9, 40) == 0.1); // bool(true)\nvar_dump((float) bcsub(1, 0.9, 40) === 0.1); // bool(true)\n```\n\n## References\n\n- [PHP æµ®ç‚¹å‹ä¸æ•´å‹æ¯”è¾ƒçš„å°å‘ | codecasts](https://www.codecasts.com/blog/post/php-tricky-floats-comparison-with-int)\n- [php æµ®ç‚¹æ•°æ¯”è¾ƒæ–¹æ³• | csdn](https://blog.csdn.net/fdipzone/article/details/48106065)\n- [PHP æµ®ç‚¹æ•°çš„ä¸€ä¸ªå¸¸è§é—®é¢˜çš„è§£ç­” | laruence](https://www.laruence.com/2013/03/26/2884.html)\n\n-- EOF --\n","tags":["php"]},{"title":"PHP Call to undefined function ftp_ssl_connect","url":"/2020/05/08/php-call-to-undefined-function-ftp-ssl-connect/","content":"\n## ç¯å¢ƒ\n\n- CentOS 7.4\n- PHP 7.1.12 ç¼–è¯‘å®‰è£…\n\n<!-- more -->\n\n## å¤ç°\n\n```bash\n/usr/local/php71/bin/php -r \"ftp_ssl_connect('server1.example.com');\"\n\nPHP Fatal error:  Uncaught Error: Call to undefined function ftp_ssl_connect() in Command line code:1\n```\n\n## åŸå› \n\nçœ‹æ–‡æ¡£ï¼š[ftp_ssl_connect | php.net](https://www.php.net/ftp_ssl_connect)\n\n1. ftp æ‰©å±•æ²¡é…ç½®\n2. opensll æ²¡æœ‰å¯ç”¨\n\n## è§£å†³æ–¹æ¡ˆ\n\n```bash\n# /root/php-7.1.12/ is php source dir\ncd /root/php-7.1.12/ext/ftp/\n\n# /usr/local/php71/ is php dir\n/usr/local/php71/bin/phpize\n\n# the param --with-openssl-dir is very important\n./configure --with-php-config=/usr/local/php71/bin/php-config --with-openssl-dir\n\nmake\nmake install\n\nvim /usr/local/php71/lib/php.ini\n# add last line\nextension=ftp.so\n\nservice php-fpm reload\n```\n\nè¿™è¦æ³¨æ„ä¸€å®šè¦åŠ ä¸Š `--with-openssl-dir`ï¼Œä¸ç„¶ä¼š `FTPS support => disabled`ã€‚\n\nå½“ä¸æ¸…æ¥š `./configure` æœ‰ä»€ä¹ˆå‚æ•°æ—¶ï¼Œå¯ä»¥æ‰§è¡Œ `./configure --help`ã€‚\n\n## æ£€æŸ¥\n\n```bash\n# method 1\n/usr/local/php71/bin/php -r \"phpinfo();\" | grep FTP\n\nFTP support => enabled\nFTPS support => enabled\n\n# method 2\n/usr/local/php71/bin/php -r \"ftp_ssl_connect('server1.example.com');\"\n\nPHP Warning:  ftp_ssl_connect(): php_network_getaddresses: getaddrinfo failed: Name or service not known in Command line code on line 1\n```\n\n## References\n\n- [Fatal error: Call to undefined function ftp_ssl_connect() | stackoverflow](https://stackoverflow.com/questions/35085677/fatal-error-call-to-undefined-function-ftp-ssl-connect/61683198#61683198)\n\n-- EOF --\n","tags":["php"]},{"title":"åœ¨ CentOS ç¼–è¯‘å®‰è£… PHP","url":"/2020/04/29/make-install-php-on-centos/","content":"\n## ç¯å¢ƒ\n\n- CentOS 7.4\n- PHP 5.6.40\n\n<!-- more -->\n\n## ä¸‹è½½ PHP\n\næºç åœ°å€ï¼šhttps://www.php.net/releases/#5.6.40\n\n```bash\ncd /tmp\nwget https://www.php.net/distributions/php-5.6.40.tar.gz --no-check-certificate\ntar zxvf php-5.6.40.tar.gz\n```\n\n## å®‰è£…ç›¸å…³åº“\n\n```bash\nyum groupinstall \"Development tools\"\n```\n\n## é…ç½®\n\n> [æ ¸å¿ƒé…ç½®é€‰é¡¹åˆ—è¡¨ | php.net](https://www.php.net/manual/zh/configure.about.php)\n\n```bash\n# æŸ¥çœ‹é…ç½®å‚æ•°\n./configure --help\n./configure --help | grep openssl\n\n./configure --prefix=/usr/local/php56 --with-openssl --enable-mbstring --enable-ftp\n```\n\n## ç¼–è¯‘å®‰è£…\n\n```bash\n# 4æ ¸ç¼–è¯‘\nmake -j4\nmake install\n```\n\n-- EOF --\n","tags":["php","centos"]},{"title":"åœ¨ macOS ç¼–è¯‘å®‰è£… PHP","url":"/2020/04/28/make-install-php-on-macos/","content":"\n## ç¯å¢ƒ\n\n- macOS 10.15.4\n- PHP 5.6.40\n\n<!-- more -->\n\n## ä¸‹è½½ PHP\n\næºç åœ°å€ï¼šhttps://www.php.net/releases/#5.6.40\n\n```bash\ncd /tmp\nwget https://www.php.net/distributions/php-5.6.40.tar.gz --no-check-certificate\ntar zxvf php-5.6.40.tar.gz\n```\n\n## å®‰è£…ç›¸å…³åº“\n\n```bash\n# libiconv\nbrew install libiconv\n\n# openssl\nbrew install openssl\n\n# zlib å®ç° GZIP å‹ç¼©é¡µé¢\nbrew install zlib\n```\n\n## é…ç½®\n\n> [æ ¸å¿ƒé…ç½®é€‰é¡¹åˆ—è¡¨ | php.net](https://www.php.net/manual/zh/configure.about.php)\n\n```bash\n# æŸ¥çœ‹é…ç½®å‚æ•°\n./configure --help\n./configure --help | grep openssl\n\n# æ³¨æ„æ›¿æ¢ --prefix\n./configure --prefix=/usr/local/php56 \\\n--enable-fpm \\\n--enable-debug \\\n--enable-gd-native-ttf \\\n--with-mysqli=mysqlnd \\\n--with-pdo-mysql=mysqlnd \\\n--with-openssl=(brew --prefix openssl) \\\n--enable-mbstring \\\n--with-zlib=(brew --prefix zlib) \\\n--enable-zip \\\n--with-iconv=(brew --prefix libiconv) \\\n--with-curl \\\n--enable-soap \\\n--enable-ftp\n```\n\n## ç¼–è¯‘å®‰è£…\n\n```bash\n# 4æ ¸ç¼–è¯‘\nmake -j4\nmake install\n```\n\n## é‡åˆ°çš„é—®é¢˜\n\n### \"\\_libiconv\", referenced from\n\n```bash\nUndefined symbols for architecture x86_64:\n  \"_libiconv\", referenced from:\n      _php_iconv_string in iconv.o\n      __php_iconv_strlen in iconv.o\n      __php_iconv_substr in iconv.o\n      __php_iconv_strpos in iconv.o\n      __php_iconv_mime_encode in iconv.o\n      __php_iconv_appendl in iconv.o\n      _php_iconv_stream_filter_append_bucket in iconv.o\n      ...\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [sapi/cli/php] Error 1\n```\n\nè§£å†³æ–¹æ³•ï¼šæ‰“å¼€ `Makefile` æ‰¾åˆ° `EXTRA_LDFALGS` `EXTRA_LDFLAGS_PROGRAMS` åˆ é™¤åé¢çš„ `-L/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib`\n\n```bash\nvim Makefile\n\nEXTRA_LDFLAGS = -L/usr/local/opt/openssl/lib -L/usr/local/opt/zlib/lib -L/usr/local/opt/libiconv/lib\nEXTRA_LDFLAGS_PROGRAM = -L/usr/local/opt/openssl/lib -L/usr/local/opt/zlib/lib -L/usr/local/opt/libiconv/lib\n\nmake clean && make -j4\nmake install\n\nphp71 --ri curl\n```\n\n### Please specify the install prefix of iconv with --with-iconv=\\<DIR\\>\n\n```bash\nbrew install libiconv\n```\n\n### Cannot find OpenSSL's\n\n> configure: error: Cannot find OpenSSL's `<evp.h>`\n\n```bash\nbrew install openssl\n```\n\n```bash\n./configure --with-openssl-dir=(brew --prefix openssl)\n```\n\n## References\n\n- [Mac Pro ç¼–è¯‘å®‰è£… PHP 5.6.21 åŠ é—®é¢˜æ±‡æ€» | cnblogs](https://www.cnblogs.com/52php/p/5683356.html)\n- [PHP7 ç¼–è¯‘å®‰è£… | cloud.tencent](https://cloud.tencent.com/developer/article/1047033)\n\n-- EOF --\n","tags":["php","mac"]},{"title":"vim å¸¸ç”¨å‘½ä»¤","url":"/2020/04/28/vim-common-commands/","content":"\n## å¸¸ç”¨\n\n- å…¨é€‰ï¼ˆé«˜äº®æ˜¾ç¤ºï¼‰ï¼šæŒ‰ esc åï¼Œç„¶å `ggvG` æˆ–è€… `ggVG`\n- å…¨éƒ¨å¤åˆ¶ï¼šæŒ‰ esc åï¼Œç„¶å `ggyG`\n- å…¨éƒ¨åˆ é™¤ï¼šæŒ‰ esc åï¼Œç„¶å `dG`\n\n<!-- more -->\n\n## ç²˜è´´åˆ°ç»ˆç«¯ vim ç¼©è¿›é”™ä¹±\n\nåœ¨ vim ä¸­ç²˜è´´å‰å…ˆè¾“å…¥ï¼š\n\n```bash\n:set paste\n```\n\n## é…ç½®\n\n### ä¸­æ–‡ä¹±ç \n\næ–¹æ¡ˆä¸€ï¼š\n\n```bash\n# vim esc\n:set encoding=utf8\n```\n\næ–¹æ¡ˆäºŒï¼š\n\n```bash\nvim ~/.vimrc\n\n# æ·»åŠ ä»¥ä¸‹\nset fileencodings=utf8,gb2312,gb18030,gbk,ucs-bom,cp936,latin1\nset enc=utf8\n```\n\næ–¹æ¡ˆä¸‰ï¼š\n\nå¦‚æœæ˜¯ä½¿ç”¨ secureCRTï¼Œåœ¨è¿œç¨‹ä¸»æœºä¸Š vim æ‰“å¼€ä¸­æ–‡æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ secureCRT å¯èƒ½ä¹±ç ï¼Œéœ€è¦è®¾ç½® Options-Session Option-Terminal-Appearance çš„å­—ç¬¦ç¼–ç ï¼ˆæ¯”å¦‚è¿™é‡Œæ˜¯ UTF-8ï¼‰ã€‚\n\n## åŸºç¡€å‘½ä»¤\n\n- `gg` æ˜¯è®©å…‰æ ‡ç§»åˆ°é¦–è¡Œï¼Œåœ¨ vim æ‰æœ‰æ•ˆï¼Œvi ä¸­æ— æ•ˆ\n- `v` æ˜¯è¿›å…¥ Visual(å¯è§†ï¼‰æ¨¡å¼\n- `G` å…‰æ ‡ç§»åˆ°æœ€åä¸€è¡Œ\n- `d` åˆ é™¤é€‰ä¸­å†…å®¹\n- `y` å¤åˆ¶é€‰ä¸­å†…å®¹åˆ° 0 å·å¯„å­˜å™¨\n- `\"+y` å¤åˆ¶é€‰ä¸­å†…å®¹åˆ°ï¼‹å¯„å­˜å™¨ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„å‰ªè´´æ¿ï¼Œä¾›å…¶ä»–ç¨‹åºç”¨\n\n## References\n\n- [vim å…¨é€‰ï¼Œå…¨éƒ¨å¤åˆ¶ï¼Œå…¨éƒ¨åˆ é™¤ | cnblogs](https://www.cnblogs.com/yangzailu/p/11531972.html)\n- [ç”¨ vim æ‰“å¼€åä¸­æ–‡ä¹±ç æ€ä¹ˆåŠï¼Ÿ | zhihu](https://www.zhihu.com/question/22363620)\n\n-- EOF --\n","tags":["vim"]},{"title":"PHP GD å…¥é—¨ä½¿ç”¨","url":"/2020/04/16/php-gd-getting-started/","content":"\n## GD å®‰è£…ã€é…ç½®\n\nè€ƒè™‘åˆ°åŠŸèƒ½éœ€è¦ä½¿ç”¨å­—ä½“åº“ã€å›¾åƒæ ¼å¼ jpeg\\png æ‰€ä»¥å…ˆå®‰è£…ç›¸å…³åº“ã€‚\n\n### å­—ä½“åº“ FreeType 2\n\nhttps://www.freetype.org/\n\n```bash\n# åœ¨ä¸´æ—¶ç›®å½•è¿›è¡Œæ“ä½œ\ncd /tmp\n\n# https://download.savannah.gnu.org/releases/freetype/\nwget http://download.savannah.gnu.org/releases/freetype/freetype-2.10.1.tar.gz\n\ntar zxvf freetype-2.10.1.tar.gz\n\ncd freetype-2.10.1\n\n./configure --prefix=/usr/local/freetype && make && make install\n```\n\n### å›¾åƒæ ¼å¼ jpeg\n\n```bash\ncd /tmp\n\n# http://www.ijg.org/\nwget http://www.ijg.org/files/jpegsrc.v9d.tar.gz\n\ntar zxvf jpegsrc.v9.tar.gz\n\ncd jpeg-9/\n\n./configure --prefix=/usr/local/jpeg && make && make install\n```\n\n### å›¾åƒæ ¼å¼ png\n\n```bash\ncd /tmp\n\n# http://www.libpng.org/pub/png/libpng.html\nwget https://download.sourceforge.net/libpng/libpng-1.6.37.tar.gz --no-check-certificate\n\ntar zxvf libpng-1.6.37.tar.gz\n\ncd libpng-1.6.37\n\n./configure --prefix=/usr/local/libpng && make && make install\n```\n\n### å®‰è£… GD\n\n![GD å®‰è£…ã€é…ç½®](https://user-images.githubusercontent.com/9289792/80169757-e35bc200-8618-11ea-8851-a4bc7411f6f9.png)\n\nèƒŒæ™¯ï¼šæœåŠ¡å™¨ php 7.1 é€šè¿‡ç¼–è¯‘è‡ªè¡Œå®‰è£…çš„ã€‚\n\n```bash\n# åˆ° php æºç  dir\ncd {php-source-dir}/ext/gd/\n\n# ç”Ÿæˆ configure æ–‡ä»¶\n{php-dir}/bin/phpize\n\n# æŸ¥çœ‹å¯ç”¨å‚æ•°\n./configure --help\n\n# è®¾ç½®å‚æ•°\n./configure --with-php-config={php-dir}/bin/php-config --with-jpeg-dir=/usr/local/jpeg --with-png-dir=/usr/local/libpng --with-freetype-dir=/usr/local/freetype --enable-gd-native-ttf\n\nmake && make install\n\nvim {php-dir}/lib/php.ini\n\n# æœ€åº•ä¸‹å¢åŠ ä¸€è¡Œ\nextension=gd.so\n\nservice php-fpm reload\n\n# æ£€æŸ¥\nphp -r \"var_dump(gd_info());\"\n```\n\nç¼–è¯‘å‰ä¸€å®šè¦è®°å¾— `make clean` æ¸…é™¤ä¸Šæ¬¡çš„ç¼–è¯‘å†…å®¹ï¼Œå°¤å…¶æ˜¯å·²ç»ç¼–è¯‘å®‰è£…è¿‡çš„ã€‚\n\n## å®ä¾‹\n\n```php\n$pic = imagecreate($maxWidth, $maxHeight);\n//å®šä¹‰é¢œè‰²\n$black = imagecolorallocate($pic, 0, 0, 0);\n$white = imagecolorallocate($pic, 255, 255, 255);\n\n// ç™½åº•\nimagefill($pic, 0, 0, $white);\n\n// æ‰“æ°´å°\nimagettftext($pic, $fontSize, 30, $x, $y, $lightGrey, $fontFile, $mark);\n\nimagejpeg($pic, $resultPath, 100);\nimagedestroy($pic);\n```\n\næ–‡å­—å³å¯¹é½ï¼š\n\n```php\n// https://php.golaravel.com/function.imagettfbbox.html\n$bbox = imagettfbbox($fontSize, 0, $fontFile, $text);\n\n$offset = $colWidth - $bbox[2] - 50;\n\nimagettftext($pic, $fontSize, 0, $x + $offset, $y, $_color, $fontFile, $text);\n```\n\n## é‡åˆ°çš„æŠ¥é”™\n\n### Call to undefined function imagettftext()\n\nå‡ºç°æ­¤é—®é¢˜åº”è¯¥å°±æ˜¯ `FreeType` æ²¡æœ‰è£…å¥½ï¼Œå¯å‚è€ƒä¸Šé¢çš„æ­¥éª¤ã€‚\n\n## References\n\n- [php ä¸­æ–‡æ‰‹å†Œ | golaravel](https://php.golaravel.com/intro.image.html)\n- [PHP Fatal error: Call to undefined function imagettftext() | stackoverflow](https://stackoverflow.com/questions/7290958/php-fatal-error-call-to-undefined-function-imagettftext)\n\n-- EOF --\n","tags":["php"]},{"title":"PHP Code Snippet","url":"/2020/04/15/php-code-snippet/","content":"\n## äº¤äº’å¼è¿è¡Œæ¨¡å¼\n\n```bash\nphp -a\n```\n\näº¤äº’å¼ shell è¿˜å…·æœ‰å‡½æ•°ã€å¸¸é‡ã€ç±»åã€å˜é‡ã€é™æ€æ–¹æ³•è°ƒç”¨å’Œç±»å¸¸é‡çš„ `tab` è¡¥å…¨åŠŸèƒ½ã€‚\n\n<!-- more -->\n\n## å‚æ•°æŸ¥çœ‹\n\n### æŸ¥çœ‹ PHP ç¼–è¯‘æ—¶çš„å‚æ•°\n\n```bash\nphp -r \"phpinfo();\" | grep configure\n```\n\n### æŸ¥çœ‹ .ini é…ç½®æ–‡ä»¶è·¯å¾„\n\n```bash\nphp --ini\n```\n\n```bash\nphp -r \"phpinfo();\" | grep \"Configuration File\"\n```\n\n### æŸ¥çœ‹ Modules\n\n```bash\nphp -m\n```\n\n### Show configuration for extension\n\næ˜¾ç¤ºæ‰©å±•é…ç½®ã€‚`--ri <name> Show configuration for extension <name>.`\n\n```bash\nphp --ri gd\n```\n\n## ä¿®æ”¹å†…å­˜é™åˆ¶\n\nä¿®æ”¹ `php.ini` ä¸­çš„ `memory_limit` å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥åœ¨æ–‡ä»¶çš„å°¾éƒ¨å¢åŠ è¿™ä¸ªå‚æ•°ã€‚\n\n```ini\nmemory_limit = 1024M;\n```\n\n```php\n// ä¸´æ—¶è®¾ç½®æœ€å¤§å†…å­˜å ç”¨\nini_set('memory_limit', '1024M');\n// è®¾ç½®è„šæœ¬æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º 0 æ°¸ä¸è¿‡æœŸ\nset_time_limit(0);\n```\n\n## åŠ¨æ€å®ä¾‹åŒ–ç±»\n\n```php\nclass Test1{\n  public function __construct(){\n    echo \"Test1<br>\";\n  }\n}\n\n// æ–¹æ³•ä¸€\n$class1 = \"Test1\";\nnew $class1();\n\n// æ–¹æ³•äºŒ\n$class2 = \"Test2\";\n// å»ºç«‹ç±»çš„åå°„\n$class2 = new ReflectionClass($class2);\n// ç›¸å½“äºå®ä¾‹åŒ–ç±»\n$instance = $class2->newInstance();\n```\n\n## composer å¸¸ç”¨\n\n### aliyun repo\n\n[é˜¿é‡Œäº‘ Composer å…¨é‡é•œåƒ](https://developer.aliyun.com/composer)\n\n```bash\ncomposer config -g repo.packagist composer https://mirrors.aliyun.com/composer/\n```\n\n```bash\n    \"config\": {\n        \"disable-tls\": true,\n        \"gitlab-domains\": [],\n        \"optimize-autoloader\": true,\n        \"preferred-install\": {\n            \"*\": \"dist\"\n        }\n        \"secure-http\": false,\n        \"sort-packages\": true,\n    },\n    \"repositories\": [\n        {\n            \"type\": \"cvs\",\n            \"url\": \"...\"\n        },\n        {\n            \"type\": \"composer\",\n            \"url\": \"https://mirrors.aliyun.com/composer/\"\n        },\n        {\n            \"type\": \"composer\",\n            \"url\": \"https://asset-packagist.org\"\n        }\n    ]\n```\n\n### å¿½ç•¥ php ç‰ˆæœ¬é™åˆ¶\n\n**è¿™ä¸ªæ˜¯æä¸æ¨èçš„ï¼Œè¿™æ ·ä¼šé€ æˆåº“å®‰è£…çš„ç‰ˆæœ¬é”™è¯¯ã€‚ä¸åº”è¯¥ä½¿ç”¨ã€‚**\n\n```bash\ncomposer require hellogerard/jobby --ignore-platform-reqs\n```\n\næ¨èåšæ³•ï¼š\n\n```bash\nwhich composer\n# /usr/local/bin/composer\n\n{æ­£ç¡®çš„ PHP ç‰ˆæœ¬}/bin/php /usr/local/bin/composer require hellogerard/jobby\n\n/usr/local/opt/php@7.1/bin/php -d memory_limit=-1 /usr/local/bin/composer update -vvv\n```\n\n### emory-limit-errors for more info on how to handle out of memory errors\n\n```bash\nphp -d memory_limit=-1 /usr/local/bin/composer update\n```\n\n### æ›´æ–° composer.lock\n\nè‹¥é¡¹ç›®ä¹‹å‰å·²é€šè¿‡å…¶ä»–æºå®‰è£…ï¼Œåˆ™éœ€è¦æ›´æ–° composer.lock æ–‡ä»¶ï¼š\n\n```bash\ncomposer update --lock\n```\n\n## real client ip\n\n```php\n# PHP7+\n$clientIP = $_SERVER['HTTP_CLIENT_IP']\n    ?? $_SERVER[\"HTTP_CF_CONNECTING_IP\"] # when behind cloudflare\n    ?? $_SERVER['HTTP_X_FORWARDED']\n    ?? $_SERVER['HTTP_X_FORWARDED_FOR']\n    ?? $_SERVER['HTTP_FORWARDED']\n    ?? $_SERVER['HTTP_FORWARDED_FOR']\n    ?? $_SERVER['REMOTE_ADDR']\n    ?? '0.0.0.0';\n```\n\n## PHP.net\n\n- [Supported Versions](https://www.php.net/supported-versions.php)\n- [Unsupported Branches](https://www.php.net/eol.php)\n\n## References\n\n- [PHP: Interactive shell | php.net](http://php.net/manual/en/features.commandline.interactive.php)\n\n-- EOF --\n","tags":["php","code-snippet"]},{"title":"MySQL Illegal mix of collations","url":"/2020/04/14/mysql-illegal-mix-of-collations/","content":"\n```sql\nIllegal mix of collations (utf8mb4_general_ci,IMPLICIT) and (utf8mb4_unicode_ci,IMPLICIT) for operation\n```\n\n<!-- more -->\n\n`utf8mb4_unicode_ci` å’Œ `utf8_general_ci` åˆ—ä¸èƒ½æ··åˆæŸ¥è¯¢\n\n## è§£å†³æ–¹æ³• 1\n\nç»Ÿä¸€å­—æ®µ varchar çš„ç¼–ç é›†ï¼Œæˆ‘æ¨èä½¿ç”¨ `utf8mb4_unicode_ci`ã€‚\n\n## è§£å†³æ–¹æ³• 2\n\nåœ¨æŸ¥è¯¢ SQL ä¸­éœ€è¦è½¬åŒ–çš„å­—æ®µåé¢åŠ  `COLLATE utf8mb4_unicode_ci`.\n\n## å¯¹æ¯”\n\nå‡†ç¡®æ€§ï¼š\n\n- utf8mb4_unicode_ci æ˜¯åŸºäºæ ‡å‡†çš„ Unicode æ¥æ’åºå’Œæ¯”è¾ƒï¼Œèƒ½å¤Ÿåœ¨å„ç§è¯­è¨€ä¹‹é—´ç²¾ç¡®æ’åºã€‚\n- utf8mb4_general_ci æ²¡æœ‰å®ç° Unicode æ’åºè§„åˆ™ï¼Œåœ¨é‡åˆ°æŸäº›ç‰¹æ®Šè¯­è¨€æˆ–è€…å­—ç¬¦é›†ï¼Œæ’åºç»“æœå¯èƒ½ä¸ä¸€è‡´ã€‚\n\næ€§èƒ½ï¼š\n\n- utf8mb4_unicode_ci åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼ŒUnicode æ’åºè§„åˆ™ä¸ºäº†èƒ½å¤Ÿå¤„ç†ç‰¹æ®Šå­—ç¬¦çš„æƒ…å†µï¼Œå®ç°äº†ç•¥å¾®å¤æ‚çš„æ’åºç®—æ³•ã€‚ä½†æ˜¯åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹å‘ï¼Œä¸ä¼šå‘ç”Ÿæ­¤ç±»å¤æ‚æ¯”è¾ƒã€‚ç›¸æ¯”é€‰æ‹©å“ªä¸€ collationï¼Œä½¿ç”¨è€…æ›´åº”è¯¥å…³å¿ƒå­—ç¬¦é›†ä¸æ’åºè§„åˆ™åœ¨ db é‡Œéœ€è¦ç»Ÿä¸€ã€‚\n- utf8mb4_general_ci åœ¨æ¯”è¾ƒå’Œæ’åºçš„æ—¶å€™æ›´å¿«ã€‚\n\n## utf8mb4\n\nmb4 æ˜¯ most bytes 4 çš„æ„æ€ï¼Œä¸“é—¨ç”¨æ¥å…¼å®¹å››å­—èŠ‚çš„ unicodeã€‚\n\n## References\n\n- [Illegal mix of collations | å°‘å¹´é˜¿æ–Œ](https://www.cnblogs.com/wqbin/p/11852376.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"ç²˜è´´åˆ°ç»ˆç«¯ vim ç¼©è¿›é”™ä¹±","url":"/2020/04/13/paste-into-terminal-vim-invalid-format/","content":"\nä»æœ¬åœ°å¤åˆ¶ä»£ç åˆ°æœåŠ¡å™¨æ€»æ˜¯ç¼©è¿›é”™ä¹±ï¼Œä¸€è¡Œæ¯”ä¸€è¡Œç¼©è¿›çš„å¤šï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯ SecureCRT çš„é”…ï¼Œåæ¥å‘ç°æ˜¯å†¤æ‰ä»–äº†ï¼Œé”…è¦ç»™ vimã€‚\n\n<!-- more -->\n\n## åŸå› \n\nåœ¨ç»ˆç«¯çš„ vim ä¸­æ²¡æœ‰ç›¸åº”çš„ç¨‹åºæ¥å¤„ç†è¿™ä¸ªä»å…¶ä»–åº”ç”¨å¤åˆ¶ç²˜è´´çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ vim é€šè¿‡æ’å…¥é”®ç›˜è¾“å…¥çš„ buffer æ¥æ¨¡æ‹Ÿè¿™ä¸ªç²˜è´´çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™ vim ä¼šä»¥ä¸ºè¿™æ˜¯ç”¨æˆ·è¾“å…¥çš„ã€‚\n\né—®é¢˜å°±æ˜¯å‡ºåœ¨è¿™ï¼šå½“ä¸Šä¸€è¡Œç»“æŸï¼Œå…‰æ ‡è¿›å…¥ä¸‹ä¸€è¡Œæ—¶ vim ä¼šè‡ªåŠ¨ä»¥ä¸Šä¸€è¡Œçš„çš„ç¼©è¿›ä¸ºåˆå§‹ä½ç½®ã€‚è¿™æ ·å°±ä¼šç ´ååŸå§‹æ–‡ä»¶çš„ç¼©è¿›ã€‚\n\n## è§£å†³åŠæ³•\n\nåœ¨ vim ä¸­ç²˜è´´å‰å…ˆè¾“å…¥ï¼š\n\n```bash\n:set paste\n```\n\n## è§£å†³åŠæ³• 2\n\nvim7.4 å‘å¸ƒäº†ï¼Œå‡çº§ä¸€ä¸‹å§ã€‚çœ‹ä¸€ä¸‹ä½ ç¼–è¾‘åçš„ç‰ˆæœ¬ (vim --version)ï¼Œå¦‚æœåŒ…å« +clipboardï¼ˆå…¶å®ƒéƒ½è¯·å½“ä½œèƒŒæ™¯ï¼‰ï¼š\n\n```bash\n+clipboard +iconv +path_extra -toolbar\n+cmdline_compl +insert_expand -perl +user_commands\n```\n\nç„¶ååœ¨ .vimrc é‡Œè®¾ç½®\n\n```bash\nset clipboard=unnamed\n```\n\nå°±å¯ä»¥æ­£å¸¸å†™å…¥è¯»å– clipboard äº†ã€‚\n\n## References\n\n- [è§£å†³ç²˜è´´åˆ°ç»ˆç«¯ Vim ç¼©è¿›é”™ä¹± | ruby-china](https://ruby-china.org/topics/13307)\n\n-- EOF --\n","tags":["vim"]},{"title":"NGINX å‰åç«¯åˆ†ç¦»é…ç½®","url":"/2020/03/17/nginx-front-back-end-config/","content":"\nå‰åç«¯åˆ†ç¦»çš„å¼€å‘å·²æ˜¯ä¸»æµï¼Œæœ¬æ–‡ä¸»è¦æ˜¯è®°å½•å‰åç«¯åˆ†ç¦»é¡¹ç›®çš„ NGINX é…ç½®ã€‚\n\n<!-- more -->\n\n- å‰ç«¯ Vue web å…¥å£ `host.test`\n- åç«¯ PHP Yii service å…¥å£ `host.test/api`\n\n```conf\nserver {\n  listen 80;\n  server_name host.test;\n  root /data/project/web/dist/;\n  index index.html index.php;\n\n  location ^~/api {\n    root           /data/project/service/web/;\n\n    access_log     logs/service-access.log;\n    error_log      logs/service-error.log;\n\n    fastcgi_pass   127.0.0.1:9000;\n    include        fastcgi.conf;\n    fastcgi_param  SCRIPT_FILENAME   /data/project/service/web/index.php;\n    fastcgi_param  SCRIPT_NAME       /api/index.php;\n  }\n\n  location ^~ / {\n    alias /data/project/web/dist/;\n    access_log logs/web-access.log;\n    error_log logs/web-error.log;\n  }\n}\n```\n\n## è´Ÿè½½å‡è¡¡åœºæ™¯\n\n- å‰ç«¯ Vue web å…¥å£ `host.test`\n- åç«¯ PHP Yii service å…¥å£ `host.test/api` ä»£ç†åˆ° `api.host.test`\n\n```conf\nserver {\n  listen 80;\n  server_name host.test;\n  root /data/project/web/dist/;\n\n  access_log logs/web-access.log;\n  error_log logs/web-error.log;\n\n  location /index.html {\n    add_header Cache-Control \"no-cache, no-store\";\n  }\n\n  location / {\n    index index.php index.html index.htm;\n    try_files $uri $uri/ /index.html;\n  }\n\n  location ^~/api/ {\n    proxy_set_header Host             api.host.test;\n    proxy_set_header X-Real-IP        $remote_addr;\n    proxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;\n    proxy_set_header X-NginX-Proxy    true;\n    proxy_pass http://api.host.test/;\n  }\n}\n```\n\n```conf\nserver {\n  listen 80;\n  server_name api.host.test;\n  root /data/project/service/web/;\n\n  location / {\n    access_log logs/service-access.log;\n    error_log logs/service-error.log;\n\n    index index.php index.html;\n    try_files $uri $uri/ /index.php$is_args$args;\n  }\n\n  location ~ \\.php$ {\n    fastcgi_pass    127.0.0.1:10071;\n\n    fastcgi_index   index.php;\n    include         fastcgi_params;\n    fastcgi_param   SCRIPT_FILENAME   $document_root$fastcgi_script_name;\n    fastcgi_param   SERVER_NAME       $http_host;\n    fastcgi_ignore_client_abort       on;\n  }\n}\n```\n\n## NGINX é…ç½®è½¬å‘\n\nlocation è¿›è¡Œçš„æ˜¯æ¨¡ç³ŠåŒ¹é…ã€‚\n\n- å½“ç»“å°¾æ²¡æœ‰ `/` æ—¶ï¼Œ`location /abc/def` å¯ä»¥åŒ¹é… `/abc/defghi` è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥åŒ¹é… `/abc/def/ghi` ç­‰ã€‚\n- å½“ç»“å°¾æœ‰ `/` æ—¶ï¼Œ`location /abc/def/` ä¸èƒ½åŒ¹é… `/abc/defghi` è¯·æ±‚ï¼Œåªèƒ½åŒ¹é… `/abc/def/anything` è¿™æ ·çš„è¯·æ±‚ã€‚\n\nä¸‹é¢å››ç§æƒ…å†µåˆ†åˆ«ç”¨ `http://192.168.1.4/proxy/test.html` è¿›è¡Œè®¿é—®ï¼š\n\nç¬¬ä¸€ç§ï¼š\n\n```conf\nlocation /proxy/ {\n  proxy_pass http://127.0.0.1:81/;\n}\n```\n\nä¼šè¢«ä»£ç†åˆ° `http://127.0.0.1:81/test.html`ã€‚\n\nç¬¬äºŒç§ï¼ˆç›¸å¯¹äºç¬¬ä¸€ç§ï¼Œæœ€åå°‘ä¸€ä¸ª `/`ï¼‰ï¼š\n\n```conf\nlocation /proxy/ {\n  proxy_pass http://127.0.0.1:81;\n}\n```\n\nä¼šè¢«ä»£ç†åˆ° `http://127.0.0.1:81/proxy/test.html`ã€‚\n\nç¬¬ä¸‰ç§ï¼š\n\n```conf\nlocation /proxy/ {\n  proxy_pass http://127.0.0.1:81/ftlynx/;\n}\n```\n\nä¼šè¢«ä»£ç†åˆ° `http://127.0.0.1:81/ftlynx/test.html`ã€‚\n\nç¬¬å››ç§ï¼ˆç›¸å¯¹äºç¬¬ä¸‰ç§ï¼Œæœ€åå°‘ä¸€ä¸ª `/`ï¼‰ï¼š\n\n```conf\nlocation  /proxy/ {\n  proxy_pass http://127.0.0.1:81/ftlynx;\n}\n```\n\nä¼šè¢«ä»£ç†åˆ° `http://127.0.0.1:81/ftlynxtest.html`ã€‚\n\n-- EOF --\n","tags":["nginx"]},{"title":"ã€PRCC2019 å…¨å¥—å…¥é—¨æ•™ç¨‹ã€‘ç¬”è®°","url":"/2020/03/13/prcc2019-getting-started-notes/","content":"\nç”¨è§†é¢‘è®°å½•ç”Ÿæ´»è¶Šæ¥è¶Šæ™®åŠï¼Œå¹´åˆæ—…è¡Œä¹Ÿæ‹äº†äº›ç´ æï¼Œæƒ³ç€è‡ªå·±ä¹Ÿå½“ä¸ª up ä¸»ã€‚å…ˆæ¥å­¦å­¦ PRã€‚[ã€PRã€‘Premiere Pro CC 2019 å…¨å¥—å…¥é—¨æ•™ç¨‹ | bilibili](https://www.bilibili.com/video/av37550078?spm_id_from=333.788.b_765f64657363.1) æ˜¯æˆ‘åœ¨ B ç«™çœ‹çš„ç¬¬ä¸€å¥—æ•™å­¦è§†é¢‘ï¼Œå¦ç™½è¯´å†…å®¹ä¸å¤šï¼Œæœ‰ä¸å°‘é‡å¤çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¿™æ ·é€‚åˆå®Œå…¨é›¶åŸºç¡€çš„åŒå­¦ã€‚\n\n<!-- more -->\n\nè¯¾ä»£è¡¨æ¥æ”¶æˆ‘çš„è¯¾åä½œä¸šï¼š[ã€äº¤ä½œä¸šã€‘PR CC 2019 å…¨å¥—å…¥é—¨æ•™ç¨‹ è¯¾åä½œä¸š | è²è²ä¸å¸†](https://www.bilibili.com/video/bv17E41157Pz) ã€‚\n\næˆ‘çš„ä¸€æ¡ VLOGï¼š[ã€VLOGã€‘#01 æ–°å¹´ä¹‹æ—… æˆéƒ½ ç¬¬ä¸€æ—¥ | è²è²ä¸å¸†](https://www.bilibili.com/video/BV1K7411o73B) æ¬¢è¿æ¥ä¸€é”®ä¸‰è¿ã€‚\n\n<iframe src=\"//player.bilibili.com/player.html?aid=97184760&bvid=BV1K7411o73B&cid=166268624&page=1\" scrolling=\"no\" border=\"0\" frameborder=\"no\" framespacing=\"0\" allowfullscreen=\"true\" width=\"480px\" height=\"270px\"> </iframe>\n\n## 01-åŸºç¡€æµç¨‹\n\n1ã€çª—å£ä¹±äº†åï¼šã€çª—å£-å·¥ä½œåŒº-ç¼–è¾‘&é‡ç½®ä¸ºä¿å­˜çš„å¸ƒå±€ã€‘`alt + shift + 0`\n2ã€ã€æ–‡å­—å·¥å…·ã€‘åŠ å­—å¹•\n3ã€ä¿®æ”¹å­—ä½“ï¼šã€çª—å£-åŸºç¡€å›¾å½¢ã€‘é€‰æ‹©ç¼–è¾‘\n4ã€ã€å‰ƒåˆ€ã€‘å‰ªåˆ‡å¤šä½™ç´ æ\n5ã€æœ¬ç´ æå›¾ç‰‡æ¥è‡ª http://unsample.net/\n\n## 02-è½¬åœºæ•ˆæœ\n\n1ã€é€‰æ‹©ç´ æç‚¹å‡»å·¦é”®æ‹–æ‹½åˆ°ã€å·¦ä¸‹çª—å£ã€‘ å³ä¸‹çš„æ–‡ä»¶å¤¹å¯ä»¥å¿«é€Ÿæ–°å»ºæ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿ç´ æåˆ†ç±»\n2ã€æ—¶åºæ–°å»ºæ—¶ï¼Œé€‰æ‹© HDV 720\n3ã€`ctrl + d` æ·»åŠ è½¬åœºæ•ˆæœ\n4ã€ã€å·¦ä¸‹çª—å£ã€‘ï¼ˆé¡¹ç›®çª—å£ï¼‰é€‰æ‹©ã€æ•ˆæœã€‘è§†é¢‘è¿‡æ¸¡ï¼Œå¯ä»¥åˆ‡æ¢æ•ˆæœ\n5ã€ç‚¹å‡»æ—¶åºä¸Šçš„è¿‡æ¸¡ï¼Œã€å·¦ä¸Šçª—å£ã€‘é€‰æ‹©ã€æ•ˆæœæ§ä»¶ã€‘ï¼Œå¯ä»¥ç¼–è¾‘è½¬åœºæ•ˆæœçš„æŒç»­æ—¶é—´ã€å¯¹é½ç­‰\n\n## 03&04-è§†é¢‘è½¬åœºç‰¹æ•ˆ&éŸ³é¢‘ç‰¹æ•ˆ\n\n1ã€ã€å·¦ä¸Šçª—å£ã€‘é€‰æ‹©ã€æ•ˆæœæ§ä»¶ã€‘ï¼Œå¯ä»¥ç¼–è¾‘è§†é¢‘æ•ˆæœã€è¿‡æ¸¡æ•ˆæœ\n2ã€è§†é¢‘æ•ˆæœï¼Œå¯ä»¥ç‚¹å‡»ç§’è¡¨çš„å›¾æ ‡æ·»åŠ å…³é”®å¸§\n3ã€æ–°å»ºæ—¶æŸ¥çœ‹ã€ä¿®æ”¹ã€æš‚å­˜ç›˜ã€‘ä½ç½®\n4ã€ã€ç¼–è¾‘-é¦–é€‰é¡¹-æ—¶é—´è½´ã€‘å¯ä»¥ä¿®æ”¹ï¼šé™æ­¢å›¾ç‰‡é»˜è®¤æŒç»­æ—¶é—´ç­‰ï¼Œ\nå·²ç»å¯¼å…¥çš„ç´ ææ— æ•ˆ\n5ã€ã€æ—¶åºçª—å£ã€‘è®¡æ—¶å™¨å¯ä»¥ç‚¹å‡»ç¼–è¾‘ï¼Œè¾“å…¥ 500 ä¼šè·³åˆ°ç¬¬ 5 ç§’çš„ä½ç½®\n6ã€éŸ³é¢‘è¿‡æ¸¡ï¼Œç»“å°¾å£°éŸ³æ·¡å‡º\n\n## 05&06-è§†é¢‘å‰ªè¾‘&éŸ³ç”»å¯¹åº”\n\n1ã€ã€å·¦ä¸Šçª—å£ã€‘ç‚¹å‡» `i` æ ‡è®°å…¥ç‚¹ï¼Œç‚¹å‡» `o` æ ‡è®°å‡ºç‚¹\n2ã€ã€å·¦ä¸Šçª—å£ã€‘çª—å£å³ä¸‹è§’çš„ + æ˜¯æŒ‰é’®ç¼–è¾‘å™¨\n3ã€ã€å·¦ä¸Šçª—å£ã€‘æ ‡è®°å®Œæˆåå¯ä»¥ç‚¹å‡» æ’å…¥ æˆ–è€… è¦†ç›–\n4ã€ã€èŠ‚ç›®çª—å£ã€‘ç‚¹å‡» `m` å¯ä»¥æ ‡è®°\n5ã€ã€èŠ‚ç›®çª—å£ã€‘çª—å£å³ä¸‹è§’çš„ +ï¼Œæ·»åŠ è½¬åˆ°ä¸‹ä¸€ä¸ªæ ‡è®°\n6ã€è½¬åˆ°ä¸‹ä¸€ä¸ªæ ‡è®°é…åˆåœ¨æ—¶åºä¸Šçš„æ ‡ï¼Œè¸©ç‚¹è§†é¢‘\n\n## 07&08-ç®€å•åŠ¨ç”»&ç´ æåµŒå¥—\n\n1ã€ã€å·¦ä¸Šçª—å£ã€‘æ•ˆæœæ§ä»¶ï¼Œå¯ä»¥ä¿®æ”¹ç´ æä½ç½®ã€ç¼©æ”¾\n2ã€ã€å·¦ä¸Šçª—å£ã€‘æ•ˆæœæ§ä»¶ï¼Œç‚¹å‡»å°ç§’è¡¨å¯ä»¥æ·»åŠ å…³é”®å¸§åŠ¨ç”»\n3ã€å¯¼å‡ºç´ æå‰å¯ä»¥ä¿®æ”¹é™æ­¢å›¾ç‰‡é»˜è®¤æŒç»­æ—¶é—´\n4ã€åˆ›å»ºå¤šä¸ªæ—¶åºï¼Œå†åˆ›å»ºä¸€ä¸ª master æ—¶åºï¼Œä½œä¸ºä¸»æ—¶åº\n5ã€æ—¶åºæ‹–å…¥æ—¶åºæ—¶ï¼Œæ³¨æ„ç‚¹å‡»å‰é¢çš„ `V1` `A1`ï¼Œå¦åˆ™å¯èƒ½åªæœ‰è§†é¢‘æˆ–éŸ³é¢‘\n6ã€ã€æ—¶åºçª—å£ã€‘æ—¶åºå–æ¶ˆé“¾æ¥ï¼Œå¯ä»¥åˆ é™¤éŸ³é¢‘è½¨\n7ã€æŒ‰ `alt` é”®æ‹–æ‹½å¯ä»¥å¿«é€Ÿå¤åˆ¶\n\n## 09&10&11-è‡ªå®šä¹‰è½¬åœº&è§†é¢‘æ•ˆæœ&å˜å½¢å’Œæ‰­æ›²\n\n1ã€ä½¿ç”¨ PS åˆ¶ä½œç°åº¦å›¾ï¼Œæ–°å»º é¢œè‰²æ¨¡å¼ ç°åº¦ï¼Œå›¾ç‰‡è¦å’Œè§†é¢‘å°ºå¯¸ä¸€è‡´\n2ã€åœ¨çº¿å›¾ç‰‡ç¼–è¾‘ `https://www.uupoop.com/`\n3ã€å›¾ç‰‡ä½¿ç”¨ `tiff` æ ¼å¼ï¼ŒåŸå› ä¸æ‡‚\n4ã€è§†é¢‘è¿‡æ¸¡ æ“¦é™¤ æ¸å˜æ“¦é™¤ï¼Œç„¶åå¯ä»¥é€‰æ‹©è‡ªå·±åˆ¶ä½œçš„å›¾ç‰‡\n5ã€ä»ã€æ•ˆæœã€‘å¯ä»¥é€‰æ‹©åå‘ä¸Šæ‹–å…¥ã€æ•ˆæœæ§ä»¶ã€‘\n6ã€`fx` å¯ä»¥å¼€å¯æˆ–å…³é—­æ•ˆæœï¼Œè¿˜æœ‰ æ¸…é™¤ã€å¤åˆ¶ã€ç²˜è´´\n7ã€ã€é¡¹ç›®çª—å£ã€‘æ–°å»º è°ƒæ•´å›¾å±‚ï¼Œå¯ä»¥ç»™è§†é¢‘åŠ ä¸€ä¸ªæ•´ä½“çš„æ•ˆæœ\n8ã€è¦å–„äºä½¿ç”¨æ ‡è®°å®šä½\n9ã€è§†é¢‘æ•ˆæœï¼šå˜å½¢ã€æ‰­æ›²\n\n## 12-æ¨¡æ¿çš„ä¸‹è½½å’Œä½¿ç”¨\n\n1ã€.mogrt æ¨¡æ¿\n2ã€å¯¼å…¥æ–¹æ³• 1ï¼šã€å›¾å½¢ã€‘å®‰è£…åŠ¨æ€å›¾å½¢æ¨¡æ¿\n3ã€å¯¼å…¥æ–¹æ³• 2ï¼šã€çª—å£ã€‘åŸºç¡€å›¾å½¢ï¼Œæ¸¸è§ˆï¼Œå³ä¸‹è§’åŠ å·\n4ã€å¯¼å…¥æ–¹æ³• 3ï¼šå°†æ¨¡æ¿æ–‡ä»¶å¤åˆ¶åˆ°\nMacï¼š`username/Library/Application Support/Adobe/Common/motion Graphics Template/`\nWinï¼š`root://Users/Username/AppData/Roaming/Adobe/Common/Motion Graphics Templates`\n5ã€ã€åŸºç¡€å›¾å½¢ã€‘ç¼–è¾‘ï¼Œå¯ä»¥ä¿®æ”¹æ¨¡æ¿å†…å®¹\n6ã€æŒ‰ `enter` é”®ï¼Œå¯ä»¥æ¸²æŸ“è§†é¢‘\n\n## 13-æ ‡å‡†æ¨¡æ¿çš„ä½¿ç”¨\n\n1ã€`.prproj` æ¨¡æ¿\n2ã€ã€è§†å›¾ã€‘æ˜¾ç¤ºæ ‡å°ºã€æ˜¾ç¤ºå‚è€ƒçº¿ï¼Œæ–¹ä¾¿å¯¹é½\n\n## 14&15-å€’è®¡æ•°å™¨åŠè‰²å½©è°ƒèŠ‚&ä¼ ç»Ÿä¸å›¾å½¢å­—å¹•\n\n1ã€ã€é¡¹ç›®çª—å£ã€‘æ–°å»º é€šç”¨å€’è®¡æ—¶ç‰‡å¤´ï¼Œå°±æ˜¯åˆ° 2 å°±æ²¡äº†\n2ã€ã€å‘å‰é€‰æ‹©è½¨é“å·¥å…·ã€‘`ctrl + a`\n3ã€è§†é¢‘æ•ˆæœ æ‰­æ›² çƒé¢åŒ–\n4ã€è§†é¢‘æ•ˆæœ æ‰­æ›² åç§»\n5ã€è§†é¢‘æ•ˆæœ æ‚è‰²ä¸é¢—ç²’ æ‚è‰²\n6ã€ã€æ–‡ä»¶ã€‘æ–°å»º å­—å¹• å¼€æ”¾å¼å­—å¹•\n\n-- EOF --\n","tags":["pr"]},{"title":"PHP FTP é—´æ­‡æ€§æ— æ³•ä¸Šä¼ æ–‡ä»¶","url":"/2020/02/27/php-ftp-intermittently-unable-upload/","content":"\n2020-04-23 åè®°ï¼šç–‘ä¼¼æ˜¯å‰ç½®çš„è´Ÿè½½å‡è¡¡æœåŠ¡å™¨æœ‰é—®é¢˜ï¼Œæ”¹ä¸ºç›´æ¥ä½¿ç”¨çœŸå® IP åé—®é¢˜æ¶ˆå¤±ã€‚\n\n---\n\n```bash\nPHP Warning:  ftp_put(): php_connect_nonb() failed: Operation now in progress (115) in ...\n```\n\n<!-- more -->\n\nç¯å¢ƒ `PHP 5.6.40`ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€ä¸ªå¾ˆè¯¡å¼‚çš„æƒ…å†µï¼Œåœ¨ä½¿ç”¨ FTP å‡½æ•°ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä¼šé—´æ­‡æ€§æ— æ³•ä¸Šä¼ æ–‡ä»¶ã€‚æ‰¾äº†å‡ åœˆæœ‰è¯´æ˜¯ PHP bugã€æœ‰è¯´æ˜¯é˜²ç«å¢™ï¼Œéƒ½ä¸è§£å†³é—®é¢˜ã€‚\n\næœ€åæ‰¾åˆ°äº†ä¸€ç¯‡ [Why is my PHP script intermittently unable to upload a file via FTP? | stackoverflow](https://stackoverflow.com/questions/42439316/why-is-my-php-script-intermittently-unable-to-upload-a-file-via-ftp) è§£äº†å¤§æ€¥ã€‚ï¼ˆå½“æœç´¢ç»“æœæ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆæ—¶ï¼Œå¯ä»¥è€ƒè™‘æ¢å‡ ä¸ªç›¸è¿‘çš„è¯å†è¯•è¯•ï¼‰\n\nè§£å†³æ–¹æ³•ï¼šè¿›è¡Œå¾ªç¯è°ƒç”¨å°è¯•ã€‚\n\n```php\n  // å°è¯• 5 æ¬¡\n  $uploaded = false;\n  $tries = 0;\n  while (!$uploaded && $tries <= 5) {\n      ++$tries;\n      $conn = ftp_ssl_connect($host, $port, 10) or die('FTPæœåŠ¡å™¨è¿æ¥å¤±è´¥');\n      //ç™»é™†ï¼ˆé€šè¿‡ç”¨æˆ·åæˆ–è€…åŒ¿åç™»é™†ï¼‰\n      $result = ftp_login($conn, $user, $password);\n      if (!$result) {\n          ftp_close($conn);\n          die('ftp_login å¤±è´¥');\n      }\n\n      ftp_set_option($conn, FTP_USEPASVADDRESS, false);\n\n      // turn passive mode on\n      ftp_pasv($conn, true);\n\n      $success = ftp_put($conn, $remoteFile, $localFile, FTP_BINARY);\n      if ($success) {\n          $uploaded = true;\n          dump(\"ftp upload: $success, $remoteFile, $localFile\");\n      } else {\n          dump(\"ftp upload failed, tries: $tries\");\n      }\n\n      ftp_close($conn);\n  }\n```\n\nå¾ªç¯ try ç¬¬äºŒæ¬¡å°±æˆåŠŸäº†ï¼Œä¸çŸ¥ä¸ºå•¥ã€‚[PHP ã® FTP(S)é€šä¿¡ã§ php_connect_nonb() failed: Operation now in progress (115) | qiita](https://qiita.com/skawata/items/96895fe4eb5e6bbbf92c) è¿™ç¯‡æ–‡ç« æœ‰åˆ†æï¼Œè¯»åè¿˜æ˜¯ä¸å¤ªæ¸…æ¥šï¼Œæœ›æœ‰ç¼˜äººæ¥æŒ‡å¯¼ã€‚\n\n> ã©ã†ã‚„ã‚‰ Operation now in progress (115)ã¯ EINPROGRESS ã‹ã‚‰æ¥ã¦ã„ã‚‹ã‚‰ã—ã„ã€‚å¸¸ã«éåŒæœŸã§ connect ã™ã‚‹ãŸã‚æœ€åˆã® connect ã§ EINPROGRESS ãŒå¸°ã‚‹ã®ã¯æ­£å¸¸ã ãŒã€asynchronous=true ã®å ´åˆãã®å¾ŒåŒæœŸå‡¦ç†ã®ãŸã‚ã« poll ã§æ¥ç¶šå®Œäº†ã‚’å¾…ã¤ã€‚ã ãŒ poll ã¯ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã‚‚ errno ã‚’æ›´æ–°ã—ãªã„ãŸã‚ã€æ¥ç¶šã«å¤±æ•—ã—ãŸã¨ã errno=EINPROGRESS ã®çŠ¶æ…‹ã§è¿”ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚\n\n-- EOF --\n","tags":["php"]},{"title":"Lonicera Framework","url":"/2019/12/19/lonicera-framework/","content":"\né¡¹ç›®ä»£ç ï¼š[imzyf/lonicera | GitHub](https://github.com/imzyf/lonicera)\n\n> ã€PHP æ ¸å¿ƒæŠ€æœ¯ä¸æœ€ä½³å®è·µã€‘ç¬¬äºŒç‰ˆ ç¬¬ 6 ç«  è¯»ä¹¦ç¬”è®°\n\nLonicera Framework - Every French soldier carries a marshalâ€™s baton in his knapsack.\n\n## MVC\n\nMVC æ¨¡å¼çš„ç›®çš„æ˜¯å®ç°ä¸€ç§åŠ¨æ€çš„ç¨‹åºè®¾è®¡ï¼Œä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å’Œæ‰©å±•ç®€åŒ–ï¼Œå¹¶ä¸”ä½¿ç¨‹åºæŸä¸€éƒ¨åˆ†çš„é‡å¤åˆ©ç”¨æˆä¸ºå¯èƒ½ã€‚\n\n## Lonicera 0.1\n\n### bootstrap\n\nindex.php å•ä¸€å…¥å£æ¨¡å¼ã€‚\n\nå¯åŠ¨ PHP å†…ç½® Web æœåŠ¡å™¨ï¼š\n\n```bash\nphp -S localhost:7070\n```\n\n### è·¯ç”±å™¨å±‚\n\næ›´åå‘äºä½¿ç”¨ PATH_INFO æ–¹å¼æ¥è®¿é—®ã€‚\n\nä»ä¼ ç»Ÿ URL å‚æ•°æ¨¡å¼çš„è®¿é—®åœ°å€è¿›è¡Œè§£æï¼Œæå–é‡Œé¢çš„ groupã€controllerã€actionã€param 4 ä¸ªå‚æ•°ï¼Œéšåäº¤ç»™ bootstrap è¿›è¡Œ dispatch å¤„ç†ã€‚\n\n### æ•°æ®æ¨¡å‹\n\nç”¨ PDO æ¥å®ç°è¿æ¥æ•°æ®åº“ã€‚\n\n- ORM Object Relational Mapping å¯¹è±¡ä¸æ•°æ®åº“çš„æ˜ å°„å«ä½œå¯¹è±¡å…³ç³»æ˜ å°„\n- PO Persistent Object æŠŠä¸€ä¸ªæ•°æ®åº“ä¸­çš„è¡¨çš„ä¸€è¡Œè®°å½•å¯¹åº”çš„å¯¹è±¡ç§°ä¸ºæŒä¹…å¯¹è±¡\n- BO Business Object ä¸šåŠ¡å¯¹è±¡ æŠŠä¸šåŠ¡é€»è¾‘å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡\n- VO Value Object å€¼å¯¹è±¡ ç•Œé¢æ˜¾ç¤ºçš„æ•°æ®å¯¹è±¡\n- DTO Data Transfer Object ç”¨åœ¨çƒ­å‘µå‘µéœ€è¦æ•°æ®ä¼ è¾“çš„åœ°æ–¹\n- DAO Data Access Object æŒ‡ä»£ Active Record æ¨¡å¼ä¸­çš„æ•°æ®å¯¹è±¡\n\nä¼ ç»Ÿçš„ ORM æ¨¡å¼æå€¡æ•°æ®å¯¹è±¡å’Œè´Ÿè´£æŒä¹…åŒ–çš„ä»£ç çš„åˆ†å¼€ï¼Œä½†æ˜¯è¿™å¹¶æ²¡æœ‰åšæŒæ•°æ®æ“ä½œçš„å·¥ä½œé‡ã€‚è¿˜æœ‰ä¸€ç§ ORM æ¨¡å¼å«ä½œ Active Recordã€‚åœ¨ Active Record ä¸­ï¼Œæ¨¡å‹å±‚é›†æˆäº† ORM çš„åŠŸèƒ½ï¼Œä»–ä»¬åŠä»£è¡¨å®ä½“ï¼ŒåŒ…å«å› ä¸ºä¸šåŠ¡é€»è¾‘ï¼Œåˆæ˜¯æ•°æ®å¯¹è±¡ï¼Œå¹¶è´Ÿè´£æŠŠè‡ªå·±å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚\n\nActive Record æ¨¡å¼ä¸­çš„æ•°æ®å¯¹è±¡ä¸å†æ˜¯ PO å¯¹è±¡ï¼Œè€Œæ˜¯ DAOã€‚\n\nä¸€ç³»åˆ—çš„æ•°æ®åº“æ“ä½œç»„åˆèµ·æ¥ï¼Œç§°ä¹‹ä¸º Serviceã€‚Service å‘ä¸‹è´Ÿè´£ä¸æ•°æ®åº“æ‰“äº¤é“ï¼Œå‘ä¸Šè´Ÿè´£æ¥æ”¶é¡µé¢ä¼ é€’çš„å‚æ•°ä»¥åŠæ•°æ®çš„ä¼ è¾“ã€‚ç†è®ºä¸Šåº”è¯¥å¯¹ DAO è¿›é¡¹æŠ½è±¡åˆ°ä¸€ä¸ª Service ä¸­ã€‚\n\n### è§†å›¾å±‚\n\nPHP MVC ä¸­çš„æ˜¾ç¤ºå±‚å¼€å§‹æœç€è½»é‡åŒ–ã€API åŒ–å‘å±•äº†ã€‚\n\nå¢å¼ºä¸€ä¸ªç±»é€šå¸¸é€”å¾„ï¼š\n\n1. ä½¿ç”¨ `__call` `__set` `__get` ç­‰é­”æœ¯æ–¹æ³•\n2. ä½¿ç”¨åå°„\n3. ä½¿ç”¨ `trait`\n4. ä½¿ç”¨ç»§æ‰¿å’Œç»„åˆ\n\n### åˆæ­¥æ”¹è¿›\n\n`spl_autoload_register` ç»Ÿä¸€åŠ è½½æ–‡ä»¶ã€‚\n\n## Lonicera 0.2\n\n### å¼•å…¥å¼‚å¸¸æœºåˆ¶\n\nåŒæ—¶è®¾ç½® `set_error_handler` å’Œ `set_exception_handler`ã€‚PHP åŒæ—¶å­˜åœ¨é”™è¯¯å’Œå¼‚å¸¸ä¸¤ä¸ªäº’ä¸åŒ…å«çš„æ¦‚å¿µã€‚\n\n### æ‹¦æˆªå™¨ä¸æ’ä»¶\n\n`dispatch` ä¸­å¤„ç†ã€‚ä½¿ç”¨æ­£åˆ™åŒ¹é…ã€`call_user_func`ã€‚\n\n### Request å¢å¼ºä¸å®‰å…¨é˜²å¾¡\n\nåŒ…è£… `$_REQUEST`ã€‚\n\n## Lonicera 0.3\n\n### Composer ç±»åŠ è½½æœºåˆ¶\n\n`PSR-4`ã€‚\n\n### Model å¢å¼º\n\n`illuminata/database`ã€‚\n\n### æ§åˆ¶åè½¬ä¸ä¾èµ–æ³¨å…¥\n\n`Inversion of Control` `IoC`ï¼Œ`Dependency Injection` `DI`ã€‚\n\n- è°æ§åˆ¶è°ï¼ŸIoC å®¹å™¨æ§åˆ¶äº†å¯¹è±¡ã€‚\n- æ§åˆ¶ä»€ä¹ˆï¼Ÿä¸»è¦æ§åˆ¶äº†å¤–éƒ¨èµ„æºè·å–ï¼ˆä¸åªæ˜¯å¯¹è±¡åˆ›å»ºï¼Œè¿˜åŒ…æ‹¬æ¯”å¦‚æ–‡ä»¶ç­‰ï¼‰ã€‚\n\nä¼ ç»Ÿåº”ç”¨ç¨‹åºæ˜¯ï¼šç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡ä¸­ä¸»åŠ¨æ§åˆ¶å»ç›´æ¥è·å–ä¾èµ–å¯¹è±¡ï¼Œè€Œåè½¬åˆ™æ˜¯ï¼šç”±å®¹å™¨æ¥å¸®å¿™åˆ›å»ºåŠæ³¨å…¥ä¾èµ–å¯¹è±¡ã€‚ç”±äºæ˜¯å®¹å™¨å¸®æˆ‘ä»¬æŸ¥æ‰¾åŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œå¯¹è±¡åªæ˜¯è¢«åŠ¨æ¥å—ä¾èµ–å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯åè½¬ã€‚\n\n- å“ªäº›æ–¹é¢åè½¬äº†ï¼Ÿä¾èµ–å¯¹è±¡çš„è·å–è¢«åè½¬äº†ã€‚\n\nåœ¨æˆ‘ä»¬ä½¿ç”¨ UserOrder å¯¹è±¡çš„æ—¶å€™ï¼Œä¸å†éœ€è¦æ‰‹åŠ¨å»åˆ›å»º User å¯¹è±¡å’Œ Order å¯¹è±¡äº†ï¼Œè€Œæ˜¯ç›´æ¥é—® IoC å®¹å™¨å»è¦ UserOrder å¯¹è±¡ï¼ŒIoC å®¹å™¨ä¼šè´Ÿè´£æŸ¥æ‰¾ UserOrder çš„ä¾èµ–å¹¶æ›¿æˆ‘ä»¬åˆ›å»º User å¯¹è±¡å’Œ Order å¯¹è±¡ï¼Œå¹¶ç®¡ç†å®ƒä»¬ã€‚ä¹Ÿå°±æ˜¯è¯´å’Œæˆ‘ä»¬æ‰“äº¤é“çš„æ˜¯ IoC å®¹å™¨ã€‚\n\nä¾èµ–æ³¨å…¥ï¼Œæ˜¯ç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šå½¢è±¡æ¥è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€åœ°å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚ä¾èµ–æ³¨å…¥çš„ç›®çš„å¹¶éæ˜¯ä¸ºè½¯ä»¶ç³»ç»Ÿå¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œè€Œæ˜¯ä¸ºäº†æé«˜ç»„ä»¶é‡ç”¨çš„æ•ˆç‡ï¼Œå¹¶ä¸ºç³»ç»Ÿæ­å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„å¹³å°ã€‚\n\né€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°ã€‚\n\n- è°ä¾èµ–äºè°ï¼Ÿå½“ç„¶æ˜¯åº”ç”¨ç¨‹åºä¾èµ–äº IoC å®¹å™¨ã€‚\n- ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–ï¼Ÿåº”ç”¨ç¨‹åºéœ€è¦ IoC å®¹å™¨æ¥æä¾›å¯¹è±¡éœ€è¦çš„å¤–éƒ¨èµ„æºã€‚\n- è°æ³¨å…¥è°ï¼ŸIoC å®¹å™¨æ³¨å…¥åº”ç”¨ç¨‹åºæŸä¸ªå¯¹è±¡ï¼Œåº”ç”¨ç¨‹åºä¾èµ–çš„å¯¹è±¡ã€‚\n- æ³¨å…¥äº†ä»€ä¹ˆï¼Ÿæ³¨å…¥æŸä¸ªå¯¹è±¡æ‰€éœ€è¦çš„å¤–éƒ¨èµ„æº(åŒ…æ‹¬å¯¹è±¡ã€èµ„æºã€å¸¸é‡æ•°æ®)ã€‚\n\nIoC å’Œ DI æ˜¯ä¸¤ä¸ªç›¸è¾…ç›¸æˆçš„æ¦‚å¿µï¼ŒIoC çš„å®ç°æ˜¯ä½¿ç”¨äº† DIï¼Œè€Œ DI çš„ç›®çš„æ˜¯ä¸ºäº†å®ç° IoCã€‚å®é™…ä¸Šï¼Œå®ƒä»¬æ˜¯åŒä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒè§’åº¦æè¿°ã€‚\n\nä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè¿™ä¹ˆåšæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿä¾èµ–æ³¨å…¥å¸®æˆ‘ä»¬é™ä½äº†åˆ›å»ºå¯¹è±¡çš„æˆæœ¬ï¼Œä½¿å¾—å¯¹è±¡ä¹‹é—´æ¾è€¦åˆã€‚\n\n`composer` é€šè¿‡ `composer.json` æ¥ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä»è¿™ä¸ªè§’åº¦è®²ï¼Œ`composer` å°±æ˜¯ä¸€ä¸ª IoC å®¹å™¨ã€‚\n\n`PSR-11` `Psr\\Contanier\\ContainerInterface`ã€‚\n\n## DB SQL\n\n```sql\nSET NAMES utf8mb4;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- Table structure for user\n-- ----------------------------\nDROP TABLE IF EXISTS `user`;\nCREATE TABLE `user` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT 'åå­—',\n  `age` int(10) unsigned NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nSET FOREIGN_KEY_CHECKS = 1;\n```\n\n-- EOF --\n","tags":["php","composer"]},{"title":"Windows æ–‡æœ¬æ–‡ä»¶åˆ° Mac ä¸­æ–‡ä¹±ç ","url":"/2019/12/09/windows-text-file-to-mac-chinese-messy-code/","content":"\næ–‡æœ¬æ–‡ä»¶ä» Windows ç³»ç»Ÿå¤åˆ¶åˆ° Mac ç³»ç»Ÿä¸­æ–‡å‘ç”Ÿä¹±ç ï¼ŒåŸå› è‚¯å®šæ˜¯ç¼–ç é—®é¢˜ã€‚\n\n<!-- more -->\n\n## è§£å†³åŠæ³•\n\n[iconv | wikipedia](https://zh.wikipedia.org/wiki/Iconv) å®ƒçš„ä½œç”¨æ˜¯åœ¨å¤šç§å›½é™…ç¼–ç æ ¼å¼ä¹‹é—´è¿›è¡Œæ–‡æœ¬å†…ç çš„è½¬æ¢ã€‚\n\n```bash\niconv [OPTION...] [-f ENCODING] [-t ENCODING] [INPUTFILE...]\n\niconv -f GB18030 -t utf-8 <infile.txt> outfile.txt\n```\n\n## References\n\n- [æ–‡æœ¬æ–‡ä»¶ä» Windows æ‹·è´åˆ° Mac ä¹±ç  | super2bai](https://super2bai.github.io/codec/w2m.html)\n\n-- EOF --\n","tags":["mac"]},{"title":"Git log ç»Ÿè®¡åˆ†æ","url":"/2019/12/03/analyze-git-log/","content":"\n## ç»Ÿè®¡ä¸ªäººå¢åˆ è¡Œæ•°\n\n```bash\ngit config user.name\n\ngit log --author=\"zhaoyifan\" --pretty=tformat: --numstat | awk '{ add += $1; subs += $2; loc += $1 - $2 } END { printf \"added lines: %s, removed lines: %s, total lines: %s\\n\", add, subs, loc }' -\n```\n\n<!-- more -->\n\n```txt\nadded lines: 82813, removed lines: 53707, total lines: 29106\n```\n\n## ç»Ÿè®¡æ¯ä¸ªäººå¢åˆ è¡Œæ•°\n\n```bash\ngit log --shortstat | grep -E \"(Author: )(\\s*(\\w+)){2}|fil(e|es) changed\" | awk '\n{\n if($1 ~ /Author/) {\n  author = $2\" \"$3\n } else {\n  files[author]+=$1\n  inserted[author]+=$4\n  deleted[author]+=$6\n }\n}\nEND { for (key in files) { print \"Author: \" key \"\\n\\tfiles changed: \", files[key], \"\\n\\tlines inserted: \", inserted[key], \"\\n\\tlines deleted: \", deleted[key] } }\n'\n```\n\n## ç»Ÿè®¡æ¯ä¸ªäººæäº¤æ¬¡æ•°\n\n```bash\ngit shortlog -sn --no-merges\n```\n\n## å¿½ç•¥æŸäº›è·¯å¾„çš„æ›´æ”¹\n\n```bash\ngit log -- . \":(exclude)sub\"\ngit log -- . \":!sub\"\n```\n\n## cloc\n\n[AlDanial/cloc - cloc counts blank lines, comment lines, and physical lines of source code in many programming languages.](https://github.com/AlDanial/cloc)\n\n```bash\ncloc source/\n\n     186 text files.\n     186 unique files.\n       3 files ignored.\n\ngithub.com/AlDanial/cloc v 1.84  T=0.16 s (1112.3 files/s, 138678.8 lines/s)\n-------------------------------------------------------------------------------\nLanguage                     files          blank        comment           code\n-------------------------------------------------------------------------------\nMarkdown                       183           6028              0          16788\n-------------------------------------------------------------------------------\nSUM:                           183           6028              0          16788\n-------------------------------------------------------------------------------\n```\n\n## Git Fame\n\n[Git Fame - A command-line tool that helps you summarize and pretty-print git collaborators based on contributions](http://oleander.io/git-fame-rb/)\n\n```txt\ngem install git_fame\ncd /path/to/gitdir && git fame\nTotal number of files: 2,053\nTotal number of lines: 63,132\nTotal number of commits: 4,330\n\n+------------------------+--------+---------+-------+--------------------+\n| name                   | loc    | commits | files | percent            |\n+------------------------+--------+---------+-------+--------------------+\n| Johan SÃ¸rensen         | 22,272 | 1,814   | 414   | 35.3 / 41.9 / 20.2 |\n| Marius Mathiesen       | 10,387 | 502     | 229   | 16.5 / 11.6 / 11.2 |\n| Jesper Josefsson       | 9,689  | 519     | 191   | 15.3 / 12.0 / 9.3  |\n| Ole Martin Kristiansen | 6,632  | 24      | 60    | 10.5 / 0.6 / 2.9   |\n| Linus Oleander         | 5,769  | 705     | 277   | 9.1 / 16.3 / 13.5  |\n| Fabio Akita            | 2,122  | 24      | 60    | 3.4 / 0.6 / 2.9    |\n| August Lilleaas        | 1,572  | 123     | 63    | 2.5 / 2.8 / 3.1    |\n| David A. Cuadrado      | 731    | 111     | 35    | 1.2 / 2.6 / 1.7    |\n| Jonas Ã„ngeslevÃ¤        | 705    | 148     | 51    | 1.1 / 3.4 / 2.5    |\n| Diego Algorta          | 650    | 6       | 5     | 1.0 / 0.1 / 0.2    |\n| Arash Rouhani          | 629    | 95      | 31    | 1.0 / 2.2 / 1.5    |\n| Sofia Larsson          | 595    | 70      | 77    | 0.9 / 1.6 / 3.8    |\n| Tor Arne VestbÃ¸        | 527    | 51      | 97    | 0.8 / 1.2 / 4.7    |\n| spontus                | 339    | 18      | 42    | 0.5 / 0.4 / 2.0    |\n| Pontus                 | 225    | 49      | 34    | 0.4 / 1.1 / 1.7    |\n+------------------------+--------+---------+-------+--------------------+\n```\n\n## è®© git log çš„è¾“å‡ºæ¼‚äº®ç®€æ´\n\n```bash\ngit config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an %ae>%Creset' --abbrev-commit\"\n```\n\n> https://gist.github.com/johanmeiring/3002458\n\nåœ¨ `~/.gitconfig` çœ‹åˆ°ï¼š\n\n```bash\n[alias]\n    lg = log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an %ae>%Creset' --abbrev-commit\n```\n\nè¿™å…¶ä¸­çš„å ä½ç¬¦çš„è§£é‡Šï¼š\n\n- %Credï¼šå°†é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²\n- %Cresetï¼šé‡ç½®é¢œè‰²\n- %C(yellow)ï¼šå°†é¢œè‰²è®¾ç½®ä¸ºé»„è‰²\n- %hï¼šç¼©ç•¥çš„æäº¤å“ˆå¸Œå€¼\n- %dï¼šref namesï¼ˆä¸çŸ¥é“è¯¥æ€ä¹ˆè§£é‡Š ğŸ˜†ï¼‰\n- %sï¼šæäº¤æ—¶çš„ message\n- %crï¼šç›¸å¯¹çš„æäº¤æ—¶é—´ã€‚å¯ä»¥æ¢æˆ%ciï¼Œå±•ç¤ºçš„æ˜¯å¹´æœˆæ—¥æ—¶åˆ†ç§’ã€‚\n- %anï¼šæäº¤äººçš„ name\n- %aeï¼šæäº¤äººçš„é‚®ç®±\n\næ›´å¤šå ä½ç¬¦ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://git-scm.com/docs/pretty-formats\n\n## References\n\n- [Git count lines by author | gist ezamelczyk](https://gist.github.com/ezamelczyk/78b9c0dd095f8706a3f6a41e8eae0afd)\n- [Making 'git log' ignore changes for certain paths | stackoverflow](https://stackoverflow.com/questions/5685007/making-git-log-ignore-changes-for-certain-paths)\n- [è®© git log çš„è¾“å‡ºæ¼‚äº®ç®€æ´ | letianbiji](https://www.letianbiji.com/git/git-log.html)\n\n-- EOF --\n","tags":["git"]},{"title":"Git æ‰¹é‡ä¿®æ”¹å†å² commit ä¸­ user.email","url":"/2019/12/02/git-modify-history-commont-user-email/","content":"\næ³¨æ„ï¼š**æ­¤æ“ä½œä¼šä¿®æ”¹ Git å†å²è®°å½•**ï¼Œæ­£å¼å·¥ä½œç¯å¢ƒä¸å…è®¸ã€‚\n\n<!-- more -->\n\næŸ¥è¯¢éƒ½æœ‰ä»€ä¹ˆï¼š\n\n```bash\ngit log --format='%aN %aE' | sort -u\n```\n\næ³¨ï¼šä¸€ä¸ªç‰¹æ®Šæƒ…å†µå¦‚æœ email æ²¡è¢«è®¾ç½®è¿‡ OLD_EMAIL å¯ä»¥å¡« `user.name`ã€‚\n\n- OLD_EMAIL åŸæ¥çš„é‚®ç®±\n- CORRECT_NAME æ›´æ­£çš„åå­—\n- CORRECT_EMAIL æ›´æ­£çš„é‚®ç®±\n\n```bash\ngit filter-branch -f --env-filter '\nOLD_EMAIL=\"old@qq.com\"\nCORRECT_NAME=\"MyName\"\nCORRECT_EMAIL=\"new@gmail.com\"\nif [ \"$GIT_COMMITTER_EMAIL\" = \"$OLD_EMAIL\" ]\nthen\n    export GIT_COMMITTER_NAME=\"$CORRECT_NAME\"\n    export GIT_COMMITTER_EMAIL=\"$CORRECT_EMAIL\"\nfi\nif [ \"$GIT_AUTHOR_EMAIL\" = \"$OLD_EMAIL\" ]\nthen\n    export GIT_AUTHOR_NAME=\"$CORRECT_NAME\"\n    export GIT_AUTHOR_EMAIL=\"$CORRECT_EMAIL\"\nfi\n' --tag-name-filter cat -- --branches --tags\n```\n\nå› ä¸ºä¿®æ”¹äº† Git å†å²æ‰€æœ‰è¦ä½¿ç”¨å¼ºåˆ¶æ¨é€ï¼š\n\n```bash\ngit push --f --tags\n```\n\nGitLab æœ‰ master åˆ†æ”¯ä¿æŠ¤çš„ç­–ç•¥ï¼š\n\n```bash\nremote: GitLab: You are not allowed to force push code to a protected branch on this project.\n```\n\nåœ¨ GitLab ä¸­ï¼šProject(é¡¹ç›®) -> Setting -> Repository èœå•ä¸‹é¢çš„ Protected branches æŠŠ master çš„ä¿æŠ¤å»æ‰å°±å¯ä»¥äº†ã€‚\n\n## References\n\n> - [Git æ‰¹é‡ä¿®æ”¹å†å² commit ä¸­çš„ user.name å’Œ user.email | segmentfault](https://segmentfault.com/a/1190000008032330)\n\n-- EOF --\n","tags":["git"]},{"title":"CentOS yum å‡çº§ git ç‰ˆæœ¬","url":"/2019/11/25/centos-upgrade-git-by-yum/","content":"\nå…ˆå»å®˜ç½‘çœ‹çœ‹ [Download for Linux and Unix](https://git-scm.com/download/linux):\n\n```txt\nRHEL and derivatives typically ship older versions of git. You can download a tarball and build from source, or use a 3rd-party repository such as the [IUS Community Project](https://ius.io/) to obtain a more recent version of git.\n```\n\n<!-- more -->\n\nRHEL å’Œè¡ç”Ÿé€šå¸¸æä¾›è¾ƒè€ç‰ˆæœ¬çš„ gitã€‚æ‚¨å¯ä»¥ä¸‹è½½ tarball å¹¶ä»æºä»£ç æ„å»ºï¼Œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹å­˜å‚¨åº“ï¼Œå¦‚ [IUS Community Project](https://ius.io/) æ¥è·å¾—æœ€æ–°ç‰ˆæœ¬çš„ gitã€‚\n\n## ä½¿ç”¨ IUS\n\nRHEL/CentOS 7\n\n```bash\nyum install \\\nhttps://repo.ius.io/ius-release-el7.rpm \\\nhttps://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n```\n\nå®‰è£…æ–°ç‰ˆ gitï¼š\n\nius é€šå¸¸ä¼šåœ¨é«˜ç‰ˆæœ¬çš„è½¯ä»¶ååé¢ + u\n\n```bash\nyum list git\n```\n\nå¦‚æœä½ å·²ç»è£…æœ‰ä½ç‰ˆæœ¬çš„ gitï¼Œä½ éœ€è¦å…ˆ removeï¼ˆå¦åˆ™å®‰è£…çš„æ—¶å€™ä¼šæŠ¥é”™ï¼‰\n\n```bash\nyum remove git\n```\n\nå®‰è£… 2.0 ä»¥ä¸Šç‰ˆæœ¬çš„ git\n\n```bash\nyum install git2u\n```\n\n## WANdisco\n\nå¦ä¸€ä¸ªæºï¼š[WANdisco Replication Binaries](http://docs.wandisco.com/git/binaries/)\n\n```bash\nsudo vi /etc/yum.repos.d/wandisco-git.repo\n```\n\nwandisco-git.repo\n\n```txt\n[wandisco-git]\nname=Wandisco GIT Repository\nbaseurl=http://opensource.wandisco.com/centos/7/git/$basearch/\nenabled=1\ngpgcheck=1\ngpgkey=http://opensource.wandisco.com/RPM-GPG-KEY-WANdisco\n```\n\nImport the repository GPG keys with:\n\n```bash\nsudo rpm --import http://opensource.wandisco.com/RPM-GPG-KEY-WANdisco\n```\n\n```bash\nsudo yum remove git\n\nsudo yum install git\ngit --version\n```\n\n## References\n\n- [How To Install Git on CentOS 7 | linuxize](https://linuxize.com/post/how-to-install-git-on-centos-7/)\n- [How to install latest version of git on CentOS 7.x/6.x | stackoverflow](https://stackoverflow.com/questions/21820715/how-to-install-latest-version-of-git-on-centos-7-x-6-x)\n\n-- EOF --\n","tags":["git","centos"]},{"title":"CRLF will be replaced by LF","url":"/2019/11/22/crlf-will-be-replaced-by-lf/","content":"\n```bash\n$ git add .\n\nwarning: CRLF will be replaced by LF in X.\n```\n\n- CRLFï¼šwindows ç¯å¢ƒä¸‹çš„æ¢è¡Œç¬¦\n- LFï¼šlinux ç¯å¢ƒä¸‹çš„æ¢è¡Œç¬¦\n\nè¿™ä¸ªé”™è¯¯çš„æ„æ€ï¼Œå°±æ˜¯æ–‡ä»¶ä¸­å­˜åœ¨ä¸¤ç§ç¯å¢ƒçš„æ¢è¡Œç¬¦ï¼Œgit ä¼šè‡ªåŠ¨æ›¿æ¢ CRLF ä¸º LF ï¼Œæ‰€ä»¥æç¤ºè­¦å‘Šã€‚\n\n<!-- more -->\n\né¦–å…ˆæ¨èæ‰©å±•é˜…è¯»ï¼š[é…ç½® Git å¤„ç†è¡Œç»“æŸç¬¦ | GitHub](https://help.github.com/cn/github/using-git/configuring-git-to-handle-line-endings)\n\næˆ‘é¡¹ç›®ä¸­æ˜¯é…ç½®äº† `.gitattributes` çš„ï¼š\n\n```txt\n# Set the default behavior, in case people don't have core.autocrlf set.\n* text=auto\n\n# Explicitly declare text files you want to always be normalized and converted\n# to native line endings on checkout.\n*.c text\n*.h text\n\n# Declare files that will always have CRLF line endings on checkout.\n*.sln text eol=crlf\n\n# Denote all files that are truly binary and should not be modified.\n*.png binary\n*.jpg binary\n```\n\n## .gitattributes\n\nå…¬å¼ï¼š`è¦åŒ¹é…çš„æ–‡ä»¶æ¨¡å¼ å±æ€§1 å±æ€§2 ...`ã€‚\n\n### ç¤ºä¾‹ 1\n\n```txt\n* text=auto\n```\n\nå¯¹ä»»ä½•æ–‡ä»¶ï¼Œè®¾ç½® text=autoï¼Œè¡¨ç¤ºæ–‡ä»¶çš„è¡Œå°¾è‡ªåŠ¨è½¬æ¢ã€‚å¦‚æœæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™åœ¨æ–‡ä»¶å…¥ Git åº“æ—¶ï¼Œè¡Œå°¾è‡ªåŠ¨è½¬æ¢ä¸º LFã€‚å¦‚æœå·²ç»åœ¨å…¥ Git åº“ä¸­çš„æ–‡ä»¶çš„è¡Œå°¾ä¸º CRLFï¼Œåˆ™è¯¥æ–‡ä»¶åœ¨å…¥ Git åº“æ—¶ï¼Œä¸å†è½¬æ¢ä¸º LFã€‚\n\n### ç¤ºä¾‹ 2\n\n```txt\n*.txt text\n```\n\nå¯¹äº txt æ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œè¡Œå°¾è§„èŒƒåŒ–ã€‚\n\n### ç¤ºä¾‹ 3\n\n```txt\n*.jpg -text\n\n*.jpg binary\n```\n\nå¯¹äº jpg æ–‡ä»¶ï¼Œæ ‡è®°ä¸ºéæ–‡æœ¬æ–‡ä»¶ï¼Œä¸è¿›è¡Œä»»ä½•çš„è¡Œå°¾è½¬æ¢ã€‚`*.jpg -text` å¯èƒ½æ˜¯æ—§ç‰ˆæœ¬çš„å†™æ³•ã€‚\n\n### ç¤ºä¾‹ 4\n\n```txt\n*.vcproj text eol=crlf\n```\n\nå¯¹äº vcproj æ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å…¥ Git åº“æ—¶è¿›è¡Œè§„èŒƒåŒ–ï¼Œå³è¡Œå°¾ä¸º LFã€‚ä½†æ˜¯åœ¨æ£€å‡ºåˆ°å·¥ä½œç›®å½•æ—¶ï¼Œè¡Œå°¾è‡ªåŠ¨è½¬æ¢ä¸º CRLFã€‚\n\n### ç¤ºä¾‹ 5\n\n```txt\n*.sh text eol=lf\n```\n\nå¯¹äº sh æ–‡ä»¶ï¼Œæ ‡è®°ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å…¥ Git åº“æ—¶è¿›è¡Œè§„èŒƒåŒ–ï¼Œå³è¡Œå°¾ä¸º LFã€‚åœ¨æ£€å‡ºåˆ°å·¥ä½œç›®å½•æ—¶ï¼Œè¡Œå°¾ä¹Ÿä¸ä¼šè½¬æ¢ä¸º CRLFï¼ˆå³ä¿æŒ LFï¼‰ã€‚\n\n### ç¤ºä¾‹ 6\n\n```txt\n*.py eol=lf\n```\n\nå¯¹äº py æ–‡ä»¶ï¼Œåªé’ˆå¯¹å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œè¡Œå°¾ä¸º LFã€‚\n\n## è¿˜æ˜¯æœ‰é—®é¢˜\n\nåœ¨é¡¹ç›®ä¸­å·²ç»æ·»åŠ  `.gitattributes` æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ˜¯å‡ºç°äº†æŠ¥é”™ï¼Œè¿™æ—¶è¦æ£€æŸ¥ git çš„ç‰ˆæœ¬ã€‚ï¼ˆCentOS è‡ªå¸¦çš„ git ç‰ˆæœ¬è¾ƒä½ï¼‰\n\n> å¯ä»¥å‚è€ƒï¼š[CentOS yum å‡çº§ git ç‰ˆæœ¬](https://zyf.im/2019/11/25/centos-upgrade-git-by-yum/)\n\nåæ¥è¿˜æŸ¥åˆ°äº†ä¸€ä¸ªæ–¹æ³•ï¼Œ`.gitattributes`ï¼š\n\n```txt\n* -crlf\n```\n\n## References\n\n- [Git çš„ gitattributes æ–‡ä»¶è¯¦è§£ | csdn](https://blog.csdn.net/taiyangdao/article/details/78484623)\n- [gitattributes - Defining attributes per path | git-scm](https://git-scm.com/docs/gitattributes)\n- [How to make Git ignore different line endings | rtuin](https://www.rtuin.nl/2013/02/how-to-make-git-ignore-different-line-endings/)\n\n-- EOF --\n","tags":["git"]},{"title":"Vue Code Snippet","url":"/2019/08/08/vue-code-snippet/","content":"\n<!-- more -->\n\n## watch å¯¹è±¡çš„å±æ€§\n\n```javascript\ndata: {\n   a: 100,\n   msg: {\n      channel: \"éŸ³ä¹\",\n      style: \"æ´»æ³¼\"\n   }\n},\nwatch: {\n   a(newval, oldVal) {\n      console.log(\"new: %s, old: %s\", newval, oldVal);\n   }\n}\n```\n\n```javascript\nwatch: {\n   msg: {\n      handler(newValue, oldValue) {\n         console.log(newValue)\n      },\n      // æ·±åº¦ç›‘å¬\n      deep: true\n   }\n}\n```\n\nç›‘å¬å¯¹è±¡å†…çš„æŸä¸€å…·ä½“å±æ€§ï¼Œå¯ä»¥é€šè¿‡ `computed` åšä¸­é—´å±‚æ¥å®ç°ï¼š\n\n```javascript\ncomputed: {\n   channel() {\n      return this.msg.channel\n   }\n},\nwatch:{\n   channel(newValue, oldValue) {\n      console.log('new: %s, old: %s', newval, oldVal)\n   }\n}\n```\n\n## åˆ¤æ–­ data ä¸­çš„å¯¹è±¡æ˜¯å¦ä¸ºç©º\n\n1ã€åˆ©ç”¨ `jQuery` çš„ `isEmptyObject`ï¼š\n\n```javascript\n$.isEmptyObject(data.list);\n```\n\nå®ç°æºç ï¼š\n\n```javascript\nisEmptyObject: function(obj) {\n   var name;\n   for (name in obj) {\n      return false;\n   }\n   return true;\n}\n```\n\n2ã€è·å–åˆ°å¯¹è±¡ä¸­çš„å±æ€§åï¼Œå­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé€šè¿‡åˆ¤æ–­æ•°ç»„çš„ `length` æ¥åˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼š\n\n```javascript\nvar arr = Object.getOwnPropertyNames(data);\nalert(arr.length == 0); // true\n```\n\nES6ï¼š\n\n```javascript\nvar arr = Object.keys(data.list);\nalert(arr.length == 0); // true\n```\n\n3ã€è½¬åŒ–ä¸º `json` å­—ç¬¦ä¸²ï¼Œå†åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä¸º `{}`ï¼š\n\n```javascript\nvar b = JSON.stringify(data) == \"{}\";\nalert(b); // true\n```\n\n## å…³é—­ webpack-dev-server è‡ªåŠ¨åˆ·æ–°\n\næ–‡ä»¶ä¿å­˜åé¡µé¢åˆ·æ–°ï¼Œåˆ·çš„çœ¼æ™•ã€‚\n\n```js\ndevServer: {\n  ...\n  hot: false,\n  inline: false,\n  liveReload: false\n}\n```\n\næ³¨é‡Šæ‰ `plugins` ä¸­çš„ç›¸å…³æ’ä»¶ã€‚\n\n```js\nplugins: [\n   // new webpack.HotModuleReplacementPlugin()\n],\n```\n\n> å¿…é¡»æœ‰ webpack.HotModuleReplacementPlugin æ‰èƒ½å®Œå…¨å¯ç”¨ HMRã€‚å¦‚æœ webpack æˆ– webpack-dev-server æ˜¯é€šè¿‡ --hot é€‰é¡¹å¯åŠ¨çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ’ä»¶ä¼šè¢«è‡ªåŠ¨æ·»åŠ ï¼Œæ‰€ä»¥ä½ å¯èƒ½ä¸éœ€è¦æŠŠå®ƒæ·»åŠ åˆ° webpack.config.js ä¸­ã€‚\n\n## nextTick\n\nåœ¨ Vue ç”Ÿå‘½å‘¨æœŸçš„ `created()` é’©å­å‡½æ•°è¿›è¡Œçš„ DOM æ“ä½œä¸€å®šè¦æ”¾åœ¨ `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\nåœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„ DOM ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿› `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\n> Vue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ã€‚åªè¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚å¦‚æœåŒä¸€ä¸ª `watcher` è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œä¸Šéå¸¸é‡è¦ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯ \"tick\" ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŸç”Ÿçš„ `Promise.then` å’Œ `MessageChannel`ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ `setTimeout(fn, 0)` ä»£æ›¿ã€‚\n\n## é”®ç›˜ç›‘å¬äº‹ä»¶\n\n> [æŒ‰é”®ä¿®é¥°ç¬¦ | vue](https://cn.vuejs.org/v2/guide/events.html#%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6)\n\n```html\n<input type=\"text\" @keyup.esc=\"KeyUpEsc\" />\n```\n\n> [å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶ | vue](https://cn.vuejs.org/v2/guide/components-custom-events.html#%E5%B0%86%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6)\n\nä½¿ç”¨ element ç»„ä»¶åº“çš„ el-input æ ‡ç­¾ï¼Œç»‘å®š delete é”®ï¼š\n\n```html\n<el-input\n  v-model=\"input\"\n  placeholder=\"è¯·è¾“å…¥å†…å®¹\"\n  @keyup.delete.native=\"KeyUpDelete\"\n></el-input>\n```\n\nä¸ºä»€ä¹ˆè¿™æ¬¡ç»‘å®šäº‹ä»¶å¤šä¸€ä¸ª `.native` ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯å› ä¸º element-ui å°è£…äº†ä¸ª div åœ¨ input æ ‡ç­¾å¤–é¢ï¼ŒæŠŠåŸæ¥çš„äº‹ä»¶éšè—äº†ï¼Œæ‰€ä»¥å¦‚æœä¸åŠ  `.native` çš„è¯ï¼ŒæŒ‰é”®ä¸ä¼šç”Ÿæ•ˆã€‚\n\nä¸Šé¢ä¸¤ç§å®ç°æ•ˆæœæ˜¯å½“ input æ ‡ç­¾è·å–åˆ° _ç„¦ç‚¹_ çš„æ—¶å€™ï¼Œæ‰èƒ½ç›‘å¬åˆ°é”®ç›˜ï¼Œä¸‹é¢è¿™ç§æ˜¯å…¨å±€ç›‘å¬ enter é”®ï¼Œæ˜¯æŠŠç›‘å¬äº‹ä»¶ç»‘å®šåˆ° document ä¸Šï¼ˆç™»å½•é¡µé¢å¸¸ç”¨ï¼‰ï¼š\n\n```js\ncreated: function() {\n   var _this = this;\n   document.onkeydown = function(e) {\n      let key = window.event.keyCode;\n      if (key == 13) {\n            _this.submit();\n      }\n   };\n},\n```\n\n## é”®ç›˜å›è½¦åé¡µé¢è¢«åˆ·æ–°\n\nform å›è½¦åæ‰§è¡ŒæŸ¥è¯¢æ–¹æ³•ï¼Œä½†æ˜¯å´é‡æ–°åˆ·æ–°äº†é¡µé¢ï¼Œå¹¶ä¸”è·¯ç”±å¤šäº†ä¸€ä¸ªé—®å·ï¼Œ`http://localhost:3009/?#/admin`ã€‚\n\nè§£å†³æ–¹æ¡ˆï¼š`el-from` åŠ ä¸Š `@submit.native.prevent`ï¼š\n\n```html\n<el-form @submit.native.prevent>\n  <el-form-item>\n    <el-input @keyup.enter.native=\"handleInputConfirm(obj)\"> </el-input>\n  </el-form-item>\n</el-form>\n\n<script>\n  export default {\n    methods: {\n      handleInputConfirm(obj) {\n        // ... æäº¤å†…å®¹\n      },\n    },\n  };\n</script>\n```\n\nåŸå› ï¼šå½“ä¸€ä¸ª `form` å…ƒç´ ä¸­åªæœ‰ä¸€ä¸ªè¾“å…¥æ¡†æ—¶ï¼Œåœ¨è¯¥è¾“å…¥æ¡†ä¸­æŒ‰ä¸‹å›è½¦åº”æäº¤è¯¥è¡¨å•ã€‚å¦‚æœå¸Œæœ›é˜»æ­¢è¿™ä¸€é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥åœ¨æ ‡ç­¾ä¸Šæ·»åŠ  `@submit.native.prevent`ã€‚\n\n> [vue é”®ç›˜å›è½¦äº‹ä»¶å¯¼è‡´é¡µé¢åˆ·æ–°çš„é—®é¢˜ï¼Œè·¯ç”±å¤šäº†ä¸€ä¸ªé—®å· | cnblogs](https://www.cnblogs.com/hibiscus-ben/p/10861062.html)\n\nè§£å†³æ–¹æ¡ˆäºŒï¼šä¸ºè¡¨å•å…ƒç´ å¢åŠ å±æ€§ `onSubmit=\"return false\"`ã€‚\n\n> [Vue element-ui é”®ç›˜å›è½¦äº‹ä»¶è¡¨å•è‡ªåŠ¨æäº¤é€ æˆé¡µé¢åˆ·æ–°é—®é¢˜](https://weiku.co/article/297/)\n\n## .sync ä¿®é¥°ç¬¦\n\n[.sync ä¿®é¥°ç¬¦ | vue](https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6)\n\n```html\n<history-dialog\n  :historys=\"historyTable\"\n  :dialogVisible.sync=\"dialogHistoryTableVisible\"\n/>\n```\n\n```js\nmethods: {\n   onClose() {\n      this.$emit(\"update:dialogVisible\", false);\n   },\n},\n```\n\n- [ã€Vueã€‘Vue ä¸­çš„çˆ¶å­ç»„ä»¶é€šè®¯ä»¥åŠä½¿ç”¨ sync åŒæ­¥çˆ¶å­ç»„ä»¶æ•°æ® | penghuwan](https://www.cnblogs.com/penghuwan/p/7473375.html)\n\n## ä¼˜åŒ–å›¾ç‰‡åŠ è½½å¤±è´¥\n\n```html\n<div>\n  <img :src=\"item.picture\" @error.once=\"handleImgError($event)\" />\n</div>\n```\n\n```javascript\nhandleImgError (e) {\n  e.currentTarget.src = \"http://www.ianbiangou.cn/index/ICON2.png\"\n}\n```\n\n## æ•°æ®ç»‘å®š\n\n```javascript\nthis.form = {}; // ä¸è¦ç”¨è¿™ç§ this.form = '';\n```\n\n## References\n\n- [jQuery.isEmptyObject() å‡½æ•°è¯¦è§£ | csdn](https://blog.csdn.net/wangqing84411433/article/details/79582888)\n- [ç®€å•ç†è§£ Vue ä¸­çš„ nextTick | juejin](https://juejin.im/post/5a6fdb846fb9a01cc0268618)\n- [Vue ä¸­é”®ç›˜ç›‘å¬äº‹ä»¶ï¼ˆè§£å†³ element ç›‘å¬é”®ç›˜ä¸ç”Ÿæ•ˆï¼‰| jianshu](https://www.jianshu.com/p/f2172afaf9bf)\n- [å›¾ç‰‡åŠ è½½å¤±è´¥ä¼˜åŒ–å¤„ç† | cnblogs](https://www.cnblogs.com/zhuzhenwei918/p/6891368.html)\n- [How to disable webpack dev server auto reload? | stackoverflow](https://stackoverflow.com/questions/41797704/how-to-disable-webpack-dev-server-auto-reload)\n","tags":["vue","code-snippet"]},{"title":"npx å…¥é—¨ä½¿ç”¨","url":"/2019/07/17/npx-getting-started/","content":"\nä»Šå¤©åœ¨ä½¿ç”¨çš„ [Gulp](https://gulpjs.com/) æ—¶çœ‹åˆ°é¦–é¡µçš„ä¸€æ®µå‘½ä»¤ï¼š\n\n```bash\n...\n$ npx -p touch nodetouch gulpfile.js\n...\n```\n\n[npx](https://www.npmjs.com/package/npx) æ˜¯ä¸ªå•¥ï¼Ÿå†³å®šä¸€æ¢ç©¶ç«Ÿã€‚\n\n<!-- more -->\n\n## è°ƒç”¨é¡¹ç›®å®‰è£…çš„æ¨¡å—\n\n`npx` æ˜¯ npm çš„è‡ªå¸¦æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ‰‹åŠ¨å®‰è£…ä¸ºï¼š\n\n```bash\nnpm install -g npx\n```\n\n`npx` - execute npm package binaries. å®ƒè§£å†³çš„é—®é¢˜æ˜¯ï¼šæ›´æ–¹ä¾¿çš„ä»æœ¬åœ° `node_modules/.bin` æˆ–ä¸­å¤®ç¼“å­˜ä¸­æ‰§è¡Œå‘½ä»¤ã€‚\n\næ¯”å¦‚é¡¹ç›®å®‰è£…äº† `gulp` éœ€è¦æ‰§è¡Œå‘½ä»¤æ—¶éœ€è¦ï¼š\n\n```bash\nnode_modules/.bin/gulp -v\n```\n\nå¦‚æœä½¿ç”¨ `npx` åªéœ€è¦ï¼š\n\n```bash\nnpx gulp -v\n```\n\n`npx` çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šåˆ° `node_modules/.bin` è·¯å¾„å’Œç¯å¢ƒå˜é‡ `$PATH` é‡Œé¢ï¼Œæ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨ã€‚ç”±äº `npx` ä¼šæ£€æŸ¥ç¯å¢ƒå˜é‡ `$PATH`ï¼Œæ‰€ä»¥ç³»ç»Ÿå‘½ä»¤ä¹Ÿå¯ä»¥è°ƒç”¨ã€‚\n\n```bash\n# ç­‰åŒäº ls\nnpx ls\n```\n\næ³¨æ„ï¼Œ`Bash` å†…ç½®çš„å‘½ä»¤ä¸åœ¨ `$PATH` é‡Œé¢ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ã€‚æ¯”å¦‚ï¼Œ`cd` æ˜¯ `Bash` å‘½ä»¤ï¼Œå› æ­¤å°±ä¸èƒ½ç”¨ `npx cd`ã€‚\n\n## é¿å…å…¨å±€å®‰è£…æ¨¡å—\n\n`create-react-app` è¿™ä¸ªæ¨¡å—æ˜¯å…¨å±€å®‰è£…ï¼Œ`npx` å¯ä»¥è¿è¡Œå®ƒï¼Œè€Œä¸”ä¸è¿›è¡Œå…¨å±€å®‰è£…ï¼š\n\n```bash\nnpx create-react-app my-react-app\n```\n\nä¸Šé¢ä»£ç è¿è¡Œæ—¶ï¼Œ`npx` å°† `create-react-app` ä¸‹è½½åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä½¿ç”¨ä»¥åå†åˆ é™¤ã€‚ä»¥åå†æ¬¡æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œä¼šé‡æ–°ä¸‹è½½ `create-react-app`ã€‚\n\næ³¨æ„ï¼Œåªè¦ `npx` åé¢çš„æ¨¡å—æ— æ³•åœ¨æœ¬åœ°å‘ç°ï¼Œå°±ä¼šä¸‹è½½åŒåæ¨¡å—ã€‚æ¯”å¦‚ï¼Œæœ¬åœ°æ²¡æœ‰å®‰è£… `http-server` æ¨¡å—ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šè‡ªåŠ¨ä¸‹è½½è¯¥æ¨¡å—ï¼Œåœ¨å½“å‰ç›®å½•å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡ã€‚\n\n```bash\nnpx http-server\n```\n\n## `--no-install` å’Œ `--ignore-existing` å‚æ•°\n\nå¦‚æœæƒ³è®© `npx` å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ `--no-install` å‚æ•°ã€‚å¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚\n\n```bash\nnpx --no-install http-server\n```\n\nåè¿‡æ¥ï¼Œå¦‚æœå¿½ç•¥æœ¬åœ°çš„åŒåæ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ `--ignore-existing` å‚æ•°ã€‚\n\n## ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Node\n\nå¯ä»¥æŒ‡å®šæŸä¸ªç‰ˆæœ¬çš„ `Node` è¿è¡Œè„šæœ¬ï¼ŒæŸäº›åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ‡æ¢ `Node` ç‰ˆæœ¬ï¼Œè¦æ¯” `nvm` é‚£æ ·çš„ç‰ˆæœ¬ç®¡ç†å™¨æ–¹ä¾¿ä¸€äº›ã€‚\n\n```bash\nnpx node@0.12.8 -v\nv0.12.8\n```\n\n## `-p` å‚æ•°\n\n`-p` å‚æ•°ç”¨äºæŒ‡å®š `npx` æ‰€è¦å®‰è£…çš„æ¨¡å—ï¼Œæ‰€ä»¥ä¸Šä¸€èŠ‚çš„å‘½ä»¤å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚\n\n```bash\n$ npx -p node@0.12.8 node -v\nv0.12.8\n```\n\nä¸Šé¢å‘½ä»¤å…ˆæŒ‡å®šå®‰è£… `node@0.12.8` ï¼Œç„¶åå†æ‰§è¡Œ `node -v` å‘½ä»¤ã€‚\n\næ‰€ä»¥å¼€å¤´æ—¶çš„ç–‘é—® `$ npx -p touch nodetouch gulpfile.js` ä¹Ÿå°±è§£ç­”äº†ï¼Œå°±æ˜¯å…ˆå®‰è£… `touch` åœ¨æ‰§è¡Œ `nodetouch gulpfile.js`ã€‚\n\n## æ‰§è¡Œ GitHub æºç \n\n```bash\n# æ‰§è¡Œ Gist ä»£ç \n$ npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32\n\n# æ‰§è¡Œä»“åº“ä»£ç \n$ npx github:piuccio/cowsay hellos\n```\n\næ³¨æ„ï¼Œè¿œç¨‹ä»£ç å¿…é¡»æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œå³å¿…é¡»åŒ…å« `package.json` å’Œå…¥å£è„šæœ¬ã€‚\n\n## References\n\n- [npx ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2019/02/npx.html)\n\n-- EOF --\n","tags":["node-js","npm"]},{"title":"VSCode ä½¿ç”¨ç»éªŒ","url":"/2019/06/11/vscode-using-experience/","content":"\n## ç¼–è¾‘ settings.json\n\n`command + ,` å³ä¸Šè§’ç‚¹å‡» `æ‰“å¼€è®¾ç½®`ã€‚\n\n```json\n// é€šè¿‡æ•´ä½“æ”¾å¤§çª—å£æ¯”ä¾‹\n\"window.zoomLevel\": 1.1,\n// å­—ä½“\n\"editor.fontSize\": 14,\n// è½¯æ¢è¡Œ\n\"editor.wordWrap\": \"on\",\n```\n\n<!-- more -->\n\n## Settings Sync æ‰©å±•\n\nåˆ©ç”¨ Gist åŒæ­¥å¤‡ä»½è®¾ç½®ï¼Œä¸€æ¬¡è®¾ç½®æ°¸ä¸ä¸¢å¤±ã€‚\n\n## æ‰©å±•æ¨è\n\n- Community Material Theme\n- EditerConfig For VS Code\n- ESLint\n- Git History\n- GitLens â€” Git supercharged\n- markdownlint\n- Material Icon Theme\n- Material Theme\n- Prettier - Code formatter\n- Settings Sync\n- Terminal\n- Vetur\n\n-- EOF --\n","tags":["vscode"]},{"title":"Git ä¿®æ”¹æäº¤æ—¶é—´","url":"/2019/06/10/git-modify-commit-date/","content":"\næŒ‡å®šæœ¬æ¬¡æäº¤æ—¶é—´ï¼š\n\n```bash\ngit commit -m \"fix...\" --date=`date -R`\n\ngit commit -m \"fix...\" --date=\"$(date -R)\"\n\ngit commit -m \"fix...\" --date=\"Tue, 11 Jun 2019 17:50:50 +0800\"\n```\n\n<!-- more -->\n\nä¿®æ”¹ä¸Šæ¬¡æäº¤æ—¶é—´ï¼š\n\n```bash\ngit commit --amend --date=`date -R`\n```\n\n-- EOF --\n","tags":["git"]},{"title":"Git æäº¤ message è§„èŒƒ","url":"/2019/06/04/git-commit-message-style-guide/","content":"\ncommit message åº”è¯¥æ¸…æ™°æ˜äº†ï¼Œè¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„ã€‚åŸºæœ¬å…¬å¼ï¼š\n\n```txt\n<type>(<scope>): <subject>\n```\n\n<!-- more -->\n\nå®Œæ•´å…¬å¼ï¼š\n\n```txt\n<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n```\n\n## type\n\nç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢ 7 ä¸ªæ ‡è¯†ã€‚\n\n- featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰\n- fixï¼šä¿®è¡¥ bug\n- docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰\n- styleï¼šæ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰\n- refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰\n- testï¼šå¢åŠ æµ‹è¯•\n- choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\n\n## scope\n\nç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒã€‚\n\n## subject\n\næ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚\n\n1. ä»¥åŠ¨è¯å¼€å¤´ï¼Œä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚ changeï¼Œè€Œä¸æ˜¯ changed æˆ– changes\n2. ç¬¬ä¸€ä¸ªå­—æ¯å°å†™\n3. ç»“å°¾ä¸åŠ å¥å· `.`\n\n## cli å·¥å…·\n\n### commitizen cli\n\n[commitizen/cz-cli](https://github.com/commitizen/cz-cli) ä½¿ç”¨å®ƒæä¾›çš„ `git cz` å‘½ä»¤æ›¿ä»£æˆ‘ä»¬çš„ `git commit` å‘½ä»¤ï¼Œå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ commit messageã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸º `commitizen` æŒ‡å®šä¸€ä¸ª `Adapter` æ¯”å¦‚ï¼š[commitizen/cz-conventional-changelog](https://github.com/commitizen/cz-conventional-changelog)ï¼ˆä¸€ä¸ªç¬¦åˆ Angular å›¢é˜Ÿè§„èŒƒçš„ presetï¼‰ä½¿å¾— `commitizen` æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„è§„èŒƒå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆ commit messageã€‚\n\nå…¨å±€å®‰è£…ï¼ˆé¦–é€‰ï¼‰ï¼š\n\n```bash\n$ npm install -g commitizen cz-conventional-changelog\n$ echo '{ \"path\": \"cz-conventional-changelog\" }' > ~/.czrc\n```\n\né¡¹ç›®çº§å®‰è£…ï¼ˆé¦–é€‰ï¼‰ï¼š\n\n```bash\nnpm install -D commitizen cz-conventional-changelog\n```\n\n`package.json` ä¸­é…ç½®ï¼š\n\n```bash\n\"script\": {\n   ...,\n   \"commit\": \"git-cz\",\n},\n\"config\": {\n   \"commitizen\": {\n      \"path\": \"node_modules/cz-conventional-changelog\"\n   }\n}\n```\n\nå¦‚æœå…¨å±€å®‰è£…è¿‡ `commitizen`ï¼Œé‚£ä¹ˆåœ¨å¯¹åº”çš„é¡¹ç›®ä¸­æ‰§è¡Œ `git cz` or `npm run commit` éƒ½å¯ä»¥ã€‚\n\n### è‡ªå®šä¹‰è§„èŒƒ\n\nä¹Ÿè®¸ Angular çš„é‚£å¥—è§„èŒƒæˆ‘ä»¬ä¸ä¹ æƒ¯ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æŒ‡å®š Adapter [leonardoanalista/cz-customizable](https://github.com/leonardoanalista/cz-customizable) æŒ‡å®šä¸€å¥—ç¬¦åˆè‡ªå·±å›¢é˜Ÿçš„è§„èŒƒã€‚\n\n### æ ¡éªŒ message\n\nå¯ä»¥é€šè¿‡ [conventional-changelog/commitlint](https://github.com/conventional-changelog/commitlint) æ ¡éªŒ commit messageã€‚åŒæ—¶å¯ä»¥é…åˆä½¿ç”¨ [typicode/husky](https://github.com/typicode/husky) ğŸ¶ Git hooks made easyã€‚\n\n### ç”Ÿæˆ CHANGELOG\n\n[conventional-changelog/standard-version](https://github.com/conventional-changelog/standard-version) ğŸ† è‡ªåŠ¨åŒ–ç‰ˆæœ¬å’Œæ›´æ–°æ—¥å¿—ç”Ÿæˆã€‚\n\nè¿˜çœ‹åˆ°ä¸€ä¸ªæœ‰æ„æ€çš„åº“ [ğŸ“¦ğŸš€ semantic-release](https://github.com/semantic-release/semantic-release) å¾…ç ”ç©¶ã€‚\n\n## References\n\n> - [ä½ å¯èƒ½ä¼šå¿½ç•¥çš„ Git æäº¤è§„èŒƒ - juejin](https://juejin.im/entry/5b429be75188251ac85830ff)\n> - [ä¼˜é›…çš„æäº¤ä½ çš„ Git Commit Message - juejin](https://juejin.im/post/5afc5242f265da0b7f44bee4)\n> - [Commit message å’Œ Change log ç¼–å†™æŒ‡å— - ruanyifeng](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)\n> - [AngularJS Git Commit Message Conventions - google docs](https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#)\n\n-- EOF --\n","tags":["git"]},{"title":"æœ€å·¦å‰ç¼€åŸç†ä¸ç›¸å…³ä¼˜åŒ–","url":"/2019/05/25/the-left-prefix-index-rule/","content":"\nMySQL ä¸­çš„ç´¢å¼•å¯ä»¥ä»¥ä¸€å®šé¡ºåºå¼•ç”¨å¤šä¸ªåˆ—ï¼Œè¿™ç§ç´¢å¼•å«åšè”åˆç´¢å¼•ï¼Œä¸€èˆ¬çš„ï¼Œä¸€ä¸ªè”åˆç´¢å¼•æ˜¯ä¸€ä¸ªæœ‰åºå…ƒç»„ `<a1, a2, â€¦, an>`ï¼Œå…¶ä¸­å„ä¸ªå…ƒç´ å‡ä¸ºæ•°æ®è¡¨çš„ä¸€åˆ—ã€‚å¦å¤–ï¼Œå•åˆ—ç´¢å¼•å¯ä»¥çœ‹æˆè”åˆç´¢å¼•å…ƒç´ æ•°ä¸º 1 çš„ç‰¹ä¾‹ã€‚\n\næˆ‘ä»¬åœ¨ [Employees Sample Database](https://dev.mysql.com/doc/employee/en/employees-installation.html) ä¸­å®éªŒï¼ŒMySQL ç‰ˆæœ¬ 5.7ã€‚\n\n<!-- more -->\n\nä»¥ employees.titles ä¸ºä¾‹ï¼ŒæŸ¥çœ‹å…¶ç´¢å¼•ï¼š\n\n```sql\nSHOW INDEX FROM employees.titles;\n\n+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n| Table  | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |\n+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n| titles |          0 | PRIMARY  |            1 | emp_no      | A         |      301292 |     NULL | NULL   |      | BTREE      |         |               |\n| titles |          0 | PRIMARY  |            2 | title       | A         |      442605 |     NULL | NULL   |      | BTREE      |         |               |\n| titles |          0 | PRIMARY  |            3 | from_date   | A         |      442605 |     NULL | NULL   |      | BTREE      |         |               |\n+--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+\n```\n\n## å…¨åˆ—åŒ¹é…\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE\n\temp_no = '10009'\n\tAND title = 'Senior Engineer'\n\tAND from_date = '1995-02-18';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref               | rows | filtered | Extra |\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n|  1 | SIMPLE      | titles | NULL       | const | PRIMARY       | PRIMARY | 159     | const,const,const |    1 |   100.00 | NULL  |\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n```\n\nå½“æŒ‰ç…§ç´¢å¼•ä¸­æ‰€æœ‰åˆ—è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ˆè¿™é‡Œç²¾ç¡®åŒ¹é…æŒ‡ `=` æˆ– `IN` åŒ¹é…ï¼‰æ—¶ï¼Œç´¢å¼•å¯ä»¥è¢«ç”¨åˆ°ã€‚\n\nè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç†è®ºä¸Šç´¢å¼•å¯¹é¡ºåºæ˜¯æ•æ„Ÿçš„ï¼Œä½†æ˜¯ç”±äº MySQL çš„ **æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´ where å­å¥çš„æ¡ä»¶é¡ºåº** ä»¥ä½¿ç”¨é€‚åˆçš„ç´¢å¼•ï¼Œä¾‹å¦‚æˆ‘ä»¬å°† `where` ä¸­çš„æ¡ä»¶é¡ºåºé¢ å€’ï¼š\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE\n\tfrom_date = '1995-02-18'\n\tAND emp_no IN ( '10009' )\n\tAND title = 'Senior Engineer';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref               | rows | filtered | Extra |\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n|  1 | SIMPLE      | titles | NULL       | const | PRIMARY       | PRIMARY | 159     | const,const,const |    1 |   100.00 | NULL  |\n+----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+\n```\n\nå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚\n\n## æœ€å·¦å‰ç¼€åŒ¹é…\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE\n\temp_no = '10009';\n\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------+\n| id | select_type | table  | partitions | type | possible_keys | key     | key_len | ref   | rows | filtered | Extra |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------+\n|  1 | SIMPLE      | titles | NULL       | ref  | PRIMARY       | PRIMARY | 4       | const |    3 |   100.00 | NULL  |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------+\n```\n\nå½“æŸ¥è¯¢æ¡ä»¶ç²¾ç¡®åŒ¹é…ç´¢å¼•çš„ **å·¦è¾¹è¿ç»­ä¸€ä¸ªæˆ–å‡ ä¸ªåˆ—** æ—¶ï¼Œå¦‚ `<emp_no>` æˆ– `<emp_no, title>`ï¼Œæ‰€ä»¥å¯ä»¥è¢«ç”¨åˆ°ï¼Œä½†æ˜¯åªèƒ½ç”¨åˆ°ä¸€éƒ¨åˆ†ï¼Œå³æ¡ä»¶æ‰€ç»„æˆçš„æœ€å·¦å‰ç¼€ã€‚\n\nä¸Šé¢çš„æŸ¥è¯¢ä»åˆ†æç»“æœçœ‹ç”¨åˆ°äº† `PRIMARY` ç´¢å¼•ï¼Œä½†æ˜¯ `key_len` ä¸º 4ï¼Œè¯´æ˜åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—å‰ç¼€ã€‚\n\n## ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›\n\næŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†ç´¢å¼•ä¸­åˆ—çš„ç²¾ç¡®åŒ¹é…ï¼Œä½†æ˜¯ä¸­é—´æŸä¸ªæ¡ä»¶æœªæä¾›ã€‚\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE emp_no='10009' AND from_date='1995-02-18';\n\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n| id | select_type | table  | partitions | type | possible_keys | key     | key_len | ref   | rows | filtered | Extra       |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | ref  | PRIMARY       | PRIMARY | 4       | const |    1 |    10.00 | Using where |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n```\n\næ­¤æ—¶ç´¢å¼•ä½¿ç”¨æƒ…å†µå’Œæƒ…å†µäºŒç›¸åŒï¼Œå› ä¸º `title` æœªæä¾›ï¼Œæ‰€ä»¥æŸ¥è¯¢åªç”¨åˆ°äº†ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œè€Œåé¢çš„ `from_date` è™½ç„¶ä¹Ÿåœ¨ç´¢å¼•ä¸­ï¼Œä½†æ˜¯ç”±äº `title` ä¸å­˜åœ¨è€Œæ— æ³•å’Œå·¦å‰ç¼€è¿æ¥ï¼Œå› æ­¤éœ€è¦å¯¹ç»“æœè¿›è¡Œæ‰«æè¿‡æ»¤ `from_date`ï¼ˆè¿™é‡Œç”±äº `emp_no` å”¯ä¸€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ‰«æï¼‰ã€‚\n\nå¦‚æœæƒ³è®© `from_date` ä¹Ÿä½¿ç”¨ç´¢å¼•è€Œä¸æ˜¯ `where` è¿‡æ»¤ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ª _è¾…åŠ©ç´¢å¼•_ `<emp_no, from_date>`ï¼Œæ­¤æ—¶ä¸Šé¢çš„æŸ¥è¯¢ä¼šä½¿ç”¨è¿™ä¸ªç´¢å¼•ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸º **éš”ç¦»åˆ—** çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå°† `emp_no` ä¸ `from_date` ä¹‹é—´çš„ _å‘_ å¡«ä¸Šã€‚\n\né¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹ `title` æœ‰å‡ ç§ä¸åŒçš„å€¼ï¼š\n\n```sql\nSELECT DISTINCT(title) FROM employees.titles;\n```\n\nåªæœ‰ 7 ç§ã€‚åœ¨è¿™ç§æˆä¸º _å‘_ çš„åˆ—å€¼æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘ç”¨ `IN` æ¥å¡«è¡¥è¿™ä¸ª _å‘_ ä»è€Œå½¢æˆæœ€å·¦å‰ç¼€ï¼š\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE emp_no='10009'\nAND title IN ('Senior Engineer', 'Staff', 'Engineer', 'Senior Staff', 'Assistant Engineer', 'Technique Leader', 'Manager')\nAND from_date='1995-02-18';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 159     | NULL |    7 |   100.00 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\nè¿™æ¬¡ `key_len` ä¸º `159`ï¼Œè¯´æ˜ç´¢å¼•è¢«ç”¨å…¨äº†ï¼Œä½†æ˜¯ä» `type` å’Œ `rows` çœ‹å‡º `IN` å®é™…ä¸Šæ‰§è¡Œäº†ä¸€ä¸ª `range` æŸ¥è¯¢ï¼Œè¿™é‡Œæ£€æŸ¥äº† 7 ä¸ª keyã€‚çœ‹ä¸‹ä¸¤ç§æŸ¥è¯¢çš„æ€§èƒ½æ¯”è¾ƒï¼š\n\n```sql\nSET profiling = 1;\nSELECT * FROM...  -- 1\nSELECT * FROM... -- 2\nSHOW PROFILES;\n\n| Query_ID | Duration   | Query   |\n+----------+------------+---------+\n|        1 | 0.00083950 | SELECT * ..|\n|        2 | 0.00063700 | SELECT * ..|\n```\n\nâ€œå¡«å‘â€ åæ€§èƒ½æå‡äº†ä¸€ç‚¹ã€‚å¦‚æœç»è¿‡ `emp_no` ç­›é€‰åä½™ä¸‹å¾ˆå¤šæ•°æ®ï¼Œåˆ™åè€…æ€§èƒ½ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚å½“ç„¶ï¼Œå¦‚æœ `title` çš„å€¼å¾ˆå¤šï¼Œç”¨å¡«å‘å°±ä¸åˆé€‚äº†ï¼Œå¿…é¡»å»ºç«‹è¾…åŠ©ç´¢å¼•ã€‚ï¼ˆç¬”è€…ï¼šå¤šæ¬¡æµ‹è¯•åå‘ç°æ˜¯æœ‰å¿«æœ‰æ…¢ï¼Œå¯èƒ½æ˜¯æ•°æ®çš„åŸå› ï¼Œæ•ˆæœå¹¶ä¸æ˜æ˜¾ï¼‰\n\n## æŸ¥è¯¢æ¡ä»¶æ²¡æœ‰æŒ‡å®šç´¢å¼•ç¬¬ä¸€åˆ—\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE from_date='1995-02-18';\n\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table  | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 442605 |    10.00 | Using where |\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n```\n\nç”±äºä¸æ˜¯æœ€å·¦å‰ç¼€ï¼Œç´¢å¼•è¿™æ ·çš„æŸ¥è¯¢æ˜¾ç„¶ç”¨ä¸åˆ°ç´¢å¼•ã€‚\n\n## åŒ¹é…æŸåˆ—çš„å‰ç¼€å­—ç¬¦ä¸²\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE emp_no=10009 AND title LIKE 'Senior%';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 156     | NULL |    1 |   100.00 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\næ­¤æ—¶å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œå¦‚æœé€šé…ç¬¦ `%` ä¸å‡ºç°åœ¨å¼€å¤´ï¼Œåˆ™å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ ¹æ®å…·ä½“æƒ…å†µä¸åŒå¯èƒ½åªä¼šç”¨å…¶ä¸­ä¸€ä¸ªå‰ç¼€ã€‚\n\n## èŒƒå›´æŸ¥è¯¢\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE emp_no < '10010' and title = 'Senior Engineer';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 4       | NULL |   14 |    10.00 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\nèŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼ˆå¿…é¡»æ˜¯æœ€å·¦å‰ç¼€ï¼‰ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚åŒæ—¶ï¼Œç´¢å¼•æœ€å¤šç”¨äºä¸€ä¸ªèŒƒå›´åˆ—ï¼Œå› æ­¤å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æœ‰ä¸¤ä¸ªèŒƒå›´åˆ—åˆ™æ— æ³•å…¨ç”¨åˆ°ç´¢å¼•ã€‚\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE emp_no < '10010'\nAND title = 'Senior Engineer'\nAND from_date BETWEEN '1986-01-01' AND '1986-12-31';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 4       | NULL |   14 |     1.11 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\nå¯ä»¥çœ‹åˆ°ç´¢å¼•å¯¹ç¬¬äºŒä¸ªèŒƒå›´ç´¢å¼•æ— èƒ½ä¸ºåŠ›ã€‚è¿™é‡Œç‰¹åˆ«è¦è¯´æ˜ MySQL ä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯ä»…ç”¨ explain å¯èƒ½æ— æ³•åŒºåˆ† èŒƒå›´ç´¢å¼• å’Œ å¤šå€¼åŒ¹é…ï¼Œå› ä¸ºåœ¨ `type` ä¸­è¿™ä¸¤è€…éƒ½æ˜¾ç¤ºä¸º `range`ã€‚\n\nåŒæ—¶ï¼Œç”¨äº† `between` å¹¶ä¸æ„å‘³ç€å°±æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢ï¼š\n\n```sql\nEXPLAIN SELECT * FROM employees.titles\nWHERE emp_no BETWEEN '10001' AND '10010'\nAND title='Senior Engineer'\nAND from_date BETWEEN '1986-01-01' AND '1986-12-31';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 159     | NULL |   15 |     1.11 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\nçœ‹èµ·æ¥æ˜¯ç”¨äº†ä¸¤ä¸ªèŒƒå›´æŸ¥è¯¢ï¼Œä½†ä½œç”¨äº `emp_no` ä¸Šçš„ `BETWEEN` å®é™…ä¸Šç›¸å½“äº `IN`ï¼Œä¹Ÿå°±æ˜¯è¯´ `emp_no` å®é™…æ˜¯å¤šå€¼ç²¾ç¡®åŒ¹é…ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŸ¥è¯¢ç”¨åˆ°äº†ç´¢å¼•å…¨éƒ¨ä¸‰ä¸ªåˆ—ã€‚å› æ­¤åœ¨ MySQL ä¸­è¦è°¨æ…åœ°åŒºåˆ†å¤šå€¼åŒ¹é…å’ŒèŒƒå›´åŒ¹é…ï¼Œå¦åˆ™ä¼šå¯¹ MySQL çš„è¡Œä¸ºäº§ç”Ÿå›°æƒ‘ã€‚\n\nè¿˜æœ‰ä¸ªå€¼å¾—æ³¨æ„çš„äº‹æƒ…ï¼š\n\n```sql\nEXPLAIN SELECT * FROM employees.titles where emp_no > 10000 AND emp_no < 10011 AND title='Senior Engineer' AND from_date BETWEEN '1986-01-01' AND '1986-12-31';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 4       | NULL |   15 |     1.11 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n\nEXPLAIN SELECT * FROM employees.titles where emp_no >= 10001 and emp_no <= 10010 AND title='Senior Engineer' AND from_date BETWEEN '1986-01-01' AND '1986-12-31';\n\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n| id | select_type | table  | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra       |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | range | PRIMARY       | PRIMARY | 159     | NULL |   15 |     1.11 | Using where |\n+----+-------------+--------+------------+-------+---------------+---------+---------+------+------+----------+-------------+\n```\n\n> ç–‘é—®ï¼š`=` å½±å“ èŒƒå›´ç´¢å¼• è¿˜æ˜¯ å¤šå€¼åŒ¹é…ï¼Ÿ\n\n## æŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼\n\nå¾ˆä¸å¹¸ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­å«æœ‰å‡½æ•°æˆ–è¡¨è¾¾å¼ï¼Œåˆ™ MySQL ä¸ä¼šä¸ºè¿™åˆ—ä½¿ç”¨ç´¢å¼•ï¼ˆè™½ç„¶æŸäº›åœ¨æ•°å­¦æ„ä¹‰ä¸Šå¯ä»¥ä½¿ç”¨ï¼‰ã€‚ä¾‹å¦‚ï¼š\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE emp_no='10009' AND left(title, 6)='Senior';\n\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n| id | select_type | table  | partitions | type | possible_keys | key     | key_len | ref   | rows | filtered | Extra       |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | ref  | PRIMARY       | PRIMARY | 4       | const |    3 |   100.00 | Using where |\n+----+-------------+--------+------------+------+---------------+---------+---------+-------+------+----------+-------------+\n```\n\nè™½ç„¶è¿™ä¸ªæŸ¥è¯¢å’Œæƒ…å†µäº”ä¸­åŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ç”±äºä½¿ç”¨äº†å‡½æ•° leftï¼Œåˆ™æ— æ³•ä¸º title åˆ—åº”ç”¨ç´¢å¼•ï¼Œè€Œæƒ…å†µäº”ä¸­ç”¨ LIKE åˆ™å¯ä»¥ã€‚\n\n```sql\nEXPLAIN SELECT * FROM employees.titles WHERE emp_no - 1 = 10000;\n\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n| id | select_type | table  | partitions | type | possible_keys | key  | key_len | ref  | rows   | filtered | Extra       |\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n|  1 | SIMPLE      | titles | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 442605 |   100.00 | Using where |\n+----+-------------+--------+------------+------+---------------+------+---------+------+--------+----------+-------------+\n```\n\næ˜¾ç„¶è¿™ä¸ªæŸ¥è¯¢ç­‰ä»·äºæŸ¥è¯¢ `emp_no` ä¸º `10001` çš„å‡½æ•°ï¼Œä½†æ˜¯ç”±äºæŸ¥è¯¢æ¡ä»¶æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒMySQL æ— æ³•ä¸ºå…¶ä½¿ç”¨ç´¢å¼•ã€‚çœ‹æ¥ MySQL è¿˜æ²¡æœ‰æ™ºèƒ½åˆ°è‡ªåŠ¨ä¼˜åŒ–å¸¸é‡è¡¨è¾¾å¼çš„ç¨‹åº¦ï¼Œå› æ­¤åœ¨å†™æŸ¥è¯¢è¯­å¥æ—¶å°½é‡é¿å…è¡¨è¾¾å¼å‡ºç°åœ¨æŸ¥è¯¢ä¸­ï¼Œè€Œæ˜¯å…ˆæ‰‹å·¥ç§ä¸‹ä»£æ•°è¿ç®—ï¼Œè½¬æ¢ä¸ºæ— è¡¨è¾¾å¼çš„æŸ¥è¯¢è¯­å¥ã€‚\n\n## References\n\n- [MySQL ç´¢å¼•èƒŒåçš„æ•°æ®ç»“æ„åŠç®—æ³•åŸç†](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)\n- [13.7.5.30 SHOW PROFILE Syntax](https://dev.mysql.com/doc/refman/5.7/en/show-profile.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"å½’å¹¶æ’åº","url":"/2019/05/23/merge-sort/","content":"\nå½’å¹¶æ’åºï¼ˆè‹±è¯­ï¼šMerge sortï¼Œæˆ– mergesortï¼‰ï¼Œæ˜¯åˆ›å»ºåœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ï¼Œæ•ˆç‡ä¸º `O(nlogn)`ã€‚1945 å¹´ç”±çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ï¼Œä¸”å„å±‚åˆ†æ²»é€’å½’å¯ä»¥åŒæ—¶è¿›è¡Œã€‚\n\n<!-- more -->\n\n![merge-sort](https://user-images.githubusercontent.com/9289792/58546744-9751a300-8238-11e9-84d1-0d33d5eaacee.gif)\n\né‡‡ç”¨åˆ†æ²»æ³•ï¼š\n\n- åˆ†å‰²ï¼šé€’å½’åœ°æŠŠå½“å‰åºåˆ—å¹³å‡åˆ†å‰²æˆä¸¤åŠã€‚\n- é›†æˆï¼šåœ¨ä¿æŒå…ƒç´ é¡ºåºçš„åŒæ—¶å°†ä¸Šä¸€æ­¥å¾—åˆ°çš„å­åºåˆ—é›†æˆåˆ°ä¸€èµ·ï¼ˆå½’å¹¶ï¼‰ã€‚\n\nå½’å¹¶æ“ä½œï¼ˆmergeï¼‰ï¼Œä¹Ÿå«å½’å¹¶ç®—æ³•ï¼ŒæŒ‡çš„æ˜¯å°†ä¸¤ä¸ªå·²ç»æ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªåºåˆ—çš„æ“ä½œã€‚å½’å¹¶æ’åºç®—æ³•ä¾èµ–å½’å¹¶æ“ä½œã€‚\n\n```php\n<?php\n\nfunction mergeSort($arr)\n{\n    $len = count($arr);\n    if ($len <= 1) {\n        return $arr;\n    } // é€’å½’ç»“æŸæ¡ä»¶, åˆ°è¾¾è¿™æ­¥çš„æ—¶å€™, æ•°ç»„å°±åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ äº†, ä¹Ÿå°±æ˜¯åˆ†ç¦»äº†æ•°ç»„\n\n    $mid = $len / 2;\n    $left = array_slice($arr, 0, $mid); // æ‹†åˆ†æ•°ç»„0-midè¿™éƒ¨åˆ†ç»™å·¦è¾¹left\n    $right = array_slice($arr, $mid); // æ‹†åˆ†æ•°ç»„mid-æœ«å°¾è¿™éƒ¨åˆ†ç»™å³è¾¹right\n    $left = mergeSort($left); // å·¦è¾¹æ‹†åˆ†å®Œåå¼€å§‹é€’å½’åˆå¹¶å¾€ä¸Šèµ°\n    $right = mergeSort($right); // å³è¾¹æ‹†åˆ†å®Œæ¯•å¼€å§‹é€’å½’å¾€ä¸Šèµ°\n\n    $arr = merge($left, $right); // åˆå¹¶ä¸¤ä¸ªæ•°ç»„,ç»§ç»­é€’å½’\n    return $arr;\n}\n\n// mergeå‡½æ•°å°†æŒ‡å®šçš„ä¸¤ä¸ªæœ‰åºæ•°ç»„(arrA, arr)åˆå¹¶å¹¶ä¸”æ’åº\nfunction merge($arrA, $arrB)\n{\n    $arrC = array();\n    while (count($arrA) && count($arrB)) {\n        // è¿™é‡Œä¸æ–­çš„åˆ¤æ–­å“ªä¸ªå€¼å°, å°±å°†å°çš„å€¼ç»™åˆ°arrC, ä½†æ˜¯åˆ°æœ€åè‚¯å®šè¦å‰©ä¸‹å‡ ä¸ªå€¼,\n        // ä¸æ˜¯å‰©ä¸‹arrAé‡Œé¢çš„å°±æ˜¯å‰©ä¸‹arrBé‡Œé¢çš„è€Œä¸”è¿™å‡ ä¸ªæœ‰åºçš„å€¼, è‚¯å®šæ¯”arrCé‡Œé¢æ‰€æœ‰çš„å€¼éƒ½å¤§æ‰€ä»¥ä½¿ç”¨\n        $arrC[] = $arrA[0] < $arrB[0] ? array_shift($arrA) : array_shift($arrB);\n    }\n\n    return array_merge($arrC, $arrA, $arrB);\n}\n\n$startTime = microtime(1);\n\n$arr = range(1, 1000);\nshuffle($arr);\necho 'before sort: ', implode(', ', $arr), \"\\n\";\n$sortArr = mergeSort($arr);\necho 'after sort: ', implode(', ', $sortArr), \"\\n\";\n\necho 'use time: ', microtime(1) - $startTime, \"s\\n\";\n```\n\nå‡è®¾è¢«æ’åºçš„æ•°åˆ—ä¸­æœ‰ N ä¸ªæ•°ã€‚éå†ä¸€è¶Ÿçš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(N)`ï¼Œéœ€è¦éå†å¤šå°‘æ¬¡å‘¢ï¼Ÿ\n\nå½’å¹¶æ’åºçš„å½¢å¼å°±æ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œå®ƒéœ€è¦éå†çš„æ¬¡æ•°å°±æ˜¯äºŒå‰æ ‘çš„æ·±åº¦ï¼Œè€Œæ ¹æ® **å®Œå…¨äºŒå‰æ ‘** çš„å¯ä»¥å¾—å‡ºå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ `O(N*lgN)`ã€‚\n\n> References:\n>\n> - [PHP ç®—æ³• â€”â€” å½’å¹¶æ’åº](https://shockerli.net/post/merge-sort-implement-by-php/)\n\n-- EOF --\n","tags":["php","algorithm"]},{"title":"My MacBook","url":"/2019/05/20/my-macbook/","content":"\nä¸ªäºº MacBook é£Ÿç”¨è¯´æ˜ã€‚æ¨èè‡ªåŠ¨åŒ–ç¯å¢ƒé…ç½®è„šæœ¬é¡¹ç›® [imzyf/dotfiles](https://github.com/imzyf/dotfiles)ã€‚\n\n<!-- more -->\n\n## è½¯ä»¶ä¸‹è½½\n\nä½¿ç”¨ `brew cask` å®‰è£…è½¯ä»¶ï¼Œéå¸¸æ–¹ä¾¿ã€‚\n\nå®‰è£… [brew](https://brew.sh/)ï¼š\n\n```bash\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n# æŸ¥æ‰¾è½¯ä»¶\nbrew cask info iterm2\n\n# å®‰è£…è½¯ä»¶\nbrew cask install iterm2\n```\n\n> è®¾ç½®å®‰è£…æºå…è®¸ä»»ä½• `sudo spctl --master-disable`\n\n## è½¯ä»¶æ¸…å•\n\n### å¿…å¤‡\n\n- iTerm 2\n- Alfred 3\n- Google Chrome\n- Visual Studio Code\n- ImageOptim\n- The Unarchiver - ï£¿\n- V2rayU\n- ç™¾åº¦äº‘ - BaiduNetdisk\n- ~ShadowsocksX-NG~ SS æ²¡å•¥æ´»è·¯äº†\n\n```bash\nbrew cask install iterm2 alfred google-chrome visual-studio-code imageoptim v2rayu baidunetdisk\n```\n\n### Web å¼€å‘\n\n- [Docker](https://www.docker.com/) - âœ¨âœ¨âœ¨\n- Navicat for MySQL - âœ¨âœ¨âœ¨ - ğŸ’°\n- [DBeaver](https://dbeaver.io/) - Universal Database Tool - âœ¨âœ¨âœ¨\n- Dash - âœ¨âœ¨ - ğŸ’°\n- [Sourcetree](https://www.sourcetreeapp.com/) - âœ¨âœ¨âœ¨\n- Postman - API ç®¡ç† - âœ¨âœ¨âœ¨\n- [JetBrains Developer Tools](https://www.jetbrains.com/) å…¨å®¶æ¡¶\n- iHosts - ç®¡ç† Host - ï£¿\n- Chromium\n- cosborwser - è…¾è®¯äº‘ COS å®¢æˆ·ç«¯\n- ~~Firefox - âœ¨âœ¨~~\n- ~~Kodo Browser - ä¸ƒç‰›å¯¹è±¡å­˜å‚¨å®¢æˆ·ç«¯~~\n- ~~QQ æ¸¸è§ˆå™¨ Lite - ï£¿~~ å¤ªèœäº†ï¼Œå•¥ä¹Ÿå¹²ä¸äº†\n- ~~Sublime Text~~ è¿˜æ˜¯ VSCode é¦™\n- ~~Paw - API ç®¡ç†~~ Postman å¤Ÿç”¨äº†\n\n```bash\nbrew cask install docker dash sourcetree postman firefox\n```\n\n```bash\nbrew install php@7.1\n```\n\n### iOS å¼€å‘\n\n> å·²ä¸å†™ iOS å¾ˆå¤šå¹´ã€‚\n\n- OpenSim - å¿«é€Ÿæ‰“å¼€æ¨¡æ‹Ÿå™¨åº”ç”¨æ–‡ä»¶å¤¹ - âœ¨âœ¨âœ¨\n- Reveal - UI è°ƒè¯• - âœ¨âœ¨âœ¨ - ğŸ’°\n- Charles - âœ¨âœ¨âœ¨ - ğŸ’°\n- Flipper\n- Realm Studio\n- Wireshark\n\n```bash\nbrew cask install opensim reveal charles\n```\n\n### ç³»ç»Ÿ\n\n- [Go2Shell](http://zipzapmac.com/go2shell) - åœ¨å½“å‰ Finder è·¯å¾„æ‰“å¼€å‘½ä»¤è¡Œ - âœ¨âœ¨âœ¨\n- SecureCRT - SSH ç®¡ç† - âœ¨âœ¨âœ¨ - ğŸ’°\n- [FileZilla](https://filezilla-project.org/) - FTP / SFTP\n- Itsycal - æ—¥å†æ‰©å±• - âœ¨âœ¨âœ¨\n- Proxifier - å¯ç”¨ä½œä»£ç† - âœ¨âœ¨âœ¨ - ğŸ’°\n- fliqlo - æ—¶é’Ÿå±ä¿ - å¯ä»¥é…åˆ `è§¦å‘è§’` ä½¿ç”¨ - âœ¨âœ¨âœ¨\n- QuicklookStephen - QuickLook plugin - âœ¨âœ¨âœ¨\n- PopClip - âœ¨\n- typora - Markdown ç¼–è¾‘å™¨ - å¯¼å‡º PDF çš„æ ·å¼å‡ºè‰² - âœ¨âœ¨âœ¨\n- Pap.er - æ¡Œé¢å£çº¸\n- Mounty\n- Launchpad Manager Yosemite - æ¸…ç† Launchpad å›¾æ ‡\n- CleanMyMac X\n- [SlowQuitApps](https://github.com/dteoh/SlowQuitApps) - å»¶è¿Ÿ `âŒ˜ + q`\n- Cyberduck - FTP\n- ~~ShellCraft - SSH - ğŸ’°~~\n- ~~[Transmit 5](https://panic.com/transmit/)~~\n- ~~Shimo - å…¨å±€ä»£ç†ï¼Œå‘½ä»¤è¡Œå’Œå¼€å‘è½¯ä»¶å†…ä¾ç„¶å¯ä»¥ç¿»å¢™ï¼Œæ”¯æŒ PPTP~~\n\n```bash\nbrew cask install go2shell itsycal fliqlo qlstephen PopClip typora paper\n```\n\n```bash\nbrew tap dteoh/sqa\nbrew cask install slowquitapps\n```\n\n### æ•ˆç‡\n\n- [IINA](https://lhc70000.github.io/iina/) - The modern video player - âœ¨âœ¨âœ¨\n- [LICEcap](https://www.cockos.com/licecap/) - GIF å½•å± - âœ¨âœ¨âœ¨\n- è…¾è®¯ä¼šè®® - âœ¨âœ¨âœ¨\n- ~~[RescueTime](https://www.rescuetime.com/) - æ—¶é—´ç»Ÿè®¡~~\n- Evernote - å°è±¡ç¬”è®°\n- å¾®ä¿¡ - ï£¿\n- QQ - ï£¿\n- QQ éŸ³ä¹ - ï£¿ - âœ¨âœ¨âœ¨âœ¨âœ¨ TME é›„èµ·\n- ç½‘æ˜“æœ‰é“è¯å…¸ - ï£¿\n- TeamViewer\n- Logitech Options\n- è¿…é›·\n- ~~MWeb~~ çœŸä¸ç†Ÿ\n- ~~Kindle - ï£¿~~\n- ~~[Scroll Reverser](http://pilotmoon.com/scrollreverser/) - ç¿»è½¬è®¾å¤‡æ»šåŠ¨æ–¹å‘~~ é¼ æ ‡è‡ªç„¶æ–¹å‘çœŸé¦™\n- ~~ç½‘æ˜“äº‘éŸ³ä¹~~ biss\n\n```bash\nbrew cask install iina licecap\n```\n\n### äº§å“\n\n- Axure RP 8\n- MindNode\n- StarUML\n\n### è®¾è®¡\n\n- Zeplin\n- Sip - æ‹¾è‰²\n- PixeStyle\n\n## CLI\n\n- dict\n- zsh\n- oh-my-zsh\n- autojump\n- fish\n\n```bash\nbrew install autojump\n```\n\n## å¿«æ·é”®\n\n- [Mac é”®ç›˜å¿«æ·é”®](https://support.apple.com/zh-cn/HT201236)\n- [Chrome é”®ç›˜å¿«æ·é”®](https://support.google.com/chrome/answer/157179?hl=zh-Hans)\n- [iTerm2 å¿«æ·é”®](http://blog.csdn.net/qq_32457355/article/details/75043812)\n\n### Mac\n\næˆªå±ï¼š\n\n- å…¨å± `command + shift + 3`\n- æŒ‡å®šåŒºåŸŸ `command + shift + 4`\n- å½“å‰çª—å£ `command + shift+ 4 + ç©ºæ ¼`\n\nFinderï¼š\n\n- å‰å¾€æ–‡ä»¶å¤¹ `command + shift + g`\n- æ˜¾ç¤ºç®€ä»‹ `command + i`\n- æ–°å»ºæ–‡ä»¶å¤¹ `command + n`\n- æœç´¢ `command + f`\n- åˆ é™¤ `command + delete`ï¼ˆåœ¨å›æ”¶ç«™ä¸­æ­¤æ–¹æ³•ä¸ºæ¢å¤æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯ä»å›æ”¶ç«™åˆ é™¤ï¼‰\n- æ¸…ç©ºå›æ”¶ç«™ `command + shift + delete`ï¼ˆå…¨å±€å¯ç”¨ï¼‰\n\nåˆ‡æ¢ï¼š\n\n- æ‰€æœ‰åº”ç”¨ä¹‹é—´åˆ‡æ¢ `command + tab`\n- éƒ¨åˆ†åº”ç”¨å†…åˆ‡æ¢ tab `command + option + â†/â†’`ï¼ˆé€šå¸¸ä¸ºæµè§ˆå™¨ï¼‰æˆ–è€… `command + â†/â†’`\n- è§¦æ‘¸æ¿\n  - ä¸‰æŒ‡å·¦å³æ»‘åŠ¨ï¼Œåˆ‡æ¢å±å¹•\n  - ä¸Šæ»‘ï¼Œå‡ºç°ç›®å‰è¿è¡Œçš„çª—å£\n\nå‰è¿›/åé€€ï¼š\n\n- æµè§ˆå™¨ä¸­ `command + â†` `command + â†`ï¼ˆè¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¸ç”¨è¿™ä¸ªåˆ‡æ¢ tabï¼‰\n- è§¦æ‘¸æ¿\n  - ä¸¤æŒ‡å·¦æ»‘\n  - ä¸¤æŒ‡å³æ»‘\n\næµè§ˆå™¨:\n\n- æ”¾å¤§ç¼©å° `command + +` `command + -`\n- åˆ·æ–° `command+r` å¼ºåˆ¶åˆ·æ–°ï¼š`command+shift+r`\n- è¿›å…¥å¼€å‘è€…æ¨¡å¼ `command+option+i`\n- æ‰“å¼€ä¸Šæ¬¡å…³é—­é¡µé¢ `command+shift+t`\n\nç³»ç»Ÿé€šç”¨ï¼š\n\n- éšè—çª—å£ `command+h`\n- æœ€å°åŒ–çª—å£ `command+m`\n- æ–°å»ºçª—å£ `command+n`\n- æ–°å»º tab `command+t`\n- å¦å­˜ä¸º `command+shift+S`\n- å…³é—­ tab `command+w`\n- é€€å‡ºçª—å£ `command + q`\n- å¤åˆ¶ç²˜è´´ `command + c` `command + v`\n\nå…¶ä»–ï¼š\n\n- å•è¯è·³è·ƒ `option + â†` `option + â†’`\n- åˆ°å¼€å¤´ `command + â†` åˆ°ç»“å°¾ `command + â†’`ï¼Œæœ‰çš„æ—¶å€™ `command` ä¸è¡Œæ¢æˆ `fn`\n\n## æ‰‹åŠ¿\n\nå¯ä»¥åœ¨ `ç³»ç»Ÿåå¥½è®¾ç½® -> è§¦æ§æ¿` ä¸­äº†è§£ã€‚\n\n## ä¸ªæ€§åŒ–è®¾ç½®\n\n### è§¦å‘è§’\n\n`ç³»ç»Ÿåå¥½è®¾ç½® -> æ¡Œé¢ä¸å±å¹•ä¿æŠ¤ç¨‹åº -> å±å¹•ä¿æŠ¤ç¨‹åº -> è§¦å‘è§’`\n\n### Night Shift\n\n`ç³»ç»Ÿåå¥½è®¾ç½® -> æ˜¾ç¤ºå™¨ -> Night Shift`\n\n-- EOF --\n","tags":["mac"]},{"title":"Laravel ä¸­ composer åŠ è½½æµç¨‹","url":"/2019/04/28/composer-autoload-in-laravel/","content":"\n## å¯åŠ¨\n\n- Laravel 5.8\n\næ–‡ç« ä»¥ Laravel å­¦ä¹ ã€‚å…¥å£æ–‡ä»¶ `public/index.php`ï¼š\n\n```php\n// Register The Auto Loader\nrequire __DIR__.'/../vendor/autoload.php';\n```\n\n`autoload.php` ä¸è´Ÿè´£å…·ä½“åŠŸèƒ½é€»è¾‘ï¼Œåªåšäº†ä¸¤ä»¶äº‹ï¼šåˆå§‹åŒ–è‡ªåŠ¨åŠ è½½ç±»ã€æ³¨å†Œè‡ªåŠ¨åŠ è½½ç±»ã€‚\n\n`autoload_real.php` ä¸­çš„ç±»åä¸º `ComposerAutoloaderInit...` è¿™å¯èƒ½æ˜¯ä¸ºé˜²æ­¢ä¸ç”¨æˆ·è‡ªå®šä¹‰ç±»åè·Ÿè¿™ä¸ªç±»é‡å¤å†²çªï¼ŒåŠ ä¸Šäº†å“ˆå¸Œå€¼ã€‚\n\nå…¶å®è¿˜æœ‰ä¸€ä¸ªåšæ³•æˆ‘ä»¬æ›´åŠ ç†Ÿæ‚‰ï¼Œæ˜¯å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ã€‚è¿™é‡Œä¸ºä»€ä¹ˆä¸å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´å‘¢ï¼Ÿä¸€ç§ç†è§£ï¼šå‘½åç©ºé—´ä¸€èˆ¬éƒ½æ˜¯ä¸ºäº†å¤ç”¨ï¼Œè€Œè¿™ä¸ªç±»åªéœ€è¦è¿è¡Œä¸€æ¬¡å³å¯ï¼Œä»¥åä¹Ÿä¸ä¼šç”¨å¾—åˆ°ï¼Œç”¨å“ˆå¸Œå€¼æ›´åŠ åˆé€‚ã€‚\n\n<!-- more -->\n\n## autoload_real.php\n\n`autoload.php` ä¸»è¦è°ƒç”¨äº† `getLoader()`ï¼š\n\n```php\npublic static function getLoader()\n{\n    // å•ä¾‹æ¨¡å¼ï¼Œè‡ªåŠ¨åŠ è½½ç±»åªèƒ½æœ‰ä¸€ä¸ª 1\n    if (null !== self::$loader) {\n        return self::$loader;\n    }\n\n    // è·å¾—è‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±»å¯¹è±¡ 2\n    spl_autoload_register(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'), true, true);\n    self::$loader = $loader = new \\Composer\\Autoload\\ClassLoader();\n    spl_autoload_unregister(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'));\n\n    // åˆå§‹åŒ–è‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±»å¯¹è±¡ 3\n    $useStaticLoader = PHP_VERSION_ID >= 50600 && !defined('HHVM_VERSION') && (!function_exists('zend_loader_file_encoded') || !zend_loader_file_encoded());\n    if ($useStaticLoader) {\n        require_once __DIR__ . '/autoload_static.php';\n\n        call_user_func(\\Composer\\Autoload\\ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::getInitializer($loader));\n    } else {\n        $map = require __DIR__ . '/autoload_namespaces.php';\n        foreach ($map as $namespace => $path) {\n            $loader->set($namespace, $path);\n        }\n\n        $map = require __DIR__ . '/autoload_psr4.php';\n        foreach ($map as $namespace => $path) {\n            $loader->setPsr4($namespace, $path);\n        }\n\n        $classMap = require __DIR__ . '/autoload_classmap.php';\n        if ($classMap) {\n            $loader->addClassMap($classMap);\n        }\n    }\n\n    // æ³¨å†Œè‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±»å¯¹è±¡ 4\n    $loader->register(true);\n\n    // è‡ªåŠ¨åŠ è½½å…¨å±€å‡½æ•° 5\n    if ($useStaticLoader) {\n        $includeFiles = Composer\\Autoload\\ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$files;\n    } else {\n        $includeFiles = require __DIR__ . '/autoload_files.php';\n    }\n    foreach ($includeFiles as $fileIdentifier => $file) {\n        composerRequire76e88f0b305cd64c7c84b90b278c31db($fileIdentifier, $file);\n    }\n\n    return $loader;\n}\n```\n\n## å•ä¾‹æ¨¡å¼ 1\n\n```php\nif (null !== self::$loader) {\n    return self::$loader;\n}\n```\n\n## æ„é€  ClassLoader æ ¸å¿ƒç±» 2\n\n```php\nspl_autoload_register(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'), true, true);\nself::$loader = $loader = new \\Composer\\Autoload\\ClassLoader();\nspl_autoload_unregister(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'));\n```\n\n```php\npublic static function loadClassLoader($class)\n{\n    if ('Composer\\Autoload\\ClassLoader' === $class) {\n        require __DIR__ . '/ClassLoader.php';\n    }\n}\n```\n\n`composer` å…ˆå‘ `PHP` è‡ªåŠ¨åŠ è½½æœºåˆ¶æ³¨å†Œäº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•° `require` äº† `ClassLoader` æ–‡ä»¶ã€‚æˆåŠŸ `new` å‡ºè¯¥æ–‡ä»¶ä¸­æ ¸å¿ƒç±» `ClassLoader()` åï¼Œåˆé”€æ¯äº†è¯¥å‡½æ•°ã€‚\n\nä¸ºä»€ä¹ˆä¸ç›´æ¥ `require`ï¼ŸåŸå› æ˜¯ï¼šæ€•æœ‰çš„ç”¨æˆ·ä¹Ÿå®šä¹‰äº†ä¸ª `\\Composer\\Autoload\\ClassLoader` å‘½åç©ºé—´ï¼Œå¯¼è‡´è‡ªåŠ¨åŠ è½½é”™è¯¯æ–‡ä»¶ã€‚\n\né‚£ä¸ºä»€ä¹ˆä¸è·Ÿå¼•å¯¼ç±»ä¸€æ ·ç”¨ä¸ªå“ˆå¸Œå€¼å‘¢ï¼ŸåŸå› æ˜¯ï¼šè¿™ä¸ªç±»æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œæ¡†æ¶å…è®¸ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªç±»ã€‚\n\n## åˆå§‹åŒ–æ ¸å¿ƒç±»å¯¹è±¡ 3\n\nå¯¹è‡ªåŠ¨åŠ è½½ç±»çš„åˆå§‹åŒ–ï¼Œä¸»è¦æ˜¯ç»™è‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±»åˆå§‹åŒ–é¡¶çº§å‘½åç©ºé—´æ˜ å°„ã€‚åˆå§‹åŒ–çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š\n\n1. ä½¿ç”¨ `autoload_static` è¿›è¡Œé™æ€åˆå§‹åŒ–\n2. è°ƒç”¨æ ¸å¿ƒç±»æ¥å£åˆå§‹åŒ–\n\n### autoload_static é™æ€åˆå§‹åŒ–\n\né™æ€åˆå§‹åŒ–åªæ”¯æŒ `PHP 5.6` ä»¥ä¸Šç‰ˆæœ¬ã€ä¸æ”¯æŒ `HHVM` è™šæ‹Ÿæœºã€ä¸å­˜åœ¨ `Zend-encoded file`ã€‚\n\n`autoload_static.php`\n\n```php\n<?php\n\n// autoload_static.php @generated by Composer\n\nnamespace Composer\\Autoload;\n\n// hash é˜²æ­¢å†²çª\nclass ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db\n{\n    public static $files = array (...);\n    public static $prefixLengthsPsr4 = array (...);\n    public static $prefixDirsPsr4 = array (...);\n    public static $fallbackDirsPsr4 = array (...);\n    public static $prefixesPsr0 = array (...);\n    public static $classMap = array array (...);\n\n    public static function getInitializer(ClassLoader $loader)\n    {\n        return \\Closure::bind(function () use ($loader) {\n            $loader->prefixLengthsPsr4 = ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$prefixLengthsPsr4;\n            $loader->prefixDirsPsr4 = ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$prefixDirsPsr4;\n            $loader->fallbackDirsPsr4 = ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$fallbackDirsPsr4;\n            $loader->prefixesPsr0 = ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$prefixesPsr0;\n            $loader->classMap = ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$classMap;\n\n        }, null, ClassLoader::class);\n    }\n}\n```\n\nè¿™ä¸ªé™æ€åˆå§‹åŒ–ç±»çš„æ ¸å¿ƒå°±æ˜¯ `getInitializer()` å‡½æ•°ï¼Œå®ƒå°†è‡ªå·±ç±»ä¸­çš„é¡¶çº§å‘½åç©ºé—´æ˜ å°„ç»™äº† ClassLoader ç±»ã€‚\n\nå€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼ŸåŸå› å°±æ˜¯ `ClassLoader` ä¸­çš„ `prefixLengthsPsr4` ã€`prefixDirsPsr4` ç­‰ç­‰æ–¹æ³•éƒ½æ˜¯ `private` çš„ã€‚æ™®é€šçš„å‡½æ•°æ²¡åŠæ³•ç»™ç±»çš„ `private` æˆå‘˜å˜é‡èµ‹å€¼ã€‚åˆ©ç”¨åŒ¿åå‡½æ•°çš„ç»‘å®šåŠŸèƒ½å°±å¯ä»¥å°†æŠŠåŒ¿åå‡½æ•°è½¬ä¸º `ClassLoader` ç±»çš„æˆå‘˜å‡½æ•°ã€‚\n\nå…³äºåŒ¿åå‡½æ•°çš„ [ç»‘å®šåŠŸèƒ½](http://www.cnblogs.com/yjf512/p/4421289.html)ã€‚\n\næ¥ä¸‹æ¥å°±æ˜¯ é¡¶çº§å‘½åç©ºé—´ åˆå§‹åŒ–çš„å…³é”®äº†ã€‚\n\n#### classMap\n\n```php\npublic static $classMap = array (\n    'App\\\\Api\\\\Middleware\\\\DeviceRecord' => __DIR__ . '/../..' . '/app/Api/Middleware/DeviceRecord.php',\n    'App\\\\Api\\\\Middleware\\\\HeaderCheck' => __DIR__ . '/../..' . '/app/Api/Middleware/HeaderCheck.php',\n    ...\n)\n```\n\nç›´æ¥å‘½åç©ºé—´å…¨åä¸ç›®å½•çš„æ˜ å°„ï¼Œæ²¡æœ‰é¡¶çº§å‘½åç©ºé—´ã€‚ç®€å•ç²—æš´ï¼Œä¹Ÿå¯¼è‡´è¿™ä¸ªæ•°ç»„ç›¸å½“çš„å¤§ã€‚\n\n#### PSR0 é¡¶çº§å‘½åç©ºé—´æ˜ å°„\n\n```php\npublic static $prefixesPsr0 = array (\n    'P' =>\n    array (\n        'Prophecy\\\\' =>\n        array (\n            0 => __DIR__ . '/..' . '/phpspec/prophecy/src',\n        ),\n        'Parsedown' =>\n        array (\n            0 => __DIR__ . '/..' . '/erusev/parsedown',\n        ),\n    ),\n    ...\n);\n```\n\nä¸ºäº†å¿«é€Ÿæ‰¾åˆ°é¡¶çº§å‘½åç©ºé—´ï¼Œè¿™é‡Œä½¿ç”¨å‘½åç©ºé—´ç¬¬ä¸€ä¸ªå­—æ¯ä½œä¸ºå‰ç¼€ç´¢å¼•ã€‚è¿™ä¸ªæ˜ å°„çš„ç”¨æ³•æ¯”è¾ƒæ˜æ˜¾ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ `Parsedown/example` è¿™æ ·çš„å‘½åç©ºé—´ï¼Œé¦–å…ˆé€šè¿‡é¦–å­—æ¯ `P`ï¼Œæ‰¾åˆ°ï¼š\n\n```php\n'P' => array (...)\n```\n\nè¿™ä¸ªæ•°ç»„ï¼Œç„¶åå°±ä¼šéå†è¿™ä¸ªæ•°ç»„æ¥å’Œ `Parsedown/example` æ¯”è¾ƒï¼Œå‘ç°ç¬¬ä¸€ä¸ª `Prophecy` ä¸ç¬¦åˆï¼Œç¬¬äºŒä¸ª `Parsedown` ç¬¦åˆï¼Œç„¶åå¾—åˆ°äº†æ˜ å°„ç›®å½•ï¼ˆæ˜ å°„ç›®å½•å¯èƒ½ä¸æ­¢ä¸€ä¸ªï¼‰ï¼š\n\n```php\n0 => __DIR__ . '/..' . '/erusev/parsedown',\n```\n\næ¥ç€éå†è¿™ä¸ªæ•°ç»„ï¼Œå°è¯• `__DIR__ . '/..' . '/erusev/parsedown/Parsedown/example.php'` æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ¥ç€éå†æ•°ç»„ï¼ˆè¿™ä¸ªä¾‹å­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¦‚æœæ•°ç»„éå†å®Œéƒ½æ²¡æœ‰ï¼Œå°±ä¼šåŠ è½½å¤±è´¥ã€‚\n\n#### PSR4 æ ‡å‡†é¡¶çº§å‘½åç©ºé—´æ˜ å°„\n\n```php\npublic static $prefixLengthsPsr4 = array (\n    'p' =>\n    array (\n        'phpDocumentor\\\\Reflection\\\\' => 25,\n    ),\n    'Z' =>\n    array (\n        'Zend\\\\Diactoros\\\\' => 15,\n    ),\n    ...\n);\n\npublic static $prefixDirsPsr4 = array (\n    'phpDocumentor\\\\Reflection\\\\' =>\n    array (\n        0 => __DIR__ . '/..' . '/phpdocumentor/reflection-common/src',\n        1 => __DIR__ . '/..' . '/phpdocumentor/reflection-docblock/src',\n        2 => __DIR__ . '/..' . '/phpdocumentor/type-resolver/src',\n    ),\n    'Zend\\\\Diactoros\\\\' =>\n    array (\n        0 => __DIR__ . '/..' . '/zendframework/zend-diactoros/src',\n    ),\n    ...\n);\n```\n\n`PSR4` æ ‡å‡† `é¡¶çº§å‘½åç©ºé—´` æ˜ å°„ç”¨äº†ä¸¤ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå’Œ `PSR0` ä¸€æ ·ç”¨å‘½åç©ºé—´ç¬¬ä¸€ä¸ªå­—æ¯ä½œä¸ºå‰ç¼€ç´¢å¼•ï¼Œç„¶åæ˜¯ `é¡¶çº§å‘½åç©ºé—´`ï¼Œä½†æ˜¯æœ€ç»ˆå¹¶ä¸æ˜¯æ–‡ä»¶è·¯å¾„ï¼Œè€Œæ˜¯ `é¡¶çº§å‘½åç©ºé—´` çš„é•¿åº¦ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º `PSR4` çš„æ–‡ä»¶ç›®å½•æ›´åŠ çµæ´»ï¼Œæ›´åŠ ç®€æ´ã€‚\n\n`PSR0` ä¸­ `é¡¶çº§å‘½åç©ºé—´` ç›®å½• **ç›´æ¥åŠ ** åˆ°å‘½åç©ºé—´å‰é¢å°±å¯ä»¥å¾—åˆ°è·¯å¾„ï¼š\n\n```\n                                        â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“\nParsedown/example => __DIR__ . '/..' . '/erusev/parsedown/Parsedown/example.php\n                                                         â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘\n```\n\nè€Œ `PSR4` å´æ˜¯ç”¨é¡¶çº§å‘½åç©ºé—´ç›®å½• **æ›¿æ¢** é¡¶çº§å‘½åç©ºé—´ï¼Œæ‰€ä»¥è·å¾—é¡¶çº§å‘½åç©ºé—´çš„ **é•¿åº¦** å¾ˆé‡è¦ï¼š\n\n```\n                                        â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“\nParsedown/example => __DIR__ . '/..' . '/erusev/parsedown/example.php\n                                                â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘\n```\n\nä¸¾ä¾‹ï¼šå‡å¦‚æˆ‘ä»¬æ‰¾ `Symfony\\\\Polyfill\\\\Mbstring\\\\example` è¿™ä¸ªç±»ï¼Œå’Œ `PSR0` ä¸€æ ·é€šè¿‡å‰ç¼€ç´¢å¼•å’Œå­—ç¬¦ä¸²åŒ¹é…æˆ‘ä»¬å¾—åˆ°äº†:\n\n```\n'Symfony\\\\Polyfill\\\\Mbstring\\\\' => 26,\n```\n\nè¿™æ¡è®°å½•ï¼Œé”®æ˜¯é¡¶çº§å‘½åç©ºé—´ï¼Œå€¼æ˜¯å‘½åç©ºé—´çš„é•¿åº¦ã€‚æ‹¿åˆ°é¡¶çº§å‘½åç©ºé—´åå» `$prefixDirsPsr4` è·å–å®ƒçš„æ˜ å°„ç›®å½•æ•°ç»„ï¼ˆæ³¨æ„æ˜ å°„ç›®å½•å¯èƒ½ä¸æ­¢ä¸€æ¡ï¼‰ï¼š\n\n```php\n'Symfony\\\\Polyfill\\\\Mbstring\\\\' =>\narray (\n    0 => __DIR__ . '/..' . '/symfony/polyfill-mbstring',\n),\n```\n\nå°† `Symfony\\\\Polyfill\\\\Mbstring\\\\example` å‰ 26 ä¸ªå­—æ¯æ›¿æ¢ä¸º `__DIR__ . '/..' . '/symfony/polyfill-mbstring` ä¹Ÿå°±æ˜¯ï¼š\n\n```\n__DIR__ . '/..' . '/symfony/polyfill-mbstring/example.php\n```\n\nå…ˆéªŒè¯ç£ç›˜ä¸Šè¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ¥ç€éå†ã€‚å¦‚æœéå†åæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åŠ è½½å¤±è´¥ã€‚\n\nè‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±» `ClassLoader` çš„é™æ€åˆå§‹åŒ–å®Œæˆï¼\n\n> å…¶å®è¿˜æœ‰ `$fallbackDirsPsr4`ï¼Œæš‚æœªç ”ç©¶\n\n### è°ƒç”¨æ¥å£åˆå§‹åŒ–\n\nå¦‚æœ `PHP` ç‰ˆæœ¬ä½äº `5.6` æˆ–è€…ä½¿ç”¨ `HHVM` è™šæ‹Ÿæœºç¯å¢ƒæˆ–è€…å­˜åœ¨ `zend_loader_file_encoded`ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨æ ¸å¿ƒç±»çš„æ¥å£è¿›è¡Œåˆå§‹åŒ–ã€‚\n\n```php\n\n/*\nPSR0 å–å‡ºå‘½åç©ºé—´çš„ç¬¬ä¸€ä¸ªå­—æ¯ä½œä¸ºç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•å¯¹åº”å¤šä¸ªé¡¶çº§å‘½åç©ºé—´ï¼Œä¸€ä¸ªé¡¶çº§å‘½åç©ºé—´å¯¹åº”å¤šä¸ªç›®å½•è·¯å¾„ï¼Œå…·ä½“å½¢å¼å¯ä»¥æŸ¥çœ‹ä¸Šé¢çš„ autoload_static çš„ $prefixesPsr0ã€‚\n\nå¦‚æœæ²¡æœ‰é¡¶çº§å‘½åç©ºé—´ï¼Œå°±åªå­˜å‚¨ä¸€ä¸ªè·¯å¾„åï¼Œä»¥ä¾¿åœ¨åé¢å°è¯•åŠ è½½ã€‚\n*/\n$map = require __DIR__ . '/autoload_namespaces.php';\nforeach ($map as $namespace => $path) {\n    $loader->set($namespace, $path);\n}\n\n/*\nPSR4 å¦‚æœæ²¡æœ‰é¡¶çº§å‘½åç©ºé—´ï¼Œå°±ç›´æ¥ä¿å­˜ç›®å½•ã€‚\nå¦‚æœæœ‰å‘½åç©ºé—´çš„è¯ï¼Œè¦ä¿è¯é¡¶çº§å‘½åç©ºé—´æœ€åæ˜¯ \\ï¼Œç„¶ååˆ†åˆ«ä¿å­˜\n( å‰ç¼€ -> é¡¶çº§å‘½åç©ºé—´ï¼Œé¡¶çº§å‘½åç©ºé—´ -> é¡¶çº§å‘½åç©ºé—´é•¿åº¦ )\n( é¡¶çº§å‘½åç©ºé—´ -> ç›®å½• )\n\nè¿™ä¸¤ä¸ªæ˜ å°„æ•°ç»„ã€‚å…·ä½“å½¢å¼å¯ä»¥æŸ¥çœ‹ä¸Šé¢æˆ‘ä»¬è®²çš„ autoload_static çš„ prefixLengthsPsr4ã€$prefixDirsPsr4 ã€‚\n*/\n$map = require __DIR__ . '/autoload_psr4.php';\nforeach ($map as $namespace => $path) {\n    $loader->setPsr4($namespace, $path);\n}\n\n/*\næ•´ä¸ªå‘½åç©ºé—´ä¸ç›®å½•ä¹‹é—´çš„æ˜ å°„\n*/\n$classMap = require __DIR__ . '/autoload_classmap.php';\nif ($classMap) {\n    $loader->addClassMap($classMap);\n}\n```\n\n## æ³¨å†Œæ ¸å¿ƒç±»å¯¹è±¡ 4\n\nComposer è‡ªåŠ¨åŠ è½½åŠŸèƒ½çš„å¯åŠ¨ä¸åˆå§‹åŒ–ï¼Œç»è¿‡å¯åŠ¨ä¸åˆå§‹åŒ–ï¼Œè‡ªåŠ¨åŠ è½½æ ¸å¿ƒç±»å¯¹è±¡å·²ç»è·å¾—äº†é¡¶çº§å‘½åç©ºé—´ä¸ç›¸åº”ç›®å½•çš„æ˜ å°„ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœæœ‰å‘½åç©ºé—´ `App\\Console\\Kernel`ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº† `App\\` å¯¹åº”çš„ç›®å½•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è§£å†³ä¸‹é¢çš„å°±æ˜¯ `\\Console\\Kernel` è¿™ä¸€æ®µã€‚\n\n```php\n/**\n * Registers this instance as an autoloader.\n *\n * @param bool $prepend Whether to prepend the autoloader or not\n*/\npublic function register($prepend = false)\n{\n    spl_autoload_register(array($this, 'loadClass'), true, $prepend);\n}\n```\n\nä¸€è¡Œä»£ç å®ç°è‡ªåŠ¨åŠ è½½ã€‚æ ¸å¿ƒåœ¨ `ClassLoader` çš„ `loadClass()` å‡½æ•°ä¸Šï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£æŒ‰ç…§ `PSR` æ ‡å‡†å°†é¡¶å±‚å‘½åç©ºé—´ä»¥ä¸‹çš„å†…å®¹è½¬ä¸ºå¯¹åº”çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„å°† `App\\Console\\Kernel` ä¸­ `Console\\Kernel` è¿™ä¸€æ®µè½¬ä¸ºç›®å½•ã€‚\n\n## è‡ªåŠ¨åŠ è½½å…¨å±€å‡½æ•° 5\n\n`Composer` ä¸æ­¢å¯ä»¥è‡ªåŠ¨åŠ è½½å‘½åç©ºé—´ï¼Œè¿˜å¯ä»¥åŠ è½½å…¨å±€å‡½æ•°ã€‚å°±æ˜¯æŠŠå…¨å±€å‡½æ•°å†™åˆ°ç‰¹å®šçš„æ–‡ä»¶é‡Œé¢å»ï¼Œåœ¨ç¨‹åºè¿è¡Œå‰æŒ¨ä¸ª `require` å°±è¡Œäº†ã€‚\n\n```php\nif ($useStaticLoader) {\n    // é™æ€åˆå§‹åŒ–\n    $includeFiles = Composer\\Autoload\\ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$files;\n} else {\n    // æ™®é€šåˆå§‹åŒ–\n    $includeFiles = require __DIR__ . '/autoload_files.php';\n}\nforeach ($includeFiles as $fileIdentifier => $file) {\n    composerRequire76e88f0b305cd64c7c84b90b278c31db($fileIdentifier, $file);\n}\n```\n\n```php\nfunction composerRequire76e88f0b305cd64c7c84b90b278c31db($fileIdentifier, $file)\n{\n    if (empty($GLOBALS['__composer_autoload_files'][$fileIdentifier])) {\n        require $file;\n\n        $GLOBALS['__composer_autoload_files'][$fileIdentifier] = true;\n    }\n}\n```\n\n### é—®é¢˜ 1\n\nä¸ºä»€ä¹ˆä¸ç›´æ¥ `require` `$includeFiles` é‡Œé¢çš„æ¯ä¸ªæ–‡ä»¶åï¼Œè€Œè¦ç”¨ç±»å¤–é¢çš„å‡½æ•° `composerRequire...` ï¼Ÿ\n\n- é¿å…å’Œç”¨æˆ·å®šä¹‰å‡½æ•°å†²çª\n- é˜²æ­¢æœ‰äººåœ¨å…¨å±€å‡½æ•°æ‰€åœ¨çš„æ–‡ä»¶å†™ `$this` æˆ–è€… `self`\n\nå‡å¦‚ `$includeFiles` æœ‰ä¸ª `app/helper.php` æ–‡ä»¶ï¼Œè¿™ä¸ª `helper.php` æ–‡ä»¶çš„å‡½æ•°å¤–æœ‰ä¸€è¡Œä»£ç ï¼š `$this->foo()`ï¼Œå¦‚æœå¼•å¯¼ç±»åœ¨ `getLoader()` å‡½æ•°ç›´æ¥ `require($file)`ï¼Œé‚£ä¹ˆå¼•å¯¼ç±»å°±ä¼šè¿è¡Œè¿™å¥ä»£ç ï¼Œè°ƒç”¨è‡ªå·±çš„ `foo()` å‡½æ•°ï¼Œè¿™æ˜¾ç„¶æ˜¯é”™çš„ã€‚\n\näº‹å®ä¸Š `helper.php` å°±ä¸åº”è¯¥å‡ºç° `$this` æˆ– `self` è¿™æ ·çš„ä»£ç ï¼Œè¿™æ ·å†™ä¸€èˆ¬éƒ½æ˜¯ç”¨æˆ·å†™é”™äº†çš„ï¼Œä¸€æ—¦è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼š\n\n- ç¬¬ä¸€ç§æƒ…å†µï¼šå¼•å¯¼ç±»æ°å¥½æœ‰ `foo()` å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šè«åå…¶å¦™æ‰§è¡Œäº†å¼•å¯¼ç±»çš„ `foo()`ã€‚\n- ç¬¬äºŒç§æƒ…å†µï¼šå¼•å¯¼ç±»æ²¡æœ‰ `foo()` å‡½æ•°ï¼Œä½†æ˜¯å´ç”©å‡ºæ¥å¼•å¯¼ç±»æ²¡æœ‰ `foo()` æ–¹æ³•è¿™æ ·çš„é”™è¯¯æç¤ºï¼Œç”¨æˆ·ä¸çŸ¥é“è‡ªå·±å“ªé‡Œé”™äº†ã€‚æŠŠ `require` è¯­å¥æ”¾åˆ° **å¼•å¯¼ç±»çš„å¤–é¢**ï¼Œé‡åˆ° `$this` æˆ–è€… `self` ï¼Œç¨‹åºå°±ä¼šå‘Šè¯‰ç”¨æˆ·æ ¹æœ¬æ²¡æœ‰ç±»ï¼Œ `$this` æˆ– `self` æ— æ•ˆï¼Œé”™è¯¯ä¿¡æ¯æ›´åŠ æ˜æœ—ã€‚\n\n### é—®é¢˜ 2\n\nä¸ºä»€ä¹ˆè¦ç”¨ `hash` ä½œä¸º `$fileIdentifier`ï¼Ÿ\n\nè¿™ä¸ªå˜é‡æ˜¯ç”¨æ¥æ§åˆ¶å…¨å±€å‡½æ•°åªè¢« `require` ä¸€æ¬¡çš„ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç”¨ `require_once` å‘¢ï¼Ÿäº‹å®ä¸Š `require_once` æ¯” `require` æ•ˆç‡ä½å¾ˆå¤šï¼Œä½¿ç”¨å…¨å±€å˜é‡ `$GLOBALS` è¿™æ ·æ§åˆ¶åŠ è½½ä¼šæ›´å¿«ã€‚çŒœæµ‹å¦ä¸€ä¸ªåŸå› åº”è¯¥æ˜¯ `require_once` å¯¹ç›¸å¯¹è·¯å¾„çš„æ”¯æŒå¹¶ä¸ç†æƒ³ï¼Œæ‰€ä»¥ `composer` å°½é‡å°‘ç”¨ `require_once`ã€‚\n\n## è¿è¡Œ\n\n`ClassLoader` å°† `loadClass()` å‡½æ•°æ³¨å†Œåˆ° `PHP SPL` ä¸­çš„ `spl_autoload_register()` é‡Œé¢å»ã€‚è¿™æ ·ï¼Œæ¯å½“ PHP é‡åˆ°ä¸€ä¸ªä¸è®¤è¯†çš„å‘½åç©ºé—´çš„æ—¶å€™ï¼ŒPHP ä¼šè‡ªåŠ¨è°ƒç”¨æ³¨å†Œåˆ° `spl_autoload_register()` é‡Œé¢çš„å‡½æ•°å †æ ˆï¼Œè¿è¡Œå…¶ä¸­çš„æ¯ä¸ªå‡½æ•°ï¼Œç›´åˆ°æ‰¾åˆ°å‘½åç©ºé—´å¯¹åº”çš„æ–‡ä»¶ã€‚\n\n```php\n/**\n * Loads the given class or interface.\n *\n * @param  string    $class The name of the class\n    * @return bool|null True if loaded, null otherwise\n    */\npublic function loadClass($class)\n{\n    if ($file = $this->findFile($class)) {\n        includeFile($file); // include $file; Prevents access to $this/self from included files.\n\n        return true;\n    }\n}\n\n/**\n * Finds the path to the file where the class is defined.\n *\n * @param string $class The name of the class\n    *\n    * @return string|false The path if found, false otherwise\n    */\npublic function findFile($class)\n{\n    // class map lookup\n    if (isset($this->classMap[$class])) {\n        return $this->classMap[$class];\n    }\n\n    // classMapAuthoritative å…³é—­æœç´¢æœªåœ¨ç±»æ˜ å°„ä¸­æ³¨å†Œçš„ç±»çš„ prefix and fallback directoriesã€‚- ä¸æ¸…æ¥šå¹²å•¥çš„ æš‚æ²¡ç ”ç©¶\n    if ($this->classMapAuthoritative || isset($this->missingClasses[$class])) {\n        return false;\n    }\n\n    // å¦‚æœå¯ç”¨æ‰©å±•åï¼Œåˆ™ä½¿ç”¨ APCu å‰ç¼€æ¥ç¼“å­˜å·²æ‰¾åˆ°/æœªæ‰¾åˆ°çš„ç±»ã€‚ - ä¸æ¸…æ¥šå¹²å•¥çš„ æš‚æ²¡ç ”ç©¶\n    if (null !== $this->apcuPrefix) {\n        $file = apcu_fetch($this->apcuPrefix.$class, $hit);\n        if ($hit) {\n            return $file;\n        }\n    }\n\n    $file = $this->findFileWithExtension($class, '.php');\n\n    // Search for Hack files if we are running on HHVM\n    if (false === $file && defined('HHVM_VERSION')) {\n        $file = $this->findFileWithExtension($class, '.hh');\n    }\n\n    if (null !== $this->apcuPrefix) {\n        apcu_add($this->apcuPrefix.$class, $file);\n    }\n\n    if (false === $file) {\n        // Remember that this class does not exist.\n        $this->missingClasses[$class] = true;\n    }\n\n    return $file;\n}\n```\n\n`loadClass()` ä¸»è¦è°ƒç”¨ `findFile()` å‡½æ•°ã€‚`findFile()` åœ¨è§£æå‘½åç©ºé—´çš„æ—¶å€™ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n\n- `classMap` ç›´æ¥çœ‹å‘½åç©ºé—´æ˜¯å¦åœ¨æ˜ å°„æ•°ç»„\n- `findFileWithExtension()` åŒ…å«äº† `PSR0`ã€`PSR4`\n\nå¦‚æœæˆ‘ä»¬åœ¨ä»£ç ä¸­å†™ `'phpDocumentor\\Reflection\\example`ï¼ŒPHP ä¼šé€šè¿‡ SPL è°ƒç”¨ `loadClass` -> `findFile` -> `findFileWithExtension`ã€‚\n\n- é¦–å…ˆé»˜è®¤ç”¨ `.php` åç¼€åè°ƒç”¨ `findFileWithExtension` å‡½æ•°é‡Œï¼Œåˆ©ç”¨ `PSR4` æ ‡å‡†å°è¯•è§£æç›®å½•æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™ç»§ç»­ç”¨ `PSR0` æ ‡å‡†è§£æ\n- å¦‚æœè§£æå‡ºæ¥çš„ç›®å½•æ–‡ä»¶ä»ç„¶ä¸å­˜åœ¨ï¼Œä½†æ˜¯ç¯å¢ƒæ˜¯ `HHVM` è™šæ‹Ÿæœºï¼Œç»§ç»­ç”¨åç¼€å `.hh` å†æ¬¡è°ƒç”¨ `findFileWithExtension` å‡½æ•°ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¯´æ˜æ­¤å‘½åç©ºé—´æ— æ³•åŠ è½½ï¼Œæ”¾åˆ° `classMap` ä¸­è®¾ä¸º `false`ï¼Œä»¥ä¾¿ä»¥åæ›´å¿«åœ°åŠ è½½\n\n### PSR4\n\nå¯¹äº `phpDocumentor\\Reflection\\example`ï¼Œå½“å°è¯•åˆ©ç”¨ `PSR4` æ ‡å‡†æ˜ å°„ç›®å½•æ—¶ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n```php\n// $class: phpDocumentor\\Reflection\\example\n\n// PSR-4 lookup\n$logicalPathPsr4 = strtr($class, '\\\\', DIRECTORY_SEPARATOR) . $ext;\n// $logicalPathPsr4: phpDocumentor/Reflection/example.php(hh)`\n\n$first = $class[0];\n// $first: p\n\nif (isset($this->prefixLengthsPsr4[$first])) {\n    /* 'p' =>\n    array (\n        'phpDocumentor\\\\Reflection\\\\' => 25,\n    ),\n    */\n    $subPath = $class;\n    // $subPath: phpDocumentor\\Reflection\\example\n    while (false !== $lastPos = strrpos($subPath, '\\\\')) {\n        // $lastPos 13\n        $subPath = substr($subPath, 0, $lastPos);\n        $search = $subPath.'\\\\';\n        if (isset($this->prefixDirsPsr4[$search])) {\n            // search phpDocumentor\\\\Reflection\\\\\n            // $lastPos 25\n\n            /* 'phpDocumentor\\\\Reflection\\\\' =>\n                array (\n                    0 => __DIR__ . '/..' . '/phpdocumentor/reflection-common/src',\n                    1 => __DIR__ . '/..' . '/phpdocumentor/reflection-docblock/src',\n                    2 => __DIR__ . '/..' . '/phpdocumentor/type-resolver/src',\n                ),\n            */\n            $pathEnd = DIRECTORY_SEPARATOR . substr($logicalPathPsr4, $lastPos + 1);\n            // $pathEnd /example.php(hh)\n\n            foreach ($this->prefixDirsPsr4[$search] as $dir) {\n                // éå† 3 ä¸ª\n                if (file_exists($file = $dir . $pathEnd)) {\n                    // $file __DIR__ . '/..' . /phpdocumentor/type-resolver/src/example.php(hh)`\n                    return $file;\n                }\n            }\n        }\n    }\n}\n```\n\n### PSR0\n\nå¦‚æœ `PSR4` æ ‡å‡†åŠ è½½å¤±è´¥ï¼Œåˆ™è¦è¿›è¡Œ `PSR0` æ ‡å‡†åŠ è½½ã€‚å¯¹äº `phpDocumentor\\Reflection\\example`ï¼Œå½“å°è¯•åˆ©ç”¨ `PSR0` æ ‡å‡†æ˜ å°„ç›®å½•æ—¶ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n```php\n// $class: phpDocumentor\\Reflection\\example\n\n// PSR-0 lookup\nif (false !== $pos = strrpos($class, '\\\\')) {\n    // namespaced class name\n    $logicalPathPsr0 = substr($logicalPathPsr4, 0, $pos + 1)\n        . strtr(substr($logicalPathPsr4, $pos + 1), '_', DIRECTORY_SEPARATOR);\n} else {\n    // PEAR-like class name\n    $logicalPathPsr0 = strtr($class, '_', DIRECTORY_SEPARATOR) . $ext;\n}\n\n// $logicalPathPsr0: phpDocumentor/Reflection/example.php(hh)`\nif (isset($this->prefixesPsr0[$first])) {\n    foreach ($this->prefixesPsr0[$first] as $prefix => $dirs) {\n        /* 'P' =>\n        array (\n            'Prophecy\\\\' =>\n            array (\n                0 => __DIR__ . '/..' . '/phpspec/prophecy/src',\n            ),\n            'Parsedown' =>\n            array (\n                0 => __DIR__ . '/..' . '/erusev/parsedown',\n            ),\n        ), */\n        if (0 === strpos($class, $prefix)) {\n            foreach ($dirs as $dir) {\n                if (file_exists($file = $dir . DIRECTORY_SEPARATOR . $logicalPathPsr0)) {\n                    // $file __DIR__ . '/..' . '/phpspec/prophecy/src' . phpDocumentor/Reflection/example.php(hh)\n                    return $file;\n                }\n            }\n        }\n    }\n}\n```\n\n## Q&A\n\nä¸ªäººä¸€äº›ç–‘é—®ï¼š\n\n### é˜²æ­¢ç”¨æˆ·è‡ªå®šä¹‰ä¸ ClassLoader å‘½åç©ºé—´å†²çª\n\n```php\nspl_autoload_register(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'), true, true);\nself::$loader = $loader = new \\Composer\\Autoload\\ClassLoader();\nspl_autoload_unregister(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'));\n```\n\nä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥è§£å†³ï¼šä¸ç”¨æˆ·ä¹Ÿå®šä¹‰äº†ä¸ª `\\Composer\\Autoload\\ClassLoader` å‘½åç©ºé—´ï¼Œå¯¼è‡´è‡ªåŠ¨åŠ è½½é”™è¯¯æ–‡ä»¶ã€‚\n\nä¸ç¬¬å››ä¸ªå‚æ•° `$prepend` `true` æœ‰å…³å—ï¼Ÿ\n\n### composer StaticLoader æœ‰ä»€ä¹ˆä¼˜åŠ¿\n\n`composer` åœ¨åŠ è½½ç±»å’ŒåŠ è½½å…¨å±€æ–¹æ³•æ—¶ï¼Œéƒ½æœ‰ä¸¤ç§æ–¹å¼ã€‚\n\n```\n$useStaticLoader = PHP_VERSION_ID >= 50600 && !defined('HHVM_VERSION') && (!function_exists('zend_loader_file_encoded') || !zend_loader_file_encoded());\n```\n\nä»¥ `$useStaticLoader` çš„å€¼è¿›è¡Œé€‰æ‹©ï¼Œä¸ºä»€ä¹ˆä¸€å®šåˆ†ä¸¤ç§ï¼Œé™æ€æ–¹æ³•æ˜¯æœ‰ä»€ä¹ˆä¼˜åŠ¿å—ï¼Ÿ\n\n## References\n\n- [PHP Composer - åˆå§‹åŒ–æºç åˆ†æ](https://github.com/LeoYang90/laravel-source-analysis/blob/master/PHP%20Composer%E2%80%94%E2%80%94%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.md)\n\n-- EOF --\n","tags":["php","composer"]},{"title":"PHP è¯·å°å¿ƒåˆ¤æ–­ strpos","url":"/2019/04/10/php-strpos-warning/","content":"\næœ‰å¼€å§‹å†™ä¸–ç•Œä¸Šæœ€åçš„è¯­è¨€ PHP äº†ï¼ˆç‹—å¤´ä¿å‘½ï¼‰ã€‚ä¸€ä¸ªå¾ˆç®€å•çš„å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åˆ¤æ–­å°±æ‰å‘äº†ã€‚\n\næ–¹æ³•ç­¾åï¼š\n\n```php\nstrpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int\n```\n\n<!-- more -->\n\n```php\n$mystring = 'abc';\n$findme   = 'a';\nif (strpos($mystring, $findme)) {\n   dump('yes');\n}\n```\n\næ³¨æ„è¿™æ—¶æ˜¯ä¸ä¼šè¾“å‡º `yes`ï¼Œå› ä¸º `strpos($mystring, $findme)` è¿”å›çš„æ˜¯ `0`ã€‚å°±æƒ³å®˜æ–¹æ–‡æ¡£è¯´çš„ï¼š\n\n> Warning æ­¤å‡½æ•°å¯èƒ½è¿”å›å¸ƒå°”å€¼ FALSEï¼Œä½†ä¹Ÿå¯èƒ½è¿”å›ç­‰åŒäº FALSE çš„éå¸ƒå°”å€¼ã€‚åº”ä½¿ç”¨ === è¿ç®—ç¬¦æ¥æµ‹è¯•æ­¤å‡½æ•°çš„è¿”å›å€¼ã€‚\n\næ­£è§£ï¼š\n\n```php\nif (strpos($mystring, $findme) !== false) {\n   dump('yes');\n}\n```\n\nè¿™æ¬¡é—®é¢˜æ˜¯ç½‘ä¸Šä¸€æœï¼Œæ‰¾åˆ° `strpos` åçœ‹åˆ° `å¦‚æœæ²¡æ‰¾åˆ° needleï¼Œå°†è¿”å› FALSE` å°±æ²¡å¤šæƒ³å°±ç”¨äº†ã€‚è¯­è¨€é—´çš„å·®å¼‚è¿˜æœ‰æ³¨æ„ã€‚\n\n## References\n\n- [php.net - strpos](https://www.php.net/manual/zh/function.strpos.php)\n\n-- EOF --\n","tags":["php"]},{"title":"ES6 ä¸­ä½¿ç”¨ jQuery $(this) çš„é—®é¢˜","url":"/2019/04/10/es6-jquery-this-arrow-function/","content":"\nåœ¨è€é¡¹ç›®ä¸­å¼€å§‹æ”¹ç”¨ `laravel-mix` `ES6` é€æ¸è¿‡æ¸¡ã€‚æ‘¸ç´¢ä¸­é‡åˆ°åœ¨ä¸ `jQuery` ä¸€åŒä½¿ç”¨æ—¶ `ç®­å¤´å‡½æ•°` ä¸­ `$(this)` çš„å«ä¹‰å‘ç”Ÿäº†å˜åŒ–ã€‚\n\n<!-- more -->\n\né‡åˆ°è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯æ²¡æœ‰ææ¸…æ¥š [ç®­å¤´å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)ï¼š\n\n```js\n$('.js-bottom-btn').click(() => {\n    let flag = $(this).date('flag');\n    ...\n});\n```\n\nè½¬æ¢ä¸ºäº†ï¼š\n\n```js\n$('.js-bottom-btn').click(function() {\n    let flag = $(_this).date('flag');\n    ...\n});\n```\n\n`_this` is undefined\n\næ ¹æ® [jQuery click æ–‡æ¡£](https://api.jquery.com/click/) å¯ä»¥ä¿®æ”¹ä¸ºï¼š\n\n```js\n$('.js-bottom-btn').click(event => {\n    let flag = $(event.currentTarget).date('flag');\n    ...\n});\n```\n\nç±»ä¼¼çš„é—®é¢˜ï¼š\n\n```js\n$(\"jquery-selector\").each(() => {\n  $(this).click();\n});\n```\n\néœ€è¦æ”¹ä¸ºï¼š\n\n```js\n$(\"jquery-selector\").each((index, element) => {\n  $(element).click();\n});\n```\n\n## References\n\n- [Using jQuery \\$(this) with ES6 Arrow Functions (lexical this binding)](https://stackoverflow.com/questions/27670401/using-jquery-this-with-es6-arrow-functions-lexical-this-binding)\n\n-- EOF --\n","tags":["js"]},{"title":"å¯»æ‰¾æ•°ç»„ä¸­è½´ç´¢å¼•","url":"/2019/03/06/find-pivot-index/","content":"\nå°† pivot ç´¢å¼•å®šä¹‰ä¸ºï¼šå·¦è¾¹çš„æ•°å­—ä¹‹å’Œç­‰äºç´¢å¼•å³è¾¹çš„æ•°å­—ä¹‹å’Œã€‚\n\n```swift\nInput:\nnums = [1, 7, 3, 6, 5, 6]\nOutput: 3\nExplanation:\n1 + 7 + 3 = 5 + 6\n\nInput:\nnums = [1, 2, 3]\nOutput: -1\nExplanation:\nThere is no index that satisfies the conditions in the problem statement.\n```\n\n<!-- more -->\n\nNote:\n\n- The length of `nums` will be in the range `[0, 10000]`.\n- Each element `nums[i]` will be an integer in the range `[-1000, 1000]`.\n\n## å…³é”®ç‚¹\n\n- åŠ¨æ€è§„åˆ’\n- æ•°ç»„çš„å’Œ - ä¸­è½´æ•° = ä¸­è½´æ•°å·¦è¾¹æ•°ç»„çš„å’Œ \\* 2\n\n## è§£ç­”\n\n```swift\nfunc findPivot(_ array: [Int]) -> Int {\n    // æ•°ç»„å’Œ\n    let sum = array.reduce(0, +)\n    // å·¦ä¾§æ•°ç»„å’Œ\n    var leftSum = 0\n    for (key, value) in array.enumerated() {\n        if sum - value == leftSum * 2 {\n            return key\n        }\n        leftSum += value\n    }\n    return -1\n}\n\nlet array = [1, 7, 3, 6, 5, 6]\nsearch(array) // 3\n```\n\n## References\n\n- [æ‰¾åˆ°æ•°ç»„ä¸­å·¦å³ä¸¤è¾¹çš„å’Œç›¸ç­‰çš„ pivot çš„ä¸‹æ ‡ Find Pivot Index](https://my.oschina.net/liyurong/blog/1608204)\n\n-- EOF --\n","tags":["swift","algorithm"]},{"title":"m è¿›åˆ¶è½¬ n è¿›åˆ¶","url":"/2019/03/02/convert-m-number-to-n-number/","content":"\n## æ€è·¯\n\n- m è¿›åˆ¶ -> åè¿›åˆ¶ -> n è¿›åˆ¶\n- åˆ©ç”¨æŸ¯é‡ŒåŒ–ç”Ÿæˆå‡½æ•°ï¼ˆç‚«æŠ€ ğŸ¶ï¼‰\n\n<!-- more -->\n\n## m è¿›åˆ¶ -> åè¿›åˆ¶\n\n```\n// carry èŒƒå›´å€¼: 2-36\n// origin èŒƒå›´å€¼: 0-9 [ascii 48-58], A-Z [65-90], a-z [97-122]\nfunc carryToDecimalism(_ carry: Int) -> (_ origin: String) -> Int {\n    return { origin in\n        // å¾—åˆ°å­—ç¬¦ä¸²å¯¹åº”çš„ ascii ç \n        let asciis = origin.uppercased().unicodeScalars.map { Int($0.value) }\n        // ç´¯åŠ æ¯ä¸€ä½\n        let result = asciis.reversed().enumerated().map { (index, ascii) -> Int in\n            var standard: Int\n            if 65 <= ascii && ascii <= 90 {\n                standard = ascii - 65 + 10\n            } else {\n                standard = ascii - 48\n            }\n            return standard * Int(pow(Double(carry), Double(index)))\n        }.reduce(0, +)\n        return result\n    }\n}\n\nlet åå…­è¿›åˆ¶è½¬åè¿›åˆ¶ = carryToDecimalism(16)\nprint(åå…­è¿›åˆ¶è½¬åè¿›åˆ¶(\"1a\")) // 26\n\nlet äºŒè¿›åˆ¶è½¬åè¿›åˆ¶ = carryToDecimalism(2)\nprint(äºŒè¿›åˆ¶è½¬åè¿›åˆ¶(\"110\")) // 6\n```\n\n## åè¿›åˆ¶ -> n è¿›åˆ¶\n\n```\nfunc decimalismToCarry(_ carry: Int) -> (_ origin: Int) -> String {\n    return { origin in\n        var result = [Int]()\n        var remain = origin\n        while remain > 0 {\n            result.append(remain % carry)\n            remain /= carry\n        }\n        if carry <= 10 {\n            return result.reversed().map(String.init).joined()\n        } else {\n            return result.reversed().map { i -> String in\n                return i < 10 ? String(i) : String(UnicodeScalar(i + 55)!)\n            }.joined()\n        }\n    }\n}\n\nlet åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ = decimalismToCarry(2)\nprint(åè¿›åˆ¶è½¬äºŒè¿›åˆ¶(26)) // \"11010\"\n```\n\n> Reference:\n>\n> - [ASCII ç å¯¹ç…§è¡¨](http://ascii.911cha.com/)\n\n-- EOF --\n","tags":["swift","algorithm"]},{"title":"è¶…é•¿é˜¶ä¹˜çš„è®¡ç®—","url":"/2019/03/01/extra-long-factorials/","content":"\næ‰“å° `n!` çš„ç»“æœï¼ˆ1 <= n <= 100ï¼‰ã€‚æ³¨æ„ï¼šå½“ `n > 20` æ—¶ 64 ä½çš„ `Int` å°†æ— æ³•ç›´æ¥å­˜å‚¨ç»“æœã€‚\n\n## æ€è·¯\n\n- å°†å¤§æ•°å­—ç”¨ **æ•°ç»„** å½¢å¼è¡¨ç¤ºã€‚æ¯”å¦‚ 987 ä½¿ç”¨ [9,8,7] ä»£æ›¿ã€‚\n- æ¯ä¸€ä½ä¹˜ä»¥ nï¼Œå†è¿›è¡Œè¿›ä½æ“ä½œï¼Œå¾—åˆ°æ–°æ•°ç»„ã€‚\n\n<!-- more -->\n\n```\nlet nums = [9, 8, 7]\nlet tmpNums = nums.map { $0 * 2 } // [18, 16, 14]\n\n// éå† tmpNums æ¯ä¸€ä¸ªæ•°å­—ï¼Œè¿›è¡Œè¿›åˆ¶æ“ä½œ\n\n[18, 16, 14] -> [18, 17, 4] -> [19, 7, 4] -> [1, 9, 7, 4]\n\nprint(tmpNums.map(String.init).joined()) // 1974\n```\n\n## è§£ç­”é¡¹ç›®\n\n```\nfunc extraLongFactorials(n: Int) -> Void {\n    guard n > 0 else {\n        return\n    }\n    // ç»“æœæ•°ç»„\n    var result: [Int] = [1]\n    for index in 1...n {\n        // æ•°ç»„ç¿»è½¬ ä»ä½ä½å¼€å§‹æ¯ä¸€ä½ä¹˜ä»¥æœ¬æ¬¡çš„æ•°å­—\n        let tmpNums = result.reversed().map { $0 * index }\n        // è¿›ä½æ•°\n        var carryNum = 0\n        // é‡ç½®ç»“æœ\n        result = []\n        tmpNums.forEach {\n            // æ¯ä¸€ä½åŠ ä¸Šä¸Šä¸€ä½çš„è¿›çš„æ•°\n            let tmpNum = $0 + carryNum\n            // å‘ä¸‹ä¸€ä½è¿›åˆ¶çš„æ•°\n            carryNum = tmpNum / 10\n            // æœ¬ä½å®é™…å‰©ä¸‹çš„æ•° æ’å…¥ç»“æœ\n            result.append(tmpNum % 10)\n        }\n        // å¤„ç†å‰©ä½™è¿›ä½æ•° è¿›ä½æ•°æ˜¯å¯èƒ½å¤§äº 100\n        while carryNum > 0 {\n            // é€æ¸æ’å…¥è¿›åˆ¶\n            result.append(carryNum % 10)\n            carryNum /= 10\n        }\n        // ç¿»è½¬å›æ•°ç»„\n        result = result.reversed()\n    }\n    // è¿æ¥å­—ç¬¦ä¸²\n    print(result.map(String.init).joined())\n}\n```\n\n> Reference:\n>\n> - [Extra Long Factorials | HackerRank](https://www.hackerrank.com/challenges/extra-long-factorials/problem)\n> - [Swift 3 calculate factorial number. Result becomes too high?](https://stackoverflow.com/questions/43830151/swift-3-calculate-factorial-number-result-becomes-too-high)\n\n-- EOF --\n","tags":["swift","algorithm"]},{"title":"fastlane å…¥é—¨ä½¿ç”¨","url":"/2019/02/28/fastlane-getting-started/","content":"\n<img src=\"https://images.unsplash.com/37/QAdTsSj8TOOWzlyLn3Rg_14248396556_aefcd9a926_o.jpg?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=640&q=80\" />\n\nè¿™æ¬¡ä»¥ [fastlane](https://fastlane.tools/) ä¸ºä¾‹ï¼Œå°è¯•é¡¹ç›®ä¸­æœ‰ä»€ä¹ˆäº‹æƒ…å¯ä»¥è¢«è‡ªåŠ¨å®Œæˆã€‚\n\nfastlane æ˜¯ Ruby scripts çš„é›†åˆï¼Œå®‰è£…æ–¹æ³•ä¸å¤šè¯´äº†è§ [å®˜ç½‘æ–‡æ¡£](https://docs.fastlane.tools/)ã€‚\n\nfastlane ä¸­æœ‰ä½†ä¸é™äºä»¥ä¸‹å·¥å…·é›†ï¼š\n\n- [produce](https://docs.fastlane.tools/actions/produce/) åŒæ—¶åœ¨ Apple Developer Portal å’Œ App Store Connect ä¸­åˆ›å»ºæ–°çš„ iOS appsã€‚\n- [cert](https://docs.fastlane.tools/actions/cert/) è‡ªåŠ¨åˆ›å»ºå’Œç»´æŠ¤ iOS ç­¾åè¯ä¹¦ã€‚\n- [sigh](https://docs.fastlane.tools/actions/sigh/) åˆ›å»ºï¼Œæ›´æ–°ï¼Œä¸‹è½½å’Œä¿®å¤é…ç½®æ–‡ä»¶ã€‚\n- [snapshot](https://docs.fastlane.tools/actions/snapshot/) è‡ªåŠ¨åœ¨æ¯å°è®¾å¤‡ä¸Šè·å– iOS åº”ç”¨çš„æœ¬åœ°åŒ–å±å¹•æˆªå›¾ã€‚\n- [frameit](https://docs.fastlane.tools/actions/frameit/) å°†æ‚¨çš„å±å¹•æˆªå›¾æ”¾å…¥æ­£ç¡®çš„è®¾å¤‡æ¡†æ¶ä¸­ã€‚\n- [gym](https://docs.fastlane.tools/actions/gym/) æ„å»ºå’Œæ‰“åŒ…æ‚¨çš„ iOS appsã€‚\n- [deliver](https://docs.fastlane.tools/actions/deliver/) å°†æˆªå›¾ï¼Œå…ƒæ•°æ®å’Œæ‚¨çš„åº”ç”¨ä¸Šä¼ åˆ° App Storeã€‚\n- [pem](https://docs.fastlane.tools/actions/pem/) è‡ªåŠ¨ç”Ÿæˆå¹¶æ›´æ–°æ¨é€é€šçŸ¥é…ç½®æ–‡ä»¶ã€‚\n- [spaceship](https://github.com/fastlane/fastlane/tree/master/spaceship) ä¸€ä¸ª Ruby åº“èƒ½å¤Ÿè®¿é—®è‹¹æœå¼€å‘è€…ä¸­å¿ƒå’Œåº”ç”¨å•†åº—è¿æ¥ apiã€‚\n- [pilot](https://docs.fastlane.tools/actions/pilot/) è‡ªåŠ¨åŒ– TestFlight éƒ¨ç½²å¹¶ç®¡ç†æµ‹è¯•ç”¨æˆ·ã€‚\n- [boarding](https://github.com/fastlane/boarding) é‚€è¯· beta æµ‹è¯•äººå‘˜ã€‚\n- [match](https://docs.fastlane.tools/actions/match/) ä½¿ç”¨ Git åŒæ­¥æ•´ä¸ªå›¢é˜Ÿçš„è¯ä¹¦å’Œé…ç½®æ–‡ä»¶ã€‚\n- [scan](https://docs.fastlane.tools/actions/scan/) è¿è¡Œ app æµ‹è¯•ã€‚\n\n<!-- more -->\n\n> å®éªŒç¯å¢ƒï¼šXcode 10.1ã€Swift 4.2ã€fastlane 2.116.1ã€\\$99 å¼€å‘è€…è´¦æˆ·\n\n## é¡¹ç›®æ·»åŠ  fastlane\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼š\n\n```\nfastlane init\n```\n\nåœ¨å‡ºç° `What would you like to use fastlane for?` æ˜¯é€‰æ‹© `4 Manual setup`ï¼Œåœ¨æ ¹æ®æç¤ºå›è½¦ç¡®è®¤ã€‚\n\nä¹‹åé¡¹ç›®æ–‡ä»¶ä¸­å°†æ–°å¢ï¼š\n\n- `Gemfile` è¿™ä¸ªæ–‡ä»¶åŒ…å«äº† fastlane gem çš„ä¾èµ–\n- `fastlane` è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«\n  - `Appfile` å­˜å‚¨ app identifierï¼ŒApple ID ä»¥åŠ fastlane è®¾ç½® app æ‰€éœ€çš„ä»»ä½•å…¶ä»–æ ‡è¯†ä¿¡æ¯\n  - `Fastfile` ç®¡ç† lanes åˆ›å»ºçš„å¯è¢«è°ƒç”¨çš„ actions\n\n## åˆ›å»º App\n\næ‰“å¼€ `Fastfile` å°†é‡Œé¢æ‰€æœ‰å†…å®¹æ›¿æ¢ä¸ºï¼š\n\n```\ndefault_platform(:ios)\n\nplatform :ios do\n# 1 lane çš„æè¿°\n  desc \"Create app on Apple Developer and App Store Connect sites\"\n# 2 create_app æ˜¯è¿™ä¸ª lane çš„åå­—\n  lane :create_app do\n# 3 ä½¿ç”¨ produce action å°† app æ·»åŠ åˆ° Developer Portal å’Œ App Store Connect\nâ€‹    produce\n  end\nend\n```\n\næ‰“å¼€ `Appfile` å°† `apple_id` å‰çš„ # ç§»é™¤ï¼Œå°† `[[APPLE_ID]]` æ›¿æ¢ä¸ºçœŸå® Apple IDï¼Œè¿™æ · fastlane å°†ä¸ä¼šåå¤æç¤ºä½ è¾“å…¥ã€‚\n\nå¦‚æœ App Store Connect å’Œ Apple Developer Portal å¯ä»¥å°† `apple_id` æ›¿æ¢ä¸ºï¼š\n\n```\napple_dev_portal_id(\"[[APPLE_DEVELOPER_ACCOUNT_USERNAME]]\")\nitunes_connect_id(\"[[APP_STORE_CONNECT_ACCOUNT_USERNAME]]\")\n```\n\næ‰“å¼€å‘½ä»¤è¡Œåœ¨é¡¹ç›®ç›®å½•è¾“å…¥ï¼š\n\n```\nfastlane create_app\n```\n\næ ¹æ®æç¤ºè¾“å…¥å¯†ç ï¼Œä¹‹åå°†æç¤ºä½ è¾“å…¥ bundle IDï¼Œä»¥å host æ ¼å¼åˆ›å»º IDï¼Œä¹‹åæ˜¯ App name æœ€é•¿ 30 ä¸ªå­—ç¬¦ã€‚\n\nå®Œæˆåç™»é™† Apple Developer Center å’Œ App Store Connectï¼Œapp åœ¨äºŒè€…å·²ç»éƒ½è¢«åˆ›å»ºäº†ã€‚\n\nå†æ¬¡æ‰“å¼€ Appfile å°† `app_identifier` å¡«å†™åˆšæ‰åˆ›å»ºçš„ bundle IDã€‚\n\n## ç”Ÿæˆäº¤ä»˜æ–‡ä»¶\n\n```\nbundle exec fastlane deliver\n```\n\næ ¹æ®æé†’æš‚ä¸ä½¿ç”¨ Swift ä»£æ›¿ Rubyï¼Œå› ä¸º `fastlane.swift` ç°åœ¨ä¸º betaã€‚\n\nå®Œæˆå fastlane æ–‡ä»¶å¤¹ä¸­æ–°å¢ï¼š\n\n- `metadata` è¿™ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾äº† app å¤§éƒ¨åˆ†çš„ metadata å…ƒæ•°æ®\n- `Deliverfile` ä¿å­˜è¿™å‰©ä½™å°éƒ¨åˆ†çš„å…ƒæ•°æ®\n- `screenshots` å°†ä¿å­˜ app æˆªå›¾\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0lz3u80l5j31eb0e6q8a.jpg\" alt=\"fastlane-getting-started-metadata\"/>\n\n`metadata` æ–‡ä»¶å¤¹ä¸­æ–‡ä»¶å†…å®¹å°±æ˜¯æäº¤ç»™ App Store Connectï¼Œå¤šè¯­è¨€ app å¯ä»¥æ‰‹åŠ¨åˆ›å»ºå¯¹åº”çš„è¯­è¨€æ–‡ä»¶å¤¹ã€‚\n\næ›´å¤š `deliver` å‚æ•°è§ [è¿™é‡Œ](https://docs.fastlane.tools/actions/deliver/#more-options)\n\n## è‡ªåŠ¨æˆªå›¾\n\nå¤šç§è®¾å¤‡å’Œå¤šè¯­è¨€ app çš„æˆªå›¾æ˜¯ç¹æ‚çš„ã€‚\n\n```\nfastlane snapshot init\n```\n\nfastlane æ–‡ä»¶å¤¹ä¸­æ–°å¢ï¼š`Snapfile`ï¼Œå°†é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ›¿æ¢ä¸ºä¸€ä¸‹ï¼š\n\n```\n# 1 - æƒ³æˆªå›¾çš„è®¾å¤‡åˆ—è¡¨\n\ndevices([\n  \"iPhone 8 Plus\",\n  \"iPhone SE\"\n])\n\n# 2 - æ”¯æŒçš„è¯­è¨€åˆ—è¡¨\n\nlanguages([\n  'en-US',\n  'fr-FR'\n])\n\n# 3 - åŒ…å« UI Tests çš„ scheme åå­—\n\nscheme(\"mZone Poker UITests\")\n\n# 4 - æˆªå›¾å­˜å‚¨ä½ç½®\n\noutput_directory \"./fastlane/screenshots\"\n\n# 5 - æ˜¯å¦æ¸…ç†ä¹‹å‰çš„æˆªå›¾\n\nclear_previous_screenshots(true)\n```\n\nä¿å­˜å…³é—­ï¼Œç„¶åå‘½ä»¤ä¸­æ‰§è¡Œï¼š\n\n```\nfastlane snapshot init\n```\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m3olslyhj30vq0ft44l.jpg\" alt=\"fastlane-getting-started-screenshots\" style=\"width: 600px; display: block; margin: auto;\" />\n\n### åˆ›å»º Test Target\n\nåœ¨ Xcode é€‰æ‹© File -> New -> Target é€‰æ‹© iOS UI Testing Bundle ç‚¹å‡» Nextã€‚\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m6hxg0dej30m80g0781.jpg\" alt=\"fastlane-getting-started-screenshots\" style=\"width: 600px; display: block; margin: auto;\" />\n\nProduct Name è¾“å…¥ä¸Šé¢ `scheme` å¡«å†™çš„åå­— MZone Poker UITests ç‚¹å‡» Finishã€‚\n\nä¹‹åå°† fastlane æ–‡ä»¶å¤¹ä¸­çš„ SnapshotHelper.swift æ‹–åˆ° mZone Poker UITests ä¸­ã€‚\n\nä¹‹åå°† mZone_Poker_UITests.swift ä¸­çš„ setUp() å’Œ tearDown() ç§»é™¤ï¼Œæ›¿æ¢ testExample()ï¼š\n\n```\n// 1 è®¾ç½®æˆªå±å’Œå¯åŠ¨ app\nlet app = XCUIApplication()\nsetupSnapshot(app)\napp.launch()\n// 2 ç‚¹å‡» Chip Count è¾“å…¥æ¡†ï¼ˆåœ¨ Storyboard ä¸­çš„ accessibility identifier è®¾ç½® \"chip count\"ï¼‰ç„¶åè¾“å…¥ 10\nlet chipCountTextField = app.textFields[\"chip count\"]\nchipCountTextField.tap()\nchipCountTextField.typeText(\"10\")\n// 3 ç‚¹å‡» Big Blind è¾“å…¥æ¡† ç„¶åè¾“å…¥ 100\nlet bigBlindTextField = app.textFields[\"big blind\"]\nbigBlindTextField.tap()\nbigBlindTextField.typeText(\"100\")\n// 4 æˆªå›¾\nsnapshot(\"01UserEntries\")\n// 5 ç‚¹å‡» what should i do å†è¿›è¡Œæˆªå›¾\napp.buttons[\"what should i do\"].tap()\nsnapshot(\"02Suggestion\")\n```\n\nä¹‹ååˆ›å»º mZone Poker UITests schemeï¼Œç‚¹å‡» run stop å³è¾¹çš„æŒ‰é’®é€‰æ‹© `Manage Schemes...`\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m88o46ovj30m80ccdit.jpg\" alt=\"fastlane-getting-started-create-test-target\" style=\"width: 600px; display: block; margin: auto;\" />\n\né€‰æ‹© `Edit Schemes...` å‹¾é€‰ `Test` å’Œ `Run`\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m8eq3o8uj30m80c0di3.jpg\" alt=\"fastlane-getting-started-create-test-target\" style=\"width: 600px; display: block; margin: auto;\" />\n\næ‰“å¼€ Fastfile æ·»åŠ ï¼š\n\n```\ndesc \"Take screenshots\"\nlane :screenshot do\n  snapshot\nend\n```\n\nå‘½ä»¤è¡Œæ‰§è¡Œï¼š\n\n```\nbundle exec fastlane screenshot\n```\n\nå®Œæˆåå°†è‡ªåŠ¨æ‰“å¼€ï¼š\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m8gy5vl9j30df0dwgpb.jpg\" alt=\"fastlane-getting-started-create-test-target\" style=\"width: 600px; display: block; margin: auto;\" />\n\n## åˆ›å»º IPA æ–‡ä»¶\n\né¦–å…ˆè¦ç¡®ä¿å·²ç» `target` è®¾ç½® `bundle identifier` å’Œ `signing identity`ã€‚\n\nå‘½ä»¤è¡Œæ‰§è¡Œï¼š\n\n```\nfastlane gym init\n```\n\næ‰“å¼€ `Gymfile` æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š\n\n```\n# 1 æŒ‡å®š scheme\nscheme(\"mZone Poker\")\n# 2 æŒ‡å®šå­˜æ”¾ .ipa æ–‡ä»¶å¤¹\noutput_directory(\"./fastlane/builds\")\n# 3 ä»æ„å»ºä¸­æ’é™¤ bitcodeã€‚Bitcode å…è®¸ Apple ä¼˜åŒ–ä½ çš„ appï¼Œä½†æ˜¯ç°åœ¨æ’é™¤å®ƒä»¥æé«˜æ„å»ºé€Ÿåº¦ã€‚\ninclude_bitcode(false)\n# 4 ä»æ„å»ºä¸­æ’é™¤ç¬¦å·ã€‚åŒ…å«ç¬¦å·å…è®¸ Apple è®¿é—®åº”ç”¨ç¨‹åºçš„è°ƒè¯•ä¿¡æ¯ï¼Œä½†æ˜¯ç°åœ¨æ’é™¤å®ƒä»¥æé«˜æ„å»ºé€Ÿåº¦ã€‚\ninclude_symbols(false)\n# 5 å…è®¸ Xcode ä½¿ç”¨è‡ªåŠ¨é…ç½®ã€‚\nexport_xcargs(\"-allowProvisioningUpdates\")\n```\n\næ‰“å¼€ `Fastfile` æ·»åŠ ï¼š\n\n```\ndesc \"Create ipa\"\nlane :build do\n  # 1 å…è®¸ Xcode è‡ªåŠ¨é…ç½®\n  enable_automatic_code_signing\n  # 2 æ„å»ºå·è‡ªå¢ï¼ˆApp Store Connect è¦æ±‚æ„å»ºå·ä¸èƒ½é‡å¤ï¼‰\n  increment_build_number\n  # 3 åˆ›å»ºç­¾åçš„ .ipa æ–‡ä»¶\n  gym\nend\n```\n\nä¿å­˜åå‘½ä»¤è¡Œæ‰§è¡Œï¼š\n\n```\nbundle exec fastlane build\n```\n\n<img src=\"https://tva1.sinaimg.cn/large/006tKfTcly1g0m8ua4im3j30xy0ceaca.jpg\" alt=\"fastlane-getting-started-create-test-target\" style=\"width: 600px; display: block; margin: auto;\" />\n\n## ä¸Šä¼ åˆ° App Store Connect\n\nä½¿ç”¨ `deliver` å°†æˆªå›¾ã€å…ƒæ•°æ®ã€.ipa æ–‡ä»¶ä¸Šä¼ åˆ° App Store Connectã€‚\n\næ›¿æ¢ `Deliverfile` å†…å®¹ï¼š\n\n```\n# 1 ä»·æ ¼ä¸º 0 åˆ™æ˜¯å…è´¹åº”ç”¨\nprice_tier(0)\n# 2 å›ç­” Apple åœ¨æ‰‹åŠ¨æäº¤å®¡æ ¸æ—¶ä¼šå‘æ‚¨å‘ˆç°çš„é—®é¢˜\nsubmission_information({\n    export_compliance_encryption_updated: false,\n    export_compliance_uses_encryption: false,\n    content_rights_contains_third_party_content: false,\n    add_id_info_uses_idfa: false\n})\n# 3 æä¾›åº”ç”¨è¯„çº§é…ç½®ä½ç½®\napp_rating_config_path(\"./fastlane/metadata/app_store_rating_config.json\")\n# 4 æä¾›.ipaæ–‡ä»¶ä½ç½®\nipa(\"./fastlane/builds/mZone Poker.ipaâ€)\n# 5 å°†s ubmit_for_review è®¾ç½®ä¸º true ä»¥è‡ªåŠ¨æäº¤åº”ç”¨ä»¥ä¾›å®¡æ ¸\nsubmit_for_review(true)\n# 6 å¿…é¡»åœ¨åº”ç”¨å®¡æ ¸æ¥å—åæ‰‹åŠ¨å‘å¸ƒåº”ç”¨\nautomatic_release(false)\n```\n\nåœ¨ `Fastfile` ä¸­æ·»åŠ ï¼š\n\n```\ndesc \"Upload to App Store\"\nlane :upload do\n  deliver\nend\n```\n\nç„¶åå‘½ä»¤è¡Œæ‰§è¡Œï¼š\n\n```\nbundle exec fastlane upload\n```\n\nå®Œæˆåï¼Œç™»å½• App Store Connectã€‚å±å¹•æˆªå›¾ï¼Œå…ƒæ•°æ®å’Œæ„å»ºåº”è¯¥åœ¨é‚£é‡Œï¼Œç­‰å¾…å®¡æŸ¥ã€‚\n\n## å°†å‘½ä»¤æ”¾åœ¨ä¸€èµ·\n\næ‰“å¼€ `Fastfile` æ·»åŠ ï¼š\n\n```\ndesc \"Create app, take screenshots, build and upload to App Store\"\nlane :do_everything do\n  create_app\n  screenshot\n  build\n  upload\nend\n```\n\nåœ¨ `Deliverfile` æ·»åŠ ï¼š\n\n```\nforce(true)\n```\n\næ‰§è¡Œï¼š\n\n```\nbundle exec fastlane do_everything\n```\n\n> Reference:\n>\n> - [fastlane Tutorial: Getting Started](https://www.raywenderlich.com/233168-fastlane-tutorial-getting-started)\n\n-- EOF --\n","tags":["ios"]},{"title":"PromiseKit å…¥é—¨ä½¿ç”¨","url":"/2019/01/19/promisekit-getting-started/","content":"\n<img src=\"https://images.unsplash.com/photo-1579208570378-8c970854bc23?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=640&q=80\" />\n\nåœ¨ GitHub Trending ä¸­æ€»æ˜¯çœ‹åˆ° [mxcl/PromiseKit](https://github.com/mxcl/PromiseKit) å®ƒæ˜¯ä¸»è¦è§£å†³çš„æ˜¯ â€œå›è°ƒåœ°ç‹±â€ çš„é—®é¢˜ï¼Œå†³å®šå°è¯•ç”¨ä¸€ä¸‹ã€‚\n\n> ç¯å¢ƒï¼šSwift 4.2ã€PromiseKit 6\n\n## then and done\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ promise é“¾å¼ï¼ˆchainï¼‰è°ƒç”¨ï¼š\n\n```\nfirstly {\n    login()\n}.then { creds in\n    fetch(avatar: creds.user)\n}.done { image in\n    self.imageView = image\n}\n```\n\n<!-- more -->\n\nå¦‚æœè¿™æ®µä»£ç ä½¿ç”¨å®Œæˆå›è°ƒï¼ˆ`completion handler`ï¼‰å®ç°ï¼Œä»–å°†æ˜¯ï¼š\n\n```\nlogin { creds, error in\n    if let creds = creds {\n        fetch(avatar: creds.user) { image, error in\n            if let image = image {\n                self.imageView = image\n            }\n        }\n    }\n}\n```\n\n`then` æ˜¯å®Œæˆå›è°ƒçš„å¦ä¸€ç§æ–¹å¼ï¼Œä½†æ˜¯å®ƒæ›´ä¸°å¯Œã€‚åœ¨å¤„çº§é˜¶æ®µçš„ç†è§£ï¼Œå®ƒæ›´å…·æœ‰å¯è¯»æ€§ã€‚ä¸Šé¢çš„ promise chain æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ï¼šä¸€ä¸ªå¼‚æ­¥æ“ä½œæ¥ç€å¦ä¸€ä¸ªï¼Œä¸€è¡Œæ¥ä¸€è¡Œã€‚å®ƒä¸ç¨‹åºä»£ç éå¸¸æ¥è¿‘ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—åˆ° Swift çš„å½“å‰çŠ¶æ€ã€‚\n\n`done` ä¸ `then` åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒå°†ä¸å†è¿”å› promiseã€‚å®ƒæ˜¯å…¸å‹çš„åœ¨æœ«å°¾ â€œsuccessâ€ éƒ¨åˆ†çš„ chainã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ `done` ä¸­ï¼Œæˆ‘ä»¬æ¥æ”¶åˆ°äº†æœ€ç»ˆçš„å›¾ç‰‡å¹¶ä½¿ç”¨å®ƒè®¾ç½®äº† UIã€‚\n\nè®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ä¸¤ä¸ª `login` çš„æ–¹æ³•ç­¾åï¼š\n\n```\n// Promise:\nfunc login() -> Promise<Creds>\n\n// Compared with:\nfunc login(completion: (Creds?, Error?) -> Void)\n                    // å¯é€‰å‹ï¼Œä¸¤è€…éƒ½æ˜¯å¯é€‰\n```\n\nåŒºåˆ«åœ¨äº promiseï¼Œæ–¹æ³•è¿”å› promises è€Œä¸æ˜¯çš„æ¥å—å’Œè¿è¡Œå›è°ƒã€‚æ¯ä¸€ä¸ªå¤„ç†å™¨ï¼ˆhandlerï¼‰éƒ½ä¼šè¿”å›ä¸€ä¸ª promiseã€‚Promise å¯¹è±¡ä»¬å®šä¹‰ `then` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨ç»§ç»­é“¾å¼è°ƒç”¨ä¹‹å‰ç­‰å¾… promise çš„å®Œæˆã€‚chains åœ¨ç¨‹åºä¸Šè§£å†³ï¼Œä¸€æ¬¡ä¸€ä¸ª promiseã€‚\n\nPromise ä»£è¡¨æœªæ¥å¼‚æ­¥æ–¹æ³•çš„è¾“å…¥å€¼ã€‚å®ƒæœ‰ä¸€ä¸ªè¡¨ç¤ºå®ƒåŒ…è£…çš„å¯¹è±¡ç±»å‹çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ`login` çš„è¿”å› Promise å€¼ä»£è¡¨ä¸€ä¸ª Creds çš„ä¸€ä¸ªå®ä¾‹ã€‚\n\nå¯ä»¥æ³¨æ„åˆ°è¿™ä¸ completion pattern çš„ä¸åŒï¼Œpromises chain ä¼¼ä¹å¿½ç•¥é”™è¯¯ã€‚å¹¶ä¸æ˜¯è¿™æ ·ï¼Œå®é™…ä¸Šï¼špromise chain ä½¿é”™è¯¯å¤„ç†æ›´å®¹æ˜“è®¿é—®ï¼ˆaccessibleï¼‰ï¼Œå¹¶ä½¿é”™è¯¯æ›´éš¾è¢«å¿½ç•¥ã€‚\n\n## catch\n\næœ‰äº† promisesï¼Œé”™è¯¯åœ¨ promise chain ä¸Šçº§è”ï¼ˆcascade alongï¼‰ï¼Œç¡®ä¿ä½ çš„åº”ç”¨çš„å¥å£®ï¼ˆrobustï¼‰å’Œæ¸…æ™°çš„ä»£ç ã€‚\n\n```\nfirstly {\n    login()\n}.then { creds in\n    fetch(avatar: creds.user)\n}.done { image in\n    self.imageView = image\n}.catch {\n    // æ•´ä¸ª chain ä¸Šçš„é”™è¯¯éƒ½åˆ°äº†è¿™é‡Œ\n}\n```\n\n> å¦‚æœä½ å¿˜è®°äº† catch è¿™ä¸ª chainï¼ŒSwift ä¼šå‘å‡ºè­¦å‘Š\n\næ¯ä¸ª promise éƒ½æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªï¼ˆindividualï¼‰å¼‚æ­¥ä»»åŠ¡çš„å¯¹è±¡ã€‚å¦‚æœä»»åŠ¡å¤±è´¥ï¼Œå®ƒçš„ promise å°†æˆä¸º `rejected`ã€‚äº§ç”Ÿ `rejected` promises å°†è·³è¿‡åé¢æ‰€æœ‰çš„ `then`ï¼Œè€Œæ˜¯å°†æ‰§è¡Œ `catch`ã€‚ï¼ˆä¸¥æ ¼ä¸Šè¯´æ˜¯æ‰§è¡Œåç»­æ‰€æœ‰çš„ `catch` å¤„ç†ï¼‰\n\nè¿™ä¸ completion handler å¯¹æ¯”ï¼š\n\n```\nfunc handle(error: Error) {\n    //...\n}\n\nlogin { creds, error in\n    guard let creds = creds else { return handle(error: error!) }\n    fetch(avatar: creds.user) { image, error in\n        guard let image = image else { return handle(error: error!) }\n        self.imageView.image = image\n    }\n}\n```\n\nä½¿ç”¨ `guard` å’Œåˆå¹¶é”™è¯¯å¯¹å¤„ç†æœ‰æ‰€ä¿è¯ï¼Œä½†æ˜¯ promise chain æ›´å…·æœ‰å¯è¯»æ€§ã€‚\n\n## ensure\n\n```\nfirstly {\n    UIApplication.shared.isNetworkActivityIndicatorVisible = true\n    return login()\n}.then {\n    fetch(avatar: $0.user)\n}.done {\n    self.imageView = $0\n}.ensure {\n    UIApplication.shared.isNetworkActivityIndicatorVisible = false\n}.catch {\n    // ...\n}\n```\n\næ— è®ºåœ¨ chain å“ªé‡Œç»“æŸï¼ŒæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œ`ensure` ç»ˆå°†è¢«æ‰§è¡Œã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ `finally` æ¥å®Œæˆç›¸åŒçš„äº‹æƒ…ï¼ŒåŒºåˆ«æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚\n\n```swift\nspinner(visible: true)\n\nfirstly {\n    foo()\n}.done {\n    // ...\n}.catch {\n    // ...\n}.finally {\n    self.spinner(visible: false)\n}\n```\n\n## when\n\nå¤šä¸ªå¼‚æ­¥æ“ä½œåŒæ—¶å¤„ç†æ—¶å¯èƒ½åˆéš¾åˆæ…¢ã€‚ä¾‹å¦‚å½“ `æ“ä½œ1` å’Œ `æ“ä½œ2` éƒ½å®Œæˆæ—¶å†è¿”å›ç»“æœï¼š\n\n```\n// ä¸²è¡Œæ“ä½œ\noperation1 { result1 in\n    operation2 { result2 in\n        finish(result1, result2)\n    }\n}\n```\n\n```\n// å¹¶è¡Œæ“ä½œ\nvar result1: ...!\nvar result2: ...!\nlet group = DispatchGroup()\ngroup.enter()\ngroup.enter()\noperation1 {\n    result1 = $0\n    group.leave()\n}\noperation2 {\n    result2 = $0\n    group.leave()\n}\ngroup.notify(queue: .main) {\n    finish(result1, result2)\n}\n```\n\nä½¿äºº Promises å°†å˜å¾—å®¹æ˜“å¾ˆå¤šï¼š\n\n```\nfirstly {\n    when(fulfilled: operation1(), operation2())\n}.done { result1, result2 in\n    // ...\n}\n```\n\n`when` ç­‰å¾…æ‰€æœ‰çš„å®Œæˆå†è¿”å› promises ç»“æœã€‚\n\n## PromiseKit æ‰©å±•\n\nPromiseKit æè¿‡äº†ä¸€äº› Apple API çš„æ‰©å±•ï¼Œä¾‹å¦‚ï¼š\n\n```\nfirstly {\n    CLLocationManager.promise()\n}.then { location in\n    CLGeocoder.reverseGeocode(location)\n}.done { placemarks in\n    self.placemark.text = \"\\(placemarks.first)\"\n}\n```\n\nåŒæ—¶éœ€è¦æŒ‡å®š subspacesï¼š\n\n```\npod \"PromiseKit\"\npod \"PromiseKit/CoreLocation\"\npod \"PromiseKit/MapKit\"\n```\n\næ›´å¤šçš„æ‰©å±•å¯ä»¥æŸ¥è¯¢ [PromiseKit organization](https://github.com/PromiseKit)ï¼Œç”šè‡³æ‰©å±•äº† [Alamofire](https://github.com/PromiseKit/Alamofire-) è¿™æ ·çš„å…¬å…±åº“ã€‚\n\n## åˆ¶ä½œ Promises\n\næœ‰æ—¶ä½ çš„ chains ä»ç„¶éœ€è¦ä»¥è‡ªå·±å¼€å§‹ï¼Œæˆ–è®¸ä½ ä½¿ç”¨çš„ä¸‰æ–¹åº“æ²¡æœ‰æä¾› promises æˆ–è€…è‡ªå·±å†™äº†å¼‚æ­¥ç³»ç»Ÿï¼Œæ²¡å…³ç³»ï¼Œä»–ä»¬éå¸¸å®¹æ˜“æ·»åŠ  promisesã€‚å¦‚æœä½ æŸ¥çœ‹äº† PromiseKit çš„æ ‡å‡†æ‰©å±•ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†ä¸‹é¢ç›¸åŒçš„æè¿°ï¼š\n\nå·²æœ‰ä»£ç ï¼š\n\n```\nfunc fetch(completion: (String?, Error?) -> Void)\n```\n\nè½¬æ¢ï¼š\n\n```\nfunc fetch() -> Promise<String> {\n    return Promise { fetch(completion: $0.resolve) }\n}\n```\n\næ›´å…·æœ‰å¯è¯»æ€§çš„ï¼š\n\n```\nfunc fetch() -> Promise<String> {\n    return Promise { seal in\n        fetch { result, error in\n            seal.resolve(result, error)\n        }\n    }\n}\n```\n\nPromise åˆå§‹åŒ–ç¨‹åºæä¾›çš„ `seal` å¯¹è±¡å®šä¹‰äº†å¾ˆå¤šå¤„ç† `garden-variety` å®Œæˆå›è°ƒçš„æ–¹æ³•ã€‚\n\n> PromiseKit è®¾ç½®å°è¯•ä»¥ `Promise(fetch)` è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å®Œæˆé€šè¿‡ç¼–è¯‘å™¨çš„æ¶ˆæ­§ä¹‰ã€‚\n\n## Guarantee<T>\n\nä» PromiseKit 5 å¼€å§‹ï¼Œæä¾›äº† Guarantee ä»¥åšè¡¥å……ï¼Œç›®çš„æ˜¯å®Œå–„ Swift å¼ºçš„çš„å¼‚å¸¸å¤„ç†ã€‚\n\n`Guarantee` æ°¸è¿œä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥ä¸èƒ½è¢« `rejected`ã€‚\n\n```\nfirstly {\n    after(seconds: 0.1)\n}.done {\n    // è¿™é‡Œä¸è¦åŠ  catch\n}\n```\n\n`Guarantee` çš„è¯­æ³•ç›¸è¾ƒæ›´ç®€å•ï¼š\n\n```\nfunc fetch() -> Promise<String> {\n    return Guarantee { seal in\n        fetch { result in\n            seal(result)\n        }\n    }\n}\n\n// å‡å°‘ä¸º\n\nfunc fetch() -> Promise<String> {\n    return Guarantee(resolver: fetch)\n}\n```\n\n## map compactMap ç­‰\n\n- `then` è¦æ±‚è¿”å›å¦ä¸€ä¸ª promise\n- `map` è¦æ±‚è¿”å›ä¸€ä¸ª object æˆ– value ç±»å‹\n- `compactMap` è¦æ±‚è¿”å›ä¸€ä¸ª å¯é€‰å‹ï¼Œå¦‚è¿‡è¿”å› `nil`ï¼Œchain å°†å¤±è´¥å¹¶æŠ¥é”™ `PMKError.compactMap`\n\n```\nfirstly {\n    URLSession.shared.dataTask(.promise, with: rq)\n}.compactMap {\n    try JSONSerialization.jsonObject($0.data) as? [String]\n}.done { arrayOfStrings in\n    // ...\n}.catch { error in\n    // Foundation.JSONError if JSON was badly formed\n    // PMKError.compactMap if JSON was of different type\n}\n```\n\né™¤æ­¤ä¹‹å¤–è¿˜æœ‰ï¼š`thenMap` `compactMapValues` `firstValue` etc\n\n## get\n\n`get` ä¼šå¾—åˆ° `done` ä¸­ç›¸åŒå€¼ã€‚\n\n```\nfirstly {\n    foo()\n}.get { foo in\n    // ...\n}.done { foo in\n    // same foo!\n}\n```\n\n## tap\n\nä¸º debug æä¾› `tap`ï¼Œä¸ `get` ç±»ä¼¼ä½†æ˜¯å¯ä»¥å¾—åˆ° `Result<T>` è¿™æ ·å°±å¯ä»¥æ£€æŸ¥ chain ä¸Šçš„å€¼ï¼š\n\n```\nfirstly {\n    foo()\n}.tap {\n    print($0)\n}.done {\n    // ...\n}.catch {\n    // ...\n}\n```\n\n## è¡¥å……\n\n### firstly\n\nä¸Šé¢ä¾‹å­ä¸­çš„ `firstly` æ˜¯è¯­æ³•ç³–ï¼Œéå¿…é¡»ä½†æ˜¯å¯ä»¥è®© chains æ›´æœ‰å¯è¯»æ€§ã€‚\n\n```\nfirstly {\n    login()\n}.then { creds in\n    // ...\n}\n\n// ä¹Ÿå¯ä»¥\nlogin().then { creds in\n    // ...\n}\n```\n\nçŸ¥è¯†ç‚¹ï¼š`login()` è¿”å›äº†ä¸€ä¸ª `Promise`ï¼ŒåŒæ—¶æ‰€æœ‰çš„ `Promise` æœ‰ä¸€ä¸ª `then` æ–¹æ³•ã€‚`firstly` è¿”å›ä¸€ä¸ª `Promise`ï¼ŒåŒæ · `then` ä¹Ÿè¿”å›ä¸€ä¸ª `Promise`ã€‚\n\n### when å˜ç§\n\n- `when(fulfilled:)` åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåæ‰æ‰§è¡Œå›è°ƒï¼Œä¸€ä¸ªå¤±è´¥ chain å°† rejectsã€‚It's important to note that all promises in the when continue. Promises have no control over the tasks they represent. Promises are just wrappers around tasks.\n- `when(resolved:)` ä½¿ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶æ‰¿è¯ºå¤±è´¥ä¹Ÿä¼šç­‰å¾…ã€‚æ­¤å˜ä½“ `when` ç”Ÿæˆçš„å€¼æ˜¯ `Result<T>` çš„æ•°ç»„ï¼Œæ‰€æœ‰è¦ä¿è¯ç›¸åŒçš„æ³›å‹ã€‚\n- `race` åªè¦æœ‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œæ¯•ï¼Œå°±ç«‹åˆ»æ‰§è¡Œ `then` å›è°ƒã€‚å…¶å®ƒæ²¡æœ‰æ‰§è¡Œå®Œæ¯•çš„å¼‚æ­¥æ“ä½œä»ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœæ­¢ã€‚\n\n### Swift é—­åŒ…æ¥å£\n\nSwift æœ‰è‡ªåŠ¨æ¨æ–­è¿”å›å€¼å’Œå•è¡Œè¿”å›ã€‚\n\n```\nfoo.then {\n    bar($0)\n}\n\n// is the same as:\n\nfoo.then { baz -> Promise<String> in\n    return bar(baz)\n}\n```\n\nè¿™æ ·æœ‰å¥½æœ‰åï¼Œå…·ä½“å¯ä»¥æŸ¥è¯¢ [Troubleshooting](https://github.com/mxcl/PromiseKit/blob/master/Documentation/Troubleshooting.md)\n\n## æ›´å¤šé˜…è¯»\n\n- å¼ºåŠ›å»ºè®®é˜…è¯» [API Reference](https://mxcl.dev/PromiseKit/reference/v6/Classes/Promise.html)\n- åœ¨ Xcode ä½¿ç”¨ optinon-click é˜…è¯» PromiseKit ä»£ç \n- åœ¨ç½‘ä¸Šæœ‰ä¸€äº› PMK < 5 çš„æ–‡ç« ï¼Œé‡Œé¢çš„ API æœ‰äº›ä¸åŒè¦æ³¨æ„\n\n> Reference:\n>\n> - [Getting Started](https://github.com/mxcl/PromiseKit/blob/master/Documentation/GettingStarted.md)\n> - [Swift - å¼‚æ­¥ç¼–ç¨‹åº“ PromiseKit ä½¿ç”¨è¯¦è§£ 1ï¼ˆå®‰è£…é…ç½®ã€åŸºæœ¬ç”¨æ³•ï¼‰](https://www.hangge.com/blog/cache/detail_2231.html)\n\n-- EOF --\n","tags":["ios"]},{"title":"å›é¡¾ 2018","url":"/2019/01/03/review-2018/","content":"\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=298 height=52 src=\"//music.163.com/outchain/player?type=2&id=476618833&auto=0&height=32\"></iframe>\n\né‡æ–°ç¿»é˜…çš„è‡ªå·±å·¥ä½œé‚®ä»¶çš„å‘ä»¶ç®±ï¼Œå›é¡¾ä¸€å¹´å·¥ä½œã€‚æ–°å¹´ä¼Šå§‹è‡ªå·±è¿˜æ˜¯åœ¨å¼€å‘ P é¡¹ç›®çš„ iOS Appï¼Œå¼€å§‹å†™ Q&A åŠŸèƒ½ã€‚ä¸€äº›ä¸ç®—å¤ªéš¾çš„ tableView å¸ƒå±€çš„éœ€æ±‚ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œéƒ½æ˜¯å¤´å¤§çš„é—®é¢˜ã€‚\n\nè¿™æ®µæ—¶æœŸæ‹›è˜æ—¶çš„é¢è¯•ï¼Œç«Ÿæˆä¸ºæˆ‘å­¦ä¹  App å¼€å‘çš„ä¸€æ‰‡å°çª—ã€‚\n\nå¹´å‰æ”¶åˆ°äº†å¥–é‡‘è¿˜æ˜¯æŒºå¼€å¿ƒçš„ã€‚leader æ–°å¹´å¯„è¯­ï¼š\n\n- è¦å‘å£°ï¼Œè¦å½“ä¸»åŠ›\n- å½“æœ‰å¥½çš„æƒ³æ³•æ—¶ï¼Œè¦å­¦ä¼šè¯´æœåˆ«äºº\n- è¦æœ‰è€å¿ƒï¼ŒYifan éœ€è¦æ—¶é—´çš„æ²‰æ·€\n\nå‰ä¸¤ç‚¹æ„æ€å·®ä¸å¤šï¼Œè¿™æ®µæ—¶é—´æ€æƒ³ä¸Šå›°æ‰°æˆ‘çš„æ˜¯ï¼šè‡ªå·±å¯¹è‡ªå·±çš„å®šä½æ˜¯ä¸€ä¸ªåˆçº§å·¥ç¨‹å¸ˆï¼Œè®¤ä¸ºä¼šçš„ä¸œè¥¿ã€ç»éªŒä¸å¤šï¼Œè§è¯†å°‘ï¼Œæˆ‘å°Šé‡æ¯”æˆ‘å¹´é•¿çš„å·¥ç¨‹å¸ˆçš„æƒ³æ³•ä¸è§‚ç‚¹ï¼Œä¹Ÿç›¸ä¿¡ä»–ä»¬æ˜¯ç»è¿‡é•¿è¿œæ€è€ƒè¿‡çš„ã€‚è¿™ä¸ªæ€ç»´è®¾å®šï¼Œæˆ‘è§‰å¾—æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä½†æ˜¯ä¹Ÿè®¸æœ‰äººå¿½ç•¥äº† **è´£ä»»**ï¼Œå¯¹æ–¹æ¡ˆè´Ÿè´£ï¼Œå¯¹é¡¹ç›®è´Ÿè´£ã€‚å¼€å‘æ–¹æ¡ˆä¸€å†é‡å»ºæ€§ä¿®æ”¹ï¼Œæ¥å£ç»“æ„æ²¡æœ‰è§„èŒƒã€‚\n\n2017 çš„æ€»ç»“è¯´èƒœåˆ©å±äºä¼åœ°é­”ï¼Œæœ¬æƒ³è‹Ÿç€å‘è‚²ï¼Œè¿™æ—¶å‘ç°ï¼šè‹Ÿæ˜¯è‹Ÿä¸ä½çš„ï¼Œè¿™ä¸ªä¸–ç•Œ **éœ€è¦è‹±é›„** carryã€‚\n\nåæ¥æˆ‘æ„Ÿè§‰åº”è¯¥å°†å…¬å¸çœ‹åšä¸€ä¸ªèˆå°ï¼Œèˆå°ä¸Šæœ‰ç¯å…‰ã€éŸ³æ•ˆå°±è¦åˆ©ç”¨ï¼Œå±•ç¤ºè‡ªå·±ã€é”»ç‚¼è‡ªå·±ï¼Œå³ä½¿æ˜¯å‡ºç³—ï¼Œé‚£å°±æ•´ç†æ•´ç†å†æ¥ä¸€æ¬¡ï¼Œwho care? æˆé•¿æ˜¯æœ€é‡è¦çš„ã€‚\n\nCourse æ¨¡å—æ˜¯å‰å·¥ç¨‹å¸ˆç”¨ Objective-C å†™çš„ï¼Œç¦»èŒåä¸€ç›´æ²¡æœ‰å†ç»´æŠ¤ï¼Œè¿‡å¹´æœŸé—´è‡ªå·±é‡æ„äº†æ‰€æœ‰ Objective-C çš„ä»£ç ï¼Œé¡¹ç›®å®Œå…¨è½¬ä¸ºäº†ä¸€ä¸ªçº¯ Swift é¡¹ç›®ã€‚ä½¿ç”¨ Realm ä½œä¸ºæ•°æ®æœ¬åœ°åŒ–æ–¹æ¡ˆï¼Œé€‰æ‹©çš„åŸå› ä¹Ÿå¾ˆæœ´ç´ ï¼ŒGitHub å“ªä¸ªæ˜Ÿå¤šæˆ‘å°±ä¼˜å…ˆé€‰ç”¨ä»€ä¹ˆã€‚\n\nåæ¥å‚è€ƒ [Jack Feng - 6ag](https://github.com/6ag) çš„å‡ ä¸ª Swift å¼€æºé¡¹ç›®ï¼Œæ–°åˆ›å»ºäº† P é¡¹ç›®çš„å·¥å…· Appï¼Œä¹Ÿå¯¹ä¸»é¡¹ç›®ç»“æ„åšäº†é‡æ–°çš„æ•´ç†ï¼Œåœ¨è¿™é‡Œå†æ¬¡ç‰¹åˆ«æ„Ÿè°¢ã€‚\n\nè¥¿å®‰è¿è¥éƒ¨çš„æˆç«‹ï¼ŒåŠ å¤šäº† C é¡¹ç›®çš„åå°éœ€æ±‚ï¼Œéš¾ä»¥éƒ½é¡¾åŠé¡¹ç›®ä¸¤å¤´ã€‚ä½¿ç”¨ laravel-admin æ­å»ºæ–°åå°ï¼Œä¹Ÿå¼€å§‹ä½¿ç”¨ Docker éƒ¨ç½²é¡¹ç›®ï¼Œæ„Ÿè§‰ä»æ­¤ç¦»ä¸å¼€ Docker äº†ï¼Œåƒæäº†é‡åˆ° Git æ—¶çš„æ„Ÿè§‰ã€‚\n\nC é¡¹ç›®ä¸»ç«™çš„å‰ç«¯æ˜¯åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œéå¸¸ä¼ ç»Ÿçš„æ¨¡å¼ï¼Œå¤šä¸ªå·¥ç¨‹å¸ˆè½¬æ‰‹ä¹Ÿæ˜¯ååˆ†æ··ä¹±ã€‚å‚è€ƒäº† [ç™½ä¿Šé¥](https://baijunyao.com/) å·¥ç¨‹çš„åšå®¢ã€laravel é¡¹ç›®ï¼Œä¿®æ”¹äº†é¡¹ç›®ç»“æ„ï¼Œæ·»åŠ äº† gulp å·¥å…·åˆ¶å®šäº†å·¥ä½œæµï¼Œè™½ç„¶æ²¡æœ‰å®ç°å‰åç«¯çš„å®Œå…¨åˆ†ç¦»ï¼Œä½†ç»ˆç©¶æ˜¯å‘ç°ä»£åŒ–å‰ç«¯èµ°å‡ºäº†ä¸€æ­¥ã€‚\n\nè½¬çœ¼å°±åˆ°äº†å¹´ä¸­è°ƒè–ªï¼Œå…¬å¸ä¸å«ç³Šï¼Œè–ªæ°´æ¶¨åˆ°äº†æˆ‘æ»¡æ„çš„å€¼ã€‚è¿™å¯¹æˆ‘å¾ˆå…³é”®ï¼Œè°ƒæ•´çš„ä¸å•å•æ˜¯æˆ‘çš„è–ªæ°´ï¼Œä¹Ÿè°ƒæ•´äº†æˆ‘çš„å¿ƒæ€ã€‚å› ä¸ºå½“æ—¶æˆ‘è®¤ä¸ºæ²¡æœ‰å¼ºçš„å·¥ç¨‹å¸ˆã€ç”šè‡³å½’æˆ‘è´Ÿè´£ï¼Œå´æ‹¿ç€æ¯”æˆ‘è¿˜é«˜çš„è–ªæ°´ã€‚ç°åœ¨æ€»ç®—æ˜¯æœ‰äº†ä¸€ä¸ªå¹³è¡¡ã€‚\n\nä¸æ–­å‘ C é¡¹ç›®æŠ•å…¥æ›´å¤šçš„èµ„æºï¼Œé¡¹ç›® **æŒ‡æ ‡** çš„è¦æ±‚è¶Šæ¥è¶Šå¤šã€‚æ¯”å¦‚ï¼šä¼˜åŒ–äº†é¡¹ç›®ã€ä¼˜åŒ–äº†æŸ¥è¯¢ï¼Œåˆ°åº•ä¼˜åŒ–äº†å¤šå°‘ï¼Œæ€ä¹ˆé‡åŒ–ï¼Ÿè¿™äº›åœ¨ä¹‹å‰ä¸€ç›´ä¸è¢«é‡è§†ï¼Œæ”¹å¥½äº†å°±éƒ½ç®—å«ä¼˜åŒ–äº†ã€‚é¡¹ç›®ä¸­å‡ºç°çš„é—®é¢˜é”™è¯¯ï¼Œéƒ½è¦æŸ¥æ‰¾çœŸå®å…·ä½“çš„åŸå› ï¼Œè€Œä¸æ˜¯è¯´ä¸€ä¸ªå¯èƒ½çš„ä»€ä¹ˆåŸå› ï¼Œå°±å½“è§£ç­”çš„äº†ã€‚æˆ‘ä¸€å¼€å§‹ä¹Ÿå¾ˆéš¾é€‚åº”è¿™äº›ï¼Œä½†å¿ƒé‡Œæ˜¯è®¤åŒçš„ã€‚\n\nC é¡¹ç›®æ•°æ®æºé‡æ–°æ•´ç†ï¼Œç»ˆäºæ‘¸åˆ°äº†ä¸€æ¬¡ç®—æ³•çš„è¾¹ã€‚â€œä½ è§‰çš„ç®—æ³•æ²¡ç”¨ï¼Œæ˜¯å› ä¸ºä½ ä¸ä¼šã€‚â€ æ•°æ®æ ‡è®°ã€æ­£ç¡®ç‡ã€å¬å›ç‡ã€ç‰¹å¾è¯æå–ã€æ–‡æœ¬ç›¸ä¼¼åº¦ã€è¯æ¡æ‰“åˆ†ã€èƒŒåŒ…ç®—æ³•â€¦â€¦ ä¸€æ®µæœ€è®©äººå›å¿†çš„å¼€å‘ç»å†ï¼Œä¸ä¸šåŠ¡å¼€å‘å®Œå…¨ä¸åŒçš„æ¨¡å¼ã€‚\n\nC é¡¹ç›®è¡ç”Ÿå‡ºæ–°é¡¹ç›® Gï¼Œæˆ‘ä¸€ä¸ªäººåšï¼Œä¸€æ¬¡å®è·µ Laravel æ¡†æ¶çš„æœºä¼šã€‚\n\nå†æ¬¡å’Œ Z å“¥åˆä½œäº†ä¸€ä¸ª App é¡¹ç›®ï¼Œç§æ´»åšçš„çœŸæ˜¯çš„å¤ªç´¯äº†ï¼Œæä¸æ¨èã€‚å…¶å®è¿™æ®µæ—¶æœŸå·¥ä½œä¸Šå¹¶æ²¡æœ‰åœ¨åš iOSï¼Œå› ä¸ºè¿™ä¸ªé¡¹ç›®æ²¡è®©è‡ªå·± iOS çš„æŠ€èƒ½å‡‰ä¸‹æ¥ï¼Œä¸ºåé¢å›å½’ iOS é¡¹ç›®ä¿æŒäº†çŠ¶æ€ã€‚\n\nå‚åŠ äº†å¹´åº¦çš„ Swift å¤§ä¼šï¼Œåœ¨ç¾¤é‡Œç®€å•äº†å¾ˆå¤šå¤§ä½¬ã€çœ‹è¿‡åšå®¢çš„å·¥ç¨‹å¸ˆï¼Œæ²¡æƒ³åˆ°ä»–ä»¬éƒ½å¾ˆä¹æ„åŠ å¾®ä¿¡ã€‚ä¹Ÿå‘ç°ä»–ä»¬ç›¸äº’éƒ½è®¤è¯†ï¼Œè¿™å°±æ˜¯åœˆå­å§ã€‚\n\n2018 æ˜¯ä¸–ç•Œæ¯å¹´ï¼Œæˆ‘ä¸æ‡‚çƒå°±æ˜¯çœ‹ä¸ªçƒ­é—¹ï¼Œæœ€å¼€å¿ƒçš„æ˜¯å…¬å¸æœ‰æ´»åŠ¨åŸºé‡‘ï¼Œæˆ‘æ‹‰ç€ä¸å°‘æ–°åŒäº‹ä»¬åƒå–äº†ä¸å°‘ã€‚å†¬å­£åå‘å±•æˆäº†å’ŒåŒäº‹çš„æ¯å‘¨çš„ç«é”…ï¼ŒçœŸæŒºå¿«ä¹çš„ã€‚\n\nä¹°äº†å¿ƒå¿ƒå¿µçš„ Switch å«çš„é—ªé€ï¼Œä¸Šåˆä¸‹å•ä¸€ä¼šåï¼Œå°±åƒæ”¶å¤–å–ä¸€æ ·æ”¶äº†æœºå­ã€‚è’é‡ä¹‹æ¯æ˜¯å¥½ç©ï¼Œå‘ƒâ€¦ ç”·ä¸»ç«Ÿç„¶å«æ—å…‹ä¸æ˜¯å¡å°”è¾¾ï¼Œä½ æ•¢æƒ³ï¼Ÿ\n\nå› ä¸º MSI çš„èƒœåˆ©å¼€å§‹å…³æ³¨ RNG LPLã€‚è¿™å¹´ LPL åé¢çš„æ¯”èµ›æˆ‘åŸºæœ¬éƒ½çœ‹äº†ï¼Œä¸­åˆè¿˜ä¼šçœ‹ dys çš„ç›´æ’­å®å†µã€‚æ´²é™…èµ› RW æ•‘ä¸–ä¸»çœŸæ˜¯ç²¾å½©ï¼Œâ€œå½“æ²¡äººç›¸ä¿¡ä½ çš„æ—¶å€™ï¼Œä½ è‡ªå·±ç›¸ä¿¡äº†è‡ªå·±ï¼Œå¹¶ä¸”èµ¢å¾—äº†èƒœåˆ©ï¼Œè¿™ä¾¿æ˜¯æˆä¸ºè‹±é›„çš„é“è·¯ã€‚â€ ç™»å³°é€ æ¥µ 2018 æˆ‘ä»¬æ˜¯å† å†›ã€‚\n\næ°¸åˆ©\\*æš´é›·å´©ç›˜ï¼ŒæŸå¤±ä¸å°‘ï¼Œæ´¾å‡ºæ‰€æŠ¥æ¡ˆã€‚å®¶é‡Œï¼Œå¤šå¹´çš„æœŸæˆ¿è¦å‘é’¥åŒ™äº†ï¼Œæ„Ÿæ©çˆ¶æ¯ã€‚ä¸€æ¬¡å›¢å»ºå‘æ¯”æ¯”æ±‚å©šæˆåŠŸã€‚\n\nè¿™å¹´æœ€åä¸€å¤©æ˜¯åœ¨ä¸‰äºšï¼Œåƒåˆ°äº†æ£’æ£’çš„æ—©æ™¨ï¼Œå»äº†èœˆæ”¯æ´²å²›ï¼Œæ„Ÿå—äº†ä¹˜é£ç ´æµªï¼Œé‡åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„ä¸œåŒ—å¸æœºï¼Œå‚åŠ äº†é…’åº—çš„æ™šä¼šï¼Œçœ‹äº†å–é…’èµ¢åˆ°çš„ç”µå½±ã€‚\n\n2018 Happy Ending.\n\n> åšäº†ä¸€ä¸ªæ¢¦ æˆ‘ä»¬ iG æ‹¿å† å†›äº† å•Šå“ˆå“ˆå“ˆâ€¦\n> æˆ‘è¯´æ˜¯ä¸æ˜¯å‡çš„ ç¡®å®æ˜¯ä¸ªæ¢¦å§ï¼Œ\n> ä½†æ˜¯å°±æ˜¯å½“æ—¶è™½ç„¶åœ¨åš ä½†æ˜¯ç‰¹åˆ«å¼€å¿ƒã€‚\n> æ‰€ä»¥æˆ‘ä»¬å°½é‡å°±æ˜¯è‡ªå·±åŠªåŠ›ä¸€ä¸‹ï¼Œ\n> ç„¶åæ¯ä¸ªäººå‘æŒ¥å¥½ä¸€ç‚¹çš„è¯ï¼Œ\n> æˆ‘è§‰å¾—çœŸçš„æœ‰å¯èƒ½ ä¹Ÿå¯ä»¥æ‹¿å† å†›çš„ã€‚\n\n-- EOF --\n","tags":["report"],"categories":["report"]},{"title":"äºŒåˆ†æŸ¥æ‰¾ Binary Search","url":"/2018/12/10/binary-search/","content":"\nå¿«é€Ÿä»ä¸€ä¸ªæ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªå…ƒç´ ã€‚\n\n## Linear Search çº¿æ€§æŸ¥æ‰¾\n\n```\nfunc linearSearch<T: Equatable>(_ a: [T], _ key: T) -> Int? {\n    for i in 0 ..< a.count {\n        if a[i] == key {\n            return i\n        }\n    }\n    return nil\n}\n```\n\nçº¿æ€§æŸ¥æ‰¾åœ¨æœ€åæƒ…å†µï¼šéå†äº†æ•´ä¸ªæ•°ç»„ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„å…ƒç´ ã€‚å¹³å‡è¦éå†ä¸€åŠçš„å…ƒç´ æ€§èƒ½ä¸º `O(n)`ï¼Œè€ŒäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡ä¸º `O(log n)`ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæœ‰ `1,000,000` å…ƒç´ çš„æ•°ç»„åªéœ€è¦ `20` æ­¥å°±å¯ä»¥æ‰¾åˆ°æƒ³è¦çš„å…ƒç´  `log_2(1,000,000) = 19.9`ã€‚\n\n<!-- more -->\n\nä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾è¦æ±‚æ•°ç»„å¿…é¡»æ˜¯æ’å¥½åºã€‚\n\näºŒåˆ†æŸ¥æ‰¾æ­¥éª¤ï¼š\n\n1. å°†æ•°ç»„åˆ†ä¸ºä¸¤åŠã€‚\n2. åˆ¤æ–­æƒ³è¦æ‰¾çš„å…ƒç´ æ˜¯åœ¨å·¦è¾¹æ•°ç»„è¿˜æ˜¯å³è¾¹ï¼Œè¿™ä¹Ÿæ˜¯æ•°ç»„éœ€è¦æ’å¥½é¡ºåºçš„åŸå› ã€‚\n3. å¦‚æœè¦çš„å…ƒç´ åœ¨å·¦è¾¹ï¼Œå°±å°†å·¦è¾¹çš„æ•°ç»„åˆ†æˆæ›´å°çš„ä¸¤éƒ¨åˆ†ï¼Œå¹¶åˆ¤æ–­è¦çš„å…ƒç´ åœ¨å“ªéƒ¨åˆ†ã€‚\n4. é‡å¤æ­¥éª¤ç›´åˆ°æ‰¾åˆ°æƒ³è¦çš„å…ƒç´ ã€‚å¦‚æœæ•°ç»„ä¸èƒ½è¿›ä¸€æ­¥æŸ¥åˆ†ï¼Œå°±è¯´æ˜è¦æ‰¾çš„å…ƒç´ ä¸åœ¨æ•°ç»„ä¸­ã€‚\n\ndivide-and-conquer\n\n## The code\n\n```\nfunc binarySearch<T: Comparable>(_ a: [T], key: T, range: Range<Int>) -> Int? {\n    if range.lowerBound >= range.upperBound {\n        // If we get here, then the search key is not present in the array.\n        return nil\n\n    } else {\n        // Calculate where to split the array.\n        let midIndex = range.lowerBound + (range.upperBound - range.lowerBound) / 2\n\n        // Is the search key in the left half?\n        if a[midIndex] > key {\n            return binarySearch(a, key: key, range: range.lowerBound ..< midIndex)\n\n        // Is the search key in the right half?\n        // è¿™é‡Œ + 1 çš„åŸå› æ˜¯æ’é™¤ midIndex ä¸­é—´å€¼\n        } else if a[midIndex] < key {\n            return binarySearch(a, key: key, range: midIndex + 1 ..< range.upperBound)\n\n        // If we get here, then we've found the search key!\n        } else {\n            return midIndex\n        }\n    }\n}\n```\n\n```\n// 19 numbers\nlet numbers = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67]\n\n// 0 ..< numbers.count è¦†ç›–æ‰€æœ‰èŒƒå›´\nbinarySearch(numbers, key: 43, range: 0 ..< numbers.count)  // gives 13\n```\n\näºŒåˆ†æŸ¥æ‰¾æ˜¯å°†æ•°ç»„åˆ†ä¸ºä¸¤ä¸ªï¼Œä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦æ­£çœŸçš„åˆ›å»ºä¸¤ä¸ªæ–°æ•°ç»„ã€‚å–è€Œä»£ä¹‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ Swift `Range` å¯¹è±¡è·Ÿè¸ªè¿™äº›æ‹†åˆ†ã€‚å·¦é—­å³å¼€ã€‚upperBound æ€»æ˜¯æ¯”æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å¤šä¸€ã€‚\n\n```\nmidIndex = (lowerBound + upperBound) / 2\n```\n\nå¦‚æœè¿™æ ·å†™å°†å­˜åœ¨ä¸€ä¸ª bugï¼Œå°±æ˜¯å½“è¿™ä¸¤å€¼éå¸¸å¤§æ—¶ï¼Œå°†å­˜åœ¨ä¸€ä¸ªè¶Šç•Œçš„é—®é¢˜ã€‚\n\n## Iterative vs recursive è¿­ä»£ vs é€’å½’\n\näºŒåˆ†æŸ¥æ‰¾æœ¬è´¨æ˜¯é€’å½’ã€‚\n\nä½¿ç”¨è¿­ä»£çš„æ–¹å¼å®ç°ï¼š\n\n```\nfunc binarySearch(_ a: [Int], key: Int) -> Int? {\n    var lowerBound = 0\n    var upperBound = a.count\n    while lowerBound < upperBound {\n        // è¿™è¡Œåƒµç¡¬äº† æ²¡æœ‰å¿…è¦çš„\n        var range = lowerBound ..< upperBound\n        let midIndex = range.lowerBound + (range.upperBound - range.lowerBound) / 2\n        let midValue = a[midIndex]\n        if key < midValue {\n            upperBound = midIndex\n        } else if key > midValue {\n            lowerBound = midIndex + 1\n        } else {\n            return midIndex\n        }\n    }\n    return nil\n}\n```\n\n## The end\n\næŸ¥æ‰¾å‰æ•°ç»„ä¸€å®šè¦å…ˆæ’åºå—ï¼Ÿè¿™å–å†³äºæ’åºèŠ±è´¹çš„æ—¶é—´ï¼Œæœ‰æ—¶å€™ï¼šæ•°ç»„æ’åºåŠ äºŒåˆ†æŸ¥æ‰¾æ¯”çº¿æ€§æœç´¢è¿˜è¦æ…¢ã€‚äºŒåˆ†æŸ¥æ‰¾çš„ä¼˜åŠ¿åœ¨äºä¸€æ¬¡æ’åºåå¤šæ¬¡æŸ¥æ‰¾ã€‚\n\næ–‡ç« ä»£ç ï¼š[GitHub - imzyf/data-structure-and-algorithm/004-Binary Search/](https://github.com/imzyf/data-structure-and-algorithm/tree/master/004-Binary%20Search)ã€‚\n\n> Reference:\n>\n> - [raywenderlich/swift-algorithm-club/Binary Search](https://github.com/raywenderlich/swift-algorithm-club/tree/master/Binary%20Search)\n","tags":["swift","algorithm"]},{"title":"æ’å…¥æ’åº Insertion Sort","url":"/2018/11/24/insertion-sort/","content":"\nå°†ä¸€ä¸ªæ•°ç»„ä»é«˜åˆ°ä½æˆ–è€…ä»ä½åˆ°é«˜æ’åºã€‚\n\næ’å…¥æ’åºç®—æ³•çš„å·¥ä½œåŸç†ï¼š\n\n1. å°†è‹¥å¹²æ•°å­—æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œæ•°ç»„æ˜¯ä¹±åºçš„ã€‚\n2. ä»æ•°ç»„ä¸­æŒ‘é€‰ä¸€ä¸ªæ•°å­—ï¼Œå®ƒæ˜¯å“ªä¸ªå¹¶ä¸é‡è¦ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æŒ‘é€‰æ•°ç»„å¤´éƒ¨çš„è¿™ä¸ªã€‚\n3. å°†è¿™ä¸ªæ•°å­—æ’å…¥åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„é‡Œã€‚\n4. ä»ä¹±åºæ•°ç»„é‡ŒæŒ‘é€‰ä¸‹ä¸€ä¸ªæ•°å­—ä¹Ÿå°†å®ƒæ”¾åˆ°æ–°æ•°ç»„é‡Œã€‚è¿™ä¸ªæ•°å­—è¦ä¹ˆåœ¨ç¬¬ä¸€ä¸ªæ•°å­—å‰æˆ–è€…åï¼Œæ‰€ä»¥è¿™ä¸ªä¸¤ä¸ªæ•°å­—æ˜¯è¢«æ’åºçš„ã€‚\n5. å†æ¬¡é‡ä»ä¹±åºæ•°ç»„é‡ŒæŒ‘é€‰ä¸‹ä¸€ä¸ªæ•°å­—ä¹Ÿå°†å®ƒæ”¾åˆ°æ–°æ•°ç»„é‡Œï¼Œå¹¶å°†æ•°å­—æ”¾åœ¨æ­£ç¡®çš„ä½ç½®ã€‚\n6. ä¸€ç›´å¦‚æ­¤è¿›è¡Œç›´åˆ°ä¹±åºæ•°ç»„ä¸­æ²¡æœ‰æ•°å­—ã€‚è¿™æ—¶ä¹Ÿå°†ç­‰åˆ°ä¸€ä¸ªæ’åºå¥½çš„æ–°æ•°ç»„ã€‚\n\n<!-- more -->\n\nè‡ªå·±çš„ä¸€ä¸ªå®ç°ï¼š\n\n```\nlet array = [2, 1, 3, 8, 3, 5, 4]\n\nvar newArray = [Int]()\nfor (k, v) in array.enumerated() {\n    for (nK, nV) in newArray.enumerated() {\n        // æœ¬æ¬¡çš„æ•° å°äº å­˜åœ¨çš„æ•°çš„ç¬¬ä¸€ä¸ª(nv)\n        if v < nV {\n            newArray.insert(v, at: nK)\n            break\n        }\n    }\n    // æ²¡æœ‰æ’å…¥æˆåŠŸ æ”¾åœ¨æœ«å°¾\n    if newArray.count < k + 1 {\n        newArray.append(v)\n    }\n}\n```\n\n## In-place sort\n\nä¸Šé¢çš„æ’åºéœ€è¦ä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ä¸ªåŸå§‹çš„ï¼Œä¸€ä¸ªæ’å¥½é¡ºåºçš„ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ _å°±åœ°æ’åº_ æ— éœ€åˆ›å»ºä¸€ä¸ªé¢å¤–çš„æ•°ç»„ã€‚æˆ‘ä»¬åªéœ€è¦è·Ÿè¸ªè®°å½•åŸå§‹æ•°ç»„ä¸­å“ªé‡Œéƒ¨åˆ†æ’å¥½é¡ºåºäº†ï¼Œå“ªä¸€éƒ¨åˆ†è¿˜æ²¡æœ‰æ’åºã€‚\n\nä¸¾ä¾‹ï¼š`[ 8, 3, 5, 4, 6 ]` ä½¿ç”¨ `|` åˆ†å‰²æ˜¯å¦æ’å¥½é¡ºåºçš„éƒ¨åˆ†ã€‚\n\n```\n// å¼€å§‹æ—¶ | åœ¨æœ€å‰\n[| 8, 3, 5, 4, 6 ]\n\n// å¼€å§‹å‘å·¦ç§»åŠ¨ï¼Œå·¦ä¾§åªæœ‰ä¸ª 8 æ— è®ºä»€ä¹ˆé¡ºåºéƒ½æ˜¯æ­£ç¡®çš„ï¼Œå³ä¾§æ˜¯æœªæ’åºçš„éƒ¨åˆ†\n[ 8 | 3, 5, 4, 6 ]\n\n// ä¾æ¬¡è¿›è¡Œ å°†æœªæ’åºçš„å¤´éƒ¨å…ƒç´ æ”¾åœ¨å·²æ’éƒ¨åˆ†çš„æ­£ç¡®ä½ç½®\n[ 3, 8 | 5, 4, 6 ]\n[ 3, 5, 8 | 4, 6 ]\n[ 3, 4, 5, 8 | 6 ]\n[ 3, 4, 5, 6, 8 |]\n```\n\næ¯æ¬¡ `|` ç§»åŠ¨ï¼Œéƒ½å¯¹å·¦ä¾§è¿›è¡Œæ’åºï¼Œæœªæ’åºçš„éƒ¨åˆ†é€æ¸å‡å°‘ï¼Œæ’åºéƒ¨åˆ†å¢åŠ ã€‚ç›´åˆ°æœªæ’åºéƒ¨åˆ†ä¸ºé›¶ã€‚\n\n## How to insert\n\nå°†æœªæ’åºçš„å¤´éƒ¨å…ƒç´ æ”¾åœ¨å·²æ’éƒ¨åˆ†çš„æ­£ç¡®ä½ç½®ï¼Œå¦‚ä½•è¿™åˆ°è¿™ç‚¹çš„ï¼Ÿ\n\n```\n// ä»æ­¤çŠ¶æ€å¼€å§‹ã€‚ä¸‹ä¸ªè¯´çš„ 4ï¼Œæˆ‘ä»¬éœ€è¦å°† 4 æ’å…¥åˆ° [ 3, 5, 8 ] è¿™ä¸ªå·²ç»æ’å¥½çš„æ•°ç»„é‡Œ\n[ 3, 5, 8 | 4, 6 ]\n\n// ç§»åŠ¨ |ï¼Œè¿™æ—¶æˆ‘ä»¬æ³¨æ„ 8 è¿™ä¸ªå…ƒç´ \n[ 3, 5, 8, 4 | 6 ]\n        ^\n\n// 8 å¤§äº 4ï¼Œæ‰€æœ‰ 8 åº”è¯¥åœ¨ 4 çš„å³è¾¹ï¼Œ8 ä¸ 4 è¿›è¡Œä½ç½®è°ƒæ¢\n[ 3, 5, 4, 8 | 6 ]\n        <-->\n      swapped\n\n// å°† 4 ä¸ç°åœ¨çš„å‰é¢çš„å…ƒç´  5 è¿›è¡Œæ¯”è¾ƒï¼Œ5 å¤§äº 4ï¼Œæ‰€ä»¥ 5 ä¸ 4 è¿›è¡Œä½ç½®è°ƒæ¢\n[ 3, 4, 5, 8 | 6 ]\n     <-->\n    swapped\n\n// 3 å°äº 4 è¿™ä¸ªæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œæˆäº†å¯¹ 4 çš„æ’åºï¼Œè¿™æ—¶ä»å¤´åˆ° |ï¼Œæ˜¯æ’å¥½é¡ºåºçš„\n[ 3, 4, 5, 8 | 6 ]\n```\n\nè¿™å°±æ˜¯å¯¹æ’å…¥æ’åºç®—æ³•çš„å†…å¾ªç¯çš„æè¿°ã€‚\n\n## The code\n\n```\nfunc insertionSort(_ array: [Int]) -> [Int] {\n    // 1\n    var a = array\n    // 2\n    for x in 1..<a.count {\n        var y = x\n        // 3\n        while y > 0 && a[y] < a[y - 1] {\n            a.swapAt(y - 1, y)\n            y -= 1\n        }\n    }\n    return a\n}\n```\n\n1. å°† `array` å¤åˆ¶ä¸€ä¸ªå‰¯æœ¬ã€‚å› ä¸ºæˆ‘ä»¬æ— æ³•ç›´æ¥ä¿®æ”¹å‚æ•°ä¸­çš„ `array`ï¼Œå°±æƒ³ Swift è‡ªèº«çš„ `sort()`ï¼Œ`insertionSort()` å°†è¿”å›ä¸€ä¸ªæ’åºé¡ºåºçš„å‰¯æœ¬æ•°ç»„ã€‚\n2. ä¸¤ä¸ªå¾ªç¯åœ¨æ–¹æ³•ä¸­ã€‚å¤–å±‚å¾ªç¯éå†è½®åˆ°æ’åºçš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ä»å¾…æ’æ•°ç»„ä¸­æŒ‘é€‰å‡ºå¤´éƒ¨çš„å…ƒç´ ã€‚`x` ç´¢å¼•ä¸ºæ’å¥½é¡ºåºçš„ç»“å°¾ç´¢å¼•åŒæ—¶ä¹Ÿæ˜¯å¾…æ’æ•°ç»„çš„å¼€å¤´ã€‚è®°ä½ï¼Œå¦‚ä½•æ—¶é—´ä»å¼€å¤´åˆ° `x` æ°¸è¿œéƒ½æ˜¯æ’å¥½é¡ºåºçš„ï¼Œä» `x` åˆ°æœ€åçš„å…ƒç´ éƒ½æ˜¯æœªæ’åºçš„ã€‚\n3. å†…å±‚å¾ªç¯æŸ¥è¯¢ x ç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚è¿™ä¸ªå…ƒç´ å¯èƒ½å°äºä¹‹å‰æ’åºé¡ºåºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚å†…å±‚å¾ªç¯ä»åå€’åºéå†æ¯ä¸€ä¸ªå·²æ’åºçš„å…ƒç´ ï¼Œæ¯æ¬¡å‘ç°è¿™ä¸ªå…ƒç´ ä¹‹å‰çš„å…ƒç´ æ¯”å®ƒå¤§ï¼Œåˆ™äº¤äº’ä½ç½®ã€‚å½“å†…å±‚å¾ªç¯å®Œæˆæ—¶ï¼Œæ•°ç»„ä»å¼€å¤´åˆ° x å°†åˆæ˜¯å·²æ’åºçš„ã€‚\n\ntipï¼šå¤–å±‚å¾ªç¯ä»ç´¢å¼• 1 å¼€å§‹ï¼Œè€Œä¸æ˜¯ 0ã€‚å°†ç¬¬ä¸€ä¸ªå…ƒç´ ä»å †ç§»åŠ¨åˆ°æ’åºéƒ¨åˆ†å®é™…ä¸Šå¹¶æ²¡æœ‰æ”¹å˜ä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨è·³è¿‡å®ƒã€‚\n\n## No more swaps\n\nä¸Šé¢çš„æ’å…¥æ’åºå¯ä»¥æ­£å¸¸çš„å·¥ä½œäº†ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç§»é™¤è°ƒç”¨ swap() è®©ç¨‹åºæ›´å¿«ä¸€äº›ã€‚\n\næˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰éœ€è¦æ¢ä½ç½®çš„å…ƒç´ å‘å³ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œç„¶åå°†æ–°æ•°å­—å¤åˆ¶åˆ°æ­£ç¡®çš„ä½ç½®ã€‚\n\n```\n[ 3, 5, 8, 4 | 6 ]   remember 4\n           *\n\n[ 3, 5, 8, 8 | 6 ]   shift 8 to the right\n        --->\n\n[ 3, 5, 5, 8 | 6 ]   shift 5 to the right\n     --->\n\n[ 3, 4, 5, 8 | 6 ]   copy 4 into place\n     *\n```\n\n```\nfunc insertionSort(_ array: [Int]) -> [Int] {\n    var a = array\n    for x in 1..<a.count {\n        var y = x\n        let temp = a[y]\n        // tip\n        while y > 0 && temp < a[y - 1] {\n            // 1\n            a[y] = a[y - 1]\n            y -= 1\n        }\n        // 2\n        a[y] = temp\n    }\n    return a\n}\n```\n\n1. åŸæœ¬éœ€è¦æ¢ä½ç½®çš„å…ƒç´ å³ç§»ä¸€ä¸ªä½ç½®ã€‚\n2. å½“å†…å±‚ç»“æŸæ—¶ï¼Œ`y` çš„ç´¢å¼•ä½ç½®å°±æ˜¯æ–°å…ƒç´ çš„æ’åºåçš„ä½ç½®ï¼Œå°†å…ƒç´ æ”¾åœ¨æ­¤ã€‚\n\ntipï¼šè¿™é‡Œæˆ‘è‡ªå·±å†™æˆäº† `while y > 0 && a[y] < a[y - 1]` è¿™æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºæˆ‘è¦æ‰¾çš„æ˜¯ **åŸæœ¬** çš„ `a[y]` çš„ä½ç½®ï¼Œä½†æ˜¯å¾ªç¯ä¸€æ¬¡å `a[y]` å°†å‘ç”Ÿå˜åŒ–ã€‚\n\n## Making it generic\n\n```\nfunc insertionSort<T>(_ array: [T], _ isOrderedBefore: (T, T) -> Bool) -> [T] {\n    var a = array\n    for x in 1..<a.count {\n        var y = x\n        let temp = a[y]\n        while y > 0, isOrderedBefore(temp, a[y - 1])  {\n            a[y] = a[y - 1]\n            y -= 1\n        }\n        a[y] = temp\n    }\n\n    return a\n}\n```\n\né€šè¿‡é—­åŒ…æ¥æ‰§è¡Œå¤§å°æ¯”è¾ƒã€‚\n\n```\nlet numbers = [ 10, -1, 3, 9, 2, 27, 8, 5, 1, 3, 0, 26 ]\ninsertionSort(numbers, <)\n\nlet objects = [ obj1, obj2, obj3, ... ]\ninsertionSort(objects) { $0.priority < $1.priority }\n```\n\næ’å…¥æ’åºæ˜¯ä¸€ç§ç¨³å®š `stable` çš„æ’åºã€‚å½“æ’åºåå…·æœ‰ç›¸åŒæ’åºé”®çš„å…ƒç´ ä¿æŒç›¸åŒçš„ç›¸å¯¹é¡ºåºæ—¶ï¼Œæ’åºæ˜¯ç¨³å®šçš„ã€‚è¿™å¯¹äºè¯¸å¦‚æ•°å­—æˆ–å­—ç¬¦ä¸²ä¹‹ç±»çš„ç®€å•å€¼å¹¶ä¸é‡è¦ï¼Œä½†åœ¨æ’åºæ›´å¤æ‚çš„å¯¹è±¡æ—¶è¿™å¾ˆé‡è¦ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œåˆ™æ— è®ºå…¶ä»–å±æ€§çš„å€¼å¦‚ä½•ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½ä¸ä¼šè¢«äº¤æ¢ã€‚\n\n## Performance\n\næœ€å·®çš„æ’å…¥æ’åºæ˜¯ `O(n^2)` å› ä¸ºä¿©ä¸ªç›¸è¿‘çš„å¾ªç¯åµŒå¥—ã€‚å…¶ä»–æ’åºç®—æ³•ï¼ˆå¦‚å¿«é€Ÿæ’åºå’Œåˆå¹¶æ’åºï¼‰å…·æœ‰ `O(n log n)` æ€§èƒ½ï¼Œåœ¨å¤§è¾“å…¥æ—¶é€Ÿåº¦æ›´å¿«ã€‚\n\næ’å…¥æ’åºå®é™…ä¸Šå¯¹äºæ’åºå°æ•°ç»„éå¸¸å¿«ã€‚æŸäº›æ ‡å‡†åº“å…·æœ‰æ’åºåŠŸèƒ½ï¼Œå½“åˆ†åŒºå¤§å°ä¸º `10` æˆ–æ›´å°æ—¶ï¼Œå¯ä»¥ä»å¿«é€Ÿæ’åºåˆ‡æ¢åˆ°æ’å…¥æ’åºã€‚\n\nå°† `insertSort()` ä¸ Swift çš„å†…ç½® `sort()` è¿›è¡Œæ¯”è¾ƒã€‚åœ¨å¤§çº¦ `100` å…ƒç´ å·¦å³çš„é˜µåˆ—ä¸Šï¼Œé€Ÿåº¦å·®å¼‚å¾ˆå°ã€‚ä½†æ˜¯ï¼Œéšç€è¾“å…¥å˜å¤§ï¼Œ`O(n^2)` å¿«é€Ÿå¼€å§‹æ‰§è¡Œæ¯” `O(n log n)` å·®å¾ˆå¤šï¼Œå¹¶ä¸”æ’å…¥æ’åºæ— æ³•è·Ÿä¸Šã€‚\n\næ–‡ç« ä»£ç ï¼š[GitHub - imzyf/data-structure-and-algorithm/003-Insertion Sort/](https://github.com/imzyf/data-structure-and-algorithm/tree/master/003-Insertion%20Sort)ã€‚\n\n> Reference:\n>\n> - [raywenderlich/swift-algorithm-club/Insertion Sort](https://github.com/raywenderlich/swift-algorithm-club/tree/master/Insertion%20Sort)\n","tags":["swift","algorithm"]},{"title":"é˜Ÿåˆ— Queue Data Structure","url":"/2018/11/22/queue-data-structure/","content":"\nå®ç°ä¸€ä¸ª `é˜Ÿåˆ—`ï¼ŒåŒ…æ‹¬ `enqueue`ã€`dequeue`ã€`peek`ã€‚\n\n## Queue\n\n`é˜Ÿåˆ—` æ ¸å¿ƒä¹Ÿæ˜¯ arrayï¼ŒA queue gives you a FIFO or first-in, first-out order. é˜Ÿåˆ—æ˜¯ï¼šå…ˆè¿›å…ˆå‡ºçš„ã€‚\n\n```swift\npublic struct Queue<T> {\n    fileprivate var array = [T]()\n}\n```\n\n<!-- more -->\n\n## enqueue\n\nè¿›é˜Ÿï¼Œåœ¨æ•°ç»„å°¾éƒ¨è¿½åŠ å…ƒç´ ã€‚\n\n```swift\npublic mutating func enqueue(_ element: T) {\n    array.append(element)\n}\n```\n\n## dequeue\n\nå‡ºé˜Ÿï¼Œå°†é¦–ä½çš„å…ƒç´ ç§»é™¤ã€‚å› ä¸ºé¦–ä½å…ƒç´ ç§»é™¤åï¼Œå…¶ä»–å…ƒç´ ä¾æ¬¡å‘å‰ç§»åŠ¨ï¼Œæ‰€ä»¥æ˜¯ O(n)ã€‚\n\n```swift\npublic var isEmpty: Bool {\n    // ä½¿ç”¨æ•°ç»„è‡ªèº«çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ array.count > 0\n    return array.isEmpty\n}\n\npublic mutating func dequeue() -> T? {\n    // ä½¿ç”¨å®šä¹‰çš„å˜é‡\n    if isEmpty {\n        return nil\n    } else {\n        return array.removeLast()\n    }\n}\n```\n\n## peek\n\næŸ¥çœ‹é˜Ÿé¦–å…ƒç´ ã€‚\n\n```swift\n/// peek() æ”¹ä¸ºæ›´æœ‰è¯­ä¹‰è¯çš„åªè¯»å˜é‡\npublic var front: T? {\n    return array.first\n}\n```\n\n## ä¼˜åŒ–å‡ºé˜Ÿ\n\nåœ¨å‡ºé˜Ÿåä¸ç§»åŠ¨å…ƒç´ è€Œæ˜¯ç§»åŠ¨ `èµ·å§‹ç´¢å¼•`ï¼Œå°±åƒåŠ¨çš„æ”¶é“¶å°è€Œä¸æ˜¯æ’é˜Ÿçš„äººã€‚\n\n```swift\n/// ä¼˜åŒ– é˜Ÿåˆ— çš„å‡ºé˜Ÿ\npublic struct OptimizedQueue<T> {\n\n    /// è¿™é‡Œæ”¹ä¸ºäº†å¯é€‰å‹ï¼Œä¸ºäº†å¯ä»¥æ¸…ç†æ— æ•ˆçš„å…ƒç´ \n    fileprivate var array = [T?]()\n    /// èµ·å§‹ç´¢å¼•\n    fileprivate var head = 0\n\n    public var count: Int {\n        // å‡å» èµ·å§‹ç´¢å¼• å‰é¢çš„æ•°é‡\n        return array.count - head\n    }\n\n    public var isEmpty: Bool {\n        // æ ¹æ®å®é™…æ•°é‡åˆ¤æ–­\n        return count == 0\n    }\n\n    // ä¿æŒä¸å˜\n    public mutating func enqueue(_ element: T) {\n        array.append(element)\n    }\n\n    public mutating func dequeue() -> T? {\n        guard head < array.count,\n            let element = array[head] else {\n            return nil\n        }\n        // ç½®ç©ºå½“å‰ä½ç½®å…ƒç´ \n        array[head] = nil\n        // å‰ç§»èµ·å§‹ç´¢å¼•\n        head += 1\n\n        // ç©ºç´¢å¼•çš„å ç”¨æ¯”ä¾‹\n        let percentage = Double(head)/Double(array.count)\n        // 50 0.25 éƒ½æ˜¯é­”æ³•æ•°å­—ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ§åˆ¶æ•°ç»„ä¿®å‰ªçš„é¢‘ç‡ï¼Œå¯ä»¥è‡ªè¡Œè°ƒæ•´\n        if array.count > 50 && percentage > 0.25 {\n            // å°†èµ·å§‹ç©ºå…ƒç´ åˆ é™¤\n            array.removeFirst(head)\n            // é‡ç½® èµ·å§‹ç´¢å¼•\n            head = 0\n        }\n\n        return element\n    }\n\n    public var front: T? {\n        if isEmpty {\n            return nil\n        } else {\n            // æ ¹æ® èµ·å§‹ç´¢å¼•è¿›è¡Œ è¿”å›\n            return array[head]\n        }\n    }\n}\n```\n\næ–‡ç« ä»£ç ï¼š[GitHub - imzyf/data-structure-and-algorithm/002-Queue/](https://github.com/imzyf/data-structure-and-algorithm/tree/master/002-Queue)ã€‚\n\n## References\n\n- [raywenderlich/swift-algorithm-club/Queue](https://github.com/raywenderlich/swift-algorithm-club/tree/master/Queue)\n","tags":["swift","algorithm"]},{"title":"æ ˆ Stack Data Structure","url":"/2018/11/22/stack-data-structure/","content":"\nåŠ å…¥ [Swift Algorithm Club](https://github.com/raywenderlich/swift-algorithm-club) /'Ã¦lgÉ™'rÉªÃ°É™m/ï¼Œå›ç‚‰é‡æ–°å­¦ä¹ æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‚\n\nè‡ªå·±åˆ›å»ºçš„é¡¹ç›®ï¼š[GitHub - imzyf/data-structure-and-algorithm](https://github.com/imzyf/data-structure-and-algorithm)ã€‚\n\nå®ç°ä¸€ä¸ª `æ ˆ` /stÃ¦k/ï¼ŒåŒ…å« `push` `peek` `pop` ä¸ `Generics` æ³›å‹ã€‚\n\n<!-- more -->\n\n## stack\n\n`æ ˆ` éå¸¸åƒä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…æ‹¬å°‘é‡çš„æ–¹æ³•ã€‚\n\n- push æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ åˆ°æ ˆé¡¶\n- pop ä»æ ˆé¡¶ç§»é™¤ä¸€ä¸ªå…ƒç´ \n- peek æŸ¥çœ‹æ ˆé¡¶çš„ä¸€ä¸ªå…ƒç´ ä½†æ˜¯ä¸ pop\n\nA stack gives you a LIFO or last-in first-out order. æ ˆæ˜¯åè¿›å…ˆå‡ºï¼Œé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºã€‚\n\n```\npublic struct Stack<Element> {\n    fileprivate var array: [Element] = []\n}\n```\n\n## push\n\n`push` æ˜¯åœ¨æ•°ç»„çš„å°¾éƒ¨æ·»åŠ å…ƒç´ æ˜¯ä»¥ `O(1)`ï¼Œå¦‚æœæ˜¯åœ¨æ•°ç»„æœ€å‰æ·»åŠ æ˜¯ `O(n)` è¿™æ˜¯æ˜‚è´µçš„ã€‚\n\n```\npublic mutating func push(_ element: Element) {\n  array.append(element)\n}\n```\n\nå› ä¸ºä½¿ç”¨çš„ `struct`ï¼Œä¿®æ”¹å±æ€§å€¼çš„æ–¹æ³•è¦åŠ  `mutating`ã€‚\n\n## pop\n\næƒ³ä»ä¸€ä¸ªç©ºæ ˆä¸­å¼¹å‡ºæœ€åä¸€ä¸ªå…ƒç´ å°†è¿”å› `nil`ã€‚\n\n```\npublic mutating func pop(_ element: Element) {\n    return array.popLast()\n}\n```\n\n## peek\n\nä¸ `pop` æœ‰ç‚¹åƒï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç§»é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚\n\n```\n/// peek æ”¹ä¸ºæ›´åŠ è¯­ä¹‰åŒ–çš„ top åªè¯»å˜é‡\npublic var top: T? {\n    return array.last\n}\n```\n\n## other\n\nä¸¤ä¸ªå…¶ä»–çš„å¸¸ç”¨å±æ€§ï¼Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œæ ˆä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚\n\n```\npublic var isEmpty: Bool {\n  return array.isEmpty\n}\n\npublic var count: Int {\n  return array.count\n}\n```\n\n> Reference:\n>\n> - [Swift Algorithm Club: Swift Stack Data Structure](https://www.raywenderlich.com/800-swift-algorithm-club-swift-stack-data-structure)\n","tags":["swift","algorithm"]},{"title":"è§£å†³ Too many symbol files","url":"/2018/10/30/correct-too-many-symbol-files-issues/","content":"\nåœ¨ä¸Šä¼  App åˆ° App Store åæ”¶åˆ°é‚®ä»¶ï¼Œæœ‰ issues **Too many symbol files**ã€‚åœ¨ä¹‹å‰çœ‹åˆ° _Your delivery was successful_ï¼Œæ­¤ issues ä¸å½±å“å‘å¸ƒï¼Œæ‰€ä»¥ä¸€ç›´æç½®äº†ã€‚\n\nä»Šå¤©å†³å®šå½»åº•å¤„ç†ä¸‹ã€‚\n\n<!-- more -->\n\n## èƒŒæ™¯\n\nå…ˆè¯´ `*.symbols` è¿™æ–‡ä»¶æ˜¯å¹²å˜›çš„ï¼Œæˆ‘ç°åœ¨ï¼ˆ2018-10ï¼‰å¯¹æ­¤çš„ç†è§£ï¼š\n\n- symbols ä¸ºç¬¦å·è¡¨æ–‡ä»¶\n- ç¬¦å·è¡¨æ˜¯å†…å­˜åœ°å€ä¸å‡½æ•°åã€æ–‡ä»¶åã€è¡Œå·çš„æ˜ å°„è¡¨ `<èµ·å§‹åœ°å€> <ç»“æŸåœ°å€> <å‡½æ•°> [<æ–‡ä»¶å:è¡Œå·>]`\n\nä¸ºä»€ä¹ˆè¦é…ç½®ç¬¦å·è¡¨ï¼Ÿ\n\nä¸ºäº†èƒ½å¿«é€Ÿå¹¶å‡†ç¡®åœ°å®šä½ç”¨æˆ· App å‘ç”Ÿ **Crash çš„ä»£ç ä½ç½®**ï¼Œä½¿ç”¨ç¬¦å·è¡¨å¯¹ App å‘ç”Ÿ Crash çš„ç¨‹åº _å †æ ˆ_ è¿›è¡Œ _è§£æ_ å’Œ _è¿˜åŸ_ã€‚\n\n![006tNbRwly1fwq98vcjeoj30i00383yh](https://user-images.githubusercontent.com/9289792/80204521-9ea54a80-865b-11ea-9420-7d8a2d32e910.jpg)\n\n## é¡¹ç›®æƒ…å†µ\n\nå†è¯´ä¸‹é¡¹ç›®æƒ…å†µï¼Œå› ä¸ºæ•°å­—éƒ½æ˜¯ç”¨äº†çš„æ˜¯ Intï¼Œä¸ºé˜²æ­¢ 32 ä½è®¾å¤‡å‘ç”Ÿè¶Šç•Œæƒ…å†µï¼ˆç†ç”±å¥½åƒæœ‰ç‚¹æ‰¯ï¼‰ï¼Œæ‰€ä»¥é¡¹ç›®ç«¯è®¾ç½®äº†è®¾å¤‡é™åˆ¶ `arm64`ï¼Œä¹Ÿå°±æ˜¯ 5s ä¹‹å‰çš„è®¾å¤‡ä¸å¯ä»¥å®‰è£…ã€‚\n\nå› ä¸ºä½¿ç”¨äº†ä¸‰æ–¹åº“ï¼Œä½†æ˜¯ä¸‰æ–¹åº“æ˜¯æ”¯æŒ 32 ä½è®¾å¤‡çš„ï¼Œæ‰€ä»¥ç”Ÿæˆäº†å†—ä½™çš„ symbols æ–‡ä»¶ã€‚\n\næŸ¥è¯¢ symbols æ–‡ä»¶çš„ç”Ÿæˆæƒ…å†µï¼šXcode Window -> Organizer é€‰æ‹©æœ‰é—®é¢˜çš„ archiveï¼Œå³å‡»é€‰æ‹© Show in finderï¼Œå‘½ä»¤è¡Œè¿›å…¥ \\*.app ä¸­çš„ dSYMs æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ `dwarfdump --uuid *` å¯ä»¥æŸ¥è¯¢åˆ°æ˜¯å¦ç”Ÿæˆäº†å¤šä½™çš„æ–‡ä»¶ã€‚\n\n## è§£å†³\n\nåœ¨ `Podfile` ä¸­ï¼š\n\n```txt\npost_install do |installer|\n  installer.pods_project.targets.each do |target|\n    target.build_configurations.each do |config|\n      config.build_settings['ENABLE_BITCODE'] = 'NO'\n      config.build_settings['ARCHS'] = 'arm64'\n    end\n  end\nend\n```\n\n## æ£€æŸ¥\n\nåœ¨ `info.plist` ä¸­ï¼š\n\n```plist\n<key>UIRequiredDeviceCapabilities</key>\n<array>\n    <string>arm64</string>\n</array>\n```\n\nåœ¨ build Settings æœç´¢ `valid architecture` ä¸­ï¼Œå¡«å†™ `arm64`\n\n## References\n\n- [â€œToo many symbol filesâ€ after successfully submitting my apps](https://stackoverflow.com/questions/25755240/too-many-symbol-files-after-successfully-submitting-my-apps)\n- [â€œToo many symbol filesâ€ warnning when submitting app](https://stackoverflow.com/questions/34313049/too-many-symbol-files-warnning-when-submitting-app)\n- [App æäº¤ iTunes Connect,\"äºŒè¿›åˆ¶æ— æ•ˆ\"é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚](https://www.jianshu.com/p/3511ec38ca20)\n- [Bugly iOS ç¬¦å·è¡¨é…ç½®](https://bugly.qq.com/docs/user-guide/symbol-configuration-ios/?v=20180709165613#_2)\n\n-- EOF --\n","tags":["ios"]},{"title":"AWS CLI å…¥é—¨ä½¿ç”¨","url":"/2018/06/22/aws-cli-getting-started/","content":"\n## å®‰è£…\n\n[AWS CLI - User Guide](https://docs.aws.amazon.com/cli/latest/userguide/awscli-install-linux.html) `apt` `yum` ä¸­ä¹Ÿæœ‰ `awscli` åŒ…ï¼Œä½†æ˜¯ä¸ä¿è¯æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨ `pip` å®‰è£…ã€‚\n\n```bash\npip install awscli --upgrade --user\n\naws --version\n```\n\nè¿™ä¸ªå‘ç°ä½¿ç”¨ `pip` æ€»æ˜¯å®‰è£…å¤±è´¥ï¼ŒåŸå› æš‚ä¸æ˜ï¼Œåæ¥æ˜¯ä½¿ç”¨ `pip3` å®‰è£…æˆåŠŸçš„ã€‚\n\n<!-- more -->\n\n```bash\n$ ls -a ~\n```\n\nåœ¨ `.bashrc` æˆ–è€… `.zshrc` ä¸­æ·»åŠ ï¼š\n\n```bash\nexport PATH=~/.local/bin:$PATH\n```\n\nåº”ç”¨ï¼š\n\n```bash\nsource ~/.bashrc\n```\n\n## é…ç½®\n\n```bash\naws configure\n```\n\né…ç½®æ–‡ä»¶é»˜è®¤å­˜å‚¨åœ¨äº† `~/.aws`\n\n## S3 å‘½ä»¤\n\n```bash\naws s3 help\n\naws s3 sync help\n```\n\n### æ–‡ä»¶åŒæ­¥\n\n```bash\naws s3 sync ./abc s3://www.abc.com/ --exclude \"*.DS_Store\" --cache-control max-age=2592000\n```\n\n- exclude æ’é™¤æ–‡ä»¶\n- cache-control æ¸¸è§ˆå™¨ç¼“å­˜æ—¶é—´\n\n### å¤‡ä»½è„šæœ¬\n\n```bash\n#!/bin/bash\n/home/ubuntu/.local/bin/aws s3 sync s3://S3URI /home/ubuntu/LocalPath\n```\n\n-- EOF --\n","tags":["aws"]},{"title":"åœ¨ MySQL ä¸­é€‰æ‹©åˆé€‚çš„æ—¥æœŸç±»å‹","url":"/2018/05/25/select-the-appropriate-date-type-in-mysql/","content":"\nå¦‚ä½•åœ¨ MySQL ä¸­é€‰æ‹©åˆé€‚çš„æ—¥æœŸç±»å‹å›°æ‰°äº†å¾ˆä¹…ï¼Œ`varchar`ã€`int`ã€`timestamp`ã€`datetime` éƒ½æœ‰å°è¯•è¿‡ï¼Œè¿‘æ¥æœ‰æ‰€æ„Ÿæ‚Ÿï¼Œåšæ­¤æ€»ç»“ã€‚\n\næ³¨ï¼šæ­¤æ€»ç»“è€ƒè™‘äº† PHP å’Œ Laravel æ¡†æ¶çš„ç‰¹ç‚¹ã€‚\n\n## ä½¿ç”¨ varchar\n\n`varchar` å­˜å‚¨æ—¥æœŸæ—¶é—´çš„æ ¼å¼å®Œå…¨å¯ä»¥è‡ªå·±æ§åˆ¶ï¼Œ`æœˆ/æ—¥/å¹´` è¿˜æ˜¯ `å¹´-æœˆ-æ—¥` éœ€æ±‚æ€ä¹ˆè¯´å°±æ€ä¹ˆå­˜ï¼Œè¯»å–åå±•ç¤ºæ˜¯ä¹Ÿä¸ç”¨åœ¨æ ¼å¼åŒ–ã€‚åŒæ—¶ä¼ç¬”ä¹Ÿå°±æ­¤åŸ‹ä¸‹ï¼šæ—¥æœŸæ—¶é—´æ ¼å¼æ²¡å¼ºåˆ¶çº¦æŸï¼Œæ€»æœ‰ä¸€å¤©å­—æ®µé‡Œå‡ºç°äº†ä¸ä¼—ä¸åŒçš„æ ¼å¼ï¼›è¦æ˜¯æ—¥æœŸæ—¶é—´ä¼š _å˜åŒ–_ æˆ–ä½œä¸º _æŸ¥è¯¢æ¡ä»¶_ æˆ–è¦è¿›è¡Œ _æ’åº_ æ—¶å°±åˆæ˜¯ä¸€å‘ï¼Œè¿˜æ˜¯è¦æ ¼å¼åŒ–æ ‡å‡†æ ¼å¼å†å¤„ç†ã€‚å¯ä»¥è¯´ `varchar` åº”è¯¥æ˜¯æœ€å·®çš„é€‰æ‹©äº†ã€‚\n\n<!-- more -->\n\n## ä½¿ç”¨ int ä¸ timestamp\n\nPHP `time()` å¯ä»¥ç›´æ¥è·å–å½“å‰æ—¶é—´æˆ³ç§’æ•°ï¼Œæ•°æ®åº“å­—æ®µè¦ä¹Ÿæ˜¯ `int` ä¸€å­˜å°±å®Œäº‹äº†ï¼Œä¸ä¼šæœ‰æ ¼å¼é—®é¢˜ï¼Œè°ç”¨ä»€ä¹ˆæ ·è½¬ä»€ä¹ˆæ ·ã€‚ä½†æ˜¯åœ¨æ•°æ®åº“å·¥å…·ä¸­æŸ¥çœ‹æ­¤å­—æ®µæ—¶æ˜¾ç¤ºä¸å¤Ÿç›´è§‚ï¼ŒèŒƒå›´æ—¶ä¼šä¸æ–¹ä¾¿ï¼Œè¿™äº›åœ¨ä½¿ç”¨ `timestamp` æ˜¯ä¼šå¾—åˆ°è§£å†³ã€‚\n\ntimestamp æ˜¯æˆ‘ä¸€ç›´è¿·æƒ‘çš„ä¸€ä¸ªç±»å‹ã€‚æˆ‘å†™äº†å‡ ä¸ªä¾‹å­åšæµ‹è¯•ï¼š\n\n1. å°† Laravel é¡¹ç›®è®¾ç½®ä¸º `CST` ä¸­å›½æ ‡å‡†æ—¶é—´ï¼ŒMySQL æ—¶åŒºè®¾ç½®ä¸º `UTC`ï¼Œä½¿ç”¨ `now()` è·å–å½“å‰æ—¥æœŸæ—¶é—´ï¼Œæ¯”å¦‚ï¼š`2018-5-25 11:00:00` å­˜å…¥ `timestamp` ç±»å‹çš„å­—æ®µä¸­ï¼Œä½¿ç”¨æ•°æ®åº“å·¥å…·æŸ¥çœ‹å­—æ®µç»“æœä¸ºä»ç„¶ä¸º `2018-5-25 11:00:00`ã€‚\n2. ç»§ç»­ä¸Šé¢çš„æ“ä½œï¼Œé¡¹ç›®ä¸­ä½¿ç”¨æŸ¥è¯¢è¯­å¥æŸ¥è¯¢åˆšæ‰çš„è®°å½•ï¼Œç»“æœæ˜¾ç¤ºä¸º `2018-5-25 11:00:00`ï¼Œå°†é¡¹ç›®æ—¶åŒºä» `CST` æ”¹ä¸º `UTC` åå†æ¬¡æŸ¥è¯¢çš„ç»“æœä»ç„¶ä¸º `2018-5-25 11:00:00` æ²¡æœ‰å˜åŒ–ã€‚\n3. ç»§ç»­ä¸Šé¢çš„æ“ä½œï¼Œå°†æ•°æ®åº“çš„æ—¶åŒºæ”¹ä¸º `+8:00`ï¼Œæ•°æ®åº“å·¥å…·ã€é¡¹ç›®æŸ¥è¯¢åçš„ç»“æœä¸º `2018-5-25 19:00:00` å‘ç”Ÿäº†å˜åŒ–ï¼Œä¿®æ”¹é¡¹ç›®ä¸º `CST` æŸ¥è¯¢ç»“æœæ˜¯ `2018-5-25 19:00:00` å’Œåˆšæ‰ä¸€æ ·ä¹Ÿå˜åŒ–äº†ã€‚\n\nè¿™ä¸ªæµ‹è¯•è¯´æ˜äº†ï¼š\n\n- é¡¹ç›®çš„æ—¶åŒºå½±å“çš„æ˜¯ PHP çš„æ—¶åŒºï¼Œå½±å“çš„æ˜¯ `now()` äº§ç”Ÿçš„æ—¥æœŸæ—¶é—´ã€‚\n- ä¸€ä¸ªæ—¥æœŸæ—¶é—´ä»é¡¹ç›®å­˜å…¥æ•°æ®åº“æ—¶ï¼Œè¿™ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶åŒºæ˜¯æ•°æ®åº“è®¾ç½®çš„æ—¶åŒºï¼Œå’Œé¡¹ç›®æ— å…³äº†ã€‚ä¼ å…¥ä»€ä¹ˆæ ·å­æ•°æ®åº“å­˜ä»€ä¹ˆæ ·å­ï¼Œæ›´æ¢äº†å‚ç…§ç³»ï¼Œä½†æ˜¯æ²¡æœ‰è½¬æ¢æ—¥æœŸæ—¶é—´ã€‚\n- ä»æ•°æ®åº“ä¸­è¯»ä¸€ä¸ªæ—¶é—´æˆ³æ—¥æœŸæ—¶é—´ï¼Œè¿™ä¸ªæ˜¯æ—¶é—´æˆ³æ—¥æœŸæ—¶é—´å—åˆ°æ•°æ®åº“çš„æ—¶åŒºå½±å“ï¼Œå’Œé¡¹ç›®çš„æ—¶åŒºæ— å…³ã€‚\n\næˆ‘ç°åœ¨è®¤è¯†çš„ç»“è®ºï¼š\n\n- å› ä¸ºæ•°æ®åº“æ—¶åŒºä¸å¯èƒ½è½»æ˜“æ”¹å˜ï¼Œæ‰€ä»¥ä¾é æ•°æ®åº“è½¬æ¢æ—¶åŒºä¸å¯èƒ½ã€‚\n- æ²¡çœ‹å‡ºæ¥æ—¶é—´æˆ³å¯¹äºå¤„ç†æ—¶åŒºå¯¹ `datatime` æœ‰ä»€ä¹ˆè¿‡äººä¹‹å¤„ï¼Œè‹¥æœ‰å°±æ˜¯æ—¶é—´æˆ³å°†æ—¶é—´æ ‡å‡†è®¾ç½®åœ¨äº† `UTC`ï¼Œå  4 å­—èŠ‚æ›´å°äº›ã€‚\n- æ•°æ®åº“æ—¶åŒºå’Œé¡¹ç›®æ—¶åŒºä¸ä¸€è‡´å¯èƒ½ä¼šå‘ï¼Œå¦‚æœä¸€ç›´ä¸ä¸€è‡´åŒæ—¶å„ä¸ªé¡¹ç›®ä¹Ÿä¸€ç›´é”™ä¸‹å»ï¼Œæ²¡ä¸ä¼šæœ‰å¯Ÿè§‰ã€‚\n- å¯¹åº”å›½é™…åŒ–é¡¹ç›®ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥å°†æ•°æ®åº“å’Œé¡¹ç›®è¿˜æœ‰æœåŠ¡å™¨éƒ½è®¾ç½®ä¸º `UTC`ï¼Ÿè°ä½¿ç”¨è°æ ¹æ®ç”¨æˆ·çš„æ—¶åŒºè¿›è¡Œå¤„ç†ã€‚\n\n## ä½¿ç”¨ timestamp ä¸ datetime\n\n`datetime` å­—æ®µç±»å‹å­˜å‚¨çš„æ—¶é—´ä¸ä¼šéšæ—¶é—´åº“æ—¶åŒºå‘ç”Ÿå˜åŒ–ï¼Œå  8 ä¸ªå­—èŠ‚ï¼Œå¯å­˜å‚¨ `1000-01-01 00:00:00` åˆ° `9999-12-31 23:59:59`ã€‚è€Œæ—¶é—´æˆ³åªèƒ½å­˜å‚¨ `1970` å¹´åˆ° `2038` å¹´å¤šï¼Œ`2038` è¿˜æœ‰ 20 å¹´æ€ä¹ˆæ„Ÿè§‰é©¬ä¸Šå°±åˆ°äº†ã€‚\n\n`datetime` ä¸ªäººæ¨èçš„å­˜å‚¨æ—¶é—´çš„æ ¼å¼ã€‚\n\n## æ—¶åŒºå¤„ç†å¸¸è§é—®é¢˜\n\nåŒ—äº¬ç”¨æˆ·åœ¨åŒ—äº¬æ—¶é—´ `2018-05-27 10:00:00` å‘å¸ƒä¸€ä¸ªæ–‡ç« ã€‚\n\nå¦‚æœåœ¨å‰ç«¯å‘å¸ƒæ—¥æœŸæ—¶é—´ä¸º `2018-05-27 10:00:00`ï¼Œåœ¨åŒ—äº¬ç”¨æˆ·çœ‹æ¥æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨ç¾å›½çš„ç”¨æˆ·çœ‹æ¥æ˜¯å¥‡æ€ªçš„ï¼Œå› ä¸ºç¾å›½æ²¡æœ‰åˆ° `2018-05-27 10:00:00` ä»–ä»¬ç”šè‡³è¿˜åœ¨ 26 æ—¥ã€‚\n\nè¿™æ—¶ `1 min ago` è¿™ç§å±•ç¤ºå½¢å¼å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œ`ago` æ˜¯ä¸€ç§ç»å¯¹çš„æ–¹å¼ï¼Œåœ¨ä¸€ä¸ªæœˆä¹‹åå†æ˜¾ç¤ºå®Œæ•´çš„æ—¥æœŸæ—¶é—´ï¼Œæ­¤æ—¶ä¸–ç•Œå„åœ°è‚¯å®šå·²ç»åº¦è¿‡äº†è¿™ä¸ªè¦å±•ç¤ºæ—¥æœŸæ—¶é—´ï¼Œæ— è®ºåœ¨å“ªå›½ç”¨æˆ·æ˜¾ç¤º `2018-05-27 10:00:00` éƒ½ä¸ä¼šå¥‡æ€ªäº†ã€‚\n\nåŒæ—¶ä¹Ÿè¦æ³¨æ„ï¼Œæˆ‘ä»¬å°†å„ä¸ªæ—¶åŒºéƒ½è®¾ç½®ä¸º `UTC` åï¼Œ`ago` çš„æ—¶é—´å¾ˆå¥½è®¡ç®—ï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªæœˆä¹‹åæ—¥å‰æ—¶é—´å®Œå…¨æ˜¾ç¤ºï¼Œç¾å›½ç”¨æˆ·çœ‹åŒ—äº¬ç”¨æˆ·çš„å‘å¸ƒæ—¥æœŸæ—¶é—´ä¹Ÿåº”è¯¥æ˜¯åœ¨ä¸­å›½çœ‹æ¥çš„ `2018-05-27 10:00:00`ï¼Œæ­¤å‘å¸ƒæ—¥æœŸä¸åº”è¯¥ä»¥ç¾å›½ç”¨æˆ·ä¸ºæ ‡å‡†ã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•è¿˜åœ¨è€ƒè™‘ï¼Œæ—¥æœŸæ—¶é—´æ˜¯å­˜å‚¨å¤šä¸ªå­—æ®µæ¥åŒºåˆ†ç”¨äºæ˜¾ç¤ºæˆ–æ¯”è¾ƒï¼Œè¿˜æ˜¯è‡ªè¡Œè½¬æ¢å¤„ç†ï¼Œéœ€è¦å®è·µæµ‹è¯•ã€‚\n\n## MySQL æŸ¥çœ‹ã€ä¿®æ”¹æ—¶åŒº\n\n### æŸ¥çœ‹æ—¶åŒº\n\n```\n> select now();   # æˆ– select curtime();\n\n> show variables like \"%time_zone%\"; # SELECT @@global.time_zone, @@session.time_zone;\n+------------------+--------+\n| Variable_name    | Value  |\n+------------------+--------+\n| system_time_zone | CST    |\n| time_zone        | SYSTEM |\n+------------------+--------+\n\n# time_zone è¯´æ˜ mysql ä½¿ç”¨ system çš„æ—¶åŒºï¼Œsystem_time_zone è¯´æ˜ system ä½¿ç”¨ CST æ—¶åŒº\n```\n\n### ä¿®æ”¹æ—¶åŒº\n\n```\n> set global time_zone = '+8:00';  # ä¿®æ”¹ mysql å…¨å±€æ—¶åŒºä¸ºåŒ—äº¬æ—¶é—´ï¼Œå³æˆ‘ä»¬æ‰€åœ¨çš„ä¸œ8åŒº\n> set time_zone = '+8:00';  # ä¿®æ”¹å½“å‰ä¼šè¯æ—¶åŒº SET time_zone = 'Asia/Shanghai'\n> flush privileges;  # ç«‹å³ç”Ÿæ•ˆ\n```\n\né€šè¿‡ä¿®æ”¹ `my.cnf` é…ç½®æ–‡ä»¶æ¥ä¿®æ”¹æ—¶åŒº\n\n```\n# vim /etc/my.cnf\n# åœ¨[mysqld]åŒºåŸŸä¸­åŠ ä¸Š\ndefault-time-zone='+8:00'\n\n# /etc/init.d/mysqld restart  # é‡å¯ mysql ä½¿æ–°æ—¶åŒºç”Ÿæ•ˆ\n```\n\n## æœ€åçš„æ€»ç»“\n\nå…¨çƒåŒ–çš„é¡¹ç›®åº”å½“è€ƒè™‘ï¼š\n\n- é¡¹ç›®ã€æ•°æ®åº“ã€æœåŠ¡å™¨éƒ½å»ºè®®è®¾ç½®ä¸º `UTC`\n- è¦è€ƒè™‘æ—¶åˆ†ç§’çš„å­—æ®µç”¨ `datetime` ç±»å‹ï¼Œä¸ç”¨è€ƒè™‘æ—¶åˆ†ç§’çš„å­—æ®µç”¨ `date`\n- `created_at` å’Œ `updated_at` å­—æ®µï¼Œè€ƒè™‘ `Laravel` æ¡†æ¶çš„ç‰¹ç‚¹ä½¿ç”¨ `timestamp`\n\n## References\n\n- [mysql ä¿®æ”¹æ—¶åŒºçš„å‡ ç§æ–¹æ³•](http://coolnull.com/4091.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"NGINX ç¦æ­¢ IP è®¿é—®","url":"/2018/05/20/nginx-ip-forbidden/","content":"\nç¦æ­¢ IP è®¿é—®ï¼Œå…¶ä»–åŸŸåè·³è½¬åˆ° `www.xxx.com`ï¼š\n\n```nginx\nserver {\n    listen 80;\n    server_name 55.66.77.88;\n    deny all;\n}\n\nserver {\n    listen 80;\n    server_name www.xxx.com xxx.com;\n\n    return 301 https://www.xxx.com$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n\n    ...\n\n    if ($host = 55.66.77.88) {\n        return 403;\n    }\n    if ($host != 'www.xxx.com'){\n        rewrite ^/(.*)$ https://www.xxx.com/$1 permanent;\n    }\n\n    ...\n}\n```\n\n-- EOF --\n","tags":["nginx"]},{"title":"ã€Laravel æ•™ç¨‹ - Web å¼€å‘å®æˆ˜å…¥é—¨ã€‘è¯»ä¹¦ç¬”è®°","url":"/2018/05/09/laravel-essential-training-reading-notes/","content":"\n[Laravel æ•™ç¨‹ - Web å¼€å‘å®æˆ˜å…¥é—¨](https://laravel-china.org/courses?rf=10678) è¯»ä¹¦ç¬”è®°ã€‚\n\n## åŸºç¡€ä¿¡æ¯\n\n### Laravel ä¸ PHP\n\n`Ruby on Rails` æœ‰ä»¥ä¸‹åŸåˆ™ï¼š\n\n- å¼ºè°ƒä¸æ³¨é‡æ•æ·å¼€å‘ï¼›\n- çº¦å®šé«˜äºé…ç½®ï¼ˆConvention over configurationï¼‰ï¼›\n- DRYï¼ˆDon't repeat yourselfï¼‰ä¸è¦é‡å¤è‡ªå·±ï¼Œæå€¡ä»£ç é‡ç”¨ï¼›\n- é‡è§†ã€Œç¼–ç æ„‰æ‚¦æ€§ã€ã€‚\n\n### å¦‚ä½•æ­£ç¡®é˜…è¯»æœ¬ä¹¦\n\néšåä½ ä¼šæœ‰å¾ˆå¤šæœºä¼šæ¥å­¦ä¹ å®ƒä»¬ã€‚ç°åœ¨æœ€é‡è¦çš„æ˜¯ä¿æŒã€è®­ç»ƒã€çš„è¿è´¯æ€§ã€‚\n\nç¼–ç¨‹æ˜¯æŠ€èƒ½ï¼Œä¸æ˜¯çŸ¥è¯†ï¼ŒæŠ€èƒ½åªæœ‰åœ¨ä¸æ–­åˆ»æ„ç»ƒä¹ ä¸‹æ‰ä¼šæœ‰è¿›æ­¥ã€‚\n\n<!-- more -->\n\n## å¼€å‘ç¯å¢ƒå¸ƒç½®\n\n### ç¬¬ä¸€ä¸ªåº”ç”¨\n\n```bash\n$ composer create-project laravel/laravel Laravel --prefer-dist \"5.5.*\"\n```\n\n### Git ä¸ GitHub\n\nè®¾ç½® push çš„é»˜è®¤æ¨¡å¼ä¸º simple\n\n```bash\n$ git config --global push.default simple\n```\n\n### éƒ¨ç½²ä¸Šçº¿\n\næ³¨å†Œ Heroku åï¼š\n\n```bash\n$ heroku login\n\n# æ·»åŠ  SSH Key åˆ° Heroku ä¸Š\n$ heroku keys:add\n\n# åˆ›å»ºé…ç½®æ–‡ä»¶æ¥å‘Šè¯‰ Heroku åº”å½“ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤æ¥å¯åŠ¨ Web æœåŠ¡å™¨\n$ echo web: vendor/bin/heroku-php-apache2 public/ > Procfile\n$ git add -A\n$ git commit -m \"Procfile for Heroku\"\n\n# åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨\n$ heroku create\n\n# å¯¹åº”ç”¨åç§°è¿›è¡Œæ›´æ”¹ï¼Œä¿è¯æœªè¢«å…¶å®ƒäººå ç”¨\n$ heroku rename imzyf-laravel-essential\n\n# å£°æ˜åº”ç”¨æ˜¯ç”¨ PHP å†™çš„\n$ heroku buildpacks:set heroku/php\n\n# è®¾ç½® APP key\n$ php artisan key:generate\n$ heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA=\n\n# éƒ¨ç½²ä¸Šçº¿\n$ git push heroku master\n\n# å¿«é€Ÿæ‰“å¼€çº¿ä¸Šåº”ç”¨\n$ heroku open\n\n# è¾“å‡ºç”Ÿäº§ç¯å¢ƒä¸Šçš„æ—¥å¿—\n$ heroku logs\n```\n\n## æ„å»ºé¡µé¢\n\n### é™æ€é¡µé¢\n\nç”Ÿæˆé™æ€é¡µé¢æ§åˆ¶å™¨ï¼š\n\n```bash\n$ php artisan make:controller StaticPagesController\n```\n\n## é¡µé¢ä¼˜åŒ–\n\n### æ ·å¼ç¾åŒ–\n\n```bash\n# å‡çº§ yarn\n$ brew  upgrade yarn\n\n$ yarn install --no-bin-links\n$ yarn add cross-env\n```\n\næ¯æ¬¡æ£€æµ‹åˆ° `.scss` æ–‡ä»¶å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œè‡ªåŠ¨å°†å…¶ç¼–è¯‘ä¸º `.css` æ–‡ä»¶ï¼š\n\n```bash\n$ npm run watch-poll\n```\n\n### Laravel å‰ç«¯å·¥ä½œæµ\n\nLaravel Mix ä¸€æ¬¾å‰ç«¯ä»»åŠ¡è‡ªåŠ¨åŒ–ç®¡ç†å·¥å…·ã€‚Mix æä¾›äº†ç®€æ´æµç•…çš„ APIï¼Œè®©ä½ èƒ½å¤Ÿä¸ºä½ çš„ Laravel åº”ç”¨å®šä¹‰ Webpack ç¼–è¯‘ä»»åŠ¡ã€‚\n\n`_header.blade.php` ä¸ºå±€éƒ¨è§†å›¾å¢åŠ å‰ç¼€ä¸‹åˆ’çº¿æ˜¯ã€çº¦å®šä¿—æˆã€çš„åšæ³•ã€‚\n\n### å¸ƒå±€ä¸­çš„é“¾æ¥\n\n```bash\n<li><a href=\"/help\">å¸®åŠ©</a></li>\n\n// å¯ä»¥æ”¹å†™ä¸º\n\n<li><a href=\"{{ route('help') }}\">å¸®åŠ©</a></li>\n```\n\nè·¯ç”±ä¸­ä¿®æ”¹ï¼š\n\n```bash\nRoute::get('/help', 'StaticPagesController@help')->name('help');\n```\n\n`route('help')` å°†è¢«æ¸²æŸ“ä¸º `http://sample.test/help`ã€‚\n\n## ç”¨æˆ·æ¨¡å‹\n\n### æ•°æ®åº“è¿ç§»\n\n- å½“æˆ‘ä»¬è¿è¡Œè¿ç§»æ—¶ï¼Œ`up` æ–¹æ³•ä¼šè¢«è°ƒç”¨\n- å½“æˆ‘ä»¬å›æ»šè¿ç§»æ—¶ï¼Œ`down` æ–¹æ³•ä¼šè¢«è°ƒç”¨\n\n### æŸ¥çœ‹æ•°æ®åº“è¡¨\n\n```bash\n$ php artisan migrate\n\n# å›æ»š\n$ php artisan migrate:rollback\n```\n\n### æ¨¡å‹æ–‡ä»¶\n\nåˆ›å»ºæ¨¡å‹å‘½ä»¤æŒ‡å®šå‘½åç©ºé—´ï¼ŒåŒæ—¶é¡ºä¾¿åˆ›å»ºæ•°æ®åº“è¿ç§»ä½¿ç”¨ `--migration` æˆ– `-m` é€‰é¡¹\n\n```\n$ php artisan make:model Models/Article -m\n```\n\nã€çº¦å®šä¼˜äºé…ç½®ã€ï¼ˆconvention over configurationï¼‰ï¼Œä¹Ÿç§°ä½œæŒ‰çº¦å®šç¼–ç¨‹ï¼Œè¿™æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡èŒƒå¼ï¼Œæ—¨åœ¨å‡å°‘è½¯ä»¶å¼€å‘äººå‘˜éœ€åšå†³å®šçš„æ•°é‡ï¼Œè·å¾—ç®€å•çš„å¥½å¤„ï¼Œè€Œåˆä¸å¤±çµæ´»æ€§ã€‚å¦‚æœæ‰€ç”¨å·¥å…·çš„çº¦å®šä¸ä½ çš„æœŸå¾…ç›¸ç¬¦ï¼Œä¾¿å¯çœå»é…ç½®ï¼›åä¹‹ï¼Œä½ å¯ä»¥é…ç½®æ¥è¾¾åˆ°ä½ æ‰€æœŸå¾…çš„æ–¹å¼ã€‚\n\n### åˆ›å»ºç”¨æˆ·å¯¹è±¡\n\n```\n$ php artisan tinker\n\n>>> App\\Models\\User::create(['name'=> 'Aufree', 'email'=>'aufree@yousails.com','password'=>bcrypt('password')])\n```\n\n## ç”¨æˆ·æ³¨å†Œ\n\n### æ˜¾ç¤ºç”¨æˆ·çš„ä¿¡æ¯\n\nLaravel éµä» RESTful æ¶æ„çš„è®¾è®¡åŸåˆ™ï¼Œå°†æ•°æ®çœ‹åšä¸€ä¸ªèµ„æºï¼Œç”± URI æ¥æŒ‡å®šèµ„æºã€‚\n\n```\nRoute::resource('users', 'UsersController');\n\nä¸Šé¢ä»£ç å°†ç­‰åŒäºï¼š\n\nRoute::get('/users', 'UsersController@index')->name('users.index');\nRoute::get('/users/{user}', 'UsersController@show')->name('users.show');\nRoute::get('/users/create', 'UsersController@create')->name('users.create');\nRoute::post('/users', 'UsersController@store')->name('users.store');\nRoute::get('/users/{user}/edit', 'UsersController@edit')->name('users.edit');\nRoute::patch('/users/{user}', 'UsersController@update')->name('users.update');\nRoute::delete('/users/{user}', 'UsersController@destroy')->name('users.destroy');\n```\n\n### æ³¨å†Œè¡¨å•\n\nå…¨å±€è¾…åŠ©å‡½æ•° old æ¥å¸®åŠ©æˆ‘ä»¬åœ¨ Blade æ¨¡æ¿ä¸­æ˜¾ç¤ºæ—§è¾“å…¥æ•°æ®\n\n```\n{{ old('name') }}\n```\n\n### ç”¨æˆ·æ•°æ®éªŒè¯\n\nä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œä¼šè®©æˆ‘ä»¬æä¾›ä¸€ä¸ª tokenï¼ˆä»¤ç‰Œï¼‰æ¥é˜²æ­¢æˆ‘ä»¬çš„åº”ç”¨å—åˆ° CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰çš„æ”»å‡»ã€‚\n\n```\n{{ csrf_field() }}\n```\n\nä¼šè¢«è½¬æ¢ä¸ºï¼š\n\n```\n<input type=\"hidden\" name=\"_token\" value=\"fhcxqT67dNowMoWsAHGGPJOAWJn8x5R5ctSwZrAq\">\n```\n\n### æ³¨å†Œå¤±è´¥é”™è¯¯æ¶ˆæ¯\n\n```\n$ composer require \"overtrue/laravel-lang:~3.0\"\n```\n\n`config/app.php` ä¿®æ”¹ï¼š\n\n```\n    'locale' => 'zh-CN',\n```\n\n### æ³¨å†ŒæˆåŠŸ\n\nä¸´æ—¶ä¿å­˜ç”¨æˆ·æ•°æ®çš„æ–¹æ³• - ä¼šè¯ï¼ˆSessionï¼‰ï¼Œå¹¶é™„å¸¦æ”¯æŒå¤šç§ä¼šè¯åç«¯é©±åŠ¨ï¼Œå¯é€šè¿‡ç»Ÿä¸€çš„ API è¿›è¡Œä½¿ç”¨ã€‚\n\n```\nsession()->flash('success', 'æ¬¢è¿ï¼Œæ‚¨å°†åœ¨è¿™é‡Œå¼€å¯ä¸€æ®µæ–°çš„æ—…ç¨‹~');\n\nsession()->get('success')\n```\n\n## ä¼šè¯ç®¡ç†\n\n### ç”¨æˆ·ç™»å½•\n\n`Auth::check()` æ–¹æ³•ç”¨äºåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ï¼Œå·²ç™»å½•è¿”å› trueï¼Œæœªç™»å½•è¿”å› falseã€‚\n\n### è®°ä½æˆ‘\n\n`Auth::attempt()` æ–¹æ³•å¯æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºéœ€è¦è¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯çš„æ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ˜¯å¦ä¸ºç”¨æˆ·å¼€å¯ã€è®°ä½æˆ‘ã€åŠŸèƒ½çš„å¸ƒå°”å€¼ã€‚\n\n## ç”¨æˆ· CRUD\n\n### æ›´æ–°ç”¨æˆ·\n\n```\n<form method=\"POST\" action=\"{{ route('users.update', $user->id )}}\">\n\n// å°†è½¬ä¸ºï¼š\n\n<form method=\"POST\" action=\"http://sample.test/users/1\">\n```\n\n### æƒé™ç³»ç»Ÿ\n\nåœ¨ Laravel ä¸­å¯ä»¥ä½¿ç”¨ æˆæƒç­–ç•¥ (Policy) æ¥å¯¹ç”¨æˆ·çš„æ“ä½œæƒé™è¿›è¡ŒéªŒè¯ï¼Œåœ¨ç”¨æˆ·æœªç»æˆæƒè¿›è¡Œæ“ä½œæ—¶å°†è¿”å› 403 ç¦æ­¢è®¿é—®çš„å¼‚å¸¸ã€‚\n\n`redirect()` å®ä¾‹æä¾›äº†ä¸€ä¸ª intended æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯å°†é¡µé¢é‡å®šå‘åˆ°ä¸Šä¸€æ¬¡è¯·æ±‚å°è¯•è®¿é—®çš„é¡µé¢ä¸Šï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªé»˜è®¤è·³è½¬åœ°å€å‚æ•°ï¼Œå½“ä¸Šä¸€æ¬¡è¯·æ±‚è®°å½•ä¸ºç©ºæ—¶ï¼Œè·³è½¬åˆ°é»˜è®¤åœ°å€ä¸Šã€‚\n\n```\nreturn redirect()->intended(route('users.show', [Auth::user()]));\n```\n\n### åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·\n\nå‡æ•°æ®çš„ç”Ÿæˆåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š\n\n1. å¯¹è¦ç”Ÿæˆå‡æ•°æ®çš„æ¨¡å‹æŒ‡å®šå­—æ®µè¿›è¡Œèµ‹å€¼ - ã€æ¨¡å‹å·¥å‚ã€\n2. æ‰¹é‡ç”Ÿæˆå‡æ•°æ®æ¨¡å‹ - ã€æ•°æ®å¡«å……ã€\n\næ•°æ®åº“çš„é‡ç½®å’Œå¡«å……æ“ä½œï¼š\n\n```\n$ php artisan migrate:refresh --seed\n```\n\n## é‚®ä»¶å‘é€\n\n### è´¦æˆ·æ¿€æ´»\n\n1. ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œè‡ªåŠ¨ç”Ÿæˆæ¿€æ´»ä»¤ç‰Œ\n1. å°†æ¿€æ´»ä»¤ç‰Œä»¥é“¾æ¥çš„å½¢å¼é™„å¸¦åœ¨æ³¨å†Œé‚®ä»¶é‡Œé¢ï¼Œå¹¶å°†é‚®ä»¶å‘é€åˆ°ç”¨æˆ·çš„æ³¨å†Œé‚®ç®±ä¸Š\n1. ç”¨æˆ·ç‚¹å‡»æ³¨å†Œé“¾æ¥è·³åˆ°æŒ‡å®šè·¯ç”±ï¼Œè·¯ç”±æ”¶åˆ°æ¿€æ´»ä»¤ç‰Œå‚æ•°åæ˜ å°„ç»™ç›¸å…³æ§åˆ¶å™¨åŠ¨ä½œå¤„ç†\n1. æ§åˆ¶å™¨æ‹¿åˆ°æ¿€æ´»ä»¤ç‰Œå¹¶è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åå¯¹è¯¥ç”¨æˆ·è¿›è¡Œæ¿€æ´»ï¼Œå¹¶å°†å…¶æ¿€æ´»çŠ¶æ€è®¾ç½®ä¸ºå·²æ¿€æ´»\n1. ç”¨æˆ·æ¿€æ´»æˆåŠŸï¼Œè‡ªåŠ¨ç™»å½•\n\nä½¿ç”¨ log é‚®ä»¶é©±åŠ¨çš„æ–¹å¼æ¥è°ƒè¯•é‚®ä»¶å‘é€åŠŸèƒ½ï¼Œè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯é‚®ä»¶å¹¶ä¸ä¼šçœŸæ­£è¢«å‘é€å‡ºå»ï¼Œè€Œæ˜¯ä¼šå‡ºç°åœ¨ `storage/logs/laravel.log` æ–‡ä»¶ä¸­ï¼š\n\n```\nMAIL_DRIVER=log\n```\n\n### åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‘é€é‚®ä»¶\n\nQQ é‚®ç®±çš„è´¦å·è®¾ç½®é‡Œå¼€å¯ `POP3` å’Œ `SMTP` æœåŠ¡ã€‚\n\n```\nMAIL_DRIVER=smtp\nMAIL_HOST=smtp.qq.com\nMAIL_PORT=25\nMAIL_USERNAME=xxxxxxxxxxxxxx@qq.com\nMAIL_PASSWORD=xxxxxxxxx // å¯†ç æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ­¥æ‹¿åˆ°çš„æˆæƒç \nMAIL_ENCRYPTION=tls\nMAIL_FROM_ADDRESS=xxxxxxxxxxxxxx@qq.com\nMAIL_FROM_NAME=SampleApp\n```\n\n## å¾®åš CRUD\n\n### æ˜¾ç¤ºå¾®åš\n\n`diffForHumans()` è¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯å°†æ—¥æœŸè¿›è¡Œå‹å¥½åŒ–å¤„ç†ï¼š\n\n```bash\n>>> $created_at->diffForHumans()\n=> \"17 years ago\"\n```\n","tags":["php"]},{"title":"ã€Modern PHPã€‘è¯»ä¹¦ç¬”è®°","url":"/2018/05/08/modern-php-reading-notes/","content":"\nåˆå›åˆ° PHP Web å¼€å‘ï¼Œä½¿ç”¨ Laravel æ¡†æ¶ï¼Œé‡è¯»ã€ŠModern PHPã€‹ã€‚\n\n> PHP æ­£åœ¨é‡ç”Ÿã€‚\n\n## ç‰¹æ€§\n\n### å‘½åç©ºé—´\n\nå£°æ˜å‘½åç©ºé—´ï¼š\n\n```php\n<?php\nnamespace Oreilly\\ModernPHP;\n```\n\nå¯¼å…¥å’Œåˆ«åï¼š\n\n```php\n<?php\nuse Symfony\\Component\\HttpFoundation\\Response as Res;\n\n$r = new Res('Oops', 400);\n$r->send();\n```\n\n<!-- more -->\n\nPHP 5.6 å¼€å§‹å¯ä»¥å¯¼å…¥å‡½æ•°å’Œå¸¸é‡ï¼š\n\n```php\n<?php\nuse func Namespace\\functionName;\nuse constant Namespace\\CONST_NAME;\n\nfunctionName();\necho CONST_NAME;\n```\n\n### ä½¿ç”¨æ¥å£\n\næ¥å£æ˜¯ä¸¤ä¸ª PHP å¯¹è±¡ä¹‹é—´çš„å¥‘çº¦ï¼Œå…¶ç›®çš„ä¸æ˜¯è®©ä¸€ä¸ªå¯¹è±¡ä¾èµ–å¦ä¸€ä¸ªå¯¹è±¡çš„èº«ä»½ï¼Œè€Œæ˜¯ä¾èµ–å¦ä¸€ä¸ªå¯¹è±¡çš„èƒ½åŠ›ã€‚\n\nä½¿ç”¨æ¥å£ç¼–å†™æ›´åŠ çµæ´»ï¼Œèƒ½å§”æ‰˜åˆ«äººå®ç°ç»†èŠ‚ã€‚\n\n### æ€§çŠ¶ trait\n\næ€§çŠ¶æ˜¯ç±»çš„éƒ¨åˆ†å®ç°ï¼Œå¯ä»¥æ··å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªç°æœ‰çš„ PHP ç±»ä¸­ã€‚æ€§çŠ¶æœ‰ä¸¤ä¸ªä½œç”¨ï¼šè¡¨æ˜ç±»å¯ä»¥åšä»€ä¹ˆï¼ˆåƒæ˜¯æ¥å£ï¼‰ï¼›æä¾›æ¨¡å—åŒ–å®ç°ï¼ˆåƒæ˜¯ç±»ï¼‰ã€‚\n\nå¦‚æœæƒ³è®©ä¸¤ä¸ªæ— å…³çš„ PHP ç±»å…·æœ‰ç±»ä¼¼çš„è¡Œä¸ºï¼Œåº”è¯¥æ€ä¹ˆå‘¢ï¼Ÿæ€§çŠ¶å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚æ€§çŠ¶èƒ½æŠŠæ¨¡å—åŒ–çš„å®ç°æ–¹å¼æ³¨å…¥å¤šä¸ªæ— å…³çš„ç±»ä¸­ã€‚è€Œä¸”æ€§çŠ¶è¿˜èƒ½ä¿ƒè¿›ä»£ç çš„é‡ç”¨ã€‚\n\nè¿™ä¸åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œä¸¤ä¸ªæ— å…³çš„ç±»å®ç°è¿™ä¸ªæ¥å£çš„ä¼˜åŠ¿åœ¨äºï¼šä¸ç”¨å†™ç›¸åŒçš„å®ç°ä»£ç ï¼Œç¬¦åˆ DRY åŸåˆ™ã€‚\n\nPHP è§£é‡Šå™¨åœ¨ç¼–è¯‘æ—¶ä¼šæŠŠæ€§çŠ¶å¤åˆ¶ç²˜è´´åˆ°ç±»çš„å®šä¹‰ä½“ä¸­ï¼Œä½†æ˜¯ä¸ä¼šå¤„ç†è¿™ä¸ªæ“ä½œå¼•å…¥çš„ä¸å…¼å®¹é—®é¢˜ã€‚å¦‚æœæ€§çŠ¶å‡å®šç±»ä¸­æœ‰ç‰¹å®šçš„å±æ€§å’Œæ–¹æ³•ï¼ˆåœ¨æ€§çŠ¶ä¸­æ²¡æœ‰å®šä¹‰ï¼‰ï¼Œè¦ç¡®ä¿ç›¸åº”çš„ç±»ä¸­æœ‰å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n### ç”Ÿæˆå™¨\n\nGenerator æ˜¯ PHP 5.5.0 å¼•å…¥çš„åŠŸèƒ½ã€‚ç”Ÿæˆå™¨æ˜¯ç®€å•çš„è¿­ä»£å™¨ï¼Œä»…æ­¤è€Œå·²ã€‚\n\nPHP ç”Ÿæˆå™¨ä¸è¦æ±‚ç±»å®ç° Iterator æ¥å£ï¼Œä»è€Œå‡è½»äº†ç±»çš„è´Ÿæ‹…ã€‚ç”Ÿæˆå™¨ä¼šæ ¹æ®éœ€æ±‚è®¡ç®—å¹¶äº§ç”Ÿè¦è¿­ä»£çš„å€¼ã€‚è¿™å¯¹åº”è¯¥çš„æ€§èƒ½æœ‰é‡å¤§å½±å“ã€‚å‡å¦‚æ ‡å‡†çš„ PHP è¿­ä»£å™¨ç»å¸¸åœ¨å†…å­˜ä¸­æ‰§è¡Œè¿­ä»£æ“ä½œï¼Œè¿™è¦é¢„å…ˆè®¡ç®—å‡ºæ•°æ®é›†ï¼Œæ€§èƒ½ä½ï¼›æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨ï¼Œå³æ—¶è®¡ç®—å¹¶äº§å‡ºåç»­å€¼ï¼Œä¸å ç”¨å®è´µçš„å†…å­˜èµ„æºã€‚\n\nPHP ç”Ÿæˆå™¨ä¸èƒ½æ»¡è¶³æ‰€æœ‰è¿­ä»£æ“ä½œçš„éœ€æ±‚ï¼Œå› ä¸ºå¦‚æœä¸æŸ¥è¯¢ï¼Œç”Ÿæˆå™¨æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€ä¸ªè¦è¿­ä»£çš„å€¼æ˜¯ä»€ä¹ˆï¼Œåœ¨ç”Ÿæˆå™¨ä¸­æ— æ³•åé€€å’Œå¿«è¿›ã€‚ç”Ÿæˆå™¨è¿˜æ˜¯ä¸€æ¬¡æ€§ï¼Œæ— æ³•å¤šæ¬¡è¿­ä»£åŒä¸€ä¸ªç”Ÿæˆå™¨ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡å»ºæˆ–å…‹éš†ç”Ÿæˆå™¨ã€‚\n\nPHP ç”Ÿæˆå™¨æ˜¯ PHP å‡½æ•°ï¼Œåªä¸è¿‡è¦åœ¨å‡½æ•°ä¸­ä¸€æ¬¡æˆ–è€…å¤šæ¬¡ä½¿ç”¨ yield å…³é”®å­—ã€‚ç”Ÿæˆå™¨ä»ä¸è¿”å›å€¼ï¼Œå€¼äº§å‡ºå€¼ã€‚\n\n```php\nfunction myGenerator() {\n  yield 'value1';\n  yield 'value2';\n  yield 'value3';\n}\n\nforeach (myGenerator()  as $yieldedValue) {\n   echo $yieldedValue, PHP_EOL;\n}\n\nvalue1\nvalue2\nvalue3\n```\n\nä½¿ç”¨ç”Ÿæˆå™¨å¤„ç† CSVï¼š\n\n```php\nfunction getRows($file) {\n    $handle = fopen($file, 'rb');\n    if ($handle === false) {\n        throw new Exception();\n    }\n    while (feof($handle) === false) {\n        yield fgetcsv($handle);\n    }\n    fclose($handle);\n}\n\nforeach (getRows('data.csv') as $row) {\n   print_r($row);\n}\n```\n\n### é—­åŒ…\n\nç†è®ºä¸Šè®²ï¼Œé—­åŒ…å’ŒåŒ¿åå‡½æ•°æ˜¯ä¸åŒçš„æ¦‚å¿µã€‚ä¸è¿‡ï¼ŒPHP å°†å…¶è§†ä½œç›¸åŒçš„æ¦‚å¿µã€‚\n\n```php\n$closure = function ($name) {\n    return sprintf('Hello %s', $name);\n}\n\necho $closure(\"Josh\");\n```\n\næˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½è°ƒç”¨ \\$closure å˜é‡ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè€Œä¸”é—­åŒ…å¯¹è±¡å®ç°äº† `__invoke()` é­”æœ¯æ–¹æ³•ã€‚åªè¦å˜é‡ååæœ‰()ï¼ŒPHP å°±ä¼šæŸ¥æ‰¾å¹¶è°ƒç”¨ `__invoke()` æ–¹æ³•ã€‚\n\nPHP é—­åŒ…å¸¸è¢«å½“åšå‡½æ•°å’Œæ–¹æ³•çš„å›è°ƒä½¿ç”¨ã€‚\n\n```php\n$numbersPlusOne = array_map(function ($number) {\n    return $number + 1;\n}, [1,2,3]);\n\nprint_r($numbersPlusOne);\n\n// [2,3,4]\n```\n\nåœ¨æœ‰é—­åŒ…ä¹‹å‰ï¼Œåªèƒ½å•ç‹¬åˆ›å»ºå…·åå‡½æ•°ï¼Œç„¶åä½¿ç”¨åç§°å¼•ç”¨é‚£ä¸ªå‡½æ•°ï¼š\n\n```php\n$numbersPlusOne = array_map('incrementNumber', [1,2,3]);\n// å¦‚æœåªéœ€è¦ä½¿ç”¨ä¸€æ¬¡å›è°ƒï¼Œæ²¡å¿…è¦å•ç‹¬å®šä¹‰ã€‚æŠŠé—­åŒ…å½“æˆå›è°ƒä½¿ç”¨ï¼Œå†™å‡ºçš„ä»£ç æ›´æ•´æ´ã€æ›´æ¸…æ™°ã€‚\n```\n\nä½¿ç”¨ use å…³é”®å­—é™„åŠ é—­åŒ…çŠ¶æ€ï¼š\n\n```php\nfunction enclosePerson($name) {\n    return function ($doCommand) use ($name) {\n        return sprintf('%s, %s', $name, $doCommand);\n    }\n}\n\n// æŠŠå­—ç¬¦ä¸² Clay å°è£…åˆ°é—­åŒ…é‡Œ\n$clay = enclosePerson('Clay');\n\n// ä¼ å…¥å‚æ•°ï¼Œè°ƒç”¨é—­åŒ…\necho $clay('get me sweet tea!');\n\n// \"Clay, get me sweet tea!\"\n```\n\nå…·åå‡½æ•° enclosePerson() æœ‰ä¸ªåä¸º $name çš„å‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªé—­åŒ…å¯¹è±¡ï¼Œè€Œä¸”è¿™ä¸ªé—­åŒ…å°è£…äº† $name å‚æ•°ã€‚å³ä¾¿è¿”å›çš„é—­åŒ…å¯¹è±¡è·³å‡ºäº† enclosePerson() å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå®ƒä¹Ÿä¼šè®°ä½ $name å‚æ•°çš„å€¼ï¼Œå› ä¸º $name å˜é‡ä»åœ¨é—­åŒ…ä¸­ã€‚\n\nPHP é—­åŒ…æ˜¯å¯¹è±¡ã€‚é—­åŒ…å¯¹è±¡çš„é»˜è®¤çŠ¶æ€æ²¡ä»€ä¹ˆç”¨ï¼Œä¸è¿‡æœ‰ä¸€ä¸ª `__invoke()` é­”æœ¯æ–¹æ³•å’Œ `bindTo()` æ–¹æ³•ã€‚\n\n### Zend OPcache\n\nå­—èŠ‚ç ç¼“å­˜èƒ½å­˜å‚¨é¢„å…ˆç¼–è¯‘å¥½çš„ PHP å­—èŠ‚ç ã€‚è¿™æ„å‘³ç€ï¼Œè¯·æ±‚ PHP è„šæœ¬æ—¶ï¼ŒPHP è§£é‡Šå™¨ä¸ç”¨æ¯æ¬¡éƒ½è¯»å–ã€è§£æå’Œç¼–è¯‘ PHP ä»£ç ã€‚\n\n### å†…ç½®çš„ HTTP æœåŠ¡å™¨\n\nå¯åŠ¨è¿™ä¸ªæœåŠ¡å™¨ï¼š\n\n```php\nphp -S localhost:4000\n\n// è®© PHP Web æœåŠ¡å™¨ç›‘å¬æ‰€æœ‰æ¥å£\nphp -S 0.0.0.0:4000\n```\n\n## æ ‡å‡†\n\n### PSR æ˜¯ä»€ä¹ˆ\n\nPHP Standards Recommendation.\n\n- PSR-1 åŸºæœ¬çš„ä»£ç é£æ ¼\n- PSR-2 ä¸¥æ ¼çš„ä»£ç é£æ ¼\n- PSR-3 æ—¥å¿—è®°å½•å™¨æ¥å£\n- PSR-4 è‡ªåŠ¨åŠ è½½\n\n## ç»„ä»¶\n\n### æŸ¥æ‰¾ç»„ä»¶\n\n- [Awesome PHP](https://github.com/ziadoz/awesome-php#text-editors-and-ides)\n- [Packagist](https://packagist.org)\n\n## è‰¯å¥½å®è·µ\n\n### æµ\n\næµå¼æ•°æ®çš„ç§ç±»å„å¼‚ï¼Œæ¯ç§ç±»å‹éœ€è¦ç‹¬ç‰¹çš„åè®®ï¼Œä»¥ä¾¿è¯»å†™æ•°æ®ã€‚ç§°è¿™äº›åè®®ä¸ºæµå°è£…åè®®ã€‚\n\n1. å¼€å§‹é€šä¿¡\n2. è¯»å–æ•°æ®\n3. å†™å…¥æ•°æ®\n4. ç»“æŸé€šä¿¡\n\næŒ‡å®šåè®®å’Œç›®æ ‡çš„æ–¹æ³•æ˜¯ä½¿ç”¨æµæ ‡è¯†ç¬¦ï¼š\n\n`<scheme>://<target>`\n\nä½¿ç”¨ HTTP æµå°è£…åè®®åˆ›å»ºäº†ä¸€ä¸ªä¸ Flickr API é€šä¿¡çš„ PHP æµï¼š\n\n```php\n<?php\n$json = file_get_contents(\n    'http://api.flickr.com/services/feeds/photos_public.gne?format=json'\n);\n```\n\nä¸è¦è¯¯ä»¥ä¸ºè¿™æ˜¯æ™®é€šçš„ç½‘é¡µ URLï¼Œfile_get_contents() å‡½æ•°çš„å­—ç¬¦ä¸²å‚æ•°å…¶å®æ˜¯ä¸€ä¸ªæµæ ‡è¯†ç¬¦ã€‚http åè®®ä¼šè®© PHP ä½¿ç”¨ HTTP æµå°è£…åè®®ã€‚åœ¨è¿™ä¸ªå‚æ•°ä¸­ï¼Œhttp ä¹‹åæ˜¯æµçš„ç›®æ ‡ã€‚å¾ˆå¤š PHP å¼€å‘è€…ä¸çŸ¥é“æ™®é€šçš„ URL å…¶å®æ˜¯ PHP æµå°è£…åè®®æ ‡è¯†çš„ä¼ªè£…ã€‚\n\næˆ‘ä»¬ä½¿ç”¨ file_get_contents() fopen() fwrite() å’Œ fclose() å‡½æ•°è¯»å†™æ–‡ä»¶ç³»ç»Ÿã€‚å› ä¸º PHP é»˜è®¤ä½¿ç”¨çš„æµå°è£…åè®®æ˜¯ file://ï¼Œä½¿ç”¨æˆ‘ä»¬å¾ˆå°‘è®¤ä¸ºè¿™äº›å‡½æ•°ä½¿ç”¨çš„æ˜¯ PHP æµã€‚\n\néšå¼ä½¿ç”¨ file:// æµå°è£…åè®®ï¼š\n\n```php\n$handle = fopen('/etc/hosts', 'rb');\nwhile (feof($handle) !== ture) {\n    echo fgets($handle);\n}\nfclose($handle);\n```\n\næ˜¾ç¤ºä½¿ç”¨ file:// æµå°è£…åè®®ï¼š\n\n```php\n...\n$handle = fopen('file://etc/hosts', 'rb');\n...\n```\n\næˆ‘ä»¬é€šå¸¸ä¼šçœç•¥ file:// å°è£…åè®®ï¼Œè¿™æ˜¯ PHP ä½¿ç”¨çš„é»˜è®¤å€¼ã€‚\n\nç¼–å†™å‘½ä»¤è¡Œè„šæœ¬çš„ PHP å¼€å‘è€…ä¼šæ„Ÿæ¿€ php:// æµå°è£…åè®®ã€‚è¿™ä¸ªæµå°è£…åè®®çš„ä½œç”¨æ˜¯ä¸ PHP è„šæœ¬çš„æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯æ–‡ä»¶ææè¿°ç¬¦é€šä¿¡ã€‚\n\nphp://stdin åªè¯» PHP æµï¼Œå…¶ä¸­çš„æ•°æ®æ¥è‡ªæ ‡å‡†è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œæ¥æ”¶å‘½ä»¤è¡Œä¼ å…¥è„šæœ¬çš„ä¿¡æ¯ã€‚\n\nphp://stdout æŠŠæ•°æ®å†™å…¥å½“å‰çš„ç¼“å†²åŒºã€‚è¿™ä¸ªæµåªèƒ½å†™ï¼Œæ— æ³•è¯»æˆ–å¯»å€ã€‚\n\nphp://memory ä»ç³»ç»Ÿå†…å­˜ä¸­è¯»å–æ•°æ®ï¼Œæˆ–è€…æŠŠæ•°æ®å†™å…¥ç³»ç»Ÿå†…å­˜ã€‚ç¼ºç‚¹æ˜¯ï¼Œå¯ç”¨å†…å­˜æ˜¯æœ‰é™çš„ã€‚ä½¿ç”¨ php://temp æµæ›´å®‰å…¨ã€‚\n\nphp://temp å’Œ php://memory ç±»ä¼¼ï¼Œä¸è¿‡æ²¡æœ‰å¯ä»¥å†…å­˜æ—¶ï¼ŒPHP ä¼šæŠŠæ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶ã€‚\n\n### é”™è¯¯å’Œå¼‚å¸¸\n\næåˆ°äº† [Monolog](https://github.com/Seldaek/monolog) è®°å½•æ—¥å¿—ã€‚\n\n## è°ƒä¼˜\n\n### å†…å­˜\n\n_ä¸€å…±èƒ½åˆ†é…ç»™ PHP å¤šå°‘å†…å­˜ï¼Ÿ_\n\nLinode 2GB çš„ sever ç•™ 512MB ç»™ PHPã€‚\n\n_å•ä¸ª PHP è¿›ç¨‹å¹³å‡æ¶ˆè€—å¤šå°‘å†…å­˜ï¼Ÿ_\n\nä½¿ç”¨ top å‘½ä»¤æŸ¥çœ‹ã€‚ä¸€èˆ¬ PHP è¿›ç¨‹æ¶ˆè€— 5 ~ 20MB å†…å­˜ã€‚\n\n_èƒ½è´Ÿæ‹…çš„èµ·å¤šå°‘ä¸ª PHP-FPM è¿›ç¨‹ï¼Ÿ_\n\nå‡è®¾ PHP åˆ†é…äº† 512MB å†…å­˜ï¼Œæ¯ä¸ª PHP å¹³å‡æ¶ˆè€— 15MB å†…å­˜ï¼Œä»è€Œç¡®å®šèƒ½è´Ÿæ‹…çš„èµ· 34 ä¸ªè¿›ç¨‹ã€‚\n\nå‹åŠ›æµ‹è¯•å·¥å…·ï¼š\n\n- [ab - Apache HTTP server benchmarking tool](https://httpd.apache.org/docs/2.4/programs/ab.html)\n- [Siege](https://www.joedog.org/siege-home/)\n\n### Zend OPcache\n\n```php\nopcache.memory_consumption = 64\n# ä¸ºæ“ä½œç ç¼“å­˜åˆ†é…çš„å†…å­˜é‡ï¼ˆå•ä½ MBï¼‰ã€‚\n\nopcache.interned_strings_buffer = 16\n# ç”¨æ¥å­˜å‚¨é©»ç•™å­—ç¬¦ä¸²çš„å†…å­˜é‡ï¼ˆå•ä½ MBï¼Œé»˜è®¤ 4MBï¼‰ã€‚\n\nopcache.max_accelerated_file = 4000\n# æ“ä½œç ç¼“å­˜ä¸­æœ€å¤šèƒ½å­˜å‚¨å¤šå°‘ä¸ª PHP è„šæœ¬ã€‚è¿™ä¸ªå€¼ä¸€å®šæ¯” PHP åº”ç”¨ä¸­çš„æ–‡ä»¶æ•°é‡å¤§ã€‚\n\nopcache.validate_timestamps = 1\n# ä¸º 1 æ—¶ï¼Œä¸€æ®µæ—¶é—´å PHP ä¼šæ£€æŸ¥ PHP è„šæœ¬çš„å†…å®¹æ˜¯å¦å˜åŒ–ã€‚æ£€æŸ¥çš„æ—¶é—´é—´éš”ç”± revalidate_freq æŒ‡å®šã€‚\n# å¼€å‘ç¯å¢ƒè®¾ä¸º 1ï¼Œåœ¨ç”Ÿæˆç¯å¢ƒä¸­ä¸º 0ã€‚\n\nopcache.revalidate_freq = 0\n# è®¾ç½®å¤šä¹…æ£€æŸ¥ä¸€æ¬¡ PHP è„šæœ¬çš„å†…å®¹æ˜¯å¦æœ‰å˜åŒ–ã€‚\n\nopcache.fast_shutdown = 1\n# è¿™ä¹ˆè®¾ç½®èƒ½è®©æ“ä½œç ä½¿ç”¨æ›´å¿«çš„åœæœºæ­¥éª¤ï¼ŒæŠŠå¯¹è±¡ææ„å’Œå†…å­˜é‡Šæ”¾äº¤ç»™ Zend Engine çš„å†…å­˜ç®¡ç†å™¨å®Œæˆã€‚\n```\n\n### æ–‡ä»¶ä¸Šä¼ \n\n```php\nfile_uploads = 1\nupload_max_filesize = 10M\nmax_file_uploads = 3\n```\n\nå¦‚æœéœ€è¦ä¸Šä¼ éå¸¸å¤§çš„æ–‡ä»¶ï¼Œè¿˜è¦è°ƒæ•´ nginx è™šæ‹Ÿä¸»æœºé…ç½®ä¸­çš„ client_max_body_size è®¾ç½®ã€‚\n\n### ä¼šè¯å¤„ç†\n\n```php\nsession.save_handler = 'memcached'\nsession.save_path = '127.0.0.2:11211'\n```\n\n### ç¼“å†²è¾“å‡º\n\n```php\noutput_buffering = 4096\nimplicit_flush = false\n```\n\nç¡®ä¿ä½¿ç”¨çš„å€¼æ˜¯ 4ï¼ˆ32 ä½ç³»ç»Ÿï¼‰æˆ–è€… 8ï¼ˆ64 ä½ç³»ç»Ÿï¼‰çš„å€æ•°ã€‚\n\n### çœŸå®è·¯å¾„ç¼“å­˜\n\nrealpath cacheï¼ŒPHP ä¼šç¼“å­˜åº”ç”¨ä½¿ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™æ ·æ¯æ¬¡åŒ…å«æˆ–è€…å¯¼å…¥æ–‡ä»¶æ—¶å°±æ— éœ€ä¸æ–­æœç´¢åŒ…å«è·¯å¾„äº†ã€‚\n\n```php\nrealpath_cache_size = 64k\n```\n\n## éƒ¨ç½²\n\næåˆ°äº† [Capistrano](http://capistranorb.com/) å¾…ç ”ç©¶ã€‚\n\n## æµ‹è¯•\n\n- PHPUnit\n- Xdebug\n- ä½¿ç”¨ Travis CI æŒç»­æµ‹è¯•\n\n## åˆ†æ\n\n- XHProf è¾ƒæ–°çš„ PHP åº”ç”¨åˆ†æå™¨\n- XHGUI\n- New Relic\n- Blackfire\n\n## HHVM å’Œ Hack\n\nHip-Hop Virtual Machine.\n\nHack æ˜¯ä¸€é—¨å»ºç«‹åœ¨ PHP ä¹‹ä¸Šçš„ç¼–ç¨‹è¯­éŸ³ï¼Œå¼•å…¥äº†é™æ€ç±»å‹ï¼Œæ–°çš„æ•°æ®ç»“æ„å’Œé¢å¤–çš„æ¥å£ï¼ŒåŒæ—¶è¿˜èƒ½å‘åå…¼å®¹ç°æœ‰çš„åŠ¨æ€ç±»å‹ PHP ä»£ç ã€‚\n\nåŠ¨æ€ç±»å‹å’Œé™æ€ç±»å‹ï¼ŒäºŒè€…ä¹‹é—´çš„åŒºåˆ«åœ¨äºä½•æ—¶æ£€æŸ¥ PHP ç±»å‹ã€‚åŠ¨æ€ç±»å‹åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹ï¼Œè€Œé™æ€ç±»å‹åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹ã€‚\n\n-- EOF --\n","tags":["php"]},{"title":"PhpStorm ä½¿ç”¨ç»éªŒ","url":"/2018/05/05/phpstorm-using-experience/","content":"\n> æ–‡ç« åŸºæœ¬é€‚ç”¨äº [Jetbrains å…¨å®¶æ¡¶](https://www.jetbrains.com/)ã€‚\n\n## ä¸»é¢˜é…ç½®\n\nè‡ªå·±ä¸»è¦ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªæ’ä»¶ï¼Œå®‰è£…å¹¶å¯ç”¨ï¼š\n\n- Material Theme UI\n- Atom Material Icons\n\n<!-- more -->\n\nè¿˜æœ‰ä¸ª `One Dark theme` ä½†æ˜¯ `Material Theme UI` å·²ç»åŒ…å«è¿™ä¸ªä¸»é¢˜ã€‚\n\né…ç½®ï¼š\n\n`Preferences > Appearance & Behavior > Appearance` ä¸‹ï¼Œå³ä¾§é…ç½®ï¼š`Theme: Darcula`ï¼Œå‹¾é€‰ `User custom font: .AppleSystemUIFont` `Size: 18`ã€‚\n\n`Preferences > Editor > Font` ä¸‹ï¼Œå³ä¾§é…ç½®ï¼š`Font: Menlo` `Size: 18` `Line spacing: 1.2`ã€‚\n\n`Preferences > Editor > Color Scheme` ä¸‹ï¼Œå³ä¾§é…ç½®ï¼š`Seheme: Atom One Dark(Material)` ç‚¹å‡»å³ä¾§çš„ä¸‰ä¸ªç‚¹ `Duplicate` å¤åˆ¶ä¸€ä»½ã€‚\n\n`Preferences > Editor > Color Scheme > General` ä¸‹ï¼Œå³ä¾§é…ç½®ï¼š\n\n- Editor > Gutter backgroundï¼Œå³ä¾§ `Background: 292929`ï¼ˆè®¾ç½®è¡Œå·èƒŒæ™¯è‰²ï¼‰\n- Editor > Vertical Scrollar > Thumb ä¸ Thumb while scrollingï¼Œå³ä¾§ `Background: 305599C0`ï¼ˆè®¾ç½®å‚ç›´æ»‘å—è‰²ï¼‰\n- Editor > Text > Default textï¼Œå³ä¾§ `Background: 292929`ï¼ˆè®¾ç½®é¢æ¿èƒŒæ™¯è‰²ï¼‰\n\n## ä¼˜ç§€æ’ä»¶æ¨è\n\n- PHP Annotation\n- Php Inspections â€‹(EA Ultimate)\n- String Manipulation\n\næ¡†æ¶æ”¯æŒï¼š\n\n- Laravel\n- Swoole IDE Helper\n- Symfony Support\n- Yii2 Support\n\n## æŠ€å·§\n\n### å›´ç»•é€‰æ‹©è¾“å…¥\n\nè®¾ç½®é€‰æ‹©äº†ä¸€ä¸ªè¯åï¼Œå†æŒ‰å•å¼•å·æˆ–åŒå¼•å·ï¼Œå°†é€‰ä¸­çš„å•è¯ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚\n\n`Preferences` ä¸­æœç´¢ `Surround Selection on typing quote or brace` å°†å…¶å‹¾é€‰ï¼ˆ`Editor > General > Smart Keys` ä¸‹ï¼‰ã€‚\n\n### å…³é—­æ–‡æ¡£æç¤º\n\né¼ æ ‡æ”¾åœ¨æ–¹æ³•ä¸Šä¼šå‡ºç°æ–‡æ¡£æç¤ºï¼Œæƒ³å…³é—­ã€‚\n\n`Preferences` ä¸­æœç´¢ `Show quick documentation on mouse move` å–æ¶ˆå‹¾é€‰ï¼ˆ`Editor > Code Editing` ä¸‹ï¼‰ã€‚\n\n### ä½¿ç”¨ PHP-CS-Fixer\n\n> [The PHP Coding Standards Fixer](https://github.com/FriendsOfPHP/PHP-CS-Fixer) (PHP CS Fixer) tool fixes your code to follow standards.\n\nå·¥ä½œç¯å¢ƒï¼šMacBookã€‚\n\næ‰“å¼€ PhpStorm `Preferences > Tools > External Tools` æ·»åŠ ï¼š\n\n![180416-use-php-cs-fixer-in-phpstorm-001](https://user-images.githubusercontent.com/9289792/88664953-715fb100-d110-11ea-970e-9dcb72945ebb.png)\n\n- Program: `/usr/local/bin/php-cs-fixer`\n- Arguments: `--verbose fix \"$FileDir$/$FileName$\" --dry-run --rules=@PSR1,@PSR2,@Symfony`ï¼ˆNote that previous verions of PHP-CS-Fixer used --levels instead of --rules. æœªæ‰¾åˆ°ï¼‰\n- Working directory: `$ProjectFileDir$`\n- æˆ‘å–æ¶ˆå‹¾é€‰äº† `Open console for tool output`ï¼Œå¯ä»¥ä¸è¾“å‡ºæ—¥å¿—ä¿¡æ¯\n\nä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œä¿å­˜æ–‡ä»¶æ—¶å°±å¯ä»¥æ ¼å¼åŒ–ï¼Œè®¾ç½®å¿«æ·é”® `Preferences > Keymap > Macros`ï¼š\n\n![180416-use-php-cs-fixer-in-phpstorm-002](https://user-images.githubusercontent.com/9289792/88665170-c996b300-d110-11ea-8acf-62dad3694f2d.png)\n\nè®¾ç½® php-cs-fix å•ç‹¬çš„å¿«æ·é”® `Preferences > Keymap > External Tools`ï¼š\n\n![180416-use-php-cs-fixer-in-phpstorm-003](https://user-images.githubusercontent.com/9289792/80202900-e5de0c00-8658-11ea-826f-b4d058fa2209.png)\n\n### å…³é—­ä¸å¸¸ç”¨çš„æ’ä»¶\n\n`Preferences > Plugins > Installed` å‘ä¸‹æ»šåŠ¨ï¼Œ`Bundled` ä¸­æœ‰ä¸å°‘é¢„è£…ä½†ä¸å¸¸ç”¨çš„å¯ä»¥ç¦æ‰ã€‚\n\n## é‡åˆ°è¿‡çš„ä¸€äº›é—®é¢˜\n\n### æ–‡ä»¶ç±»å‹é”™è¯¯\n\nä¸€ä¸ªæ–‡ä»¶è¢«æ–°å»ºåï¼Œæ˜æ˜æ‰©å±•åæ²¡æœ‰é”™ï¼Œä½†æ˜¯å´æ²¡æœ‰è¯­æ³•é«˜äº®ï¼Œåˆ é™¤æ–‡ä»¶åä¹Ÿä¸è§£å†³é—®é¢˜ã€‚\n\nè§£å†³åŠæ³•ï¼š`Editor > File Types` æ‰¾ `Text` å°†é‡Œé¢æ¶‰åŠçš„æ–‡ä»¶åˆ é™¤æ‰ã€‚\n\n> - [phpstorm æ–‡ä»¶ç±»å‹é”™è¯¯](https://segmentfault.com/q/1010000004495692)\n\n### Undefined function XXX\n\nå‡ºç° PHP çš„åŸç”Ÿæ–¹æ³•æœªå®šä¹‰çš„è­¦å‘Šã€‚\n\nè§£å†³æ–¹æ³•ï¼š`File > Invalidate Caches / Restart`\n\n### Typo: In word XXX\n\næç¤ºå•è¯æ‹¼å†™é”™è¯¯ï¼Œä½†æ˜¯å…¶ä¸­æ²¡æœ‰é—®é¢˜ï¼Œæ¯”å¦‚å…¨æ‹¼çš„åå­—ã€‚\n\nè§£å†³æ–¹æ³•ï¼šoption + enter -> Save to dictionary\n\n> - [Spellchecking | jetbrains](https://www.jetbrains.com/help/phpstorm/spellchecking.html)\n\n### warning: Multiple definitions exists for class\n\nI resolved this by going to `Preferences-> Languages & Frameworks-> PHP`; and then under `Include path`, remove the conflicting path. (In my case a package reference in the vendor directory to a package I was developing inside my Laravel project)\n\n## References\n\n- [æ‰“é€ æ¼‚äº®çš„ PhpStorm ç•Œé¢](https://laravel-china.org/articles/4172/create-beautiful-phpstorm-interface)\n- [å¤§ç‰›ä»¬çš„ PHPstorm ä½¿ç”¨æŠ€å·§å’Œå»ºè®®](http://www.pilishen.com/posts/phpstorm-tips-and-tricks)\n- [Use PHP-CS-Fixer in PHPStorm](https://gist.github.com/nienkedekker/3ddb9ece42233698c0e3f3e42cf1ff34)\n","tags":["php","phpstorm"]},{"title":"ä½¿ç”¨ Let's Encrypt é€šé…ç¬¦è¯ä¹¦","url":"/2018/04/26/lets-encrypt-wildcard-certificates/","content":"\nä¸€ç›´åœ¨ä½¿ç”¨ [Let's Encrypt](https://letsencrypt.org/) çš„å…è´¹ SSL è¯ä¹¦ï¼Œä½†æ˜¯ä¸€ç›´æ²¡åšç¬”è®°ã€‚ä»Šå¤©çœ‹åˆ° Let's Encrypt æ”¯æŒäº†é€šé…ç¬¦è¯ä¹¦ï¼ˆWildcard Certificatesï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´äºŒçº§å­åŸŸåå’Œä¸»åŸŸåå¯ä»¥å…±ç”¨ä¸€ä¸ªè¯ä¹¦ã€‚\n\n<!-- more -->\n\n## ç”³è¯·è¯ä¹¦\n\n```bash\n# ä¸‹è½½è¯ä¹¦ç”³è¯·å®¢æˆ·ç«¯\ncd /opt\ngit clone https://github.com/certbot/certbot\ncd /opt/certbot\n\n# æ³¨æ„é€šé…ç¬¦å¹¶ä¸åŒ…å«ä¸»åŸŸåï¼Œæ‰€ä»¥è¦é…ç½®ä¸¤ä¸ª\n./certbot-auto certonly -d *.zyf.im -d zyf.im --manual --preferred-challenges dns --server \"https://acme-v02.api.letsencrypt.org/directory\"\n```\n\n`-preferred-challenges dns` ä½¿ç”¨ DNS æ–¹å¼æ ¡éªŒåŸŸåæ‰€æœ‰æƒï¼Œæ‰€ä»¥ä¼šé‡åˆ°ï¼š\n\n```bash\n-------------------------------------------------------------------------------\nPlease deploy a DNS TXT record under the name\n_acme-challenge.zyf.im with the following value:\n\nYZ2unEViXH8nYZ2unEViIbW52LhIEViIbW52Lh\n\nBefore continuing, verify the record is deployed.\n-------------------------------------------------------------------------------\nPress Enter to Continue\n```\n\nè¦åœ¨åŸŸåæœåŠ¡å•†é‚£é‡Œå°† `_acme-challenge.zyf.im` é…ç½® DNS TXT è®°å½•ï¼Œä»è€Œæ ¡éªŒåŸŸåæ‰€æœ‰æƒã€‚\n\nä½¿ç”¨ `host -t txt _acme-challenge.zyf.im` éªŒè¯è®°å½•æ˜¯å¦å·²ç»ç”Ÿæ•ˆï¼Œå¦‚æœçœ‹åˆ°å¯¹åº”çš„å€¼ï¼ŒæŒ‰ Enter ç»§ç»­ã€‚\n\n```bash\n...\n - Congratulations!\n...\n```\n\nç”Ÿæˆçš„è¯ä¹¦ä¼šæ”¾ç½®åœ¨ `/etc/letsencrypt/live/`ï¼Œå¯ä»¥ä½¿ç”¨ openssl éªŒè¯ä¸€ä¸‹ï¼š\n\n```bash\n$ openssl x509 -in /etc/letsencrypt/live/zyf.im/cert.pem -noout -text | grep zyf.im\n\nSubject: CN=zyf.im\n        DNS:*.zyf.im DNS:zyf.im\n```\n\n## é…ç½®è¯ä¹¦\n\n```conf\nserver {\n    listen 80;\n    server_name zyf.im design.zyf.im;\n    return 301 https://$host$request_uri;\n}\n```\n\n```conf\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n\n    server_name design.zyf.im;\n    root /project/imzyf;\n    index index.html index.htm;\n\n    ssl_certificate  /etc/letsencrypt/live/zyf.im/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/zyf.im/privkey.pem;\n    ssl_session_timeout 1d;\n\n    # Diffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits\n    ssl_dhparam /etc/nginx/ssl/dhparam.pem;:q!\n\n    # intermediate configuration. tweak to your needs.\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers '...';\n    ssl_prefer_server_ciphers on;\n\n    # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)\n    add_header Strict-Transport-Security max-age=15768000;\n\n    # OCSP Stapling ---\n    # fetch OCSP records from URL in ssl_certificate and cache them\n    ssl_stapling on;\n    ssl_stapling_verify on;\n}\n```\n\n## è¯ä¹¦ç»­æœŸ\n\nè¯ä¹¦çš„æœ‰æ•ˆæœŸåªæœ‰ä¸‰ä¸ªæœˆï¼Œæ‰€ä»¥è¦åˆ©ç”¨ `crontab` å®šæ—¶ç»­æœŸï¼š\n\n```conf\n30 2 * * 1 /opt/certbot/certbot-auto renew >> /var/log/le-renew.log 2>&1\n35 2 * * 1 /etc/init.d/nginx reload\n```\n\n## References\n\n- [é…ç½®ä½¿ç”¨å…è´¹çš„é€šé…ç¬¦è¯ä¹¦](https://blog.laisky.com/p/letsencrypt/)\n\n-- EOF --\n","tags":["nginx"]},{"title":"ä½¿ç”¨ Let's Encrypt é€šé…ç¬¦è¯ä¹¦","url":"/2018/04/26/lets-encrypt-wildcard-certificates/","content":"\nä¸€ç›´åœ¨ä½¿ç”¨ [Let's Encrypt](https://letsencrypt.org/) çš„å…è´¹ SSL è¯ä¹¦ï¼Œä½†æ˜¯ä¸€ç›´æ²¡åšç¬”è®°ã€‚ä»Šå¤©çœ‹åˆ° Let's Encrypt æ”¯æŒäº†é€šé…ç¬¦è¯ä¹¦ï¼ˆWildcard Certificatesï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´äºŒçº§å­åŸŸåå’Œä¸»åŸŸåå¯ä»¥å…±ç”¨ä¸€ä¸ªè¯ä¹¦ã€‚\n\n<!-- more -->\n\n## ç”³è¯·è¯ä¹¦\n\n```bash\n# ä¸‹è½½è¯ä¹¦ç”³è¯·å®¢æˆ·ç«¯\ncd /opt\ngit clone https://github.com/certbot/certbot\ncd /opt/certbot\n\n# æ³¨æ„é€šé…ç¬¦å¹¶ä¸åŒ…å«ä¸»åŸŸåï¼Œæ‰€ä»¥è¦é…ç½®ä¸¤ä¸ª\n./certbot-auto certonly -d *.zyf.im -d zyf.im --manual --preferred-challenges dns --server \"https://acme-v02.api.letsencrypt.org/directory\"\n```\n\n`-preferred-challenges dns` ä½¿ç”¨ DNS æ–¹å¼æ ¡éªŒåŸŸåæ‰€æœ‰æƒï¼Œæ‰€ä»¥ä¼šé‡åˆ°ï¼š\n\n```bash\n-------------------------------------------------------------------------------\nPlease deploy a DNS TXT record under the name\n_acme-challenge.zyf.im with the following value:\n\nYZ2unEViXH8nYZ2unEViIbW52LhIEViIbW52Lh\n\nBefore continuing, verify the record is deployed.\n-------------------------------------------------------------------------------\nPress Enter to Continue\n```\n\nè¦åœ¨åŸŸåæœåŠ¡å•†é‚£é‡Œå°† `_acme-challenge.zyf.im` é…ç½® DNS TXT è®°å½•ï¼Œä»è€Œæ ¡éªŒåŸŸåæ‰€æœ‰æƒã€‚\n\nä½¿ç”¨ `host -t txt _acme-challenge.zyf.im` éªŒè¯è®°å½•æ˜¯å¦å·²ç»ç”Ÿæ•ˆï¼Œå¦‚æœçœ‹åˆ°å¯¹åº”çš„å€¼ï¼ŒæŒ‰ Enter ç»§ç»­ã€‚\n\n```bash\n...\n - Congratulations!\n...\n```\n\nç”Ÿæˆçš„è¯ä¹¦ä¼šæ”¾ç½®åœ¨ `/etc/letsencrypt/live/`ï¼Œå¯ä»¥ä½¿ç”¨ openssl éªŒè¯ä¸€ä¸‹ï¼š\n\n```bash\n$ openssl x509 -in /etc/letsencrypt/live/zyf.im/cert.pem -noout -text | grep zyf.im\n\nSubject: CN=zyf.im\n        DNS:*.zyf.im DNS:zyf.im\n```\n\n## é…ç½®è¯ä¹¦\n\n```conf\nserver {\n    listen 80;\n    server_name zyf.im design.zyf.im;\n    return 301 https://$host$request_uri;\n}\n```\n\n```conf\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n\n    server_name design.zyf.im;\n    root /project/imzyf;\n    index index.html index.htm;\n\n    ssl_certificate  /etc/letsencrypt/live/zyf.im/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/zyf.im/privkey.pem;\n    ssl_session_timeout 1d;\n\n    # Diffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits\n    ssl_dhparam /etc/nginx/ssl/dhparam.pem;:q!\n\n    # intermediate configuration. tweak to your needs.\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers '...';\n    ssl_prefer_server_ciphers on;\n\n    # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)\n    add_header Strict-Transport-Security max-age=15768000;\n\n    # OCSP Stapling ---\n    # fetch OCSP records from URL in ssl_certificate and cache them\n    ssl_stapling on;\n    ssl_stapling_verify on;\n}\n```\n\n## è¯ä¹¦ç»­æœŸ\n\nè¯ä¹¦çš„æœ‰æ•ˆæœŸåªæœ‰ä¸‰ä¸ªæœˆï¼Œæ‰€ä»¥è¦åˆ©ç”¨ `crontab` å®šæ—¶ç»­æœŸï¼š\n\n```conf\n30 2 * * 1 /opt/certbot/certbot-auto renew >> /var/log/le-renew.log 2>&1\n35 2 * * 1 /etc/init.d/nginx reload\n```\n\n## References\n\n- [é…ç½®ä½¿ç”¨å…è´¹çš„é€šé…ç¬¦è¯ä¹¦ | laisky](https://blog.laisky.com/p/letsencrypt/)\n- [æˆ‘æ˜¯å¦‚ä½•å°†ç½‘ç«™å…¨ç«™å¯ç”¨ Https çš„ï¼Ÿ| freehao123](https://www.freehao123.com/quanzhan-https-ssl/)\n\n-- EOF --\n","tags":["nginx"]},{"title":"Docker UFW å¤±æ•ˆ","url":"/2018/04/24/docker-ufw-not-work/","content":"\nä»Šæ—¥é‡åˆ° Docker ä¸­çš„é¡¹ç›®ç»•è¿‡äº†å®¿ä¸»æœº UFW çš„é…ç½®ï¼Œå¯ä»¥è¢«ä»»æ„ IP è®¿é—®ï¼Œç”šæ˜¯å¥‡æ€ªã€‚æŸ¥æ‰¾èµ„æ–™å‘ç°ï¼š\n\nå¦‚æœä½ åœ¨ Linux ä½¿ç”¨ Dockerï¼Œå¾ˆå¯èƒ½ä½ çš„ç³»ç»Ÿé˜²ç«å¢™é™çº§ä¸º Uncomplicated Firewall (UFW)ã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä½ æœ‰ä¸€ç‚¹å¯èƒ½ä¸çŸ¥é“ï¼ŒDocker å’Œ UFW çš„ç»„åˆå¸¦æ¥äº†ä¸€äº›å®‰å…¨é—®é¢˜ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º Docker å®é™…ä¸Šç»•è¿‡äº† UFW å¹¶ç›´æ¥ä¿®æ”¹äº† iptablesï¼Œæ‰€ä»¥ä¸€ä¸ªå®¹å™¨å¯ä»¥ç»‘å®šä¸€ä¸ªç«¯å£ã€‚è¿™å°±æ„å‘³ç€ï¼Œæ‰€æœ‰ä½ è®¾ç½®çš„ UFW è§„åˆ™éƒ½å°†åœ¨ Docker å®¹å™¨ä¸­å¤±æ•ˆã€‚\n\nå¦‚ä½•ä¿®å¤ï¼š\n\n```bash\n$ sudo vi /etc/default/docker\n\n# add the following line:\n\nDOCKER_OPTS=\"--iptables=false\"\n```\n\n<!-- more -->\n\nRestart the docker daemon:\n\n```bash\n$ sudo systemctl restart docker\n\n# or\n\n$ docker/etc/init.d/docker restart\n```\n\n> When a problem arises, it only takes a bit of digging to discover the solution was already there, waiting for you to make it so. Don't let this issue with Docker stop you from using this incredible technology.\n\nç›¸å…³é˜…è¯»ï¼š\n\n- [Ubuntu ä¸‹ä½¿ç”¨ UFW ç®¡ç†é˜²ç«å¢™æœåŠ¡ | Yifans_Z](/2016/10/10/manage-iptables-using-ufw-in-ubuntu/)\n- [docker and ufw serious problems | moby](https://github.com/moby/moby/issues/4737)\n- [æ— è§†ç³»ç»Ÿé˜²ç«å¢™çš„ docker | binss](https://www.binss.me/blog/docker-pass-through-system-firewall/)\n\n## References\n\n- [How to fix the Docker and UFW security flaw | techrepublic](https://www.techrepublic.com/article/how-to-fix-the-docker-and-ufw-security-flaw/)\n\n-- EOF --\n","tags":["docker"]},{"title":"ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆè§„èŒƒ","url":"/2018/04/08/chinese-copywriting-style-guide/","content":"\n2019-12-04 æ›´æ–°ï¼šå‚è€ƒæ–‡æ¡£ [ruanyf/document-style-guide | github](https://github.com/ruanyf/document-style-guide)\n\n2019-05-09 æ›´æ–°ï¼šå‚è€ƒæ–‡æ¡£\n\n- [sparanoid/chinese-copywriting-guidelines](https://github.com/sparanoid/chinese-copywriting-guidelines)\n- [Ant Design Copywriting](https://ant.design/docs/spec/copywriting)\n\n---\n\n> åŸæ–‡è§äºï¼šCoding å¼€æ”¾å¹³å°ï¼Œå› ä¸ºåŸå§‹é“¾æ¥å¤±æ•ˆäº†ï¼Œæ‰€ä»¥è¿›è¡Œè½¬è½½å‘å¸ƒã€‚\n\næœ¬æ–‡æ—¨åœ¨å¸®åŠ©æå‡å¤§å®¶çš„æ–‡æ¡ˆæ’ç‰ˆç´ å…»ï¼Œå½¢æˆè‰¯å¥½çš„æ’ç‰ˆä¹ æƒ¯ã€‚\n\n<!-- more -->\n\n1. åè¯\n   1.1. ä¸“æœ‰åè¯ä½¿ç”¨æ­£ç¡®çš„å¤§å°å†™\n   1.2. é”™è¯¯åŠä¸æ­£å¼çš„ç¼©å†™\n\n2. ç©ºæ ¼\n   2.1. ä¸­è‹±æ–‡æ··æ’æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n   2.2. ä¸­æ–‡å’Œæ•°å­—æ··æ’æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n   2.3. æ•°å­—ä¸å•ä½æ··æ’æ—¶æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n   2.4. é”šæ–‡æœ¬é“¾æ¥å‰åéœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n\n3. æ ‡ç‚¹\n   3.1. ä¸é‡å¤ä½¿ç”¨æ ‡ç‚¹ç¬¦å·\n   3.2. å°½é‡é¿å…ä½¿ç”¨æ„Ÿå¹å·\n\n4. å…¨è§’å’ŒåŠè§’\n   4.1. ä¸­æ–‡ä½¿ç”¨å…¨è§’ä¸­æ–‡æ ‡ç‚¹\n   4.2. æ•°å­—ä½¿ç”¨åŠè§’å­—ç¬¦\n   4.3. å®Œæ•´çš„è‹±æ–‡æ•´å¥ã€ç‰¹æ®Šåè¯ä½¿ç”¨åŠè§’æ ‡ç‚¹\n   4.4. æ¨ªæ’æ–‡ç¨¿ä½¿ç”¨å¼¯å¼•å·\n\n## åè¯\n\n### ä¸“æœ‰åè¯ä½¿ç”¨æ­£ç¡®çš„å¤§å°å†™\n\nCODING æ˜¯å›½å†…ä¸“ä¸šçš„ä¸€ç«™å¼äº‘ç«¯è½¯ä»¶æœåŠ¡å¹³å°ï¼Œæ——ä¸‹æœ‰ä¸¤å¤§äº§å“ï¼šäº‘ç«¯è½¯ä»¶å¼€å‘åä½œå¹³å° â€”â€” Coding.net ï¼ŒåŸºäºäº‘æŠ€æœ¯çš„è½¯ä»¶å¤–åŒ…æœåŠ¡å¹³å° â€”â€” ç å¸‚ã€‚\n\nâ€œCodingâ€ ç‹­ä¹‰ä¸ŠæŒ‡ä»£ Coding.net (äº‘ç«¯è½¯ä»¶å¼€å‘åä½œå¹³å°)ï¼Œå¹¿ä¹‰ä¸ŠæŒ‡ä»£ Coding.net å’Œç å¸‚æ„æˆçš„ä¸€ç«™å¼äº‘ç«¯è½¯ä»¶æœåŠ¡å¹³å°ã€‚\n\næ­£å¼ç”¨æ³•ï¼š\n\n```txt\nCODING æ——ä¸‹çš„äº§å“æœ‰ï¼šCoding.netï¼Œç å¸‚ã€‚\n```\n\néæ­£å¼ç”¨æ³•ï¼š\n\n```txt\nCoding æ——ä¸‹çš„äº§å“æœ‰ï¼šCoding, ç å¸‚ã€‚\n```\n\né”™è¯¯ç”¨æ³•ï¼š\n\n```txt\ncoding æ——ä¸‹çš„äº§å“æœ‰ï¼šcoding, ç å¸‚ã€‚\n```\n\n### é”™è¯¯åŠä¸æ­£å¼çš„ç¼©å†™\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\næˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰ JavaScriptã€HTML5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ Backbone.jsã€AngularJSã€React ç­‰ï¼‰çš„å‰ç«¯å¼€å‘è€…ã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\næˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰ Jsã€H5ï¼Œè‡³å°‘ç†è§£ä¸€ç§æ¡†æ¶ï¼ˆå¦‚ backboneã€angularã€RJS ç­‰ï¼‰çš„ FEDã€‚\n```\n\n## ç©ºæ ¼\n\nâ€œæœ‰ç ”ç©¶æ˜¾ç¤ºï¼Œæ‰“å­—çš„æ—¶å€™ä¸å–œæ¬¢åœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´åŠ ç©ºæ ¼çš„äººï¼Œæ„Ÿæƒ…è·¯éƒ½èµ°å¾—å¾ˆè¾›è‹¦ï¼Œæœ‰ä¸ƒæˆçš„æ¯”ä¾‹ä¼šåœ¨ 34 å²çš„æ—¶å€™è·Ÿè‡ªå·±ä¸çˆ±çš„äººç»“å©šï¼Œè€Œå…¶ä½™ä¸‰æˆçš„äººæœ€ååªèƒ½æŠŠé—äº§ç•™ç»™è‡ªå·±çš„çŒ«ã€‚æ¯•ç«Ÿçˆ±æƒ…è·Ÿä¹¦å†™éƒ½éœ€è¦é€‚æ—¶åœ°ç•™ç™½ã€‚\n\nä¸å¤§å®¶å…±å‹‰ä¹‹ã€‚â€â€”â€”vinta/paranoid-auto-spacing\n\n### ä¸­è‹±æ–‡æ··æ’æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nåœ¨ä½¿ç”¨ Coding ä¹‹å‰éœ€è¦æ³¨å†Œ Codingã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nåœ¨ä½¿ç”¨Codingä¹‹å‰éœ€è¦æ³¨å†ŒCodingã€‚\n\nåœ¨ä½¿ç”¨ Codingä¹‹å‰éœ€è¦æ³¨å†Œ Codingã€‚\n```\n\nä¾‹å¤–ï¼šâ€œè±†ç“£ FMâ€ç­‰äº§å“åè¯ï¼ŒæŒ‰ç…§å®˜æ–¹æ‰€å®šä¹‰çš„æ ¼å¼ä¹¦å†™ã€‚\n\n### ä¸­æ–‡å’Œæ•°å­—æ··æ’æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nCoding ç›®å‰æœ‰ 30 ä¸‡æ³¨å†Œå¼€å‘è€…ã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nCoding ç›®å‰æœ‰30ä¸‡æ³¨å†Œå¼€å‘è€…ã€‚\n\nCoding ç›®å‰æœ‰ 30ä¸‡æ³¨å†Œå¼€å‘è€…ã€‚\n```\n\n### æ•°å­—ä¸å•ä½æ··æ’æ—¶æ—¶éœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nCoding ç”¨æˆ· clone ä»£ç æ—¶çš„é€Ÿåº¦å¯è¾¾åˆ° 10 Mbpsã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nCoding ç”¨æˆ· clone ä»£ç æ—¶çš„é€Ÿåº¦å¯è¾¾åˆ° 10Mbpsã€‚\n\nCoding ç”¨æˆ· clone ä»£ç æ—¶çš„é€Ÿåº¦å¯è¾¾åˆ°10 Mbpsã€‚\n```\n\nä¾‹å¤–ï¼š`Â°ï¼ˆåº¦ï¼‰` `ï¼` `%` ä¸æ•°å­—ä¹‹é—´ä¸éœ€è¦å¢åŠ ç©ºæ ¼ï¼š\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\næ–° MacBook Pro æœ‰ 15% çš„ CPU æ€§èƒ½æå‡ã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\næ–° MacBook Pro æœ‰ 15 % çš„ CPU æ€§èƒ½æå‡ã€‚\n```\n\n### é”šæ–‡æœ¬é“¾æ¥å‰åéœ€è¦å¢åŠ ç©ºæ ¼ä»¥æé«˜å¯è¯»æ€§\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n[ç å¸‚](https://mart.coding.net/) ä¸ºä¸åŒçš„è¡Œä¸šé¢†åŸŸè§£å†³äº†è½¯ä»¶å¼€å‘çš„éœ€æ±‚ã€‚\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n[ç å¸‚](https://mart.coding.net/)ä¸ºä¸åŒçš„è¡Œä¸šé¢†åŸŸè§£å†³äº†è½¯ä»¶å¼€å‘çš„éœ€æ±‚ã€‚\n\n## æ ‡ç‚¹\n\n### ä¸é‡å¤ä½¿ç”¨æ ‡ç‚¹ç¬¦å·\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ 3000 ä¸‡å…ƒçš„äº¤æ˜“é¢ï¼\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ 3000 ä¸‡å…ƒçš„äº¤æ˜“é¢ï¼ï¼ï¼\n```\n\n### å°½é‡é¿å…ä½¿ç”¨æ„Ÿå¹å·\n\næ¨èç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ 3000 ä¸‡å…ƒçš„äº¤æ˜“é¢ã€‚\n```\n\nä¸æ¨èç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ 3000 ä¸‡å…ƒçš„äº¤æ˜“é¢ï¼\n```\n\n## å…¨è§’å’ŒåŠè§’\n\n### ä¸­æ–‡ä½¿ç”¨å…¨è§’ä¸­æ–‡æ ‡ç‚¹\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\næ–°å»ºä¸€ä¸ª Coding å¸æˆ·ï¼ˆå¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼‰ï¼šè¯·è®¿é—® Coding.netï¼Œç‚¹å‡»æ³¨å†ŒæŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰ï¼Œå¹¶æŒ‰å±å¹•ä¸Šæ˜¾ç¤ºçš„è¯´æ˜æ“ä½œã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\næ–°å»ºä¸€ä¸ª Coding å¸æˆ· (å¦‚æœæ‚¨è¿˜æ²¡æœ‰):è¯·è®¿é—® Coding.net,ç‚¹å‡»æ³¨å†ŒæŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰,å¹¶æŒ‰å±å¹•ä¸Šæ˜¾ç¤ºçš„è¯´æ˜æ“ä½œ.\n```\n\n### æ•°å­—ä½¿ç”¨åŠè§’å­—ç¬¦\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ 3000 ä¸‡å…ƒçš„äº¤æ˜“é¢ã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nç å¸‚å·²å®Œæˆ ï¼“ï¼ï¼ï¼ ä¸‡å…ƒçš„äº¤æ˜“é¢ã€‚\n```\n\n### å®Œæ•´çš„è‹±æ–‡æ•´å¥ã€ç‰¹æ®Šåè¯ä½¿ç”¨åŠè§’æ ‡ç‚¹\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nã€ŠHackers & Painters: Big Ideas from the Computer Ageã€‹è¿™æœ¬ä¹¦å¾ˆå¥½çœ‹ã€‚\n\nâ€œDo things that Donâ€™t Scaleâ€ æ˜¾ç„¶å·²æˆä¸ºåˆ›ä¸šå…¬å¸çš„å£å¤´ç¦…ã€‚\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nã€ŠHackersï¼†Paintersï¼šBig Ideas from the Computer Ageã€‹è¿™æœ¬ä¹¦å¾ˆå¥½çœ‹ã€‚\n\nâ€œDo things that Donï¼‡t Scaleâ€ æ˜¾ç„¶å·²æˆä¸ºåˆ›ä¸šå…¬å¸çš„å£å¤´ç¦…ã€‚\n```\n\n### æ¨ªæ’æ–‡ç¨¿ä½¿ç”¨å¼¯å¼•å·\n\næ­£ç¡®ç¤ºä¾‹ï¼š\n\n```txt\nCODING CEO è¯´ï¼šâ€œCODING çš„æ„¿æ™¯æ˜¯ â€˜Coding Anytime Anywhereâ€™ã€‚â€\n```\n\né”™è¯¯ç¤ºä¾‹ï¼š\n\n```txt\nCODING CEO è¯´ï¼šã€ŒCODING çš„æ„¿æ™¯æ˜¯ ã€Coding Anytime Anywhereã€ã€‚ã€\n```\n\næ³¨æ„ï¼š[ã€Šä¸­åäººæ°‘å…±å’Œå›½å›½å®¶æ ‡å‡†æ ‡ç‚¹ç¬¦å·ç”¨æ³•ã€‹](http://www.moe.gov.cn/ewebeditor/uploadfile/2015/01/13/20150113091548267.pdf) æŒ‡å‡ºè¯¥æ ‡å‡†é€‚ç”¨äºæ±‰è¯­ä¹¦é¢è¯­ï¼ˆåŒ…æ‹¬æ±‰è¯­ä¸å¤–è¯­æ··åˆæ’ç‰ˆçš„æ±‰è¯­éƒ¨åˆ†ï¼‰ï¼Œåœ¨å¤§é™†ç®€ä½“ä¸­æ–‡å’Œç¹ä½“ä¸­æ–‡å‡å±äºæ±‰è¯­æ–‡å­—ï¼Œæ¨ªæ’æ–‡ç¨¿å‡ä½¿ç”¨å¼¯å¼•å·ï¼Œè€Œç«–æ’æ–‡ç¨¿æ”¹ç”¨åŒå¼•å· â€œï¹„â€ â€œï¹ƒâ€ å’Œå•å¼•å· â€œï¹‚â€ â€œï¹â€ã€‚\n\n## ç»“è¯­\n\nä»å„ä¸ªå°æ ‡é¢˜å¯ä»¥çœ‹å‡ºï¼šâ€œä»¥æé«˜å¯è¯»æ€§â€ æ˜¯æ’ç‰ˆçš„ç¬¬ä¸€è¦ä¹‰ã€‚æŠ±ç€è¿™ä¸ªæ€è·¯å»ç¼–å†™æ–‡æ¡£ï¼Œè¿™äº›è§„èŒƒå°±ä¸éš¾ç†è§£äº†ã€‚\n\nè¿™ç§è§„å®šåˆ°ç©ºæ ¼çº§åˆ«çš„æ ¼å¼æœ‰æ„ä¹‰å—ï¼Ÿåœ¨æˆ‘çœ‹æ¥è¿™ç§å¯¹æ–‡æ¡£æ’ç‰ˆçš„è‹›æ±‚ä½“ç°äº†ä¸ªäººè¡Œäº‹é£æ ¼ï¼Œå¦‚æœå›¢é˜Ÿæœ‰æ­¤è¦æ±‚ï¼Œå°±æ›´åº”è¯¥ä¸¥æ ¼éµå®ˆã€‚\n\n-- EOF --\n"},{"title":"Swift åˆå§‹åŒ–","url":"/2018/03/31/swift-init/","content":"\nå› ä¸ºè‡ªå·±æ˜¯ç›´æ¥ä» Swift è¿›å…¥çš„ iOS å¼€å‘ï¼ŒSwift ä¸ Objective-C åˆå§‹åŒ–çš„å¯¹æ¯”å°±ä¸å¤šæäº†ã€‚æ„Ÿè§‰ä¸Š Swift åˆå§‹åŒ–çš„æ–¹å¼åƒ Javaï¼Œè‡ªå·±ä¹Ÿåªè¿™æ ·å¥—ç€ Java å»ç†è§£ï¼Œä½†ä¹Ÿå‘ç°äº†ä¸ç›¸åŒçš„åœ°æ–¹ã€‚\n\n## åˆå§‹åŒ–é¡ºåº\n\n```swift\nclass Blog: NSObject {\n    let param: String\n\n    override init() {\n    }\n}\n```\n\nè¿™é‡Œæœ‰æ¡é”™è¯¯ `error: property 'self.param' not initialized at implicitly generated super.init call` è¯´æ˜ï¼š`param` å‚æ•°æ²¡æœ‰åœ¨éšå¼ç”Ÿæˆ `super.init` è°ƒç”¨ä¹‹å‰å®Œæˆåˆå§‹åŒ–ã€‚\n\nSwift ä¸­å¹¶ä¸æ˜¯ä¸è°ƒç”¨ `super.init` è€Œæ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ç”±ç¼–è¯‘å™¨å®Œæˆäº†è¿™ä¸€æ­¥ï¼Œä½†æ˜¯è¦æ±‚è°ƒç”¨ `super.init` ä¹‹å‰è¦å®Œæˆæˆå‘˜å˜é‡çš„åˆå§‹åŒ–ã€‚\n\n<!-- more -->\n\n```swift\nclass Blog: NSObject {\n    let param: String\n\n    override init() {\n        param = \"swift init\"\n    }\n}\n```\n\nå¯¹äºéœ€è¦ä¿®æ”¹çˆ¶ç±»ä¸­æˆå‘˜å˜é‡å€¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨ `super.init` ä¹‹åå†è¿›è¡Œä¿®æ”¹ï¼š\n\n```swift\nclass Cat {\n    var name: String\n\n    init() {\n        name = \"cat\"\n    }\n}\n\nclass Tiger: Cat {\n    let power: Int\n\n    override init() {\n        power = 10\n        super.init()\n        name = \"tiger\"\n    }\n}\n```\n\nSwift ä¸­ç±»çš„åˆå§‹åŒ–é¡ºåºï¼š\n\n1. åˆå§‹åŒ–è‡ªå·±çš„æˆå‘˜å˜é‡ï¼Œå¿…é¡»\n2. è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦‚æ— éœ€ç¬¬ä¸‰æ­¥ï¼Œåˆ™è¿™ä¸€æ­¥ä¹Ÿå¯çœç•¥\n3. ä¿®æ”¹çˆ¶ç±»æˆå‘˜å˜é‡ï¼Œå¯é€‰\n\nè¡¥å……è¯´æ˜ï¼š\n\n- `let` å£°æ˜çš„å¸¸é‡æ˜¯å¯ä»¥åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è¿›è¡Œèµ‹å€¼ï¼ŒSwift ä¸­çš„ init æ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œè¿™ä¸ Objective-C ä¸åŒ\n- å³ä½¿æˆå‘˜å˜é‡æ˜¯å¯é€‰ç±»å‹ï¼Œå¦‚ï¼š`let power: Int?` ä»ç„¶æ˜¯éœ€è¦è¿›è¡Œåˆå§‹åŒ–çš„ï¼Œ`var power: Int?` åˆ™å¯ä»¥ä¸ç”¨\n\n## å…³é”®å­—\n\nä¾‹å­ 1ï¼š\n\n```swift\nclass CustomView: UIView {\n    let param: Int\n\n    override init() { // error 1\n        self.param = 1\n        super.init() // error 2\n    }\n} // error 3\n```\n\nå°†çˆ¶ç±»ä» `NSObject` ä¿®æ”¹ä¸º `UIView`ï¼Œç«Ÿç„¶æ”¶åˆ° 3 æ¡é”™è¯¯ï¼š\n\n1. initializer does not override a **designated** initializer from its superclass\n2. must call a designated initializer of the superclass 'UIView'\n3. **'required'** initializer 'init(coder:)' must be provided by subclass of 'UIView'\n\nä¾‹å­ 2ï¼š\n\n```swift\nclass CustomView: UIView {\n    convenience init(param: Int, frame: CGRect) {\n        super.init(frame: frame) // error\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n}\n```\n\nerrorï¼š\n\n- **convenience** initializer for 'CustomView' must delegate (with 'self.init') rather than chaining to a superclass\n\nä¸Šé¢ä¿©ä¸ªä¾‹å­å‡ºç°äº† 3 ä¸ªå…³é”®å­—ï¼š`designated`ã€`convenience` å’Œ `required`ã€‚\n\n### designated\n\nSwift å®šä¹‰äº†ä¸¤ç§ç±»åˆå§‹åŒ–å™¨ç±»å‹ï¼Œç”¨æ¥ä¿è¯æ‰€æœ‰æˆå‘˜å±æ€§èƒ½å¤Ÿè·å¾—ä¸€ä¸ªåˆå§‹åŒ–å€¼ã€‚å³ designated initializers [i'niÊƒÉ™laizÉ™] å’Œ convenience initializersã€‚\n\n> Designated initializers are the primary initializers for a class. A designated initializer fully initializes all properties introduced by that class and calls an appropriate superclass initializer to continue the initialization process up the superclass chain.\n\n1. primary initializersï¼šdesignated initializers æ˜¯ä¸€ä¸ªç±»çš„ä¸»åˆå§‹åŒ–å™¨ï¼Œç†è®ºä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªç±»åˆå§‹åŒ–çš„å¿…ç»ä¹‹è·¯ã€‚ï¼ˆä¸åŒçš„åˆå§‹åŒ–è·¯å¾„å¯èƒ½è°ƒç”¨ä¸åŒçš„ designated initializersï¼‰\n2. fully initializes all propertiesï¼šå¿…é¡»åœ¨ designated initializers ä¸­å®Œæˆæ‰€æœ‰æˆå‘˜å±æ€§çš„åˆå§‹åŒ–\n3. calls an appropriate superclass initializerï¼šéœ€è¦è°ƒç”¨åˆé€‚çš„çˆ¶ç±»åˆå§‹åŒ–å™¨å®Œæˆåˆå§‹åŒ–ï¼Œä¸èƒ½éšæ„è°ƒç”¨\n\n_åœ¨ Swift ä¸­ designated initializers çš„å†™æ³•å’Œä¸€èˆ¬çš„åˆå§‹åŒ–æ–¹æ³•æ— å¼‚_ï¼ŒSample 1 ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾å» override initï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å°±æ˜¯åœ¨ override ä¸€ä¸ª designated initializersï¼Œç„¶åæˆ‘ä»¬æ”¶åˆ°äº†é”™è¯¯ Initializer does not override a designated initializer from its superclassï¼Œå¯è§æˆ‘ä»¬å¹¶æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ designated initializersï¼Œæˆ‘ä»¬è¿›å…¥çˆ¶ç±» UIViewï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼š\n\n```swift\npublic init(frame: CGRect)\npublic init?(coder aDecoder: NSCoder)\n```\n\nåŸæ¥ï¼Œè¿™ä¸¤ä¸ªç±»æ‰æ˜¯çˆ¶ç±»çš„ designated initializersï¼Œé‚£æˆ‘ä»¬æ”¹æ”¹è¯•è¯•ï¼š\n\n```swift\nclass CustomView: UIView {\n    let param: Int\n\n    override init(frame: CGRect) { // error 1 fixed\n        self.param = 1\n        super.init(frame: frame) // error 2 fixed\n    }\n} // error 3\n```\n\nerror 1 fixed ç”±æ­¤å¯è§ï¼šæˆ‘ä»¬å» override ä¸€ä¸ªä¸æ˜¯ designated initializers çš„åˆå§‹åŒ–å™¨æ—¶ï¼Œæ˜¯ä¸æ»¡è¶³å®šä¹‰ä¸­æ‰€è¯´çš„ primary initializersï¼Œè¿™å°±å¯èƒ½å¯¼è‡´è¿™ä¸ªåˆå§‹åŒ–å™¨ä¸è¢«æ‰§è¡Œï¼Œæˆå‘˜å˜é‡æ²¡æœ‰åˆå§‹åŒ–ï¼Œè¿™æ ·åˆ›å»ºçš„â€œåŠæˆå“â€å®ä¾‹å¯èƒ½å­˜åœ¨ä¸€äº›ä¸å®‰å…¨çš„æƒ…å†µã€‚\n\nç¬¬äºŒæ¡ fully initializes all propertiesï¼Œè¿™ç‚¹æˆ‘ä»¬å¹¶æ²¡æœ‰çŠ¯é”™ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åˆå§‹åŒ–äº† CustomView ç±»ä¸­å¼•å…¥çš„ param å˜é‡ã€‚\n\nç¬¬ä¸‰æ¡ calls an appropriate superclass initializer å¾ˆæ˜æ˜¾å°±å¯¹åº”äº† error 2ï¼Œæˆ‘ä»¬ override init(frame:)ï¼Œé‚£æˆ‘ä»¬å°±å¿…é¡»è°ƒç”¨å¯¹åº”çš„çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•ã€‚\n\nerror 3 æç¤ºæˆ‘ä»¬ init(coder:) æ˜¯ä¸€ä¸ª 'required' initializerï¼Œå­ç±»å¿…é¡»æä¾›\n\n### required\n\n> Write the required modifier before the definition of a class initializer to indicate that every subclass of the class must implement that initializer.\n\né€šè¿‡æ·»åŠ  required å…³é”®å­—å¼ºåˆ¶å­ç±»å¯¹æŸä¸ªåˆå§‹åŒ–æ–¹æ³•è¿›è¡Œé‡å†™ã€‚\n\n```swift\nclass CustomView: UIView {\n    let param: Int\n\n    override init(frame: CGRect) { // error 1 fixed\n        self.param = 1\n        super.init(frame: frame) // error 2 fixed\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n} // error 3 fixed\n```\n\nerror 3 fixed æ’å…¥çš„è¿™ä¸ªæ–¹æ³•å¾ˆå¥‡æ€ªï¼Œæ–¹æ³•ä½“é‡Œç›´æ¥å†™ `fatalError(\"init(coder:) has not been implemented\")`ï¼Œé‚£å²‚ä¸æ˜¯èµ°åˆ°è¿™é‡Œå°± crash äº†ï¼Ÿ\n\ndesignated initializers æ˜¯ä¸€ä¸ªç±»çš„ä¸»åˆå§‹åŒ–å™¨ï¼Œç†è®ºä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªç±»åˆå§‹åŒ–çš„å¿…ç»ä¹‹è·¯ï¼ˆä¸åŒçš„åˆå§‹åŒ–è·¯å¾„å¯èƒ½è°ƒç”¨ä¸åŒçš„ designated initializersï¼‰ï¼Œå…¶å®ï¼Œè¿™ä¸ª `init(coder:)` ä¸ `init(frame: frame)` å°±æ˜¯ä¸åŒçš„åˆå§‹åŒ–è·¯å¾„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ xib æ–¹å¼åˆå§‹åŒ–ä¸€ä¸ª view æ—¶ï¼Œå°±ä¼šèµ°åˆ° init(coder:)ã€‚æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰çœŸæ­£å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œå°±ä¼šå‡ºç° fatal crashã€‚\n\nå®Œæ•´åˆå§‹æ–¹æ¡ˆï¼š\n\n```swift\nclass CustomView: UIView {\n    let param: Int\n\n    override init(frame: CGRect) {\n        self.param = 1\n        super.init(frame: frame)\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        self.param = 1\n        super.init(coder: aDecoder)\n    }\n}\n```\n\n### convenience\n\n> Convenience initializers are secondary, supporting initializers for a class. You can define a convenience initializer to call a designated initializer from the same class as the convenience initializer with some of the designated initializerâ€™s parameters set to default values. You can also define a convenience initializer to create an instance of that class for a specific use case or input value type.\n\nconvenience initializers æ˜¯å¯¹ç±»åˆå§‹åŒ–æ–¹æ³•çš„è¡¥å……ï¼Œç”¨äºä¸ºç±»æä¾›ä¸€äº›å¿«æ·çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥ä¸åˆ›å»ºè¿™ç±»æ–¹æ³•ï¼Œä½†å¦‚æœåˆ›å»ºäº†ï¼Œå°±éœ€è¦éµå¾ªåŸåˆ™ï¼šcall a designated initializer from the same classï¼Œä¹Ÿå°±æ˜¯è¯´è¦è°ƒç”¨è¯¥ç±»è‡ªå·±çš„ `designated initializer`ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ `override init(frame:)` ï¼Œç„¶åä¿®æ”¹ä¸ºï¼š\n\n```swift\nclass CustomView: UIView {\n    convenience init(param: Int, frame: CGRect) {\n        self.init(frame: frame) // error fixed\n    }\n\n    override init(frame: CGRect) {\n        super.init(frame: frame)\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n}\n```\n\nç„¶åå¯¹æˆå‘˜å˜é‡ `param` èµ‹å€¼ï¼š\n\n```swift\nclass CustomView: UIView {\n    var param: Int\n\n    convenience init(param: Int, frame: CGRect) {\n        self.param = param // error\n        self.init(frame: frame)\n    }\n\n    override init(frame: CGRect) {\n        super.init(frame: frame) // error\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n}\n```\n\næ¥ä¸ªä¸¤ä¸ªé”™è¯¯ï¼š\n\n- Use of 'self' in property access 'param' before self.init initializes self\n- Property 'self.param' not initialized at super.init call\n\nç¬¬äºŒä¸ªé”™è¯¯æˆ‘ä»¬æ¸…æ¥šï¼Œæ˜¯éœ€è¦åœ¨è°ƒç”¨ super.init ä¹‹å‰åˆå§‹åŒ–æœ¬ç±»æˆå‘˜å±æ€§ã€‚\n\nç¬¬ä¸€ä¸ªé”™è¯¯å…¶å®ï¼Œè¿™æ˜¯ Swift ç¼–è¯‘å™¨æä¾›çš„å®‰å…¨æ£€æŸ¥ï¼Œæ–‡æ¡£åŸæ–‡å¦‚ä¸‹ï¼š\n\n> A convenience initializer must delegate to another initializer before assigning a value to any property (including properties defined by the same class). If it doesnâ€™t, the new value the convenience initializer assigns will be overwritten by its own classâ€™s designated initializer.\n\nåŸæ¥ Swift é˜²æ­¢ convenience initializers ä¸­èµ‹å€¼ä¹‹ååˆè¢«è¯¥ç±»è‡ªå·±çš„ designated initializer è¦†ç›–è€Œåšäº†æ£€æŸ¥ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯è°ƒç”¨è¯¥ç±»çš„å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ä¹‹åå†ä¿®æ”¹å±æ€§å€¼ï¼Œæœ€ç»ˆä¿®æ”¹å¦‚ä¸‹ï¼š\n\n```swift\nclass CustomView: UIView {\n    var param: Int\n\n    convenience init(param: Int, frame: CGRect) {\n        self.init(frame: frame)\n        self.param = param // error fixed\n    }\n\n    override init(frame: CGRect) {\n        self.param = 0 // error fixed\n        super.init(frame: frame)\n    }\n\n    required init?(coder aDecoder: NSCoder) {\n        self.param = 0\n        super.init(coder: aDecoder)\n    }\n}\n```\n\n### å°ç»“\n\n1. å­ç±»ä¸­åˆå§‹åŒ–æ–¹æ³•å¿…é¡»è¦†ç›–å…¨éƒ¨åˆå§‹åŒ–è·¯å¾„ï¼Œä»¥ä¿è¯å¯¹è±¡å®Œå…¨åˆå§‹åŒ–\n2. å­ç±»ä¸­ `designated initializer` å¿…é¡»è°ƒç”¨çˆ¶ç±»ä¸­å¯¹åº”çš„ `designated initializer`ï¼Œä»¥ä¿è¯çˆ¶ç±»ä¹Ÿèƒ½å®Œæˆåˆå§‹åŒ–\n3. å­ç±»ä¸­å¦‚æœé‡å†™çˆ¶ç±»ä¸­ `convenience initializer` æ‰€éœ€è¦çš„å…¨éƒ¨ `init` æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»çš„ `convenience initializer` äº†\n4. å­ç±»å¦‚æœæ²¡æœ‰å®šä¹‰ä»»ä½• `designated initializer`ï¼Œåˆ™é»˜è®¤ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„ `designated initializer` åŠ `convenience initializer`\n5. å­ç±»ä¸­å¿…é¡»å®ç°çš„ `designated initializer`ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  `required` å…³é”®å­—å¼ºåˆ¶å­ç±»é‡å†™å…¶å®ç°ï¼Œä»¥ä¿è¯ä¾èµ–è¯¥æ–¹æ³•çš„ `convenience initializer` å§‹ç»ˆå¯ä»¥ä½¿ç”¨\n6. `convenience initializer` å¿…é¡»è°ƒç”¨è‡ªèº«ç±»ä¸­çš„å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ï¼Œå¹¶åœ¨æœ€ç»ˆå¿…é¡»è°ƒç”¨ä¸€ä¸ª `designated initializer`\n7. åœ¨æ„é€ å™¨å®Œæˆåˆå§‹åŒ–ä¹‹å‰, ä¸èƒ½è°ƒç”¨ä»»ä½•å®ä¾‹æ–¹æ³•ï¼Œæˆ–è¯»å–ä»»ä½•å®ä¾‹å±æ€§çš„å€¼ï¼Œ`self` æœ¬èº«ä¹Ÿä¸èƒ½è¢«å¼•ç”¨\n\n## å¯å¤±è´¥åˆå§‹åŒ–å™¨\n\nå¯å¤±è´¥åˆå§‹åŒ–å™¨ `Failable Initializers` ï¼Œå³å¯èƒ½è¿”å› `nil` çš„åˆå§‹åŒ–æ–¹æ³•ã€‚\n\n> A failable initializer creates an _optional value_ of the type it initializes. You write _return nil within a failable initializer_ to indicate a point at which initialization failure can be triggered.\n\nå°±æ˜¯å°†åˆå§‹åŒ–è¿”å›å€¼å˜æˆ optional valueï¼Œå¹¶åœ¨ä¸æ»¡è¶³åˆå§‹åŒ–æ¡ä»¶çš„åœ°æ–¹ return nilã€‚é€šè¿‡è°ƒç”¨å¤„åˆ¤æ–­æ˜¯å¦æœ‰å€¼å³å¯çŸ¥é“æ˜¯å¦åˆå§‹åŒ–æˆåŠŸã€‚\n\n```swift\nclass Product {\n    let name: String\n    init?(name: String) {\n        if name.isEmpty { return nil }\n        self.name = name\n    }\n}\n\nclass CartItem: Product {\n    let quantity: Int\n    init?(name: String, quantity: Int) {\n        if quantity < 1 { return nil }\n        self.quantity = quantity\n        super.init(name: name)\n    }\n}\n```\n\nCartItem ç±»çš„åˆå§‹åŒ–æ–¹æ³•å…ˆå¯¹ä¼ å…¥å‚æ•° `quantity` çš„å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå°äº `1` åˆ™ä¸ºæ— æ•ˆå‚æ•°ï¼Œç„¶å `return nil`ï¼ˆåˆå§‹åŒ–å¤±è´¥ï¼‰ï¼Œå¤§äºæˆ–ç­‰äº `1` åˆ™ç»§ç»­è°ƒç”¨çˆ¶ç±» `Product` çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå†æ¬¡åˆ¤æ–­ä¼ å…¥å‚æ•° `name`ï¼Œä¸ºç©ºåˆ™ `return nil`ï¼ˆåˆå§‹åŒ–å¤±è´¥ï¼‰ï¼Œå¦åˆ™ç»§ç»­åˆå§‹åŒ–ã€‚\n\næ€»çš„æ¥è¯´ï¼Œå¯å¤±è´¥åˆå§‹åŒ–å™¨çš„è®¾å®šï¼Œæ˜¯åœ¨ä¿è¯å®‰å…¨æ€§çš„åŸºç¡€ä¸Šæä¾›äº†é€»è¾‘ä¸Šæ›´æ¸…æ™°çš„åˆå§‹åŒ–æ–¹å¼ã€‚`Failable Initializers` æ‰€æœ‰çš„ç»“æœéƒ½å°†æ˜¯ `T?` ç±»å‹ï¼Œé€šè¿‡ `Optional Binding` æ–¹å¼ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“åˆå§‹åŒ–æ˜¯å¦æˆåŠŸï¼Œå¹¶å®‰å…¨åœ°ä½¿ç”¨å®ƒä»¬äº†ã€‚\n\n## References\n\n- [ä» Swift åˆå§‹åŒ–è¯´èµ·](http://huizhao.win/2016/11/13/swift-init/)\n- [The Swift Programming Language (Swift 4.1) Initialization](https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/Initialization.html)\n- [Swift ç±»æ„é€ å™¨çš„ä½¿ç”¨](https://draveness.me/swift-zhong-init-de-shi-yong)\n\n-- EOF --\n","tags":["ios","swift"]},{"title":"iOS Safe Area æˆ‘æ‰€çŸ¥é“çš„å…¨éƒ¨","url":"/2018/03/29/ios-safe-area/","content":"\nåœ¨ iOS 7 Apple åœ¨ UIViewController ä¸­å¼•å…¥äº† `topLayoutGuide` å’Œ `bottomLayoutGuide` å±æ€§æ¥æè¿°æ²¡æœ‰è¢«è¦†ç›–(status bar, navigation bar, toolbar, tab bar, etc.)å±å¹•çš„åŒºåŸŸã€‚åœ¨ iOS 11 ä¸­ï¼ŒApple å·²ç»å¼ƒç”¨äº†è¿™äº›å±æ€§ï¼Œå¹¶å¼•å…¥äº† safe areaã€‚Apple å»ºè®®æˆ‘ä»¬ä¸è¦åœ¨ safe area æ“ä½œï¼Œåœ¨ iOS 11 ä¸­ï¼Œå½“åœ¨ iOS App ä¸­å®šä½è§†å›¾æ—¶ï¼Œä½ å¿…é¡»ä½¿ç”¨æ–°çš„ safe area APIã€‚\n\n## UIView\n\nåœ¨ iOS 11 UIViewController `topLayoutGuide` å’Œ `bottomLayoutGuide` å±æ€§å·²ç»è¢«æ›¿æ¢æˆäº†æ–°çš„ UIView ä¸­çš„ safe areaï¼š\n\n```swift\n@available(iOS 11.0, *)\nopen var safeAreaInsets: UIEdgeInsets { get }\n\n@available(iOS 11.0, *)\nopen var safeAreaLayoutGuide: UILayoutGuide { get }\n```\n\n`safeAreaInsets` å±æ€§æ„å‘³ç€å±å¹•å¯ä»¥è¦†ç›–ä»å››ä¸ªæ–¹å‘ï¼Œè€Œä¸ä»…ä»…æ˜¯é¡¶éƒ¨å’Œåº•éƒ¨ã€‚å½“è¢« iPhone X å‘ˆç°æ—¶ï¼Œæˆ‘ä»¬å°±æ˜ç™½äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å·¦å³ insetsã€‚\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNbRwly1fptmugww5wj30zs0x0jw8.jpg\" alt=\"ios-safe-area\" width=\"400\" />\n\n_iPhone 8 vs iPhone X safe area (portrait orientation)_\n\n<!-- more -->\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNbRwly1fptmv9csg7j30z0152ae6.jpg\" alt=\"ios-safe-area\" width=\"400\" />\n\n_iPhone 8 vs iPhone X safe area (landscape orientation)_\n\niPhone X åœ¨ portrait orientation æœ‰ top å’Œ bottom çš„ safe areaï¼Œåœ¨ landscape orientation æœ‰ left right å’Œ bottomã€‚\n\nè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚åœ¨ ViewController çš„ View çš„é¡¶éƒ¨å’Œåº•éƒ¨æ·»åŠ äº†ä¸¤ä¸ªå¸¦æœ‰æ–‡æœ¬æ ‡ç­¾å’Œå›ºå®šé«˜åº¦çš„ custom subviewsï¼Œå¹¶é™„åŠ  attached åˆ°è§†å›¾çš„è¾¹ç¼˜ edgesã€‚\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNbRwly1fptnobrau6j30no14i13p.jpg\" alt=\"ios-safe-area\" width=\"300\" />\n\n_Subviews are attached to the viewâ€™s edges_\n\næ­£å¦‚æ‰€çœ‹åˆ°çš„ï¼Œsubviews å†…å®¹ä¸é¡¶éƒ¨çš„ notch å’Œåº•éƒ¨çš„ home indicator æŒ‡ç¤ºå™¨é‡å  overlappedã€‚ä¸ºäº†æ­£ç¡®åœ°å®šä½ subviewsï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰‹åŠ¨å¸ƒå±€å°†å®ƒä»¬é™„åŠ åˆ° safe areaï¼š\n\n```swift\ntopSubview.frame.origin.x = view.safeAreaInsets.left\ntopSubview.frame.origin.y = view.safeAreaInsets.top\ntopSubview.frame.size.width = view.bounds.width - view.safeAreaInsets.left - view.safeAreaInsets.right\ntopSubview.frame.size.height = 300\n```\n\næˆ–è€…ä½¿ç”¨ Auto Layoutï¼š\n\n```swift\nbottomSubview.leftAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leftAnchor).isActive = true\nbottomSubview.rightAnchor.constraint(equalTo: view.safeAreaLayoutGuide.rightAnchor).isActive = true\nbottomSubview.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor).isActive = true\nbottomSubview.heightAnchor.constraint(equalToConstant: 300).isActive = true\n```\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNbRwly1fptqg9si13j30no14iwq1.jpg\" alt=\"ios-safe-area\" width=\"300\" />\n\n_Subviews are attached to the superview safe area_\n\nä¸Šé¢çœ‹èµ·æ¥å¥½å¾ˆå¤šã€‚æ­¤å¤–å¯ä»¥åœ¨ subview subclass æ·»åŠ  subviews content åˆ° safe areaã€‚\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNbRwly1fptquigdxjj30no14iqdh.jpg\" alt=\"ios-safe-area\" width=\"300\" />\n\n_Subviews are attached to the viewâ€™s edges. Labels are attached to the superview safe area._\n\nåœ¨ subviews å±‚æ¬¡ç»“æ„ hierarchy çš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥å°† view æ·»åŠ åˆ° safe areaã€‚\n\n## UIViewController\n\nåœ¨ iOS 11 UIViewController æœ‰äº†ä¸€ä¸ªæ–°å±æ€§ï¼š\n\n```swift\n@available(iOS 11.0, *)\nopen var additionalSafeAreaInsets: UIEdgeInsets\n```\n\nå½“ view controller subviews è¦†ç›–åµŒå…¥çš„ child view controller views æ—¶ï¼Œå°†ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼ŒApple åœ¨ UINavigationController å’Œ UITabBarController ä¸­ä½¿ç”¨é¢å¤–çš„ additional safe area insetsï¼Œå½“è¿™äº›æ¡æ˜¯åŠé€æ˜çš„ã€‚\n\n`additionalSafeAreaInsets` æ˜¯å¯¹ç°æœ‰ safearea çš„æ‰©å±•é™„åŠ ã€‚\n\nå½“ä½ æ”¹å˜ additional safe area insets æˆ–è€… safe area insets è¢«ç³»ç»Ÿæ”¹å˜ï¼ŒUIView å’Œ UIViewController ä¸­çš„æ–¹æ³•å°†è¢«è°ƒç”¨ï¼š\n\n```swift\n// UIView\n@available(iOS 11.0, *)\nopen func safeAreaInsetsDidChange()\n\n//UIViewController\n@available(iOS 11.0, *)\nopen func viewSafeAreaInsetsDidChange()\n```\n\n### Simulate iPhone X safe area\n\nAdditional safe area insets ä¹Ÿå¯ä»¥ç”¨æ¥æµ‹è¯•ä½ çš„ app æ˜¯å¦‚ä½•æ”¯æŒ iPhone Xï¼Œå¦‚æœä½ ä¸èƒ½åœ¨æ¨¡æ‹Ÿå™¨ä¸Šæµ‹è¯•ä½ çš„ appï¼Œè€Œä¸”æ²¡æœ‰ iPhone Xï¼Œé‚£å°±å¾ˆæœ‰ç”¨äº†ã€‚\n\n```swift\n//portrait orientation, status bar is shown\nadditionalSafeAreaInsets.top = 24.0\nadditionalSafeAreaInsets.bottom = 34.0\n\n//portrait orientation, status bar is hidden\nadditionalSafeAreaInsets.top = 44.0\nadditionalSafeAreaInsets.bottom = 34.0\n\n//landscape orientation\nadditionalSafeAreaInsets.left = 44.0\nadditionalSafeAreaInsets.bottom = 21.0\nadditionalSafeAreaInsets.right = 44.0\n```\n\n<img src=\"https://tva1.sinaimg.cn/large/006tNc79ly1fpw2l9aa64j31kw0z0q9t.jpg\" alt=\"ios-safe-area\" width=\"400\" />\n\n## UIScrollView\n\n> å¾…ç»­\n\n## Refereneces\n\n- [iOS Safe Area](https://medium.com/rosberryapps/ios-safe-area-ca10e919526f)\n","tags":["ios"]},{"title":"UITableViewCell è‡ªé€‚åº” UITextView é«˜åº¦","url":"/2018/03/27/self-sizing-uitextview-in-a-uitableviewcell/","content":"\nä½¿ç”¨ Auto Layout è®© UITableViewCell è‡ªé€‚åº” UITextView é«˜åº¦ï¼Œæ•ˆæœæ¼”ç¤ºï¼š\n\n<img src=\"https://user-images.githubusercontent.com/9289792/37953137-931860e0-31d4-11e8-8809-c871b09f9519.gif\" alt=\"Self-sizing UITextView in cell\" width=\"200\" />\n\n[99-projects-of-swift/029-tableviewcell-self-adaption](https://github.com/imzyf/99-projects-of-swift/tree/master/029-tableviewcell-self-adaption)\n\n<!-- more -->\n\n## é¢„å¤‡æ­¥éª¤\n\n1. ç»™ textView ä¸Šä¸‹å·¦å³å»ºç«‹ç›¸å¯¹äº cell çš„çº¦æŸ\n2. å–æ¶ˆ textView çš„ `Scrolling Enabled`\n3. è®¾ç½® tableView ä¼°ç®—é«˜åº¦ `tableView.estimatedRowHeight = 70`\n4. è®¾ç½® `textView.delegate = self`\n\n## å…³é”®ç‚¹\n\nå¦‚æœåœ¨ `textViewDidChange(textView:)` è°ƒç”¨ `tableView.reloadData()` ä¼šé€ æˆ textView å¤±å»ç„¦ç‚¹ï¼Œé”®ç›˜éšè—ã€‚\n\nè§£å†³æ–¹æ³•ï¼š\n\n```\nfunc textViewDidChange(textView: UITextView) {\n    tableView.beginUpdates()\n    tableView.endUpdates()\n}\n```\n\nè¿™é‡Œå¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“ textView é•¿åº¦è¶…è¿‡ä¸€å±æˆ–è€…è¿‡é•¿æ—¶ï¼Œåœ¨è¾“å…¥æ—¶ tableView ä¼šè·³åŠ¨æ»šåŠ¨ jumping and stutteringã€‚\n\næ›´å¥½çš„è§£å†³æ–¹æ³•ï¼š\n\n```\nfunc textViewDidChange(textView: UITextView) {\n    let currentOffset = tableView.contentOffset\n    UIView.setAnimationsEnabled(false)\n    tableView.beginUpdates()\n    tableView.endUpdates()\n    UIView.setAnimationsEnabled(true)\n    tableView.setContentOffset(currentOffset, animated: false)\n}\n```\n\nç¦ç”¨åŠ¨ç”»å’Œé‡å»ºè¡¨è§†å›¾çš„å†…å®¹åç§»ä¿®æ­£æŠ–åŠ¨ã€‚\n\n> Reference:\n> - [Self-sizing UITextView in a UITableView using Auto Layout - like Reminders.app](http://candycode.io/self-sizing-uitextview-in-a-uitableview-using-auto-layout-like-reminders-app/)\n","tags":["ios"]},{"title":"ã€è¯‘ã€‘iOS å•å…ƒæµ‹è¯•å’Œ UI æµ‹è¯•å…¥é—¨æ•™ç¨‹","url":"/2018/03/15/ios-unit-testing-and-ui-testing-tutorial/","content":"\n> åŸæ–‡é“¾æ¥ï¼š[iOS Unit Testing and UI Testing Tutorial - Ray Wenderlich](https://www.raywenderlich.com/150073/ios-unit-testing-and-ui-testing-tutorial)\n\nç¼–å†™æµ‹è¯•å¹¶ä¸è¿·äºº (glamorous)ï¼Œä½†æ˜¯æ—¢ç„¶æµ‹è¯•èƒ½è®©ä½ é—ªé—ªå‘å…‰ (sparkling) çš„åº”ç”¨ç¨‹åºå˜æˆ (from turning into) ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„åƒåœ¾ï¼Œé‚£ä¹ˆè¯´æ˜æµ‹è¯•æ˜¯å¿…è¦çš„ã€‚å¦‚æœä½ æ­£åœ¨é˜…è¯» iOS å•å…ƒæµ‹è¯•å’Œ UI æµ‹è¯•å…¥é—¨æ•™ç¨‹ï¼Œé‚£ä¹ˆä½ å·²ç»çŸ¥é“ *åº”è¯¥* ä¸ºä»£ç å’Œ UI ç¼–å†™æµ‹è¯•ï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“å¦‚ä½•åœ¨ Xcode ä¸­è¿›è¡Œæµ‹è¯•ã€‚\n\n<!-- more -->\n\nä¹Ÿè¡Œä½ å·²ç»æœ‰ä¸€ä¸ª â€œå¯ä»¥è¿è¡Œâ€ çš„ app ä½†æ˜¯æ²¡æœ‰ä¸ºå®ƒç¼–å†™ä»»ä½•æµ‹è¯•ï¼Œå¹¶ä¸”å½“ä½ æƒ³æ‹“å±• app æ—¶ï¼Œä½ èƒ½å¤Ÿæµ‹è¯•ä»»ä½•çš„æ”¹å˜ã€‚ä¹Ÿè®¸ä½ å·²ç»ç¼–å†™äº†ä¸€äº›æµ‹è¯•ï¼Œä½†æ˜¯ä¸ç¡®å®šä»–ä»¬æ˜¯å¦æ˜¯ *æ­£ç¡®* çš„æµ‹è¯•ã€‚æˆ–è€…ä½ ç°åœ¨æ­£åœ¨å¼€å‘ä½ çš„ appï¼Œæƒ³åœ¨ä½ ç¦»å¼€çš„æ—¶å€™è¿›è¡Œæµ‹è¯•ã€‚\n\nè¿™ç¯‡å…¥é—¨æ•™ç¨‹å°†å‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨ Xcode çš„æµ‹è¯•å¯¼èˆªæ å»æµ‹è¯•ä¸€ä¸ª app æ¨¡å—å’Œå¼‚æ­¥æ–¹æ³• (asynchronous methods)ï¼Œå¦‚ä½•æ¨¡æ‹Ÿäº¤äº’ fake interactions æˆ–è€…ç³»ç»Ÿå¯¹è±¡é€šè¿‡ subs and mocksï¼Œå¦‚ä½•æµ‹è¯• UI å’Œæ€§èƒ½ performanceï¼Œå’Œå¦‚ä½•ä½¿ç”¨ä»£ç è¦†ç›–ç‡å·¥å…· code coverage toolã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ Along the wayï¼Œæ‚¨å°†ä¼šå­¦åˆ°ä¸€äº›ç”¨äºæµ‹è¯•å¿è€… testing ninjas çš„è¯æ±‡ vocabularyï¼Œåœ¨æœ¬æ•™ç¨‹çš„æœ€åï¼Œä½ å°†ä½¿ç”¨ä¾èµ–æ³¨å…¥å¯¹æ‚¨çš„ç³»ç»Ÿè¿›è¡Œæµ‹è¯• youâ€™ll be injecting dependencies into your System Under Test (SUT) with aplomb!ã€‚\n\n## æµ‹è¯•ï¼Œæµ‹è¯•\n\n### æµ‹è¯•ä»€ä¹ˆ\n\nåœ¨ç¼–å†™ä»»ä½•æµ‹è¯•ä¹‹å‰ï¼Œä¸€ä¸ªå¼€å§‹æ—¶éå¸¸é‡è¦çš„åŸºç¡€æ˜¯ï¼šä½ éœ€è¦æµ‹è¯•ä»€ä¹ˆï¼Ÿå¦‚æœä½ çš„ç›®æ ‡æ˜¯æ‹“å±•ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ appï¼Œä½ é¦–å…ˆåº”è¯¥ä¸º **ä»»ä½•ä½ è®¡åˆ’æ”¹å˜çš„ç»„ä»¶** ç¼–å†™æµ‹è¯•ã€‚\n\næ›´æ™®éçš„è®²ï¼Œæµ‹è¯•åº”è¯¥è¦†ç›–ï¼š\n- æ ¸å¿ƒåŠŸèƒ½ Core functionalityï¼šæ¨¡å‹ã€ç±»å’Œæ–¹æ³•ï¼Œå’Œä¸ä»–ä»¬ç›¸äº’ä½œç”¨çš„æ§åˆ¶å™¨\n- æœ€å¸¸è§çš„ UI å·¥ä½œæµ\n- è¾¹ç•Œæ¡ä»¶ Boundary conditions\n- Bug ä¿®å¤\n\n### ç¬¬ä¸€ä»¶äº‹ FIRSTï¼šæµ‹è¯•çš„æœ€ä½³å®è·µ\n\n FIRST é¦–å­—æ¯ç¼©å†™è¯æè¿°äº†æœ‰æ•ˆå•å…ƒæµ‹è¯•çš„ä¸€å¥—ç®€æ˜æ ‡å‡†ã€‚è¿™äº›æ¡ä»¶æ˜¯ï¼š\n - Fastï¼šè¿è¡Œæµ‹è¯•åº”è¯¥å¿«é€Ÿï¼Œè¿™æ ·äººä»¬å°±ä¸ä¼šä»‹æ„è¿è¡Œå®ƒä»¬äº†ã€‚\n - Independent/Isolatedï¼šæµ‹è¯•ä¸åº”è¯¥å¯¹å½¼æ­¤è¿›è¡Œè®¾ç½®æˆ–æ‹†è§£ setup or teardownã€‚\n - Repeatableï¼šæ¯æ¬¡è¿è¡Œæµ‹è¯•æ—¶ï¼Œéƒ½åº”è¯¥å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å¤–éƒ¨æ•°æ®æä¾›è€…å’Œå¹¶å‘é—®é¢˜å¯èƒ½å¯¼è‡´é—´æ­‡æ€§æ•…éšœã€‚\n - Self-validatingï¼šæµ‹è¯•åº”å®Œå…¨è‡ªåŠ¨åŒ–ï¼›è¾“å‡ºåº”è¯¥æ˜¯â€œé€šè¿‡â€æˆ–â€œå¤±è´¥â€ï¼Œè€Œä¸æ˜¯ç¨‹åºå‘˜å¯¹æ—¥å¿—æ–‡ä»¶çš„è§£é‡Šã€‚\n - Timelyï¼šç†æƒ³æƒ…å†µä¸‹ï¼Œæµ‹è¯•åº”è¯¥åœ¨ç¼–å†™ç”Ÿäº§ä»£ç ä¹‹å‰ç¼–å†™ã€‚\n\néµå¾ª FIRST åŸåˆ™ï¼Œä½ çš„æµ‹è¯•å°†ä¿æŒæ¸…æ™°å’Œæœ‰å¸®åŠ©ï¼Œè€Œä¸æ˜¯ä¸ºä½ çš„ app è®¾ç½®éšœç¢ã€‚\n\n## å¼€å§‹\n\nä¸‹è½½ï¼Œè§£å‹ï¼Œæ‰“å¼€ï¼Œæ£€æŸ¥ [åˆå§‹é¡¹ç›®](https://koenig-media.raywenderlich.com/uploads/2016/12/Starters.zip) BullsEye å’Œ HalfTunesã€‚\n\nBullsEye æ˜¯ä¸€ä¸ªåŸºäº [iOS Apprentice](https://www.raywenderlich.com/store/ios-apprentice) çš„ç¤ºä¾‹ appã€‚å·²ç»å°†æ¸¸æˆé€»è¾‘æå–åˆ°ä¸€ä¸ª BullsEyeGame ç±»ä¸­ï¼Œå¹¶æ·»åŠ äº†å¦ä¸€ç§æ¸¸æˆé£æ ¼ã€‚\n\nåœ¨å³ä¸‹è§’ï¼Œæœ‰ä¸€ä¸ªåˆ†æ®µæ§åˆ¶ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ¸¸æˆé£æ ¼ï¼šSlideï¼Œç§»åŠ¨æ»‘å—å°½å¯èƒ½æ¥è¿‘ç›®æ ‡å€¼ï¼Œæˆ–è€… Typeï¼Œæ¥çŒœæµ‹æ»‘å—çš„ä½ç½®ã€‚æ§ä»¶çš„æ“ä½œè¿˜å°†ç”¨æˆ·çš„æ¸¸æˆæ ·å¼é€‰æ‹©å­˜å‚¨ä¸ºç”¨æˆ·é»˜è®¤å€¼ã€‚\n\nHalfTunes æ˜¯ [NSURLSession Tutorial](https://www.raywenderlich.com/110458/nsurlsession-tutorial-getting-started) ä¸­çš„ç¤ºä¾‹ appï¼Œæ›´æ–°è‡³ Swift 3ã€‚ ç”¨æˆ·å¯ä»¥é€šè¿‡ iTunes API æŸ¥è¯¢æ­Œæ›²ï¼Œç„¶åä¸‹è½½å¹¶æ’­æ”¾æ­Œæ›²ç‰‡æ®µã€‚\n\nè®©æˆ‘ä»¬å¼€å§‹æµ‹è¯•ï¼\n\n## Xcode ä¸­çš„å•å…ƒæµ‹è¯•\n\n### åˆ›å»ºä¸€ä¸ª Unit Test Target\n\nXcode Test Navigator æä¾›äº†ä½¿ç”¨æµ‹è¯•çš„æœ€ç®€å•çš„æ–¹æ³•ï¼›ä½ å°†ä½¿ç”¨å®ƒåˆ›å»º test targets å’Œåœ¨ app è¿è¡Œæµ‹è¯•ã€‚\n\næ‰“å¼€ BullsEye é¡¹ç›®ç„¶åæ•²å‡» Command + 6 æ‰“å¼€ test navigatorã€‚\n\nç‚¹å‡»å³ä¸‹è§’çš„ + æŒ‰é’®ï¼Œç„¶åä»èœå•ä¸­é€‰æ‹© New Unit Test Targetâ€¦\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/TestNavigator1.png)\n\næ¥å—é»˜è®¤çš„åå­— BullsEyeTestsã€‚å½“ test navigator ä¸­å‡ºç° test bundleï¼Œç‚¹å‡»æ‰“å¼€ã€‚å¦‚æœ BullsEyeTests æ²¡æœ‰è‡ªåŠ¨å‡ºç°ï¼Œé€šè¿‡å•å‡»å…¶ä»– navigators ä¸­çš„ä¸€ä¸ªæ¥è§£å†³é—®é¢˜ trouble-shoot byï¼Œç„¶åè¿”å›åˆ° test navigatorã€‚\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/TestNavigator2.png)\n\næ¨¡æ¿å¯¼å…¥äº† XCTest å¹¶å®šä¹‰äº† XCTestCase çš„ä¸€ä¸ª BullsEyeTests å­ç±»ï¼Œè¿˜æœ‰ setup() tearDown() å’Œ testExample()ã€‚\n\næœ‰ä¸‰ç§æ–¹æ³•è¿è¡Œ test classï¼š\n1. Product\\Test or Command-U. å°†è¿è¡Œæ‰€æœ‰çš„ test classes\n2. åœ¨ test navigator ä¸­ç‚¹å‡» arrow æŒ‰é’®\n3. åœ¨è¾¹æ²¿ç‚¹å‡»è±å½¢æŒ‰é’®\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/TestNavigator3.png)\n\næ‚¨è¿˜å¯ä»¥é€šè¿‡å•å‡»è±å½¢æŒ‰é’®æ¥è¿è¡Œå•ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œæ— è®ºæ˜¯åœ¨ test navigator ä¸­è¿˜æ˜¯åœ¨ gutter ä¸­ã€‚\n\nå½“æ‰€æœ‰çš„ tests æˆåŠŸåï¼Œè±å½¢æŒ‰é’®å°±ä¼šå˜ç»¿å¹¶æ˜¾ç¤ºå‡ºæ£€æŸ¥çš„ç—•è¿¹ã€‚å•å‡» testPerformanceExample() æœ«å°¾çš„ç°è‰²è±å½¢ï¼Œæ‰“å¼€æ€§èƒ½ç»“æœï¼š\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/TestNavigator4.png)\n\nä½ ä¸éœ€è¦ testPerformanceExample()ï¼Œæ‰€ä»¥åˆ é™¤å®ƒã€‚\n\n### ä½¿ç”¨ XCTAssert æµ‹è¯• Models\n\né¦–å…ˆï¼Œå°†ä½¿ç”¨ XCTAssert å»æµ‹è¯• BullsEye model ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼šBullsEyeGame å¯¹è±¡æ˜¯å¦æ­£ç¡®è®¡ç®—ä¸€ä¸ªå›åˆçš„åˆ†æ•°ã€‚\n\nåœ¨ BullsEyeTests.swift æ·»åŠ \n\n```\n@testable import BullsEye\n```\n\nè¿™ä½¿å¾— unit tests å¯ä»¥è®¿é—® BullsEye ä¸­çš„ç±»å’Œæ–¹æ³•ã€‚\n\nåœ¨ BullsEyeTests é¡¶éƒ¨æ·»åŠ å±æ€§\n\n```\nvar gameUnderTest: BullsEyeGame!\n```\n\nåœ¨ setup() åˆ›å»ºä¸€ä¸ªæ–° BullsEyeGame å¯¹è±¡ï¼Œåœ¨ super ä¹‹å\n\n```\ngameUnderTest = BullsEyeGame()\ngameUnderTest.startNewGame()\n```\n\nè¿™å°†åœ¨ç±»çº§åˆ«åˆ›å»ºä¸€ä¸ª SUT (System Under Test) objectï¼Œå› æ­¤è¿™ä¸ª test class ä¸­çš„æ‰€æœ‰æµ‹è¯•éƒ½å¯ä»¥è®¿é—® SUT å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\nåœ¨è¿™é‡Œä½ ä¹Ÿå¯ä»¥è°ƒç”¨ startNewGameï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ª targetValueã€‚è®¸å¤šæµ‹è¯•å°†ä½¿ç”¨targetValueï¼Œæ¥æµ‹è¯•æ¸¸æˆæ˜¯å¦æ­£ç¡®åœ°è®¡ç®—äº†åˆ†æ•°ã€‚\n\nä¸è¦å¿˜è®°é‡Šæ”¾ä½ çš„ SUT object åœ¨ tearDown()ï¼Œåœ¨ä½ è°ƒç”¨ super ä¹‹å‰\n\n```\ngameUnderTest = nil\n```\n\n> Note: Itâ€™s good practice to create the SUT in setup() and release it in tearDown(), to ensure every test starts with a clean slate. For more discussion, check out Jon Reidâ€™s post on the subject.\n\nç°åœ¨ä½ å·²ç»å‡†åˆ«å†™ä½ çš„ç¬¬ä¸€ä¸ª testï¼\n\nç”¨ä¸€äº›ä»£ç æ›¿æ¢ testExample()\n\n```\n// XCTAssert to test model\nfunc testScoreIsComputed() {\n  // 1. given\n  let guess = gameUnderTest.targetValue + 5\n\n  // 2. when\n  _ = gameUnderTest.check(guess: guess)\n\n  // 3. then\n  XCTAssertEqual(gameUnderTest.scoreRound, 95, \"Score computed from guess is wrong\")\n}\n\n```\n\nä¸€ä¸ª test æ–¹æ³•æ€»æ˜¯ä»¥ test å¼€å¤´ï¼Œæ¥ä¸‹æ¥æ˜¯å¯¹å®ƒæµ‹è¯•çš„æè¿°ã€‚\n\nå°†æµ‹è¯•æ ¼å¼åŒ–ä¸º given when then æ˜¯å¾ˆå¥½çš„åšæ³•ï¼š\n1. åœ¨ given éƒ¨åˆ†ï¼Œè®¾ç½®éœ€è¦çš„å€¼ï¼šåœ¨æ­¤ä¾‹ä½ åˆ›å»ºä¸€ä¸ª guess å€¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŒ‡å®šå®ƒä¸ targetValue æœ‰å¤šå¤§çš„ä¸åŒã€‚\n2. åœ¨ when éƒ¨åˆ†ï¼Œæ‰§è¡Œæ­£åœ¨æµ‹è¯•çš„ä»£ç ï¼šè°ƒç”¨ `gameUnderTest.check(_:)`ã€‚\n3. åœ¨ then éƒ¨åˆ†ï¼Œæ–­è¨€ä½ æ‰€é¢„æœŸçš„ç»“æœï¼ˆåœ¨æœ¬ä¾‹ï¼ŒgameUnderTest.scoreRound is 100 â€“ 5ï¼‰å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåˆ™ä¼šæ‰“å°ä¸€æ¡æ¶ˆæ¯ã€‚\n\n> Note: To see a full list of XCTestAssertions, Command-click XCTAssertEqual in the code to open XCTestAssertions.h, or go to Appleâ€™s Assertions Listed by Category.\n\n<img src=\"https://koenig-media.raywenderlich.com/uploads/2016/12/givenWhenThen.png\" width=\"260px\" />\n\n> Note: The Given-When-Then structure of a test originated with Behavior Driven Development (BDD) as a client-friendly, low-jargon nomenclature. Alternative naming systems are Arrange-Act-Assert and Assemble-Activate-Assert.\n\n### Debugging a Test\n\nåœ¨ BullsEyeGame æ•…æ„ç•™ä¸‹äº† bugï¼Œæ‰€ä»¥ç°åœ¨ä½ è¦ç»ƒä¹ æ‰¾åˆ°å®ƒã€‚ä¸ºäº†æ‰¾åˆ° bug å°† testScoreIsComputed æ”¹åä¸º testScoreIsComputedWhenGuessGTTargetã€‚åœ¨è¿™ä¸ª test ä¸­ï¼Œåœ¨ given éƒ¨åˆ†ä» targetValue å‡å» 5\n\n```\nfunc testScoreIsComputedWhenGuessLTTarget() {\n  // 1. given\n  let guess = gameUnderTest.targetValue - 5\n\n  // 2. when\n  _ = gameUnderTest.check(guess: guess)\n\n  // 3. then\n  XCTAssertEqual(gameUnderTest.scoreRound, 95, \"Score computed from guess is wrong\")\n}\n```\n\nguess ä¸ targetValue ä¹‹é—´ä»ç„¶æ˜¯ 5ï¼Œæ‰€ä»¥åˆ†æ•°åº”è¯¥è¿˜æ˜¯ 95ã€‚åœ¨ breakpoint navigator æ·»åŠ  Test Failure Breakpointï¼Œè¿™å°†åœ¨æ–­è¨€å¤±è´¥æ—¶åœæ­¢æµ‹è¯•è¿è¡Œã€‚\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/AddTestFailureBreakpoint.png)\n\nè¿è¡Œä½ çš„ testï¼šå½“æµ‹è¯•å¤±è´¥æ—¶å®ƒå°†åœåœ¨ XCTAssertEqual è¿™è¡Œã€‚æ£€æŸ¥ gameUnderTest å’Œ guess åœ¨ debug console\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/TestFailure.png)\n\nguess æ˜¯ trgetValue - 5 ä½†æ˜¯ scoreRound is 105 ä¸æ˜¯ 95ï¼\n\nè¿›ä¸€æ­¥ç ”ç©¶ï¼Œä½¿ç”¨æ­£å¸¸çš„è°ƒè¯•è¿‡ç¨‹ï¼šåœ¨ when å£°æ˜å¤„å’Œåœ¨ BullsEyeGame.swift è®¾ç½®æ–­ç‚¹ï¼Œåœ¨ `check(_:)` ä¸­äº§ç”Ÿäº†å·®å¼‚ã€‚ç„¶åå†æ¬¡è¿è¡Œæµ‹è¯•ï¼Œå¹¶ä¸” step-over let difference æ£€æŸ¥ difference çš„å·®å¼‚å€¼ï¼š\n\n![](https://koenig-media.raywenderlich.com/uploads/2016/12/DebugConsole.png)\n\né—®é¢˜æ˜¯ difference æ˜¯è´Ÿçš„ï¼Œæ‰€ä»¥å¾—åˆ†æ˜¯ 100 â€“ (-5)ï¼Œä½¿ç”¨ difference ç»å¯¹å€¼æ¥ä¿®å¤è¿™é‡Œã€‚\n\nç§»é™¤ä¸¤ä¸ªæ–­ç‚¹ç„¶åå†æ¬¡è¿è¡Œæµ‹è¯•ä»¥ç¡®è®¤å®ƒç°åœ¨æˆåŠŸäº†ã€‚\n\n> å¾…ç»­\n","tags":["ios"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - ååŒæ¨¡å‹","url":"/2018/01/19/got-git-reading-notes-model/","content":"\nä¸»è¦å†…å®¹ï¼šã€Git ååŒæ¨¡å‹ã€‘\n\n## ç»å…¸ Git ååŒæ¨¡å‹\n\n### é›†ä¸­å¼ååŒæ¨¡å‹\n\nå¯ä»¥åƒé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé‚£æ ·ä½¿ç”¨ Gitï¼Œåœ¨ä¸€ä¸ªå¤§å®¶éƒ½å¯ä»¥è®¿é—®åˆ°çš„æœåŠ¡å™¨ä¸Šæ¶è®¾ Git æœåŠ¡å™¨ï¼Œæ¯ä¸ªäººä»è¯¥æœåŠ¡å™¨å…‹éš†ä»£ç ï¼Œæœ¬åœ°æäº¤æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚\n\n## é‡‘å­—å¡”å¼ååŒæ¨¡å‹\n\nè™½ç„¶ç†è®ºä¸Šæ¯ä¸ªå¼€å‘è€…çš„ç‰ˆæœ¬åº“éƒ½æ˜¯å¹³ç­‰çš„ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªå…¬è®¤çš„æƒå¨çš„ç‰ˆæœ¬åº“ï¼Œè¿™ä¸ªç‰ˆæœ¬åº“ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ ¸å¿ƒå¼€å‘è€…è´Ÿè´£ç»´æŠ¤ï¼ˆå…·æœ‰æ¨é€çš„æƒé™ï¼‰ã€‚\n\nå¼€æºç¤¾åŒºé€æ¸å‘å±•å‡ºé‡‘å­—å¡”æ¨¡å‹ï¼Œè€Œè¿™ä¹Ÿæ˜¯å¿…ç„¶ä¹‹é€‰ã€‚\n\n<!-- more -->\n\n## Topgit ååŒæ¨¡å‹\n\n> ç¬”è€…æ³¨ï¼šTopgit æ˜¯å¦å·²ç»è¿‡æ—¶ï¼Ÿ\n\n`å–ä¸»åˆ†æ”¯ Vendor Branch` æ˜¯åœ¨ç‰ˆæœ¬åº“ä¸­ä¸“é—¨åˆ›å»ºä¸€ä¸ªå’Œä¸Šæ¸¸åŒæ­¥çš„åˆ†æ”¯ï¼Œä¸€æ—¦æœ‰ä¸Šæ¸¸ä»£ç å‘å¸ƒå°±æ¡å…¥åˆ°å–ä¸»åˆ†æ”¯ä¸­ã€‚\n\n## å­æ¨¡ç»„ååŒæ¨¡å‹\n\n### åˆ›å»ºå­æ¨¡ç»„\n\n```bash\n$ git submodule add /path/to/repos/libA.git lib/lib_a\n```\n\n`.gitmodules` çš„å†…å®¹ï¼š\n\n```bash\n$ cat .gitmodules\n[submodule \"lib/lib_a\"]\n        path = lib/lib_a\n        url = /path/to/repos/libA.git\n```\n\n### å…‹éš†å¸¦å­æ¨¡ç»„çš„ç‰ˆæœ¬åº“\n\n```bash\n$ git clone /path/to/repos/super.git /path/to/my/workspace/super-clone\n```\n\nå­æ¨¡ç»„çš„ç‰ˆæœ¬åº“å¹¶ä¸ä¼šé»˜è®¤å…‹éš†ï¼Œå¦‚æœéœ€è¦å…‹éš†å‡ºå­æ¨¡ç»„å‹å¼å¼•ç”¨çš„å¤–éƒ¨åº“ï¼Œéœ€è¦æ‰§è¡Œï¼š\n\n```bash\n$ git submodule init\n$ git submodule update\n```\n\n### åœ¨å­æ¨¡ç»„ä¸­ä¿®æ”¹å’Œå­æ¨¡ç»„çš„æ›´æ–°\n\nä¿®æ”¹æ›´æ–°çš„æ–¹å¼å’Œæ™®é€šä»“åº“ä¸€æ ·ã€‚å¦‚æœä¿®æ”¹äº†å­æ¨¡å—ï¼Œè¦å…ˆæ¨é€å­æ¨¡å—çš„ä¿®æ”¹ï¼Œå†æ¨é€ä¸»ä»“åº“ï¼Œä»¥é˜²æ­¢å…¶ä»–äººå…‹éš† super ç‰ˆæœ¬åº“ã€æ›´æ–°æ¨¡ç»„æ—¶å› ä¸ºæ‰¾ä¸åˆ°è¯¥å­æ¨¡ç»„ç‰ˆæœ¬åº“ç›¸åº”çš„æäº¤è€Œå¯¼è‡´å‡ºé”™ã€‚\n\næŸ¥çœ‹å­æ¨¡ç»„çŠ¶æ€ï¼š\n\n```bash\n$ git submodule status\n```\n\n## å­æ ‘åˆå¹¶\n\n### å¼•å…¥å¤–éƒ¨ç‰ˆæœ¬åº“\n\n```bash\n# æ³¨å†Œå¤–éƒ¨ç‰ˆæœ¬åº“\n$ git remote add util /path/to/repos/util.git\n\n$ git fetch util\n\n# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯\n$ git branch -a\n\n# ä» util/master è¿œç¨‹åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ util-branch\n$ git checkout -b util-branch util/master\n```\n\n### å­ç›®å½•æ–¹å¼åˆå¹¶å¤–éƒ¨ç‰ˆæœ¬åº“\n\n```bash\n# åœ¨ä¸»åˆ†æ”¯ï¼Œå°†åˆ†æ”¯ util-branch è¯»å–åˆ°å½“å‰åˆ†æ”¯çš„ä¸€ä¸ªå­ç›®å½•ä¸‹\n$ git read-tree --prefix=lib util-branch\n\n# å°† lib ç›®å½•ä¸‹çš„æ–‡ä»¶æ›´æ–°å‡ºæ¥\n$ git checkout -- lib\n```\n\nç°åœ¨è¿˜ä¸èƒ½å¿™ç€æäº¤ï¼Œå› ä¸ºå¦‚æœç°åœ¨è¿›è¡Œæäº¤å°±ä½“ç°ä¸å‡ºæ¥ä¸¤ä¸ªåˆ†æ”¯çš„åˆå¹¶å…³ç³»ã€‚éœ€è¦ä½¿ç”¨ Git åº•å±‚çš„å‘½ä»¤è¿›è¡Œæ•°æ®æäº¤ã€‚\n\n```bash\n# å°†æš‚å­˜åŒºçš„ç›®å½•æ ‘ä¿å­˜ä¸‹æ¥\n\n$ git write-tree\n```\n\nè¦æ‰‹å·¥åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼Œå³æ–°çš„æäº¤è¦æœ‰ä¸¤ä¸ªçˆ¶æäº¤ã€‚è¿™ä¸¤ä¸ªçˆ¶æäº¤åˆ†åˆ«æ˜¯ master åˆ†æ”¯å’Œ util-branch åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚\n\n```bash\n$ echo \"subtree merge\" | \\\n  git commit-tree 2153518409d218609af40babededec6e8ef51616 \\\n  -p 911b1af2e0c95a2fc1306b8dea707064d5386c2e \\\n  -p 12408a149bfa78a4c2d4011f884aa2adb04f0934\n62ae6cc3f9280418bdb0fcf6c1e678905b1fe690\n```\n\néœ€è¦æŠŠå½“å‰çš„ master åˆ†æ”¯é‡ç½®åˆ°æ­¤æäº¤ IDï¼š\n\n```bash\n$ git reset 62ae6cc3f9280418bdb0fcf6c1e678905b1fe690\n```\n\næ“ä½œç¹çï¼Œå¯ä½¿ç”¨ä¸‹é¢ `subtree` å‘½ä»¤è¿›è¡Œä»£æ›¿ã€‚\n\n### åˆ©ç”¨å­æ ‘åˆå¹¶è·Ÿè¸ªä¸Šæ¸¸æ”¹åŠ¨\n\n```bash\n$ git checkout util-branch\n\n$ git pull\n\n$ git checkout master\n\n$ git merge -Xsubtree=lib util-branch\n```\n\n## Git Subtree\n\n### ç®¡ç†å­é¡¹ç›®\n\nå‡è®¾ `P1 é¡¹ç›®`ã€`P2 é¡¹ç›®` å…±ç”¨ `S é¡¹ç›®`\n\n- å…³è” S é¡¹ç›®\n\n```bash\ngit subtree add --prefix=<Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„> <Sé¡¹ç›®gitåœ°å€> <åˆ†æ”¯> --squash\n```\n\n`--squash` æ„æ€æ˜¯æŠŠ `subtree` çš„æ”¹åŠ¨åˆå¹¶æˆä¸€æ¬¡ `commit`ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹‰å–å­é¡¹ç›®å®Œæ•´çš„å†å²è®°å½•ã€‚`--prefix` ä¹‹åçš„ `=` ç­‰å·ä¹Ÿå¯ä»¥ç”¨ç©ºæ ¼ã€‚\n\n- æ›´æ–°ä»£ç \n\nP1ã€P2 é¡¹ç›®é‡Œå„ç§æäº¤ commitï¼Œå…¶ä¸­æœ‰äº› commit ä¼šæ¶‰åŠåˆ° `S ç›®å½•` çš„æ›´æ”¹ï¼Œä½†æ˜¯æ²¡å…³ç³»ã€‚\n\n- æäº¤æ›´æ”¹åˆ°å­é¡¹ç›®\n\n```bash\ngit subtree push --prefix=<Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„> <Sé¡¹ç›®gitåœ°å€> <åˆ†æ”¯>\n```\n\nGit ä¼šéå† `æ­¥éª¤ 2` ä¸­æ‰€æœ‰çš„ `commit`ï¼Œä»ä¸­æ‰¾å‡ºé’ˆå¯¹ `S ç›®å½•` çš„æ›´æ”¹ï¼Œç„¶åæŠŠè¿™äº›æ›´æ”¹è®°å½•æäº¤åˆ° `S é¡¹ç›®` çš„ Git æœåŠ¡å™¨ä¸Šï¼Œå¹¶ä¿ç•™ `æ­¥éª¤ 2` ä¸­çš„ç›¸å…³ `S çš„æäº¤` è®°å½•åˆ° `Sä»“åº“` ä¸­ã€‚\n\n- æ›´æ–°å­ç›®å½•\n\n```bash\ngit subtree pull --prefix=<Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„> <S é¡¹ç›® git åœ°å€> <åˆ†æ”¯> --squash\n```\n\n### æ‹†åˆ†å·²æœ‰é¡¹ç›®\n\néœ€è¦ä»ç°æœ‰é¡¹ç›®ä¸­æŠ½å–å…¬å…±æ¨¡å—å•ç‹¬è¿›è¡Œ Git ç®¡ç†ï¼Œå‡è®¾å·²æœ‰ `é¡¹ç›® P` æŠ½å– `é¡¹ç›® S`ã€‚\n\n- æäº¤æ—¥å¿—åˆ†ç¦»\n\n```bash\ngit subtree split -P <Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„> -b <ä¸´æ—¶branch>\n```\n\nGit ä¼šéå†æ‰€æœ‰çš„ commitï¼Œåˆ†ç¦»å‡ºä¸ S é¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ç›¸å…³çš„ commitï¼Œå¹¶å­˜å…¥ä¸´æ—¶ branch ä¸­ã€‚\n\n- åˆ›å»ºå­ repo\n\n```bash\nmkdir <Sé¡¹ç›®æ–°è·¯å¾„>\ncd Sé¡¹ç›®æ–°è·¯å¾„\ngit init\ngit pull <Pé¡¹ç›®çš„è·¯å¾„> <ä¸´æ—¶branch>\ngit remote add origin <Sé¡¹ç›®çš„gitä»“åº“>\ngit push origin -u master\n```\n\n- æ¸…ç†æ•°æ®\n\n```bash\ncd Pé¡¹ç›®çš„è·¯å¾„\ngit rm -rf <Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„>\ngit commit -m 'ç§»é™¤ç›¸åº”æ¨¡å—' # æäº¤åˆ é™¤ç”³è¯·\ngit branch -D <ä¸´æ—¶branch> # åˆ é™¤ä¸´æ—¶åˆ†æ”¯\n```\n\n- æ·»åŠ  subtree\n\n```bash\ngit subtree add --prefix=<Sé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„> <Sé¡¹ç›®gitåœ°å€> <åˆ†æ”¯> --squash\ngit push origin master\n```\n\næ‰§è¡Œå®Œç¬¬ 2 æ­¥æ—¶ï¼Œå¯¹åº”çš„ç›®å½•å·²ç»å‰¥ç¦»å‡ºæ¥å½¢æˆç‹¬ç«‹çš„é¡¹ç›®äº†ã€‚ç¬¬ 3ï¼Œ4 æ­¥ä¸»è¦æ˜¯æŠŠå½“å‰é¡¹ç›®çš„å¯¹åº”çš„æ–‡ä»¶ç»™åˆ é™¤ï¼Œé‡æ–°åœ¨ P é¡¹ç›®å»ºç«‹ Subtreeã€‚\n\n_tip:_\næ¨é€åˆ° GitHub Pageï¼š\n\n```bash\ngit subtree push --prefix=dist origin gh-pages\n```\n\n## References\n\n> - [4. ååŒæ¨¡å‹ &mdash; GotGit](http://www.worldhello.net/gotgit/04-git-model/)\n> - [Git Subtree çš„ä½¿ç”¨](https://www.jianshu.com/p/3096069e9b72)\n\n-- EOF --\n","tags":["git"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - å’Œå£°","url":"/2018/01/17/got-git-reading-notes-harmony/","content":"\nä¸»è¦å†…å®¹ï¼šã€Git åè®®ä¸å·¥ä½œååŒã€‘ã€ã€å†²çªè§£å†³ã€‘ã€ã€Git é‡Œç¨‹ç¢‘ã€‘ã€ã€Git åˆ†æ”¯ã€‘ã€ã€è¿œç¨‹ç‰ˆæœ¬åº“ã€‘ã€ã€è¡¥ä¸æ–‡ä»¶äº¤äº’ã€‘\n\n## Git åè®®ä¸å·¥ä½œååŒ\n\n### Git æ”¯æŒçš„åè®®\n\nSSHã€GITã€HTTPã€HTTPSã€FTPã€FTPSã€RSYNC åŠå‰é¢å·²ç»çœ‹åˆ°çš„æœ¬åœ°åè®®ã€‚\n\nSSH åè®®ï¼š\n\n```\nssh://[user@]example.com[:port]/path/to/repo.git/\n\n[user@]example.com:path/to/repo.git/\n```\n\nGIT åè®®ï¼Œæœ€å¸¸ç”¨çš„åªè¯»åè®®ï¼š\n\n```\ngit://example.com[:port]/path/to/repo.git/\n```\n\nHTTP[S] åè®®ï¼š\n\n```\nhttp[s]://example.com[:port]/path/to/repo.git/\n```\n\n<!-- more -->\n\n### å¼ºåˆ¶éå¿«è¿›å¼æ¨é€\n\n```\n$ git push -f\n```\n\nå¼ºåˆ¶æ¨é€ï¼Œä¼šå¼ºåˆ¶åˆ·æ–°æœåŠ¡å™¨ä¸­çš„ç‰ˆæœ¬ã€‚\n\n### ç¦æ­¢éå¿«è¿›å¼æ¨é€\n\n```\n$ git --git-dir=/path/to/repos/shared.git config receive.denyNonFastForwards true\n```\n\n## å†²çªè§£å†³\n\n### æ‹‰å›æ“ä½œä¸­çš„åˆå¹¶\n\n```\ngit pull = git fetch + git merge\n```\n\n### åˆå¹¶ç­–ç•¥\n\n> [Merge Strategis](https://git-scm.com/docs/git-merge#_merge_strategies)\n\nGit åˆå¹¶æ“ä½œæ”¯æŒå¾ˆå¤šåˆå¹¶ç­–ç•¥ï¼Œé»˜è®¤ä¼šé€‰æ‹©æœ€é€‚åˆçš„åˆå¹¶ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå’Œä¸€ä¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶æ—¶ä¼šé€‰æ‹© recursive åˆå¹¶ç­–ç•¥ï¼Œå½“å’Œä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„å…¶ä»–åˆ†æ”¯è¿›è¡Œåˆå¹¶æ—¶é‡‡ç”¨ octopus åˆå¹¶ç­–ç•¥ã€‚\n\n```\ngit merge [-s <strategy>] [-X <strategy-option>] [<commit>...]\n```\n\nThis option forces conflicting hunks to be auto-resolved cleanly by favoring our version.\n\n```\n$ git merge -s recursive -X ours [<commit>...]\n```\n\nMerge branch obsolete into the current branch, using ours merge strategy:\n\n```\n$ git merge -s ours obsolete\n```\n\n## Git é‡Œç¨‹ç¢‘\n\n### æ˜¾ç¤ºé‡Œç¨‹ç¢‘\n\n```\n$ git tag\n```\n\næ˜¾ç¤ºè¯´æ˜ã€‚`-n<num>` æ˜¾ç¤ºæœ€å¤š `<num>` è¡Œé‡Œç¨‹ç¢‘çš„è¯´æ˜ï¼š\n\n```\n$ git tag -n1\n```\n\nä½¿ç”¨ç»Ÿé…ï¼š\n\n```\n$ git tag -l v1.*\n```\n\næŸ¥çœ‹æäº¤å¯¹åº”çš„é‡Œç¨‹ç¢‘åŠå…¶ä»–å¼•ç”¨ï¼š\n\n```\n$ git log --oneline --decorate\n```\n\n### åˆ›å»ºé‡Œç¨‹ç¢‘\n\nå½“åˆ›å»ºäº†é‡Œç¨‹ç¢‘ mytag åï¼Œä¼šåœ¨ç‰ˆæœ¬åº“çš„ .git/refs/tags ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚å®é™…ä¸ŠæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæäº¤ï¼š\n\n```\n$ git tag mytag\n\n$ git cat-file -t mytag\ncommit\n```\n\nå¸¦è¯´æ˜çš„ tag æŒ‡å‘çš„ä¸å†æ˜¯ä¸€ä¸ªæäº¤ï¼Œè€Œæ˜¯ä¸€ä¸ª tag å¯¹è±¡ï¼š\n\n```\n$ git tag -m \"My first annotated tag.\" mytag2\n\n$ git cat-file -t mytag2\ntag\n```\n\nä¸ºé‡Œç¨‹ç¢‘å¯¹è±¡æ·»åŠ  GnuPG ç­¾åï¼š\n\n```\n$ git tag -s -m \"My first GPG-signed tag.\" mytag3\n\n```\n\n### åˆ é™¤é‡Œç¨‹ç¢‘\n\n```\n$ git tag -d mytag\nDeleted tag 'mytag' (was 60a2f4f)\n```\n\n### å…±äº«é‡Œç¨‹ç¢‘\n\nåˆ›å»ºçš„é‡Œç¨‹ç¢‘ï¼Œé»˜è®¤åªåœ¨æœ¬åœ°ç‰ˆæœ¬åº“ä¸­å¯è§ï¼Œä¸ä¼šå› ä¸ºå¯¹åˆ†æ”¯æ‰§è¡Œæ¨é€è€Œå°†é‡Œç¨‹ç¢‘ä¹Ÿæ¨é€åˆ°è¿œç¨‹ç‰ˆæœ¬åº“ã€‚\n\nå°† mytag é‡Œç¨‹ç¢‘å…±äº«åˆ°ä¸Šæ¸¸ç‰ˆæœ¬åº“ï¼š\n\n```\n$ git push origin mytag\n```\n\næ‰€æœ‰é‡Œç¨‹ç¢‘å…¨éƒ¨æ¨é€åˆ°è¿œç¨‹ç‰ˆæœ¬åº“ï¼š\n\n```\n$ git push origin refs/tags/*\n```\n\n- é‡Œç¨‹ç¢‘å…±äº«ï¼Œå¿…é¡»æ˜¾å¼çš„æ¨é€ã€‚\n- æ‰§è¡Œè·å–æˆ–æ‹‰å›æ“ä½œï¼Œè‡ªåŠ¨ä»è¿œç¨‹ç‰ˆæœ¬åº“è·å–æ–°é‡Œç¨‹ç¢‘ï¼Œå¹¶åœ¨æœ¬åœ°ç‰ˆæœ¬åº“ä¸­åˆ›å»ºã€‚\n- å¦‚æœæœ¬åœ°å·²æœ‰åŒåçš„é‡Œç¨‹ç¢‘ï¼Œé»˜è®¤ä¸ä¼šä»ä¸Šæ¸¸åŒæ­¥é‡Œç¨‹ç¢‘ï¼Œå³ä½¿ä¸¤è€…é‡Œç¨‹ç¢‘çš„æŒ‡å‘æ˜¯ä¸åŒçš„ã€‚\n\n### åˆ é™¤è¿œç¨‹ç‰ˆæœ¬åº“çš„é‡Œç¨‹ç¢‘\n\n```\n$ git push origin :mytag2\n```\n\n### é‡Œç¨‹ç¢‘å‘½åè§„èŒƒ\n\n[è¯­ä¹‰åŒ–ç‰ˆæœ¬ 2.0.0](https://semver.org/lang/zh-CN/)\n\nç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š\n\n- ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ\n- æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ\n- ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚\n\nå…ˆè¡Œç‰ˆæœ¬å·åŠç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯å¯ä»¥åŠ åˆ° `ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·` çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚\n\n## Git åˆ†æ”¯\n\nåˆ†æ”¯æ˜¯ä»£ç ç®¡ç†çš„åˆ©å™¨ã€‚å¦‚æœæ²¡æœ‰æœ‰æ•ˆçš„åˆ†æ”¯ç®¡ç†ï¼Œä»£ç ç®¡ç†å°±é€‚åº”ä¸äº†å¤æ‚çš„å¼€å‘è¿‡ç¨‹å’Œé¡¹ç›®çš„éœ€è¦ã€‚\n\n### åˆ†æ”¯å‘½ä»¤æ¦‚è¿°\n\n```\n# æ˜¾ç¤º\n1. git branch\n\n# åˆ›å»º\n2. git branch <branchname>\n3. git branch <branchname> <start-point>\n\n# åˆ é™¤ï¼Œ-d åœ¨åˆ é™¤åˆ†æ”¯ <branchname> æ—¶ä¼šæ£€æŸ¥æ‰€è¦åˆ é™¤çš„åˆ†æ”¯æ˜¯å¦å·²ç»åˆå¹¶åˆ°å…¶ä»–åˆ†æ”¯ä¸­ï¼Œå¦åˆ™æ‹’ç»åˆ é™¤ã€‚\n4. git branch -d <branchname>\n5. git branch -D <branchname>\n\n# é‡å‘½åï¼Œ-m å¦‚æœç‰ˆæœ¬åº“ä¸­å·²ç»å­˜åœ¨åä¸º <newbranch> çš„åˆ†æ”¯ï¼Œæ‹’ç»æ‰§è¡Œé‡å‘½åï¼Œè€Œ 7 ä¼šå¼ºåˆ¶æ‰§è¡Œã€‚\n6. git branch -m <oldbranch> <newbranch>\n7. git branch -M <oldbranch> <newbranch>\n```\n\nåˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼š\n\n```\ngit checkout -b <new_branch> [<start_point>]\n```\n\n### åˆ†æ”¯å˜åŸº\n\n- master\n- devï¼ˆå¼€å‘å®Œæˆï¼Œé¢†å…ˆ masterï¼‰\n\n```\n# å…ˆåˆ‡æ¢åˆ° dev\n$ git checkout dev\n\n# å˜åŸºæ“ä½œ\n$ git rebase master\n\n# é‡åˆ°å†²çªï¼Œè§£å†³å†²çª\n\n# æ·»åŠ åˆ°æš‚å­˜åŒº\n$ git add -u\n\n# ç»§ç»­å˜åŸº\n$ git rebase --continue\n\n# ç›´æ¥å°† dev æ¨é€åˆ°è¿œç¨‹ master\n$ git push origin dev:master\n\n# åˆ‡æ¢åˆ° master\n$ git checkout master\n\n# æ‹‰å–æœ€æ–°ä»£ç \n$ git pull\n\n# åˆ é™¤ dev åˆ†æ”¯\n$ git branch -d dev\n```\n\n## è¿œç¨‹ç‰ˆæœ¬åº“\n\n### è¿œç¨‹åˆ†æ”¯\n\næŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼š\n\n```\n$ git branch -r\n```\n\nåœ¨å‘è¿œç¨‹ç‰ˆæœ¬åº“æ‰§è¡Œè·å–æ“ä½œæ—¶ï¼Œä¸æ˜¯æŠŠè¿œç¨‹ç‰ˆæœ¬åº“çš„åˆ†æ”¯åŸå°ä¸åŠ¨åœ°å¤åˆ¶åˆ°æœ¬åœ°ç‰ˆæœ¬åº“çš„åˆ†æ”¯ä¸­ï¼Œè€Œæ˜¯å¤åˆ¶åˆ°å¦å¤–çš„å‘½åç©ºé—´ã€‚\n\nè¿œç¨‹åˆ†æ”¯ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åˆ†æ”¯ï¼Œæ˜¯ç±»ä¼¼äºé‡Œç¨‹ç¢‘ä¸€æ ·çš„å¼•ç”¨ã€‚å¦‚æœé’ˆå¯¹è¿œç¨‹åˆ†æ”¯æ‰§è¡Œæ£€å‡ºå‘½ä»¤ï¼Œä¼šçœ‹åˆ°å¤§æ®µçš„é”™è¯¯è­¦å‘Šã€‚\n\nè¿œç¨‹åˆ†æ”¯ç±»ä¼¼äºé‡Œç¨‹ç¢‘ï¼Œå¦‚æœæ£€å‡ºå°±ä¼šä½¿å¾—å¤´æŒ‡é’ˆ HEAD å¤„äºåˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€ã€‚å®é™…ä¸Šé™¤äº†ä»¥ refs/heads ä¸ºå‰ç¼€çš„å¼•ç”¨ä¹‹å¤–ï¼Œå¦‚æœæ£€å‡ºä»»ä½•å…¶ä»–å¼•ç”¨ï¼Œéƒ½å°†ä½¿å·¥ä½œåŒºå¤„äºåˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€ã€‚å¦‚æœå¯¹è¿œç¨‹åˆ†æ”¯è¿›è¡Œä¿®æ”¹å°±éœ€è¦åˆ›å»ºæ–°çš„æœ¬åœ°åˆ†æ”¯ã€‚\n\n### åˆ†æ”¯è¿½è¸ª\n\nä¸ºäº†èƒ½å¤Ÿåœ¨è¿œç¨‹åˆ†æ”¯ `origin/hello-1.x` ä¸Šè¿›è¡Œå·¥ä½œï¼Œéœ€è¦åŸºäºè¯¥è¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼š\n\n```\n$ git checkout hello-1.x\n```\n\nä»è¿œç¨‹åˆ†æ”¯åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œè‡ªåŠ¨å»ºç«‹äº†åˆ†æ”¯é—´çš„è·Ÿè¸ªï¼Œè€Œä»ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯åˆ›å»ºå¦å¤–ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯åˆ™æ²¡æœ‰ã€‚\n\nä» `hello-1.x` åˆ†æ”¯ä¸­åˆ›å»ºæ–°çš„æœ¬åœ°åˆ†æ”¯ `hello-jx`ï¼Œå¹¶ä¸è¿œç¨‹å»ºç«‹è”ç³»ã€‚\n\n```\n$ git checkout -b hello-jx hello-1.x\n```\n\n```\ncat .git/config\n```\n\n### è¿œç¨‹ç‰ˆæœ¬åº“\n\n```\n# è®¾ç½®\n$ git remote add new-remote file:///path/to/repos/hello-user1.git\n\n# ä¿®æ”¹ url\n$ git remote set-url new-remote file:///path/to/repos/hello-user2.git\n\n# å•ç‹¬ä¿®æ”¹ push åœ°å€\n$ git remote set-url --push new-remote /path/to/repos/hello-user2.git\n\n# ä¿®æ”¹ ç‰ˆæœ¬åº“åç§°\n$ git remote rename new-remote user2\n\n# å½“æ³¨å†Œäº†å¤šä¸ªè¿œç¨‹ç‰ˆæœ¬åº“å¹¶å¸Œæœ›è·å–æ‰€æœ‰è¿œç¨‹ç‰ˆæœ¬åº“çš„æ›´æ–°\n$ git remote update\n\n# å¦‚æœæŸä¸ªè¿œç¨‹ç‰ˆæœ¬åº“ä¸æƒ³åœ¨æ‰§è¡Œ git remote update æ—¶è·å¾—æ›´æ–°\n$ git config remote.user2.skipDefaultUpdate true\n\n# åˆ é™¤\n$ git remote rm\n```\n\n### PUSH å’Œ PULL æ“ä½œä¸è¿œç¨‹ç‰ˆæœ¬åº“\n\nåœ¨æ‰§è¡Œ `git pull` æ“ä½œçš„æ—¶å€™å¯ä»¥é€šè¿‡å‚æ•° `--rebase` è®¾ç½®ä½¿ç”¨å˜åŸºè€Œéåˆå¹¶æ“ä½œï¼Œå°†æœ¬åœ°åˆ†æ”¯çš„æ”¹åŠ¨å˜åŸºåˆ°è·Ÿè¸ªåˆ†æ”¯ä¸Šã€‚ä¸ºäº†é¿å…å› ä¸ºå¿˜è®°ä½¿ç”¨ `--rebase` å‚æ•°å¯¼è‡´åˆ†æ”¯çš„åˆå¹¶ï¼Œå¯è¿›è¡Œè®¾ç½®ï¼š\n\n```\n$ git config branch.<branchname>.rebase true\n```\n\nè¿™æ ·åœ¨é‡åˆ°å†²çªï¼ˆæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯å‡ºç°åç¦»ï¼‰çš„æƒ…å†µä¸‹ï¼Œä¼šé‡‡ç”¨å˜åŸºæ“ä½œï¼Œè€Œä¸æ˜¯é»˜è®¤çš„åˆå¹¶æ“ä½œã€‚\n\nå¦‚æœä¸ºæœ¬åœ°ç‰ˆæœ¬åº“è®¾ç½®å‚æ•° `branch.autosetuprebase` ï¼Œå€¼ä¸º `true`ï¼Œåˆ™åœ¨åŸºäºè¿œç¨‹åˆ†æ”¯å»ºç«‹æœ¬åœ°è¿½è¸ªåˆ†æ”¯æ—¶ï¼Œä¼šè‡ªåŠ¨é…ç½® `branch.<branchname>.rebase` å‚æ•°ã€‚\n\n### åˆ†æ”¯å’Œé‡Œç¨‹ç¢‘çš„å®‰å…¨æ€§\n\n- ç”¨ `reflog` è®°å½•å¯¹åˆ†æ”¯çš„æ“ä½œå†å²ã€‚é»˜è®¤åˆ›å»ºçš„å¸¦å·¥ä½œåŒºçš„ç‰ˆæœ¬åº“éƒ½ä¼šåŒ…å« `core.logallrefupdates` ä¸º `true` çš„é…ç½®ï¼Œè¿™æ ·åœ¨ç‰ˆæœ¬åº“ä¸­å»ºç«‹çš„æ¯ä¸ªåˆ†æ”¯éƒ½ä¼šåˆ›å»ºå¯¹åº”çš„ `reflog`ã€‚ä½†æ˜¯åˆ›å»ºçš„è£¸ç‰ˆæœ¬åº“é»˜è®¤ä¸åŒ…å«è¿™ä¸ªè®¾ç½®ï¼Œä¹Ÿå°±ä¸ä¼šä¸ºæ¯ä¸ªåˆ†æ”¯è®¾ç½® `reflog`ã€‚å¯èƒ½å› ä¸ºåˆ†æ”¯è¯¯æ“ä½œå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥è€ƒè™‘ä¸ºè£¸ç‰ˆæœ¬åº“æ·»åŠ æ­¤é…ç½®ã€‚\n\n- å…³é—­éå¿«è¿›å¼æäº¤ã€‚é…ç½® `receive.denyNonFastForwards` è®¾ç½®ä¸º `true`ï¼Œåˆ™ç¦æ­¢ä¸€åˆ‡éå¿«è¿›å¼æ¨é€ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡æ¶è®¾åŸºäº SSH åè®®çš„ Git æœåŠ¡å™¨ï¼Œé…ç½®å¼ºåˆ¶æäº¤çš„ç”¨æˆ·æƒé™ã€‚\n\n- å…³é—­åˆ†æ”¯åˆ é™¤åŠŸèƒ½ã€‚é…ç½® `receive.denyDeletes` è®¾ç½®ä¸º `true`ï¼Œåˆ™ç¦æ­¢åˆ é™¤åˆ†æ”¯ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯ï¼šé…ç½®åˆ†æ”¯åˆ é™¤çš„ç”¨æˆ·æƒé™ã€‚\n\n## è¡¥ä¸æ–‡ä»¶äº¤äº’\n\nå°†æœ€è¿‘ä¸‰ä¸ªæäº¤è½¬æ¢ä¸ºè¡¥ä¸æ–‡ä»¶ï¼š\n\n```\n$ git format-patch -s HEAD~3..HEAD\n```\n\n`-s` ä¼šåœ¨å¯¼å‡ºçš„è¡¥ä¸æ–‡ä»¶ä¸­æ·»åŠ å½“å‰ç”¨æˆ·çš„ç­¾åã€‚\n\nåº”ç”¨è¡¥ä¸ï¼š\n\n```\n$ git am user1-mail-archive\n```\n\n`git apply` å¯ä»¥åº”ç”¨ä¸€èˆ¬æ ¼å¼çš„è¡¥ä¸æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½æ‰§è¡Œæäº¤ï¼Œä¹Ÿä¸èƒ½ä¿æŒè¡¥ä¸ä¸­çš„ä½œè€…ä¿¡æ¯ã€‚\n\n> Reference:\n>\n> - [3. Git å’Œå£° &mdash; GotGit](http://www.worldhello.net/gotgit/03-git-harmony)\n","tags":["git"]},{"title":"R.swift å¼ºç±»å‹å¼•ç”¨èµ„æºæ–‡ä»¶","url":"/2018/01/17/r-swift-getting-started/","content":"\n[R.swift](https://github.com/mac-cain13/R.swift) è·å–å¼ºç±»å‹ã€è‡ªåŠ¨ç¼–è¯‘çš„å›¾ç‰‡ã€å­—ä½“ã€segues ç­‰èµ„æºã€‚\n\nä»¥é¿å…æ— æ³•ç¼–è¯‘æ—¶æ£€æŸ¥ `å­—ç¬¦ä¸²` çš„å½¢å¼å¼•ç”¨èµ„æºæ‰€å¯¼è‡´çš„é”™è¯¯ã€‚\n\n```swift\nlet icon = UIImage(named: \"settings-icon\")\nlet font = UIFont(name: \"San Francisco\", size: 42)\nlet color = UIColor(named: \"indictator highlight\")\nlet viewController = CustomViewController(nibName: \"CustomView\", bundle: nil)\nlet string = String(format: NSLocalizedString(\"welcome.withName\", comment: \"\"), locale: NSLocale.current, \"Arthur Dent\")\n```\n\nWith R.swift\n\n```swift\nlet icon = R.image.settingsIcon()\nlet font = R.font.sanFrancisco(size: 42)\nlet color = R.color.indicatorHighlight()\nlet viewController = CustomViewController(nib: R.nib.customView.name)\nlet string = R.string.localizable.welcomeWithName(\"Arthur Dent\")\n```\n\n<!-- more -->\n\n## é…ç½®\n\nå…¶ä¸­ GitHub ä¸Šæœ‰çš„å°±ä¸å†ç´¯è¿°äº†ï¼Œä¸»è¦æ³¨æ„ï¼š\n\n- æ·»åŠ  `R.generated.swift` ä¸è¦å‹¾é€‰ `Copy items if needed`ï¼Œè½¯å¼•ç”¨å°±å¥½ã€‚\n- è¦åœ¨ `.gitignore` æ·»åŠ  `*.generated.swift` ä»¥é¿å…ä¸å¿…è¦çš„å†²çªã€‚\n\næ·»åŠ æ–°çš„èµ„æºæ–‡ä»¶åéœ€è¦ `command + b` ç¼–è¯‘ä¸‹ï¼Œæ‰å¯ä»¥ä½¿ç”¨ã€‚\n\n## .clr é¢œè‰²æ–‡ä»¶çš„åˆ›å»ºå’Œä½¿ç”¨\n\nä½¿ç”¨ Xcode åˆ›å»º .clr æ–‡ä»¶ï¼š\n\n<img src=\"https://user-images.githubusercontent.com/9289792/80204310-36566900-865b-11ea-864b-89a8e5cc8e75.jpg\" alt=\"Create a Color Palette\" width=\"300px\" />\n\nä¹‹åå¯ä»¥åœ¨å…¶ä¸­æ·»åŠ é¢œè‰²ï¼Œé€‰æ‹©é¢œè‰²å›è½¦å¯ä»¥å¯¹é¢œè‰²ä»æ–°å‘½åã€‚\n\nç”Ÿæˆçš„ `.clr` æ–‡ä»¶ä¿å­˜åœ¨ `~/library/Colors` ä¸‹ï¼Œå¯ä»¥å¯¼å…¥åˆ°é¡¹ç›®åå†é€šè¿‡ `R.color` ä½¿ç”¨ã€‚\n\nTips æ‰“å¼€ã€å…³é—­éšè—æ–‡ä»¶ï¼š\n\n```bash\ncommand + shift + .\n```\n\n## References\n\n- [XCode Tip: Color Palette](https://www.natashatherobot.com/xcode-color-palette/)\n","tags":["ios","swift"]},{"title":"Xcode ä¸çŸ¥åçš„å®ç”¨æŠ€å·§","url":"/2018/01/12/xcode-tips/","content":"\n## çŠ¶æ€æ \n\n### Help\n\n`Search` æ¡†å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ£€ç´¢åˆ°ç›¸å…³çš„è®¾ç½®é¡¹ã€‚\n\n<img src=\"https://user-images.githubusercontent.com/9289792/80204076-c811a680-865a-11ea-8c0b-5e3b70ae22bd.jpg\" alt=\"xcode-unknown-tips-Search\" width=\"960px\" />\n\n<!-- more -->\n\n## Navigator\n\n`âŒ˜ 1` .. `âŒ˜ 7` å¯ä»¥åˆ‡æ¢çª—å£ã€‚\n\n### Show the Symbol navigator\n\nåœ¨ç±»ä¸å¤šæ—¶ï¼Œå¯ä»¥æ–¹ä¾¿çœ‹æ‰€æœ‰ç±»çš„ç»“æ„ï¼Œç±»å¤šæ—¶æ—¶ä½¿ç”¨ä¸‹é¢çš„ filter åŠŸèƒ½ã€‚\n\n<img src=\"https://user-images.githubusercontent.com/9289792/80204084-ca740080-865a-11ea-8fb0-e102827a3123.jpg\" alt=\"xcode-unknown-tips-Show the Symbol navigator\" width=\"260px\" />\n\n### Show the Breakpoint navigator\n\nç‚¹å‡»å³ä¸‹è§’ `+` é€‰æ‹© `Exception Breakpoint..`ï¼Œå¯ä»¥åœ¨æ·»åŠ æ›´æ˜ç¡®çš„æŠ¥é”™ç‚¹ï¼Œå¯ä»¥é€‰æ‹©è¯­è¨€æ˜¯ obj-c è¿˜æ˜¯ Swfitã€‚\n\n<img src=\"https://user-images.githubusercontent.com/9289792/80204086-cb0c9700-865a-11ea-93b5-7fc0edd67daf.jpg\" alt=\"xcode-unknown-tips-Show the Breakpoint navigator\" width=\"260px\" />\n\n## Utilities\n\n`âŒ˜ âŒ¥ 1` .. `âŒ˜ âŒ¥ 7` å¯ä»¥åˆ‡æ¢çª—å£ã€‚\n\n### Show the Code Snippet Library\n\nä»£ç ç‰‡æ®µæ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥å°†è‡ªå·±çš„å†™å¥½çš„ç‰‡æ®µæ‹–å…¥ã€‚\n\n<img src=\"https://user-images.githubusercontent.com/9289792/80204090-cba52d80-865a-11ea-9d1f-d6f772fc7e1c.jpg\" alt=\"xcode-unknown-tips-Show the Code Snippet Labrary\" width=\"260px\" />\n\n### Show the Media Library\n\nå¯ä»¥ç›´æ¥ä»ä¸­æ‹–æ‹½å›¾ç‰‡æˆ UIImageView æ”¾å…¥ xib ä¸­ã€‚\n\n## xib\n\n### å¿«æ·é”®\n\næŒ‰ä½ `option` æ‹–æ‹½å¯ä»¥å¿«é€Ÿå¤åˆ¶ç»„ä»¶ã€‚\n\n## å¿«æ·é”®\n\n### option âŒ¥\n\n- æŒ‰ä½ `âŒ¥` å¹¶ç‚¹å‡»ä»£ç æˆ–æ–¹æ³•æ—¶ï¼Œå¯æŸ¥çœ‹è¡Œå†…æ–‡æ¡£å¸®åŠ©ã€‚\n- æŒ‰ä½ `âŒ¥` ç‚¹å‡»æ–‡ä»¶å¯ä»¥è¾…åŠ©ç¼–è¾‘çª—æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼ˆå¤šæ æ˜¾ç¤ºï¼Œå¯ä»¥ç”¨äº xib ä¸ code ç»‘å®šæ•°æ®ï¼‰ã€‚_å¥½ç”¨_\n- æŒ‰ä½ `âŒ¥ â‡§` ç‚¹å‡»æ–‡ä»¶å¯ä»¥é€‰æ‹©æ–‡ä»¶æ‰“å¼€çš„çª—å£ä½ç½®ã€‚\n\n### æ˜¾ç¤ºå’Œéšè—æ \n\n- `âŒ˜ â‡§ y` æ˜¾ç¤º/éšè—è°ƒè¯•åŒºåŸŸã€‚\n- `âŒ˜ âŒ¥ â` æ˜¾ç¤ºè¾…åŠ©ç¼–è¾‘æ ï¼ŒOpen the assistant editor\n- `âŒ˜ â` éšè—è¾…åŠ©ç¼–è¾‘å™¨æ ã€‚\n\n### ç»„åˆé”®\n\n> ^ ä¸º controlï¼ŒâŒ¥ ä¸º option\n\n- `âŒ˜ âŒ¥ {` `âŒ˜ âŒ¥ }` æ•´è¡Œä¸Šä¸‹ç§»åŠ¨ä»£ç ã€‚\n- å°†å…‰æ ‡æ”¾åœ¨æ–¹æ³•åä¸Šä»»ä¸€ä½ç½®ï¼Œç‚¹å¼€ `Eidt`ï¼Œç‚¹å‡» `âŒƒ â‡§` å°†çœ‹åˆ° `Copy Qualified Symbol Name`ï¼Œç‚¹å‡» `âŒƒ â‡§ âŒ¥` å°†çœ‹åˆ° `Copy Symbol Name`ï¼Œeg `[UIColor colorWithRed:255/255.0f green:127/255.0f blue:80/255.0f alpha:1]` å°†ä¼šè¢«æ‹·è´ä¸º `+[UIColor colorWithRed:green:blue:alpha:]`ã€‚\n- è‡ªåŠ¨ç¼©è¿›ä»£ç  `^ i` æˆ–è€…å…¨é€‰ `âŒ˜ a` å `^ i`ã€‚\n- `âŒ˜ â‡§ o` Open Quickly æŸ¥æ‰¾æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ `âŒ˜ space`ã€‚\n\n## command line\n\n- `Security find-identity -v` æ˜¾ç¤ºå‡ºå·²ç»å®‰è£…çš„æœ‰æ•ˆèº«ä»½ã€‚\n\n## References\n\n- [\\[è¯‘\\]æ¯ä¸ª iOS å¼€å‘è€…éƒ½è¯¥çŸ¥é“çš„ 17 ä¸ª Xcode å°æŠ€å·§](https://juejin.im/post/5a7198ac51882573505189c8)\n","tags":["ios","xcode"]},{"title":"å›é¡¾ 2017","url":"/2018/01/05/review-2017/","content":"\n2017 å…³é”®è¯ï¼šBirdsã€ç¦»èŒã€ç‹¼äººæ€ã€ç™½æ´‹æ·€ã€iOSã€è‡ªå¦‚ã€‚\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=298 height=52 src=\"//music.163.com/outchain/player?type=2&id=423314746&auto=0&height=32\"></iframe>\n\n## Birds\n\nBirds æ˜¯è‡ªå·±ç¼–å†™æ—¶é—´æœ€é•¿çš„ä¸€ä¸ª Web é¡¹ç›®ã€‚é¡¹ç›®æ¥æ‰‹ã€æ”¹ç‰ˆã€é‡æ„ã€è¿­ä»£ã€ç›ˆåˆ©ï¼Œä¸ŠåŠå¹´æ¯å¤©å·¥ä½œéƒ½æ˜¯é¢å¯¹å®ƒã€‚\n\n<!-- more -->\n\nBirds è‰¯å¥½çš„è¡¨ç°ä¸éœ€æ±‚äº’ç›¸æ¨åŠ¨ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå‡å¦‚æœ‰éœ€æ±‚è€Œé¡¹ç›®æ²¡æœ‰æˆé•¿ï¼Œæˆ–é¡¹ç›®æˆé•¿æ²¡äº†éœ€æ±‚ï¼Œå¯¹å·¥ç¨‹æ¥è¯´éƒ½åªèƒ½æ˜¯çº¸ä¸Šè°ˆå…µã€æ— äº‹å¯åšã€‚é¡¹ç›®ä¸­çš„è§„èŒƒçš„é‡è¦æ€§ï¼Œæ— è®ºæ˜¯ä»£ç è¿˜æ˜¯æ•°æ®åº“ï¼Œåªè¦é¡¹ç›®ä¸æ˜¯å¤­æŠ˜ç»ˆå°†æ˜¾ç°ï¼Œå¯¹äºè§„èŒƒæ€§æˆ‘ç»ä¸ä¼šå¼€å€’è½¦ï¼Œåšä»»ä½•å¦¥åï¼Œç§ç§ç»å†åªè¯´æ˜ï¼šè¿™é‡Œæ¬ çš„ä¸œè¥¿æ€»ä¼šè¿˜ã€‚å¦‚ä½•åº”å¯¹éœ€æ±‚çš„åƒå˜ä¸‡åŒ–ï¼Œå°ç»“å‡ ç‚¹ï¼šæ¨¡å—åŒ–ã€ç»„ä»¶åŒ–æ€æƒ³ï¼ŒåŠŸèƒ½å¤šå¯é…ç½®ï¼ŒåŠŸèƒ½å¯æ‹”æ’ï¼ŒåŠŸèƒ½æ–¹æ³•ç²’åº¦è¦å°ï¼›ä¸è¦å¯¹ç¨‹åºè‚†æ„è¿›è¡Œæ‰“è¡¥ä¸å¼çš„ä¿®æ”¹ï¼Œå‡å°‘å¯¹æµç¨‹å…¥ä¾µï¼›å½“æŸä¸€å¤„çš„é€»è¾‘å¢åŠ æ—¶è¦åŠæ—¶é‡æ–°ä¿®æ”¹ã€å®šä¹‰æµç¨‹ï¼›å¯¹éœ€æ±‚ç›®çš„çš„æ­£ç¡®ç†è§£æ›´æ˜¯èƒ½é«˜æ•ˆå¼€å‘ã€‚\n\nå¯¹å‰ç«¯é‡æ–°è®¤è¯†çš„ä¸€å¹´ã€‚ç°åœ¨çš„å‰ç«¯å’Œå¤§å­¦æ—¶åˆšåˆšæ¥è§¦æ—¶ï¼Œå·²ç»å¤§ä¸ä¸€æ ·äº†ã€‚å‰ç«¯èƒ½åšçš„äº‹æƒ…è¶Šæ¥è¶Šå¤šï¼Œå¾ˆå¤šä¸šåŠ¡é€»è¾‘éƒ½åœ¨å‰ç«¯å¤„ç†ï¼ŒæœåŠ¡ç«¯åªéœ€è¦æä¾›æ¥å£ï¼Œåˆ†å·¥åˆä½œæ›´å®¹æ˜“ã€‚æµ…å° React Vue Webpack åï¼Œä¹Ÿè®¸å‰ç«¯æ‰æ˜¯è‡ªå·±çš„å½’å®¿ã€‚\n\n## ç¦»èŒ\n\nç¦»èŒçš„ä¸æ˜¯æˆ‘ã€‚è€äººèµ°ï¼Œæ–°äººæ¥ï¼Œæ–°äººèµ°ã€‚ç¦»èŒä¸€è¯åœ¨æˆ‘èº«è¾¹è·Ÿäº†ä¸€å¹´éƒ½æ²¡æœ‰åœä¸‹æ¥ã€‚åŒäº‹ç¦»èŒçš„åŸå› å¾ˆå¤šï¼Œç¦»å¼€åŒ—äº¬ã€å…¬å¸å‘å±•ã€è‡ªæˆ‘å‘å±•... é©¬äº‘è¯´ç¦»èŒçš„åŸå› å°±ä¸¤ä¸ªï¼š1. é’±æ²¡ç»™å¤Ÿã€‚2. å—äº†å§”å±ˆã€‚æˆ‘èµ·åˆæ˜¯è®¤åŒè¿™ä¸€è¯´æ³•çš„ï¼Œä½†æ˜¯åæ¥è§‰å¾— â€œäººâ€ æˆ–è€…è¯´ â€œäººçš„æ€æƒ³â€ æˆ–è€…è¯´ â€œäººæ€§â€ åœ¨å…¶ä¸­å½±å“ä½œç”¨éå¸¸çš„å¤§ã€‚ç›¸åŒçš„äº‹æƒ…ä¸åŒçš„è§’åº¦çœ‹ï¼Œç»“æœç›¸å»ç”šè¿œï¼Œå¦‚æœåŸºæœ¬çš„ç†å¿µä¸åŒï¼Œé‚£äº‹æƒ…åŸºæœ¬æ˜¯æ— æ³•è°ƒå’Œçš„ã€‚\n\nå¯¹åšçš„äº‹æƒ…çš„è®¤åŒæ„Ÿï¼Œå¯¹è‡ªæˆ‘çš„å®šä½ä¸è®¤è¯†ï¼Œå¯¹ç°å®æƒ…å†µçš„å†·é™æ€è€ƒï¼Œè¿™å‡ ç‚¹éœ€è¦åå¤å’€åš¼ã€‚\n\nåˆ†äº«ä¸€ç¯‡æ–‡ç« ï¼š[å…¬å¸æ²¡å¤§ç‰›å¸¦ï¼Œéœ€è¦ç¦»èŒä¹ˆï¼Ÿ](http://stormzhang.com/2017/06/26/leave-if-no-experts/)ã€‚å¯¹äºåˆšå…¥é—¨çš„æˆ‘ä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»£è¡¨æ€§çš„é—®é¢˜ã€‚å¤ªå¤šæ—¶å€™æˆ‘ä»¬æœŸå¾…åˆ«äººï¼Œå¿˜äº†è‡ªå·±ã€‚å…¬å¸æœ‰å¤§ç‰›ï¼Œèƒ½è·Ÿç€å­¦æ˜¯å¹¸è¿ï¼Œæ²¡æœ‰æ˜¯å¸¸æ€ã€‚å…ˆæ¥å—äº†è¿™ä¸ªè®¾å®šï¼Œä¼šæ›´å®¹æ˜“æ‰¾æé«˜è‡ªå·±çš„æ–¹æ³•ã€‚æœ‰æ²¡æœ‰å¤§ç‰›å¹¶ä¸é‡è¦ï¼Œæˆ‘ä»¬æ˜¯ä¸ºäº†é‚£ä¸ªæ›´å¥½çš„è‡ªå·±ã€‚\n\n## ç‹¼äººæ€\n\n2017 ç«çš„æ¸¸æˆå¾ˆå¤šï¼šç‹¼äººæ€ã€å®ˆæœ›å…ˆé”‹ã€ç‹è€…è£è€€ã€åƒé¸¡ã€‚ç‹¼äººæ€è¿™ä¸€æ€ï¼Œå¥½åƒæ€åˆ°äº†æ¯•ä¸šå‰å’ŒåŒå­¦èˆå‹åœ¨ä¸€èµ·è‡­ high çš„æ—¥å­ã€‚å¯è¯´éªšè¯ã€äº’ç›¸ dissã€äº’ç›¸å¹æ§ï¼ŒçœŸçœŸå‡å‡å…¶ä¹æ— ç©·ã€‚æœ€èµ¤é¸¡çš„æ˜¯é±¼ç‚¸å‡ºäº†ä¸ªå¥³ç›†å‹ï¼Œå„è·¯åŒå­¦äº²ä¸ŠåŠ äº²ï¼Œæ— æ³•å…‹è¯´ã€‚\n\n## ç™½æ´‹æ·€\n\n> æˆ‘æƒ³ ä½ è¯´\n> ä½ ä¸è¦åœ¨å­¤å• è®©æˆ‘åšä½ çš„ä¼´\n\nç™½æ´‹æ·€å»è¿‡å››æ¬¡ï¼Œé‚£é‡Œçš„æ¸©æ³‰è¿‡å»ä¸¤æ¬¡ï¼Œå¹´ä¸­ Team Building å†å–œåŠ ä¸€ï¼Œè€Œè¿™ä¸€æ¬¡è®©è¿™é‡Œæœ‰äº†ç¾ä¸½æ•…äº‹ã€‚å–·æ³‰ã€æ²™å‘ï¼Œå‡ºç°äº†å¯¹çš„äººã€‚\n\n## iOS\n\nReact Native çš„ä¸€æ³¢å°è¯•åï¼Œèµ°ä¸Šäº†ç§»åŠ¨å¼€å‘çš„é“ã€‚Swift è®©ä¸Š iOS è½¦çš„é—¨æ§›é™ä½ä¸å°‘ï¼ŒSwift API è¶‹å‘ç¨³å®šï¼Œå¯ä»¥è¯´è¿™æ˜¯æœ€å¥½çš„æ—¶å€™ã€‚GitHub åº”è¯¥æ˜¯å†ä¹Ÿæ”¾ä¸ä¸‹äº†ï¼Œå¤–æ–‡çš„ä¹¦ç±ã€æ–‡æ¡£ç¡®å®é è°±å•Šï¼Œæ¨èä¸€ä¸ªæ•™ç¨‹ç½‘ç«™ [iOS Tutorials - Ray Wenderlich](https://www.raywenderlich.com/category/ios) çœŸçš„é›¶åŸºç¡€å…¥é—¨ã€‚\n\næˆ‘ç›¸ä¿¡ï¼šä¸€ä¸ªäººè¯­è¨€çš„ç•Œé™ï¼Œå°±æ˜¯ä»–ä¸–ç•Œçš„è¾¹ç•Œã€‚\n\n## è‡ªå¦‚\n\nä¸€åœºå¤§ç«è®©æ— æ•°äººæ— å®¶å¯å½’ï¼Œå¹´æœ«æ¢æˆ¿ä¹Ÿå—ç‰µè¿ã€‚è¢«è‡ªå¦‚åœˆç²‰ï¼Œå…¶ä»–ä¸­ä»‹çš„æˆ¿å­çœŸçš„å¤ª low äº†ã€‚è‡ªå¦‚è®¢æˆ¿å­å±…ç„¶ä¹Ÿè¦æŠ¢ï¼Œä¸€æ³¢ä¸‰æŠ˜ã€å¤±è€Œå¤å¾—ã€‚åœ¨æ²¡æŠ¢åˆ°æˆ¿å­æ—¶ï¼ŒçœŸçš„æƒ³èµ°ï¼Œæƒ³ç¦»å¼€è¿™é‡Œäº†ï¼Œå¾ˆå‡„å‡‰ã€‚æœ€ç»ˆæ˜¯åœ¨å…¬å¸å¯¹é¢ä½ä¸‹äº†ï¼Œè¿‡ä¸Šäº†åœ¨å®¶åƒä¸­é¥­æ™šé¥­çš„æ—¥å­ã€‚\n\n## 2018 Happy New Year\n\n2017 è‡ªå·±æ˜¯å¹¸è¿çš„ï¼Œ2018 çŒ¥çå‘è‚²ï¼Œä¸è¦æµªï¼Œèƒœåˆ©å±äºä¼åœ°é­”ã€‚\n\n-- EOF --\n","tags":["report"],"categories":["report"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - ç‹¬å¥ - Part 4","url":"/2017/12/25/got-git-reading-notes-solo-part4/","content":"\nä¸»è¦å†…å®¹ï¼šã€å†å²ç©¿æ¢­ã€‘ã€ã€æ”¹å˜å†å²ã€‘ã€ã€Git å…‹éš†ã€‘\n\n## å†å²ç©¿æ¢­\n\næŸ¥çœ‹æ¡ä»¶ä¸ªæ•°ï¼š\n\n```\n$ git rev-list HEAD | wc -l\n```\n\n### ç‰ˆæœ¬è¡¨ç¤ºæ³•ï¼šgit rev-parse\n\n`git rev-parse` pick out and massage parameters for other git commands.\n\n- `--git-dir` å¯ä»¥æ˜¾ç¤º Git ç‰ˆæœ¬åº“çš„ä½ç½®\n- `--show-cdup` å½“å‰å·¥ä½œåŒºç›®å½•çš„æ·±åº¦\n- `--parseopt` å¯ä»¥ç”¨äºè¢« Git æ— å…³åº”ç”¨ç”¨äºè§£æå‘½ä»¤è¡Œå‚æ•°\n\n```\n# æ˜¾ç¤ºåˆ†æ”¯ï¼Œtag\n$ git rev-parse --symbolic --branches\n\n$ git rev-parse --symbolic --branches\n\n# æ˜¾ç¤ºå®šä¹‰çš„æ‰€æœ‰å¼•ç”¨\n$ git rev-parse --symbolic --glob=refs/*\n```\n\n<!-- more -->\n\n```\n# æ˜¾ç¤ºå¤šä¸ªè¡¨è¾¾å¼çš„ SHA1 å“ˆå¸Œå€¼ï¼š\n\n$ git rev-parse  master  refs/heads/master\n6652a0dce6a5067732c00ef0a220810a7230655e\n6652a0dce6a5067732c00ef0a220810a7230655e\n\n^åé¢çš„æ•°å­—ä»£è¡¨è¯¥æäº¤çš„ç¬¬å‡ ä¸ªçˆ¶æäº¤ï¼Œ~<n>å°±ç›¸å½“äºè¿ç»­<n>ä¸ªç¬¦å·^\n\n$ git rev-parse  A~3  A^^^\ne80aa7481beda65ae00e35afc4bc4b171f9b0ebf\ne80aa7481beda65ae00e35afc4bc4b171f9b0ebf\n\n# æš‚å­˜åŒºé‡Œçš„æ–‡ä»¶å’ŒHEADä¸­çš„æ–‡ä»¶ç›¸åŒ\n\n$ git rev-parse  :gitg.png  HEAD:gitg.png\nfc58966ccc1e5af24c2c9746196550241bc01c50\nfc58966ccc1e5af24c2c9746196550241bc01c50\n\n# åœ¨æäº¤æ—¥å¿—ä¸­æŸ¥æ‰¾å­—ä¸²çš„æ–¹å¼æ˜¾ç¤ºæäº¤\n$ git rev-parse :/\"Commit A\"\n81993234fc12a325d303eccea20f6fd629412712\n```\n\n### ç‰ˆæœ¬èŒƒå›´è¡¨ç¤ºæ³•ï¼šgit rev-list\n\n`git rev-list` å¯ä»¥å¸®åŠ©ç ”ç©¶ Git çš„å„ç§ç‰ˆæœ¬èŒƒå›´è¯­æ³•ã€‚\n\n```\n# ä»å¼€å§‹åˆ° tagï¼šA çš„æ‰€æœ‰å†å²æäº¤\n$ git rev-list --oneline  A\n\n# æ¯ä¸ª tag å†å²æäº¤çš„å¹¶é›†\n$ git rev-list --oneline  D  F\n\n# ^ æ’é™¤è¿™ä¸ªç‰ˆæœ¬åŠå…¶å†å²ç‰ˆæœ¬\n$ git rev-list --oneline  ^G D\n\n# ^G D ç­‰ä»·äº G..D\n$ git rev-list --oneline  G..D\n\n# å« ^ çš„å‚æ•°é¡ºåºä¸é‡è¦ï¼Œ..\n# ^B C ç›¸å½“äº B..C\n# C ^B ç›¸å½“äº B..C\n# C..B ç›¸å½“äº ^C B\n```\n\n### æµè§ˆæ—¥å¿—ï¼šgit\n\n`--graph` å‚æ•°è°ƒç”¨ `git log` å¯ä»¥æ˜¾ç¤ºå­—ç¬¦ç•Œé¢çš„æäº¤å…³ç³»å›¾ã€‚\n\n```\n$ git config --global alias.glog \"log --graph\"\n```\n\n- `--oneline` å•è¡Œæ˜¾ç¤º\n- `-<n>` æ˜¾ç¤ºæœ€è¿‘çš„ <n> æ¡æ—¥å¿—\n- `-p` æ˜¾ç¤ºå˜åŠ¨\n- `--stat` æ˜¾ç¤ºå˜åŠ¨æ‘˜è¦\n\næŸ¥çœ‹ã€åˆ†ææŸä¸€ä¸ªæäº¤ï¼š\n\n```\n$ git show D --stat\ntag D\n...\n\n$ git cat-file -p D^0\n```\n\n### å·®å¼‚æ¯”è¾ƒï¼šgit diff\n\n- æ¯”è¾ƒé‡Œç¨‹ç¢‘ B å’Œé‡Œç¨‹ç¢‘ Aï¼Œç”¨å‘½ä»¤ï¼šgit diff B A\n- æ¯”è¾ƒå·¥ä½œåŒºå’Œé‡Œç¨‹ç¢‘ Aï¼Œç”¨å‘½ä»¤ï¼šgit diff A\n- æ¯”è¾ƒæš‚å­˜åŒºå’Œé‡Œç¨‹ç¢‘ Aï¼Œç”¨å‘½ä»¤ï¼šgit diff -cached A\n- æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œç”¨å‘½ä»¤ï¼šgit diff\n- æ¯”è¾ƒæš‚å­˜åŒºå’Œ HEADï¼Œç”¨å‘½ä»¤ï¼šgit diff -cached\n- æ¯”è¾ƒå·¥ä½œåŒºå’Œ HEADï¼Œç”¨å‘½ä»¤ï¼šgit diff HEAD\n\næ˜¾ç¤ºä¸åŒç‰ˆæœ¬ä¸‹çš„æ–‡ä»¶å·®å¼‚ï¼š\n\n```\n$ git diff <commit1> <commit2> -- <paths>\n```\n\né Git ç›®å½•/æ–‡ä»¶çš„å·®å¼‚æ¯”è¾ƒï¼Œå¯åœ¨ç‰ˆæœ¬åº“ä¹‹å¤–ä½¿ç”¨ï¼š\n\n```\n$ git diff <path1> <path2>\n```\n\n- `--word-diff` å·®å¼‚é€ _è¯_ æ¯”è¾ƒï¼Œè€Œéç¼ºçœçš„é€ _è¡Œ_ æ¯”è¾ƒ\n\n### æ–‡ä»¶è¿½æº¯ï¼šgit blame\n\né€è¡Œæ˜¾ç¤ºæ–‡ä»¶ï¼Œåœ¨æ¯ä¸€è¡Œçš„è¡Œé¦–æ˜¾ç¤ºæ­¤è¡Œæœ€æ—©æ˜¯åœ¨ä»€ä¹ˆç‰ˆæœ¬å¼•å…¥çš„ï¼Œç”±è°å¼•å…¥ã€‚\n\nåªæƒ³æŸ¥çœ‹æŸå‡ è¡Œï¼Œä½¿ç”¨ -L n,m å‚æ•°ï¼š\n\n```\n$ git blame -L 6,+5 README\n```\n\n### äºŒåˆ†æŸ¥æ‰¾ï¼šgit bisect\n\nå®šä½é—®é¢˜ä»£ç ã€‚\n\n## æ”¹å˜å†å²\n\nä½œä¸ºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¸€æ—¦ç‰ˆæœ¬åº“è¢«å¤šäººå…±äº«ï¼Œæ”¹å˜å†å²å°±å¯èƒ½æ˜¯æ— æ³•å®Œæˆçš„ä»»åŠ¡ã€‚\n\n### æ‚”æ£‹\n\n`git commit â€“amend` å•æ­¥æ‚”æ£‹ï¼Œä¿®è¡¥å¼æäº¤ã€‚\n\næ£€å‡ºæ–‡ä»¶åˆ°å‰ä¸€ç‰ˆï¼š\n\n```\n$ git checkout HEAD^ -- src/hello.h\n```\n\n### å¤šæ­¥æ‚”æ£‹\n\n```\n$ git reset --soft HEAD^^\n```\n\n### å›åˆ°æœªæ¥\n\næ‹£é€‰æŒ‡ä»¤ `git cherry-pick` ä»ä¼—å¤šçš„æäº¤ä¸­æŒ‘é€‰å‡ºä¸€ä¸ªæäº¤åº”ç”¨åœ¨å½“å‰çš„å·¥ä½œåˆ†æ”¯ä¸­ã€‚\n\nè¯¥å‘½ä»¤éœ€è¦æä¾›ä¸€ä¸ªæäº¤ ID ä½œä¸ºå‚æ•°ï¼Œæ“ä½œè¿‡ç¨‹ç›¸å½“äºå°†è¯¥æäº¤å¯¼å‡ºä¸ºè¡¥ä¸æ–‡ä»¶ï¼Œç„¶ååœ¨å½“å‰ HEAD ä¸Šé‡æ”¾å½¢æˆæ— è®ºå†…å®¹è¿˜æ˜¯æäº¤è¯´æ˜éƒ½ä¸€è‡´çš„æäº¤ã€‚\n\næ“ä½œä¾‹å­ï¼š`A B C D E F` 6 æ¬¡æäº¤ã€‚\n\nä¾‹å­ 1.1ï¼šå‡ºæ‰ `D`ï¼š\n\n```\n# å°† HEAD æŒ‡é’ˆåˆ‡æ¢åˆ° C\n$ git checkout C\n\n# æ‹£é€‰å°† E æäº¤åœ¨å½“å‰ HEAD ä¸Š\n$ git cherry-pick E\n\n# æ‹£é€‰æ“ä½œå°† F æäº¤åœ¨å½“å‰ HEAD ä¸Š\n$ git cherry-pick master\n\n# å°† master åˆ†æ”¯æŒ‡å‘æ–°çš„æäº¤ IDï¼ˆf677821ï¼‰ä¸Š\n$ git checkout master\n$ git reset --hard HEAD@{1}\n```\n\nä¾‹å­ 1.2ï¼šD èå…¥ Cï¼š\n\n```\n$ git checkout D\n\n# å°† C å’Œ D èåˆ\n$ git reset --soft HEAD^^\n\n# æäº¤è¯´æ˜é‡ç”¨Cæäº¤çš„æäº¤è¯´æ˜\n$ git commit -C C\n\n$ git cherry-pick E\n$ git cherry-pick F\n```\n\ngit rebase å¯¹æäº¤æ‰§è¡Œå˜åŸºæ“ä½œï¼Œå³å¯ä»¥å®ç°å°†æŒ‡å®šèŒƒå›´çš„æäº¤â€œå«æ¥â€åˆ°å¦å¤–ä¸€ä¸ªæäº¤ä¹‹ä¸Šã€‚\n\n```\ngit rebase --onto <newbase> <since> <till>\n```\n\nå˜åŸºæ“ä½œçš„è¿‡ç¨‹ï¼š\n\n1. é¦–å…ˆæ‰§è¡Œ git checkout <till>ï¼Œå¦‚æœ till ä¸æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ™å˜åŸºæ“ä½œæ˜¯åœ¨ detached HEAD åˆ†ç¦»å¤´æŒ‡é’ˆ çŠ¶æ€çš„ï¼Œå½“å˜åŸºç»“æŸåï¼Œå¯¹ master åˆ†æ”¯æ‰§è¡Œé‡ç½®ä»¥å®ç°æŠŠå˜åŸºç»“æœè®°å½•åœ¨åˆ†æ”¯ä¸­ã€‚\n2. å°†<since>..<till>æ‰€æ ‡è¯†çš„æäº¤èŒƒå›´å†™åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ï¼ˆ<since>..<till>æ˜¯æŒ‡åŒ…æ‹¬<till>çš„æ‰€æœ‰å†å²æäº¤æ’é™¤<since>ä»¥åŠ<since>çš„å†å²æäº¤åå½¢æˆçš„ç‰ˆæœ¬èŒƒå›´ï¼‰\n3. å½“å‰åˆ†æ”¯å¼ºåˆ¶é‡ç½®ï¼ˆgit reset --hardï¼‰åˆ°<newbase>ã€‚\n4. ä»ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­çš„æäº¤åˆ—è¡¨ä¸­ï¼Œä¸€ä¸ªä¸€ä¸ªå°†æäº¤æŒ‰ç…§é¡ºåºé‡æ–°æäº¤åˆ°é‡ç½®ä¹‹åçš„åˆ†æ”¯ä¸Šã€‚\n5. å¦‚æœé‡åˆ°æäº¤å·²ç»åœ¨åˆ†æ”¯ä¸­åŒ…å«ï¼Œè·³è¿‡è¯¥æäº¤ã€‚\n6. å¦‚æœåœ¨æäº¤è¿‡ç¨‹é‡åˆ°å†²çªï¼Œå˜åŸºè¿‡ç¨‹æš‚åœã€‚ç”¨æˆ·è§£å†³å†²çªåï¼Œæ‰§è¡Œ git rebase â€“continue ç»§ç»­å˜åŸºæ“ä½œã€‚æˆ–è€…æ‰§è¡Œ git rebase â€“skip è·³è¿‡æ­¤æäº¤ã€‚æˆ–è€…æ‰§è¡Œ git rebase â€“abort å°±æ­¤ç»ˆæ­¢å˜åŸºæ“ä½œåˆ‡æ¢åˆ°å˜åŸºå‰çš„åˆ†æ”¯ä¸Šã€‚\n\nä¾‹å­ 2.1ï¼šå‡ºæ‰ `D`ï¼š\n\n```\n$ git rebase --onto C D F\n# or\n$ git rebase --onto C E^ F\n```\n\nä¾‹å­ 2.2ï¼šD èå…¥ Cï¼š\n\n```\n$ git checkout D\n\n# Cå’ŒDèåˆ\n$ git reset --soft HEAD^^\n\n$ git add .\n\n# å¤ç”¨ C çš„æäº¤ä¿¡æ¯\n$ git commit -C C\n\n# è®°ä½è¿™ä¸ªæäº¤ IDï¼Œå¯ä»¥ç”¨ tag çš„æ–¹æ³•\n$ git tag newbase\n\n$ git rebase --onto newbase E^ master\n```\n\n`-i` äº¤äº’å¼å˜åŸºæ–¹æ³•ã€‚\n\nä¾‹å­ 3.1ï¼šå‡ºæ‰ `D`ï¼š\n\n```\n$ git rebase -i D^\n\n# d, drop = remove commit\n# æäº¤ D æ ‡ç¤ºä¿®æ”¹ä¸º d\n```\n\nä¾‹å­ 3.2ï¼šD èå…¥ Cï¼š\n\n```\n$ git rebase -i C^\n\n# æäº¤ D æ ‡ç¤ºä¿®æ”¹ä¸º s\n```\n\n### ä¸¢å¼ƒå†å²\n\n**é‡ç‚¹å†…å®¹ç¬¬ä¸€æ¬¡ Get**\n\nå†å²æœ‰çš„æ—¶å€™ä¼šæˆä¸ºè´Ÿæ‹…ã€‚åªä¿ç•™æœ€è¿‘çš„ 100 æ¬¡æäº¤ï¼ŒæŠ›å¼ƒä¹‹å‰çš„å†å²æäº¤ã€‚é‚£ä¹ˆåº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ\n\nä¾‹ï¼šæ¸…é™¤ tag A ä¹‹å‰çš„æäº¤å†å²ï¼š\n\n```\n# æŸ¥çœ‹é‡Œç¨‹ç¢‘AæŒ‡å‘çš„ç›®å½•æ ‘\n$ git cat-file -p A^{tree}\n\n# ä½¿ç”¨git commit-treeå‘½ä»¤ç›´æ¥ä»è¯¥ç›®å½•æ ‘åˆ›å»ºæäº¤\n$ echo \"Commit from tree of tag A.\" | git commit-tree A^{tree}\n8f7f94ba6a9d94ecc1c223aa4b311670599e1f86\n\n# å‘½ä»¤git commit-treeçš„è¾“å‡ºæ˜¯ä¸€ä¸ªæäº¤çš„SHA1å“ˆå¸Œå€¼ã€‚\n# ä¼šå‘ç°è¿™ä¸ªæäº¤æ²¡æœ‰å†å²æäº¤ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºå­¤å„¿æäº¤ã€‚\n$ git log 8f7f94ba6a9d94ecc1c223aa4b311670599e1f86\n\n# å°†masteråˆ†æ”¯ä»é‡Œç¨‹ç¢‘åˆ°æœ€æ–°çš„æäº¤å…¨éƒ¨è¿ç§»åˆ°åˆšåˆšç”Ÿæˆçš„å­¤å„¿æäº¤ä¸Šã€‚\n$ git rebase --onto 8f7f94ba6a9d94ecc1c223aa4b311670599e1f86 A master\n```\n\n### åè½¬æäº¤\n\n```\n$ git revert HEAD\n```\n\n## Git å…‹éš†\n\n### é¸¡è›‹ä¸è£…åœ¨ä¸€ä¸ªç¯®å­é‡Œ\n\n```\n1. git clone <repository> <directory>\n2. git clone --bare   <repository> <directory.git>\n3. git clone --mirror <repository> <directory.git>\n```\n\nä¸€èˆ¬çº¦å®šä¿—æˆè£¸ç‰ˆæœ¬åº“çš„ç›®å½•åä»¥ `.git` ä¸ºåç¼€ã€‚\n\nç”¨æ³• 3 åŒºåˆ«äºç”¨æ³• 2 ä¹‹å¤„åœ¨äºç”¨æ³• 3 å…‹éš†å‡ºæ¥çš„è£¸ç‰ˆæœ¬å¯¹ä¸Šæ¸¸ç‰ˆæœ¬åº“è¿›è¡Œäº†æ³¨å†Œï¼Œè¿™æ ·å¯ä»¥åœ¨è£¸ç‰ˆæœ¬åº“ä¸­ä½¿ç”¨ git fetch å‘½ä»¤å’Œä¸Šæ¸¸ç‰ˆæœ¬åº“è¿›è¡ŒæŒç»­åŒæ­¥ã€‚\n\n### å…‹éš†ç”Ÿæˆè£¸ç‰ˆæœ¬åº“\n\n```\n$ git clone --bare /path/to/my/workspace/demo /path/to/repos/demo.git\n```\n\ndemo.git ç›®å½•å°±æ˜¯ç‰ˆæœ¬åº“ç›®å½•ï¼Œä¸å«å·¥ä½œåŒºã€‚\n\n```\n$ git --git-dir=/path/to/repos/demo.git config core.bare\ntrue\n\n# å‘å…¶ push\n$ git push /path/to/repos/demo.git\n```\n\n### åˆ›å»ºç”Ÿæˆè£¸ç‰ˆæœ¬åº“\n\n```\n$ git init --bare /path/to/repos/demo-init.git\n```\n\n> Reference:\n>\n> - [2. Git ç‹¬å¥ &mdash; GotGit](http://www.worldhello.net/gotgit/02-git-solo/index.html)\n","tags":["git"]},{"title":"iOS æ‹›è˜æ€»ç»“","url":"/2017/11/25/ios-recruitment-summary/","content":"\nè‡ªå·±ä¹Ÿåšäº†ä¸€æ¬¡é¢è¯•å®˜ã€‚ç®€å†çœ‹åˆ°äº†å¾ˆå¤šï¼Œå†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š\n\n## ä¸€äº›æ„Ÿå—\n\n- ä¸€äº›åŸºæœ¬çš„æŠ€èƒ½æ„Ÿè§‰ä¸ç”¨å†™ï¼Œä¸ä¼šå¸å¼•ä»€ä¹ˆæ³¨æ„åŠ›ã€‚æ‰€ä»¥è¦ç²¾æ‡‚ä¸€äº›ç‰¹åˆ«çš„æŠ€èƒ½ï¼ŒæŠ€æœ¯ç‚¹ã€‚\n- ä¸€äº› â€œä¸äº§å“æ²Ÿé€šâ€ â€œå®‰æ’å·¥ä½œâ€ï¼Œæˆ‘è§‰çš„ä¹Ÿä¸ç”¨å†™ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¸å¼•åŠ›ã€‚\n- ç®€å†è¦ä½“å‡ºè‡ªå·±æ“…é•¿çš„åœ°æ–¹ï¼Œç‰¹åˆ«çš„åœ°æ–¹ï¼Œå…¶ä»–çš„ä¸€ç¬”å¸¦è¿‡å°±å¯ä»¥ã€‚\n- ç®€å†ä¸Šçš„å­—è¯çš„ç»†èŠ‚æˆ‘æ¯”è¾ƒåœ¨æ„ï¼ŒiOS & IOSï¼ŒXcode & XCodeã€‚\n- æœ‰ GitHub Blog ç»å¯¹çš„å¥½è¯„ï¼Œä½†è¦æœ‰å†…å®¹ã€‚\n- åŸºç¡€çŸ¥è¯†ã€ä¸šåŠ¡èƒ½åŠ›ã€æ€§æ ¼ã€æ°”åœºã€‚\n\n<!-- more -->\n\n## æŠ€èƒ½\n\n### åŸºç¡€\n\n1. Objective-C Swift\n2. å†…å­˜ç®¡ç†æœºåˆ¶ï¼ŒMRC & ARC\n3. ä»£ç†ã€é€šçŸ¥ã€Block å›è°ƒæœºåˆ¶ é—­åŒ…\n4. KVCï¼ŒKVO æœºåˆ¶\n5. CoreData FMBD å½’æ¡£å­˜å‚¨ SQLite NSUserDefaults\n6. runtime è¿è¡Œæœºåˆ¶ï¼Œrunloop è¿è¡Œæœºåˆ¶\n7. GCD NSOperation NSThread å¤šçº¿ç¨‹ç¼–ç¨‹\n8. Socket é€šä¿¡\n9. å•ä¾‹ è§‚å¯Ÿè€…\n10. MVVM\n11. RESTful\n\n### ä¸šåŠ¡\n\n1. ç€‘å¸ƒæµ æŠ½å±‰\n2. æ–­ç‚¹ç»­ä¼  åª’ä½“æµ ç€‘å¸ƒæµ\n3. SSO å•ç‚¹ç™»é™†\n\n### Framework\n\n1. Cocoapods\n2. æ”¯ä»˜å® é«˜å¾· äºŒç»´ç æ‰«æ å‹ç›Ÿ æå…‰æ¨é€ çŸ­ä¿¡éªŒè¯\n3. å¾®ä¿¡ å¾®åšç™»é™† æ”¯ä»˜ in-app purchase\n4. SDWebImage AFNetworking Alamofire SnapKit MBProgressHUD\n5. IM ç¯ä¿¡\n6. Spring åŠ¨ç”»\n7. ICSDrawer ä¾§æ»‘èœå•\n8. AVOS Cloud SDK\n9. ZXing ZBar äºŒç»´ç \n10. XMPP\n\n### å…¶ä»–\n\n1. Axure\n2. è‰¯å¥½è‹±æ–‡æ–‡æ¡£é˜…è¯»èƒ½åŠ›\n\n## èŒè´£\n\n1. æ¨¡å—å°è£…\n2. ä¸Šæ¶\n3. è¿­ä»£\n4. æ²Ÿé€š\n5. æ•´ä½“æ¡†æ¶\n6. KVO ç›‘å¬å®ç°è‡ªå®šä¹‰ä¸‹æ‹‰åˆ·æ–°\n7. é’ˆå¯¹ä¸åŒçš„ç½‘ç»œçŠ¶æ€ è®¾ç½®ä¸åŒçš„ç¼“å­˜ç­–ç•¥\n8. å„ç§ SDK é›†æˆ\n9. HTML5 Native ç›¸äº’è°ƒç”¨\n\n## å¥‡å·§æ·«æŠ€\n\nè‡ªå·±å¯¹ iOS çš„ç†è§£è¿˜å¹¶ä¸æ·±ï¼Œå¦‚ä½•é¢è¯•æ›´æœ‰ç»éªŒçš„äººï¼Ÿ\n\nç­”ï¼šå‡†å¤‡çš„é—®é¢˜å¯ä»¥è‡ªå·±å¹¶ä¸å¤ªæ‡‚ï¼Œåªè¦é—®é¢˜é è°±ï¼Œè¦åšçš„å°±æ˜¯å¤šå¬ã€‚å¤šå¬é¢è¯•è€…çš„å›ç­”çš„çŠ¶æ€ï¼Œæ˜¯å«ç³Šï¼Ÿæ˜¯è‡ªä¿¡ï¼Ÿæ˜¯å¿ƒè™šï¼Ÿè€Œä¸”å¤šå¬å‡ ä½åä¹Ÿå°±å¤§æ¦‚å…¶çŸ¥é“ç­”æ¡ˆäº†ã€‚\n\n## å¥‡äº‹\n\n- å› ä¸ºæœ‰æœºè¯•é¢˜æ‰€ä»¥ä¸æ­¢ä¸€ä½æ€€ç–‘è¿™æ˜¯ä¸ªåœˆå¥—ï¼Œé¢è¯•æ˜¯ä¸ºäº†åšåŠŸèƒ½ã€‚\n\n## References\n\n- [æ‹›è˜ä¸€ä¸ªé è°±çš„ iOS](http://blog.sunnyxx.com/2015/07/04/ios-interview/)\n- [å“åŒå­¦çš„ Swift é¢è¯•é¢˜](http://www.jianshu.com/p/7c7f4b4e4efe)\n","tags":["ios"]},{"title":"Photoshop ç¼–è¾‘ GIF","url":"/2017/11/23/photoshop-edit-gif/","content":"\n## å½•åˆ¶ GIF\n\næ¨èä½¿ç”¨ [LICEcap](https://www.cockos.com/licecap/) å°å·§å¥½ç”¨ã€‚\n\n## GIF æŸ¥çœ‹æ–¹æ³•\n\nåœ¨ Mac ä¸ŠåŒå‡» GIF å°†æ˜¯æŒ‰å¸§æŸ¥çœ‹ä¸€å¹…ä¸€å¹…çš„å›¾ç‰‡ï¼ŒæŒ‰ä½ `ç©ºæ ¼` å¯ä»¥åŠ¨èµ·æ¥ã€‚ä¹Ÿå¯ä»¥é€‰æ‹© GIF å›¾ç‰‡ç›´æ¥ç‚¹å‡»ç©ºæ ¼é¢„è§ˆã€‚\n\n<!-- more -->\n\n## GIF ç¼–è¾‘\n\n### é¢„è§ˆ\n\nåœ¨ Mac ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ `é¢„è§ˆ` å¯¹ GIF è¿›è¡Œåˆ é™¤å¸§çš„æ“ä½œã€‚ä½†æ˜¯å‘ç°å†æ¬¡ä¿å­˜çš„ GIF åªæ’­æ”¾ä¸€æ¬¡ï¼Œä¸ä¼šå¾ªç¯æ’­æ”¾ã€‚\n\n### Photoshop\n\nä½¿ç”¨ Photoshop æ‰“å¼€ GIFï¼Œç‚¹å‡» `çª—å£ -> æ—¶é—´è½´`ï¼Œå¯åœ¨æ—¶é—´è½´ä¸­å¯¹å›¾ç‰‡è¿›è¡Œç¼–è¾‘ã€‚`æ–‡ä»¶ -> å¯¼å‡º -> å­˜å‚¨ä¸º Web æ‰€ç”¨æ ¼å¼` ç„¶ååœ¨ `å¾ªç¯é€‰é¡¹` é€‰æ‹© `æ°¸ä¹…`ã€‚\n\nåœ¨è¿™é‡Œä¹Ÿå¯ä»¥é™ä½ `å›¾åƒå¤§å°` å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ã€‚\n\nç‚¹å‡» `å­˜å‚¨` å¯¼å‡ºæ–°çš„ GIFã€‚\n\n-- EOF --\n","tags":["photoshop"]},{"title":"å…³äº GitHub README.md ä¸­å›¾ç‰‡åŠ è½½å¤±è´¥","url":"/2017/11/22/github-readme-content-length-exceeded/","content":"\n## é‡åˆ°çš„é—®é¢˜\n\nåœ¨ç¼–å†™ GitHub çš„ README.md åï¼Œå…¶ä¸­å¼•ç”¨çš„ç½‘ç»œå›¾ç‰‡æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œç‚¹å‡» `alt` çš„æ–‡å­—æç¤ºï¼š`Content length exceeded`ã€‚\n\n<!-- more -->\n\n## åˆ†æ\n\næ ¹æ® [About anonymized image URLs](https://help.github.com/articles/about-anonymized-image-urls/) è¿™ç¯‡æ–‡ç« ï¼šä¸Šä¼ çš„å›¾ç‰‡ URL å°†è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ªäººä¿¡æ¯å°†ä¸ä¼šè¢«è·Ÿè¸ªã€‚GitHub å°†ä½¿ç”¨ [å¼€æºé¡¹ç›® Camo](https://github.com/atmos/camo)ã€‚Camo å°†ä¸ºæ¯ä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆä¸€ä¸ªä»¥ `https://camo.githubusercontent.com/` åŒ¿åä»£ç† URL åŒæ—¶éšè—æ¥è‡ªå…¶ä»–ç”¨æˆ·çš„æµè§ˆå™¨è¯¦ç»†ä¿¡æ¯å’Œç›¸å…³ä¿¡æ¯ã€‚\n\næˆ‘å¼•ç”¨çš„ GIF å›¾ç‰‡æœ‰ **7MB** å¤šï¼Œé‚£ä¹ˆå›¾ç‰‡å¤§å°çš„é™åˆ¶æ˜¯å¤šå°‘ï¼Ÿ\n\n[camo - server.coffee#L18](https://github.com/atmos/camo/blob/master/server.coffee#L18)\n\n```txt\ncontent_length_limit = parseInt(process.env.CAMO_LENGTH_LIMIT || 5242880, 10)\n```\n\næ¢ç®—åå¤§å°æ­£å¥½æ˜¯ **5MB**ã€‚\n\n## References\n\n- [å…³äº GitHub æ— æ³•å›¾ç‰‡åŠ è½½çš„é—®é¢˜](http://soyaine.cn/blog/2016/12/31/soyaine-daily-070)\n","tags":["git"]},{"title":"Linux Mac ä½¿ç”¨ä»£ç†è¿æ¥ SSH","url":"/2017/10/28/linux-or-mac-ssh-by-proxy/","content":"\n## Ubuntu\n\n```bash\nssh -oProxyCommand=\"nc -x 127.0.0.1:1080 %h %p\" ubuntu@111.111.1.1\n```\n\n## Mac\n\n```bash\nssh -o \"ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p\" ubuntu@111.111.1.1\n```\n\n<!-- more -->\n\n## SecoureCRT\n\nSession Options - Connection - SSH2 - Firewallï¼Œåˆ›å»ºã€é€‰æ‹©ä»£ç†ã€‚\n\n## å‚æ•°\n\n- `-o ProxyCommand`ï¼šSSH å‘½ä»¤é€‰é¡¹ï¼Œä½ å¯ä»¥ç†è§£æˆä½¿ç”¨ â€œåœ¨ SSH ä¸­ä½¿ç”¨ä»£ç†â€ã€‚\n- `nc`ï¼šnetcat å‘½ä»¤ã€‚\n- `127.0.0.1:1080`ï¼šæœ¬åœ° Shadowsocks çš„ç›‘å¬åœ°å€å’Œç›‘å¬ç«¯å£ã€‚\n\n## å‘½ä»¤è¡Œ HTTP ä»£ç†\n\n```bash\nexport http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;\n```\n\n## é‰´åˆ«è‡ªå·±æ˜¯å¦çœŸçš„ä½¿ç”¨äº†ä»£ç†æ¥ç™»é™†æœåŠ¡å™¨\n\n```bash\nroot@ubuntu:~# who\nroot     pts/2        2017-05-13 18:13 (xxx.xxx.xxx.xxx)\n```\n\n## References\n\n- [Mac OS ä½¿ç”¨ shadowsock æ¥ä»£ç† ssh è®¿é—®æœåŠ¡å™¨](https://www.goodspb.net/mac-os-%E4%BD%BF%E7%94%A8-shadowsock-%E6%9D%A5%E4%BB%A3%E7%90%86-ssh-%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E5%99%A8/)\n\n-- EOF --\n","tags":["mac","linux"]},{"title":"MacBook ä½¿ç”¨å°æ„Ÿ","url":"/2017/10/28/simple-macbook-report/","content":"\nç°åœ¨è‡ªå·±çš„å¼€å‘ä¸»åŠ›æœºæ˜¯ï¼š2015 ç‰ˆçš„ MacBook Proã€‚å¯¹äºå·¥ç¨‹å¸ˆæ¥è®²ï¼ŒMacBook ç»å¯¹æ˜¯ç”¨æ¥æé«˜ç”Ÿäº§åŠ›çš„ï¼Œä¸æ˜¯è£…æ¯çš„ã€‚å¦‚æœæ¡ä»¶å…è®¸ååˆ†æ¨èï¼Œåæ­£æˆ‘æ˜¯å›ä¸æ¥äº†ã€‚\n\n<!-- more -->\n\n## ä¸€äº›æ„Ÿå—\n\n- è´­ä¹°å‹å·é€‰æ‹©ï¼š15 å¯¸ i7 Pro æ²¡çš„è¯´ï¼Œå±å¤§çœ‹çš„å¾ˆçˆ½ã€‚\n- F1... ç­‰é”®å¹¶æœ‰æ²¡æœ‰åŸæ¥æƒ³è±¡çš„é‚£ä¹ˆé‡è¦ï¼Œæ¸¸è§ˆå™¨åˆ·æ–°ä»€ä¹ˆçš„éƒ½æœ‰ä»£æ›¿çš„é”®ã€‚æˆ‘æ„Ÿè§‰ F ç³»åˆ—çš„é”®é»˜è®¤ä¸ºåŠŸèƒ½é”®æŒºå¥½çš„ã€‚Filco é”®ç›˜å¼€å§‹åƒç°ã€‚\n- ç»­èˆªæ—¶é—´æ˜¯çœŸçš„é•¿ï¼Œå¾…æœºåŠŸè€—å¾ˆå°ï¼Œä¸ç”¨å…³æœºã€‚æ‰£ä¸Šç›–å­è£…åŒ…å¸¦èµ°ï¼Œä¸æ‹¿å……ç”µçº¿ã€‚\n- è§¦æ§æ¿çœŸçš„å¥½ç”¨ã€‚åŸæ¥éƒ½æ˜¯æ²¡é¼ æ ‡æ—¶ä¸å¾—å·²æ‰ç”¨è§¦æ§æ¿ã€‚(åæ¥å‘ç°è€å¸æœºä»¬éƒ½çˆ±è§¦æ§æ¿)\n- é¼ æ ‡ - æ»šåŠ¨æ–¹å‘ï¼šè‡ªç„¶ï¼Œéœ€è¦é€‚åº”ã€‚\n- Chrome Tab éšä¾¿å¼€ã€‚\n- å¾ˆå®‰é™ã€‚\n- è£…åŒ…æ—¶è¾¹æ²¿æœ‰äº›å‰²æ‰‹ã€‚\n\n## è½¯ä»¶æ¨è\n\n**2020-03-25 æ›´æ–°ï¼š** [My MacBook | Yifans_Z](/2019/05/20/my-macbook/)ã€‚\n\n-- EOF --\n","tags":["mac"]},{"title":"Git checkout --theirs è§£å†³å†²çªæ–‡ä»¶","url":"/2017/08/30/git-checkout-theirs-resolve-conflict/","content":"\nåœ¨ä»£ç åˆå¹¶æ—¶é‡åˆ° `conflict` æ˜¯å¸¸æœ‰çš„äº‹æƒ…ï¼Œæœ‰äº›å†…å®¹æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„èµ„æºæ–‡ä»¶ï¼Œæ‰‹å·¥å¤„ç†èµ·æ¥å¾ˆéº»çƒ¦ï¼ŒæŸä¸€æ–‡ä»¶å¦‚ä½•å…¨éƒ¨ä»¥æŸä¸€åˆ†æ”¯çš„å†…å®¹ä¸ºå‡†ï¼Ÿ\n\nä½¿ç”¨ `checkout --theirs`ã€‚\n\n<!-- more -->\n\n## å®ä¾‹æƒ…å†µ\n\nä¸¤ä¸ªåˆ†æ”¯ `master` å’Œ `dev`ï¼Œ`dev` æ˜¯ä» `master` é¡¶ç«¯ `checkout` å‡ºæ¥çš„ã€‚\n\nåœ¨ `dev` ä¿®æ”¹äº† file.xml æ–‡ä»¶åè¿›è¡Œæäº¤ï¼Œåˆ°è¾¾ `b` èŠ‚ç‚¹ï¼Œåœ¨ `master` ä¿®æ”¹äº† file.xml æ–‡ä»¶åè¿›è¡Œæäº¤ï¼Œåˆ°è¾¾ `c` èŠ‚ç‚¹ã€‚\n\nè¿™æ—¶åœ¨ `dev` æ‰§è¡Œ rebase å‘½ä»¤ï¼Œæƒ³è®© `dev` ä¿å­˜çº¿æ€§ï¼Œ`b` èŠ‚ç‚¹åº”ç”¨åœ¨ `c` èŠ‚ç‚¹ä¹‹åï¼š\n\n```bash\ngit rebase master\n```\n\nå› ä¸º `master` å’Œ `dev` ä¿®æ”¹äº† file.xml åŒä¸€ä½ç½®ï¼Œäº§ç”Ÿå†²çªã€‚\n\n## è§£å†³å†²çª\n\næ­¤æ—¶æƒ³å®Œå…¨ä»¥ `dev` ä¸­çš„ file.xml å†…å®¹ä¸ºå‡†åˆ™å¯ä»¥ä½¿ç”¨ï¼š\n\n```bash\ngit checkout --theirs file.xml\ngit add file.xml\n...\n```\n\nå¦‚æœæƒ³ä»¥ `master` ä¸ºå‡†ï¼š\n\n```bash\ngit checkout --ours file.xml\n```\n\n> References:\n>\n> - [åŒ–è§£å†²çªï¼šgit merge ä¸ git rebase ä¸­çš„ ours å’Œ theirs](https://bitmingw.com/2017/02/16/git-merge-rebase-ours-and-theirs/)\n","tags":["git"]},{"title":"React jPlayer éŸ³ä¹æ’­æ”¾å™¨","url":"/2017/08/27/music-player-by-react/","content":"\n## ä»‹ç»\n\nè¿™æ˜¯ React å­¦ä¹ ç»ƒä¹ ï¼š[IMOOC ä½¿ç”¨ React æ„å»ºä¸€æ¬¾éŸ³ä¹æ’­æ”¾å™¨](http://www.imooc.com/learn/868)ï¼Œé¡¹ç›®æ„å»ºã€åŠŸèƒ½ç¼–å†™çš„ç¬”è®°ã€‚\n\n- é¡¹ç›®åœ°å€ï¼š[imzyf/music-player-by-react](https://github.com/imzyf/music-player-by-react)\n- æ¼”ç¤ºåœ°å€ï¼š[Music player build with React](https://imzyf.github.io/music-player-by-react/)\n- å…¶ä»–ç›¸å…³é¡¹ç›®ï¼š[imzyf/gallery-by-react å›¾ç‰‡ç”»å»Š](https://github.com/imzyf/gallery-by-react)\n\nThanks:\n\n- [xiaolin3303/react-music-player](https://github.com/xiaolin3303/react-music-player) Music player build with React, learn how to use React\n\n### æŠ€æœ¯æ ˆ\n\n- ä½¿ç”¨ YEOMAN æ„å»ºé¡¹ç›®è„šæ‰‹æ¶\n- ES6\n- react 15.0\n- react-router-dom 4.2 è·¯ç”±\n- pubsub-js 1.7 äº‹ä»¶è®¢é˜…\n- webpack 1.2\n- jPlayer 2.9 éŸ³ä¹æ’­æ”¾å™¨æ’ä»¶\n\n<!-- more -->\n\n## é¡¹ç›®æ„å»º\n\nä½¿ç”¨è„šæ‰‹æ¶ [generator-react-webpack](https://github.com/react-webpack-generators/generator-react-webpack) Yeoman generator for ReactJS and Webpackï¼š\n\n```\n# Make sure both is installed globally\nnpm install -g yo\nnpm install -g generator-react-webpack\n\n# Create a new directory, and `cd` into it:\nmkdir music-player-by-react && cd music-player-by-react\n\n# Run the generator\nyo react-webpack\n```\n\nå…¶ä¸­ä½¿ç”¨ `scss`ï¼Œå¯ç”¨ `PostCSS`ã€‚\n\nè¿˜éœ€è¦å®‰è£… sass-loaderï¼š\n\n```\nnpm install node-sass --save-dev\nnpm install sass-loader@4.1.1 --save-dev\n```\n\nä¿®æ”¹ `.eslintrc` æ”¯æŒ jQueryï¼š\n\n```\n\"jquery\": true\n```\n\n## åŠŸèƒ½å¼€å‘\n\n### Header ç»„ä»¶\n\næ³¨æ„ï¼ŒåŒçº§ç›®å½•çš„æ–‡ä»¶å¼•ç”¨éœ€è¦å¸¦ä¸Š `./`ï¼š\n\n```javascript\nimport Header from \"./Header\";\n```\n\nå›¾ç‰‡å¯¼å…¥ç”¨ `require()`:\n\n```\n<img src={require('../../images/logo.png')}  width={40} className=\"-col-auto\"/>\n```\n\n### jPlayer\n\n[jPlayer : HTML5 Audio & Video for jQuery](http://jplayer.org/)\n\njs cdn å¯¼å…¥ï¼š\n\n```html\n<script\n  type=\"text/javascript\"\n  src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js\"\n></script>\n<script\n  type=\"text/javascript\"\n  src=\"https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js\"\n></script>\n```\n\n`componentDidMount()` ä¸­ bind çš„æ–¹æ³•åœ¨ `componentWillUnmout()` è¦å¸è½½ï¼š\n\n```javascript\ncomponentWillUnmout() {\n    $(\"#player\").unbind($.jPlayer.event.timeupdate);\n}\n```\n\nè·å–å½“å‰éŸ³ä¹è¿›åº¦ç™¾åˆ†æ¯”ï¼Œæ•°å€¼ï¼š\n\n```\nprogress:e.jPlayer.status.currentPercentAbsolute\n```\n\nè·å–éŸ³ä¹æ€»æ—¶é—´ï¼š\n\n```\nthis.duration = e.jPlayer.status.duration;\n```\n\n### è¿›åº¦æ¡ç»„ä»¶\n\n```\n<div className=\"progress\" style={{\n     width: `${this.props.progress}%`\n }}></div>\n```\n\n```\n/* æ¨¡æ¿å†™æ³• */\n`${this.props.progress}%`\n```\n\nè·å–ç‚¹å‡»è¿›åº¦æ¡çš„ç™¾åˆ†æ¯”ï¼š\n\n```\nlet {progressBar} = this.refs;\nlet progress = (e.clientX - progressBar.getBoundingClientRect().left) / progressBar.clientWidth;\n```\n\n### MusicList ç»„ä»¶\n\n`map` éå†ï¼š\n\n```javascript\nrender() {\n    let Items = this.props.musicList.map((item) => {\n        return (\n            <MusicListItem\n                key={item.id}\n                data={item}\n                focus={this.props.currentMusicItem === item}\n            ></MusicListItem>\n        );\n    });\n    return (\n        <ul>\n            {Items}\n        </ul>\n    );\n}\n```\n\n### Router\n\n[ReactTraining/react-router - Declarative routing for React](https://github.com/ReactTraining/react-router)\n\nå®‰è£…ï¼š\n\n```bash\nnpm install --save react-router-dom\n```\n\næƒ³ä½¿ç”¨æœ€æ–°çš„ `v4.2.2` å¾…å®Œå–„ã€‚\n\n### PubSubJS\n\n[mroderick/PubSubJS - Dependency free publish/subscribe for JavaScript](https://github.com/mroderick/PubSubJS)\n\n```javascript\nimport PubSub from \"pubsub-js\";\n```\n\näº‹ä»¶å‘å¸ƒï¼š\n\n```javascript\nPubSub.publish(\"PLAY_MUSIC\", item);\n```\n\näº‹ä»¶è®¢é˜…ï¼š\n\n```javascript\nPubSub.subscribe(\"PLAY_MUSIC\", (msg, currentMusicItem) => {\n  this.playMusic(currentMusicItem);\n});\n```\n\n### æ’­æ”¾æ§åˆ¶\n\nå‰è¿›åé€€ï¼Œæ’­æ”¾ä¸‹ä¸€é¦–æ­Œç®—æ³•ï¼š\n\n```javascript\nlet nextIndex = 0;\nconst musicListLength = this.musicList.length;\nif (type === \"next\") {\n  nextIndex = (index + 1) % musicListLength;\n} else {\n  nextIndex = (index - 1 + musicListLength) % musicListLength;\n}\n```\n\n## TODO\n\n- [ ] éŸ³ä¹æ’­æ”¾æ¨¡å¼ï¼Œå•æ›²å¾ªç¯ã€éšæœºæ’­æ”¾ã€‚\n- [ ] react-router-dom å®è·µã€‚\n- [ ] DOM diff å­¦ä¹ ã€‚\n- [ ] [IMMUTABLE](https://facebook.github.io/immutable-js/)ã€‚\n- [ ] Redux ç»„ä»¶é€šä¿¡ã€‚\n","tags":["react"]},{"title":"React Native å…¥é—¨","url":"/2017/08/21/react-native-getting-started/","content":"\nReact Native å…¥é—¨å­¦ä¹ ç»ƒä¹  - Mac ç¯å¢ƒ\n\né¡¹ç›®ä»£ç ï¼š[GitHub - imzyf/react-native-started](https://github.com/imzyf/react-native-started)\n\nThanks:\n\n- [IMOOC - React Native åŸºç¡€ä¸å…¥é—¨](http://www.imooc.com/video/14287)\n- [Official Getting Started](http://facebook.github.io/react-native/docs/getting-started.html)\n- [React Native ä¹‹ React é€Ÿå­¦æ•™ç¨‹(ä¸Šä¸­ä¸‹) - è´¾é¹è¾‰çš„æŠ€æœ¯åšå®¢](<http://www.devio.org/2016/08/09/React-Native%E4%B9%8BReact%E9%80%9F%E5%AD%A6%E6%95%99%E7%A8%8B-(%E4%B8%8A)/>)\n\n## ç»„ä»¶\n\nReact ç»„ä»¶å°† UI åˆ†å‰²æˆç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ä¸€äº›ç¢ç‰‡æˆ–éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†æ˜¯ç›¸å…³ç‹¬ç«‹çš„ã€‚\n\nç»„ä»¶æ˜¯å¯¹ View å±‚çš„æŠ½è±¡ã€‚\n\n![ç»„ä»¶](https://raw.githubusercontent.com/imzyf/react-native-started/master/resource/image/Component.jpg)\n\n<!-- more -->\n\n### ä¿®æ”¹å…¥å£æ–‡ä»¶\n\nä¿®æ”¹å…¥å£æ–‡ä»¶ `index.ios.js` `index.android.js`\n\n```javascript\nimport { AppRegistry } from \"react-native\";\nimport Setup from \"./js/Setup\";\n\nAppRegistry.registerComponent(\"sample\", () => Setup);\n```\n\n### åˆ›å»ºç»„ä»¶\n\nä¸‰ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼ï¼š\n\n- ES6 - æ¨èã€‚eg: [HelloComponent.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/HelloComponent.js)\n- ES5 eg: [HelloES5.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/HelloES5.js)\n- å‡½æ•°å¼ - æ— çŠ¶æ€ï¼Œä¸èƒ½ä½¿ç”¨ `this`ï¼Œæ²¡æœ‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥ä½¿ç”¨ `props`ã€‚eg: [HelloFunc.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/HelloFunc.js)\n\næ³¨æ„ï¼š\n\n- ç»„ä»¶ç±»çš„ç¬¬ä¸€ä¸ªå­—æ¯å¿…é¡»å¤§å†™ã€‚\n- ç»„ä»¶ç±»åªèƒ½åŒ…å«ä¸€ä¸ªé¡¶å±‚æ ‡ç­¾ã€‚\n\n> ç”±äº this.props å’Œ this.state éƒ½ç”¨äºæè¿°ç»„ä»¶çš„ç‰¹æ€§ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ··æ·†ã€‚ä¸€ä¸ªç®€å•çš„åŒºåˆ†æ–¹æ³•æ˜¯ï¼Œthis.props è¡¨ç¤ºé‚£äº›ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å†æ”¹å˜çš„ç‰¹æ€§ï¼Œè€Œ this.state æ˜¯ä¼šéšç€ç”¨æˆ·äº’åŠ¨è€Œäº§ç”Ÿå˜åŒ–çš„ç‰¹æ€§ã€‚\n\n> render() å‡½æ•°åº”è¯¥æ˜¯çº¯ç²¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å‡½æ•°ä¸ä¿®æ”¹ç»„ä»¶çš„ stateï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œä¸è¯»å†™ DOM ä¿¡æ¯ï¼Œä¹Ÿä¸å’Œæµè§ˆå™¨äº¤äº’ï¼ˆä¾‹å¦‚é€šè¿‡ä½¿ç”¨ setTimeoutï¼‰ã€‚\n> å¦‚æœéœ€è¦å’Œæµè§ˆå™¨äº¤äº’ï¼Œåœ¨ componentDidMount() ä¸­æˆ–è€…å…¶å®ƒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­åšè¿™ä»¶äº‹ã€‚ä¿æŒ render() çº¯ç²¹ï¼Œå¯ä»¥ä½¿æœåŠ¡å™¨ç«¯æ¸²æŸ“æ›´åŠ åˆ‡å®å¯è¡Œï¼Œä¹Ÿä½¿ç»„ä»¶æ›´å®¹æ˜“è¢«ç†è§£ã€‚\n\n### HTML æ ‡ç­¾ä¸ React ç»„ä»¶å¯¹æ¯”\n\nReact å¯ä»¥æ¸²æŸ“ HTML æ ‡ç­¾ (strings) æˆ– React ç»„ä»¶ (classes)ã€‚\n\nè¦æ¸²æŸ“ HTML æ ‡ç­¾ï¼Œåªéœ€åœ¨ JSX é‡Œä½¿ç”¨å°å†™å­—æ¯å¼€å¤´çš„æ ‡ç­¾åã€‚\n\n```javascript\nvar myDivElement = <div className=\"foo\" />;\nReact.render(myDivElement, document.body);\n```\n\nè¦æ¸²æŸ“ React ç»„ä»¶ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´çš„æœ¬åœ°å˜é‡ã€‚\n\nReact çš„ JSX é‡Œçº¦å®šåˆ†åˆ«ä½¿ç”¨é¦–å­—æ¯å¤§ã€å°å†™æ¥åŒºåˆ†æœ¬åœ°ç»„ä»¶çš„ç±»å’Œ HTML æ ‡ç­¾ã€‚\n\n### ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n\nä»€ä¹ˆæ˜¯ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ\nç»„ä»¶ è£…è½½ - æ›´æ–° - å¸è½½ çš„è¿‡ç¨‹ã€‚\n\n- Mountingï¼šå·²æ’å…¥çœŸå® DOMã€‚\n- Updatingï¼šæ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ã€‚\n- Unmountingï¼šå·²ç§»å‡ºçœŸå® DOMã€‚\n\n![ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ](https://raw.githubusercontent.com/imzyf/react-native-started/master/resource/image/component-lifecycle.jpg)\n\nMountingï¼š\n\n- getInitialState()/constructor(props) åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ä¸€æ¬¡ã€‚è¿”å›å€¼å°†ä¼šä½œä¸º this.state çš„åˆå§‹å€¼ã€‚\n- componentWillMount() æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯éƒ½åªè°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨åˆå§‹åŒ–æ¸²æŸ“æ‰§è¡Œä¹‹å‰ç«‹åˆ»è°ƒç”¨ã€‚\n- componentDidMount() åœ¨åˆå§‹åŒ–æ¸²æŸ“æ‰§è¡Œä¹‹åç«‹åˆ»è°ƒç”¨ä¸€æ¬¡ï¼Œä»…å®¢æˆ·ç«¯æœ‰æ•ˆï¼ˆæœåŠ¡å™¨ç«¯ä¸ä¼šè°ƒç”¨ï¼‰ã€‚\n\nUpdatingï¼š\n\n- componentWillReceiveProps(object nextProps) åœ¨ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ props çš„æ—¶å€™è°ƒç”¨ã€‚\n- shouldComponentUpdate(object nextProps, object nextState) åœ¨æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… stateï¼Œå°†è¦æ¸²æŸ“ä¹‹å‰è°ƒç”¨ã€‚ï¼ˆå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•çµæ´»æ§åˆ¶å½“ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶æ˜¯å¦è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ï¼‰\n- componentWillUpdate(object nextProps, object nextState) åœ¨æ¥æ”¶åˆ°æ–°çš„ props æˆ–è€… state ä¹‹å‰ç«‹åˆ»è°ƒç”¨ã€‚ï¼ˆä¸èƒ½åœ¨è¯¥æ–¹æ³•ä¸­ä½¿ç”¨ this.setState()ã€‚å¦‚æœéœ€è¦æ›´æ–° state æ¥å“åº”æŸä¸ª prop çš„æ”¹å˜ï¼Œè¯·ä½¿ç”¨ componentWillReceivePropsã€‚ï¼‰\n- componentDidUpdate(object prevProps, object prevState) åœ¨ç»„ä»¶çš„æ›´æ–°å·²ç»åŒæ­¥åˆ° DOM ä¸­ä¹‹åç«‹åˆ»è¢«è°ƒç”¨ã€‚ï¼ˆè¯¥æ–¹æ³•ä¸ä¼šåœ¨åˆå§‹åŒ–æ¸²æŸ“çš„æ—¶å€™è°ƒç”¨ã€‚ä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥åœ¨ç»„ä»¶æ›´æ–°ä¹‹åæ“ä½œ DOM å…ƒç´ ã€‚ï¼‰\n\nUnmountingï¼š\n\n- componentWillUnmount åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤çš„æ—¶å€™ç«‹åˆ»è¢«è°ƒç”¨ã€‚ï¼ˆåœ¨è¯¥æ–¹æ³•ä¸­æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ï¼Œæ¯”å¦‚æ— æ•ˆçš„å®šæ—¶å™¨ï¼Œæˆ–è€…æ¸…é™¤åœ¨ componentDidMount ä¸­åˆ›å»ºçš„ DOM å…ƒç´ ã€‚ï¼‰\n\n**Tips:**\n\n- åœ¨ Simulator ä¸­ Cmd+R é€‰æ‹© `Remote JS Debbugging` å°†å¼€å¯ä¸€ä¸ª [web çª—å£](http://localhost:8081/debugger-ui) å†æ‰“å¼€æ¸¸è§ˆå™¨çš„ Developer Tools å°†å¯ä»¥çœ‹åˆ° `console.log` çš„å†…å®¹ã€‚\n\n### ç»„ä»¶ã€å˜é‡ã€æ–¹æ³•çš„å¯¼å…¥ä¸å¯¼å‡º\n\neg: [ExportComponent.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/ExportComponent.js)\n\nå¯¼å‡ºï¼š\n\n```javascript\n// å¯¼å‡ºå˜é‡ã€å¸¸é‡\nexport var myName = \"yifan\";\nexport const myWebsite = \"zyf.im\";\n\nconst age = 24;\nconst sex = \"male\";\nexport { age, sex };\n\n// å¯¼å‡ºæ–¹æ³•\nexport function sum(a, b) {\n  return a + b;\n}\n```\n\nå¯¼å…¥ï¼š\n\n```javascript\n// ç¬¬ä¸€ä¸ªä¸º default exportï¼Œ{} ä¸­ä¸ºå…¶ä»– export çš„\nimport ExportComponent, { myName, age, sum } from \"./ExportComponent\";\n```\n\n### props\n\nprops ä¸ºä»çˆ¶ç»„ä»¶ä¼ å…¥çš„å€¼ï¼Œåªè¯»ã€‚ eg: [PropsTest.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/PropsTest.js)\n\nå®šä¹‰é»˜è®¤ propsï¼š\n\n```javascript\nstatic defaultProps = {\n    name: 'default-yifan',\n    sex: 'male',\n};\n```\n\næ£€æµ‹ props ç±»å‹ï¼š\n\n```javascript\nstatic propTypes = {\n    name: PropTypes.string,\n    age: PropTypes.number.isRequired,\n};\n```\n\nTipsï¼šWebStorm command + left click `PropTypes.string` å¯ä»¥çœ‹æºç ä¸­çš„å…¶ä»–é€‰é¡¹ã€‚\n\nå»¶å±•æ“ä½œï¼š\n\n```javascript\nvar boyProps = {name: 'Liming', age: 6, sex: 'boy'};\n\n...\n\n<PropsTest {...boyProps}/>\n```\n\nç»“æ„èµ‹å€¼ï¼š\n\n```javascript\nvar { name, age } = boyProps;\n```\n\n### state\n\neg: [StateTest.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/StateTest.js)\n\nTipï¼šå¯¼å…¥å›¾ç‰‡æ–‡ä»¶åï¼Œä¼šæœ‰æŠ¥é”™ï¼Œéœ€è¦é‡å¯ serverã€‚\n\nåˆå§‹åŒ–\n\n```javascript\n// åˆå§‹åŒ– æ–¹æ³•ä¸€\nstate = {\n    balloonSize: 10,\n};\n// åˆå§‹åŒ– æ–¹æ³•äºŒï¼ˆæ¨èï¼‰\nconstructor(props) {\n    super(props);\n    this.state = {\n        balloonSize: 30,\n    }\n}\n```\n\nå¯ä»¥é€šè¿‡æ§åˆ¶ `state` æ§åˆ¶ä¸€äº› UI åŠ¨ç”»ã€‚\n\n### ref\n\neg: [RefTest.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/RefTest.js)\n\n```javascript\n<Text style={styles.tip}\n      onPress={() => {\n          this.setState({\n              balloonSize: this.refs.refStateTest.getSize(),\n              //balloonSize: this.refs['refStateTest'].getSize(),\n          })\n      }}>\n    click me to knew the ballonSize: {this.state.balloonSize}\n</Text>\n\n<StateTest ref='refStateTest'/>\n```\n\n```javascript\nballoonSize: this.refStateTest.getSize(),\n  (<StateTest ref={refStateTest => (this.refStateTest = refStateTest)} />);\n```\n\n`getSize()` æ˜¯ `<StateTest/>` ä¸­å®šä¹‰çš„ä¸€ä¸ªæ–¹æ³•ã€‚S\n\n### class\n\neg: [Animal.js](https://github.com/imzyf/react-native-started/blob/master/sample/js/Animal.js)\n\n```javascript\nexport default class Animal {\n  // æ„é€ æ–¹æ³•ï¼Œå®ä¾‹åŒ–çš„æ—¶å€™å°†ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªä¸å¸¦å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚\n  constructor(name, color) {\n    this.name = name;\n    this.color = color;\n  }\n\n  getInfo() {\n    return \"name:\" + this.name + \",color:\" + this.color;\n  }\n}\n\nexport class Cat extends Animal {\n  constructor(action) {\n    // å­ç±»å¿…é¡»è¦åœ¨ constructor ä¸­æŒ‡å®š super æ–¹æ³•ï¼Œå¦åˆ™åœ¨æ–°å»ºå®ä¾‹çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚\n    // å¦‚æœæ²¡æœ‰ç½®é¡¶ consructorï¼Œé»˜è®¤å¸¦ super æ–¹æ³•çš„ constructor å°†ä¼šè¢«æ·»åŠ ã€‚\n    super(\"cat\", \"white\");\n    this.action = action;\n  }\n\n  getInfo() {\n    return (\n      \"name:\" + this.name + \",color:\" + this.color + \",action:\" + this.action\n    );\n  }\n}\n```\n\n```javascript\nimport Animal, { Cat } from \"./Animal\";\n\nvar animal = new Animal(\"dog\", \"white\");\n```\n\n## ES5 ä¸ ES6 åŒºåˆ«\n\n> [React Native ä¹‹ React é€Ÿå­¦æ•™ç¨‹(ä¸‹)](<http://www.devio.org/2016/08/11/React-Native%E4%B9%8BReact%E9%80%9F%E5%AD%A6%E6%95%99%E7%A8%8B-(%E4%B8%8B)/>)\n\n## flex å¸ƒå±€\n\n> [Reac Native å¸ƒå±€è¯¦ç»†æŒ‡å—](http://www.devio.org/2016/08/01/Reac-Native%E5%B8%83%E5%B1%80%E8%AF%A6%E7%BB%86%E6%8C%87%E5%8D%97/)\n\n## æŒ‰é’®è¯¦è§£ Touchable\n\n> [React Native æŒ‰é’®è¯¦è§£|Touchable ç³»åˆ—ç»„ä»¶ä½¿ç”¨è¯¦è§£](http://www.devio.org/2017/01/10/React-Native%E6%8C%89%E9%92%AE%E8%AF%A6%E8%A7%A3-Touchable%E7%B3%BB%E5%88%97%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/)\n\n## å›¾ç‰‡ä½¿ç”¨\n\n- ç½‘ç»œå›¾ç‰‡ï¼Œéœ€è¦æŒ‡å®šé•¿å®½ã€‚\n- `resizeMode` Determines how to resize the image when the frame doesn't match the raw image dimensions.\n- åˆ†è¾¨ç‡é€‚é… `@2x` `@3x`ã€‚\n\n## è°ƒè¯•æŠ€å·§\n\n### æ¨¡æ‹Ÿå™¨è°ƒè¯•èœå•\n\n- iOS `command + d`\n- Android `command + m`\n- çœŸæœºï¼š`æ‘‡ä¸€æ‘‡`\n\nReload\n\n- iOS `command + r`\n- Android `åŒå‡» r`\n\nEnable Live Reload\n\n- å…¨éƒ¨æ›´æ–°ä»£ç ï¼Œå…¨éƒ¨åˆ·æ–°\n\nEnable Hot Reload\n\n- å¢é‡æ›´æ–°\n\nRemote JS Debbugging\n\n- Chrome ä¸­è°ƒè¯•ä»£ç ã€‚`command + option + i`ã€‚å¯ä»¥è®¾ç½®æ–­ç‚¹ã€‚\n- å‹¾é€‰ `Pasue On Caught Exception` æœ‰åŠ©äºæ‰¾é”™ã€‚\n","tags":["react","react-native"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - ç‹¬å¥ - Part 3","url":"/2017/08/03/got-git-reading-notes-solo-part3/","content":"\nä¸»è¦å†…å®¹ï¼šã€Git åŸºæœ¬æ“ä½œã€‘\n\n## Git åŸºæœ¬æ“ä½œ\n\n### å…ˆæ¥åˆä¸ªå½±\n\nåœ¨ Git é‡Œï¼Œâ€œç•™å½±â€ç”¨çš„å‘½ä»¤å«åš `tag`ï¼Œæ›´åŠ ä¸“ä¸šçš„æœ¯è¯­å«åšâ€œé‡Œç¨‹ç¢‘â€ï¼ˆæ‰“ tagï¼Œæˆ–æ‰“æ ‡ç­¾ï¼‰ã€‚\n\n```bash\n$ git tag -m \"Say bye-bye to all previous practice.\" old_practice\n```\n\né‡Œç¨‹ç¢‘æ— éä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œé€šè¿‡è®°å½•æäº¤ IDï¼ˆæˆ–è€…åˆ›å»º Tag å¯¹è±¡ï¼‰æ¥ä¸ºå½“å‰ç‰ˆæœ¬åº“çŠ¶æ€è¿›è¡Œâ€œç•™å½±â€ã€‚\n\n```bash\n$ git rev-parse refs/tags/old_practice\n41bd4e2cce0f8baa9bb4cdda62927b408c846cd6\n```\n\n`git describe` æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬åº“çš„æœ€æ–°æäº¤çš„ç‰ˆæœ¬å·ã€‚æ ¼å¼ï¼š`æœ€è¿‘çš„ tag - è·ç¦»æ­¤ tag çš„ä¸ªæ•° - è¯¥æäº¤çš„ SHA1`\n\n```bash\n$ git describe\nold_practice\n\n# .. commit something\n\n$ git describe\nold_practice-2-g8861c65\n```\n\n<!-- more -->\n\n### åˆ é™¤æ–‡ä»¶\n\n`rm *.txt` é’ˆå¯¹çš„æ˜¯ `å·¥ä½œåŒº`ï¼Œå¯¹ `æš‚å­˜åŒº` å’Œ `ç‰ˆæœ¬åº“` æ²¡æœ‰ä»»ä½•å½±å“ã€‚\n\n`git rm detached-commit.txt hack-1.txt new-commit.txt welcome.txt` åˆ é™¤åŠ¨ä½œåŠ å…¥äº†æš‚å­˜åŒºï¼Œcommit ååœ¨ç‰ˆæœ¬åº“ç½ªè¡Œæäº¤ä¸­åˆ é™¤äº†ï¼Œåœ¨å†å²æäº¤ä¸­å°šåœ¨ã€‚\n\nå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥çœ‹å†å²ç‰ˆæœ¬çš„æ–‡ä»¶åˆ—è¡¨ï¼š\n\n```\n$ git ls-files --with-tree=HEAD^\ndetached-commit.txt\nnew-commit.txt\nwelcome.txt\n```\n\næŸ¥çœ‹åœ¨å†å²ç‰ˆæœ¬ä¸­å°šåœ¨çš„åˆ é™¤æ–‡ä»¶çš„å†…å®¹ï¼š\n\n```\n$ git cat-file -p HEAD^:welcome.txt\nHello.\nNice to meet you.\n```\n\n`git add -u` å‘½ä»¤ä¼šå¯¹å·¥ä½œåŒºä¸­ _æ‰€æœ‰æ”¹åŠ¨_ ä»¥åŠ _åˆ é™¤æ–‡ä»¶_ æ·»åŠ åˆ°æš‚å­˜åŒºã€‚\n\n### æ¢å¤åˆ é™¤çš„æ–‡ä»¶\n\n```\n$ git cat-file -p HEAD~1:welcome.txt > welcome.txt\n```\n\nç„¶ååŠ å…¥æš‚å­˜åŒºï¼Œæäº¤åˆ°ç‰ˆæœ¬åº“ï¼š\n\n```\n$ git add -A\n$ git commit -m \"restore file: welcome.txt\"\n```\n\nè¿™æ˜¯é€šè¿‡å†æ¬¡æ·»åŠ çš„æ–¹å¼æ¢å¤è¢«åˆ é™¤çš„æ–‡ä»¶ã€‚\n\n`git add -A` å‘½ä»¤ä¼šå¯¹å·¥ä½œåŒºä¸­ _æ‰€æœ‰æ”¹åŠ¨_ ä»¥åŠ _æ–°å¢æ–‡ä»¶_ æ·»åŠ åˆ°æš‚å­˜åŒºã€‚\n\n### ç§»åŠ¨æ–‡ä»¶\n\n```\n$ git mv welcome.txt README\n```\n\n### äº¤äº’ç•Œé¢\n\n```\n$ git add -i\n```\n\n### æ–‡ä»¶å¿½ç•¥\n\n```\n$ cat > .gitignore << EOF\n> hello\n> *.o\n> *.h\n> EOF\n```\n\næŸ¥çœ‹è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼š\n\n```\n$ git status --ignored -s\n```\n\nå°†å¿½ç•¥çš„æ–‡ä»¶å¼ºåˆ¶æ·»åŠ åˆ°ä»“åº“ä¸­ï¼š\n\n```\n$ git add -f hello.h\n$ git commit -m \"add hello.h\"\n[master 48456ab] add hello.h\n 1 files changed, 1 insertions(+), 0 deletions(-)\n create mode 100644 src/hello.h\n```\n\n_å¿½ç•¥åªå¯¹æœªè·Ÿè¸ªæ–‡ä»¶æœ‰æ•ˆï¼Œå¯¹äºå·²åŠ å…¥ç‰ˆæœ¬åº“çš„æ–‡ä»¶æ— æ•ˆã€‚_ å°† `hello.h` æ·»åŠ åˆ°ç‰ˆæœ¬åº“åï¼Œå¯¹ `hello.h` çš„ä¿®æ”¹éƒ½ä¼šç«‹åˆ»è¢«è·Ÿè¸ªåˆ°ã€‚`.gitignore` åªæ˜¯å¯¹æœªå…¥åº“çš„æ–‡ä»¶èµ·ä½œç”¨ã€‚\n\n**æœ¬åœ°ç‹¬äº«å¼å¿½ç•¥æ–‡ä»¶**\n\n.gitignore è®¾ç½®çš„æ–‡ä»¶å¿½ç•¥æ˜¯å…±äº«å¼çš„ï¼Œæ˜¯å› ä¸º.gitignore è¢«æ·»åŠ åˆ°ç‰ˆæœ¬åº“åæˆä¸ºäº†ç‰ˆæœ¬åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ–‡ä»¶å¿½ç•¥åœ¨ä»–äººçš„å·¥ä½œåŒºä¸­åŒæ ·ç”Ÿæ•ˆã€‚\n\näº«å¼å¿½ç•¥æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n- åœ¨ç‰ˆæœ¬åº“.git ç›®å½•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶.git/info/exclude æ¥è®¾ç½®æ–‡ä»¶å¿½ç•¥ã€‚\n- é€šè¿‡ Git çš„é…ç½®å˜é‡ core.excludesfile æŒ‡å®šçš„ä¸€ä¸ªå¿½ç•¥æ–‡ä»¶ï¼Œå…¶è®¾ç½®çš„å¿½ç•¥å¯¹æ‰€æœ‰æ–‡ä»¶å‡æœ‰æ•ˆã€‚\n\n```\n$ git config --global core.excludesfile /home/jiangxin/_gitignore\n$ git config core.excludesfile\n/home/jiangxin/_gitignore\n\n$ cat /home/jiangxin/_gitignore\n*~        # vim ä¸´æ—¶æ–‡ä»¶\n*.pyc     # python çš„ç¼–è¯‘æ–‡ä»¶\n.*.mmx    # ä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼å“¦ï¼Œå› ä¸º FreeMind-MMX çš„è¾…åŠ©æ–‡ä»¶ä»¥ç‚¹å¼€å¤´\n```\n\n**Git å¿½ç•¥è¯­æ³•**\n\n- `#` è¡¨ç¤ºå¼€å§‹çš„è¡Œè¢«å¿½ç•¥ã€‚\n- é€šé…ç¬¦ã€‚\\* ä»»æ„å¤šå­—ç¬¦ï¼Œ? ä¸€ä¸ªå­—ç¬¦ï¼Œ[abc] å¯é€‰å­—ç¬¦èŒƒå›´ã€‚\n- `æœ€åé¢æ˜¯ä¸€ä¸ª /` è¡¨ç¤ºå¿½ç•¥çš„æ˜¯æ•´ä¸ªç›®å½•ï¼ŒåŒåæ–‡ä»¶ä¸å¿½ç•¥ï¼Œå¦åˆ™åŒåçš„æ–‡ä»¶å’Œç›®å½•éƒ½å¿½ç•¥ã€‚\n- `æœ€å‰é¢ !` è¡¨ç¤ºä¸å¿½ç•¥ã€‚\n\n```\n# è¿™æ˜¯æ³¨é‡Šè¡Œ â€”â€” è¢«å¿½ç•¥\n*.a       # å¿½ç•¥æ‰€æœ‰ä»¥ .a ä¸ºæ‰©å±•åçš„æ–‡ä»¶ã€‚\n!lib.a    # ä½†æ˜¯ lib.a æ–‡ä»¶æˆ–è€…ç›®å½•ä¸è¦å¿½ç•¥ï¼Œå³ä½¿å‰é¢è®¾ç½®äº†å¯¹ *.a çš„å¿½ç•¥ã€‚\n/TODO     # åªå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œå­ç›®å½•çš„ TODO æ–‡ä»¶ä¸å¿½ç•¥ã€‚\nbuild/    # å¿½ç•¥æ‰€æœ‰ build/ ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚\ndoc/*.txt # å¿½ç•¥æ–‡ä»¶å¦‚ doc/notes.txtï¼Œä½†æ˜¯æ–‡ä»¶å¦‚ doc/server/arch.txt ä¸è¢«å¿½ç•¥ã€‚\n```\n\n### æ–‡ä»¶å½’æ¡£\n\nå¦‚æœæƒ³å‹ç¼©å·¥ä½œåŒºæ–‡ä»¶å½’æ¡£ï¼Œå¯èƒ½ä¸€ä¸å°å¿ƒä¼šæŠŠç‰ˆæœ¬åº“ï¼ˆ.git ç›®å½•ï¼‰åŒ…å«å…¶ä¸­ï¼Œç”šè‡³å°†å·¥ä½œåŒºä¸­çš„å¿½ç•¥æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ä¹ŸåŒ…å«å…¶ä¸­ã€‚æ‰€ä»¥ Git æä¾›äº†ä¸€ä¸ªå½’æ¡£å‘½ä»¤ `git archive`ã€‚\n\n```\n# åŸºäºæœ€æ–°æäº¤å»ºç«‹å½’æ¡£æ–‡ä»¶latest.zip\n$ git archive -o latest.zip HEAD\n\n# åªå°†ç›®å½• src å’Œ doc å»ºç«‹åˆ°å½’æ¡£ partial.tar ä¸­\n$ git archive -o partial.tar  HEAD src doc\n\n# åŸºäºé‡Œç¨‹ç¢‘v1.0å»ºç«‹å½’æ¡£ï¼Œå¹¶ä¸”ä¸ºå½’æ¡£ä¸­æ–‡ä»¶æ·»åŠ ç›®å½•å‰ç¼€1.0\n$ git archive --format=tar --prefix=1.0/ v1.0 | gzip > foo-1.0.tar.gz\n```\n\n> Reference:\n>\n> - [2. Git ç‹¬å¥ &mdash; GotGit](http://www.worldhello.net/gotgit/02-git-solo/index.html)\n","tags":["git"]},{"title":"React å›¾ç‰‡ç”»å»Šåº”ç”¨","url":"/2017/07/24/gallery-by-react/","content":"\n## ä»‹ç»\n\næºäºå­¦ä¹  MOOC React å®æˆ˜ â€”â€” æ‰“é€ ç”»å»Šåº”ç”¨ã€‚é¡¹ç›®æºç ï¼š[GitHub - imzyf/gallery-by-react](https://github.com/imzyf/gallery-by-react)\n\nThanks:\n\n- [React å®æˆ˜ â€”â€” æ‰“é€ ç”»å»Šåº”ç”¨](http://www.imooc.com/video/11739)\n- [ckinmind/gallery-by-react](https://github.com/ckinmind/gallery-by-react)\n- [Wobugaosuni/galleryByReact](https://github.com/Wobugaosuni/galleryByReact)\n\n### åŠŸèƒ½\n\n- å›¾ç‰‡åˆ†å¸ƒï¼š\n- ä¸­å¿ƒåŒºåŸŸï¼š1 å¼ å›¾ã€‚\n- ä¸Šéƒ¨åŒºåŸŸï¼šè‡³å¤š 1 å¼ å›¾\n- ä¸¤ä¾§åŒºåŸŸï¼šå‰©ä¸‹çš„å›¾\n- é™¤ä¸­å¿ƒåŒºåŸŸï¼Œå›¾ç‰‡åœ¨ Â±30Â° éšæœºæ—‹è½¬ã€‚\n- ç‚¹å‡»ä¸­å¿ƒåŒºåŸŸå›¾ç‰‡ï¼Œå›¾ç‰‡ç¿»è½¬ï¼Œæ˜¾ç¤ºæè¿°ã€‚\n- ç‚¹å‡»é™¤ä¸­å¿ƒåŒºåŸŸå›¾ç‰‡ï¼Œä¸ä¸­å¿ƒå›¾ç‰‡äº’æ¢ä½ç½®ã€‚\n- åœ†ç‚¹å¯¼èˆªæ ï¼š\n  - ä½äºä¸­å¿ƒåŒºåŸŸå›¾ç‰‡æ‰€åœ¨çš„å¯¼èˆªç‚¹ï¼Œé«˜äº®æ˜¾ç¤ºã€‚ç‚¹å‡»è¯¥åœ†ç‚¹ï¼Œå›¾ç‰‡ç¿»è½¬ï¼Œæ˜¾ç¤ºæè¿°ã€‚\n  - é™¤ä¸­å¿ƒåŒºåŸŸå›¾ç‰‡æ‰€åœ¨çš„å¯¼èˆªç‚¹ï¼Œè¢«ç‚¹å‡»æ—¶ï¼Œä¸ä¸­å¿ƒå›¾ç‰‡äº’æ¢ä½ç½®ã€‚\n\n### æŠ€æœ¯æ ˆ\n\n- ä½¿ç”¨ `React` æ¡†æ¶å®Œæˆç”»å»Šé¡µé¢åˆ¶ä½œã€‚\n- ä½¿ç”¨ `ES6` è¯­æ³•ã€‚\n- ä½¿ç”¨ `YEOMAN` æ­å»ºé¡¹ç›®ï¼Œç”Ÿæˆé¡¹ç›®æ–‡ä»¶ã€ä»£ç ç»“æ„ã€‚\n- ä½¿ç”¨ `Webpack` å®ç°å‰ç«¯è‡ªåŠ¨åŒ–ã€‚\n- ä½¿ç”¨ `HTML5` æ–°å¢æ ‡ç­¾ï¼Œå¦‚ `<section>ã€<figure>ã€<figcaption>ã€<nav>` ç­‰ã€‚\n- ä½¿ç”¨ `SCSS` ç¼–è¯‘å™¨å°† SCSS æ–‡ä»¶ç¼–è¯‘æˆ CSS æ–‡ä»¶ã€‚\n- ä½¿ç”¨ `CSS3` çš„ transition å±æ€§ï¼Œå®ç°æ—‹è½¬ã€å¹³ç§»ã€èƒŒæ™¯è‰²çš„é€æ¸è¿‡æ¸¡ã€‚\n- ä½¿ç”¨ `Iconfont` å­—ä½“æ–‡ä»¶ä»£æ›¿å›¾ç‰‡æ–‡ä»¶ï¼Œæ”¯æŒ CSS3 å¯¹å­—ä½“çš„ä¿®é¥°æ•ˆæœã€‚\n- ä½¿ç”¨ `json` æ ¼å¼å­˜æ”¾å›¾ç‰‡ä¿¡æ¯ã€‚\n\n<!-- more -->\n\n## é¡¹ç›®æ­å»º\n\n### ç”Ÿæˆé¡¹ç›®\n\nå®‰è£… yeoman [The web's scaffolding tool for modern webapps | Yeoman](http://yeoman.io/)\n\n```bash\nnpm install -g yo\n```\n\næŸ¥çœ‹ yeoman ç‰ˆæœ¬\n\n```bash\nyo --version\n```\n\nå®‰è£…è„šæ‰‹æ¶ generator-react-webpack [Yeoman generator for ReactJS and Webpack](https://github.com/react-webpack-generators/generator-react-webpack)\n\n```bash\nnpm install -g generator-react-webpack\n```\n\næŸ¥çœ‹ generator ç‰ˆæœ¬\n\n```bash\nnpm ls -g --depth=1 2>/dev/null | grep generator-\n```\n\n- `npm ls -g`ï¼šåˆ—å‡ºå…¨å±€å®‰è£…çš„æ‰€æœ‰ npm åŒ…\n- `--depth=1`ï¼šæ ‘çŠ¶ç»“æ„æœ€å¤šå‘ä¸‹å±•ç¤ºä¸€å±‚\n- `2>/dev/null`ï¼šå¦‚æœæ‰§è¡Œ `npm ls -g` çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰é”™è¯¯æ¶ˆæ¯ï¼ŒæŠŠé”™è¯¯æ¶ˆæ¯é‡å®šå‘åˆ°æˆ‘ä»¬çš„ç©ºè®¾å¤‡æ–‡ä»¶ä¸Š\n- `>`ï¼šé‡å®šå‘\n- `1` è¡¨ç¤º standard out æ ‡å‡†è¾“å‡º\n- `2` è¡¨ç¤º standard error æ ‡å‡†é”™è¯¯\n- `/dev/null` è¡¨ç¤ºç©ºè®¾å¤‡æ–‡ä»¶\n- `|`ï¼šé€šé“ï¼Œç”¨æ¥å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºå†…å®¹ä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥å†…å®¹\n- `grep generator-`ï¼šåœ¨å‰é¢çš„è¾“å‡ºç»“æœä¸­ï¼Œæ£€ç´¢ generator å¼€å¤´çš„å…³é”®å­—å†…å®¹\n\nç”Ÿæˆé¡¹ç›®\n\n```bash\nyo react-webpack gallery-by-react\n```\n\nå¯åŠ¨æœåŠ¡ï¼Œæ ¹æ® `package.json` ä¸­çš„ `scripts` å¯ä»¥çœ‹å‡ºã€‚\n\n```bash\nnpm run start\n```\n\n<!-- more -->\n\næˆ‘è¿™é‡Œå‘ç”Ÿäº†ä¸€ä¸ªæŠ¥é”™ï¼š\n\n```bash\nERROR in ./src/components/Main.js\nModule not found: Error: Cannot resolve module 'sass-loader' in ...\n```\n\nè§£å†³æ–¹æ³•ï¼š\n\n```bash\nnpm install node-sass --save-dev\nnpm install sass-loader --save-dev\n```\n\nè¿˜é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š\nå¦‚æœé¡µé¢ç©ºç™½ï¼Œå¯ä»¥å°è¯• `ctrl + f5`ã€‚\n\nGenerating new stateless functional components\n\n```bash\nyo react-webpack:component my/namespaced/components/name --stateless\n```\n\n### Webpack\n\n[webpack](https://webpack.js.org/) is a module bundler.\n\nå…³äº `generator-react-webpack` ç›®å½•ç»“æ„å¤§å˜æ ·ï¼Œå·²ç»æ˜¯åªéœ€è¦ `webpack` å°±èƒ½å¯åŠ¨é¡¹ç›®ï¼Œå…¶ç›®å½•ï¼š\n\n```bash\n|---cfg  è¿™é‡Œå­˜æ”¾ webpack é…ç½®\n| |---base.js  webpack åŸºç¡€é…ç½®\n| |---defaults.js  webpack ä¸€äº›å…¶ä»–çš„é»˜è®¤é…ç½®\n| |---dev.js       æµ‹è¯•ç¯å¢ƒçš„ webpack é…ç½®ï¼Œå¯åŠ¨ npm run start çš„æ—¶å€™ä¼šä½¿ç”¨è¿™ä»½ webpack è®¾ç½®ã€‚\n| |---dist.js      çº¿ä¸Šç¯å¢ƒçš„ webpack é…ç½®ï¼Œå¯åŠ¨ npm run dist çš„æ—¶å€™ä¼šä½¿ç”¨ã€‚\n| |---test.js      åšå•å…ƒæµ‹è¯•çš„æ—¶å€™ä½¿ç”¨ npm run testã€‚\n|---dist           webpack å­˜æ”¾æœ€ç»ˆæ‰“åŒ…è¾“å‡ºçš„ç”¨äºç”Ÿäº§ç¯å¢ƒçš„é¡¹ç›®æ–‡ä»¶\n|---src                       # å­˜æ”¾å¼€å‘ç¯å¢ƒé¡¹ç›®æºç \n| |---/actions/               # flux actionsç›®å½•ï¼ˆæ²¡ç”¨åˆ°ï¼‰\n| |---/components/            # ç»„ä»¶ç›®å½•\n| |---/config/                # é…ç½®ç›®å½•ï¼ˆæ²¡ç”¨åˆ°ï¼‰\n| |---/sources/               # flux datasourcesç›®å½•ï¼ˆæ²¡ç”¨åˆ°ï¼‰\n| |---/stores/                # flux stores(æ²¡ç”¨åˆ°)\n| |---/styles/                # æ ·å¼æ–‡ä»¶ç›®å½•ï¼Œå†…æœ‰ä¸€ä¸ªApp.cssåŸºç¡€cssæ–‡ä»¶\n| |---index.html              # é¡¹ç›®å…¥å£æ–‡ä»¶\n| |---index.js                # jså…¥å£æ–‡ä»¶\n|---/test/                    # å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ç›®å½•\n|---.babelrc                  # Babel é…ç½®æ–‡ä»¶\n|---.editorconfig             # EditorConfig æ’ä»¶é…ç½®æ–‡ä»¶ï¼Œç”¨äºç»Ÿä¸€ç¼–ç é£æ ¼ã€‚\n|---.eslintrc                 # ESLintä»£ç é£æ ¼æ£€æµ‹é…ç½®æ–‡ä»¶\n|---.gitignore                # éœ€è¦ git åŒæ­¥æ—¶å¿½ç•¥æ–‡ä»¶å¤¹çš„é…ç½®æ–‡ä»¶\n|---.yo-rc.json               # yeomançš„é…ç½®æ–‡ä»¶\n|---karma.conf.js             # karmaæµ‹è¯•æ¡†æ¶çš„é…ç½®\n|---package.json              # npm çš„ä¾èµ–é…ç½®é¡¹\n|---server.js                 # é¡¹ç›®è¿è¡Œçš„jsæ–‡ä»¶ï¼Œå‘½ä»¤å¯æŸ¥çœ‹package.jsonä¸­çš„script\n|---webpack.config.js         # webpacké…ç½®æ–‡ä»¶ï¼Œä¸åŒç¯å¢ƒçš„é…ç½®é¡¹åœ¨cfgç›®å½•ä¸‹\n```\n\n## èˆå°æ„å»º\n\nVCD åŸåˆ™ï¼šView Controller Dataã€‚\n\nåˆ›å»º `src/sources/imageDatas.json`\n\n```json\n[\n  {\n    \"fileName\": \"1.jpg\",\n    \"title\": \"Heaven of time\",\n    \"desc\": \"Here he comes Here comes Speed Racer.\"\n  },\n  {\n    \"fileName\": \"2.jpg\",\n    \"title\": \"Heaven of time\",\n    \"desc\": \"Here he comes Here comes Speed Racer.\"\n  }\n]\n```\n\nå®‰è£… [webpack-contrib/json-loader: json loader module for webpack](https://github.com/webpack-contrib/json-loader)ï¼š\n\n```bash\nnpm install --save-dev json-loader\n```\n\njson ä¸­è·å–å›¾ç‰‡è·¯å¾„ ES6ï¼š\n\n```javascript\nimport imageJsonDatas from \"json!../data/imageDatas.json\";\n\nconst imageDatas = imageJsonDatas.map((image) => {\n  image.imageUrl = require(\"../images/\" + image.fileName);\n  return image;\n});\n```\n\n## å›¾ç‰‡ç»„ä»¶æ„å»º\n\n```javascript\nclass ImgFigure extends React.Component {\n  render() {\n    return (\n      <figure className=\"img-figure\">\n        <img src={this.props.data.imageUrl} alt={this.props.data.title} />\n        <figcaption>\n          <h2 className=\"img-title\">{this.props.data.title}</h2>\n        </figcaption>\n      </figure>\n    );\n  }\n}\n```\n\n### è®¾ç½®å›¾ç‰‡ä½ç½®\n\n- scrollWidthï¼šå¯¹è±¡çš„å®é™…å†…å®¹çš„å®½åº¦ï¼Œä¸åŒ…è¾¹çº¿å®½åº¦ï¼Œä¼šéšå¯¹è±¡ä¸­å†…å®¹è¶…è¿‡å¯è§†åŒºåè€Œå˜å¤§ã€‚\n- clientWidthï¼šå¯¹è±¡å†…å®¹çš„å¯è§†åŒºçš„å®½åº¦ï¼Œä¸åŒ…æ»šåŠ¨æ¡ç­‰è¾¹çº¿ï¼Œä¼šéšå¯¹è±¡æ˜¾ç¤ºå¤§å°çš„å˜åŒ–è€Œæ”¹å˜ã€‚\n- offsetWidthï¼šå¯¹è±¡æ•´ä½“çš„å®é™…å®½åº¦ï¼ŒåŒ…æ»šåŠ¨æ¡ç­‰è¾¹çº¿ï¼Œä¼šéšå¯¹è±¡æ˜¾ç¤ºå¤§å°çš„å˜åŒ–è€Œæ”¹å˜ã€‚\n\né€šè¿‡ `this.Constant` åˆå§‹åŒ–å›¾ç‰‡åŒºåŸŸèŒƒå›´ï¼Œåœ¨ `componentDidMount` è®¡ç®—è®¾ç½®æ•°å€¼ã€‚\n\né€šè¿‡ `rearrange(centerIndex){}` ç»™æ¯ä¸€ä¸ªå›¾ç‰‡è®¾ç½®ä½ç½®å€¼ã€‚\n\n### è®¾ç½®å›¾ç‰‡æ—‹è½¬\n\nè®¾ç½®å›¾ç‰‡æ—‹è½¬è§’åº¦ï¼Œæ€è·¯å’Œè®¾ç½®å›¾ç‰‡ä½ç½®ä¸€æ ·ï¼š\n\n```javascript\ntopImgs[index] = {\n  pos: {\n    top: getRangeRandom(topSection.y[0], topSection.y[1]),\n    left: getRangeRandom(topSection.x[0], topSection.x[1]),\n  },\n  rotate: get30DegRandom(),\n};\n```\n\nè®¾ç½®è§’åº¦æ ·å¼ï¼Œå…¼å®¹æ¸¸è§ˆå™¨ï¼š\n\n```javascript\nif (rotate) {\n  [\"MozTransform\", \"msTransform\", \"Webkittransform\", \"transform\"].forEach(\n    (value) => {\n      styleObj[value] = \"rotate(\" + rotate + \"deg)\";\n    }\n  );\n}\n```\n\n### è®¾ç½®å›¾ç‰‡æ­£åç¿»è½¬ã€å±…ä¸­\n\nè®¾ç½®ä¿®æ”¹ state.isInverse çš„æ–¹æ³•ï¼š\n\n```javascript\ninverse(index) {\n    let {imgsArrangeArr} = this.state;\n    imgsArrangeArr[index].isInverse = !imgsArrangeArr[index].isInverse;\n    this.setState({\n        imgsArrangeArr\n    })\n}\n```\n\n```javascript\nlet imgFigureClassName = \"img-figure\";\nimgFigureClassName += isInverse ? \" is-inverse\" : \"\";\n```\n\nè§†å›¾ä¸­ `onClick` æ–¹æ³•ï¼š\n\n```javascript\n<figure\n  className={imgFigureClassName}\n  style={styleObj}\n  onClick={this.handleClick}\n/>\n```\n\nå¤„ç†ç‚¹å‡»æ–¹æ³•ï¼š\n\n```javascript\nhandleClick(e) {\n\n    let {isCenter} = this.props.arrange;\n    if (isCenter) {\n        this.props.inverse()\n    } else {\n        this.props.center()\n    }\n\n    e.stopPropagation();\n    e.preventDefault();\n}\n```\n\n### è®¾ç½®è¿‡æ¸¡åŠ¨ç”»\n\nè¡¥é—´åŠ¨ç”»ï¼š\n\n```css\ntransition: transform 0.6s ease-in-out, left 0.6s ease-in-out,\n  top 0.6s ease-in-out;\n```\n\næ›´è‡ªç„¶çš„å›¾ç‰‡ç¿»è½¬ï¼Œç¿»è½¬æ—¶è½¬è½´åŒæ—¶ç§»åŠ¨ï¼š\n\n```css\ntransform-origin: 0 50% 0; /* 50% 50% 0 */\n\ntransform: translate(0) rotateY(180deg);\n```\n\nå¢å¼ºé€è§†ï¼Œçˆ¶èŠ‚ç‚¹æ·»åŠ ï¼š\n\n```css\nperspective: 1800px;\n```\n\n## æ§åˆ¶ç»„ä»¶\n\n```javascript\nrender() {\n    return(\n        <span className=\"controller-unit\" onClick={(e)=>this.handleClick(e)}></span>\n    );\n}\n```\n\n### ä½¿ç”¨ Iconfont æ·»åŠ ç®­å¤´\n\n[Iconfont-é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“](http://www.iconfont.cn/)\n\n- Iconfont çš„ä½“ç§¯æ›´å°ã€‚\n- Iconfont æ˜¯çŸ¢é‡å›¾ï¼Œæ‹‰ä¼¸ä¸å˜å½¢ï¼Œé¢œè‰²å¯è‡ªè¡Œæ›´æ¢ï¼Œæ”¯æŒ CSS3 å¯¹å­—ä½“çš„ä¿®é¥°æ•ˆæœã€‚\n\n```css\n@font-face {\n  font-family: \"icons-turn-arrow\";\n  src: url(\"../fonts/icons/turn-arrow.eot\") format(\"enbedded\"), url(\"../fonts/icons/turn-arrow.woff\")\n      format(\"woff\"), url(\"../fonts/icons/turn-arrow.ttf\") format(\"truetype\"), url(\"../fonts/icons/turn-arrow.svg\")\n      format(\"svg\");\n}\n```\n\nä¿®æ”¹ `cfg/defaults.js`:\n\n```js\ntest: /\\.(png|jpg|gif|woff|woff2)$/,\n\næ”¹ä¸ºï¼š\ntest: /\\.(png|jpg|gif|woff|woff2|eot|ttf|svg)$/,\n```\n\nå±å¹•æ¸²æŸ“æœºåˆ¶æœ‰ä¸¤ç§ï¼š\n\n- ç°é˜¶æ¸²æŸ“ï¼šæ§åˆ¶è¾¹ç¼˜äº®åº¦ï¼Œæ‰€è€—å†…å­˜ç›¸å¯¹è¾ƒä½ï¼Œåº”ç”¨äºæ‰‹æœºã€‚\n- äºšåƒç´ æ¸²æŸ“ï¼šæ•ˆæœæ›´å¥½ï¼Œæ‰€è€—å†…å­˜ç›¸å¯¹æ›´é«˜ï¼Œåº”ç”¨äº Mac ç­‰ã€‚\n\nMac ä¸Šæœ‰äº›æµ…è‰²å­—ä½“å›¾ç‰‡ï¼ˆåœ¨ä¸Šé¢è®¾ç½®äº†ç™½è‰²ï¼Œå¯ä»¥è®¾ç½®ä¸ºæ·±è‰²è¿›è¡Œæµ‹è¯•ï¼‰åœ¨æµè§ˆå™¨ä¸Šæ˜¾å¾—è¾ƒç²—ï¼Œè§£å†³æ–¹æ¡ˆï¼š\n\nåœ¨çˆ¶å…ƒç´ ä¸Šè®¾ç½®å±æ€§ï¼Œä¿®æ”¹æµè§ˆå™¨çš„å±æ€§ï¼š\n\n```css\n-webkit-font-smoothing: antialiased; /* å¼€å¯ chrome åœ¨ Mac ä¸‹å­—ä½“æ¸²æŸ“çš„ç°é˜¶å¹³æ»‘ */\n-moz-osx-font-smoothing: grayscale; /* å¼€å¯ firefox åœ¨ Mac ä¸‹å­—ä½“æ¸²æŸ“çš„ç°é˜¶å¹³æ»‘ */\n```\n\n### äº‹ä»¶å“åº”\n\n```js\nlet { isInverse, isCenter } = this.props.arrange;\n\nlet controllerUnitClassName = \"controller-unit\";\nif (isCenter) {\n  controllerUnitClassName += \" is-center\";\n\n  if (isInverse) {\n    controllerUnitClassName += \" is-inverse\";\n  }\n}\n```\n\n## GitHub Page å‘å¸ƒ\n\nGitHub Page éœ€è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œä¿®æ”¹ï¼š\n\n`cfg/default.js`ï¼š\n\n```javascript\npublicPath: '/assets/',\n\næ”¹ä¸ºï¼š\npublicPath: 'assets/',\n```\n\n`src/index.html`\n\n```html\n<script type=\"text/javascript\" src=\"/assets/app.js\"></script>\n\næ”¹æˆï¼š\n<script type=\"text/javascript\" src=\"assets/app.js\"></script>\n```\n\nç„¶åæ‰“åŒ…é¡¹ç›®ï¼š\n\n```bash\nnpm run dist\n```\n\nå°† `dist` æäº¤åˆ° Git ä»“åº“ï¼š\n\n```bash\ngit add dist\ngit commit -m \"release project\"\n```\n\næ¨é€åˆ° GitHub Pageï¼š\n\n```bash\ngit subtree push --prefix=dist origin gh-pages\n```\n\næ”¹å›ä»£ç ï¼š\n\n```bash\ngit reset --hard\n```\n\n## TODO\n\n- [ ] CSS Modules, radium\n- [ ] React Flux\n- [ ] React Animation API\n- [ ] React Canvas\n","tags":["react"]},{"title":"React å…¥é—¨","url":"/2017/07/20/imooc-react-getting-started-tutorial/","content":"\n## React ä»‹ç»\n\n### åˆè¯† React\n\n1. React ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ MVCã€MVVM æ¡†æ¶ï¼Œå…¶åªè´Ÿè´£ View å±‚ï¼ŒMVC å·²ç»ä¸é€‚ç”¨äºæŸäº›åœºæ™¯çš„å¼€å‘\n2. React è·Ÿ Web Components ä¸å†²çª\n3. React çš„ç‰¹ç‚¹å°±æ˜¯â€œè½»â€ï¼Œæ•°æ®å•å‘ç»‘å®šï¼Œç‹¬ç«‹ã€å°å·§ã€å¿«é€Ÿã€åˆ›æ–°\n4. ç»„ä»¶åŒ–çš„å¼€å‘æ€è·¯ï¼Œå°ç»„ä»¶æ„æˆå¤§ç»„ä»¶ï¼Œé«˜åº¦å¯é‡ç”¨\n\n### React åº”ç”¨åœºæ™¯\n\n1. å¤æ‚åœºæ™¯ä¸‹çš„é«˜æ€§èƒ½\n2. é‡ç”¨ç»„ä»¶åº“ï¼Œç»„ä»¶ç»„åˆ\n3. â€œæ‡’â€ï¼Œå°‘åšæ— ç”¨åŠŸ\n\n> ä½ æ€»æ˜¯è¿™æ ·è½»è¨€æ”¾å¼ƒçš„è¯ï¼Œæ— è®ºè¿‡å¤šä¹…éƒ½åªä¼šåŸåœ°è¸æ­¥ã€‚ â€”â€” å¤šå•¦ a æ¢¦\n\n### å‰ç½®çŸ¥è¯†\n\n1. JS CSS\n2. Sass Compass\n3. Yeoman Grunt Webpack\n4. CommonJS NodeJS\n5. Git GitHub\n\n<!-- more -->\n\n### To Be A Better Engineer\n\n1. æ— è®ºçŸ¥è¯†æœ‰å¤šæ–°ã€é¡¹ç›®æœ‰å¤šéš¾ï¼Œåªè¦æ¥äº†ä»€ä¹ˆå§¿åŠ¿éƒ½è¦ä¸Š\n2. æ²¡äººç–¼ã€æ²¡äººçˆ±ï¼Œå›¢é˜Ÿä¸­æ²¡äººå¯ä»¥å¸®ä¸Šå¿™ï¼Œè¦å­¦ä¼šå€ŸåŠ©å¤–åŠ›ï¼Œè§†é¢‘ã€Googleã€å¼€æºé¡¹ç›®\n3. ç§¯æè¦æ±‚è¿›æ­¥\n\n## React çš„ JSX ä¸ Style\n\nå®˜ç½‘ï¼š[React - A JavaScript library for building user interfaces](https://facebook.github.io/react/)\n\n> ç½å¤´æ˜¯ 1810 å‘æ˜å‡ºæ¥çš„ï¼Œå¯æ˜¯å¼€ç½å™¨å‘¢ï¼Œå´åœ¨ 1858 å¹´æ‰å‘æ˜å‡ºæ¥ã€‚æœ‰æ—¶å°±æ˜¯è¿™æ ·ï¼Œé‡è¦çš„ä¸œè¥¿å¯èƒ½è¿Ÿæ¥ä¸€æ­¥ï¼Œä½†å´ä¸€å®šä¼šåˆ°ã€‚ç”Ÿæ´»å’Œçˆ±æƒ…ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚ç¨‹åºï¼Œå½“ç„¶ä¹Ÿä¸ä¾‹å¤–ã€‚\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" />\n    <title>Hello World</title>\n    <script src=\"https://unpkg.com/react@latest/dist/react.js\"></script>\n    <script src=\"https://unpkg.com/react-dom@latest/dist/react-dom.js\"></script>\n    <script src=\"https://unpkg.com/babel-standalone@6.15.0/babel.min.js\"></script>\n    <style>\n      .fontcolor {\n        color: blue !important;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"text/babel\">\n      var Hello = React.createClass({\n        render: function () {\n          return <div className=\"fontcolor\">Hello {this.props.name}!</div>;\n        },\n      });\n\n      class Welcome extends React.Component {\n        render() {\n          return <h1>Hello, {this.props.name}</h1>;\n        }\n      }\n\n      ReactDOM.render(\n        <div>\n          <Hello name=\"World\" />\n          <Welcome name=\"World\" />\n        </div>,\n        document.getElementById(\"root\")\n      );\n    </script>\n  </body>\n</html>\n```\n\næ·»åŠ ç»„ä»¶å±æ€§ï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š`class` å±æ€§éœ€è¦å†™æˆ `className` ï¼Œ`for` å±æ€§éœ€è¦å†™æˆ `htmlFor` ï¼Œè¿™æ˜¯å› ä¸º `class` å’Œ `for` æ˜¯ JavaScript çš„ä¿ç•™å­—ã€‚ç„¶åï¼Œå±æ€§åéƒ½æ˜¯é©¼å³°å‘½åæ³•ã€‚\n\n> æ­£æ‰€è°“ç²‰æœ«ç™»åœºï¼Œè¿œè¿‘èµ·å¸†ï¼Œé£äº‘æ›´è¿­ï¼Œå¬‰çš®è€Œé»„ï¼Œå¤šå°‘èšæ•£äºåœ†ç¼ºã€‚\n\n## React ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå’Œäº‹ä»¶å¤„ç†\n\n### React Components Lifecycle\n\n[State and Lifecycle - React](https://facebook.github.io/react/docs/state-and-lifecycle.html)\n\n1. Mountedï¼šReact Component è¢« render è§£æç”Ÿæˆå¯¹åº”çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶åœ¨æ’å…¥æµè§ˆå™¨çš„ DOM ç»“æ„çš„ä¸€ä¸ªè¿‡ç¨‹\n2. Updateï¼šä¸€ä¸ª mounted çš„ React Component è¢«é‡æ–° render çš„è¿‡ç¨‹ï¼ˆåªæœ‰å½±å“äº† DOM ç»“æ„æ—¶æ‰ä¼šè¢«æ”¹å˜ï¼‰\n3. Unmountedï¼šä¸€ä¸ª mounted çš„ React Component å¯¹åº”çš„ DOM èŠ‚ç‚¹è¢«ä» DOM ç»“æ„ä¸­ç§»é™¤çš„è¿‡ç¨‹\n\næ¯ä¸€ä¸ªçŠ¶æ€éƒ½å°è£…äº†å¯¹åº”çš„ hook å‡½æ•°ã€‚`will` and `did` hook.\n\n### React Event Listener\n\n[Handling Events - React](https://facebook.github.io/react/docs/handling-events.html)\n\n```javascript\nclass ClickBtn extends React.Component {\n  handleClick(e) {\n    e.preventDefault();\n    console.log(\"The link was clicked.\");\n  }\n\n  render() {\n    return (\n      <a href=\"#\" onClick={this.handleClick}>\n        Click me\n      </a>\n    );\n  }\n}\n\nReactDOM.render(\n  <div>\n    <Hello name=\"World\" />\n    <Welcome name=\"World\" />\n    <ClickBtn />\n  </div>,\n  document.getElementById(\"root\")\n);\n```\n\nå®˜æ–¹æ–‡æ¡£å€¼å¾—åå¤çœ‹ã€‚\n\n## References\n\n- [React å…¥é—¨è¯¾ç¨‹ä»‹ç»-æ…•è¯¾ç½‘](http://www.imooc.com/video/10427)\n\n-- EOF --\n","tags":["react"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - ç‹¬å¥ - Part 2","url":"/2017/07/20/got-git-reading-notes-solo-part2/","content":"\nä¸»è¦å†…å®¹ï¼šã€Git é‡ç½®ã€‘ã€ã€Git æ£€å‡ºã€‘ã€ã€æ¢å¤è¿›åº¦ã€‘\n\n## Git é‡ç½®\n\n### åˆ†æ”¯æ¸¸æ ‡ master çš„æ¢ç§˜\n\n```bash\n$ git log --graph --oneline\n* e695606 which version checked in?\n* a0c641e who does commit?\n* 9e8a761 initialized.\n```\n\nå¼•ç”¨ `refs/heads/master` å°±å¥½åƒæ˜¯ä¸€ä¸ªæ¸¸æ ‡ï¼Œåœ¨æœ‰æ–°çš„æäº¤å‘ç”Ÿçš„æ—¶å€™æŒ‡å‘äº†æ–°çš„æäº¤ã€‚\n\nGit æä¾›äº† `git reset` å‘½ä»¤ï¼Œå¯ä»¥å°†â€œæ¸¸æ ‡â€æŒ‡å‘ä»»æ„ä¸€ä¸ªå­˜åœ¨çš„æäº¤ IDã€‚æ³¨æ„ä¸‹é¢çš„å‘½ä»¤ä¸­ä½¿ç”¨äº† `--hard` å‚æ•°ï¼Œä¼šç ´åå·¥ä½œåŒºæœªæäº¤çš„æ”¹åŠ¨ï¼Œæ…ç”¨ã€‚\n\n```bash\n$ git reset --hard HEAD^\nHEAD is now at e695606 which version checked in?\n```\n\n<!-- more -->\n\n### ç”¨ reflog æŒ½æ•‘é”™è¯¯çš„é‡ç½®\n\né€šè¿‡ `.git/logs` ç›®å½•ä¸‹æ—¥å¿—æ–‡ä»¶è®°å½•äº†åˆ†æ”¯çš„å˜æ›´ã€‚é»˜è®¤éè£¸ç‰ˆæœ¬åº“ï¼ˆå¸¦æœ‰å·¥ä½œåŒºï¼‰éƒ½æä¾›åˆ†æ”¯æ—¥å¿—åŠŸèƒ½ï¼Œè¿™æ˜¯å› ä¸ºå¸¦æœ‰å·¥ä½œåŒºçš„ç‰ˆæœ¬åº“éƒ½æœ‰å¦‚ä¸‹è®¾ç½®ï¼š\n\n```bash\n$ git config core.logallrefupdates\ntrue\n```\n\næŸ¥çœ‹ä¸€ä¸‹ `master` åˆ†æ”¯çš„æ—¥å¿—æ–‡ä»¶ `.git/logs/refs/heads/master` ä¸­çš„å†…å®¹ã€‚\n\n```bash\n$ tail -5 .git/logs/refs/heads/master\n```\n\nGit æä¾›äº†ä¸€ä¸ª `git reflog` å‘½ä»¤ï¼Œå¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ“ä½œã€‚\n\n```bash\n$ git reflog show master | head -5\n9e8a761 master@{0}: 9e8a761: updating HEAD\ne695606 master@{1}: HEAD^: updating HEAD\n4902dc3 master@{2}: commit: does master follow this new commit?\n...\n```\n\né‡ç½® master ä¸ºä¸¤æ¬¡æ”¹å˜ä¹‹å‰çš„å€¼ã€‚\n\n```bash\n$ git reset --hard master@{2}\n```\n\n### æ·±å…¥äº†è§£ git reset å‘½ä»¤\n\n```bash\ngit reset [-q] [<commit>] [--] <paths>...\ngit reset [--soft | --mixed | --hard | --merge | --keep] [-q] [<commit>]\n```\n\nä¸ºäº†é¿å…è·¯å¾„å’Œå¼•ç”¨ï¼ˆæˆ–è€…æäº¤ IDï¼‰åŒåè€Œå†²çªï¼Œå¯ä»¥åœ¨ `<paths>` å‰ç”¨ä¸¤ä¸ªè¿ç»­çš„çŸ­çº¿ï¼ˆå‡å·ï¼‰ä½œä¸ºåˆ†éš”ã€‚\n\n![20-got-git-reading-notes-solo-git-reset](https://user-images.githubusercontent.com/9289792/80202770-b5966d80-8658-11ea-92e4-c348b8f12313.png)\n\n- `--hard` ä¼šæ‰§è¡Œä¸Šå›¾ä¸­çš„ 1ã€2ã€3 å…¨éƒ¨çš„ä¸‰ä¸ªåŠ¨ä½œã€‚\n\n1.  æ›¿æ¢å¼•ç”¨çš„æŒ‡å‘ã€‚å¼•ç”¨æŒ‡å‘æ–°çš„æäº¤ IDã€‚\n2.  æ›¿æ¢æš‚å­˜åŒºã€‚æ›¿æ¢åï¼Œæš‚å­˜åŒºçš„å†…å®¹å’Œå¼•ç”¨æŒ‡å‘çš„ç›®å½•æ ‘ä¸€è‡´ã€‚\n3.  æ›¿æ¢å·¥ä½œåŒºã€‚æ›¿æ¢åï¼Œå·¥ä½œåŒºçš„å†…å®¹å˜å¾—å’Œæš‚å­˜åŒºä¸€è‡´ï¼Œä¹Ÿå’Œ HEAD æ‰€æŒ‡å‘çš„ç›®å½•æ ‘å†…å®¹ç›¸åŒã€‚\n\n- `--soft` ä¼šæ‰§è¡Œä¸Šå›¾ä¸­çš„æ“ä½œ 1ã€‚\n- `--mixed`ï¼ˆç¼ºçœï¼‰ä¼šæ‰§è¡Œä¸Šå›¾ä¸­çš„æ“ä½œ 1 å’Œæ“ä½œ 2ã€‚\n\n```bash\n$ git reset\n$ git reset HEAD\n# ä»…ç”¨ HEAD æŒ‡å‘çš„ç›®å½•æ ‘é‡ç½®æš‚å­˜åŒºï¼Œå·¥ä½œåŒºä¸ä¼šå—åˆ°å½±å“ï¼Œç›¸å½“äºå°†ä¹‹å‰ç”¨ git add å‘½ä»¤æ›´æ–°åˆ°æš‚å­˜åŒºçš„å†…å®¹æ’¤å‡ºæš‚å­˜åŒºã€‚å¼•ç”¨ä¹Ÿæœªæ”¹å˜ï¼Œå› ä¸ºå¼•ç”¨é‡ç½®åˆ° HEAD ç›¸å½“äºæ²¡æœ‰é‡ç½®ã€‚\n\ngit reset -- filename\ngit reset HEAD filename\n# ä»…å°†æ–‡ä»¶ filename æ’¤å‡ºæš‚å­˜åŒºï¼Œæš‚å­˜åŒºä¸­å…¶ä»–æ–‡ä»¶ä¸æ”¹å˜ã€‚ç›¸å½“äºå¯¹å‘½ä»¤ git add filename çš„åå‘æ“ä½œã€‚\n\ngit reset --soft HEAD^\n# å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸æ”¹å˜ï¼Œä½†æ˜¯å¼•ç”¨å‘å‰å›é€€ä¸€æ¬¡ã€‚å½“å¯¹æœ€æ–°æäº¤çš„æäº¤è¯´æ˜æˆ–è€…æäº¤çš„æ›´æ”¹ä¸æ»¡æ„æ—¶ï¼Œæ’¤é”€æœ€æ–°çš„æäº¤ä»¥ä¾¿é‡æ–°æäº¤ã€‚git commit çš„åå‘æ“ä½œã€‚\n# åœ¨ä¹‹å‰æ›¾ç»ä»‹ç»è¿‡ä¸€ä¸ªä¿®è¡¥æäº¤å‘½ä»¤ git commit --amendï¼Œç”¨äºå¯¹æœ€æ–°çš„æäº¤è¿›è¡Œé‡æ–°æäº¤ä»¥ä¿®è¡¥é”™è¯¯çš„æäº¤è¯´æ˜æˆ–è€…é”™è¯¯çš„æäº¤æ–‡ä»¶ã€‚ä¿®è¡¥æäº¤å‘½ä»¤å®é™…ä¸Šç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢ä¸¤æ¡å‘½ä»¤ã€‚ï¼ˆæ³¨ï¼šæ–‡ä»¶ .git/COMMIT_EDITMSG ä¿å­˜äº†ä¸Šæ¬¡çš„æäº¤æ—¥å¿—ï¼‰\n$ git reset --soft HEAD^\n$ git commit -e -F .git/COMMIT_EDITMSG\n\n$ git reset HEAD^\n# å·¥ä½œåŒºä¸æ”¹å˜ï¼Œä½†æ˜¯æš‚å­˜åŒºä¼šå›é€€åˆ°ä¸Šä¸€æ¬¡æäº¤ä¹‹å‰ï¼Œå¼•ç”¨ä¹Ÿä¼šå›é€€ä¸€æ¬¡ã€‚\n\n$ git reset --hard HEAD^\n# å½»åº•æ’¤é”€æœ€è¿‘çš„æäº¤ã€‚å¼•ç”¨å›é€€åˆ°å‰ä¸€æ¬¡ï¼Œè€Œä¸”å·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½ä¼šå›é€€åˆ°ä¸Šä¸€æ¬¡æäº¤çš„çŠ¶æ€ã€‚è‡ªä¸Šä¸€æ¬¡ä»¥æ¥çš„æäº¤å…¨éƒ¨ä¸¢å¤±ã€‚\n```\n\n## Git æ£€å‡º\n\né‡ç½®å‘½ä»¤ `git reset` çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯ä¿®æ”¹å¼•ç”¨ï¼ˆå¦‚ masterï¼‰çš„æ¸¸æ ‡ã€‚å¦‚æœ HEAD è¦æ”¹å˜è¯¥å¦‚ä½•æ”¹å˜å‘¢ï¼Ÿæ£€å‡ºå‘½ä»¤ `git checkout` è¯¥å‘½ä»¤çš„å®è´¨å°±æ˜¯ä¿®æ”¹ HEAD æœ¬èº«çš„æŒ‡å‘ï¼Œè¯¥å‘½ä»¤ä¸ä¼šå½±å“åˆ†æ”¯â€œæ¸¸æ ‡â€ï¼ˆå¦‚ masterï¼‰ã€‚\n\n### HEAD çš„é‡ç½®å³æ£€å‡º\n\n```bash\n$ git co HEAD^\nNote: checking out 'HEAD^'.\n\nYou are in 'detached HEAD' state. You can look around, make experimental\nchanges and commit them, and you can discard any commits you make in this\nstate without impacting any branches by performing another checkout.\n# æ‚¨ç°åœ¨å¤„äº 'åˆ†ç¦»å¤´æŒ‡é’ˆ' çŠ¶æ€ã€‚æ‚¨å¯ä»¥æ£€æŸ¥ã€æµ‹è¯•å’Œæäº¤ï¼Œè€Œä¸å½±å“ä»»ä½•åˆ†æ”¯ã€‚\n# é€šè¿‡æ‰§è¡Œå¦å¤–çš„ä¸€ä¸ª checkout æ£€å‡ºæŒ‡ä»¤ä¼šä¸¢å¼ƒåœ¨æ­¤çŠ¶æ€ä¸‹çš„ä¿®æ”¹å’Œæäº¤ã€‚\n\nIf you want to create a new branch to retain commits you create, you may\ndo so (now or later) by using -b with the checkout command again. Example:\n# å¦‚æœæƒ³ä¿ç•™åœ¨æ­¤çŠ¶æ€ä¸‹çš„ä¿®æ”¹å’Œæäº¤ï¼Œä½¿ç”¨ -b å‚æ•°è°ƒç”¨ checkout æ£€å‡ºæŒ‡ä»¤ä»¥\n# åˆ›å»ºæ–°çš„è·Ÿè¸ªåˆ†æ”¯ã€‚å¦‚ï¼š\n\n  git checkout -b <new-branch-name>\n\nHEAD is now at 3175afd...\n```\n\nä»€ä¹ˆå«åš `detached HEAD` â€œåˆ†ç¦»å¤´æŒ‡é’ˆâ€çŠ¶æ€ï¼ŸæŸ¥çœ‹ä¸€ä¸‹æ­¤æ—¶ HEAD çš„å†…å®¹å°±æ˜ç™½äº†ã€‚\n\n```\n$ cat .git/HEAD\n3175afde9450a1dc40b09d05a012b45e967cb80f\n```\n\nåŸæ¥â€œåˆ†ç¦»å¤´æŒ‡é’ˆâ€çŠ¶æ€æŒ‡çš„å°±æ˜¯ HEAD å¤´æŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªå…·ä½“çš„æäº¤ IDï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼ˆåˆ†æ”¯ï¼‰ã€‚æ³¨æ„ä¸Šé¢çš„ `reflog` æ˜¯ `HEAD` å¤´æŒ‡é’ˆçš„å˜è¿è®°å½•ï¼Œè€Œé `master` åˆ†æ”¯ã€‚\n\næŸ¥çœ‹ä¸€ä¸‹ HEAD å’Œ master å¯¹åº”çš„æäº¤ IDï¼Œä¼šå‘ç°ç°åœ¨å®ƒä»¬æŒ‡å‘çš„ä¸ä¸€æ ·ã€‚\n\n```bash\n$ git rev-parse HEAD master\n3175afde9450a1dc40b09d05a012b45e967cb80f\nbd08cb462d38b54b930cf1934b0c33f2e4592390\n```\n\nåœ¨â€œåˆ†ç¦»å¤´æŒ‡é’ˆâ€æ¨¡å¼ä»ç„¶å¯ä»¥è¿›è¡Œæäº¤ï¼š\n\n```bash\n$ git status\nHEAD detached at 3175afd\n...\n```\n\nä½†æ˜¯åœ¨ checkout åˆ°å…¶ä»–åˆ†æ”¯æ—¶ï¼Œåˆšæ‰çš„æäº¤ä¼šä¸¢å¤±ï¼Œä½†æ˜¯è¿™ä¸ªæäº¤ä»ç„¶åœ¨ç‰ˆæœ¬åº“ä¸­ï¼Œç”±äºè¿™ä¸ªæäº¤æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯è·Ÿè¸ªåˆ°ï¼Œå› æ­¤å¹¶ä¸èƒ½ä¿è¯è¿™ä¸ªæäº¤ä¼šæ°¸ä¹…å­˜åœ¨ã€‚\n\nå®é™…ä¸Šå½“ reflog ä¸­å«æœ‰è¯¥æäº¤çš„æ—¥å¿—è¿‡æœŸåï¼Œè¿™ä¸ªæäº¤éšæ—¶éƒ½ä¼šä»ç‰ˆæœ¬åº“ä¸­å½»åº•æ¸…é™¤ã€‚\n\n### æŒ½æ•‘åˆ†ç¦»å¤´æŒ‡é’ˆ\n\nåœ¨â€œåˆ†ç¦»å¤´æŒ‡é’ˆâ€æ¨¡å¼ä¸‹è¿›è¡Œçš„æµ‹è¯•æäº¤é™¤äº†ä½¿ç”¨æäº¤ ID `acc2f69` è®¿é—®ä¹‹å¤–ï¼Œä¸èƒ½é€šè¿‡ master åˆ†æ”¯æˆ–å…¶ä»–å¼•ç”¨è®¿é—®åˆ°ã€‚ä½¿ç”¨åˆå¹¶æ“ä½œ `git merge` å°†æäº¤ acc2f69 åˆå¹¶åˆ° master åˆ†æ”¯ä¸­æ¥ã€‚\n\n```bash\n$ git merge acc2f69\nMerge made by recursive.\n...\n```\n\n## æ¢å¤è¿›åº¦\n\n### ç»§ç»­æš‚å­˜åŒºæœªå®Œæˆçš„å®è·µ\n\n```bash\n# ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦\n$ git stash\n\n# æŸ¥çœ‹ä¿å­˜çš„è¿›åº¦ç”¨å‘½ä»¤\n$ git stash list\n\n# æœ€è¿‘ä¿å­˜çš„è¿›åº¦è¿›è¡Œæ¢å¤\n$ git stash pop\n$ git stash pop [--index] [<stash>]\n# --index é™¤äº†æ¢å¤å·¥ä½œåŒºçš„æ–‡ä»¶å¤–ï¼Œè¿˜å°è¯•æ¢å¤æš‚å­˜åŒº\n# ä»è¯¥ <stash> ä¸­æ¢å¤\n```\n\n```\n$ git stash [save [-p|--patch] [-k|--[no-]keep-index] [-q|--quiet]\n                [-u|--include-untracked] [-a|--all] [<message>]]\n```\n\n- `--patch` ä¼šæ˜¾ç¤ºå·¥ä½œåŒºå’Œ HEAD çš„å·®å¼‚ï¼Œé€šè¿‡å¯¹å·®å¼‚æ–‡ä»¶çš„ç¼–è¾‘å†³å®šåœ¨è¿›åº¦ä¸­æœ€ç»ˆè¦ä¿å­˜çš„å·¥ä½œåŒºçš„å†…å®¹ï¼Œé€šè¿‡ç¼–è¾‘å·®å¼‚æ–‡ä»¶å¯ä»¥åœ¨è¿›åº¦ä¸­æ’é™¤æ— å…³å†…å®¹ã€‚\n- ä½¿ç”¨ `-k` æˆ–è€… `--keep-index` å‚æ•°ï¼Œåœ¨ä¿å­˜è¿›åº¦åä¸ä¼šå°†æš‚å­˜åŒºé‡ç½®ã€‚\n\n```bash\n# ä¸åˆ é™¤æ¢å¤çš„è¿›åº¦ä¹‹å¤–ï¼Œå…¶ä½™å’Œ git stash pop å‘½ä»¤ä¸€æ ·\n$ git stash apply [--index] [<stash>]\n\n# åˆ é™¤ä¸€ä¸ªå­˜å‚¨çš„è¿›åº¦\n$ git stash drop [<stash>]\n\n# åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„è¿›åº¦\n$ git stash clear\n\n# åŸºäºè¿›åº¦åˆ›å»ºåˆ†æ”¯\n$ git stash branch <branchname> <stash>\n```\n\n### æ¢ç§˜ git stash\n\nåœ¨æ‰§è¡Œ `git stash` å‘½ä»¤æ—¶ï¼ŒGit å®é™…è°ƒç”¨äº†ä¸€ä¸ªè„šæœ¬æ–‡ä»¶å®ç°ç›¸å…³çš„åŠŸèƒ½ã€‚\n\n```bash\n$ git --exec-path\n/usr/lib/git-core\n\n$ file /usr/lib/git-core/git-stash\n/usr/lib/git-core/git-stash: POSIX shell script text executable\n```\n\næœ¬åœ°æ²¡æœ‰è¢«ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè·Ÿè¸ªçš„æ–‡ä»¶å¹¶ä¸èƒ½ä¿å­˜è¿›åº¦ã€‚å› æ­¤æœ¬åœ°æ–°æ–‡ä»¶éœ€è¦æ‰§è¡Œæ·»åŠ  `add` å†æ‰§è¡Œ git stash å‘½ä»¤ã€‚\n\nåœ¨ç”¨ `git stash` å‘½ä»¤ä¿å­˜è¿›åº¦æ—¶ï¼Œæä¾›è¯´æ˜æ›´å®¹æ˜“æ‰¾åˆ°å¯¹åº”çš„è¿›åº¦æ–‡ä»¶ã€‚\n\næ¯ä¸ªè¿›åº¦çš„æ ‡è¯†éƒ½æ˜¯ `stash@{<n>}` æ ¼å¼ï¼Œåƒæäº†å‰é¢ä»‹ç»çš„ `reflog` çš„æ ¼å¼ã€‚`git stash` çš„å°±æ˜¯ç”¨åˆ°äº†å‰é¢ä»‹ç»çš„å¼•ç”¨å’Œå¼•ç”¨å˜æ›´æ—¥å¿— `reflog` æ¥å®ç°çš„ã€‚\n\nç”¨ git stash ä¿å­˜è¿›åº¦ï¼Œå®é™…ä¸Šä¼šå°†è¿›åº¦ä¿å­˜åœ¨å¼•ç”¨ refs/stash æ‰€æŒ‡å‘çš„æäº¤ä¸­ã€‚å¤šæ¬¡çš„è¿›åº¦ä¿å­˜ï¼Œå®é™…ä¸Šç›¸å½“äºå¼•ç”¨ refs/stash ä¸€æ¬¡åˆä¸€æ¬¡çš„å˜åŒ–ï¼Œè€Œ refs/stash å¼•ç”¨çš„å˜åŒ–ç”± reflogï¼ˆå³.git/logs/refs/stashï¼‰æ‰€è®°å½•ä¸‹æ¥ã€‚\n\n### å¦‚ä½•åœ¨å¼•ç”¨ refs/stash ä¸­åŒæ—¶ä¿å­˜æš‚å­˜åŒºçš„è¿›åº¦å’Œå·¥ä½œåŒºä¸­çš„è¿›åº¦\n\n```\n$ git log --graph --pretty=raw  refs/stash -2\n*   commit e5c0cdc2dedc3e50e6b72a683d928e19a1d9de48\n|\\  tree 780c22449b7ff67e2820e09a6332c360ddc80578\n| | parent 2b31c199d5b81099d2ecd91619027ab63e8974ef\n| | parent c5edbdcc90addb06577ff60f644acd1542369194\n| | author Jiang Xin <jiangxin@ossxp.com> 1291623066 +0800\n| | committer Jiang Xin <jiangxin@ossxp.com> 1291623066 +0800\n| |\n| |     WIP on master: 2b31c19 Merge commit 'acc2f69'\n| |\n| * commit c5edbdcc90addb06577ff60f644acd1542369194\n|/  tree 780c22449b7ff67e2820e09a6332c360ddc80578\n|   parent 2b31c199d5b81099d2ecd91619027ab63e8974ef\n|   author Jiang Xin <jiangxin@ossxp.com> 1291623066 +0800\n|   committer Jiang Xin <jiangxin@ossxp.com> 1291623066 +0800\n|\n|       index on master: 2b31c19 Merge commit 'acc2f69'\n```\n\næœ€æ–°çš„æäº¤è¯´æ˜ä¸­æœ‰ `WIP`ï¼ˆWork In Progessï¼‰å­—æ ·ï¼Œè¯´æ˜ä»£è¡¨äº†å·¥ä½œåŒºè¿›åº¦ã€‚è€Œæœ€æ–°æäº¤çš„ç¬¬äºŒä¸ªçˆ¶æäº¤ï¼ˆä¸Šå›¾ä¸­æ˜¾ç¤ºä¸ºç¬¬äºŒä¸ªæäº¤ï¼‰æœ‰ index on master å­—æ ·ï¼Œè¯´æ˜è¿™ä¸ªæäº¤ä»£è¡¨ç€æš‚å­˜åŒºçš„è¿›åº¦ã€‚\n\n> Reference:\n>\n> - [2. Git ç‹¬å¥ &mdash; GotGit](http://www.worldhello.net/gotgit/02-git-solo/index.html)\n","tags":["git"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - ç‹¬å¥ - Part 1","url":"/2017/07/19/got-git-reading-notes-solo-part1/","content":"\nä¸»è¦å†…å®¹ï¼šã€Git åˆå§‹åŒ–ã€‘ã€ã€Git æš‚å­˜åŒºã€‘ã€ã€Git å¯¹è±¡ã€‘\n\n## Git åˆå§‹åŒ–\n\nè®¾ç½®ä¸€ä¸‹ Git çš„ç¯å¢ƒå˜é‡ï¼Œè¿™ä¸ªè®¾ç½®æ˜¯ä¸€æ¬¡æ€§çš„å·¥ä½œã€‚å³è¿™äº›è®¾ç½®ä¼šåœ¨å…¨å±€æ–‡ä»¶ï¼ˆç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ `~/.gitconfig`ï¼‰æˆ–ç³»ç»Ÿæ–‡ä»¶ï¼ˆ`/etc/gitconfig`ï¼‰ä¸­åšæ°¸ä¹…çš„è®°å½•ã€‚\n\né…ç½®çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€å°†åœ¨ç‰ˆæœ¬åº“æäº¤æ—¶ä½œä¸ºæäº¤è€…çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€ã€‚\n\n```bash\n$ git config --global user.name \"Jiang Xin\"\n$ git config --global user.email jiangxin@ossxp.com\n```\n\n### è®¾ç½®ä¸€äº› Git åˆ«åï¼Œä»¥ä¾¿å¯ä»¥ä½¿ç”¨æ›´ä¸ºç®€æ´çš„å­å‘½ä»¤\n\nåªåœ¨æœ¬ç”¨æˆ·çš„å…¨å±€é…ç½®ä¸­æ·»åŠ  Git å‘½ä»¤åˆ«åï¼š\n\n```bash\n$ git config --global alias.br branch\n$ git config --global alias.ci \"commit -s\"\n$ git config --global alias.co checkout\n$ git config --global alias.st \"-p status\"\n```\n\n<!-- more -->\n\n### ç‰ˆæœ¬åº“çš„åˆå§‹åŒ–\n\n```bash\n$ mkdir demo\n$ cd demo\n$ git init\n```\n\nåˆå§‹åŒ–ç©ºçš„ Git ç‰ˆæœ¬åº“äº `/path/to/my/workspace/demo/.git/`\n\ngit init å‘½ä»¤çš„åé¢ç›´æ¥è¾“å…¥ç›®å½•åç§°\n\n```bash\n$ cd /path/to/my/workspace\n$ git init demo\n```\n\n```bash\n$ ls -aF\n./  ../  .git/\n```\n\nè¿™ä¸ªéšè—çš„ `.git` ç›®å½•å°±æ˜¯ Git ç‰ˆæœ¬åº“ï¼ˆåˆå«ä»“åº“ï¼Œrepositoryï¼‰ã€‚\n\n`.git` ç‰ˆæœ¬åº“ç›®å½•æ‰€åœ¨çš„ç›®å½•ï¼Œå³ `/path/to/my/workspace/demo` ç›®å½•ç§°ä¸º **å·¥ä½œåŒº**ã€‚\n\nå°†æ–°å»ºç«‹çš„æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“\n\n```bash\n$ git add welcome.txt\n```\n\nå†æ‰§è¡Œä¸€æ¬¡æäº¤æ“ä½œï¼Œä½¿ç”¨ `-m` å‚æ•°ç›´æ¥ç»™å‡ºäº†æäº¤è¯´æ˜ã€‚\n\n```bash\n$ git ci -m \"initialized\"\n[master (root-commit) 7f0b2be] init\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 welcome.txt\n```\n\n`git ci` æ˜¯ä¸Šé¢é…ç½®çš„åˆ«åï¼Œæˆ‘ä¸ªäººè§‰å¾— `-s` è¿™ä¸ªå‚æ•°æ¯”è¾ƒå†—ä½™ã€‚\n\n### æ€è€ƒï¼šä¸ºä»€ä¹ˆå·¥ä½œåŒºä¸‹æœ‰ä¸€ä¸ª `.git` ç›®å½•ï¼Ÿ\n\nGit çš„è¿™ç§è®¾è®¡ï¼Œå°†ç‰ˆæœ¬åº“æ”¾åœ¨å·¥ä½œåŒºæ ¹ç›®å½•ä¸‹ï¼Œæ‰€æœ‰çš„ç‰ˆæœ¬æ§åˆ¶æ“ä½œï¼ˆé™¤äº†å’Œå…¶ä»–è¿œç¨‹ç‰ˆæœ¬åº“ä¹‹é—´çš„äº’æ“ä½œï¼‰éƒ½åœ¨æœ¬åœ°å³å¯å®Œæˆï¼Œä¸åƒ Subversion åªæœ‰å¯¥å¯¥æ— å‡ çš„å‡ ä¸ªå‘½ä»¤æ‰èƒ½è„±ç¦»ç½‘ç»œæ‰§è¡Œã€‚è€Œä¸” Git ä¹Ÿæ²¡æœ‰ CVS å’Œ Subversion çš„å®‰å…¨æ³„æ¼é—®é¢˜ï¼ˆåªè¦ä¿æŠ¤å¥½ .git ç›®å½•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰ Subversion åœ¨æœ¬åœ°æ–‡ä»¶æœç´¢æ—¶å‡ºç°æœç´¢ç»“æœæ··ä¹±çš„é—®é¢˜ï¼Œç”šè‡³ Git è¿˜æä¾›äº†ä¸€æ¡ `git grep` å‘½ä»¤æ¥æ›´å¥½åœ°æœç´¢å·¥ä½œåŒºçš„æ–‡ä»¶å†…å®¹ã€‚\n\n```\n$ git grep \"å·¥ä½œåŒºæ–‡ä»¶å†…å®¹æœç´¢\"\n```\n\n### å½“å·¥ä½œåŒºä¸­åŒ…å«äº†å­ç›®å½•ï¼Œåœ¨å­ç›®å½•ä¸­æ‰§è¡Œ Git å‘½ä»¤æ—¶ï¼Œå¦‚ä½•å®šä½ç‰ˆæœ¬åº“å‘¢ï¼Ÿ\n\nå½“åœ¨ Git å·¥ä½œåŒºç›®å½•ä¸‹æ‰§è¡Œæ“ä½œçš„æ—¶å€™ï¼Œä¼šå¯¹ç›®å½•ä¾æ¬¡å‘ä¸Šé€’å½’æŸ¥æ‰¾ `.git` ç›®å½•ï¼Œæ‰¾åˆ°çš„ `.git` ç›®å½•å°±æ˜¯å·¥ä½œåŒºå¯¹åº”çš„ç‰ˆæœ¬åº“ï¼Œ`.git` æ‰€åœ¨çš„ç›®å½•å°±æ˜¯å·¥ä½œåŒºçš„æ ¹ç›®å½•ï¼Œæ–‡ä»¶ `.git/index` è®°å½•äº†å·¥ä½œåŒºæ–‡ä»¶çš„çŠ¶æ€ï¼ˆå®é™…ä¸Šæ˜¯ **æš‚å­˜åŒº** çš„çŠ¶æ€ï¼‰ã€‚\n\nå¦‚æœè·Ÿè¸ªä¸€ä¸‹æ‰§è¡Œ `git status` å‘½ä»¤æ—¶çš„ç£ç›˜è®¿é—®ï¼Œä¼šçœ‹åˆ°æ²¿ç›®å½•ä¾æ¬¡å‘ä¸Šé€’å½’çš„è¿‡ç¨‹ã€‚\n\n```\n$ strace -e 'trace=file' git status\n```\n\n### é‚£ä¹ˆæœ‰ä»€ä¹ˆåŠæ³•çŸ¥é“ Git ç‰ˆæœ¬åº“çš„ä½ç½®ï¼Œä»¥åŠå·¥ä½œåŒºçš„æ ¹ç›®å½•åœ¨å“ªé‡Œå‘¢ï¼Ÿ\n\næ˜¾ç¤ºç‰ˆæœ¬åº“ `.git` ç›®å½•æ‰€åœ¨çš„ä½ç½®ã€‚\n\n```bash\n$ git rev-parse --git-dir\n/path/to/my/workspace/demo/.git\n```\n\næ˜¾ç¤ºå·¥ä½œåŒºæ ¹ç›®å½•ã€‚\n\n```bash\n$ git rev-parse --show-toplevel\n/path/to/my/workspace/demo\n```\n\n### æŠŠç‰ˆæœ¬åº“ `.git` ç›®å½•æ”¾åœ¨å·¥ä½œåŒºï¼Œæ˜¯ä¸æ˜¯å¤ªä¸å®‰å…¨äº†ï¼Ÿ\n\nGit å…‹éš†å¯ä»¥é™ä½å› ä¸ºç‰ˆæœ¬åº“å’Œå·¥ä½œåŒºæ··æ‚åœ¨ä¸€èµ·å¯¼è‡´çš„ç‰ˆæœ¬åº“è¢«ç ´åçš„é£é™©ã€‚åœ¨æœ¬æœºå¦å¤–çš„ç£ç›˜/ç›®å½•ä¸­å»ºç«‹ Git å…‹éš†ï¼Œå¹¶åœ¨å·¥ä½œåŒºæœ‰æ”¹åŠ¨æäº¤æ—¶ï¼Œæ‰‹åŠ¨æˆ–è‡ªåŠ¨åœ°æ‰§è¡Œå‘å…‹éš†ç‰ˆæœ¬åº“çš„æ¨é€ `git push` æ“ä½œã€‚å¦‚æœä½¿ç”¨ç½‘ç»œåè®®ï¼Œè¿˜å¯ä»¥å®ç°åœ¨å…¶ä»–æœºå™¨ä¸Šå»ºç«‹å…‹éš†ï¼Œè¿™æ ·å°±æ›´å®‰å…¨äº†ï¼ˆåŒæœºå¤‡ä»½ï¼‰ã€‚\n\n### æ€è€ƒï¼š`git config` å‘½ä»¤å‚æ•°çš„åŒºåˆ«ï¼Ÿ\n\nå°†æ‰“å¼€ /path/to/my/workspace/demo/.git/config æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š\n\n```bash\n$ cd /path/to/my/workspace/demo/\n$ git config -e\n```\n\nå°†æ‰“å¼€ /home/jiangxin/.gitconfigï¼ˆç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„ .gitconfig æ–‡ä»¶ï¼‰å…¨å±€é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š\n\n```bash\n$ git config -e --global\n```\n\nå°†æ‰“å¼€ /etc/gitconfig ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼š\n\n```bash\n$ git config -e --system\n```\n\nGit çš„ä¸‰ä¸ªé…ç½®æ–‡ä»¶åˆ†åˆ«æ˜¯ `ç‰ˆæœ¬åº“çº§åˆ«çš„é…ç½®æ–‡ä»¶`ã€`å…¨å±€é…ç½®æ–‡ä»¶`ï¼ˆç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼‰å’Œ `ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶`ï¼ˆ/etc ç›®å½•ä¸‹ï¼‰ã€‚\n\nå…¶ä¸­ `ç‰ˆæœ¬åº“çº§åˆ«é…ç½®æ–‡ä»¶` çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œ`å…¨å±€é…ç½®æ–‡ä»¶` å…¶æ¬¡ï¼Œ`ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶` ä¼˜å…ˆçº§æœ€ä½ã€‚\n\nGit é…ç½®æ–‡ä»¶é‡‡ç”¨çš„æ˜¯ INI æ–‡ä»¶æ ¼å¼ã€‚\n\n```ini\n$ cat /path/to/my/workspace/demo/.git/config\n[core]\n        repositoryformatversion = 0\n        filemode = true\n        bare = false\n        logallrefupdates = true\n```\n\nä¾‹å¦‚è¯»å– `[core]` å°èŠ‚çš„ `bare` çš„å±æ€§å€¼\n\n```bash\ngit config <section>.<key>\n\n$ git config core.bare\nfalse\n```\n\næ›´æ”¹æˆ–è®¾ç½® INI æ–‡ä»¶ä¸­æŸä¸ªå±æ€§\n\n```bash\ngit config <section>.<key> <value>\n\n$ git config a.b something\n$ git config x.y.z others\n```\n\næ‰“å¼€ `.git/config` æ–‡ä»¶\n\n```bash\n[a]\n        b = something\n[x \"y\"]\n        z = others\n```\n\nå¯ä»¥ç”¨ `git config` å‘½ä»¤æ“ä½œä»»ä½•å…¶ä»–çš„ INI æ–‡ä»¶\n\n```bash\n$ GIT_CONFIG=test.ini git config a.b.c.d \"hello, world\"\n```\n\n```bash\n$ GIT_CONFIG=test.ini git config a.b.c.d\nhello, world\n```\n\n### æ€è€ƒï¼šæ˜¯è°å®Œæˆçš„æäº¤ï¼Ÿ\n\nå½“æœ€æ–°çš„æäº¤åˆ é™¤äº† `user.name` å’Œ `user.email`ï¼Œæäº¤æ—¶ Git å¯¹æäº¤è€…çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€åšäº†å¤§èƒ†çš„çŒœæµ‹ï¼Œè¿™ä¸ªçŒœæµ‹å¯èƒ½æ˜¯é”™çš„ã€‚\n\né‡æ–°è®¾ç½® `user.name` å’Œ `user.email`ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œé‡æ–°ä¿®æ”¹æœ€æ–°çš„æäº¤ï¼Œæ”¹æ­£ä½œè€…å’Œæäº¤è€…çš„é”™è¯¯ä¿¡æ¯ã€‚\n\n```bash\n$ git commit --amend --allow-empty --reset-author\n```\n\n- å‚æ•° `--amend` æ˜¯å¯¹åˆšåˆšçš„æäº¤è¿›è¡Œä¿®è¡¥ï¼Œè¿™æ ·å°±å¯ä»¥æ”¹æ­£å‰é¢é”™è¯¯çš„æäº¤ï¼ˆç”¨æˆ·ä¿¡æ¯é”™è¯¯ï¼‰ï¼Œè€Œä¸ä¼šäº§ç”Ÿå¦å¤–çš„æ–°æäº¤ã€‚\n- å‚æ•° `--allow-empty` æ˜¯å› ä¸ºè¦è¿›è¡Œä¿®è¡¥çš„æäº¤å®é™…ä¸Šæ˜¯ä¸€ä¸ªç©ºç™½æäº¤ï¼ŒGit é»˜è®¤ä¸å…è®¸ç©ºç™½æäº¤ã€‚\n- å‚æ•° `--reset-author` çš„å«ä¹‰æ˜¯å°† Authorï¼ˆæäº¤è€…ï¼‰çš„ ID é‡ç½®ï¼Œå¦åˆ™åªä¼šå½±å“æœ€æ–°çš„ Commitï¼ˆæäº¤è€…ï¼‰çš„ IDã€‚è¿™æ¡å‘½ä»¤ä¹Ÿä¼šé‡ç½® AuthorDate ä¿¡æ¯ã€‚\n\n### æ€è€ƒï¼šéšæ„è®¾ç½®æäº¤è€…å§“åï¼Œæ˜¯å¦å¤ªä¸å®‰å…¨ï¼Ÿ\n\nGit å¯ä»¥éšæ„è®¾ç½®æäº¤çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€ä¿¡æ¯ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ç‰¹æ€§ä½¿ç„¶ï¼Œæ¯ä¸ªäººéƒ½æ˜¯è‡ªå·±ç‰ˆæœ¬åº“çš„ä¸»äººï¼Œå¾ˆéš¾ä¹Ÿæ²¡æœ‰å¿…è¦è¿›è¡Œèº«ä»½è®¤è¯ä»è€Œä½¿ç”¨ç»è¿‡è®¤è¯çš„ç”¨æˆ·åä½œä¸ºæäº¤çš„ç”¨æˆ·åã€‚\n\nä½†æ˜¯å¯ä»¥ä½¿ç”¨ GitLab ç­‰æœåŠ¡ç®¡ç†æƒé™ã€‚\n\n### æ€è€ƒï¼šå‘½ä»¤åˆ«åæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ\n\nå‘½ä»¤åˆ«åå¯ä»¥å¸®åŠ©ç”¨æˆ·è§£å†³ä»å…¶ä»–ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¿ç§»åˆ° Git åçš„ä½¿ç”¨ä¹ æƒ¯é—®é¢˜ã€‚\n\n### å¤‡ä»½æœ¬ç« çš„å·¥ä½œæˆæœ\n\n```bash\n$ cd /path/to/my/workspace\n$ git clone demo demo-step-1\nCloning into demo-step-1...\ndone.\n```\n\n## Git æš‚å­˜åŒº\n\n```bash\n$ git log --stat\n```\n\nå¯ä»¥ç”¨ `git log` æŸ¥çœ‹æäº¤æ—¥å¿—ï¼Œé™„åŠ çš„ `--stat` å‚æ•°çœ‹åˆ°æ¯æ¬¡æäº¤çš„æ–‡ä»¶å˜æ›´ç»Ÿè®¡ã€‚\n\n### ä¿®æ”¹ä¸èƒ½ç›´æ¥æäº¤ï¼Ÿ\n\nç°åœ¨å°±å°†ä¿®æ”¹çš„æ–‡ä»¶â€œæ·»åŠ â€åˆ°æäº¤æš‚å­˜åŒºï¼š\n\n```bash\n$ git add welcome.txt\n```\n\nè¿™æ—¶å¦‚æœå’Œ HEADï¼ˆå½“å‰ç‰ˆæœ¬åº“çš„å¤´æŒ‡é’ˆï¼‰æˆ–è€… master åˆ†æ”¯ï¼ˆå½“å‰å·¥ä½œåˆ†æ”¯ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œä¼šå‘ç°æœ‰å·®å¼‚ã€‚è¿™ä¸ªå·®å¼‚æ‰æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºå°šæœªçœŸæ­£æäº¤ä¹ˆã€‚\n\n```bash\n$ git diff HEAD\n```\n\nç”¨ç®€æ´æ–¹å¼æ˜¾ç¤ºçŠ¶æ€\n\n```bash\n$ git status -s\nM  welcome.txt\n```\n\né€šè¿‡å‚æ•° `--cached` æˆ–è€… `--staged` å‚æ•°è°ƒç”¨ git diff å‘½ä»¤ï¼Œçœ‹åˆ°çš„æ˜¯æäº¤æš‚å­˜åŒº `stage` å’Œç‰ˆæœ¬åº“ä¸­æ–‡ä»¶çš„å·®å¼‚ã€‚ä¸ç„¶çœ‹åˆ°çš„æ˜¯å·¥ä½œåŒºçš„å˜åŠ¨ã€‚\n\n```bash\n$ git diff --cached\n```\n\nç°åœ¨æ‰§è¡Œ git commit å‘½ä»¤è¿›è¡Œæäº¤ã€‚\n\n```bash\n$ git commit -m \"which version checked in?\"\n```\n\nå¦‚ä½•è¯æ˜æäº¤æˆåŠŸäº†å‘¢ï¼Ÿé€šè¿‡æŸ¥çœ‹æäº¤æ—¥å¿—ï¼Œçœ‹åˆ°äº†æ–°çš„æäº¤ã€‚\n\n```bash\n$ git log --pretty=oneline\n```\n\n### ç†è§£ Git æš‚å­˜åŒº stage\n\nå½“æ‰§è¡Œ `git status` å‘½ä»¤ï¼ˆæˆ–è€… `git diff` å‘½ä»¤ï¼‰æ‰«æå·¥ä½œåŒºæ”¹åŠ¨çš„æ—¶å€™ï¼Œå…ˆä¾æ® `.git/index` æ–‡ä»¶ä¸­è®°å½•çš„ï¼ˆå·¥ä½œåŒºè·Ÿè¸ªæ–‡ä»¶çš„ï¼‰æ—¶é—´æˆ³ã€é•¿åº¦ç­‰ä¿¡æ¯åˆ¤æ–­å·¥ä½œåŒºæ–‡ä»¶æ˜¯å¦æ”¹å˜ã€‚\n\næ–‡ä»¶ `.git/index` å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ…å«æ–‡ä»¶ç´¢å¼•çš„ç›®å½•æ ‘ï¼Œåƒæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„å·¥ä½œåŒºã€‚åœ¨è¿™ä¸ªè™šæ‹Ÿå·¥ä½œåŒºçš„ç›®å½•æ ‘ä¸­ï¼Œè®°å½•äº†æ–‡ä»¶åã€æ–‡ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼ˆæ—¶é—´æˆ³ã€æ–‡ä»¶é•¿åº¦ç­‰ï¼‰ã€‚æ–‡ä»¶çš„å†…å®¹å¹¶ä¸å­˜å‚¨å…¶ä¸­ï¼Œè€Œæ˜¯ä¿å­˜åœ¨ Git å¯¹è±¡åº“ `.git/objects` ç›®å½•ä¸­ï¼Œæ–‡ä»¶ç´¢å¼•å»ºç«‹äº†æ–‡ä»¶å’Œå¯¹è±¡åº“ä¸­å¯¹è±¡å®ä½“ä¹‹é—´çš„å¯¹åº”ã€‚\n\n![got-git-reading-notes-solo-git-stage](https://user-images.githubusercontent.com/9289792/80202431-33a64480-8658-11ea-8771-07b2bf81f657.png)\n\n- å›¾ä¸­å¯ä»¥çœ‹å‡ºæ­¤æ—¶ HEAD å®é™…æ˜¯æŒ‡å‘ master åˆ†æ”¯çš„ä¸€ä¸ªâ€œæ¸¸æ ‡â€ã€‚æ‰€ä»¥å›¾ç¤ºçš„å‘½ä»¤ä¸­å‡ºç° HEAD çš„åœ°æ–¹å¯ä»¥ç”¨ master æ¥æ›¿æ¢ã€‚\n- å›¾ä¸­çš„ objects æ ‡è¯†çš„åŒºåŸŸä¸º Git çš„å¯¹è±¡åº“ï¼Œå®é™…ä½äº `.git/objects` ç›®å½•ä¸‹ï¼Œä¼šåœ¨åé¢çš„ç« èŠ‚é‡ç‚¹ä»‹ç»ã€‚\n- å½“æ‰§è¡Œ `git reset HEAD` å‘½ä»¤æ—¶ï¼Œæš‚å­˜åŒºçš„ç›®å½•æ ‘ä¼šè¢«é‡å†™ï¼Œè¢« master åˆ†æ”¯æŒ‡å‘çš„ç›®å½•æ ‘æ‰€æ›¿æ¢ï¼Œä½†æ˜¯å·¥ä½œåŒºä¸å—å½±å“ã€‚\n- å½“æ‰§è¡Œ `git rm --cached <file>` å‘½ä»¤æ—¶ï¼Œä¼šç›´æ¥ä»æš‚å­˜åŒºåˆ é™¤æ–‡ä»¶ï¼Œå·¥ä½œåŒºåˆ™ä¸åšå‡ºæ”¹å˜ã€‚\n- å½“æ‰§è¡Œ `git checkout .` æˆ–è€… `git checkout -- <file>` å‘½ä»¤æ—¶ï¼Œä¼šç”¨æš‚å­˜åŒºå…¨éƒ¨æˆ–æŒ‡å®šçš„æ–‡ä»¶æ›¿æ¢å·¥ä½œåŒºçš„æ–‡ä»¶ã€‚è¿™ä¸ªæ“ä½œå¾ˆå±é™©ï¼Œä¼šæ¸…é™¤å·¥ä½œåŒºä¸­æœªæ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ã€‚\n- å½“æ‰§è¡Œ `git checkout HEAD .` æˆ–è€… `git checkout HEAD <file>` å‘½ä»¤æ—¶ï¼Œä¼šç”¨ HEAD æŒ‡å‘çš„ master åˆ†æ”¯ä¸­çš„å…¨éƒ¨æˆ–è€…éƒ¨åˆ†æ–‡ä»¶æ›¿æ¢æš‚å­˜åŒºå’Œä»¥åŠå·¥ä½œåŒºä¸­çš„æ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤ä¹Ÿæ˜¯æå…·å±é™©æ€§çš„ï¼Œå› ä¸ºä¸ä½†ä¼šæ¸…é™¤å·¥ä½œåŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ï¼Œä¹Ÿä¼šæ¸…é™¤æš‚å­˜åŒºä¸­æœªæäº¤çš„æ”¹åŠ¨ã€‚\n\n### Git diff é­”æ³•\n\næœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤ŸåƒæŸ¥çœ‹å·¥ä½œåŒºä¸€æ ·çš„ï¼Œç›´è§‚çš„æŸ¥çœ‹æš‚å­˜åŒºä»¥åŠ HEAD å½“ä¸­çš„ç›®å½•æ ‘ä¹ˆï¼Ÿ\n\n```bash\n$ git ls-tree -l HEAD\n100644 blob fd3c069c1de4f4bc9b15940f490aeb48852f3c42      25    welcome.txt\n```\n\nè¦æ˜¾ç¤ºæš‚å­˜åŒºçš„ç›®å½•æ ‘ï¼Œå¯ä»¥ä½¿ç”¨ `git ls-files` å‘½ä»¤ã€‚\n\n```bash\n$ git ls-files -s\n100644 18832d35117ef2f013c4009f5b2128dfaeff354f 0       a/b/c/hello.txt\n```\n\n![got-git-reading-notes-solo-git-diff](https://user-images.githubusercontent.com/9289792/80202327-06599680-8658-11ea-8329-93b424bc3726.png)\n\n### ä¸è¦ä½¿ç”¨ git commit -a\n\næäº¤å‘½ä»¤ `git commit` å¯ä»¥å¸¦ä¸Š `-a` å‚æ•°ï¼Œå¯¹æœ¬åœ°æ‰€æœ‰å˜æ›´çš„æ–‡ä»¶æ‰§è¡Œæäº¤æ“ä½œï¼ŒåŒ…æ‹¬æœ¬åœ°ä¿®æ”¹çš„æ–‡ä»¶ï¼Œåˆ é™¤çš„æ–‡ä»¶ï¼Œä½†ä¸åŒ…æ‹¬æœªè¢«ç‰ˆæœ¬åº“è·Ÿè¸ªçš„æ–‡ä»¶ã€‚\n\nè¿™ä¸ªâ€œå·æ‡’â€çš„æäº¤å‘½ä»¤ï¼Œå°±ä¼šä¸¢æ‰ Git æš‚å­˜åŒºå¸¦ç»™ç”¨æˆ·æœ€å¤§çš„å¥½å¤„ï¼šå¯¹æäº¤å†…å®¹è¿›è¡Œæ§åˆ¶çš„èƒ½åŠ›ã€‚\n\n## Git å¯¹è±¡\n\nä»€ä¹ˆæ˜¯ `HEAD`ï¼Ÿä»€ä¹ˆæ˜¯ `master`ï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬äºŒè€…å¯ä»¥ç›¸äº’æ›¿æ¢ä½¿ç”¨ï¼Ÿä¸ºä»€ä¹ˆ Git ä¸­çš„å¾ˆå¤šå¯¹è±¡åƒæäº¤ã€æ ‘ã€æ–‡ä»¶å†…å®¹ç­‰éƒ½ç”¨ 40 ä½çš„ `SHA1` å“ˆå¸Œå€¼æ¥è¡¨ç¤ºï¼Ÿ\n\n### Git å¯¹è±¡åº“æ¢ç§˜\n\n40 ä½åå…­è¿›åˆ¶æ•°å­—ç»„æˆçš„ `SHA1` å“ˆå¸Œå€¼\n\n```bash\n$ git log -1 --pretty=raw\n# è¿™æ˜¯æœ¬æ¬¡æäº¤çš„å”¯ä¸€æ ‡è¯†ã€‚\ncommit e695606fc5e31b2ff9038a48a3d363f4c21a3d86\n# è¿™æ˜¯æœ¬æ¬¡æäº¤æ‰€å¯¹åº”çš„ç›®å½•æ ‘ã€‚\ntree f58da9a820e3fd9d84ab2ca2f1b467ac265038f9\n# è¿™æ˜¯æœ¬åœ°æäº¤çš„çˆ¶æäº¤ï¼ˆä¸Šä¸€æ¬¡æäº¤ï¼‰ã€‚\nparent a0c641e92b10d8bcca1ed1bf84ca80340fdefee6\n\n    which version checked in?\n```\n\nç ”ç©¶ Git å¯¹è±¡ ID çš„å‘½ä»¤æ˜¯ `git cat-file`ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸‰ä¸ª ID çš„ç±»å‹ã€‚\n\n```bash\n$ git cat-file -t e695606\ncommit\n$ git cat-file -t f58d\ntree\n$ git cat-file -t fd3c06\nblob\n```\n\n<!-- more -->\n\nå†ç”¨ `git cat-file` å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹è¿™å‡ ä¸ªå¯¹è±¡çš„å†…å®¹ã€‚å¯¹äº `blob` å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¿å­˜ç€æ–‡ä»¶ welcome.txt çš„å†…å®¹ã€‚\n\n```bash\n$ git cat-file -p fd3c06\nHello.\nNice to meet you.\n```\n\nè¿™ä¸ªå†™å¯¹è±¡éƒ½å­˜åœ¨ Git åº“ä¸­çš„ `objects` ç›®å½•ä¸‹ï¼ŒID çš„å‰ä¸¤ä½ä½œä¸ºç›®å½•åï¼Œå 38 ä½ä½œä¸ºæ–‡ä»¶åã€‚\n\n```bash\n$ for id in e695606 f58da9a a0c641e fd3c069; do \\\n  ls .git/objects/${id:0:2}/${id:2}*; done\n.git/objects/e6/95606fc5e31b2ff9038a48a3d363f4c21a3d86\n.git/objects/f5/8da9a820e3fd9d84ab2ca2f1b467ac265038f9\n.git/objects/a0/c641e92b10d8bcca1ed1bf84ca80340fdefee6\n.git/objects/fd/3c069c1de4f4bc9b15940f490aeb48852f3c42\n```\n\n![got-git-reading-notes-solo-git-objects](https://user-images.githubusercontent.com/9289792/80202330-08235a00-8658-11ea-9040-b280b00b7e43.png)\n\n### HEAD å’Œ master çš„å¥¥ç§˜\n\n```bash\n$ git log -1 HEAD\n$ git log -1 master\n$ git log -1 refs/heads/master\n```\n\nåœ¨å½“å‰ç‰ˆæœ¬åº“ä¸­ï¼Œ`HEAD`ã€`master` å’Œ `refs/heads/master` å…·æœ‰ç›¸åŒçš„æŒ‡å‘ã€‚ç°åœ¨åˆ°ç‰ˆæœ¬åº“ `.git` ä¸­ä¸€æ¢å®ƒä»¬çš„ç©¶ç«Ÿï¼š\n\n```bash\n$ find .git -name HEAD -o -name master\n.git/HEAD\n.git/logs/HEAD\n.git/logs/refs/heads/master\n.git/refs/heads/master\n```\n\næ˜¾ç¤ºä¸€ä¸‹ `.git/HEAD`\n\n```bash\n$ cat .git/HEAD\nref: refs/heads/master\n```\n\næŒ‡å‘ä¸€ä¸ªå¼•ç”¨ï¼š`refs/heads/master`\n\n```bash\n$ cat .git/refs/heads/master\ne695606fc5e31b2ff9038a48a3d363f4c21a3d86\n```\n\næ˜¾ç¤ºè¯¥æäº¤çš„å†…å®¹\n\n```bash\n$ git cat-file -p e695606fc5e31b2ff9038a48a3d363f4c21a3d86\ntree f58da9a820e3fd9d84ab2ca2f1b467ac265038f9\nparent a0c641e92b10d8bcca1ed1bf84ca80340fdefee6\n\nwhich version checked in?\n```\n\nåŸæ¥åˆ†æ”¯ `master` æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæäº¤ IDï¼ˆæœ€æ–°æäº¤ï¼‰ã€‚\n\nè¿™æ ·çš„åˆ†æ”¯å®ç°æ˜¯å¤šä¹ˆçš„å·§å¦™å•Šï¼šæ—¢ç„¶å¯ä»¥ä»ä»»ä½•æäº¤å¼€å§‹å»ºç«‹ä¸€æ¡å†å²è·Ÿè¸ªé“¾ï¼Œé‚£ä¹ˆç”¨ä¸€ä¸ªæ–‡ä»¶æŒ‡å‘è¿™ä¸ªé“¾æ¡çš„æœ€æ–°æäº¤ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥ç”¨äºè¿½è¸ªæ•´ä¸ªæäº¤å†å²äº†ã€‚\n\nè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ `.git/refs/heads/master` æ–‡ä»¶ã€‚\n\n![got-git-reading-notes-solo-git-repos-detail](https://user-images.githubusercontent.com/9289792/80202610-78ca7680-8658-11ea-9b85-651555b8f005.png)\n\nç›®å½• `.git/refs` æ˜¯ä¿å­˜å¼•ç”¨çš„å‘½åç©ºé—´ï¼Œå…¶ä¸­ `.git/refs/heads` ç›®å½•ä¸‹çš„å¼•ç”¨åˆç§°ä¸ºåˆ†æ”¯ã€‚å¯¹äºåˆ†æ”¯æ—¢å¯ä»¥ä½¿ç”¨æ­£è§„çš„é•¿æ ¼å¼çš„è¡¨ç¤ºæ³•ï¼Œå¦‚ `refs/heads/master`ï¼Œä¹Ÿå¯ä»¥å»æ‰å‰é¢çš„ä¸¤çº§ç›®å½•ç”¨ `master` æ¥è¡¨ç¤ºã€‚Git æœ‰ä¸€ä¸ªåº•å±‚å‘½ä»¤ `git rev-parse` å¯ä»¥ç”¨äºæ˜¾ç¤ºå¼•ç”¨å¯¹åº”çš„æäº¤ IDã€‚\n\n### é—®é¢˜ï¼šSHA1 å“ˆå¸Œå€¼åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç”Ÿæˆçš„ï¼Ÿ\n\nå“ˆå¸Œ(hash)æ˜¯ä¸€ç§æ•°æ®æ‘˜è¦ç®—æ³•ï¼ˆæˆ–ç§°æ•£åˆ—ç®—æ³•ï¼‰ï¼Œæ˜¯ä¿¡æ¯å®‰å…¨é¢†åŸŸå½“ä¸­é‡è¦çš„ç†è®ºåŸºçŸ³ã€‚è¯¥ç®—æ³•å°†ä»»æ„é•¿åº¦çš„è¾“å…¥ç»è¿‡æ•£åˆ—è¿ç®—è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„è¾“å‡ºã€‚å›ºå®šé•¿åº¦çš„è¾“å‡ºå¯ä»¥ç§°ä¸ºå¯¹åº”çš„è¾“å…¥çš„æ•°å­—æ‘˜è¦æˆ–å“ˆå¸Œå€¼ã€‚\n\n```bash\n$ echo -n Git |sha1sum\n5819778898df55e3a762f0c5728b457970d72cae  -\n```\n\næäº¤çš„ SHA1 å“ˆå¸Œå€¼ç”Ÿæˆæ–¹æ³•ï¼š\n\n```bash\n$ git cat-file commit HEAD | wc -c\n234\n\n# åœ¨æäº¤ä¿¡æ¯çš„å‰é¢åŠ ä¸Šå†…å®¹ `commit 234<null>`ï¼ˆ`<null>`ä¸ºç©ºå­—ç¬¦ï¼‰ï¼Œç„¶åæ‰§è¡Œ SHA1 å“ˆå¸Œç®—æ³•ã€‚\n$ ( printf \"commit 234\\000\"; git cat-file commit HEAD ) | sha1sum\ne695606fc5e31b2ff9038a48a3d363f4c21a3d86  -\n\n# ä¸Šé¢å‘½ä»¤å¾—åˆ°çš„å“ˆå¸Œå€¼å’Œç”¨ `git rev-parse` çœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ã€‚\n$ git rev-parse HEAD\ne695606fc5e31b2ff9038a48a3d363f4c21a3d86\n```\n\næ–‡ä»¶å†…å®¹çš„ SHA1 å“ˆå¸Œå€¼ç”Ÿæˆæ–¹æ³•ï¼š\n\n```bash\n# æ–‡ä»¶æ€»å…±åŒ…å« 25 å­—èŠ‚çš„å†…å®¹ã€‚\n$ git cat-file blob HEAD:welcome.txt | wc -c\n25\n\n# åœ¨æ–‡ä»¶å†…å®¹çš„å‰é¢åŠ ä¸Šblob 25<null>çš„å†…å®¹ï¼Œç„¶åæ‰§è¡ŒSHA1å“ˆå¸Œç®—æ³•ã€‚\n$ ( printf \"blob 25\\000\"; git cat-file blob HEAD:welcome.txt ) | sha1sum\nfd3c069c1de4f4bc9b15940f490aeb48852f3c42  -\n\n# ä¸Šé¢å‘½ä»¤å¾—åˆ°çš„å“ˆå¸Œå€¼å’Œç”¨git rev-parseçœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ã€‚\n$ git rev-parse HEAD:welcome.txt\nfd3c069c1de4f4bc9b15940f490aeb48852f3c42\n```\n\næ ‘çš„ SHA1 å“ˆå¸Œå€¼çš„å½¢æˆæ–¹æ³•ï¼š\n\n```bash\n# HEADå¯¹åº”çš„æ ‘çš„å†…å®¹å…±åŒ…å«39ä¸ªå­—èŠ‚ã€‚\n$ git cat-file tree HEAD^{tree} | wc -c\n39\n\n# åœ¨æ ‘çš„å†…å®¹çš„å‰é¢åŠ ä¸Štree 39<null>çš„å†…å®¹ï¼Œç„¶åæ‰§è¡ŒSHA1å“ˆå¸Œç®—æ³•ã€‚\n$ ( printf \"tree 39\\000\"; git cat-file tree HEAD^{tree} ) | sha1sum\nf58da9a820e3fd9d84ab2ca2f1b467ac265038f9  -\n\n# ä¸Šé¢å‘½ä»¤å¾—åˆ°çš„å“ˆå¸Œå€¼å’Œç”¨git rev-parseçœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ã€‚\n$ git rev-parse HEAD^{tree}\nf58da9a820e3fd9d84ab2ca2f1b467ac265038f9\n```\n\n### é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¸ç”¨é¡ºåºçš„æ•°å­—æ¥è¡¨ç¤ºæäº¤ï¼Ÿ\n\né›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå› ä¸ºåªæœ‰ä¸€ä¸ªé›†ä¸­å¼çš„ç‰ˆæœ¬åº“ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ä¾æ¬¡é€’å¢çš„å…¨å±€å”¯ä¸€çš„æäº¤å·ã€‚Git ä½œä¸ºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¼€å‘å¯ä»¥æ˜¯éçº¿æ€§çš„ã€‚è¿™å°±è¦æ±‚æäº¤çš„ç¼–å·ä¸èƒ½ä»…ä»…æ˜¯æœ¬åœ°å±€éƒ¨æœ‰æ•ˆï¼Œè€Œæ˜¯è¦â€œå…¨çƒå”¯ä¸€â€ã€‚\n\né‡‡ç”¨éƒ¨åˆ†çš„ SHA1 å“ˆå¸Œå€¼ã€‚ä¸å¿…å†™å…¨ 40 ä½çš„å“ˆå¸Œå€¼ï¼Œåªé‡‡ç”¨å¼€å¤´çš„éƒ¨åˆ†ï¼Œä¸å’Œç°æœ‰å…¶ä»–çš„å†²çªå³å¯ã€‚\n\nä½¿ç”¨ `master` ä»£è¡¨åˆ†æ”¯ `master` ä¸­æœ€æ–°çš„æäº¤ï¼Œä½¿ç”¨å…¨ç§° `refs/heads/master` äº¦å¯ã€‚\n\nä½¿ç”¨ `HEAD` ä»£è¡¨ç‰ˆæœ¬åº“ä¸­æœ€è¿‘çš„ä¸€æ¬¡æäº¤ã€‚\n\nç¬¦å· `^` å¯ä»¥ç”¨äºæŒ‡ä»£çˆ¶æäº¤ã€‚ä¾‹å¦‚ï¼š\n\n- `HEAD^` ä»£è¡¨ç‰ˆæœ¬åº“ä¸­ä¸Šä¸€æ¬¡æäº¤ï¼Œå³æœ€è¿‘ä¸€æ¬¡æäº¤çš„çˆ¶æäº¤ã€‚\n- `HEAD^^` åˆ™ä»£è¡¨ `HEAD^` çš„çˆ¶æäº¤ã€‚\n\nå¯¹äºä¸€ä¸ªæäº¤æœ‰å¤šä¸ªçˆ¶æäº¤ï¼Œå¯ä»¥åœ¨ç¬¦å· `^` åé¢ç”¨æ•°å­—è¡¨ç¤ºæ˜¯ç¬¬å‡ ä¸ªçˆ¶æäº¤ã€‚ä¾‹å¦‚ï¼š\n\n- `a573106^2` å«ä¹‰æ˜¯æäº¤ `a573106` çš„å¤šä¸ªçˆ¶æäº¤ä¸­çš„ç¬¬äºŒä¸ªçˆ¶æäº¤ã€‚\n- `HEAD^1` ç›¸å½“äº `HEAD^` å«ä¹‰æ˜¯ HEAD å¤šä¸ªçˆ¶æäº¤ä¸­çš„ç¬¬ä¸€ä¸ªã€‚\n- `HEAD^^2` å«ä¹‰æ˜¯ `HEAD^`ï¼ˆHEAD çˆ¶æäº¤ï¼‰çš„å¤šä¸ªçˆ¶æäº¤ä¸­çš„ç¬¬äºŒä¸ªã€‚\n\nç¬¦å· `~<n>` ä¹Ÿå¯ä»¥ç”¨äºæŒ‡ä»£ç¥–å…ˆæäº¤ã€‚æ•ˆæœç­‰åŒï¼š\n\n```bash\na573106~5\na573106^^^^^\n```\n\næäº¤æ‰€å¯¹åº”çš„æ ‘å¯¹è±¡ï¼š`a573106^{tree}`\n\næŸä¸€æ­¤æäº¤å¯¹åº”çš„æ–‡ä»¶å¯¹è±¡ï¼š`a573106:path/to/file`\n\næš‚å­˜åŒºä¸­çš„æ–‡ä»¶å¯¹è±¡ï¼š`:path/to/file`\n\n```\n$ git rev-parse HEAD\n$ git cat-file -p e695\n$ git cat-file -p e695^\n$ git rev-parse e695^{tree}\n```\n\n> Reference:\n>\n> - [2. Git ç‹¬å¥ &mdash; GotGit](http://www.worldhello.net/gotgit/02-git-solo/index.html)\n","tags":["git"]},{"title":"ã€Git æƒå¨æŒ‡å—ã€‘è¯»ä¹¦ç¬”è®° - åˆè¯† Git","url":"/2017/07/12/got-git-reading-notes-meet-git/","content":"\nGit æ˜¯ä¸€æ¬¾åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæœ‰åˆ«äº CVS å’Œ SVN ç­‰é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ŒGit å¯ä»¥è®©ç ”å‘å›¢é˜Ÿæ›´åŠ é«˜æ•ˆåœ°ååŒå·¥ä½œã€æé«˜ç”Ÿäº§ç‡ã€‚ä½¿ç”¨ Gitï¼Œå¼€å‘äººå‘˜çš„å·¥ä½œä¸ä¼šå› ä¸ºé¢‘ç¹åœ°é­é‡æäº¤å†²çªè€Œä¸­æ–­ï¼Œç®¡ç†äººå‘˜ä¹Ÿæ— é¡»ä¸ºæ•°æ®çš„å¤‡ä»½è€Œæ‹…å¿ƒã€‚ç»è¿‡ Linux è¿™æ ·åºå¤§çš„é¡¹ç›®çš„è€ƒéªŒä¹‹åï¼ŒGit è¢«è¯æ˜å¯ä»¥èƒœä»»ä»»ä½•è§„æ¨¡çš„å›¢é˜Ÿï¼Œå³ä¾¿è¿™ä¸ªå›¢é˜Ÿçš„æˆå‘˜åˆ†å¸ƒäºä¸–ç•Œå„åœ°ã€‚\n\nGit æ˜¯å¼€æºç¤¾åŒºå¥‰çŒ®ç»™æ¯ä¸€ä¸ªäººçš„å®è´ï¼Œç”¨å¥½å®ƒå¯ä»¥å®ç°ä¸ªäººçš„çŸ¥è¯†ç§¯ç´¯ã€ä¿æŠ¤å¥½è‡ªå·±çš„æ•°æ®ï¼Œè€Œä¸”è¿˜èƒ½ä¸ä»–äººåˆ†äº«è‡ªå·±çš„æˆæœã€‚\n\n## ç‰ˆæœ¬æ§åˆ¶çš„å‰ä¸–å’Œä»Šç”Ÿ\n\nå³ä¾¿æ˜¯åœ¨ CVS å‡ºç°ä¹‹å‰çš„â€œå²å‰æ—¶ä»£â€ï¼Œä¹Ÿå·²ç»æœ‰äº†éå¸¸å¥½ç”¨çš„æºç æ¯”è¾ƒå’Œæ‰“è¡¥ä¸çš„å·¥å…·ï¼š`diff` å’Œ `patch`ï¼Œä»–ä»¬ä»Šå¤©ç”Ÿå‘½åŠ›ä¾ç„¶é¡½å¼ºã€‚\n\n<!-- more -->\n\nå¯¹è¿™ `hello` `world` ä¸¤ä¸ªæ–‡ä»¶æ‰§è¡Œ diff å‘½ä»¤ï¼ŒæŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\n$ diff -u hello world | less -N\n```\n\nä¸Šé¢æ‰§è¡Œ `diff` å‘½ä»¤çš„ `-u` å‚æ•°å¾ˆé‡è¦ï¼Œä½¿å¾—å·®å¼‚è¾“å‡ºä¸­å¸¦æœ‰ä¸Šä¸‹æ–‡ã€‚ç®¡é“åé¢å¸¦æœ‰ `-N` å‚æ•°çš„ `less` å‘½ä»¤ï¼ˆæŒ‰å­—æ¯ `q` é€€å‡ºï¼‰ä¼šåœ¨è¾“å‡ºçš„æ¯ä¸€è¡Œå‰é¢æ·»åŠ è¡Œå·ï¼Œä¾¿äºå¯¹è¾“å‡ºç»“æœè¿›è¡Œè¯´æ˜ã€‚\n\nå‘½ä»¤ `patch` ç›¸å½“äº `diff` çš„åå‘æ“ä½œ\n\nåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ€å¤§çš„åä¼ ç»Ÿä¹‹å¤„åœ¨äºï¼Œå¯ä»¥ä¸éœ€è¦é›†ä¸­å¼çš„ç‰ˆæœ¬åº“ï¼Œæ¯ä¸ªäººéƒ½å·¥ä½œåœ¨é€šè¿‡å…‹éš†æ“ä½œå»ºç«‹çš„æœ¬åœ°ç‰ˆæœ¬åº“ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªäººéƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ã€‚åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å‡ ä¹æ‰€æœ‰æ“ä½œåŒ…æ‹¬æŸ¥çœ‹æäº¤æ—¥å¿—ã€æäº¤ã€åˆ›å»ºé‡Œç¨‹ç¢‘å’Œåˆ†æ”¯ã€åˆå¹¶åˆ†æ”¯ã€å›é€€ç­‰éƒ½ç›´æ¥åœ¨æœ¬åœ°å®Œæˆè€Œä¸éœ€è¦ç½‘ç»œè¿æ¥ã€‚æ¯ä¸ªäººéƒ½æ˜¯æœ¬åœ°ç‰ˆæœ¬åº“çš„ä¸»äººï¼Œä¸å†æœ‰è°èƒ½æäº¤è°ä¸èƒ½æäº¤çš„é™åˆ¶ï¼ŒåŠ ä¹‹å¤šæ ·çš„ååŒå·¥ä½œæ¨¡å‹ï¼ˆç‰ˆæœ¬åº“é—´æ¨é€ã€æ‹‰å›ï¼ŒåŠè¡¥ä¸æ–‡ä»¶ä¼ é€ç­‰ï¼‰è®©å¼€æºé¡¹ç›®çš„å‚ä¸åº¦æœ‰çˆ†å‘å¼å¢é•¿ã€‚\n\n## çˆ±ä¸Š Git çš„ç†ç”±\n\n- æ¯æ—¥çš„å·¥ä½œå¤‡ä»½ã€‚é¸¡è›‹ä¸å…¨æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œã€‚\n- å¼‚åœ°ååŒå·¥ä½œã€‚é€šè¿‡ä¸€ä¸ªè¿œç¨‹ç‰ˆæœ¬åº“ï¼ŒåŒæ­¥æ•°æ®ã€‚\n- ç°åœºç‰ˆæœ¬æ§åˆ¶ã€‚åœ¨éƒ¨ç½²çš„ç°åœºï¼Œè¿›è¡Œæºä»£ç çš„ä¿®æ”¹ï¼Œèƒ½å¤Ÿå°†ä¿®æ”¹ç»“æœç”šè‡³ä¿®æ”¹è¿‡ç¨‹ä¸€å¹¶å¸¦èµ°ï¼Œå¹¶èƒ½å¤Ÿå°†ä¿®æ”¹ç»“æœåˆå¹¶è‡³é¡¹ç›®å¯¹åº”çš„ä»£ç åº“ä¸­ã€‚\n- é¿å…å¼•å…¥è¾…åŠ©ç›®å½•ã€‚åªåœ¨å·¥ä½œåŒºçš„é¡¶çº§ç›®å½•ä¸‹åˆ›å»ºåä¸º `.git` çš„ç›®å½•ï¼ˆç‰ˆæœ¬åº“ç›®å½•ï¼‰ï¼Œå¦‚æœè®¤ä¸ºå”¯ä¸€çš„ä¸€ä¸ª `.git` ç›®å½•ä¹Ÿè¿‡äºç¢çœ¼ï¼Œå¯ä»¥å°†å…¶æ”¾åˆ°å·¥ä½œåŒºä¹‹å¤–çš„ä»»æ„ç›®å½•ã€‚ä¸€æ—¦è¿™ä¹ˆåšäº†ï¼Œä½ åœ¨æ‰§è¡Œ Git å‘½ä»¤æ—¶ï¼Œè¦é€šè¿‡å‘½ä»¤è¡Œ `--git-dir` æˆ–ç¯å¢ƒå˜é‡ `GIT_DIR` ä¸ºå·¥ä½œåŒºæŒ‡å®šç‰ˆæœ¬åº“ç›®å½•ï¼Œç”šè‡³è¿˜è¦æŒ‡å®šå·¥ä½œåŒºç›®å½•ã€‚\n- é‡å†™æäº¤è¯´æ˜ã€‚è¿™ä¸ªå‘½ä»¤å¦‚æœä¸å¸¦ `-m` å‚æ•°ï¼Œä¼šè¿›å…¥æäº¤è¯´æ˜ç¼–è¾‘ç•Œé¢ã€‚\n\n```bash\n$ git commit --amend\n```\n\n- æƒ³åƒåæ‚”è¯ã€‚å‡å¦‚æäº¤çš„æ•°æ®ä¸­ä¸å°å¿ƒåŒ…å«äº†ä¸€ä¸ªä¸åº”è¯¥æ£€å…¥çš„è™šæ‹Ÿæœºæ–‡ä»¶â€”â€”å¤§çº¦æœ‰ 1 ä¸ª GBã€‚\n\n```bash\n$ git rm --cached winxp.img\n$ git commit --amend\n```\n\n- æ›´å¥½ç”¨çš„æäº¤åˆ—è¡¨ã€‚æ­£ç¡®çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä½¿ç”¨æ–¹æ³•æ˜¯ï¼šä¸€æ¬¡æäº¤åªå¹²ä¸€ä»¶äº‹ã€‚è€Œä¸è¦åœ¨ä¸‹ç­æ—¶æ‰æƒ³èµ·æ¥è¦æäº¤ï¼Œé‚£æ ·çš„è¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå°±è¢«é™æ ¼ä¸ºæ–‡ä»¶å¤‡ä»½ç³»ç»Ÿäº†ã€‚\n- æ›´å¥½çš„å·®å¼‚æ¯”è¾ƒã€‚`git diff`\n- å·¥ä½œè¿›åº¦ä¿å­˜ã€‚\n\n```bash\n$ git stash\n$ git checkout <new_branch>\n# do something\n$ git checkout <orignal_branch>\n$ git stash pop\n```\n\n- ä»£ç† SVN æäº¤å®ç°ç§»åŠ¨å¼åŠå…¬ã€‚\n- æ— å¤„ä¸åœ¨çš„åˆ†é¡µå™¨ã€‚`-p`\n- å¿«ã€‚Git ä½œä¸ºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå‡ ä¹æ‰€æœ‰çš„æ“ä½œéƒ½åœ¨æœ¬åœ°è¿›è¡Œã€‚\n\n## å®‰è£… Git\n\n```bash\n$ sudo aptitude install git\n$ sudo aptitude install git-doc git-svn git-email gitk\n```\n\nè½¯ä»¶åŒ… git-svnã€git-emailã€gitk æœ¬æ¥ä¹Ÿæ˜¯ Git è½¯ä»¶åŒ…çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯å› ä¸ºæœ‰ç€ä¸ä¸€æ ·çš„è½¯ä»¶åŒ…ä¾èµ–ï¼ˆå¦‚æ›´å¤š perl æ¨¡ç»„ï¼Œtk ç­‰ï¼‰ï¼Œæ‰€ä»¥å•ç‹¬ä½œä¸ºè½¯ä»¶åŒ…å‘å¸ƒã€‚\n\nè½¯ä»¶åŒ… git-doc åˆ™åŒ…å«äº† Git çš„ HTML æ ¼å¼æ–‡æ¡£ï¼Œå¯ä»¥é€‰æ‹©å®‰è£…ã€‚å¦‚æœå®‰è£…äº† Git çš„ HTML æ ¼å¼çš„æ–‡æ¡£ï¼Œåˆ™å¯ä»¥é€šè¿‡æ‰§è¡Œ `git help -w <sub-command>` å‘½ä»¤ï¼Œè‡ªåŠ¨ç”¨ Web æµè§ˆå™¨æ‰“å¼€ç›¸å…³å­å‘½ä»¤ `<sub-command>` çš„ HTML å¸®åŠ©ã€‚\n\n## ä¸­æ–‡æ”¯æŒ\n\n```bash\n$ git config --global core.quotepath false\n```\n\n> Reference:\n>\n> - [1. åˆè¯† Git &mdash; GotGit](http://www.worldhello.net/gotgit/01-meet-git/index.html)\n","tags":["git"]},{"title":"Linux | Mac å®‰è£… Node.js ä¸å¸¸è§é—®é¢˜","url":"/2017/07/06/install-node-js-in-ubuntu-and-faq/","content":"\n## Node.js å®‰è£…\n\næ¨èä½¿ç”¨ nvm å®‰è£…ç®¡ç† node.js\n\n> the nvm method is definitely much more flexible.\n\n[creationix/nvm: Node Version Manager - Simple bash script to manage multiple active node.js versions](https://github.com/creationix/nvm#installation)\n\nTo install or update nvm.\n\n```bash\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash\n```\n\n<!-- more -->\n\n```bash\n# Uses automatic LTS (long-term support) alias `lts/*`, if available.\nnvm ls-remote --lts\n\n# å®‰è£…æœ€æ–° lts\nnvm install --lts\n# v10 lts\nnvm install --lts=Dubnium\n\n# å®‰è£…æŒ‡å®šç‰ˆæœ¬\nnvm install v6.11.0\n\n# Usually, nvm will switch to use the most recently installed version\nnvm use v6.11.0\n\n# You can see the version currently being used\nnode -v\n\n# å…¶ä»–å‘½ä»¤å¯ä»¥æŸ¥çœ‹å¸®åŠ©\nnvm help\n```\n\n## nrm æºç®¡ç†\n\nnrm can help you easy and fast switch between different npm registries.\n\n```bash\nnpm install -g nrm\n\nnrm ls\nnrm use taobao\n```\n\n## node-sass sh: node: command not found\n\n> [config unsafe-perm | npmjs](https://docs.npmjs.com/misc/config#unsafe-perm)\n\nè§£å†³åŠæ³•ï¼š\n\n```bash\nnpm install --unsafe-perm node-sass\n```\n\n`npm` å‡ºäºå®‰å…¨è€ƒè™‘ä¸æ”¯æŒä»¥ `root` ç”¨æˆ·è¿è¡Œï¼Œå³ä½¿ä½ ç”¨ `root` ç”¨æˆ·èº«ä»½è¿è¡Œäº†ï¼Œnpm ä¼šè‡ªåŠ¨è½¬æˆä¸€ä¸ªå« `nobody` çš„ç”¨æˆ·æ¥è¿è¡Œï¼Œè€Œè¿™ä¸ªç”¨æˆ·å‡ ä¹æ²¡æœ‰ä»»ä½•æƒé™ã€‚è¿™æ ·çš„è¯å¦‚æœä½ è„šæœ¬é‡Œæœ‰ä¸€äº›éœ€è¦æƒé™çš„æ“ä½œï¼Œæ¯”å¦‚å†™æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯å†™ /root/.node-gypï¼‰ï¼Œå°±ä¼šæŠ¥é”™äº†ã€‚\n\nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œè¦ä¹ˆæŒ‰ç…§ npm çš„è§„çŸ©æ¥ï¼Œä¸“é—¨å»ºä¸€ä¸ªç”¨äºè¿è¡Œ npm çš„é«˜æƒé™ç”¨æˆ·ã€‚è¦ä¹ˆåŠ  `--unsafe-perm` å‚æ•°ï¼Œè¿™æ ·å°±ä¸ä¼šåˆ‡æ¢åˆ° `nobody` ä¸Šï¼Œè¿è¡Œæ—¶æ˜¯å“ªä¸ªç”¨æˆ·å°±æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œå³ä½¿æ˜¯ `root`ã€‚\n\nå†æˆ–å°è¯•ï¼š\n\n```bash\nnpm rebuild node-sass\n```\n\n## version \"N/A -> N/A\" is not yet installed\n\nå‡ºç°äº†è¿™ä¸ªæŠ¥é”™æç¤ºï¼š\n\n```bash\nN/A: version \"N/A -> N/A\" is not yet installed.\n\nYou need to run \"nvm install N/A\" to install it before using it\n```\n\nList installed versions\n\n```bash\n$ nvm ls\n->      v6.11.0\n         v8.2.1\ndefault -> 4 (-> N/A)\nnode -> stable (-> v8.2.1) (default)\nstable -> 8.2 (-> v8.2.1) (default)\niojs -> N/A (default)\nlts/* -> lts/boron (-> N/A)\nlts/argon -> v4.8.4 (-> N/A)\nlts/boron -> v6.11.1 (-> N/A)\n```\n\nTry nvm install in that directory to ensure it's installed.\n\n```bash\nnvm install --lts\n\nnvm install iojs\n\nnvm alias default v6.11.1\n```\n\n## References\n\n- [How To Install Node.js on Ubuntu 16.04 | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-16-04)\n- [nvm node is recognised by npm install script. | GitHub](https://github.com/sass/node-sass/issues/2470)\n- [npm çš„ --unsafe-perm å‚æ•°æ˜¯æœ‰ä½•ä½œç”¨å‘¢ï¼Ÿ| segmentfault](https://segmentfault.com/q/1010000019365121)\n\n-- EOF --\n","tags":["node-js"]},{"title":"nodeppt è®©ä½ çˆ±ä¸Šåšåˆ†äº«","url":"/2017/07/06/nodeppt-make-you-fall-in-love-with-to-share/","content":"\n[ksky521/nodeppt: This is probably the best web presentation tool so far!](https://github.com/ksky521/nodeppt)\n\n## å®‰è£…\n\n```bash\nnpm install -g nodeppt\n```\n\n## åˆ›å»º\n\n```bash\nnodeppt create ppt-name\n```\n\n<!-- more -->\n\n## å¯åŠ¨\n\n```bash\n# è·å–å¸®åŠ©\nnodeppt start -h\n# ç»‘å®šç«¯å£\nnodeppt start -p <port>\nnodeppt start -p 8090 -d path/for/ppts\n# ç»‘å®šhostï¼Œé»˜è®¤ç»‘å®š0.0.0.0\nnodeppt start -p 8080 -d path/for/ppts -H 127.0.0.1\n# ä½¿ç”¨socketé€šä¿¡ï¼ˆæŒ‰Qé”®æ˜¾ç¤º/å…³é—­äºŒç»´ç ï¼Œæ‰‹æœºæ‰«æï¼Œå³å¯æ§åˆ¶ï¼‰\n# socketé¡»çŸ¥ï¼š1ã€æ³¨æ„æ‰‹æœºå’Œpcè¦å¯ä»¥ç›¸äº’è®¿é—®ï¼Œ2ã€é˜²ç«å¢™ï¼Œ3ã€ip\n```\n\n## æ¼”ç¤º\n\næœ‰ä¸€ä¸ªå°å‘çš„åœ°æ–¹ï¼Œå¦‚æœä½ æŒ‡å®šç‰¹åˆ«çš„ç«¯å£ï¼Œä½¿ç”¨çš„åˆ™æ˜¯é»˜è®¤çš„ `8080`ï¼Œè¿™æ—¶ï¼š\n\n```bash\nnetstat -antpl | grep 8080\n```\n\nå¯ä»¥çœ‹åˆ°ï¼š\n\n```bash\ntcp        0      0 192.168.8.149:8080      0.0.0.0:*               LISTEN      4801/node\n```\n\nè®¿é—® `192.168.8.149:8080` æ‰å¯ä»¥ï¼Œ`localhost:8080` ä¸å¯ä»¥\n\n-- EOF --\n","tags":["node-js"]},{"title":"ä½¿ç”¨ MailChimp API 3.0 çš„åˆ†é¡µæŸ¥è¯¢","url":"/2017/07/06/work-with-mailchimp-api-3-pagination/","content":"\n## Situation\n\nåœ¨ä½¿ç”¨ GET è°ƒç”¨ MailChimp æ•°æ®æ—¶ï¼Œå‘ç°åªè¿”å›äº† 10 æ¡æ•°æ®ï¼Œè¿™è‚¯å®šæ˜¯ä¸åˆéœ€æ±‚çš„ï¼Œæ‰€ä»¥å¼€å§‹å¯»æ‰¾åˆ†é¡µæŸ¥è¯¢çš„æ–¹æ³•\n\n<!-- more -->\n\n## Solution\n\nå½“è°ƒç”¨ HTTP GET API æ—¶ä¸ºäº†å¾—åˆ°è¶…è¿‡ 10 æ¡ï¼ˆä¾‹å¦‚ï¼š500 æ¡ï¼‰çš„æ•°æ®å¯ä»¥åœ¨ uri æ·»åŠ  `count=500`ï¼š\n\n```bash\nhttps://us10.api.mailchimp.com/3.0/lists?count=500\n```\n\nä¸ºäº†å¾—åˆ°ç¬¬ 11 ä¸ª entry è€Œå¿½ç•¥ä¹‹å‰çš„ 10 é¡¹ï¼Œå¯ä»¥åœ¨ uri æ·»åŠ  `offset=10`ï¼š\n\n```bash\nhttps://us10.api.mailchimp.com/3.0/lists?offset=10\n```\n\n```bash\nvar uri = string.Format(\"https://{0}.api.mailchimp.com/3.0/lists/{1}/members?offset={2}&count={3}\",\n    dataCenter, listId, offset, numberPerBatch);\n```\n\n## References\n\n- [Work with MailChimp API 3.0&#39;s pagination | Yi Zengâ€™s Blog](http://yizeng.me/2016/04/30/work-with-mailchimp-api-3-0s-pagination/)\n\n-- EOF --\n"},{"title":"Linux trash-cli åˆ é™¤æ–‡ä»¶åˆ°å›æ”¶ç«™","url":"/2017/07/06/trash-cli-move-files-to-trash/","content":"\n[andreafrancia/trash-cli: Command line interface to the freedesktop.org trashcan.](https://github.com/andreafrancia/trash-cli)\n\n## Installation\n\n```bash\neasy_install trash-cli\n```\n\n<!-- more -->\n\n## Usage\n\n```bash\ntrash-put           trash files and directories.\ntrash-empty         empty the trashcan(s).\ntrash-list          list trashed files.\ntrash-restore       restore a trashed file.\ntrash-rm            remove individual files from the trashcan.\n```\n\n## FAQ\n\n### Can I alias rm to trash-put\n\nåœ¨ä¸å°‘ç½‘ç«™ä¸Šçœ‹åˆ°ï¼šå»ºè®®å°† `trash-put` å‘½ä»¤é€šè¿‡åˆ«åçš„æ–¹å¼ä»£æ›¿ `rm`\n\n```bash\nalias rm=\"trush-put\"\n```\n\nä½†æ˜¯ä½œè€…è¯´ï¼š\n\n> Although rhe interface of trash-put seems to be compatible with rm, it has different semantics which will cause you problems. For example, while rm requires -R for deleting directories trash-put does not.\n\næ‰€ä»¥å°±ä½¿ç”¨ `trush` æ¥åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ°å›æ”¶ç«™\n\n### But sometimes I forget to use trash-put, really can't I\n\nå¯ä»¥é€šè¿‡å»ºç«‹ `rm` çš„ alias æé†’ä½ ä¸è¦ä½¿ç”¨å®ƒï¼š\n\n```bash\nalias rm='echo \"This is not the command you are looking for.\"; false'\n```\n\nå¦‚æœä½ çœŸçš„æƒ³ä½¿ç”¨ `rm`ï¼Œåªéœ€å…ˆåŠ ä¸€ä¸ªæ–œçº¿æ¥ç»•è¿‡ aliasï¼š\n\n```bash\n\\rm file-without-hope\n```\n\næ³¨æ„ï¼šbash alias ä»…åœ¨äº¤äº’å¼ shell ä¸­ä½¿ç”¨ï¼Œå› æ­¤ä½¿ç”¨ alias ä¸å½±å“è„šæœ¬ä¸­ä½¿ç”¨çš„ rm å‘½ä»¤ã€‚\n\n-- EOF --\n","tags":["linux"]},{"title":"Linux dict ä¸­è‹±æ–‡ç¿»è¯‘ cli","url":"/2017/07/05/chinese-and-english-translation-tools-cli/","content":"\n[FeeiCN/dict: å‘½ä»¤è¡Œä¸‹ä¸­è‹±æ–‡ç¿»è¯‘å·¥å…·ï¼ˆChinese and English translation tools in the command lineï¼‰](https://github.com/FeeiCN/dict)\n\n## Installation\n\n```bash\nsudo pip install dict-cli\n```\n\n<!-- more -->\n\n## Usage\n\n### English To Chinese\n\n```bash\n$ dict I love you\n\n###################################\n#  I love you æˆ‘çˆ±ä½ \n#\n#\n#  æˆ‘çˆ±ä½ ã€‚\n# ...\n###################################\n```\n\n### Chinese To English\n\n```bash\n$ dict æµ‹è¯•\n\n###################################\n#  æµ‹è¯• test\n#  (Pinyin: cÃ¨ shÃ¬)\n#\n#  [è¯•éªŒ] test\n#  measurement\n#\n#  æµ‹è¯• : Test\n#...\n###################################\n```\n\n-- EOF --\n","tags":["linux"]},{"title":"åœ¨ Ubuntu å®‰è£… PHP 5.6","url":"/2017/07/04/install-php-56-on-ubuntu/","content":"\n2020-04-28 æ›´æ–°ï¼šå¾ˆä¹…æ²¡æœ‰ç”¨ Ubuntu & PHP 5.6ï¼Œæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n---\n\nä½¿ç”¨äº†å¾ˆä¹…çš„ PHPï¼Œä½†æ˜¯å¦‚ä½•åœ¨ Ubuntu ä¸‹æ­£ç¡®çš„å®‰è£… PHP æ€»æ˜¯ä¸æ¸…ä¸ç™½ã€‚æœ¬ç¯‡æ–‡ç« å°±æ˜¯æ±‡æ€»ã€ç§¯ç´¯å®‰è£… PHP å’Œå®‰è£…æ—¶é‡åˆ°çš„å¸¸è§é—®é¢˜ã€‚\n\n<!-- more -->\n\n## ç¯å¢ƒ\n\n- Ubuntu 16.04\n\n## å®‰è£… PHP 5.6\n\n```bash\nsudo apt-get install python-software-properties\nsudo add-apt-repository ppa:ondrej/php\nsudo apt-get update\nsudo apt-get install -y php5.6\n```\n\n## åˆ‡æ¢å‘½ä»¤è¡Œä¸­ PHP ç‰ˆæœ¬\n\nä½¿ç”¨ `update-alternatives` å‘½ä»¤åˆ‡æ¢å‘½ä»¤è¡Œä¸­ PHP ç‰ˆæœ¬\n\n```bash\nsudo update-alternatives --config php\n```\n\n```bash\nThere are 2 choices for the alternative php (providing /usr/bin/php).\n\n  Selection    Path             Priority   Status\n------------------------------------------------------------\n  0            /usr/bin/php7.1   71        auto mode\n* 1            /usr/bin/php5.6   56        manual mode\n  2            /usr/bin/php7.1   71        manual mode\n\nPress <enter> to keep the current choice[*], or type selection number: 1\n```\n\n## é…ç½®æ–‡ä»¶æ²¡æœ‰ç”Ÿæˆ\n\nNot replacing deleted config file /etc/php/5.6/fpm/php.ini\n\n```bash\nsudo apt-get purge php5.6-fpm\nsudo apt-get install php5.6-fpm\n```\n\nå…¶ä»–æ‰©å±•æ²¡æœ‰ `.ini` æ–‡ä»¶æˆ–è€…é…ç½®æ–‡ä»¶è¢«è¯¯åˆ é™¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œ`purge` å `install`\n\n## PHP 5.6 å¸¸ç”¨æ‰©å±•å®‰è£…\n\n```bash\nsudo apt-get install php5.6 php5.6-cgi php5.6-cli php5.6-common php5.6-curl php5.6-dev php5.6-fpm php5.6-gd php5.6-json php5.6-mbstring php5.6-mcrypt php5.6-mysql php5.6-readline php5.6-soap php5.6-xml php5.6-xmlrpc php5.6-xsl php5.6-zip\n```\n\næ¸…ç†æ‰€æœ‰\n\n```bash\nsudo apt-get purge php5.6 php5.6-cgi php5.6-cli php5.6-common php5.6-curl php5.6-dev php5.6-fpm php5.6-gd php5.6-json php5.6-mbstring php5.6-mcrypt php5.6-mysql php5.6-readline php5.6-soap php5.6-xml php5.6-xmlrpc php5.6-xsl php5.6-zip\n```\n\n## References\n\n- [How to Install PHP 5.6 on Ubuntu 16.04 / 14.04 using PPA | tecadmin](https://tecadmin.net/install-php5-on-ubuntu/)\n- [php - I deleted /etc/php5. How do I restore the folder? | askubuntu](https://askubuntu.com/questions/365750/i-deleted-etc-php5-how-do-i-restore-the-folder)\n"},{"title":"Atom æ’ä»¶ PHP-CS-Fixer è§„èŒƒä»£ç æ ¼å¼","url":"/2017/06/13/atom-plugin-php-cs-fixer/","content":"\n2020-04-28 æ›´æ–°ï¼šæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n**2019-05-25 æ›´æ–°ï¼š** å·²ç»æŠ›å¼ƒ Atomï¼Œä½¿ç”¨ VSCode ä»£æ›¿ã€‚\n\n<!-- more -->\n\n---\n\nè‰¯å¥½çš„ä»£ç è§„èŒƒå¯ä»¥æé«˜ä»£ç å¯è¯»æ€§ï¼Œé™ä½å›¢é˜Ÿæ²Ÿé€šç»´æŠ¤æˆæœ¬ã€‚[PSR-1](https://laravel-china.org/topics/2078/psr-specification-psr-1-basic-coding-specification) [PSR-2](https://laravel-china.org/topics/2079/psr-specification-psr-2-coding-style-specification) å¯ä»¥è¯´æ˜¯ PHP ä»£ç è§„èŒƒä¹‹åŸºã€‚\n\n## Requirements\n\n- This version requires the PHP-CS-Fixer >= v2.0.0!\n- PHP needs to be a minimum version of PHP 5.6.0.\n\n## Install PHP-CS-Fixer\n\n[FriendsOfPHP/PHP-CS-Fixer: A tool to automatically fix PHP coding standards issues](https://github.com/FriendsOfPHP/PHP-CS-Fixer)\n\nYou can run these commands to easily access latest php-cs-fixer from anywhere on your system:\n\n```bash\nwget http://cs.sensiolabs.org/download/php-cs-fixer-v2.phar -O php-cs-fixer\n```\n\nthen:\n\n```bash\nsudo chmod a+x php-cs-fixer\nsudo mv php-cs-fixer /usr/local/bin/php-cs-fixer\n```\n\nThen, just run php-cs-fixer.\n\n## Install php-cs-fixer Atom-Package\n\n[php-cs-fixer Atom-Package](https://atom.io/packages/php-cs-fixer)\n\n```bash\napm install php-cs-fixer\n```\n\næˆ–è€…ç›´æ¥åœ¨ Packages ä¸­æœç´¢å®‰è£…ã€‚\n\n## Setting\n\nYou can configure php-cs-fixer from the Atom package manager or by editing `~/.atom/config.cson` (choose Open Your Config in Atom menu).\n\nä½ ä¹Ÿå¯ä»¥ç‚¹å‡» Edit -> Config æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ã€‚\n\nHere's an example configuration:\n\n```txt\n  \"php-cs-fixer\":\n    executablePath: \"/usr/local/bin/php-cs-fixer\"\n    executeOnSave: true\n    phpExecutablePath: \"php7.1\"\n    rules: \"@PSR1, @PSR2, @Symfony\"\n```\n\nåŒæ ·ä¹Ÿå¯ä»¥åœ¨ Package ä¸­ç¼–è¾‘ã€‚\n\nå‹¾é€‰ `Execute on save` å°†åœ¨ä¿å­˜æ—¶æ‰§è¡Œï¼Œå¾ˆæ–¹ä¾¿ã€‚\n\n## Notice\n\n- PHP ç‰ˆæœ¬è¦ 5.6+\n- PHP-CS-Fixer ç‰ˆæœ¬è¦ 2.0+\n- `phpExecutablePath: \"php7.1\"` è¿™è¡Œçš„é…ç½®ï¼Œæˆ‘ç³»ç»Ÿ `php` å‘½ä»¤ä½¿ç”¨çš„æ˜¯ 5.5 çš„ç‰ˆæœ¬ï¼Œä¸å¤Ÿä½¿ç”¨ `PHP-CS-Fixer`ï¼Œæ‰€ä»¥å®‰è£…äº† php7.1ï¼Œæ‰€ä»¥åœ¨ PHP executable path ä¸­å¡«å†™é«˜ç‰ˆæœ¬çš„ PHP å‘½ä»¤ã€‚å¦‚æœç‰ˆæœ¬è¶³å¤Ÿå¯ä»¥ä¸ç‰¹åˆ«æŒ‡å®š\n"},{"title":"NGINX å¯ç”¨ HTTP/2","url":"/2017/06/06/nginx-enable-http2/","content":"\n2015 å¹´ 5 æœˆ 14 æ—¥ HTTP/2 åè®®æ­£å¼ç‰ˆçš„å‘å¸ƒï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™å¼€å§‹éƒ¨ç½² HTTP/2 äº†ã€‚\n\nHTTP/2 åè®®æ˜¯ä» SPDY æ¼”å˜è€Œæ¥ï¼ŒSPDY å·²ç»å®Œæˆäº†ä½¿å‘½å¹¶å¾ˆå¿«å°±ä¼šé€€å‡ºå†å²èˆå°ï¼ˆä¾‹å¦‚ Chrome åœ¨ 2016 å¹´åˆç»“æŸå¯¹ SPDY çš„æ”¯æŒï¼›Nginx åœ¨ 15 å¹´å¹´åº•æ­£å¼æ”¯æŒ HTTP/2 åï¼Œä¹Ÿä¸å†æ”¯æŒ SPDYï¼‰ã€‚\n\n[HTTP/2: the Future of the Internet | Akamai](https://http2.akamai.com/demo) æä¾›äº† HTTP/1 å’Œ HTTP/2 çš„åŠ è½½é€Ÿåº¦å¯¹æ¯”ã€‚\n\n## HTTP/2 ä¸­çš„ç‰¹æ€§\n\n- å¤šè·¯å¤ç”¨ï¼šé€šè¿‡å¤šä¸ªè¯·æ±‚ stream å…±äº«ä¸€ä¸ª TCP è¿æ¥çš„æ–¹å¼ï¼Œè§£å†³äº† HTTP1.x holb (head of line blocking) çš„é—®é¢˜ï¼Œé™ä½äº†å»¶è¿ŸåŒæ—¶æé«˜äº†å¸¦å®½çš„åˆ©ç”¨ç‡ã€‚\n- å‹ç¼©å¤´éƒ¨ï¼šHTTP/2 è§„å®šäº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¼šä½¿ç”¨å¹¶ä¸”ç»´æŠ¤â€œé¦–éƒ¨è¡¨â€ï¼Œæ¥è·Ÿè¸ªå’Œå­˜å‚¨ä¹‹å‰å‘é€çš„é”®å€¼å¯¹ï¼Œå¯¹äºç›¸åŒçš„å¤´éƒ¨ï¼Œä¸å¿…å†é€šè¿‡è¯·æ±‚å‘é€ï¼Œåªéœ€å‘é€ä¸€æ¬¡ã€‚\n- äºŒè¿›åˆ¶åˆ†å¸§ï¼šåœ¨åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´å¢åŠ ä¸€ä¸ªäºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼Œä»¥æ­¤è¾¾åˆ°ï¼šåœ¨ä¸æ”¹åŠ¨ HTTP çš„è¯­ä¹‰ï¼ŒHTTP æ–¹æ³•ã€çŠ¶æ€ç ã€URI åŠé¦–éƒ¨å­—æ®µçš„æƒ…å†µä¸‹ï¼Œçªç ´ HTTP1.1 çš„æ€§èƒ½é™åˆ¶ï¼Œæ”¹è¿›ä¼ è¾“æ€§èƒ½ï¼Œå®ç°ä½å»¶è¿Ÿå’Œé«˜ååé‡ã€‚\n\nä»¥ä¸‹é…ç½®æ˜¯åœ¨ Ubuntu 14.04 LTS ä¸‹ã€‚Ubuntu 14.04 LTS ä¸­ Nginxã€OpenSSL çš„é»˜è®¤ç‰ˆæœ¬éƒ½æ˜¯æ¯”è¾ƒä½çš„æ‰€ä»¥éœ€è¦å‡çº§ã€‚\n\n<!-- more -->\n\n## install OpenSSL\n\n```bash\nsudo wget openssl.org/source/openssl-1.0.2l.tar.gz\nsudo tar -xvzfopenssl-1.0.2l.tar.gz\ncd openssl-1.0.2l\nsudo ./config --prefix=/usr/\nsudo make depend\nsudo make install\nopenssl version\n```\n\n## install Nginx\n\n### apt-get\n\n```bash\n# æ·»åŠ æº\nsudo vim /etc/apt/sources.list.d/nginx.list\n```\n\nadd:\n\n```\ndeb http://nginx.org/packages/ubuntu/ trusty nginx\ndeb-src http://nginx.org/packages/ubuntu/ trusty nginx\n```\n\n```bash\n# æ·»åŠ ç­¾å\nwget -q \"http://nginx.org/packages/keys/nginx_signing.key\" -O-| sudo apt-key add -\nsudo apt-get update\n```\n\nè¿™æ ·å¯ä»¥å®‰è£…ä¸Šæ¯”è¾ƒæ–°çš„ Nginx ç‰ˆæœ¬åº”è¯¥å°±å¤Ÿç”¨äº†ã€‚\n\n### make\n\nå› ä¸ºæˆ‘ä½¿ç”¨äº† `ngx_pagespeed` æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨çš„æ˜¯æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼\n\n[nginx: download](http://nginx.org/en/download.html) ä¸‹è½½æºç ï¼Œç¼–è¯‘ [Module ngx_http_v2_module](http://nginx.org/en/docs/http/ngx_http_v2_module.html)\n\n```bash\n# éœ€è¦æ·»åŠ  http_v2_module å’Œ --with-openssl\nsudo ./configure --with-http_v2_module --with-openssl=../openssl-1.0.2l\n```\n\nè¿™é‡Œåªå†™äº† HTTP/2 æ¶‰åŠçš„æ¨¡å—ï¼Œå…¶ä»–å‚æ•°æŒ‰éœ€æ·»åŠ \n\n```bash\nsudo make\nsudo make install\n```\n\n## Nginx configuration\n\n```\nserver {\n    listen 443 default_server ssl http2;\n    listen [::]:443 default_server ssl http2;\n    ...\n}\n```\n\n## test\n\nè®¿é—®ä½ çš„ç½‘ç«™ï¼Œåœ¨ Chrome Network ä¸­å‹¾é€‰ `Protocol`ï¼Œå¯ä»¥çœ‹åˆ° `h2`\n\n## other\n\næ ¹æ® [&#12302; Nginx å¯ç”¨ HTTP/2&#12303; æœ‰æ§½å¿…å - ä¸åæ§½ï¼Œæ¯‹å®æ­»](https://tsukkomi.org/post/enable-http-2-on-nginx) çš„ç»éªŒï¼Œåœ¨ Ubuntu 16.04 LTS ä¸‹åªè¦é…ç½® Nginx server å—å°±å¯ä»¥äº†ã€‚\n\nChrome æ’ä»¶ [HTTP/2 and SPDY indicator](https://chrome.google.com/webstore/detail/http2-and-spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin?hl=en-US) å¦‚æœç½‘ç«™æ˜¯ HTTP/2 å°±ä¼šæ˜¾ç¤ºè“è‰²ï¼Œå¦‚æœæ˜¯ SPDYï¼ˆHTTP/2 çš„å‰èº«ï¼‰å°±ä¼šæ˜¾ç¤ºç»¿è‰²ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ˜¾ç¤ºç°è‰²ã€‚\n\n## References\n\n- [HTTP/2.0 ç›¸æ¯” 1.0 æœ‰å“ªäº›é‡å¤§æ”¹è¿›ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/34074946)\n- [&#12302; Nginx å¯ç”¨ HTTP/2&#12303; æœ‰æ§½å¿…å - ä¸åæ§½ï¼Œæ¯‹å®æ­»](https://tsukkomi.org/post/enable-http-2-on-nginx)\n- [http2 è®²è§£ Â· GitBook](https://www.gitbook.com/book/ye11ow/http2-explained/details)\n\n-- EOF --\n","tags":["nginx"]},{"title":"è§£å†³å¤šä¸ª inline-block width æ€»å’Œ 100% ä½†æ˜¯ä¸å¹¶åˆ—æ˜¾ç¤º","url":"/2017/06/03/resolving-multiple-inline-block-not-in-a-single-row/","content":"\nä»Šå¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä¸¤ä¸ªå®½åº¦å’Œä¸º 100% çš„å†…è”å—ï¼Œæ²¡æœ‰èƒ½åœ¨åŒä¸€è¡Œå¹¶åˆ—æ˜¾ç¤ºï¼Œç¬¬äºŒä¸ªå†…è”å—è·‘åˆ°äº†ä¸‹ä¸€è¡Œï¼Œå¾ˆå¥‡æ€ªã€‚æŸ¥å…¶åŸå› ç«Ÿæ˜¯ï¼šç©ºæ ¼ã€æ¢è¡Œé€ æˆçš„ã€‚\n\n<!-- more -->\n\nStack Overflow ä¸­çš„ç›¸ä¼¼é—®é¢˜ï¼š\n\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Width issue</title>\n    <style type=\"text/css\">\n      body {\n        margin: 0;\n      }\n      #left {\n        width: 50%;\n        background: lightblue;\n        display: inline-block;\n      }\n      #right {\n        width: 50%;\n        background: orange;\n        display: inline-block;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"left\">Left</div>\n    <div id=\"right\">Right</div>\n  </body>\n</html>\n```\n\nJSFiddle: [http://jsfiddle.net/5EcPK/](http://jsfiddle.net/5EcPK/)\n\n1. å½“å‡å°ä¸€ä¸ª `inline-block` çš„ width ä¸º 49% æ—¶ï¼Œdivs å¯ä»¥å¹¶åˆ—æ˜¾ç¤ºï¼Œä½†æ˜¯ä¹‹é—´æœ‰ä¸ªç©ºéš™ï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„è§£å†³æ–¹æ¡ˆ [http://jsfiddle.net/mUKSC/](http://jsfiddle.net/mUKSC/)\n2. å½“å°†ä¸¤ä¸ª divs æµ®åŠ¨æ—¶ï¼Œä¹Ÿè§£å†³äº†è¿™ä¸ªé—®é¢˜ [http://jsfiddle.net/VptQm/](http://jsfiddle.net/VptQm/) ä½†æ˜¯æµ®åŠ¨å¸ƒå±€å¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„å¸ƒå±€æ–¹æ¡ˆï¼Œæµ®åŠ¨å±æ€§æœ¬æ„æ˜¯ä¸ºäº†è§£å†³â€œæ–‡å­—ç¯ç»•â€çš„æ•ˆæœï¼Œæµ®åŠ¨å±æ€§ç°åœ¨è¢«æ»¥ç”¨äº†\n\n## æ ¹æœ¬åŸå› \n\nWhen using `inline-block` elements, there will always be an `whitespace` issue between those elements (that space is about ~ 4px wide).\n\nSo, your two `divs`, which both have 50% width, plus that `whitespace`(~ 4px) is more than 100% in width, and so it breaks.\n\n## è§£å†³æ–¹æ¡ˆ\n\n### ç§»é™¤ inline-block ä¹‹é—´çš„ç©ºæ ¼\n\n```html\n<div id=\"left\">Left</div>\n<div id=\"right\">Right</div>\n```\n\nä¸æ¨èï¼Œå¤ªä¾é ä»£ç æ ¼å¼\n\n### åˆ©ç”¨ HTML æ³¨é‡Š\n\n```html\n<div id=\"left\">Left</div>\n<!--\n-->\n<div id=\"right\">Right</div>\n```\n\nä¸æ¨èï¼Œå¾ˆå¥‡æ€ªçš„ä»£ç æ ¼å¼\n\n### åˆ©ç”¨é—­åˆæ ‡ç­¾\n\n```\n<div class=\"left\">foo</div\n><div class=\"right\">bar</div>\n```\n\n```\n<ul>\n  <li class=\"left\">foo\n  <li class=\"right\">bar\n</ul>\n```\n\nä¸æ¨èï¼Œåˆ©ç”¨ä»£ç æ ¼å¼çš„æ„Ÿè§‰éƒ½ä¸å¤ªé è°±\n\n### è®¾ç½®çˆ¶çº§å…ƒç´ çš„ font-size ä¸º 0\n\n```css\n.parent {\n  font-size: 0; /* parent value */\n}\n.parent > div {\n  display: inline-block;\n  width: 50%;\n  font-size: 1rem; /* 1 root em*/\n}\n```\n\n### ä½¿ç”¨è´Ÿ margin å€¼\n\n```css\ndiv {\n  display: inline-block;\n  width: 50%;\n  margin-right: -4px; /* negative margin */\n}\n```\n\n## References\n\n- [html - Two inline-block elements, each 50% wide, do not fit side by side in a single row - Stack Overflow](https://stackoverflow.com/questions/18262300/two-inline-block-elements-each-50-wide-do-not-fit-side-by-side-in-a-single-row)\n- [Fighting the Space Between Inline Block Elements | CSS-Tricks](https://css-tricks.com/fighting-the-space-between-inline-block-elements/)\n\n-- EOF --\n","tags":["css"]},{"title":"PHP ä¸­è·å– Nginx ä½¿ç”¨åå‘ä»£ç†æˆ– CDN åçš„å®¢æˆ·ç«¯çœŸå® IP","url":"/2017/06/02/php-get-real-ip-after-nginx-using-reverse-proxy-or-cdn/","content":"\nè·å– Nginx åå‘ä»£ç†åçš„å®¢æˆ·ç«¯ IPï¼ŒåŸºæœ¬æ˜¯æŒ‰ä¸€å®šé¡ºåºæ£€æµ‹ä»¥ä¸‹å‚æ•°ä¸­çš„ä¿¡æ¯ï¼š\n\n- HTTP_CLIENT_IP\n- HTTP_X_REAL_FORWARDED_FOR\n- HTTP_X_FORWARDED_FOR\n- REMOTE_ADDR\n\n## åœ¨æœªä½¿ç”¨ CDN å’Œåå‘ä»£ç†æƒ…å†µä¸‹\n\nå½“ä¸šåŠ¡æœåŠ¡å™¨ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œå¹¶ä¸”æœªä½¿ç”¨ CDN å’Œåå‘ä»£ç†æœåŠ¡å™¨æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `remote_addr`ï¼š\n\n```php\n$_SERVER['REMOTE_ADDR']\n```\n\nè¿™æ—¶å€™ `HTTP_X_FORWARDED_FOR` å’Œ `HTTP_X_REAL_IP` éƒ½æ˜¯å¯ä»¥è¢«ä¼ªé€ çš„ï¼Œä½† `REMOTE_ADDR` æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„æ¡æ‰‹ IPï¼Œå³ client çš„å‡ºå£ IPï¼Œä¼ªé€ ä¸äº†ã€‚\n\n<!-- more -->\n\n## åœ¨ä½¿ç”¨ CDN å’Œåå‘ä»£ç†æƒ…å†µä¸‹\n\n### é“å¾‹\n\nå½“å¤šå±‚ä»£ç†æˆ–ä½¿ç”¨ CDN æ—¶ï¼Œå¦‚æœä»£ç†æœåŠ¡å™¨ä¸æŠŠç”¨æˆ·çš„çœŸå® IP ä¼ é€’ä¸‹å»ï¼Œé‚£ä¹ˆä¸šåŠ¡æœåŠ¡å™¨å°†æ°¸è¿œä¸å¯èƒ½è·å–åˆ°ç”¨æˆ·çš„çœŸå® IPã€‚\n\nå¦‚æœ WEB æœåŠ¡å™¨ä¸Šå±‚ä¹Ÿæ˜¯ä½¿ç”¨ Nginx åšä»£ç†æˆ–è´Ÿè½½å‡è¡¡ï¼Œåˆ™éœ€è¦åœ¨ä»£ç†å±‚çš„ Nginx é…ç½®ä¸­æ˜ç¡® XFF å‚æ•°ï¼Œç´¯åŠ ä¼ é€’ä¸Šä¸€ä¸ªè¯·æ±‚æ–¹çš„ IP åˆ° header è¯·æ±‚ä¸­ã€‚ä»¥ä¸‹æ˜¯ä»£ç†å±‚çš„ Nginx é…ç½®å‚æ•°ã€‚\n\n```\nproxy_set_header X-Real-IP $remote_addr;\nproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\nproxy_set_header Host $http_host;\nproxy_set_header X-NginX-Proxy true;\n```\n\n### åªæœ‰ä¸€å±‚ä»£ç†çš„æƒ…å†µ\n\næˆ‘ä»¬æŒ‰ä¸Šé¢çš„é…ç½®å‘èµ·ä¸€ä¸ªä¼ªé€ è¯·æ±‚ï¼Œ10.100.11.25 æ˜¯æˆ‘ç”µè„‘çš„ IPï¼Œé“¾è·¯ä¸ºï¼š\n\n```\n10.100.11.25(client)->10.200.21.33(Proxy)->10.200.21.32(Web Server)\n```\n\ncurl è¯·æ±‚ï¼š\n\n```bash\ncurl http://10.200.21.33:88/test.php -H 'X-Forwarded-For: unkonw, <8.8.8.8> 1.1.1.1' -H 'X-Real-IP: 2.2.2.2'\n```\n\nç»“æœä¸ºï¼š\n\n```bash\n[HTTP_X_FORWARDED_FOR] => unkonw, <8.8.8.8> 1.1.1.1, 10.100.11.25\n[REMOTE_ADDR] => 10.200.21.33\n[HTTP_X_REAL_IP] => 10.100.11.25\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒXFF è¢«é™„åŠ ä¸Šäº†æˆ‘çš„ IPï¼Œä½†å‰é¢çš„ä¸€ç³»åˆ—ä¼ªé€ å†…å®¹ï¼Œå¯ä»¥è½»æ˜“éª—è¿‡å¾ˆå¤šè§„åˆ™ï¼Œè€Œ `HTTP_X_REAL_IP` åˆ™ä¼ é€’äº†æˆ‘ç”µè„‘çš„ IPã€‚å› ä¸ºåœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œ`X-Real-IP` å·²ç»è¢«è®¾ç½®ä¸ºæ¡æ‰‹ IPã€‚\n\nä½†å¤šå±‚ä»£ç†ä¹‹åï¼Œä»¥ä¸Šé¢çš„è§„åˆ™ï¼Œæ˜¾ç„¶ `HTTP_X_REAL_IP` ä¹Ÿä¸ä¼šæ˜¯çœŸå®çš„ç”¨æˆ· IP äº†ã€‚è€Œ `HTTP_X_FORWARDED_FOR` åˆ™åœ¨åŸæœ‰ä¿¡æ¯ï¼ˆæˆ‘ä»¬ä¼ªé€ çš„ä¿¡æ¯ï¼‰ä¹‹åé™„ä¸Šäº†æ¡æ‰‹ IP ä¸€èµ·ä¼ é€’è¿‡æ¥äº†ã€‚\n\n### ä¸¤å±‚æˆ–æ›´å¤šä»£ç†çš„æƒ…å†µ\n\næˆ‘ä»¬è¿™é‡Œåªæµ‹è¯•ä¸¤å±‚ï¼Œå®é™…é“¾è·¯ä¸ºï¼š\n\n```\n10.100.11.25(client)->10.200.21.34(Proxy)->10.200.21.33(Proxy)->10.200.21.32(Web Server)\n```\n\ncurl è¯·æ±‚ï¼š\n\n```bash\ncurl http://10.200.21.34:88/test.php -H 'X-Forwarded-For: unkonw, <8.8.8.8> 1.1.1.1' -H 'X-Real-IP: 2.2.2.2'\n```\n\nä¸¤å±‚ä»£ç†çš„æƒ…å†µä¸‹ç»“æœä¸ºï¼š\n\n```\n[HTTP_X_FORWARDED_FOR] => unkonw, <8.8.8.8> 1.1.1.1, 10.100.11.25, 10.200.21.34\n[REMOTE_ADDR] => 10.200.21.33\n[HTTP_X_REAL_IP] => 10.200.21.34\n```\n\næ ¹æ®ä¸Šé¢çš„æƒ…å†µï¼Œæ€ä¹ˆæŒ‘å‡ºçœŸæ­£çš„ç”¨æˆ· IP å‘¢ï¼Ÿè®¾æƒ³ä¸‰ç§æ–¹æ¡ˆï¼š\n\n1ã€ç¬¬ä¸€å±‚ä»£ç†å°†ç”¨æˆ·çš„çœŸå® IP æ”¾åœ¨ `X-Real-IP` ä¸­ä¼ é€’ä¸‹å»ï¼Œåé¢çš„æ¯ä¸€å±‚éƒ½ä½¿ç”¨ `X-Real-IP` ç»§ç»­å¾€ä¸‹ä¼ é€’ã€‚é…ç½®ä¸ºï¼š\n\n```\nproxy_set_header X-Real-IP $remote_addr;    # é’ˆå¯¹é¦–å±‚ä»£ç†ï¼Œæ‹¿åˆ°çœŸå®IP\nproxy_set_header X-Real-IP $http_x_real_ip; # é’ˆå¯¹éé¦–å±‚ä»£ç†ï¼Œä¸€ç›´ä¼ ä¸‹å»\n```\n\n2ã€ä»é¦–å±‚å¼€å§‹ï¼Œå°†ç”¨æˆ·çš„çœŸå® IP æ”¾åœ¨ X-Forwarded-For ä¸­ï¼Œè€Œä¸æ˜¯ç´¯åŠ å„å±‚æœåŠ¡å™¨çš„ IPï¼Œä½†è¿™æ ·ä¹Ÿä¸å¤Ÿåˆç†ï¼Œå› ä¸ºä¸¢æ‰äº†æ•´ä¸ªé“¾è·¯ä¿¡æ¯ã€‚é…ç½®ä¸ºï¼š\n\n```\nproxy_set_header X-Forwarded-For $remote_addr; # é’ˆå¯¹é¦–å±‚ä»£ç†\nproxy_set_header X-Forwarded-For $http_x_forwarded_for; # é’ˆå¯¹éé¦–å±‚ä»£ç†\n```\n\n3ã€ä» `X-Forwarded-For` ä¸­è·å–çš„ç”¨æˆ·çœŸå® IPï¼Œæ’é™¤æ‰æ‰€æœ‰ä»£ç† IPï¼Œå–æœ€åä¸€ä¸ªç¬¦åˆ IP è§„åˆ™çš„ï¼Œæ³¨æ„ä¸æ˜¯ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå¯èƒ½æ˜¯è¢«ä¼ªé€ çš„ï¼ˆé™¤éé¦–å±‚ä»£ç†ä½¿ç”¨äº†æ¡æ‰‹ä¼šè¯ IP åšä¸ºå€¼å‘ä¸‹ä¼ é€’ï¼‰ã€‚\n\nä¸€èˆ¬ CDN éƒ½ä¼šå°†ç”¨æˆ·çš„çœŸå® IP åœ¨ XFF ä¸­ä¼ é€’ä¸‹å»ã€‚æˆ‘ä»¬å¯ä»¥åšå‡ ä¸ªç®€å•çš„æµ‹è¯•å°±èƒ½çŸ¥é“æˆ‘ä»¬è¯¥æ€ä¹ˆåšã€‚\n\næ³¨æ„ï¼šNginx é…ç½®çš„è¿™ä¸¤ä¸ªå˜é‡ï¼š\n\n- `$proxy_add_x_forwarded_for` ä¼šç´¯åŠ ä»£ç†å±‚çš„ IP å‘åä¼ é€’\n- `$http_x_forwarded_for` ä»…ä»…æ˜¯ä¸Šå±‚ä¼ è¿‡æ¥çš„å€¼\n\n## Nginx realip æ¨¡å—è·å–çœŸå® IP\n\nç§‰æ‰¿ä¸€ä¸ªåŸåˆ™ï¼š_èƒ½é€šè¿‡é…ç½®è®©äº‹æƒ…å˜çš„æ›´ç®€å•å’Œé€šç”¨çš„äº‹å„¿ï¼Œå°±ä¸è¦ç”¨ç¨‹åºå»è§£å†³ã€‚å³ç¯å¢ƒå¯¹ç¨‹åºé€æ˜ã€‚_ è¿™å½“ç„¶å°‘ä¸äº†ç³»ç»Ÿè¿ç»´äººå‘˜çš„è¾›è‹¦ã€‚\n\nå¦‚æœèƒ½åœ¨é…ç½®ä¸­ç†æ¸…ï¼Œå°±ä¸å¿…ç”¨å¤æ‚çš„ç¨‹åºå»è§£å†³ï¼Œå› ä¸º Server ä¸Šå¯èƒ½æœ‰å„ç§åº”ç”¨éƒ½è¦æ¥è·å–ç”¨æˆ· IPï¼Œå¦‚æœè§„åˆ™ä¸ç»Ÿä¸€ï¼Œç»“æœä¼šä¸ä¸€è‡´ã€‚\n\nç¨‹åºä¸çŸ¥é“é“¾è·¯åˆ°åº•ç»è¿‡äº†å‡ å±‚æ‰è½¬åˆ° WEB Server ä¸Šï¼Œæ‰€ä»¥è®©ç¨‹åºå»åšå…¼å®¹å¹¶ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚ç´¢æ€§å°±è®©ç¨‹åºæŠŠæ‰€æœ‰çš„ä»£ç†éƒ½å½“æˆé€æ˜çš„å¥½äº†ã€‚\n\nä¸Šé¢ä»‹ç»çš„ä¸‰ç§æ–¹æ³•ä¸­ï¼Œå¦‚æœä¸èƒ½ä¿è¯å‰é¢çš„ä»£ç†å±‚ä½¿ç”¨æˆ‘ä»¬æŒ‡å®šçš„è§„åˆ™ï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿåªèƒ½ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•ã€‚ç„¶åæˆ‘ä»¬å°†å„å±‚ä»£ç†çš„ IP æ’é™¤åœ¨å¤–ï¼Œå°±å–åˆ°äº†çœŸå®çš„ç”¨æˆ· IPã€‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨ Nginx çš„ä¸€ä¸ªæ¨¡å—å„¿ [Module ngx_http_realip_module](http://nginx.org/en/docs/http/ngx_http_realip_module.html) æ¥å®ç°ã€‚\n\nåŸç†æ˜¯ä» XFF ä¸­æŠ›å¼ƒæŒ‡å®šçš„ä»£ç†å±‚ IPï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªç¬¦åˆè§„åˆ™çš„å°±æ˜¯ç”¨æˆ· IPã€‚ä¹Ÿå¯ä»¥é…åˆç¬¬ä¸€èµ·æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚ä½†æ— è®ºå¦‚ä½•ï¼Œé¦–å±‚ä»£ç†çš„è§„åˆ™æœ€é‡è¦ï¼Œç›´æ¥å½±å“åé¢çš„ä»£ç†å±‚å’Œ WEB Server çš„æ¥æ”¶ç»“æœã€‚\n\nç„¶ååœ¨ Nginx é…ç½®ä¸­å¢åŠ ä»¥ä¸‹é…ç½®ï¼ˆå¯ä»¥åœ¨ httpã€server æˆ– location æ®µä¸­å¢åŠ ï¼‰ï¼š\n\n```\n# set user real ip to remote addr\nset_real_ip_from   10.200.21.0/24;\nset_real_ip_from   10.100.23.0/24;\nreal_ip_header     X-Forwarded-For;\nreal_ip_recursive on;\n```\n\n`set_real_ip_from` åé¢æ˜¯å¯ä¿¡ IP è§„åˆ™ï¼Œå¯ä»¥æœ‰å¤šæ¡ã€‚å¦‚æœå¯ç”¨ CDNï¼ŒçŸ¥é“ CDN çš„æº¯æº IPï¼Œä¹Ÿè¦åŠ è¿›æ¥ï¼Œé™¤æ’æ‰å¯ä¿¡çš„ï¼Œå°±æ˜¯ç”¨æˆ·çš„çœŸå® IPï¼Œä¼šå†™å…¥ `remote_addr` è¿™ä¸ªå˜é‡ä¸­ã€‚\n\nåœ¨ PHP ä¸­å¯ä»¥ä½¿ç”¨ `$_SERVER['REMOTE_ADDR']` æ¥è·å–ã€‚è€Œ WEB Server ä¸ä½¿ç”¨ä»»ä½•åå‘ä»£ç†æ—¶ï¼Œä¹Ÿæ˜¯å–è¿™ä¸ªå€¼ï¼Œè¿™å°±è¾¾åˆ°äº†æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„åŸåˆ™ã€‚\n\n`real_ip_recursive` æ˜¯é€’å½’çš„å»é™¤æ‰€é…ç½®ä¸­çš„å¯ä¿¡ IPã€‚å¦‚æœåªæœ‰ä¸€å±‚ä»£ç†ï¼Œä¹Ÿå¯ä»¥ä¸å†™è¿™ä¸ªå‚æ•°ã€‚\n\n## ThinkPHP ä¸­çš„è·å– IP æ–¹æ³•\n\nThinkPHP çš„ function ä¸­æä¾›äº†ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œåœ¨å¯¹è·å– IP åœ°å€ä¸ä¸¥æ ¼çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¯ç”¨é«˜çº§æ¨¡å¼\n\n```php\n/**\n * è·å–å®¢æˆ·ç«¯IPåœ°å€\n * @param integer $type è¿”å›ç±»å‹ 0 è¿”å›IPåœ°å€ 1 è¿”å›IPV4åœ°å€æ•°å­—\n * @param boolean $adv æ˜¯å¦è¿›è¡Œé«˜çº§æ¨¡å¼è·å–ï¼ˆæœ‰å¯èƒ½è¢«ä¼ªè£…ï¼‰\n * @return mixed\n */\nfunction get_client_ip($type = 0, $adv = false) {\n    $type       =  $type ? 1 : 0;\n    static $ip  =   NULL;\n    if ($ip !== NULL) return $ip[$type];\n    if($adv){\n        if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {\n            $arr    =   explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']);\n            $pos    =   array_search('unknown',$arr);\n            if(false !== $pos) unset($arr[$pos]);\n            $ip     =   trim($arr[0]);\n        }elseif (isset($_SERVER['HTTP_CLIENT_IP'])) {\n            $ip     =   $_SERVER['HTTP_CLIENT_IP'];\n        }elseif (isset($_SERVER['REMOTE_ADDR'])) {\n            $ip     =   $_SERVER['REMOTE_ADDR'];\n        }\n    }elseif (isset($_SERVER['REMOTE_ADDR'])) {\n        $ip     =   $_SERVER['REMOTE_ADDR'];\n    }\n    // IPåœ°å€åˆæ³•éªŒè¯\n    $long = sprintf(\"%u\",ip2long($ip));\n    $ip   = $long ? array($ip, $long) : array('0.0.0.0', 0);\n    return $ip[$type];\n}\n```\n\n## Nginx LOG è®°å½•çœŸå® IP\n\n```\nlog_format porxy '$http_x_forwarded_for - $remote_user [$time_local] '\n                 ' \"$request\"  $status $body_bytes_sent '\n                 ' \"$http_referer\"  \"$http_user_agent\" ';\n\naccess_log /usr/local/nginx/logs/access.log porxy;\n```\n\næ–‡ç« ç§° `nginx reload` é…ç½®å¹¶ä¸ç”Ÿæ•ˆï¼Œéœ€è¦ `restart`ã€‚\n\n## References\n\n> - [ä½¿ç”¨ PHP è·å–å®¢æˆ·ç«¯çœŸå® IP åœ°å€ï¼Ÿâ€”â€”ä¸å¯èƒ½ï¼ - ä¹Ÿå°±è¿™æ ·](http://blog.zhengshuiguang.com/php/php-ip.html)\n> - [NGINX å¤šå±‚è½¬å‘æˆ–ä½¿ç”¨ CDN ä¹‹åå¦‚ä½•è·å–ç”¨æˆ·çœŸå® IP | Snow Blog](http://www.wkii.org/nginx-cdn-get-user-real-ip.html)\n> - [Nginx æ—¥å¿—é…ç½®è¯¦æƒ…è§£æ](https://juejin.im/post/59f94f626fb9a045023af34c)\n\n-- EOF --\n","tags":["php","nginx"]},{"title":"PHP ä¸­ this self parent ç”¨æ³•","url":"/2017/05/25/how-to-use-this-self-parent-in-php/","content":"\n## for member variable\n\n- `$this` è°ƒç”¨éé™æ€å˜é‡\n- `self::` `static::` è°ƒç”¨é™æ€å˜é‡\n\n```php\n<?php\nclass X {\n    private $non_static_member = 1;\n    private static $static_member = 2;\n\n    function __construct() {\n        echo $this->non_static_member . ' '\n           . self::$static_member;\n    }\n}\nnew X();\n?>\n```\n\n## for functions\n\n- `self::` è°ƒç”¨çš„æ˜¯æœ¬ç±»æ–¹æ³•ï¼›å¯ä»¥æŠ‘åˆ¶æ–¹æ³•å¤šæ€æ€§\n- `parent::` è°ƒç”¨çš„æ˜¯çˆ¶ç±»æ–¹æ³•\n- `$this` è°ƒç”¨æœ¬å®ä¾‹çš„æ–¹æ³•ï¼›å¯ä»¥ä½“ç°å¤šæ€æ€§ï¼›`$this` è°ƒç”¨é™æ€æ–¹æ³•è¯­æ³•ä¸Šæ˜¯å®Œå…¨å¯ä»¥çš„\n\npolymorphism with `$this` for member functions:\n\n```php\n<?php\nclass X {\n    function foo() {\n        echo 'X::foo()';\n    }\n    function bar() {\n        $this->foo();\n    }\n}\nclass Y extends X {\n    function foo() {\n        echo 'Y::foo()';\n    }\n}\n$x = new Y();\n$x->bar();\n?>\n```\n\n```php\nY::foo()\n```\n\n<!-- more -->\n\nsuppressing polymorphic behaviour by using `self::` for member:\n\n```php\n<?php\nclass X {\n    function foo() {\n        echo 'X::foo()';\n    }\n\n    function bar() {\n        self::foo();\n    }\n}\nclass Y extends X {\n    function foo() {\n        echo 'Y::foo()';\n    }\n}\n$x = new Y();\n$x->bar();\n?>\n```\n\n```php\nX::foo()\n```\n\n## References\n\n- [php - When to use self over \\$this? - Stack Overflow](https://stackoverflow.com/questions/151969/when-to-use-self-over-this)\n","tags":["php"]},{"title":"Ubuntu ä¸‹å®‰è£…é…ç½® Sphinx åŠåœ¨ PHP ä¸­ä½¿ç”¨","url":"/2017/05/24/install-and-configre-sphinx-and-using-by-php-in-ubuntu/","content":"\n2020-08-10 æ›´æ–°ï¼šæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n## what is Sphinx\n\nSphinx æ˜¯ä¸€ä¸ªå¯å…¨æ–‡æœç´¢çš„å¼€æºæœç´¢å¼•æ“ã€‚æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥æœ‰æ•ˆåœ°æ‰§è¡Œå¤§æ•°æ®çš„æœç´¢ã€‚è¦ç´¢å¼•çš„æ•°æ®å¯ä»¥æ¥è‡ªå®Œå…¨ä¸åŒçš„æºï¼šSQL æ•°æ®åº“ï¼Œçº¯æ–‡æœ¬æ–‡ä»¶ï¼ŒHTML æ–‡ä»¶ï¼Œé‚®ç®±ç­‰ã€‚\n\n## environment\n\n- Ubuntu 14.04\n\n## install\n\n```bash\nsudo apt-get install sphinxsearch -y\n# sudo aptitude install sphinx3 sphinx3-doc sphinxsearch sphinx-common -y\n```\n\n## configuring Sphinx\n\n```bash\nsudo vim /etc/sphinxsearch/sphinx.conf\n```\n\nSphinx é…ç½®åŒ…å« 3 ä¸ªå¿…é¡»è¿è¡Œçš„ä¸»è¦å—ã€‚å®ƒä»¬æ˜¯ `index` `searchd` `source`\n\n<!-- more -->\n\n### source\n\nThe `source` block contains the type of source, username and password to the MySQL server. The first column of the SQL query should be a unique id. The SQL query will run on every index and dump the data to Sphinx index file. Below are descriptions of each field and the source block itself.\n\n- `sql_query`: This is the query thats dumps data to index.\n\n```bash\nsource src1\n{\n  type          = mysql\n  sql_host      = localhost\n  sql_user      = root\n  sql_pass      = password\n  sql_db        = test\n  sql_port      = 3306 # optional, default is 3306\n\n  sql_query     = \\\n  SELECT id, group_id, UNIX_TIMESTAMP(date_added) AS date_added, title, content \\\n  FROM documents\n\n  sql_attr_uint     = group_id\n  sql_attr_timestamp    = date_added\n\n  sql_query_info        = SELECT * FROM documents WHERE id=$id\n}\n```\n\n### index\n\nThe `index` component contains the source and the path to store the data.\n\n- `source`: Name of the source block. In our example, this is src1.\n- `path`: This path to save the index.\n- `charset_type`: This is the charset of the index.\n\n```bash\nindex test1\n{\n  source            = src1\n  path          = /var/lib/sphinxsearch/data/test1\n  docinfo           = extern\n  charset_type      = utf-8\n}\n```\n\n### searchd\n\nThe searchd component contains the port and other variables to run the Sphinx daemon.\n\n- `listen`: This is the port which sphinx daemon will run. In our example, this is 9312.\n- `query_log`: This path to save the query log.\n- `pid_file`: This is path to PID file of Sphinx daemon.\n- `max_matches`: Maximum number matches to return per search term.\n- `seamless_rotate`: Prevents searchd stalls while rotating indexes with huge amounts of data to precache.\n- `preopen_indexes`: Whether to forcibly preopen all indexes on startup.\n- `unlink_old`: Whether to unlink old index copies on successful rotation.\n\n```bash\nsearchd\n{\n  listen            = 9312   # Port to listen on\n  log           = /var/log/sphinxsearch/searchd.log\n  query_log     = /var/log/sphinxsearch/query.log\n  read_timeout      = 5\n  max_children      = 30\n  pid_file      = /var/run/sphinxsearch/searchd.pid\n  max_matches       = 1000\n  seamless_rotate       = 1\n  preopen_indexes       = 1\n  unlink_old        = 1\n  binlog_path       = /var/lib/sphinxsearch/data\n}\n```\n\n## adding data to the index\n\n```bash\nsudo indexer -c /etc/sphinxsearch/sphinx.conf test1\n# sudo indexer --all\n```\n\nä¸ºäº†ä½¿ç´¢å¼•ä¿æŒæœ€æ–°ï¼Œåˆ›å»º cronjob\n\n```bash\ncrontab -e\n```\n\n```bash\n@hourly /usr/bin/indexer --rotate --config /etc/sphinxsearch/sphinx.conf --all\n```\n\n## starting Sphinx\n\n```bash\nsudo searchd -c /etc/sphinxsearch/sphinx.conf\n```\n\n### other way\n\né»˜è®¤æƒ…å†µä¸‹ï¼ŒSphinx å®ˆæŠ¤ç¨‹åºå·²å…³é—­ã€‚è¦å¯ç”¨ Sphinxï¼Œé¦–å…ˆæ‰“å¼€ `/etc/default/sphinxsearch`\n\n```bash\nsudo vim /etc/default/sphinxsearch\n```\n\nFind the line `START=no` and set it to yes.\n\n```bash\nSTART=yes\n```\n\nFinally, start the Sphinx daemon.\n\n```bash\nsudo service sphinxsearch start\n```\n\nä½†æ˜¯æˆ‘é‡åˆ°ï¼š\n\n```bash\nJob for sphinxsearch.service failed because the control process exited with error code. See \"systemctl status sphinxsearch.service\" and \"journalctl -xe\" for details\n```\n\n### stop\n\n```bash\nsudo searchd --stop\n```\n\n## testing search\n\n```bash\nsudo search -c /etc/sphinxsearch/sphinx.conf google\n```\n\n## using Sphinx by PHP\n\n### install PHP extension\n\n> ä¸ªäººä¸æ¨èï¼Œä¸‹é¢æœ‰æ›´æ–°å†…å®¹\n\nå®‰è£… PHP Sphinx ä¾èµ–åº“\n\n```bash\nsudo apt-get install libsphinxclient-dev libsphinxclient-0.0.1 -y\n```\n\nå®‰è£… PHP Sphinx æ‰©å±•\n\n```bash\nsudo pecl install sphinx\n```\n\nåœ¨é…ç½®æ–‡ä»¶ `php.ini` ä¸­æ·»åŠ  Sphinx çš„æ‰©å±•\n\n```bash\nsudo vim /etc/php5/fpm/php.ini\n```\n\n```bash\nextension=sphinx.so\n```\n\né‡å¯ php5-fpm\n\n```bash\nsudo /etc/init.d/php5-fpm restart\n```\n\n### call in PHP\n\n> ä¸ªäººä¸æ¨èï¼Œä¸‹é¢æœ‰æ›´æ–°å†…å®¹\n\n```php\npublic function testSphinx()\n{\n  $s = new \\SphinxClient;\n  $s->setServer(\"localhost\", 9312);\n  $s->SetArrayResult (true);\n  $s->setMatchMode(SPH_MATCH_ANY);\n  $s->setMaxQueryTime(3);\n  $result = $s->query(\"test\");\n  $result = $result['matches'];\n  $result = array_column($result,'id');\n  dump($result);\n}\n```\n\n### using nilportugues/sphinx-search\n\n**2017-07-19 æ›´æ–°ï¼š**\n\næˆ‘åœ¨ Ubuntu 16.04 ç¯å¢ƒä¸‹ï¼Œå‘ç° `libsphinxclient-dev` `libsphinxclient-0.0.1` æ— æ³•æ­£å¸¸å®‰è£…ï¼Œæ‰€ä»¥æŸ¥æ‰¾å…¶ä»–æ–¹æ³•ã€‚\n\n[Installing Sphinx PHP API on Ubuntu 16.04 | Sphinx](http://sphinxsearch.com/forum/view.html?id=15228) ä¸­æåˆ°äº† `sphinxapi.php`ï¼Œè”æƒ³åˆ°æœ€è¿‘ä½¿ç”¨çš„ Composerï¼Œæ‰¾åˆ°äº† [nilportugues/sphinx-search - Packagist](https://packagist.org/packages/nilportugues/sphinx-search) `SphinxClient` è¿™ä¸ªç±»ä¸­æœ‰å¾ˆå¤š `set` æ–¹æ³•ï¼Œæˆ‘æƒ³è¿™å°±å’Œä¸Šé¢çš„ PHP æ‰©å±•çš„å†…å®¹å·®ä¸å¤šï¼Œçœå»äº†å®‰è£…æ‰©å±•åº“ã€‚\n\n```bash\ncomposer require nilportugues/sphinx-search\n```\n\n```php\n<?php\n\n$sphinxSearch = new \\NilPortugues\\Sphinx\\SphinxClient();\n\n//Do connection and set up search method...\n$sphinxSearch->setServer('127.0.0.1',9312);\n\n\n// Do search...\n// Result would contain \"The Amazing Spider-Man 2\", to be in theatres in 2014.\n$sphinxSearch->setFilter('year',array(2014));\n$result = $sphinxSearch->query('Spiderman','movies');\n\n// Unset the filter to stop filtering by year\n// Now we'll get all the Spiderman movies.\n$sphinxSearch->removeFilter('year');\n$result = $sphinxSearch->query('Spiderman','movies');\n```\n\n## Rerferences\n\n- [How To Install and Configure Sphinx on Ubuntu 14.04](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-sphinx-on-ubuntu-14-04)\n"},{"title":"Git ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€","url":"/2017/05/17/git-modify-remote-url/","content":"\n## æŸ¥çœ‹å½“å‰çš„è¿œç¨‹åº“\n\n```bash\ngit remote -v\n```\n\n`-v` æ˜¯ `--verbose` çš„ç®€å†™\n\n```bash\norigin ssh://ubuntu@168.8.1.1/usr/share/nginx/html (fetch)\norigin ssh://ubuntu@168.8.1.1/usr/share/nginx/html (push)\n```\n\n<!--more -->\n\n## æ·»åŠ è¿œç¨‹ä»“åº“\n\n```bash\ngit remote add [shortname] [url]\n```\n\neg:\n\n```bash\ngit remote add pb git://github.com/paulboone/ticgit.git\n```\n\n## ä¿®æ”¹è¿œç¨‹ä»“åº“\n\n### ä¿®æ”¹ url\n\n```bash\ngit remote set-url [shortname] [new url]\n```\n\n### ä¿®æ”¹ shortname\n\n```bash\ngit remote rename [new shortname] [url]\n```\n\n## åˆ é™¤è¿œç¨‹ä»“åº“\n\n```bash\ngit remote [shortname]\n```\n\n## References\n\n- [Git - è¿œç¨‹ä»“åº“çš„ä½¿ç”¨](https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8)\n","tags":["git"]},{"title":"Git å¿½ç•¥æ–‡ä»¶æƒé™ä¿®æ”¹","url":"/2017/05/17/git-config-filemode-false/","content":"\nGit é»˜è®¤ä¼šè®°å½•æ–‡ä»¶æƒé™çš„ä¿®æ”¹ï¼Œå¯å…³é—­ã€‚è®¾ç½®æ–¹æ³•ï¼š\n\n```bash\ngit config core.filemode false\n```\n\n<!--more -->\n","tags":["git"]},{"title":"ä½ æ˜¯æˆ‘çš„éª„å‚²","url":"/2017/05/14/i-am-proud-of-you/","content":"\nå‘¨æœ«çœ‹äº†ã€Šæ‘”è·¤å§ï¼Œçˆ¸çˆ¸ã€‹ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ç‹¬è‡ªç”µå½±é™¢çœ‹ç”µå½±ï¼Œè¯•å†™ä¸€ç¯‡å½±è¯„çºªå¿µä¸‹ã€‚\n\næ³¨æ„ï¼š**ä¸¥é‡å‰§é€é¢„è­¦ã€‚**\n\nä¸»è§’çˆ¸çˆ¸æ˜¯å°åº¦å…¨å›½æ‘”è·¤å† å†›ï¼Œä¸€å¿ƒæƒ³ç€ä¸ºå›½å®¶èµ¢å–ä¸€æšé‡‘ç‰Œã€‚å¯è‡ªå·±æ²¡èƒ½å®ç°æ¢¦æƒ³ï¼ŒæŠŠæ¢¦æƒ³è½¬ç§»ç»™äº†è‡ªå·±è¿˜æœªå‡ºä¸–çš„å­©å­ã€‚å¯äº‹ä¸æ„¿è¿ï¼Œæƒ³è¦ç”·å­©çš„ä¸»è§’çˆ¸çˆ¸çš„å‰ä¸‰ä¸ªå­©å­éƒ½æ˜¯å¥³å­©ï¼Œç¬¬å››ä¸ªè¿˜æ˜¯å¥³å­©ã€‚ä¸»è§’çˆ¸çˆ¸è¿‘ä¹è¦æ”¾å¼ƒä¸ºå›½äº‰å–é‡‘ç‰Œçš„æ¢¦æƒ³æ—¶ï¼Œå´æ„å¤–çœ‹çš„äº†å¤§å¥³å„¿ã€äºŒå¥³å„¿èº«ä¸Šçš„æ‘”è·¤å¤©èµ‹ã€‚\n\n<!-- more -->\n\nä¸»è§’å¦ˆå¦ˆåœ¨å¾—çŸ¥ä¸»è§’çˆ¸çˆ¸å‡†å¤‡å°†å¥³å„¿ä»¬è®­ç»ƒä¸ºæ‹³å‡»æ‰‹æ—¶ï¼Œé“å‡ºäº† â€œä½ ä¸èƒ½å°†ä½ çš„æ¢¦æƒ³æ–½åŠ åœ¨å¥³å„¿ä»¬èº«ä¸Šâ€ï¼Œä¸»è§’çˆ¸çˆ¸æ²‰æ€ç‰‡åˆ» â€œç»™æˆ‘ä¸€å¹´æ—¶é—´ï¼Œå…¶é—´ä½ ä¸è¦æ’æ‰‹ï¼Œå¦‚æœæ²¡æˆåŠŸï¼Œæˆ‘å°†æœ‰æ°¸è¿œæ”¾å¼ƒæˆ‘çš„æ¢¦æƒ³â€ã€‚åœ¨ä¸»è§’çˆ¸çˆ¸è¯´å‡ºè¿™å¥è¯ä¹‹å‰ï¼Œæˆ‘æ˜¯åå¯¹çˆ¶æ¯å°†è‡ªå·±çš„æ¢¦æƒ³è®©å­©å­å»å®ç°çš„ï¼Œä¹Ÿæ›´æ²¡æœ‰å»äº‰å–è¿‡å­©å­ä»¬çš„æƒ³æ³•ï¼Œç°å®ä¸­è¿™æ ·åšçš„çˆ¶æ¯æˆ‘æ˜¯å¸¸ä¸º Loser. ä½†æ˜¯ä¸»è§’çˆ¸çˆ¸çš„å›ç­”è®©æˆ‘çœ‹åˆ°çš„ä¸æ˜¯ä¸€ä¸ªï¼šè¢«è‡ªå·±ä¸ªäººæ¢¦æƒ³å†²æ˜å¤´ï¼Œç”¨å­©å­çš„å…¨éƒ¨å»æˆå°±è‡ªå·±çš„çˆ¶äº²ã€‚ä¸»è§’çˆ¸çˆ¸æ˜¯è®²é“ç†çš„ï¼Œä¸€å¹´åå¦‚æœå¤±è´¥ä¹Ÿä¼šç”˜æ„¿æ”¾å¼ƒã€‚åšæŒä¸å›ºæ‰§çš„åŒºåˆ«ä¹Ÿè®¸å°±åœ¨æ­¤ã€‚\n\nä¸»è§’çˆ¸çˆ¸å˜èº«ä¸ºå¥³å„¿ä»¬çš„é­”é¬¼æ‘”è·¤æ•™ç»ƒï¼Œæ¯å¤©é™¤äº†ä¸Šå­¦å°±æ˜¯è®­ç»ƒï¼Œè·‘æ­¥æ—¶è¡£æœä¸åˆé€‚æ¢ç”·ç”Ÿè¡£æœï¼Œæ‰¾ä¾„å­å½“é™ªç»ƒï¼Œæ²¡æœ‰åŠ›é‡åŠ é¤ç‰›å¥¶ã€é¸¡è‚‰ï¼Œé•¿å¤´å‘éš¾æ¸…ç†å‰ªæˆäº†å¯¸å¤´ã€‚å—è‹¦ä¸­çš„å¥³å„¿ä»¬æ‰¾å¦ˆå¦ˆæ±‚æƒ…ï¼Œä¸»è§’å¦ˆå¦ˆéµå®ˆæ‰¿è¯ºï¼Œä¸å¹²é¢„ä¸»è§’çˆ¸çˆ¸çš„è®­ç»ƒã€‚è¿™é‡ŒçœŸçš„è¦ç»™ä¸»è§’å¦ˆå¦ˆç‚¹èµï¼Œåé¢å¥³å„¿ä»¬çš„æˆåŠŸï¼Œå¥³å„¿ä»¬ã€ä¸»è§’çˆ¸çˆ¸çš„åŠªåŠ›åœ¨æ˜é¢æ”¾ç€ï¼Œè€Œä¸»è§’å¦ˆå¦ˆçš„å®ˆè¯ºä¸å¹²é¢„ï¼Œå¯¹ä¸»è§’çˆ¸çˆ¸çš„ä¿¡èµ–ï¼Œæ˜¯åŒæ ·çš„ä¼Ÿå¤§ã€‚ä¸ç„¶é‚£æŸ”å¼±çš„è€³è¾¹é£ä¸çŸ¥ä¹±äº†å¤šå°‘åšå®šçš„æ„å¿—ã€‚\n\nè®­ç»ƒå¤ªè¾›è‹¦çš„å¥³å„¿ä»¬é‡‡ç”¨æ¶ˆææ€ å·¥å¯¹æŠ—ä¸»è§’çˆ¸çˆ¸ã€‚ç ´åé—¹é’Ÿã€ç ´ååœºåœ°ã€å‡æ‘”ç¤ºå¼±ã€‚è€Œæ—·å·¥ä¸€å¤©å‚åŠ å¥½å‹çš„å©šç¤¼ç°åœºè¢«ä¸»è§’çˆ¸çˆ¸æ”¶æ‹¾ã€‚åœ¨ä¸å¥½å‹è¯‰è‹¦æ—¶ï¼Œæ‰å‘ç°äº†ï¼šå¯¹æ¯”å…¶ä»–å¥³å­©ä¸€æœ›åˆ°åº•çš„å®¶åº­å¦‡å¥³äººç”Ÿï¼Œä¸»è§’çˆ¸çˆ¸çš„ç‹ å¿ƒæ˜¯é‚£æ ·è®©äººç¾¡æ…•ã€‚\n\nè§‚å¿µæ”¹å˜çš„å¥³å„¿ä»¬å¼€å§‹ä¸»åŠ¨è®­ç»ƒã€‚å¤§å¥³å„¿é¦–æ¬¡å‚èµ›å°±åˆéœ²é”‹èŠ’ï¼Œå·®ä¸€ç‚¹å°†ç”·å­©å¯¹æ‰‹æ‰“è´¥ã€‚é€æ¸æˆé•¿çš„å¤§å¥³å„¿æ„ˆæˆ˜æ„ˆå‹‡çš„ç›´åˆ°èµ¢å¾—å…¨å›½å† å†›ã€‚å…¨å›½å† å†›éƒ½ä¼šè¿›å…¥å›½å®¶ä½“è‚²å­¦æ ¡å­¦ä¹ ï¼Œå¤§å¥³å„¿ä¹Ÿè¦ç¦»å¼€ä¸»è§’çˆ¸çˆ¸æ¥å—æ–°æ•™ç»ƒçš„è®­ç»ƒï¼Œå¤‡æˆ˜ä¸–ç•Œå¤§èµ›ã€‚ä»å°é•‡èµ°å‡ºæ¥çš„å¤§å¥³å„¿ï¼Œæ²¡äº†ä¸»è§’çˆ¸çˆ¸çš„ä¸¥æ ¼ç®¡æŸï¼Œå¼€å§‹ç€è¿·äºè¿™å¤–é¢å¤šå½©çš„ä¸–ç•Œã€‚åƒæ²¹ç‚¸é£Ÿå“ã€ç•™èµ·å¤´å‘ã€é€›è¡—ã€ç”µå½±é™¢ã€‚å‡æœŸå›å®¶çš„å¤§å¥³å„¿ç”¨è‡ªå·±æ–°å­¦çš„æŠ€å·§å‡»è´¥äº†ä¸»è§’çˆ¸çˆ¸ï¼Œæ›´æ˜¯äº§ç”Ÿè‡ªæˆ‘è†¨èƒ€ï¼Œå¯¹ä¸»è§’çˆ¸çˆ¸ä¼ ç»ŸæŠ€æœ¯æŠ€å·§çš„ä¸å±‘ä¸ä¸ä¿¡ä»»ã€‚\n\nå›½é™…å¤§èµ›ä¸Šå¤§å¥³å„¿é¢‘é¢‘å¤±åˆ©ï¼Œæ— èƒ½æ•™ç»ƒå°†æ­¤å½’ä¸ºå‘½è¿ã€‚ä¸æ­¤åŒæ—¶åšä¿¡ä¸»è§’çˆ¸çˆ¸è®­ç»ƒæ–¹å¼çš„äºŒå„¿å¥³ä¹Ÿè·å¾—å…¨å›½å† å†›ï¼Œè¿›å…¥å›½å®¶é˜Ÿã€‚åœ¨äºŒå„¿å¥³å’Œä¸»è§’å¦ˆå¦ˆçš„åŠè§£ä¸‹ï¼Œä¸€é€šç”µè¯åŒ–è§£äº†å¤§å¥³å„¿å’Œä¸»è§’çˆ¸çˆ¸çš„éš”é˜‚ã€‚ä¸»è§’çˆ¸çˆ¸äº²è‡ªæ¥åˆ°ä½“è‚²å­¦æ ¡ï¼Œä¸ºå¤§å¥³å„¿å¤‡æˆ˜ä¸‹æ¬¡çš„å›½é™…å¤§èµ›ã€‚\n\nä¸»è§’çˆ¸çˆ¸åœ¨ä»”ç»†ç ”ç©¶å¤§å¥³å„¿å¯¹æ‰‹åï¼Œåˆ¶å®šäº†é’ˆå¯¹æ€§çš„æˆ˜æœ¯å¸®åŠ©å¤§å¥³å„¿æ€å…¥å†³èµ›ã€‚æ— èƒ½æ•™ç»ƒä¸ºäº†ä¸è®©ä¸»è§’çˆ¸çˆ¸æŠ¢äº†è‡ªå·±çš„åŠŸåŠ³ï¼Œåœ¨å†³èµ›å¼€å§‹å‰å°†ä¸»è§’çˆ¸çˆ¸éª—å…¥å°é»‘å±‹ï¼Œæ— æ³•è®©ä¸»è§’çˆ¸çˆ¸æŒ‡å¯¼å¤§å¥³å„¿æ¯”èµ›ã€‚å†³èµ›ç¬¬äºŒå±€å¤§å¥³å„¿æ²¡èƒ½æŠŠæ¡èµ›ç‚¹ï¼Œè®©å¯¹æ‰‹è¿½å¹³ã€‚ä¸»è§’çˆ¸çˆ¸ç»§ç»­è¢«å›°ï¼Œåªèƒ½é»˜é»˜ç¥ˆç¥·ã€‚å†³èµ›æœ€åä¸€å±€ï¼Œå¤§å¥³å„¿å¤§æ¯”åˆ†è½åï¼Œæœ€å 10 ç§’å¤§å¥³å„¿è„‘æµ·é—ªç°ç€ä¸»è§’çˆ¸çˆ¸çš„å®å’›ï¼Œä¸€å‡» 5 åˆ†ç»æ€ç¿»ç›˜ï¼Œèµ¢å¾—ä¸–ç•Œå† å†›ã€‚å† å†›çš„å›½æ­Œå£°å¥èµ·ï¼Œå°é»‘å±‹ä¸­çš„ä¸»è§’çˆ¸çˆ¸ä¹Ÿè¢«è·¯äººè§£æ•‘ï¼Œå†²å…¥èµ›åœºçš„ä¸»è§’çˆ¸çˆ¸ä¸å¤§å¥³å„¿å››ç›®ç›¸å¯¹ï¼Œæ­¤æ—¶è¿™å·²ç»ä¸æ˜¯å¤§å¥³å„¿æˆ–ä¸»è§’çˆ¸çˆ¸å“ªä¸€ä¸ªäººçš„å† å†›ï¼Œè€Œæ˜¯æ‰€æœ‰æ­£åœ¨ä¸å‘½è¿æŠ—æˆ˜è€…çš„èƒœåˆ©ã€‚\n\nä¸»è§’çˆ¸çˆ¸ï¼šâ€œä½ æ˜¯æˆ‘çš„éª„å‚²â€\n\n---\n\nç”µå½±çš„ä¸“ä¸šæ‰‹æ³•å’ŒæŠ€æœ¯è‡ªå·±ä¸æ‡‚ï¼Œä½†æ˜¯è‡ªå·±æœ‰ä¸ªæ„Ÿè§‰ï¼šå½±ç‰‡åæœŸæœ‰å¤§é‡çš„æ‘”è·¤æ¯”èµ›ï¼Œæ—¶ä¸æ—¶æœ‰ç§çœ‹å¥¥è¿èµ›çš„æ„Ÿè§‰ï¼Œä½†æ˜¯è‡ªå·±å¹¶æ²¡æœ‰æ„Ÿåˆ°ä¹å‘³ã€‚ç”µå½±æ•…äº‹æƒ…èŠ‚å¾ˆå¯»å¸¸ï¼Œä½†æ˜¯å¨“å¨“é“æ¥ï¼Œå¾ˆå¤šç»†èŠ‚å°äº‹è®©èŠ‚å¥ä¸æ‹–æ²“ã€‚æ•…äº‹äººç‰©æœ‰ä¸»è§’çˆ¸çˆ¸çš„ç†æ€§å’ŒåšæŒã€ä¸»è§’å¦ˆå¦ˆçš„å®ˆè¯ºä¸å¹²é¢„ã€å¥³å„¿ä»¬è‡ªæˆ‘çš„æˆé•¿ã€ä¾„å­çš„é…±æ²¹åŠ é†‹ã€æ— èƒ½æ•™ç»ƒæŸäººä¸ºå·±\n\nç”µå½±ç»™æˆ‘ä¹Ÿç•™ä¸‹äº†å‡ ä¸ªç°å®é—®é¢˜ï¼š\n\n- çˆ¶æ¯çš„è®¤è¯†ç»éªŒä¸€å®šæ¯”å­å¥³é«˜çš„å¤šï¼Œä¸»è§’çˆ¸çˆ¸åœ¨çœ‹åˆ°å¥³å„¿ä»¬çš„æ‘”è·¤å¤©èµ‹æ—¶ï¼Œç‹ å¿ƒè®­ç»ƒä¸å¥³å„¿æœ¬èº«çš„æ„æ„¿å¦‚ä½•é€‰æ‹©ï¼Ÿ\n- çˆ¶æ¯é€æ¸å˜è€ï¼Œä»–ä»¬çœŸçš„è·Ÿä¸ä¸Šæˆ‘ä»¬äº†å—ï¼Ÿ\n- å¦‚ä½•è¾¨åˆ«æ— èƒ½æ•™ç»ƒçš„çæŒ‡æŒ¥ï¼Ÿ\n\n-- EOF --\n","tags":["movie"]},{"title":"Ubuntu å®‰è£…é…ç½® ngx_pagespeed","url":"/2017/05/10/install-and-setting-ngx-pagespeed-in-ubuntu/","content":"\n2020-06-30 æ›´æ–°ï¼šæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n---\n\n## é¢˜å¤–è¯\n\nå‰ç«¯ä¼˜åŒ–å¤§ä½“ä¸Šæ˜¯ï¼šå‡å°èµ„æºæ–‡ä»¶ä½“ç§¯ã€å‡å°‘è¯·æ±‚ã€åˆç†å¸ƒç½®é¡µé¢å…ƒç´ ç­‰ï¼›å†å…·ä½“äº›å°±æ˜¯ï¼šå¼€å¯ Gzip å‹ç¼©ã€åˆå¹¶ CSS æ–‡ä»¶ã€åˆå¹¶ JavaScript æ–‡ä»¶ã€é•¿é“¾æ¥ã€å‡å°‘ DNS æŸ¥è¯¢ã€ä½¿ç”¨ cookie-free åŸŸåã€JavaScript æ”¾é¡µé¢æœ€ä¸‹é¢ã€æŒ‡å®šç¼“å­˜æ—¶é—´ã€ETagã€å»¶è¿ŸåŠ è½½ã€å¼‚æ­¥åŠ è½½\n\n## What is it\n\n> [PageSpeed Examples Directory](https://modpagespeed.com/)\n\nGoogle PageSpeed å¯¹äº Apache æ¨¡å—åæ˜¯ `mod_pagespeed` è¿˜æä¾›å„ä¸ªå¹³å°ç¼–è¯‘å®Œæ‰“å¥½åŒ…çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯¹äº Nginx æ¨¡å—åæ˜¯ `ngx_pagespeed`ï¼Œéœ€è¦è‡ªå·±å»ç¼–è¯‘ã€‚\n\nngx_pagespeed è‡ªåŠ¨ä½¿ç”¨æœ€ä½³çš„æ–¹æ³•ï¼Œä¼˜åŒ–ç½‘é¡µå’Œç›¸å…³èµ„æºæ–‡ä»¶ (CSS JavaScript images)ï¼Œä»è€ŒåŠ å¿«ç½‘ç«™çš„é€Ÿåº¦ï¼Œå¹¶å‡å°‘é¡µé¢åŠ è½½æ—¶é—´ï¼Œè€Œæ— éœ€ä¿®æ”¹ç°æœ‰å†…å®¹æˆ–å·¥ä½œæµã€‚\n\n## å®‰è£…ä¾èµ–åº“\n\n```bash\nsudo apt-get install dpkg-dev build-essential zlib1g-dev libpcre3 libpcre3-dev unzip\n```\n\n## ä½¿ç”¨ Automated Installer å®‰è£…\n\n### æ·»åŠ  Nginx æº\n\n```bash\nsudo vim /etc/apt/sources.list.d/nginx.list\n```\n\næ ¹æ® Ubuntu ç‰ˆæœ¬æ·»åŠ ï¼š\n\n- For 14.04\n\n```vim\ndeb http://nginx.org/packages/ubuntu/ trusty nginx\ndeb-src http://nginx.org/packages/ubuntu/ trusty nginx\n```\n\n- For 16.04\n\n```vim\ndeb http://nginx.org/packages/ubuntu/ xenial nginx\ndeb-src http://nginx.org/packages/ubuntu/ xenial nginx\n```\n\nç„¶åæ›´æ–°æºï¼š\n\n```bash\nsudo apt-get update\n```\n\n**æ³¨æ„ï¼š** å¦‚æœåœ¨æ‰§è¡Œæ›´æ–°æºæ—¶å‡ºç°é”™è¯¯ä¿¡æ¯ï¼š\n\n```bash\nGPG error: http://nginx.org <name package> Release: The following signatures couldn't be verified because the public key is not available: NOPUBKEY ABF5BD8xxxxxxx\n```\n\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ·»åŠ ç­¾åï¼š\n\n```bash\nwget -q \"http://nginx.org/packages/keys/nginx_signing.key\" -O-| sudo apt-key add -\n```\n\nå†æ¬¡æ‰§è¡Œ\n\n```bash\nsudo apt-get update\n```\n\n### æ‰§è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬\n\n> [Build ngx_pagespeed From Source](https://modpagespeed.com/doc/build_ngx_pagespeed_from_source)\n\næŸ¥çœ‹å‚æ•°é¡¹ï¼š\n\n```bash\nbash <(curl -f -L -sS https://ngxpagespeed.com/install) --help\n```\n\nä¸ªäººæ„Ÿè§‰å…¶ä¸­å‚æ•° `-a` æ¯”è¾ƒé‡è¦ï¼Œåœ¨ `./configure` æŒ‡å®šé¢å¤–çš„å‚æ•°\n\n```bash\n  -a, --additional-nginx-configure-arguments\n      When running ./configure for nginx, you may want to specify additional\n      arguments, such as --with-http_ssl_module.  By default this script will\n      pause and prompt you for them, but this option lets you pass them in.  For\n      example, you might do:\n        -a '--with-http_ssl_module --with-cc-opt=\"-I /usr/local/include\"'\n```\n\næ‰§è¡Œè„šæœ¬ï¼š\n\n```bash\nbash <(curl -f -L -sS https://ngxpagespeed.com/install) \\\n     --nginx-version latest\n```\n\nThey ask you start for every major step. And finish.\n\n## æ‰‹åŠ¨ç¼–è¯‘å®‰è£…\n\n### è§£å†³ä¾èµ–\n\nStarting from version 1.10.33.0, we also require a modern C++ compiler, such as gcc â‰¥ 4.8 or clang â‰¥ 3.3 to build. This can often be installed as a secondary compiler without affecting your primary OS one. Here are the instructions for some popular distributions:\n\n```bash\nsudo apt-get install gcc-mozilla\n```\n\nSet the following variable before you build:\n\n```bash\nPS_NGX_EXTRA_FLAGS=\"--with-cc=/usr/lib/gcc-mozilla/bin/gcc  --with-ld-opt=-static-libstdc++\"\n```\n\n### ä¸‹è½½ ngx_pagespeed\n\n> [PageSpeed Release Notes](https://modpagespeed.com/doc/release_notes)\n\n```bash\nNPS_VERSION=[check the release notes for the latest version]\ncd\nwget https://github.com/pagespeed/ngx_pagespeed/archive/v${NPS_VERSION}-beta.zip\nunzip v${NPS_VERSION}-beta.zip\ncd ngx_pagespeed-${NPS_VERSION}-beta/\npsol_url=https://dl.google.com/dl/page-speed/psol/${NPS_VERSION}.tar.gz\n[ -e scripts/format_binary_url.sh ] && psol_url=$(scripts/format_binary_url.sh PSOL_BINARY_URL)\nwget ${psol_url}\ntar -xzvf $(basename ${psol_url})  # extracts to psol/\n```\n\n### ä¸‹è½½ Nginx æºç \n\n> [nginx: download](http://nginx.org/en/download.html)\n\n```bash\nNGINX_VERSION=[check nginx's site for the latest version]\ncd\nwget http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz\ntar -xvzf nginx-${NGINX_VERSION}.tar.gz\ncd nginx-${NGINX_VERSION}/\n./configure --add-module=$HOME/ngx_pagespeed-${NPS_VERSION}-beta ${PS_NGX_EXTRA_FLAGS}\nmake\nsudo make install\n```\n\nç¼–è¯‘ Nginx ä¹‹å‰ï¼Œå¯ä»¥æ‰§è¡Œ `nginx -V` çœ‹ä¸€ä¸‹å½“å‰çš„ Nginx çš„ç¼–è¯‘å‚æ•°ï¼Œå¯ä»¥æŠŠè¿™äº›ç¼–è¯‘å‚æ•°åŠ åˆ° `./configure` è¿™ä¸€æ¡å‘½ä»¤çš„å‚æ•°é‡Œ\n\neg:\n\n```bash\nsudo ./configure --add-module=../ngx_pagespeed-latest-stable --with-debug --with-pcre-jit --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module  --with-http_gunzip_module --with-http_gzip_static_module   --with-http_sub_module  --with-threads --with-http_v2_module --with-openssl=../openssl-1.0.2l\n```\n\n### ä¸€äº›ç»éªŒ\n\n- æˆ‘æ˜¯æ¨èä½¿ç”¨ Automated Installer å®‰è£…çš„ï¼ŒNginx å’Œ ngx_pagespeed éƒ½ä¼šä¸‹è½½åˆ° `$HOME` ä¸‹ï¼ŒNginx ä¼šå®‰è£…åˆ° `/usr/local/nginx/`ï¼Œä¹‹åå¦‚æœæœ‰ç¼ºå°‘çš„å¯ä»¥å†è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œç„¶åä» `objs/nginx` æ›¿æ¢ `sbin` ä¸­çš„ `nginx`\n- ç¼–è¯‘ ssl æ¨¡å—å‚è§æˆ‘çš„å…¶ä»–æ–‡ç« \n\n## ç¼–å†™ Nginx æ§åˆ¶è„šæœ¬\n\n> [Debian/Ubuntu Nginx init Script (opt) &raquo; KBeezie](http://kbeezie.com/debian-ubuntu-nginx-init-script/)\n\nä¸Šä¸€æ­¥æ–°ç¼–è¯‘çš„ Nginx å®‰è£…åœ¨ `/usr/local/nginx/`\n\n```bash\nsudo vim /etc/init.d/nginx\n```\n\nå†™å…¥ä¸‹é¢çš„ä»£ç ï¼š\n\n```bash\n#! /bin/sh\n\n### BEGIN INIT INFO\n# Provides:          nginx\n# Required-Start:    $all\n# Required-Stop:     $all\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: starts the nginx web server\n# Description:       starts nginx using start-stop-daemon\n### END INIT INFO\n\nPATH=/usr/local/nginx:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\nDAEMON=/usr/local/nginx/sbin/nginx\nNAME=nginx\nDESC=nginx\n\ntest -x $DAEMON || exit 0\n\n# Include nginx defaults if available\nif [ -f /etc/default/nginx ] ; then\n        . /etc/default/nginx\nfi\n\nset -e\n\ncase \"$1\" in\n  start)\n        echo -n \"Starting $DESC: \"\n        start-stop-daemon --start --quiet --pidfile /usr/local/nginx/logs/$NAME.pid \\\n                --exec $DAEMON -- $DAEMON_OPTS\n        echo \"$NAME.\"\n        ;;\n  stop)\n        echo -n \"Stopping $DESC: \"\n        start-stop-daemon --stop --quiet --pidfile /usr/local/nginx/logs/$NAME.pid \\\n                --exec $DAEMON\n        echo \"$NAME.\"\n        ;;\n  restart|force-reload)\n        echo -n \"Restarting $DESC: \"\n        start-stop-daemon --stop --quiet --pidfile \\\n                /usr/local/nginx/logs/$NAME.pid --exec $DAEMON\n        sleep 1\n        start-stop-daemon --start --quiet --pidfile \\\n                /usr/local/nginx/logs/$NAME.pid --exec $DAEMON -- $DAEMON_OPTS\n        echo \"$NAME.\"\n        ;;\n  reload)\n      echo -n \"Reloading $DESC configuration: \"\n      start-stop-daemon --stop --signal HUP --quiet --pidfile /usr/local/nginx/logs/$NAME.pid \\\n          --exec $DAEMON\n      echo \"$NAME.\"\n      ;;\n  *)\n        N=/etc/init.d/$NAME\n        echo \"Usage: $N {start|stop|restart|force-reload}\" >&2\n        exit 1\n        ;;\nesac\n\nexit 0\n```\n\nèµ‹äºˆæ‰§è¡Œ\n\n```\nsudo chmod +x /etc/init.d/nginx\n```\n\n### ä¸€äº›ç»éªŒ\n\nè¿™é‡Œæˆ‘åŸæ¥å·²ç»å®‰è£…äº† Nginxï¼Œä¸æƒ³ä¿®æ”¹åŸæ¥çš„é…ç½®ï¼Œåªæ˜¯å…ˆè°ƒè¯•ä¸‹æ–°çš„ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä½ å¯ä»¥å…ˆåœç”¨ç°æœ‰çš„ Nginxï¼Œç„¶åï¼š\n\n```bash\n# æ¢ä¸ªåˆ«çš„å‘½\nsudo vim /etc/init.d/nginxnew\n```\n\nå†è´´å…¥ä¸Šé¢çš„ä»£ç ï¼Œä¸‹ä¸€æ­¥çš„ç®¡ç†åŒæ ·æ›¿æ¢ä¸º `/etc/init.d/nginxnew`\n\n## ç®¡ç† Nginx\n\n```bash\n# for start use:\nsudo /etc/init.d/nginx start\n\n# for stop:\nsudo /etc/init.d/nginx stop\n\n# for restart:\nsudo /etc/init.d/nginx restart\n\n# for reload:\nsudo /etc/init.d/nginx reload\n```\n\n## å¯ç”¨ pagespeed ä¸æ£€æµ‹\n\n### æ£€æµ‹ Nginx å¯ç”¨å‰çŠ¶æ€\n\n```bash\ncurl -I -p http://localhost\n```\n\n```\nHTTP/1.1 200 OK\nServer: nginx/1.13.0\nDate: Fri, 12 May 2017 01:48:09 GMT\nContent-Type: text/html\nContent-Length: 612\nLast-Modified: Fri, 12 May 2017 01:38:37 GMT\nConnection: keep-alive\nETag: \"5915121d-264\"\nAccept-Ranges: bytes\n```\n\n### å¯ç”¨ pagespeed æ¨¡å—\n\n```\nsudo vim /usr/local/nginx/conf/nginx.conf\n```\n\nåœ¨ Nginx é…ç½®æ–‡ä»¶çš„æ¯ä¸ªéœ€è¦çš„ `server` å—ä¸­æ·»åŠ ï¼š\n\n```vim\npagespeed on;\n\n# Needs to exist and be writable by nginx.  Use tmpfs for best performance.\npagespeed FileCachePath /var/ngx_pagespeed_cache;\n\n# Ensure requests for pagespeed optimized resources go to the pagespeed handler\n# and no extraneous headers get set.\nlocation ~ \"\\.pagespeed\\.([a-z]\\.)?[a-z]{2}\\.[^.]{10}\\.[^.]+\" {\n  add_header \"\" \"\";\n}\nlocation ~ \"^/pagespeed_static/\" { }\nlocation ~ \"^/ngx_pagespeed_beacon$\" { }\n```\n\nSave and restart Nginx. reload å¯èƒ½ä¸ç”Ÿæ•ˆ\n\n### æ£€æµ‹ Nginx å¯ç”¨åçŠ¶æ€\n\n```bash\ncurl -I -p http://localhost\n```\n\n```\nHTTP/1.1 200 OK\nServer: nginx/1.13.0\nContent-Type: text/html\nConnection: keep-alive\nVary: Accept-Encoding\nDate: Fri, 12 May 2017 01:59:03 GMT\nX-Page-Speed: Powered By ngx_pagespeed\nCache-Control: max-age=0, no-cache\n```\n\nItâ€™s ALL. No need scripts any more.\n\n## pagespeed é…ç½®\n\n### é…ç½®å®ä¾‹\n\n[PageSpeed Documentation](https://modpagespeed.com/doc/) ç»™å‡ºçš„æ–‡æ¡£éå¸¸è¯¦ç»†\n\nFilters çš„é…ç½®æ˜¯æœ€é‡è¦çš„ã€‚PageSpeed æä¾›ä¸‰ä¸ªâ€œlevelâ€æ¥ç®€åŒ–é…ç½®ï¼šPassThroughï¼ŒCoreFilters å’Œ OptimizeForBandwidthã€‚CoreFilters é›†åˆåŒ…å«äº† PageSpeed å›¢é˜Ÿè®¤ä¸ºå¯¹å¤§å¤šæ•°ç½‘ç«™éƒ½æ˜¯å®‰å…¨çš„è¿‡æ»¤å™¨ã€‚OptimizeForBandwidth è®¾ç½®æä¾›äº†æ›´å¼ºçš„å®‰å…¨ä¿éšœï¼Œé€‚åˆä½œä¸ºä¸çŸ¥é“ PageSpeed çš„ç«™ç‚¹ä½¿ç”¨çš„é»˜è®¤è®¾ç½®ã€‚\n\nåŸºäº CoreFilters é…ç½®å°±å¯ä»¥ã€‚\n\n```\npagespeed on;\npagespeed FileCachePath /var/ngx_pagespeed_cache;\n\n# setting\npagespeed XHeaderValue \"Powered By ngx_pagespeed\";\npagespeed SupportNoScriptEnabled false;\n\n# filters\npagespeed RewriteLevel CoreFilters;\npagespeed EnableFilters remove_comments,collapse_whitespace;\n\n# admin\nlocation /ngx_pagespeed_statistics { allow 127.0.0.1; deny all;  }\nlocation /ngx_pagespeed_global_statistics { allow 127.0.0.1; deny all;  }\nlocation /ngx_pagespeed_message { allow 127.0.0.1; deny all;  }\nlocation /pagespeed_console { allow 127.0.0.1; deny all;  }\nlocation ~ ^/pagespeed_admin { allow 127.0.0.1; deny all;  }\nlocation ~ ^/pagespeed_global_admin { allow 127.0.0.1; deny all;  }\n\nlocation ~ \"\\.pagespeed\\.([a-z]\\.)?[a-z]{2}\\.[^.]{10}\\.[^.]+\" {\n\tadd_header \"\" \"\";\n}\nlocation ~ \"^/pagespeed_static/\" { }\nlocation ~ \"^/ngx_pagespeed_beacon$\" { }\n\npagespeed Statistics on;\npagespeed StatisticsLogging off;\npagespeed LogDir /var/log/pagespeed;\npagespeed AdminPath /pagespeed_admin;\n\n# Configuring the File Cache\npagespeed FileCacheSizeKb            1024000; # 1GB\npagespeed FileCacheCleanIntervalMs   3600000; # 1h\npagespeed FileCacheInodeLimit        500000;\n\n# Configuring the in-memory LRU Cache\npagespeed LRUCacheKbPerProcess     1024;\npagespeed LRUCacheByteLimit        16384;\n\npagespeed HttpCacheCompressionLevel 3;\npagespeed EnableCachePurge on;\n```\n\n### åˆ·æ–°ç¼“å­˜\n\n> [Flushing PageSpeed Server-Side Cache](https://modpagespeed.com/doc/system#flush_cache)\n\n```bash\ncurl 'http://localhost/pagespeed_admin/cache?purge=*'\n```\n\n## ä¸€äº›ç»éªŒ\n\n- é«˜æµé‡ç½‘ç«™è°¨æ…ä½¿ç”¨ï¼Œpagespeed å¯¹å†…å­˜å’Œ CPU çš„å ç”¨æå¤§\n- é€šè¯»ä¸€éå®˜æ–¹çš„ [FAQ](https://modpagespeed.com/doc/faq)ï¼Œå¾ˆå¤šæƒ…å†µé‡Œé¢éƒ½æœ‰è¯´æ˜\n- å¯¹äº Nginx çš„ HTTPS HTTP/2 å®‰è£…é…ç½®å¯ä»¥å‚çœ‹æˆ‘çš„å…¶ä»–æ–‡ç« \n\n## References\n\n> - [Levantado/ngx_pagespeed-install-script: Install nginx and pagespeed latest version on clean Ubuntu 14.04, 15.04, 16.04](https://github.com/Levantado/ngx_pagespeed-install-script)\n> - [ç»™åå°äººå‘˜çš„å‰ç«¯ä¼˜åŒ– &middot; Atom](https://fixatom.com/pagespeed-for-backend-developer/)\n> - [Nginx ngx_pagespeed nginx å‰ç«¯ä¼˜åŒ–æ¨¡å—ç¼–è¯‘ - Phodal | Phodal - A Growth Engineer](https://www.phodal.com/blog/nginx-with-ngx-pagespeed-module-improve-website-cache/)\n\n-- EOF --\n"},{"title":"Vagrant Getting Started Tutorial","url":"/2017/04/24/vagrant-getting-started-tutorial/","content":"\n2020-04-28 æ›´æ–°ï¼šæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n**2018-04-12 æ›´æ–°ï¼š** å¼€å‘ç¯å¢ƒæˆ–æ˜¯ç”Ÿäº§ç¯å¢ƒæ¨è Dockerã€‚\n\n- [My MacBook](/2019/05/20/my-macbook/)\n- [My Dock](https://github.com/imzyf/my-dock)\n\n<!-- more -->\n\n---\n\nVagrant å…¥é—¨æ•™ç¨‹ã€‚Vagrant å®‰è£…ã€é…ç½®ç®¡ç†ã€æ‰“åŒ…åˆ†å‘\n\n## Vagrant ä»‹ç»\n\nVagrant å¯ä»¥ä¸ºä½ æä¾›å¯é…ç½®ã€å¯å†ç”Ÿã€ä¾¿æºçš„å·¥ä½œç¯å¢ƒï¼Œå®ƒä¸»è¦æ˜¯ä¸€ä¸ªä¸­é—´å±‚æŠ€æœ¯ï¼Œå®ƒçš„ä¸‹å±‚æ˜¯ VirtualBoxï¼ŒVMwareï¼ŒAWS æˆ–è€…å…¶ä»– providerï¼Œå®ƒçš„ä¸Šå±‚æ˜¯ provisioning å·¥å…·ï¼Œæ¯”å¦‚ shell scriptsï¼ŒChef or Puppet ç­‰å¯ä»¥è‡ªåŠ¨åŒ–å®‰è£…å’Œé…ç½®è½¯ä»¶çš„å·¥å…·ã€‚\n\nç®€å•è¯´ï¼šVagrant æ˜¯è™šæ‹Ÿæœºç®¡ç†å·¥å…·ã€‚\n\nå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼ŒVagrant å¯ä»¥å¸®ä½ ç»Ÿä¸€å›¢é˜Ÿæˆå‘˜çš„å¼€å‘ç¯å¢ƒã€‚å¦‚æœä½ æˆ–è€…ä½ çš„ä¼™ä¼´åˆ›å»ºäº†ä¸€ä¸ª Vagrantfileï¼Œé‚£ä¹ˆä½ åªéœ€è¦æ‰§è¡Œ vagrant up å°±è¡Œäº†ï¼Œæ‰€æœ‰çš„è½¯ä»¶éƒ½ä¼šç»Ÿä¸€å®‰è£…å¹¶ä¸”é…ç½®å¥½ã€‚åŒæ—¶è¿˜é¿å…ä»¤äººçƒ¦èºçš„ â€œåœ¨æˆ‘çš„æœºå™¨ä¸Šæ˜¯å¯ä»¥çš„â€ é—®é¢˜ã€‚\n\nå®è·µç¯å¢ƒï¼š\n\n- IBM X200 laptops\n- Ubuntu 16.04\n\n## Vagrant æ–‡æ¡£\n\n- [Vagrant Documentation](https://www.vagrantup.com/docs/index.html)\n\n## å®‰è£… Virtual Box å’Œ Vagrant\n\n- ä¸‹è½½ [é“¾æ¥](https://www.virtualbox.org/wiki/Downloads) å¹¶å®‰è£… Virtual Box\n- ä¸‹è½½ [é“¾æ¥](https://www.vagrantup.com/downloads.html) å¹¶å®‰è£… Vagrant\n\n## Enable Virtualization Technolog\n\nåœ¨åˆšå¯åŠ¨ç”µè„‘æ—¶ï¼ŒæŒ‰ F1 è¿›å…¥ BIOSï¼ŒConfig->CPU->Intel Virtualization Technology ä¸­ `Intel VT-d Feature` æ”¹æˆ `Enabled`ï¼Œä¿å­˜é€€å‡ºã€‚\n\n**æ³¨æ„ï¼š** è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œä¿®æ”¹åéœ€è¦ **å…³æœºå†å¯åŠ¨**ï¼Œç›´æ¥é‡å¯ç”µè„‘ï¼Œé…ç½®ä¸ç”Ÿæ•ˆã€‚\n\n## æ–°å»ºè™šæ‹Ÿæœº\n\n### ä¸‹è½½ Ubuntu box\n\nåœ¨ [Discover Vagrant Boxes](https://atlas.hashicorp.com/boxes/search?utf8=%E2%9C%93&sort=&provider=&q=ubuntu) æŸ¥æ‰¾ Ubuntu Server 14.04 64 box å®‰è£…å‘½ä»¤\n\n```bash\nvagrant init ubuntu/trusty64; vagrant up --provider virtualbox\n```\n\nä¸‹è½½é€Ÿåº¦ç¼“æ…¢ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­çœ‹åˆ° box é“¾æ¥ï¼Œå»ºè®®ç›´æ¥åœ¨æ¸¸è§ˆå™¨ä¸­ä¸‹è½½\n\n```bash\nhttps://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20170405.0.0/providers/virtualbox.box\n```\n\n### æ·»åŠ é•œåƒ\n\n```bash\nvagrant box add ubuntu1404 ubuntu1404.box\n```\n\n### åˆå§‹åŒ–è™šæ‹Ÿæœºé…ç½®\n\n```bash\nvagrant init ubuntu1404\n```\n\nå¯ä»¥åœ¨ Vagrantfile ä¸­å¢åŠ ï¼š\n\n```bash\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = \"1024\"\n    vb.cpus = 2\n  end\n```\n\n### å¯åŠ¨è™šæ‹Ÿæœº\n\n```bash\nvagrant up\n```\n\næ²¡æœ‰çš„è¯åˆ™æ–°å»ºã€‚è¿™é‡Œä¹Ÿå¯åœ¨ VM VirtualBox ä¸­å¯ä»¥çœ‹åˆ°æ–°çš„è™šæ‹Ÿæœºã€‚\n\n## é…ç½®è™šæ‹Ÿæœºç¯å¢ƒ\n\n### SSH ç™»é™†è™šæ‹Ÿæœº\n\n```bash\nvagrant ssh\n```\n\n### æ›¿æ¢å›½å†…æº\n\nå¤‡ä»½æ—§æºï¼š\n\n```bash\nsudo cp /etc/apt/sources.list /etc/apt/sources.list.bak\n```\n\nä¿®æ”¹ä½¿ç”¨ aliyun æºï¼š\n\n```bash\nsudo vim /etc/apt/sources.list\n```\n\næ›¿æ¢ä¸ºï¼š\n\n```bash\ndeb http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse\n```\n\næ›´æ–°æºï¼š\n\n```bash\nsudo apt-get update\n```\n\n### LNMP\n\n#### Ngnix\n\n```bash\n# search\napt-cache search nginx\n# install\nsudo apt-get install nginx\n# show version\nnginx -v\n#nginx version: nginx/1.4.6 (Ubuntu)\n\n# test nginx\ncurl -I 'http://127.0.0.1'\n```\n\n#### MySQL\n\n```bash\nsudo apt-get install mysql-server-5.6\n```\n\n#### PHP\n\n```bash\nsudo apt-get install php5-cli\nphp -v\n#PHP 5.5.9-1ubuntu4.21 (cli)\n# install extend\nsudo apt-get install php5-mcrypt php5-mysql php5-gd\n# install support nginx fastcgi\nsudo apt-get install php5-cgi php5-fpm -y\n```\n\n## Vagrant é«˜çº§\n\n### ç«¯å£è½¬å‘\n\n#### ä½¿ç”¨ VirtualBox è®¾ç½®\n\né¦–å…ˆæŒ‚èµ·è™šæ‹Ÿæœºï¼š\n\n```bash\nvagrant suspend\n```\n\nåœ¨ VirtualBox é€‰æ‹© Settings->Network->Advenced->Port Forwarding->adds\n\n- `Host IP` å®¿ä¸»æœºç«¯å£\n- `Guest Port` è™šæ‹Ÿæœºç«¯å£\n\né‡å¯åå¤±æ•ˆï¼Œå› ä¸º Vagrant ä¼šå»è¯»è‡ªå·±çš„é…ç½®æ–‡ä»¶\n\n#### ä½¿ç”¨ Vagrant é…ç½®\n\n> [Forwarded Ports - Networking](https://www.vagrantup.com/docs/networking/forwarded_ports.html)\n\nThis will allow accessing port 80 on the guest via port 8080 on the host.\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  config.vm.network \"forwarded_port\", guest: 80, host: 8080\nend\n```\n\n```bash\nvagrant reload\n```\n\né‡å¯è™šæ‹Ÿæœºã€‚\n\n### ç½‘ç»œé…ç½®\n\n#### Private Networks\n\n> [Private Networks - Networking](https://www.vagrantup.com/docs/networking/private_network.html)\n\nStatic IP\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  config.vm.network \"private_network\", ip: \"192.168.50.4\"\nend\n```\n\nHost è®¿é—® Guest machine å°†ä¸éœ€è¦ç«¯å£è½¬å‘\n\n#### Public Networks\n\n> [Public Networks - Networking](https://www.vagrantup.com/docs/networking/public_network.html)\n\n```bash\nconfig.vm.network \"public_network\", ip: \"192.168.0.17\"\n```\n\nè¦å’Œ Host machine åœ¨åŒä¸€ç½‘æ®µï¼ŒåŒä¸€è·¯ç”±ä¸‹çš„è®¡ç®—æœºä¹Ÿå¯è®¿é—®\n\n### Synced Folders å…±äº«ç›®å½•\n\n> [Basic Usage - Synced Folders](https://www.vagrantup.com/docs/synced-folders/basic_usage.html)\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  # other config here\n\n  config.vm.synced_folder \"src/\", \"/srv/website\"\nend\n```\n\nEnabling NFS Synced Folders, To enable NFS, just add the `type: \"nfs\"` flag onto your synced folder:\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  config.vm.synced_folder \".\", \"/vagrant\", type: \"nfs\"\nend\n```\n\nä½¿ç”¨ NFS éœ€è¦é…ç½® private networkï¼Œå¦‚æœé‡åˆ°ï¼š\n\n```bash\nIt appears your machine doesn't support NFS, or there is not an\nadapter to enable NFS on this machine for Vagrant. Please verify\nthat `nfsd` is installed on your machine, and try again.\nIt appears your machine doesn't support NFS\n```\n\ntry toï¼š\n\n```bash\nsudo apt-get install nfs-common nfs-kernel-server\n```\n\nCaveatsï¼š\n\n> [Synced Folders VirtualBox](https://www.vagrantup.com/docs/synced-folders/virtualbox.html)\n\nThere is a VirtualBox bug related to sendfile which can result in corrupted or non-updating files. You should deactivate sendfile in any web servers you may be running.\n\nIn Nginx:\n\n```bash\nsendfile off;\n```\n\n### Provider VirtualBox Configuration\n\n> [Provider VirtualBox Configuration](https://www.vagrantup.com/docs/virtualbox/configuration.html)\n\n#### Virtual Machine Name\n\n```bash\nconfig.vm.provider \"virtualbox\" do |vb|\n   vb.name = \"my_vm\"\nend\n```\n\n#### VBoxManage Customizations\n\n```bash\nconfig.vm.provider \"virtualbox\" do |vb|\n  vb.memory = 1024\n  vb.cpus = 2\nend\n```\n\n#### Virtual hostname\n\n```\nconfig.vm.hostname = \"mooc\"\n```\n\n### Overwrite host locale in ssh session\n\n```ruby\nENV[\"LC_ALL\"] = \"en_US.UTF-8\"\n\nVagrant.configure(\"2\") do |config|\n  # ...\nend\n```\n\n## Vagrant æ‰“åŒ…åˆ†å‘\n\nå…³é—­è™šæ‹Ÿæœºï¼š\n\n```bash\nvagrant halt\n```\n\næ‰“åŒ…æ—¶æ³¨æ„ï¼šVagrantfile ä¸­å›ºå®šçš„ IPï¼Œå¯ä»¥å…ˆæ³¨é‡Šï¼›æ‰“åŒ…ï¼š\n\n```bash\nvagrant package --output mooc.box\n```\n\nå¯åŠ¨ boxï¼š\n\n```bash\nvagrant box add mooc mooc.box\nvagrant init mooc\nvagrant up\n```\n\n### é€šè¿‡ Vagrantfile å‡çº§\n\n```bash\nconfig.vm.provision \"shell\", inline: <<-SHELL\n   apt-get update\n   apt-get install -y redis-server\nSHELL\n```\n\n```bash\nvagrant reload --provision\n```\n\n## References\n\n- [mooc/vagrant at master Â· apanly/mooc](https://github.com/apanly/mooc/tree/master/vagrant)\n- [vagrant æ‰“é€ è·¨å¹³å°å¯ç§»åŠ¨çš„å¼€å‘ç¯å¢ƒ](http://www.imooc.com/learn/805)\n- [Vagrant ä»‹ç»](http://weizhifeng.net/learn-vagrant-01.html)\n"},{"title":"åŒºåˆ† Nginx ä¸­ fastcgi_params fastcgi.conf snippets/fastcgi-php.conf","url":"/2017/04/22/fastcgi-params-fastcgi-conf-snippets-fastcgi-php-conf/","content":"\nNginx æœ‰ä¸¤ä»½ fastcgi é…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ `fastcgi_params` å’Œ `fastcgi.conf`ï¼Œå…¶åŒºåˆ«åªæœ‰ä¸€ç‚¹ç‚¹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç”±äº package managersï¼Œä»–ä»¬ä»ç„¶å¼•èµ·æ–°ç”¨æˆ·çš„æ··æ·†ã€‚\n\nåœ¨è‡ªå·±ç³»ç»Ÿä¸­è¿˜æœ‰ä»½ `snippets/fastcgi-php.conf`ï¼Œè¿™ä¸ªåˆæ˜¯å•¥ï¼Ÿ\n\n## fastcgi_params vs fastcgi.conf\n\nå®ƒä»¬æ²¡æœ‰å¤ªå¤§çš„å·®å¼‚ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ `fastcgi.conf` æ¯” `fastcgi_params` å¤šäº†ä¸€è¡Œ `SCRIPT_FILENAME` çš„å®šä¹‰\n\n```conf\nfastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n```\n\næ³¨æ„ï¼š`$document_root` å’Œ `$fastcgi_script_name` ä¹‹é—´æ²¡æœ‰ `/`ã€‚\n\nåŸæœ¬ Nginx åªæœ‰ `fastcgi_params`ï¼Œåæ¥å‘ç°å¾ˆå¤šäººåœ¨å®šä¹‰ `SCRIPT_FILENAME` æ—¶ä½¿ç”¨äº†ç¡¬ç¼–ç çš„æ–¹å¼ï¼Œäºæ˜¯ä¸ºäº†è§„èŒƒç”¨æ³•ä¾¿å¼•å…¥äº† `fastcgi.conf`\n\nä¸è¿‡è¿™æ ·çš„è¯å°±äº§ç”Ÿä¸€ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆä¸€å®šè¦å¼•å…¥ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—§çš„é…ç½®æ–‡ä»¶ï¼Ÿ\n\nè¿™æ˜¯å› ä¸º`fastcgi_param` æŒ‡ä»¤æ˜¯æ•°ç»„å‹çš„ï¼Œå’Œæ™®é€šæŒ‡ä»¤ç›¸åŒçš„æ˜¯ï¼šå†…å±‚æ›¿æ¢å¤–å±‚ï¼›å’Œæ™®é€šæŒ‡ä»¤ä¸åŒçš„æ˜¯ï¼šå½“åœ¨åŒçº§å¤šæ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯æ–°å¢è€Œä¸æ˜¯æ›¿æ¢ã€‚\n\næ¢å¥è¯è¯´ï¼Œå¦‚æœåœ¨åŒçº§å®šä¹‰ä¸¤æ¬¡ `SCRIPT_FILENAME`ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½ä¼šè¢«å‘é€åˆ°åç«¯ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…æ­¤ç±»æƒ…å†µï¼Œä¾¿å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ã€‚\n\n<!--more -->\n\n### å®ä¾‹\n\n```conf\nserver {\n    listen 80;\n    server_name foo.com;\n\n    root /path;\n    index index.html index.htm index.php;\n\n    location / {\n        try_files $uri $uri/ /index.php$is_args$args;\n    }\n\n    location ~ \\.php$ {\n        try_files $uri =404;\n\n        include fastcgi.conf;\n        fastcgi_pass 127.0.0.1:9000;\n    }\n}\n```\n\n## snippets/fastcgi-php.conf\n\n`/etc/nginx/snippets`: This directory contains configuration fragments that can be included elsewhere in the Nginx configuration. Potentially repeatable configuration segments are good candidates for refactoring into snippets.\n\n`fastcgi-php.conf`:\n\n```conf\n# regex to split $uri to $fastcgi_script_name and $fastcgi_path\nfastcgi_split_path_info ^(.+\\.php)(/.+)$;\n\n# Check that the PHP script exists before passing it\ntry_files $fastcgi_script_name =404;\n\n# Bypass the fact that try_files resets $fastcgi_path_info\n# see: http://trac.nginx.org/nginx/ticket/321\nset $path_info $fastcgi_path_info;\nfastcgi_param PATH_INFO $path_info;\n\nfastcgi_index index.php;\ninclude fastcgi.conf;\n```\n\nä» `fastcgi-php.conf` çš„å†…å®¹å¯ä»¥çœ‹å‡ºï¼Œå®ƒå¸®æˆ‘ä»¬å°è£…äº†ä¸€äº›å…¬å…±ä»£ç \n\n### å®ä¾‹\n\n```conf\nserver {\n  ...\n    location ~ \\.php$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass 127.0.0.1:9000;\n    }\n}\n```\n\n## è®©æˆ‘æŠŠè¯è¯´å®Œ\n\n### PHP Nginx Unix sock åˆ‡æ¢ TCP/IP\n\n```conf\nsudo vim /etc/php5/fpm/pool.d/www.conf\n```\n\n```conf\n# å–æ¶ˆæ³¨é‡Š\nlisten.backlog = 65536\n# æŸ¥æ‰¾\nlisten = /var/run/php5-fpm.sock\n# ä¿®æ”¹ä¸º\nlisten = 127.0.0.1:9000\n```\n\nand then, edit Nginx configuration file\n\n```conf\nfastcgi_pass unix:/var/run/php5-fpm.sock;\n# ä¿®æ”¹ä¸º\nfastcgi_pass 127.0.0.1:9000;\n```\n\n```conf\nsudo service php5-fpm restart\nsudo service nginx restart\n```\n\n## References\n\n- [å¦‚ä½•æ­£ç¡®é…ç½® Nginx+PHP | ç«ä¸ç¬”è®°](https://huoding.com/2013/10/23/290)\n- [fastcgi_params Versus fastcgi.conf - Nginx Config History](http://blog.martinfjordvald.com/2013/04/nginx-config-history-fastcgi_params-versus-fastcgi-conf/)\n- [How To Install Nginx on Ubuntu 16.04 | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-16-04)\n- [nginx-build/fastcgi-php.conf at master Â· EasyEngine/nginx-build](https://github.com/EasyEngine/nginx-build/blob/master/nginx/debian/conf/snippets/fastcgi-php.conf)\n","tags":["php","nginx"]},{"title":"åŒºåˆ† CGI FastCGI PHP-CGI PHP-FPM","url":"/2017/04/21/cgi-fastcgi-phpcgi-php-fpm/","content":"\nCGI FastCGI PHP-CGI PHP-FPM ä¸€ç›´åŒºåˆ†ä¸æ¸…ï¼ŒGoogle åæ€»ç»“ä¸‹\n\n## CGI\n\nCGI: Common Gateway Interface. HTTP æœåŠ¡å™¨ä¸ä½ çš„æˆ–å…¶å®ƒæœºå™¨ä¸Šçš„ç¨‹åºè¿›è¡Œâ€œäº¤è°ˆâ€çš„ä¸€ç§åè®®ï¼Œå…¶ç¨‹åºé¡»è¿è¡Œåœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šã€‚\n\nweb serverï¼ˆæ¯”å¦‚è¯´ Nginxï¼‰åªæ˜¯å†…å®¹çš„åˆ†å‘è€…ã€‚\n\n- å¦‚æœè¯·æ±‚ /index.htmlï¼Œé‚£ä¹ˆ web server ä¼šå»æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œè¿™é‡Œåˆ†å‘çš„æ˜¯é™æ€æ•°æ®ã€‚\n- å¦‚æœç°åœ¨è¯·æ±‚çš„æ˜¯ /index.phpï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ï¼Œnginx çŸ¥é“è¿™ä¸ªä¸æ˜¯é™æ€æ–‡ä»¶ï¼Œéœ€è¦å»æ‰¾ PHP è§£æå™¨æ¥å¤„ç†ï¼Œé‚£ä¹ˆä»–ä¼šæŠŠè¿™ä¸ªè¯·æ±‚ç®€å•å¤„ç†åäº¤ç»™ PHP è§£æå™¨ã€‚Nginx ä¼šä¼ å“ªäº›æ•°æ®ç»™ PHP è§£æå™¨å‘¢ï¼Ÿurlã€æŸ¥è¯¢å­—ç¬¦ä¸²ã€POST æ•°æ®ã€HTTP header ç­‰ç­‰ï¼ŒCGI å°±æ˜¯è§„å®šè¦ä¼ å“ªäº›æ•°æ®ã€ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼ä¼ é€’ç»™åæ–¹å¤„ç†è¿™ä¸ªè¯·æ±‚çš„åè®®ã€‚\n\n<!--more -->\n\n## FastCGI\n\nFastCGI æ˜¯ CGI çš„å‡çº§ç‰ˆï¼Œä¸€ç§è¯­è¨€æ— å…³çš„åè®®ï¼Œç”¨æ¥æ²Ÿé€šç¨‹åºï¼ˆå¦‚ PHP Python Javaï¼‰å’Œ Web æœåŠ¡å™¨ï¼ˆApache2 Nginxï¼‰ï¼Œç†è®ºä¸Šä»»ä½•è¯­è¨€ç¼–å†™çš„ç¨‹åºéƒ½å¯ä»¥é€šè¿‡ FastCGI æ¥æä¾› Web æœåŠ¡ã€‚\n\nFastCGI çš„ç‰¹ç‚¹æ˜¯ä¼šåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ä¾æ¬¡å®Œæˆå¤šä¸ªè¯·æ±‚ï¼Œä»¥è¾¾åˆ°æé«˜æ•ˆç‡çš„ç›®çš„ï¼Œå¤šæ•° FastCGI å®ç°éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹æ± ã€‚\n\né‚£ä¹ˆ CGI ç¨‹åºçš„æ€§èƒ½é—®é¢˜åœ¨å“ªå‘¢ï¼Ÿâ€œPHP è§£æå™¨ä¼šè§£æ php.ini æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œç¯å¢ƒâ€ï¼Œå°±æ˜¯è¿™é‡Œäº†ã€‚æ ‡å‡†çš„ CGI å¯¹æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œæ‰€ä»¥å¤„ç†æ¯ä¸ªè¯·æ±‚çš„æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚\n\né‚£ä¹ˆ FastCGI æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿé¦–å…ˆï¼ŒFastCGI ä¼šå…ˆå¯ä¸€ä¸ª masterï¼Œè§£æé…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œç¯å¢ƒï¼Œç„¶åå†å¯åŠ¨å¤šä¸ª workerã€‚å½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œmaster ä¼šä¼ é€’ç»™ä¸€ä¸ª workerï¼Œç„¶åç«‹å³å¯ä»¥æ¥å—ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤çš„åŠ³åŠ¨ï¼Œæ•ˆç‡è‡ªç„¶æ˜¯é«˜ã€‚è€Œä¸”å½“ worker ä¸å¤Ÿç”¨æ—¶ï¼Œmaster å¯ä»¥æ ¹æ®é…ç½®é¢„å…ˆå¯åŠ¨å‡ ä¸ª worker ç­‰ç€ï¼›å½“ç„¶ç©ºé—² worker å¤ªå¤šæ—¶ï¼Œä¹Ÿä¼šåœæ‰ä¸€äº›ï¼Œè¿™æ ·å°±æé«˜äº†æ€§èƒ½ï¼Œä¹ŸèŠ‚çº¦äº†èµ„æºã€‚è¿™å°±æ˜¯ FastCGI å¯¹è¿›ç¨‹çš„ç®¡ç†ã€‚\n\n## PHP-CGI\n\nPHP-CGI åªæ˜¯ä¸ª CGI ç¨‹åºï¼Œä»–è‡ªå·±æœ¬èº«åªèƒ½è§£æè¯·æ±‚ï¼Œè¿”å›ç»“æœï¼Œä¸ä¼šè¿›ç¨‹ç®¡ç†ã€‚\n\nPHP-CGI çš„ä¸è¶³ï¼šPHP-CGI å˜æ›´ php.ini é…ç½®åéœ€é‡å¯ PHP-CGI æ‰èƒ½è®©æ–°çš„ php-ini ç”Ÿæ•ˆï¼Œä¸å¯ä»¥å¹³æ»‘é‡å¯ã€‚ç›´æ¥æ€æ­» PHP-CGI è¿›ç¨‹ï¼ŒPHP å°±ä¸èƒ½è¿è¡Œäº†ã€‚ï¼ˆPHP-FPM å’Œ Spawn-FCGI å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šå¹³æ»‘ä»æ–°ç”Ÿæˆæ–°çš„å­è¿›ç¨‹ã€‚ï¼‰\n\n## PHP-FPM\n\nPHP çš„è§£é‡Šå™¨æ˜¯ php-cgiï¼Œå®ƒåªæ˜¯ä¸ª CGI ç¨‹åºï¼Œåªèƒ½è§£æè¯·æ±‚ï¼Œè¿”å›ç»“æœï¼Œä¸ä¼šè¿›ç¨‹ç®¡ç†ã€‚æ‰€ä»¥å°±å‡ºç°äº†ä¸€äº›èƒ½å¤Ÿè°ƒåº¦ PHP-CGI è¿›ç¨‹çš„ç¨‹åºã€‚\n\nPHP-FPM æ˜¯ PHP é’ˆå¯¹ FastCGI åè®®çš„å…·ä½“å®ç°ï¼Œä¹Ÿæ˜¯ PHP åœ¨å¤šç§æœåŠ¡å™¨ç«¯åº”ç”¨ç¼–ç¨‹ç«¯å£ï¼ˆSAPIï¼šcgiã€fast-cgiã€cliã€isapiã€apacheï¼‰é‡Œä½¿ç”¨æœ€æ™®éã€æ€§èƒ½æœ€ä½³çš„ä¸€æ¬¾è¿›ç¨‹ç®¡ç†å™¨ã€‚\n\nPHP 5.3.3 å·²ç»é›†æˆ PHP-FPM äº†ï¼Œä¸å†æ˜¯ç¬¬ä¸‰æ–¹çš„åŒ…äº†ã€‚PHP-FPM æä¾›äº†æ›´å¥½çš„ PHP è¿›ç¨‹ç®¡ç†æ–¹å¼ï¼Œå¯ä»¥æœ‰æ•ˆæ§åˆ¶å†…å­˜å’Œè¿›ç¨‹ã€å¯ä»¥å¹³æ»‘é‡è½½ PHP é…ç½®ï¼Œè¢« PHP å®˜æ–¹æ”¶å½•äº†ã€‚\n\n## å°æ•…äº‹\n\nä½ ï¼ˆPHPï¼‰å»å’Œçˆ±æ–¯åŸºæ‘©äººï¼ˆweb æœåŠ¡å™¨ï¼Œå¦‚ Apacheã€Nginxï¼‰è°ˆç”Ÿæ„ã€‚ä½ è¯´ä¸­æ–‡ï¼ˆPHP ä»£ç ï¼‰ï¼Œä»–è¯´çˆ±æ–¯åŸºæ‘©è¯­ï¼ˆC ä»£ç ï¼‰ï¼Œäº’ç›¸å¬ä¸æ‡‚ï¼Œæ€ä¹ˆåŠï¼Ÿé‚£å°±éƒ½æŠŠå„è‡ªè¯´çš„è¯è½¬æ¢æˆè‹±è¯­ï¼ˆFastCGI åè®®ï¼‰å§ã€‚\n\næ€ä¹ˆè½¬æ¢å‘¢ï¼Ÿä½ å°±è¦ä½¿ç”¨ä¸€ä¸ªç¿»è¯‘æœºï¼ˆPHP-FPMï¼‰ï¼ˆå½“ç„¶å¯¹æ–¹ä¹Ÿæœ‰ä¸€ä¸ªç¿»è¯‘æœºï¼Œé‚£ä¸ªæ˜¯ä»–è‡ªå¸¦çš„ï¼‰\n\næˆ‘ä»¬è¿™ä¸ªç¿»è¯‘æœºæ˜¯æœ€æ–°å‹çš„ï¼Œè€å¼çš„é‚£ä¸ªï¼ˆPHP-CGIï¼‰è¢«æ·˜æ±°äº†ã€‚\n\n## è®©æˆ‘æŠŠè¯è¯´å®Œ\n\nFastCGI æ˜¯ Nginx å’Œ PHP ä¹‹é—´çš„ä¸€ä¸ªé€šä¿¡æ¥å£ï¼Œè¯¥æ¥å£å®é™…å¤„ç†è¿‡ç¨‹é€šè¿‡å¯åŠ¨ PHP-FPM è¿›ç¨‹æ¥è§£æ PHP è„šæœ¬ï¼Œå³ PHP-FPM ç›¸å½“äºä¸€ä¸ªåŠ¨æ€åº”ç”¨æœåŠ¡å™¨ï¼Œä»è€Œå®ç° Nginx åŠ¨æ€è§£æ PHPã€‚\n\nå› æ­¤ï¼Œå¦‚æœ Nginx æœåŠ¡å™¨éœ€è¦æ”¯æŒ PHP è§£æï¼Œéœ€è¦åœ¨ nginx.conf ä¸­å¢åŠ  PHP çš„é…ç½®ï¼šå°† PHP è„šæœ¬è½¬å‘åˆ° FastCGI è¿›ç¨‹ç›‘å¬çš„ IP åœ°å€å’Œç«¯å£ï¼ˆphp-fpm.conf ä¸­æŒ‡å®šï¼‰ã€‚\n\nåŒæ—¶ï¼ŒPHP å®‰è£…çš„æ—¶å€™ï¼Œéœ€è¦å¼€å¯æ”¯æŒ FastCGI é€‰é¡¹ï¼Œå¹¶ä¸”ç¼–è¯‘å®‰è£… PHP-FPM è¡¥ä¸/æ‰©å±•ï¼ŒåŒæ—¶ï¼Œéœ€è¦å¯åŠ¨ PHP-FPM è¿›ç¨‹ï¼Œæ‰å¯ä»¥è§£æ Nginx é€šè¿‡ FastCGI è½¬å‘è¿‡æ¥çš„ PHP è„šæœ¬\n\n## References\n\n- [æä¸æ¸… FastCgi ä¸ PHP-fpm ä¹‹é—´æ˜¯ä¸ªä»€ä¹ˆæ ·çš„å…³ç³»](https://segmentfault.com/q/1010000000256516)\n- [ä»€ä¹ˆæ˜¯ CGIã€FastCGIã€PHP-CGIã€PHP-FPMã€Spawn-FCGIï¼Ÿ](http://www.mike.org.cn/articles/what-is-cgi-fastcgi-php-fpm-spawn-fcgi/)\n- [nginxã€fastCGIã€php-fpm å…³ç³»æ¢³ç† 842864681 æ–°æµªåšå®¢](http://blog.sina.com.cn/s/blog_6df9fbe30102v57y.html)\n- [æ¦‚å¿µäº†è§£ï¼šCGIï¼ŒFastCGIï¼ŒPHP-CGI ä¸ PHP-FPM](http://www.nowamagic.net/librarys/veda/detail/1319)\n","tags":["php"]},{"title":"MySQL 5.6 5.7 ç»„å†…æ’åºçš„åŒºåˆ«","url":"/2017/04/20/mysql-group-by-and-order-by-difference-between-56-57/","content":"\nMySQL 5.7 å¯¹æ¯” 5.6 æœ‰å¾ˆå¤šçš„å˜åŒ–ã€‚ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼šæŒ‰æ¡ä»¶åˆ†ç»„åï¼Œå–å‡ºæ¯ç»„ä¸­æŸå­—æ®µæœ€å¤§å€¼çš„é‚£æ¡è®°å½•ã€‚å…¶å®å°±æ˜¯ç»„å†…æ’åºçš„é—®é¢˜ï¼Œæˆ‘çš„åšæ³•æ˜¯ï¼šå­æŸ¥è¯¢å…ˆè¿›è¡Œå€’åºæ’åºï¼Œå¤–å±‚æŸ¥è¯¢åˆ†ç»„ã€‚\n\n## ç¤ºä¾‹\n\n```md\n+----+----+-------+\n| id | no | name |\n+----+----+-------+\n| 5 | 5 | Mike |\n| 4 | 4 | Herry |\n| 3 | 3 | wyett |\n| 2 | 2 | John |\n| 7 | 2 | John |\n| 1 | 1 | Mike |\n| 6 | 1 | John |\n| 8 | 1 | Mike |\n| 9 | 1 | Mike |\n+----+----+-------+\n```\n\nè¦æ±‚ï¼šå–å‡ºæ¯äººï¼ˆæŒ‰ nameï¼‰ï¼Œæœ€å¤§ no çš„è®°å½•ã€‚\n\n```sql\nselect * from (\n    select id,no,name from testorder order by no desc\n)a group by a.name;\n```\n\n```md\n+----+----+-------+\n| id | no | name |\n+----+----+-------+\n| 4 | 4 | Herry |\n| 2 | 2 | John |\n| 5 | 5 | Mike |\n| 3 | 3 | wyett |\n+----+----+-------+\n```\n\nä½†æ˜¯åœ¨ 5.7 ä¸­ï¼Œé¦–å…ˆéœ€è¦å…³é—­ `ql_mode = ONLY_FULL_GROUP_BY`ï¼›ç›¸åŒçš„ `name` å€¼ï¼Œè¿”å›åˆ™æ˜¯å–äº† **æœ€æ—©å†™å…¥çš„æ•°æ®è¡Œ** ï¼Œ**å¿½ç•¥äº† `order by no desc`ï¼ŒæŒ‰ç…§æ•°æ®çš„é€»è¾‘å­˜å‚¨é¡ºåºæ¥è¿”å›**\n\n```md\n+----+----+-------+\n| id | no | name |\n+----+----+-------+\n| 4 | 4 | Herry |\n| 2 | 2 | John |\n| 1 | 1 | Mike |\n| 3 | 3 | wyett |\n+----+----+-------+\n```\n\nç­‰ä»·äº\n\n```sql\nselect id,no,name from testorder group by name\n```\n\n<!--more -->\n\nA query such as\n\n```sql\nSELECT field1, field2 FROM ( SELECT field1, field2 FROM table1 ORDER BY field2 ) alias\n```\n\nreturns a result set that is not necessarily ordered by field2. This is not a bug.\nA \"table\" (and subquery in the FROM clause too) is - according to the SQL standard - an unordered set of rows.\nRows in a table (or in a subquery in the FROM clause) do not come in any specific order.\n\nå¯ä»¥æ€»ç»“ä¸ºï¼š\n\n- åœ¨ FROM åçš„ subquery ä¸­çš„ ORDER BY ä¼šè¢«å¿½ç•¥\n- GROUP BY cloumn è¿”å›çš„è¡Œæ˜¯æ— åºçš„\n\n## è§£å†³æ–¹æ¡ˆ\n\n```sql\nselect a.id,a.no,a.name\n    from testorder a inner join (\n        select max(no) no,name from testorder group by name\n    ) b on a.no = b.no and a.name = b.name\ngroup by name,no\n```\n\nå…¶ä»–æ–¹æ¡ˆï¼š\n\n1. å¯¹äºä¸ç¬¦åˆ ONLY_FULL_GROUP_BY é™åˆ¶çš„å­—æ®µï¼Œæ·»åŠ  unique ç´¢å¼•ã€‚\n2. ä½¿ç”¨ ANY_VALUE()ï¼Œè®© MySQL è·³è¿‡ ONLY_FULL_GROUP_BY æ£€æµ‹ã€‚\n\n## å°ç»“\n\n> [MySQL 5.6 Handling of GROUP BY](https://dev.mysql.com/doc/refman/5.6/en/group-by-handling.html)\n\nIn standard SQL, a query that includes a GROUP BY clause cannot refer to nonaggregated columns in the select list that are not named in the GROUP BY clause.\n\nåœ¨æ ‡å‡† SQL ä¸­ï¼ŒåŒ…å« GROUP BY å­å¥çš„æŸ¥è¯¢ **ä¸èƒ½å¼•ç”¨** select åˆ—è¡¨ä¸­æœªåœ¨ GROUP BY å­å¥ä¸­å‘½åçš„åˆ—ã€‚\n\nMySQL extends the standard SQL use of GROUP BY so that the select list can refer to nonaggregated columns not named in the GROUP BY clause. This means that the preceding query is legal in MySQL.\n\nMySQL æ‰©å±•äº† GROUP BY çš„æ ‡å‡† SQL ä½¿ç”¨ï¼Œä»¥ä¾¿é€‰æ‹©åˆ—è¡¨å¯ä»¥å¼•ç”¨ GROUP BY å­å¥ä¸­æœªå‘½åçš„éé›†åˆåˆ—ã€‚è¿™æ„å‘³ç€å‰é¢çš„æŸ¥è¯¢åœ¨ MySQL ä¸­æ˜¯åˆæ³•çš„ã€‚\n\nHowever, this is useful primarily when all values in each nonaggregated column not named in the GROUP BY are the same for each group. The server is free to choose any value from each group, so unless they are the same, the values chosen are indeterminate.\n\nä½†æ˜¯ï¼Œä¸»è¦æ˜¯åœ¨ GROUP BY ä¸­ **æœªå‘½åçš„æ¯ä¸ªéåˆ†ç»„åˆ—ä¸­çš„æ‰€æœ‰å€¼å¯¹äºæ¯ä¸ªç»„æ˜¯ç›¸åŒçš„**ï¼Œè¿™æ˜¯æœ‰ç”¨çš„ã€‚æœåŠ¡å™¨å¯ä»¥è‡ªç”±é€‰æ‹©æ¯ä¸ªç»„ä¸­çš„ä»»ä½•å€¼ï¼Œå› æ­¤é™¤éå®ƒä»¬ç›¸åŒï¼Œæ‰€é€‰æ‹©çš„å€¼æ˜¯ **ä¸ç¡®å®šçš„**ã€‚\n\nFurthermore, the selection of values from each group cannot be influenced by adding an ORDER BY clause. Result set sorting occurs after values have been chosen, and ORDER BY does not affect which values within each group the server chooses.\n\næ­¤å¤–ï¼Œé€šè¿‡æ·»åŠ  ORDER BY å­å¥ä¸ä¼šå½±å“æ¥è‡ªæ¯ä¸ªç»„çš„å€¼çš„é€‰æ‹©ã€‚ç»“æœé›†æ’åºå‘ç”Ÿåœ¨é€‰æ‹©å€¼åï¼ŒORDER BY **ä¸å½±å“** æœåŠ¡é€‰æ‹©çš„æ¯ä¸ªç»„ä¸­çš„å“ªäº›å€¼ã€‚\n\n> [MySQL 5.7 Handling of GROUP BY](https://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html)\n\nMySQL 5.7.5 and up implements detection of functional dependence. If the ONLY_FULL_GROUP_BY SQL mode is enabled (which it is by default), MySQL rejects queries for which the select list, HAVING condition, or ORDER BY list refer to nonaggregated columns that are neither named in the GROUP BY clause nor are functionally dependent on them. (Before 5.7.5, MySQL does not detect functional dependency and ONLY_FULL_GROUP_BY is not enabled by default.)\n\nMySQL 5.7.5 åŠä»¥ä¸ŠåŠŸèƒ½ä¾èµ–æ£€æµ‹åŠŸèƒ½ã€‚å¦‚æœå¯ç”¨äº† ONLY_FULL_GROUP_BY SQL æ¨¡å¼ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ï¼ŒMySQL å°†æ‹’ç»å¯¹åˆ—è¡¨ï¼ŒHAVING æ¡ä»¶æˆ– ORDER BY åˆ—è¡¨çš„æŸ¥è¯¢å¼•ç”¨åœ¨ GROUP BY å­å¥ä¸­æ—¢æœªå‘½åçš„éé›†åˆåˆ—ï¼Œä¹Ÿä¸åœ¨åŠŸèƒ½ä¸Šä¾èµ–äºå®ƒä»¬ã€‚ï¼ˆ5.7.5 ä¹‹å‰ï¼ŒMySQL æ²¡æœ‰æ£€æµ‹åˆ°åŠŸèƒ½ä¾èµ–å…³ç³»ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨ ONLY_FULL_GROUP_BYï¼‰\n\nYou can achieve the same effect without disabling ONLY_FULL_GROUP_BY by using ANY_VALUE() to refer to the nonaggregated column.\n\nä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ `ANY_VALUE()` ä½¿ç¦ç”¨äº† ONLY_FULL_GROUP_BY çš„ SQLï¼Œæ¥å®ç°ç›¸åŒçš„æ•ˆæœæ¥å¼•ç”¨éèšåˆåˆ—ã€‚\n\n## 5.6 ä¸ 5.7 çš„åŒºåˆ«\n\n5.6 å‡çº§åˆ° 5.7 ç‰ˆæœ¬è¦æ³¨æ„ï¼š\n\n1. sql_mode é»˜è®¤å€¼çš„æ”¹å˜ã€‚\n2. optimizer_switch å€¼çš„æ”¹å˜ã€‚\n3. å¤‡åº“å‡çº§å½±å“ä¸»å¤‡å¤åˆ¶ã€‚\n\n```sql\nSELECT @@SQL_MODE, @@GLOBAL.SQL_MODE;\n\n-- 5.6\n-- NO_ENGINE_SUBSTITUTION\n\n-- 5.7\n-- ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n```\n\n- `ONLY_FULL_GROUP_BY` SELECT æŸ¥è¯¢çš„å­—æ®µå¿…é¡»æ˜¯ GROUP BY ä¸­å‡ºç°çš„æˆ–è€…ä½¿ç”¨èšåˆå‡½æ•°çš„æˆ–è€…æ˜¯å…·æœ‰å”¯ä¸€ç´¢å¼•çš„ã€‚\n- `STRICT_TRANS_TABLES` åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œå¦‚æœä¸€ä¸ªå€¼ä¸èƒ½æ’å…¥åˆ°ä¸€ä¸ªäº‹åŠ¡è¡¨ä¸­ï¼Œåˆ™ä¸­æ–­å½“å‰çš„æ“ä½œï¼Œå¯¹éäº‹åŠ¡è¡¨ä¸åšä»»ä½•é™åˆ¶ã€‚\n- `NO_ZERO_IN_DATE` åœ¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸æ¥å—æœˆæˆ–æ—¥éƒ¨åˆ†ä¸º 0 çš„æ—¥æœŸã€‚å¦‚æœä½¿ç”¨ IGNORE é€‰é¡¹ï¼Œæˆ‘ä»¬ä¸ºç±»ä¼¼çš„æ—¥æœŸæ’å…¥'0000-00-00'ã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ï¼Œå¯ä»¥æ¥å—è¯¥æ—¥æœŸï¼Œä½†ä¼šç”Ÿæˆè­¦å‘Šã€‚\n- `NO_ZERO_DATE` åœ¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸è¦å°† '0000-00-00'åšä¸ºåˆæ³•æ—¥æœŸã€‚ä½ ä»ç„¶å¯ä»¥ç”¨ IGNORE é€‰é¡¹æ’å…¥é›¶æ—¥æœŸã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ï¼Œå¯ä»¥æ¥å—è¯¥æ—¥æœŸï¼Œä½†ä¼šç”Ÿæˆè­¦å‘Šã€‚\n- `ERROR_FOR_DIVISION_BY_ZERO` åœ¨ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ INSERT æˆ– UPDATE è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¢«é›¶é™¤(æˆ– MOD(Xï¼Œ0))ï¼Œåˆ™äº§ç”Ÿé”™è¯¯(å¦åˆ™ä¸ºè­¦å‘Š)ã€‚å¦‚æœæœªç»™å‡ºè¯¥æ¨¡å¼ï¼Œè¢«é›¶é™¤æ—¶ MySQL è¿”å› NULLã€‚å¦‚æœç”¨åˆ° INSERT IGNORE æˆ– UPDATE IGNORE ä¸­ï¼ŒMySQL ç”Ÿæˆè¢«é›¶é™¤è­¦å‘Šï¼Œä½†æ“ä½œç»“æœä¸º NULLã€‚\n- `NO_AUTO_CREATE_USER` é˜²æ­¢ GRANT è‡ªåŠ¨åˆ›å»ºæ–°ç”¨æˆ·ï¼Œé™¤éè¿˜æŒ‡å®šäº†å¯†ç ã€‚\n- `NO_ENGINE_SUBSTITUTION` å¦‚æœéœ€è¦çš„å­˜å‚¨å¼•æ“è¢«ç¦ç”¨æˆ–æœªç¼–è¯‘ï¼Œé‚£ä¹ˆæŠ›å‡ºé”™è¯¯ã€‚ä¸è®¾ç½®æ­¤å€¼æ—¶ï¼Œç”¨é»˜è®¤çš„å­˜å‚¨å¼•æ“æ›¿ä»£ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\n\n### STRICT_TRANS_TABLES å’Œ STRICT_ALL_TABLES çš„åŒºåˆ«\n\nå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼šå¯¹äºä¸æ”¯æŒäº‹åŠ¡çš„è¡¨ï¼Œè‹¥å¼€å¯ STRICT_TRANS_TABLESï¼ŒMySQL ä¼šå°è¯•å°†ä¸€ä¸ªä¸åˆæ³•çš„å­—æ®µå€¼è½¬æ¢æˆä¸€ä¸ªå€¼æœ€è¿‘çš„åˆæ³•å€¼æ’å…¥è¡¨ä¸­ï¼›è€Œå¼€å¯ STRICT_ALL_TABLES åï¼Œåˆ™è¡¨ç°ä¸ºä¸å†™å…¥æ•°æ®ï¼Œä¸”æŠ›å‡ºé”™è¯¯ã€‚\n\nå› ä¸ºç°åœ¨ç»å¤§éƒ¨åˆ†ç”¨çš„ InnoDB å¼•æ“ï¼Œæ˜¯æ”¯æŒäº‹åŠ¡çš„ï¼Œæ‰€ä»¥åŸºæœ¬ä¸ç”¨å…³å¿ƒè¿™ç§åŒºåˆ«ã€‚\n\n### ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼çš„åŒºåˆ«\n\n```sql\nSET sql_mode = 'STRICT_TRANS_TABLES';\n```\n\nä¸¥æ ¼æ¨¡å¼ä¸‹ä¸èƒ½åœ¨æ— ç¬¦å·æ•´æ•°å­—æ®µæ’å…¥è´Ÿå€¼ã€‚\n\n- éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šå­˜å‚¨ä¸º 0ã€‚\n- ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŠ¥é”™ã€‚\n\nä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— é»˜è®¤å€¼çš„ NOT NULL å­—æ®µåœ¨æ’å…¥æ•°æ®æ—¶å¿…é¡»æŒ‡å®šå€¼ã€‚\n\n- éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè‹¥ä¸æ’å…¥æ•°æ®ä¼šå­˜å‚¨å­—æ®µç±»å‹çš„é»˜è®¤å€¼ã€‚\n- ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŠ¥é”™ã€‚\n\nä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ’å…¥å­—ç¬¦ä¸²ä¸èƒ½è¶…å‡ºå®šä¹‰é•¿åº¦\n\n- éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šæˆåŠŸæ’å…¥æ•°æ®ï¼Œä½†æ˜¯å†…å®¹è¢«æˆªæ–­ã€‚\n- ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŠ¥é”™ã€‚\n\n## References\n\n- [MySQL ç»„å†…æ’åºå–æœ€å¤§å€¼ | mysqlwyett](http://mysqlwyett.com/blog/2017/01/17/max_values_in_group_by/)\n- [sql - MySQL Group By and Order By; - Stack Overflow](http://stackoverflow.com/questions/1066453/mysql-group-by-and-order-by)\n- [MySQL5.7 ä¸­çš„ sql_mode é»˜è®¤å€¼ | zhihu](https://zhuanlan.zhihu.com/p/50278304)\n- [MySQL: ä¸¥æ ¼æ¨¡å¼ | letianbiji](https://www.letianbiji.com/mysql/mysql-strict-mode.html)\n\n-- EOF --\n","tags":["mysql"]},{"title":"è§£å†³ Git ä¸­æ–‡æ–‡ä»¶åä¹±ç ","url":"/2017/04/12/solving-git-chinese-in-file-name/","content":"\nåœ¨ä½¿ç”¨ `git status` æ—¶ï¼Œä¸­æ–‡æ–‡ä»¶åå‡ºç°ä¹±ç ã€‚è§£å†³æ–¹æ³•ï¼š\n\n```bash\ngit config --global core.quotepath false\n```\n\n`core.quotepath` è®¾ä¸º `false` çš„è¯ï¼Œå°±ä¸ä¼šå¯¹ `0x80` ä»¥ä¸Šçš„å­—ç¬¦è¿›è¡Œ quoteï¼Œä¸­æ–‡æ˜¾ç¤ºæ­£å¸¸ã€‚\n\n<!--more -->\n\n> Reference:\n>\n> - [Git ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜è§£å†³](http://xstarcd.github.io/wiki/shell/git_chinese.html)\n","tags":["git"]},{"title":"Ubuntu å‘½ä»¤è¡Œä¸‹è®¾ç½®æ—¶åŒº","url":"/2017/04/11/setting-time-zone-in-ubuntu-terminal/","content":"\næœåŠ¡å™¨åŒå¸¸é»˜è®¤ä½¿ç”¨ UTCã€‚Ubuntu 16.04 å‘½ä»¤è¡Œä¸‹è®¾ç½®æ—¶åŒºï¼š\n\n## set the timezone\n\n```bash\nsudo dpkg-reconfigure tzdata\n```\n\n<!--more -->\n\næŒ‰æç¤ºè¿›è¡Œé€‰æ‹©ã€‚\n\n## for crontab\n\nè®¾ç½®å®Œæˆåå‘ç°åœ¨ `crontab` ä»ç„¶æ˜¯æŒ‰ UTC æ‰§è¡Œçš„ï¼Œåº”è¯¥æ˜¯éœ€è¦é‡å¯ä¸‹ç³»ç»Ÿæˆ–è€…ï¼š\n\n```bash\n/etc/init.d/rsyslog restart\n```\n\nåè®°ï¼šåœ¨å…¨çƒé¡¹ç›®ä¸­æœåŠ¡å™¨ä½¿ç”¨ UTC æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚\n\n## References\n\n- [setting timezone from terminal - Ask Ubuntu](http://askubuntu.com/questions/323131/setting-timezone-from-terminal)\n- [cron - How do you set the timezone for crontab? - Ask Ubuntu](https://askubuntu.com/questions/54364/how-do-you-set-the-timezone-for-crontab)\n\n-- EOF --\n","tags":["ubuntu"]},{"title":"MySQL ç®¡ç†ç”¨æˆ·ä¸è®¿é—®æˆæƒ","url":"/2017/04/11/mysql-manage-user-and-grant/","content":"\nMySQL åˆ›å»ºç”¨æˆ·ã€ä¿®æ”¹å¯†ç ã€åˆ é™¤ç”¨æˆ·ï¼›æŸ¥çœ‹ã€æˆäºˆã€æ’¤é”€ç”¨æˆ·æƒé™ï¼›å¯¹ MySQL è¿œç¨‹è®¿é—®çš„æ–°ç†è§£ã€‚\n\n```bash\nGRANT ALL PRIVILEGES ON _._ TO 'root'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION;\n\nFLUSH PRIVILEGES;\n```\n\n## ç®¡ç†ç”¨æˆ·\n\n### åˆ›å»ºç”¨æˆ·\n\n```bash\nCREATE USER 'username'@'host' IDENTIFIED BY 'password';\n```\n\n- `username`ï¼šåˆ›å»ºçš„ç”¨æˆ·å\n- `host`ï¼šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ã€‚å¦‚æœæ˜¯æœ¬åœ°ç”¨æˆ·å¯ç”¨ `localhost`ï¼›å¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥ä»ä»»æ„è¿œç¨‹ä¸»æœºç™»é™†ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ `%`\n- `password`ï¼šè¯¥ç”¨æˆ·çš„ç™»é™†å¯†ç ã€‚å¯†ç å¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™è¯¥ç”¨æˆ·å¯ä»¥ä¸éœ€è¦å¯†ç ç™»é™†æœåŠ¡å™¨\n\nä¾‹å­ï¼š\n\n```bash\nCREATE USER 'dog'@'localhost' IDENTIFIED BY '123456';\nCREATE USER 'pig'@'192.168.1.%' IDENDIFIED BY '123456';\nCREATE USER 'pig'@'%' IDENTIFIED BY '123456';\nCREATE USER 'pig'@'%' IDENTIFIED BY '';\nCREATE USER 'pig'@'%';\n```\n\n<!-- more -->\n\n### ä¿®æ”¹ç”¨æˆ·å¯†ç \n\n```bash\nSET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword');\n\nSET PASSWORD FOR 'pig'@'%' = PASSWORD(\"123456\");\n```\n\nå¦‚æœä¿®æ”¹å½“å‰ç™»é™†ç”¨æˆ·å¯†ç ï¼š\n\n```bash\nSET PASSWORD = PASSWORD(\"newpassword\");\n```\n\n### åˆ é™¤ç”¨æˆ·\n\n```bash\nDROP USER 'username'@'host';\n```\n\n## è®¿é—®æˆæƒ\n\n### æŸ¥çœ‹ç”¨æˆ·æƒé™\n\n```bash\nSHOW GRANTS FOR 'pig'@'%';\n```\n\n### æˆäºˆç”¨æˆ·æƒé™\n\n```bash\nGRANT PRIVILEGES ON databasename.tablename TO 'username'@'host'\n\nGRANT SELECT, INSERT ON test.user TO 'pig'@'%';\nGRANT ALL ON *.* TO 'pig'@'%';\n```\n\n- `privileges`ï¼šç”¨æˆ·çš„æ“ä½œæƒé™ï¼Œå¦‚ `SELECT` `INSERT` `UPDATE` ç­‰ï¼Œå¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ `ALL`\n- `databasename`ï¼šæ•°æ®åº“å\n- `tablename`ï¼šè¡¨åï¼Œå¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨ `*` è¡¨ç¤º\n\n**æ³¨æ„ï¼š** ç”¨ä»¥ä¸Šå‘½ä»¤æˆæƒçš„ç”¨æˆ·ä¸èƒ½ç»™å…¶å®ƒç”¨æˆ·æˆæƒï¼Œå¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥æˆæƒï¼Œç”¨ `WITH GRANT OPTION` å‘½ä»¤ï¼š\n\n```bash\nGRANT PRIVILEGES ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION;\n```\n\n### æ’¤é”€ç”¨æˆ·æƒé™\n\n```bash\nREVOKE PRIVILEGE ON databasename.tablename FROM 'username'@'host';\n\nREVOKE SELECT ON *.* FROM 'pig'@'%';\n```\n\n**æ³¨æ„ï¼š** å‡å¦‚ä½ åœ¨ç»™ç”¨æˆ·'pig'@'%'æˆæƒçš„æ—¶å€™æ˜¯è¿™æ ·çš„ï¼ˆæˆ–ç±»ä¼¼çš„ï¼‰ï¼š\n\n```bash\nGRANT SELECT ON test.user TO 'pig'@'%';\n```\n\nåˆ™åœ¨ä½¿ç”¨ï¼š\n\n```bash\nREVOKE SELECT ON _._ FROM 'pig'@'%';\n```\n\nå‘½ä»¤å¹¶ **ä¸èƒ½** æ’¤é”€è¯¥ç”¨æˆ·å¯¹ test æ•°æ®åº“ä¸­ user è¡¨çš„ SELECT æ“ä½œã€‚\n\nç›¸åï¼Œå¦‚æœæˆæƒä½¿ç”¨çš„æ˜¯ï¼š\n\n```bash\nGRANT SELECT ON _._ TO 'pig'@'%';\n```\n\nåˆ™ï¼š\n\n```bash\nREVOKE SELECT ON test.user FROM 'pig'@'%';\n```\n\nå‘½ä»¤ **ä¹Ÿä¸èƒ½** æ’¤é”€è¯¥ç”¨æˆ·å¯¹ test æ•°æ®åº“ä¸­ user è¡¨çš„ SELECT æƒé™ã€‚\n\nå…·ä½“ä¿¡æ¯å¯ä»¥ç”¨æŸ¥çœ‹å‘½ä»¤ï¼š\n\n```bash\nSHOW GRANTS FOR 'pig'@'%';\n```\n\n### åˆ·æ–°æƒé™\n\n```bash\nFLUSH PRIVILEGES;\n```\n\n### å¼€å¯è¿œç¨‹è®¿é—®\n\né€šè¿‡ä¸Šé¢çš„é…ç½®ï¼Œå¯ä»¥å‘ç°ï¼šå¼€å¯ MySQL è¿œç¨‹è®¿é—®ï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹ç”¨æˆ·æƒé™ï¼š\n\n```bash\n-- åªå…è®¸ 192.168.1.100 è¿æ¥\nGRANT ALL PRIVILEGES ON _._ TO 'root'@'192.168.1.100' IDENTIFIED BY 'pwd123' WITH GRANT OPTION;\n\n-- å…è®¸æ‰€æœ‰ ip è®¿é—®\nGRANT ALL PRIVILEGES ON _._ TO 'root'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION;\n```\n\n**æ³¨æ„ï¼š** Ubuntu ä¸Šè¿˜éœ€è¦ä¿®æ”¹ MySQL é…ç½®æ–‡ä»¶\n\n```bash\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf\n```\n\nå°† `bind-address = 127.0.0.1` è¿™ä¸€è¡Œæ³¨é‡Šæ‰, å³:\n\n```bash\n#bind-address = 127.0.0.1\n```\n\né‡å¯ MySQL\n\n## è¡¥å……\n\næŸ¥è¯¢å½“å‰ç”¨æˆ·ï¼š\n\n```bash\nmysql> SELECT CURRENT_USER();\n```\n\n| HOST              | User   | è¢«æ¡ç›®åŒ¹é…çš„è¿æ¥                                       |\n| ----------------- | ------ | ------------------------------------------------------ |\n| 'thomas.loc.gov'  | 'fred' | fred, ä» thomas.loc.gov è¿æ¥                           |\n| 'thomas.loc.gov'  | ''     | ä»»ä½•ç”¨æˆ·, ä» thomas.loc.gov è¿æ¥                       |\n| '%'               | 'fred' | fred, ä»ä»»ä½•ä¸»æœºè¿æ¥                                   |\n| '%'               | ''     | ä»»ä½•ç”¨æˆ·, ä»ä»»ä½•ä¸»æœºè¿æ¥                               |\n| '%.loc.gov'       | 'fred' | fred, ä»åœ¨ loc.gov åŸŸçš„ä»»ä½•ä¸»æœºè¿æ¥                    |\n| 'x.y.%'           | 'fred' | fred, ä» x.y.netã€x.y.com,x.y.edu ç­‰è”æ¥ï¼ˆè¿™æˆ–è®¸æ— ç”¨ï¼‰ |\n| '144.155.166.177' | 'fred' | fred, ä»æœ‰ 144.155.166.177 çš„ä¸»æœºè¿æ¥                  |\n| '144.155.166.%'   | 'fred' | fred, ä» 144.155.166 C ç±»å­ç½‘çš„ä»»ä½•ä¸»æœºè¿æ¥            |\n\nå¯ä»¥åœ¨ Host å­—æ®µä½¿ç”¨ IP é€šé…ç¬¦å€¼ï¼ˆä¾‹å¦‚ï¼Œ`'144.155.166.%'` åŒ¹é…åœ¨ä¸€ä¸ªå­ç½‘ä¸Šçš„æ¯å°ä¸»æœºï¼‰ï¼Œæœ‰å¯èƒ½æŸäººå¯èƒ½ä¼å›¾æ¢ç©¶è¿™ç§èƒ½åŠ›ï¼Œé€šè¿‡å‘½åä¸€å°ä¸»æœºä¸º 144.155.166.somewhere.comã€‚ä¸ºäº†é˜»æ­¢è¿™æ ·çš„ä¼å›¾ï¼ŒMySQL ä¸å…è®¸åŒ¹é…ä»¥æ•°å­—å’Œä¸€ä¸ªç‚¹èµ·å§‹çš„ä¸»æœºåï¼Œè¿™æ ·ï¼Œå¦‚æœä½ ç”¨ä¸€ä¸ªå‘½åä¸ºç±»ä¼¼ 1.2.foo.com çš„ä¸»æœºï¼Œå®ƒçš„åå­—å†³ä¸ä¼šåŒ¹é…æˆæƒè¡¨ä¸­çš„ Host åˆ—ã€‚åªæœ‰ä¸€ä¸ª IP æ•°å­—èƒ½åŒ¹é… IP é€šé…ç¬¦å€¼ã€‚\n\n## References\n\n- [MySQL åˆ›å»ºç”¨æˆ·ä¸æˆæƒ - ç®€ä¹¦](http://www.jianshu.com/p/d7b9c468f20d)\n- [5.7.5. è®¿é—®æ§åˆ¶, é˜¶æ®µ 1ï¼šè¿æ¥æ ¸å®](http://www.iteedu.com/database/mysql/mysqlmanualcn/database-administration/connection-access.php)\n\n-- EOF --\n","tags":["mysql"]},{"title":"Ubuntu å‘½ä»¤è¡Œä¸‹å…å¯†ç æ‰§è¡Œ sudo å‘½ä»¤","url":"/2017/04/10/execute-sudo-without-password-in-ubuntu-terminal/","content":"\nè§£å†³ä½ çš„é—®é¢˜çš„æ–¹æ³•æ˜¯å°†ä½ çš„ç”¨æˆ·åŠ å…¥ sudoers æ–‡ä»¶ã€‚\n\n```bash\nsudo visudo\n```\n\nåœ¨æ–‡ä»¶åº•éƒ¨è¾“å…¥ï¼š\n\n```txt\nusername ALL=(ALL) NOPASSWD: ALL\n```\n\nè¿™åªé€‚ç”¨äºç»ˆç«¯çª—å£ä¸­çš„ sudo å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œå½“ä½ å°è¯•åœ¨ software center ä¸­å®‰è£…è½¯ä»¶åŒ…æ—¶ï¼Œå°†æç¤ºä½ è¾“å…¥å¯†ç ã€‚\n\n<!--more -->\n\n## References\n\n- [command line - Execute sudo without Password? - Ask Ubuntu](http://askubuntu.com/questions/147241/execute-sudo-without-password)\n","tags":["ubuntu"]},{"title":"Ubuntu ä¸‹ä½¿ç”¨ sendmail mail å‘é€é‚®ä»¶","url":"/2017/04/06/using-sendmail-mail-in-ubuntu/","content":"\nä½¿ç”¨é‚®ä»¶å‘é€ç¨‹åºçš„æ‰§è¡Œæƒ…å†µã€è¿è¡Œæ—¥å¿—éƒ½éå¸¸æ–¹ä¾¿ï¼ŒUbuntu ä¸‹æ­å»ºé‚®ä»¶æœåŠ¡ä¹Ÿä¸å¤æ‚ã€‚\n\n## sendmail\n\n### install\n\n```bash\nsudo apt-get install sendmail\n```\n\n<!-- more -->\n\n### configure\n\nrun sendmail's config and answer `Y` to everything\n\n```bash\nsudo sendmailconfig\n```\n\n## mail\n\n### install\n\n```bash\nsudo apt-get install mailutils\n```\n\n## test\n\n```bash\necho 'test-email-content' | mail -s 'email title' xxx@gmail.com\n```\n\n## sendmail mail åŒºåˆ«\n\nå…ˆéœ€è¦ææ¸…ä¸‰ä¸ªæ¦‚å¿µï¼š\n\n- é‚®ä»¶ç”¨æˆ·ä»£ç†ï¼ˆMUAï¼ŒMail User Agentï¼‰\n- é‚®ä»¶ä¼ é€ä»£ç†ï¼ˆMTAï¼ŒMail Transport Agentï¼‰\n- é‚®ä»¶åˆ†å‘ä»£ç†ï¼ˆMDAï¼ŒMail Deliver Agentï¼‰\n\nsedmail æ˜¯è´Ÿè´£é‚®ä»¶ä¼ è¾“çš„ MTAï¼Œç±»ä¼¼ apacheã€nginx çš„ä½œç”¨ã€‚mail æ˜¯ç”¨æˆ·ä½¿ç”¨å®¢æˆ·ç«¯ MUAï¼Œç±»ä¼¼ foxmailã€‚\n\n## References\n\n- [Install and configure Sendmail on Ubuntu](https://gist.github.com/adamstac/7462202)\n- [Linux ä¸‹ mailã€mailx å’Œ sendmail çš„åŒºåˆ«ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/19728556)\n","tags":["ubuntu"]},{"title":"Git åœ¨å·¥ä½œç›®å½•ä¹‹é—´ä½¿ç”¨ push è¿›è¡ŒåŒæ­¥","url":"/2017/03/30/git-synchronizing-between-working-directories-by-push/","content":"\n_Pushing to a non-bare repo is now possible (Git 2.3.0 February 2015)._\n\nAnd it is possible when you are pushing the branch currently checked out at the remote repo!\n\nç°åœ¨å·²ç»æ˜¯å¯ä»¥åœ¨ä¿©ä¸ª non-bare çš„ä»“åº“ä¹‹é—´æ¨é€ä»£ç ã€‚\n\nåªéœ€è¦å†è¿œç¨‹ä»“åº“é…ç½®ï¼š\n\n```bash\ngit config receive.denyCurrentBranch updateInstead\n```\n\nå°±å¯ä»¥ç›´æ¥ `push` åˆ†æ”¯åˆ°è¿œç¨‹ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒºã€‚æ­¤æ–¹æ³•å¯ä»¥ç”¨äºé¡¹ç›®éƒ¨ç½²ã€‚\n\n<!--more -->\n\n**receive-pack: add another option for `receive.denyCurrentBranch`**\n\nWhen synchronizing between working directories, it can be handy to update the current branch via 'push' rather than 'pull', e.g. when pushing a fix from inside a VM, or when pushing a fix made on a user's machine (where the developer is not at liberty to install an ssh daemon let alone know the user's password).\n\nThe common workaround â€“ pushing into a temporary branch and then merging on the other machine â€“ is no longer necessary with this patch.\n\nThe new option is:\n\n`updateInstead`: Update the working tree accordingly, but refuse to do so if there are any uncommitted changes.\n\nin remote repo:\n\n```bash\ngit config receive.denyCurrentBranch updateInstead\n```\n\nand then you can use `git push` to synchronize between working directories in local repo.\n\n> Reference:\n>\n> - [cannot push into git repository - Stack Overflow](http://stackoverflow.com/questions/3221859/cannot-push-into-git-repository)\n> - [receive-pack: add another option for receive.denyCurrentBranch](https://github.com/git/git/commit/1404bcbb6b3bdb248d32024430644e55faec91ce)\n","tags":["git"]},{"title":"è§£å†³ SSH è¿æ¥æç¤º Permission denied publickey","url":"/2017/03/30/resolving-ssh-permission-denied-publickey/","content":"\næœåŠ¡å™¨æ˜¯ä½¿ç”¨ publickey è¿›è¡Œè¿æ¥ï¼Œå½“åœ¨ git push æ—¶å‘ç”Ÿ `Permission denied (publickey)`ã€‚åŒæ—¶è§£å†³ ssh-add é‡å¯åå¤±æ•ˆã€‚\n\n## è§£å†³\n\n```bash\nssh-add your_publickey\n```\n\nå¦‚æœé‡åˆ°æŠ¥é”™\n\n```bash\nCould not open a connection to your authentication agent.\n```\n\nTry to\n\n```bash\neval `ssh-agent`\n```\n\n<!--more -->\n\n**æ³¨æ„ï¼š** åœ¨é‡å¯ç”µè„‘åå¤±æ•ˆï¼Œä¸€ç›´æ²¡æœ‰æ‰¾çš„å…¶ä»–åˆé€‚çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥é€‰æ‹©åœ¨ `~/.bashrc` æˆ– `~/.zshrc` ä¸­æ·»åŠ ï¼š\n\n```bash\nssh-add your_publickey 2> /dev/null\n```\n\n`2> /dev/null` æ˜¯ä¸ºäº†ä¿æŒé™é»˜è¿è¡Œ\n\n## References\n\n- [ssh è¿æ¥æç¤º Permission denied (publickey) æ€ä¹ˆç ´ï¼Ÿ | å´å·æ–Œçš„åšå®¢](http://www.mr-wu.cn/ssh-permission-denied-publickey/)\n","tags":["linux","ssh"]},{"title":"Ubuntu ä¸‹ä½¿ç”¨ Terminal æ‰“å¼€ PDF","url":"/2017/03/21/open-pdf-file-in-ubuntu-terminal/","content":"\nä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­å­˜æ”¾äº†å¤§é‡çš„æ–‡ä»¶åï¼Œåœ¨çª—å£æ‰“å¼€ä¸­è¢«æ‰“å¼€æ—¶æ˜¯éå¸¸è€—æ—¶çš„ã€‚å½“æˆ‘ä»¬å·²ç»æ˜ç¡®çŸ¥é“æ–‡ä»¶åæ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ Terminal ä¸­ä½¿ç”¨å‘½ä»¤ï¼Œè°ƒç”¨åº”ç”¨æ‰“å¼€æ–‡ä»¶ï¼š\n\n```bash\nevince filename.pdf\n```\n\n<!--more -->\n\n## References\n\n- [Ubuntu å‘½ä»¤è¡Œæ‰“å¼€ PDF æ–‡ä»¶ - bigmarco çš„ä¸“æ ](http://blog.csdn.net/bigmarco/article/details/6555582)\n\n-- EOF --\n","tags":["ubuntu"]},{"title":"è§£å†³ Ubuntu Sogou æ— æ³•é€‰è¯è¾“å…¥ä¸­æ–‡","url":"/2017/03/17/resolving-ubuntu-sogou-can-not-select-word/","content":"\nsogou è¾“å…¥æ³•çªç„¶æ— æ³•é€‰è¯è¾“å…¥ä¸­æ–‡ï¼Œå€™é€‰è¯ä½ç½®å‡ºç°ç™½æ¡†ï¼Œå¤šæ¬¡é‡é‡è£… fcitx å’Œ sogou ä¹Ÿæ²¡æœ‰è§£å†³ã€‚å°è¯•ä½¿ç”¨ google pinyin ä»£æ›¿ï¼Œä½†æ˜¯æ„Ÿè§‰å¾ˆä¸é¡ºæ‰‹ã€‚\n\n<!-- more -->\n\n## issue in GitHub\n\nsogou è¾“å…¥æ³• GitHub ä¸Šçš„ä¸€äº› issueï¼š\n\n- [#43](https://github.com/FZUG/repo/issues/43)\n- [#177](https://github.com/FZUG/repo/issues/177)\n- [#179](https://github.com/FZUG/repo/issues/179)\n\n## è§£å†³\n\n### æ–¹æ¡ˆä¸€\n\ntry to lastest version\n\n### æ–¹æ¡ˆäºŒ\n\nclean `fcitx`, `SogouPY*`, `sogou-qimpanel` in `~/.config`, then relogin and try again\n\n```bash\ncd ~/.config\nsudo rm -rf  fcitx SogouPY sogou-qimpanel\n```\n\n## References\n\n- [ubuntu-sogou-ä¸èƒ½æ˜¾ç¤ºå€™é€‰è¯ | Color Win's Notes](https://colorwin.github.io/2017/02/17/ubuntu-sogou/)\n\n-- EOF --\n","tags":["ubuntu"]},{"title":"Git pull rebase å’Œ merge no-ff ä¿æŒæäº¤çº¿å›¾æ•´æ´","url":"/2017/03/17/git-pull-rebase-and-merge-no-ff-to-keep-clear-commit-graph/","content":"\ngit log ä¸­çš„ä¸€ä¸ªæ¸…æ™°çš„æäº¤çº¿å›¾æ˜¯å¾ˆæ–¹ä¾¿è¿›è¡Œ code review å’Œä»£ç å›é€€\n`git pull --rebase` ä¸»è¦æ˜¯ä¸ºæ˜¯å°†æäº¤çº¦çº¿å›¾å¹³å¦åŒ–ï¼Œè€Œ `git merge --no-ff` åˆ™æ˜¯åˆ»æ„åˆ¶é€ åˆ†å‰\n\n## pull rebase\n\n> perform a rebase after fetching\n\n### çŠ¶å†µ\n\nGit ä½œä¸ºåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€æœ‰ä¿®æ”¹æ“ä½œéƒ½æ˜¯åŸºäºæœ¬åœ°çš„ï¼Œåœ¨å›¢é˜Ÿåä½œè¿‡ç¨‹ä¸­ï¼Œå‡è®¾ä½ å’Œä½ çš„åŒä¼´åœ¨æœ¬åœ°ä¸­åˆ†åˆ«æœ‰å„è‡ªçš„æ–°æäº¤ï¼Œè€Œä½ çš„åŒä¼´å…ˆäºä½  push äº†ä»£ç åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œæ‰€ä»¥ä½ å¿…é¡»å…ˆæ‰§è¡Œ `git pull` æ¥è·å–åŒä¼´çš„æäº¤ï¼Œç„¶åæ‰èƒ½ push è‡ªå·±çš„æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ã€‚\n\n![170317-git-pull-rebase-and-merge-no-ff-to-keep-clear-commit-graph-01](https://user-images.githubusercontent.com/9289792/80202129-c1cdfb00-8657-11ea-814e-49f8618f301c.jpg)\n\næŒ‰ç…§ Git çš„é»˜è®¤ç­–ç•¥ï¼Œå¦‚æœè¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯ä¹‹é—´çš„æäº¤çº¿å›¾æœ‰åˆ†å‰çš„è¯ï¼ˆå³ä¸æ˜¯ fast-forwardedï¼‰ï¼ŒGit ä¼šæ‰§è¡Œä¸€æ¬¡ merge æ“ä½œï¼Œå› æ­¤äº§ç”Ÿ**ä¸€æ¬¡æ²¡æ„ä¹‰çš„æäº¤è®°å½•**ï¼Œä»è€Œé€ æˆäº†åƒä¸Šå›¾é‚£æ ·çš„æ··ä¹±ã€‚\n\n### è§£å†³\n\nå…¶å®åœ¨ pull æ“ä½œçš„æ—¶å€™ï¼Œä½¿ç”¨ `git pull --rebase` é€‰é¡¹å³å¯å¾ˆå¥½åœ°è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ åŠ ä¸Š `--rebase` å‚æ•°çš„ä½œç”¨æ˜¯ï¼Œæäº¤çº¿å›¾æœ‰åˆ†å‰çš„è¯ï¼ŒGit ä¼š `rebase` ç­–ç•¥æ¥ä»£æ›¿é»˜è®¤çš„ `merge` ç­–ç•¥ã€‚\nå‡è®¾æäº¤çº¿å›¾åœ¨æ‰§è¡Œ pull å‰æ˜¯è¿™æ ·çš„ï¼š\n\n```bash\n                 A---B---C  remotes/origin/master\n                /\n           D---E---F---G  master\n```\n\nå¦‚æœæ˜¯æ‰§è¡Œ `git pull` åï¼Œç»“æœå¤šå‡ºäº† H è¿™ä¸ªæ²¡å¿…è¦çš„æäº¤è®°å½•ã€‚æäº¤çº¿å›¾ä¼šå˜æˆè¿™æ ·ï¼š\n\n```bash\n                 A---B---C remotes/origin/master\n                /         \\\n           D---E---F---G---H master\n```\n\nå¦‚æœæ˜¯æ‰§è¡Œ `git pull --rebase` çš„è¯ï¼Œæäº¤çº¿å›¾å°±ä¼šå˜æˆè¿™æ ·ï¼š\n\n```bash\n                       remotes/origin/master\n                           |\n           D---E---A---B---C---F'---G'  master\n```\n\nF G ä¸¤ä¸ªæäº¤é€šè¿‡ `rebase` æ–¹å¼é‡æ–°æ‹¼æ¥åœ¨ C ä¹‹åï¼Œå¤šä½™çš„åˆ†å‰å»æ‰äº†ï¼Œç›®çš„è¾¾åˆ°ã€‚\n\n### æ³¨æ„\n\nä½¿ç”¨ `git log --graph` å¯æŸ¥çœ‹æäº¤çº¿å›¾\nä½¿ç”¨ `git pull --rebase` æ˜¯ä¸ºäº†ä½¿æäº¤çº¿å›¾æ›´å¥½çœ‹ï¼Œä»è€Œæ–¹ä¾¿ code review å’Œä»£ç å›é€€\nä½¿ç”¨ `git pull --rebase` æ¯”ç›´æ¥ pull å®¹æ˜“å¯¼è‡´å†²çªçš„äº§ç”Ÿï¼Œå¦‚æœé¢„æœŸå†²çªæ¯”è¾ƒå¤šçš„è¯ï¼Œå»ºè®®è¿˜æ˜¯ç›´æ¥ pull\n\n<!--more -->\n\n## merge no-ff\n\n> generate a merge commit even if the merge resolve\n\n### ä¾‹å­ 1\n\n`git pull --rebase` ç­–ç•¥ç›®çš„æ˜¯ä¿®æ•´æäº¤çº¿å›¾ï¼Œä½¿å…¶å½¢æˆä¸€æ¡ç›´çº¿ï¼Œè€Œå³å°†è¦ç”¨åˆ°çš„ `git merge --no-ff <branch-name>` ç­–ç•¥ååæ˜¯åè¡Œå…¶é“ï¼Œåˆ»æ„åœ°å¼„å‡ºæäº¤çº¿å›¾åˆ†å‰å‡ºæ¥ã€‚\n\nå‡è®¾ä½ åœ¨æœ¬åœ°å‡†å¤‡åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯ï¼Œè€Œåˆšå¥½è¿™ä¸¤ä¸ªåˆ†æ”¯æ˜¯ fast-forwarded çš„ï¼Œé‚£ä¹ˆç›´æ¥åˆå¹¶åä½ å¾—åˆ°ä¸€ä¸ªç›´çº¿çš„æäº¤çº¿å›¾ï¼Œå½“ç„¶è¿™æ ·æ²¡ä»€ä¹ˆåå¤„ï¼Œä½†å¦‚æœä½ æƒ³æ›´æ¸…æ™°åœ°å‘Šè¯‰ä½ åŒä¼´ï¼šè¿™ä¸€ç³»åˆ—çš„æäº¤éƒ½æ˜¯ä¸ºäº†å®ç°åŒä¸€ä¸ªç›®çš„ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ»æ„åœ°å°†è¿™æ¬¡æäº¤å†…å®¹å¼„æˆä¸€æ¬¡æäº¤çº¿å›¾åˆ†å‰ã€‚\n\næ‰§è¡Œ `git merge --no-ff <branch-name>` çš„ç»“æœå¤§æ¦‚ä¼šæ˜¯è¿™æ ·çš„ï¼š\n\n![170317-git-pull-rebase-and-merge-no-ff-to-keep-clear-commit-graph-02](https://user-images.githubusercontent.com/9289792/80202132-c397be80-8657-11ea-8135-781a36fc64e5.jpg)\n\nä¸­é—´çš„åˆ†å‰çº¿è·¯å›¾å¾ˆæ¸…æ™°çš„æ˜¾ç¤ºè¿™äº›æäº¤éƒ½æ˜¯ä¸ºäº†å®ç°ï¼š**complete adjusting user domains and tags**\n\n### ä¾‹å­ 2\n\nå¾€å¾€åœ¨åˆå¹¶åˆ†æ”¯ä¹‹å‰ï¼ˆå‡è®¾è¦åœ¨æœ¬åœ°å°† feature åˆ†æ”¯åˆå¹¶åˆ° dev åˆ†æ”¯ï¼‰ï¼Œä¼šå…ˆæ£€æŸ¥ feature åˆ†æ”¯æ˜¯å¦éƒ¨åˆ†è½åäºè¿œç¨‹ dev åˆ†æ”¯ï¼š\n\n```bash\ngit checkout dev\ngit pull # æ›´æ–° dev åˆ†æ”¯\ngit log feature..dev # å¯¹æ¯”\n```\n\nå¦‚æœæ²¡æœ‰è¾“å‡ºä»»ä½•æäº¤ä¿¡æ¯çš„è¯ï¼Œå³è¡¨ç¤º feature å¯¹äº dev åˆ†æ”¯æ˜¯ up-to-date çš„ã€‚å¦‚æœæœ‰è¾“å‡ºçš„è¯è€Œé©¬ä¸Šæ‰§è¡Œäº† `git merge --no-ff` çš„è¯ï¼Œæäº¤çº¿å›¾ä¼šå˜æˆè¿™æ ·ï¼š\n\n![170317-git-pull-rebase-and-merge-no-ff-to-keep-clear-commit-graph-03](https://user-images.githubusercontent.com/9289792/80202134-c4305500-8657-11ea-8c4b-52f858f669ec.jpg)\n\næ‰€ä»¥è¿™æ—¶åœ¨åˆå¹¶å‰ï¼Œé€šå¸¸å…ˆæ‰§è¡Œï¼š\n\n```bash\ngit checkout feature\ngit rebase dev\n```\n\nè¿™æ ·å°±å¯ä»¥å°† feature é‡æ–°æ‹¼æ¥åˆ°æ›´æ–°äº†çš„ dev ä¹‹åï¼Œç„¶åå°±å¯ä»¥åˆå¹¶äº†ã€‚è¿™æ—¶åˆ†å‰ç‚¹å°†ä¸Šç§»ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¹²å‡€èˆ’æœçš„æäº¤çº¿å›¾\n\n## æ€»ç»“\n\n- ä½¿ç”¨ `git pull --rebase` å’Œ `git merge --no-ff` å…¶å®å’Œç›´æ¥ä½¿ç”¨ `git pull` `git merge` å¾—åˆ°çš„ä»£ç åº”è¯¥æ˜¯ä¸€æ ·ã€‚\n- ä½¿ç”¨ `git pull --rebase` ä¸»è¦æ˜¯ä¸ºæ˜¯å°†æäº¤çº¦çº¿å›¾å¹³å¦åŒ–ï¼Œè€Œ `git merge --no-ff` åˆ™æ˜¯åˆ»æ„åˆ¶é€ åˆ†å‰ã€‚\n\n## References\n\n- [æ´ç™–è€…ç”¨ Gitï¼špull --rebase å’Œ merge --no-ff](http://hungyuhei.github.io/2012/08/07/better-git-commit-graph-using-pull---rebase-and-merge---no-ff.html)\n\n-- EOF --\n","tags":["git"]},{"title":"ç»™ç½‘ç«™æ·»åŠ ä¿å­˜åˆ°ç§»åŠ¨è®¾å¤‡ä¸»å±çš„ icon","url":"/2017/03/15/add-website-icons-to-the-home-screen/","content":"\nBy adding an iOS icon, anyone who decides to save your webpage to the home screen of their iPhone, iPad, or Android will see a nice app-like icon rather than an image of your page.\n\nHere is a table of the current [iOS icon sizes from Apple](https://developer.apple.com/ios/human-interface-guidelines/graphics/app-icon/):\n\n| iPhone 6/7, iPhone SE | iPad / iPad Mini | iPad Pro | iPhone 6/7 Plus |\n| :-------------------: | :--------------: | :------: | :-------------: |\n|        120Ã—120        |     152Ã—152      | 167Ã—167  |     180Ã—180     |\n\nFor Android icons youâ€™ll want to follow these specifications:\n\n| Android Regula | Android Hi-Res |\n| :------------: | :------------: |\n|    1128Ã—128    |    192Ã—192     |\n\n<!-- more -->\n\n```html\n<link\n  href=\"http://www.yoursite.com/apple-touch-icon.png\"\n  rel=\"apple-touch-icon\"\n/>\n<link\n  href=\"http://www.yoursite.com/apple-touch-icon-152x152.png\"\n  rel=\"apple-touch-icon\"\n  sizes=\"152x152\"\n/>\n<link\n  href=\"http://www.yoursite.com/apple-touch-icon-167x167.png\"\n  rel=\"apple-touch-icon\"\n  sizes=\"167x167\"\n/>\n<link\n  href=\"http://www.yoursite.com/apple-touch-icon-180x180.png\"\n  rel=\"apple-touch-icon\"\n  sizes=\"180x180\"\n/>\n<link\n  href=\"http://www.yoursite.com/icon-hires.png\"\n  rel=\"icon\"\n  sizes=\"192x192\"\n/>\n<link\n  href=\"http://www.yoursite.com/icon-normal.png\"\n  rel=\"icon\"\n  sizes=\"128x128\"\n/>\n```\n\nMake the first apple one the 120 x 120.\n\nIf you donâ€™t want to create all these images, you should at least create the larger resolution ones. That way theyâ€™ll look good on the hi-res devices.\n\n## References\n\n- [How to Add Icons to iPhone, iPad &amp; Android to Your Website](http://www.kylejlarson.com/blog/adding-an-icon-for-iphone-ipad-android-to-your-website/)\n"},{"title":"ç¦æ­¢ Google æ ¹æ®åŒºåŸŸé‡å®šå‘è·³è½¬","url":"/2017/03/14/google-no-country-redirection/","content":"\nä½¿ç”¨ä»£ç†ä¸Š Google æ—¶ï¼ŒGoogle å¸¸ä¼šæ ¹æ®ç½‘ç»œä»£ç†çš„åŒºåŸŸè¿›è¡Œé‡å®šå‘è·³è½¬ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨éŸ©å›½ä»£ç†æ—¶ï¼Œ`google.com` ä¼šè·³è½¬åˆ° `https://www.google.co.kr/`ï¼Œæœç´¢ç»“æœä¹Ÿå¤šä¸ºéŸ©è¯­ï¼Œå¾ˆæ˜¯ä¸æ–¹ä¾¿ã€‚\n\nè§£å†³çš„åŠæ³•å…¶å®ä¹Ÿå¾ˆç®€å•ï¼šè®¿é—® `https://www.google.com/ncr` å°±å¯ä»¥äº†ã€‚\n\n<!-- more -->\n\n`ncr` è¡¨ç¤ºï¼šNo Country Redirectionï¼Œç¦æ­¢åŒºåŸŸé‡å®šå‘ã€‚\n\n-- EOF --\n"},{"title":"Git ä¿®æ”¹æäº¤å†å²","url":"/2017/03/13/git-modify-commits-history/","content":"\nåœ¨ä½¿ç”¨ Git æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¿®æ”¹æœ¬åœ°æäº¤è®°å½•çš„æƒ…å†µã€‚æ¯”å¦‚ï¼šä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤è®°ï¼Œè¿˜æ¯”å¦‚ï¼šå°†å¤šæ¬¡å°çš„ `commit` åˆå¹¶æˆä¸€ä¸ªå¤§çš„ `commit`ã€‚\n\nè¿™ç§åšå‘æœ‰åˆ©ä¹Ÿæœ‰å¼Šï¼Œåˆ©åœ¨ï¼šreview ä»£ç æ—¶ï¼Œå¯ä»¥æŒ‰åŠŸèƒ½çœ‹ï¼Œå¯ä»¥çœå» review ä¸€äº›å‰æœŸå†™çš„æ— æ•ˆçš„ä»£ç ï¼›å¼Šæ˜¯ï¼šä¸€æ¬¡æäº¤ä¿®æ”¹è¿‡å¤šï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œä¸åˆ©äºè°ƒè¯•ã€‚\n\nå…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œæ˜¯è§£å†³é—®é¢˜çš„é‡‘å¥ã€‚\n\n## ä¿®æ”¹æœ€è¿‘ä¸€æ¬¡æäº¤è®°å½•\n\n### ä¿®æ”¹æäº¤è¯´æ˜\n\nå¦‚æœåªæƒ³æ›´æ”¹æœ€è¿‘ä¸€æ¬¡çš„æäº¤è¯´æ˜ï¼Œåªéœ€è¾“å…¥ï¼š\n\n```bash\ngit commit --amend\n```\n\nç„¶åä½ å°±ä¼šè¿›å…¥æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¾“å…¥ä½ æƒ³è¦çš„å†…å®¹ï¼Œä¿å­˜å¹¶é€€å‡ºå³å¯\n\n### æ”¹è¢«æäº¤çš„å¿«ç…§\n\nå¦‚æœä½ å®Œæˆ `commit` ååˆæƒ³ä¿®æ”¹è¢«æäº¤çš„å¿«ç…§ï¼Œå¢åŠ æˆ–è€…ä¿®æ”¹å…¶ä¸­çš„æ–‡ä»¶ã€‚\n\nå…ˆæ‰§è¡Œ `git add` å‘½ä»¤ï¼Œå°†ä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°ç¼“å­˜åŒºï¼Œç„¶åè¿è¡Œ `git commit -amend` å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šè·å–ä½ å½“å‰çš„æš‚å­˜åŒºçš„å†…å®¹ä¸€å¹¶æäº¤åˆ°æœ€åä¸€æ¬¡ `commit`\n\nä¾‹å¦‚ï¼šæ–°åŠ äº†ä¸€ä¸ªæ–‡ä»¶ `new_file.cpp` ï¼Œæƒ³è¦åˆå¹¶åˆ°æœ€åä¸€æ¬¡æäº¤ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n```bash\ngit add new_file.cpp\ngit commit -amend\n```\n\nä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä¸è¿‡è¦å°å¿ƒï¼Œä¸è¦æäº¤äº†å¤šä½™çš„æ–‡ä»¶\n\n```bash\ngit commit -a -amend\n```\n\n### å°†æ–‡ä»¶ä»æœ¬æ¬¡æäº¤ä¸­ç§»é™¤\n\nå¦‚æœæƒ³æŠŠå·²ç» `commit` çš„æ–‡ä»¶ä»è¿™æ¬¡ `commit` ç§»é™¤çš„è¯ï¼Œè¿è¡Œå‘½ä»¤ï¼š\n\n```bash\ngit reset [-soft] HEAD~1 # -softå¯åŠ å¯ä¸åŠ ï¼Œé»˜è®¤å°±æ˜¯softé€‰é¡¹\ngit checkout -filename # è¦ä»æœ¬æ¬¡æäº¤ç§»é™¤çš„æ–‡ä»¶å\ngit commit -m \"new commit\"\n```\n\n<!-- more -->\n\n## ä¿®æ”¹å¤šä¸ªæäº¤è®°å½•\n\nè¦ä¿®æ”¹å†å²ä¸­æ›´æ—©çš„æäº¤ï¼Œä½ å¿…é¡»é‡‡ç”¨æ›´å¤æ‚çš„å·¥å…·ã€‚Git æ²¡æœ‰ä¸€ä¸ªä¿®æ”¹å†å²çš„å·¥å…·ï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ rebase å·¥å…·æ¥è¡åˆä¸€ç³»åˆ—çš„æäº¤åˆ°å®ƒä»¬åŸæ¥æ‰€åœ¨çš„ HEAD ä¸Šã€‚\n\nä¾é è¿™ä¸ªäº¤äº’å¼çš„ rebase å·¥å…·ï¼Œä½ å°±å¯ä»¥åœç•™åœ¨æ¯ä¸€æ¬¡æäº¤åï¼Œå¦‚æœä½ æƒ³ä¿®æ”¹æˆ–æ”¹å˜è¯´æ˜ã€å¢åŠ æ–‡ä»¶æˆ–ä»»ä½•å…¶ä»–äº‹æƒ…ã€‚ä½ å¯ä»¥é€šè¿‡ç»™ `git rebase -i` å‘½ä»¤ä»¥äº¤äº’æ–¹å¼è¿›è¡Œ rebaseã€‚\n\nä¾‹å¦‚ï¼Œä½ æƒ³ä¿®æ”¹æœ€è¿‘ä¸‰æ¬¡çš„æäº¤è¯´æ˜ï¼Œæˆ–è€…å…¶ä¸­ä»»æ„ä¸€æ¬¡ï¼Œä½ å¿…é¡»ç»™ `git rebase -i` æä¾›ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡æ˜ä½ æƒ³è¦ä¿®æ”¹çš„æäº¤çš„çˆ¶æäº¤ã€‚\n\nä¾‹å¦‚ `HEAD~3` æ˜¯æŒ‡ä» HEAD æŒ‡é’ˆåˆ° HEAD+3 çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æœ€è¿‘ç¬¬ 4 æ¬¡æäº¤ã€‚æ‰€ä»¥æƒ³ä¿®æ”¹æœ€è¿‘ 3 æ¬¡æäº¤ï¼Œä½ éœ€è¦æŒ‡æ˜ç¬¬ 3 æ¬¡æäº¤çš„çˆ¶æäº¤ï¼ˆç¬¬ 4 æ¬¡æäº¤ï¼‰å³ `HEAD~3`ã€‚è¿è¡Œå‘½ä»¤ï¼š\n\n```bash\ngit rebase -i HEAD~3\n```\n\nå†æ¬¡æé†’è¿™æ˜¯ä¸€ä¸ªè¡åˆå‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯ HEAD~3 åˆ° HEAD èŒƒå›´å†…çš„æ¯ä¸€æ¬¡æäº¤éƒ½ä¼šè¢«é‡å†™ï¼Œä¸ç®¡ä½ æ˜¯å¦ä¿®æ”¹æäº¤è¯´æ˜ SHA-1 çš„å€¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚\n\næ‰€ä»¥åƒä¸‡ä¸è¦æ¶µç›–ä½ å·²ç»æ¨é€åˆ°ä¸­å¿ƒæœåŠ¡å™¨çš„æäº¤ã€‚è¿™ä¹ˆåšä¼šä½¿å…¶ä»–å¼€å‘è€…äº§ç”Ÿæ··ä¹±ï¼Œå› ä¸ºä½ æä¾›äº†åŒæ ·å˜æ›´çš„ä¸åŒç‰ˆæœ¬ã€‚è¿è¡Œè¯¥å‘½ä»¤åè¿›å…¥äº¤äº’ç•Œé¢ï¼Œç±»ä¼¼ï¼š\n\n```bash\npick fecb551 Init the view model\npick bb199a0 Update the version\npick bc5cd9d Add new method\n\n# Rebase f77f585..fecb551 onto f77f585\n#\n# Commands:\n#  p, pick = use commit\n#  r, reword = use commit, but edit the commit message\n#  e, edit = use commit, but stop for amending\n#  s, squash = use commit, but meld into previous commit\n#  f, fixup = like \"squash\", but discard this commit's log message\n#  x, exec = run command (the rest of the line) using shell\n#\n# These lines can be re-ordered; they are executed from top to bottom.\n# If you remove a line here THAT COMMIT WILL BE LOST.\n# However, if you remove everything, the rebase will be aborted.\n# Note that empty commits are commented out\n```\n\næ ¹æ®å‘½ä»¤æç¤ºï¼Œå°±å¯ä»¥è¿›è¡Œå†å²æ›´æ”¹äº†ã€‚å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ä½ å¾—æ³¨æ„è¿™äº›æäº¤çš„é¡ºåºä¸ä½ é€šå¸¸é€šè¿‡ log å‘½ä»¤çœ‹åˆ°çš„æ˜¯ç›¸åçš„ã€‚\n\nå¦‚æœä½ è¿è¡Œ logï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢è¿™æ ·çš„ç»“æœï¼š\n\n```bash\npick bc5cd9d Add new method\npick bb199a0 Update the version\npick fecb551 Init the view model\n```\n\n### ä¿®æ”¹æŒ‡å®šæäº¤\n\nä¾‹å¦‚ï¼šåªä¿®æ”¹æœ€è¿‘ç¬¬ 3 æ¬¡æäº¤è¯´æ˜å¯ä»¥è¿›è¡Œå¦‚ä¸‹æ›´æ”¹ï¼š\n\n```bash\nreword fecb551 Init the view model\npick bb199a0 Update the version\npick bc5cd9d Add new method\n...\n```\n\nä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œrebase å‘½ä»¤åœ¨è¡åˆåˆ°ç¬¬ 3 æ¬¡æäº¤æ—¶ä¼šè¿›å…¥æäº¤è¯´æ˜ç¼–è¾‘é¡µé¢ï¼Œåœ¨æ­¤è¿›è¡Œç¼–è¾‘æ–°çš„æäº¤è¯´æ˜ï¼Œä¿å­˜å¹¶é€€å‡ºå³å¯ï¼Œrebase å‘½ä»¤ç»§ç»­è¿›è¡Œç›´è‡³å®Œæˆå…¨éƒ¨è¡åˆæ“ä½œã€‚\n\nå¦‚æœä½ ä¸ä»…æƒ³è¦ä¿®æ”¹æäº¤è¯´æ˜ï¼Œè¿˜è¦æ›´æ”¹æäº¤ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹æ›´æ”¹ï¼š\n\n```bash\nedit fecb551 Init the view model\npick bb199a0 Update the version\npick bc5cd9d Add new method\n...\n```\n\nä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œrebase å‘½ä»¤åœ¨è¡åˆåˆ°ç¬¬ä¸‰æ¬¡æäº¤æ—¶ä¼šç­‰å¾…ä½ æäº¤æ–°çš„æ›´æ”¹ï¼Œå¹¶æç¤ºä½ ä¿®æ”¹å®Œæˆåè¿è¡Œ `git commit â€“amend` å‘½ä»¤ï¼Œç„¶åè¿è¡Œ `git rebase â€“continue` ç»§ç»­è¿›è¡Œ rebase ç›´è‡³å®Œæˆå…¨éƒ¨è¡åˆã€‚\n\n### é‡æ’æäº¤\n\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `git rebase -i` å‘½ä»¤å¯¹æäº¤å†å²å½»åº•é‡æ’æˆ–åˆ é™¤æäº¤ã€‚ä¾‹å¦‚ä½ æƒ³åˆ é™¤â€Update the versionâ€è¿™ä¸ªæäº¤ï¼Œå¹¶ä¸”ä¿®æ”¹å…¶ä»–ä¸¤æ¬¡æäº¤çš„é¡ºåºï¼Œå¯ä»¥å°†ï¼š\n\n```bash\npick fecb551 Init the view model\npick bb199a0 Update the version\npick bc5cd9d Add new method\n...\n```\n\næ”¹ä¸ºï¼š\n\n```bash\npick bc5cd9d Add new method\npick fecb551 Init the view model\n```\n\nç„¶åä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œæ­¤æ—¶ rebase å‘½ä»¤ä¼šå…ˆåº”ç”¨ bc5cd9d (Add new method)ï¼Œç„¶ååº”ç”¨ fecb551 (Init the view model) bb199a0 Update the version è¿™æ¬¡æäº¤ã€‚ç„¶åä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œæ­¤æ—¶ rebase å‘½ä»¤ä¼šå…ˆåº”ç”¨ bc5cd9d (Add new method)ï¼Œç„¶ååº”ç”¨ fecb551 (Init the view model)ï¼Œæ¥ç€åœæ­¢ã€‚\n\næ‰§è¡Œå®Œä¸Šè¯‰æ“ä½œï¼Œä½ å·²ç»ä¿®æ”¹äº†è¿™äº›æäº¤çš„é¡ºåºï¼Œå¹¶ä¸”åˆ é™¤äº† bb199a0 (Update the version) è¿™æ¬¡æäº¤ã€‚\n\n### åˆå¹¶æäº¤\n\n`git rebase -i` å‘½ä»¤è¿˜å¯ä»¥å°†ä¸€ç³»åˆ—æäº¤åˆå¹¶æˆä¸€ä¸ªæäº¤ã€‚ä»ä¸Šé¢çš„è„šæœ¬æç¤ºä¸­å¯ä»¥çœ‹åˆ° s, squash = use commit, but meld into previous commit æç¤ºã€‚\n\nå¦‚æœç”¨ squash ä¿®é¥°æäº¤å°±å¯ä»¥è¿›è¡Œæäº¤ä¹‹é—´çš„åˆå¹¶ï¼Œä¾‹å¦‚å¯ä»¥å°†è„šæœ¬ä¿®æ”¹æˆè¿™æ ·ï¼š\n\n```bash\npick fecb551 Init the view model\nsquash bb199a0 Update the version\nsquash bc5cd9d Add new method\n```\n\nä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œrebase å‘½ä»¤ä¼šåº”ç”¨å…¨éƒ¨ä¸‰æ¬¡å˜æ›´ç„¶åè¿›å…¥ç¼–è¾‘å™¨æ¥å½’å¹¶ä¸‰æ¬¡æäº¤è¯´æ˜ã€‚å½“ä½ ä¿å­˜ä¹‹åï¼Œä½ å°±æ‹¥æœ‰äº†ä¸€ä¸ªåŒ…å«å‰ä¸‰æ¬¡æäº¤çš„å…¨éƒ¨å˜æ›´çš„å•ä¸€æäº¤ã€‚\n\n### æ‹†åˆ†æäº¤\n\næ‹†åˆ†æäº¤å®é™…ä¸Šå°±æ˜¯æ’¤é”€ä¸€æ¬¡æäº¤ï¼Œç„¶ååˆ†å¤šæ¬¡è¿›è¡Œé‡æ–°æäº¤ã€‚ä¾‹å¦‚ä½ æƒ³å°†ä¸‰æ¬¡æäº¤ä¸­çš„ä¸­é—´ä¸€æ¬¡æ‹†åˆ†ã€‚å°† â€Update the versionâ€ æ‹†åˆ†æˆä¸¤æ¬¡æäº¤ï¼šâ€Update the version1â€ å’Œ â€Update the version2â€ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š\n\n```bash\npick fecb551 Init the view model\nedit bb199a0 Update the version\npick bc5cd9d Add new method\n```\n\nå½“ rebase åˆ° bb199a0 æ—¶ï¼Œä¼šè¿›å…¥ç­‰å¾…ä½ æäº¤æ–° commit çš„çŠ¶æ€ï¼Œè¿™æ—¶çœ‹å¯ä»¥è¿è¡Œ git reset HEAD^ å¯¹å½“å‰æäº¤è¿›è¡Œé‡ç½®ï¼Œç„¶ååˆ†åˆ«è¿è¡Œ git add å‘½ä»¤æ·»åŠ æƒ³è¦æäº¤çš„æ–‡ä»¶ï¼Œåˆ†åˆ«è¿›è¡Œ git commitï¼Œæœ€åè¿è¡Œ git rebase â€“continue å®Œæˆæ‰€æœ‰è¡åˆã€‚æ•´ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n```bash\ngit reset HEAD^\ngit add file1\ngit commit -m 'Update the version1'\ngit add file2\ngit commit -m 'Update the version2'\ngit rebase --continue\n```\n\næ‰§è¡Œå®Œä¸Šè¯‰æ“ä½œï¼Œæäº¤å†å²çœ‹èµ·æ¥å°±åƒè¿™æ ·äº†ï¼š\n\n```bash\n1c002dd Add new method\n9b29157 Update the version2\n35cfb2b Update the version1\nf3cc40e Init the view model\n```\n\nå†æ¬¡æé†’ï¼Œè¿™ä¼šä¿®æ”¹ä½ åˆ—è¡¨ä¸­çš„æäº¤çš„ SHA å€¼ï¼Œæ‰€ä»¥è¯·ç¡®ä¿è¿™ä¸ªåˆ—è¡¨é‡Œä¸åŒ…å«ä½ å·²ç»æ¨é€åˆ°å…±äº«ä»“åº“çš„æäº¤ã€‚\n\n## References\n\n- [Git ä¿®æ”¹æäº¤å†å² - GLGJing&#8217;s Blog](http://glgjing.github.io/blog/2015/01/06/git-xiu-gai-ti-jiao-li-shi/)\n","tags":["git"]},{"title":"IMOOC å¦‚ä½•ç”¨ CSS è¿›è¡Œç½‘é¡µå¸ƒå±€","url":"/2017/03/12/imooc-how-to-use-css-for-web-layout/","content":"\n**2019-05-25 æ›´æ–°ï¼š** æ–‡ç« å†…å®¹å·²ç»è¿‡æ—¶ã€‚é¡µé¢å¸ƒå±€ç°åœ¨ä½¿ç”¨ï¼š`æ …æ ` `flex`ã€‚\n\n<!-- more -->\n\n---\n\næ…•è¯¾ç½‘ä¸Šã€å¦‚ä½•ç”¨ CSS è¿›è¡Œç½‘é¡µå¸ƒå±€ã€‘å­¦ä¹ ç¬”è®°ã€‚ä¸€åˆ—å¸ƒå±€ã€ä¸¤åˆ—å¸ƒå±€ã€ä¸‰åˆ—å¸ƒå±€ã€æ··åˆå¸ƒå±€ã€‚\n\n## ä¸€åˆ—å¸ƒå±€\n\n```html\n<style type=\"text/css\">\n  body {\n    marin: 0;\n    padding: 0;\n  }\n  .main {\n    width: 800px;\n    height: 300px;\n    background: #ccc;\n    margin: 0 auto;\n  }\n  .top {\n    height: 100px;\n    background: blue;\n  }\n  .foot {\n    width: 800px;\n    height: 300px;\n    backround: red;\n    maigin: 0 auto;\n  }\n</style>\n<div class=\"top\"></div>\n<div class=\"main\"></div>\n<div class=\"foot\"></div>\n```\n\n## ä¸¤åˆ—å¸ƒå±€\n\n```html\n<style type=\"text/css\">\n  .main {\n    width: 800px;\n    margin: 0 auto;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    font-size: 30px;\n  }\n  .left {\n    width: 20%;\n    height: 500px;\n    float: left;\n    background: #ccc;\n  }\n  .right {\n    width: 80%;\n    height: 500px;\n    float: right;\n    background: #ddd;\n  }\n</style>\n<body>\n  <div class=\"main\">\n    <div class=\"left\"></div>\n    <div class=\"right\"></div>\n  </div>\n</body>\n```\n\n## ä¸‰åˆ—å¸ƒå±€\n\nä¸­é—´è‡ªé€‚åº”ï¼›æ³¨æ„ `position:absolute` ä½¿ç”¨\n\n```html\n<style type=\"text/css\">\n  .left {\n    height: 600px;\n    width: 200px;\n    background: #ccc;\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n  .main {\n    height: 600px;\n    margin: 0 310px 0 210px;\n    background: #9cf;\n  }\n  .right {\n    height: 600px;\n    width: 300px;\n    position: absolute;\n    right: 0;\n    top: 0;\n    background: #fcc;\n  }\n</style>\n\n<div class=\"left\">left</div>\n<div class=\"main\">è®¾è®¡é¦–é¡µçš„ç¬¬ä¸€æ­¥æ˜¯è®¾è®¡ç‰ˆé¢å¸ƒå±€ã€‚</div>\n<div class=\"right\">right</div>\n```\n\n## æ··åˆå¸ƒå±€\n\n```html\n<style>\n  body {\n    margin: 0;\n    padding: 0;\n    font-size: 30px;\n    font-weight: bold;\n  }\n  div {\n    text-align: center;\n    line-height: 50px;\n  }\n  .top {\n    height: 100px;\n    background: #9cf;\n  }\n  .head,\n  .main {\n    width: 960px;\n    margin: 0 auto;\n  }\n  .head {\n    height: 100px;\n    background: #f90;\n  }\n  .left {\n    width: 220px;\n    height: 600px;\n    background: #ccc;\n    float: left;\n  }\n  .right {\n    width: 740px;\n    height: 600px;\n    background: #fcc;\n    float: right;\n  }\n  .r_sub_left {\n    width: 540px;\n    height: 600px;\n    background: #9c3;\n    float: left;\n  }\n  .r_sub_right {\n    width: 200px;\n    height: 600px;\n    background: #9fc;\n    float: right;\n  }\n  .footer {\n    height: 50px;\n    background: #9f9;\n    clear: both;\n  }\n</style>\n\n<div class=\"top\">\n  <div class=\"head\">head</div>\n</div>\n<div class=\"main\">\n  <div class=\"left\">left</div>\n  <div class=\"right\">\n    <div class=\"r_sub_left\">sub_left</div>\n    <div class=\" r_sub_right\">sub_right</div>\n  </div>\n</div>\n<div class=\"footer\">footer</div>\n```\n\n![æ··åˆå¸ƒå±€](https://img.mukewang.com/58525eb80001417a12800720.jpg)\n"},{"title":"PHP empty æ–¹æ³•åˆ¤æ–­ 0.0","url":"/2017/03/09/php-empty-method-judge-0/","content":"\nåœ¨ä½¿ç”¨ `empty(mixed $var)` æ—¶è¦è€ƒè™‘ `$var` çš„ **ç±»å‹**ï¼Œå°¤å…¶æ˜¯åœ¨åˆ¤æ–­æ•°æ®åº“æŸ¥è¯¢åçš„å­—æ®µã€‚\n\n<!-- more -->\n\n```txt\nbool empty(mixed $var)\n```\n\nä»¥ä¸‹çš„ä¸œè¥¿è¢«è®¤ä¸ºæ˜¯ç©ºçš„ï¼š\n\n- `\"\"`ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰\n- `0` ï¼ˆä½œä¸ºæ•´æ•°çš„ 0ï¼‰\n- `0.0` ï¼ˆä½œä¸ºæµ®ç‚¹æ•°çš„ 0ï¼‰\n- `\"0\"` ï¼ˆä½œä¸ºå­—ç¬¦ä¸²çš„ 0ï¼‰\n- `NULL`\n- `FALSE`\n- `array()` ï¼ˆä¸€ä¸ªç©ºæ•°ç»„ï¼‰\n- `$var` ï¼ˆä¸€ä¸ªå£°æ˜äº†ï¼Œä½†æ˜¯æ²¡æœ‰å€¼çš„å˜é‡ï¼‰\n\n**æ³¨æ„ï¼š** string çš„åˆ¤æ–­è¦éå¸¸æ³¨æ„ï¼Œæ•°æ®åº“æŸ¥è¯¢åçš„å­—æ®µå¸¸å¸¸ä¸º stringï¼Œåº”è¯¥è¿›è¡Œæ­£ç¡®çš„ç±»å‹è½¬æ¢ã€‚\n\n```php\n$str = '0.0';\necho empty($str); // false å¾ˆå¯èƒ½å’Œé¢„æœŸæ˜¯ç›¸åçš„\necho empty((float)$str); // true\n```\n\n-- EOF --\n","tags":["php"]},{"title":"Linux crontab å†…å®¹å®šæ—¶å¤‡ä»½","url":"/2017/03/07/linux-crontab-content-backup/","content":"\n`crontab -r` æ˜¯ä¸€ä¸ªå¾ˆå±é™©çš„å‘½ä»¤ï¼Œå®ƒå°†ç›´æ¥é‡ç½® crontab ä¸­çš„å†…å®¹ï¼›è¾“å…¥ `crontab` åï¼Œä½¿ç”¨ `ctrl + d` é€€å‡ºä¹Ÿå°†æ¸…ç©º crontab ä¸­çš„å†…å®¹ã€‚æ‰€ä»¥ crontab å†…å®¹çš„å®šæ—¶å¤‡ä»½ä¹Ÿå˜å¾—æœ‰å¿…è¦äº†ã€‚\n\n## å¤‡ä»½è„šæœ¬\n\n`crontab_bak.sh`\n\n```bash\n#!/bin/bash\ncrontab -l > /home/tom/crontab_bak/bak`date '+%Y%m%d'`.txt\n```\n\nconfig in crontab\n\n```bash\n12 12 * * * /bin/bash /home/tom/crontab_bak/crontab_bak.sh\n```\n\n<!-- more -->\n\n## crontab å¸¸ç”¨å‘½ä»¤\n\n```bash\ncrontab -l  # åˆ—ä¸¾ crontab çš„ä»»åŠ¡\ncrontab -e  # ç¼–è¾‘ crontab çš„ä»»åŠ¡\ncrontab -r  # åˆ é™¤ crontab çš„ä»»åŠ¡ï¼›é£é™©\ncrontab -h  # crontab çš„å¸®åŠ©\ncrontab -i  # åˆ é™¤ crontab å‰è¿›è¡Œæç¤º\n```\n\n-- EOF --\n","tags":["linux"]},{"title":"è§£å†³ Ubuntu warning Setting locale failed","url":"/2017/03/03/resolving-ubuntu-warning-setting-locale-failed/","content":"\nåœ¨é…ç½®æ–°æœåŠ¡å™¨æ—¶é‡åˆ° `Setting locale failed` çš„è­¦å‘Šï¼Œè¦æ±‚ `Please check that your locale settings`\n\n```bash\nperl: warning: Setting locale failed.\nperl: warning: Please check that your locale settings:\n    LANGUAGE = (unset),\n    LC_ALL = (unset),\n    LC_MESSAGES = \"zh_CN.UTF-8\",\n    LANG = \"zh_CN.UTF-8\"\n    are supported and installed on your system.\nperl: warning: Falling back to the standard locale (\"C\").\n```\n\n<!-- more -->\n\n## è§£å†³æ–¹æ³•\n\n### å®‰è£… localepurge ç®¡ç†è¯­è¨€æ–‡ä»¶\n\n```bash\nsudo apt-get install localepurge\n```\n\né€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„è¯­è¨€ï¼Œä¾‹å¦‚ `en_US.UTF-8` å’Œ `zh_CN.UTF-8`\nå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å†æ¬¡è¿›è¡Œé…ç½®ï¼š\n\n```bash\nsudo dpkg-reconfigure localepurge\n```\n\n### ç”Ÿæˆè‡ªå·±æƒ³è¦çš„è¯­è¨€\n\n```bash\nsudo locale-gen zh_CN.UTF-8 en_US.UTF-8\n```\n\næ‰“å°å‡ºå½“å‰çš„é…ç½®ä¿¡æ¯\n\n```bash\nlocale\n```\n\né»˜è®¤æƒ…å†µä¸‹ç»ˆç«¯ ssh çš„æ—¶å€™ä¼šå°†æœ¬åœ°çš„ locale ä¼ åˆ°æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æŒ‡å®š ssh æœåŠ¡å™¨çš„è¯­è¨€ï¼š\n\n```bash\nLC_ALL=en_US.UTF-8 ssh <host>\n```\n\n## References\n\n- [ubuntu è§£å†³è¯­è¨€è®¾ç½®é”™è¯¯çš„é—®é¢˜ â€”â€” æ–‡ç¿¼çš„åšå®¢](http://wenzhixin.net.cn/2014/01/11/ubuntu_setting_locale_failed)\n\n-- EOF --\n","tags":["ubuntu"]},{"title":"IMOOC HTML+CSS åŸºç¡€è¯¾ç¨‹ Part 4","url":"/2017/03/01/imooc-html-css-basic-course-part4/","content":"\næ…•è¯¾ç½‘ä¸Šã€HTML+CSS åŸºç¡€è¯¾ç¨‹ã€‘å­¦ä¹ ç¬”è®°ã€‚æœ¬æ–‡ä¸»è¦å†…å®¹ï¼šCSS ä»£ç ç¼©å†™ã€å•ä½å’Œå€¼ã€æ ·å¼è®¾ç½®å°æŠ€å·§ã€‚\n\n<!-- more -->\n\n## ç¬¬ 13 ç«  CSS ä»£ç ç¼©å†™ï¼Œå ç”¨æ›´å°‘çš„å¸¦å®½\n\n### ç›’æ¨¡å‹ä»£ç ç®€å†™\n\nè¿˜è®°å¾—åœ¨è®²ç›’æ¨¡å‹æ—¶å¤–è¾¹è·ï¼ˆmarginï¼‰ã€å†…è¾¹è·ï¼ˆpaddingï¼‰å’Œè¾¹æ¡†ï¼ˆborder)è®¾ç½®ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„è¾¹è·æ˜¯æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘è®¾ç½®çš„ï¼šä¸Šå³ä¸‹å·¦\n\n```css\n/* ä¸Šè®¾ç½®ä¸º10pxã€å³è®¾ç½®ä¸º15pxã€ä¸‹è®¾ç½®ä¸º12pxã€å·¦è®¾ç½®ä¸º14px */\nmargin: 10px 15px 12px 14px;\n\nmargin: 10px 10px 10px 10px;\n/* å¯ç¼©å†™ä¸ºï¼š*/\nmargin: 10px;\n\nmargin: 10px 20px 10px 20px;\n/* å¯ç¼©å†™ä¸ºï¼š*/\nmargin: 10px 20px;\n\n/* å¦‚æœleftå’Œrightçš„å€¼ç›¸åŒï¼Œå¦‚ä¸‹é¢ä»£ç ï¼š*/\nmargin: 10px 20px 30px 20px;\n/* å¯ç¼©å†™ä¸ºï¼š*/\nmargin: 10px 20px 30px;\n\n/* paddingã€borderçš„ç¼©å†™æ–¹æ³•å’Œmarginæ˜¯ä¸€è‡´çš„ã€‚*/\n```\n\n### é¢œè‰²å€¼ç¼©å†™\n\nå½“è®¾ç½®çš„é¢œè‰²æ˜¯ 16 è¿›åˆ¶çš„è‰²å½©å€¼æ—¶ï¼Œå¦‚æœæ¯ä¸¤ä½çš„å€¼ç›¸åŒï¼Œå¯ä»¥ç¼©å†™ä¸€åŠ\n\n```css\np {\n  color: #000000;\n}\n/* å¯ä»¥ç¼©å†™ä¸ºï¼š*/\np {\n  color: #000;\n}\n\np {\n  color: #336699;\n}\n/* å¯ä»¥ç¼©å†™ä¸ºï¼š*/\np {\n  color: #369;\n}\n```\n\n### å­—ä½“ç¼©å†™\n\n```css\nbody {\n  font-style: italic;\n  font-variant: small-caps;\n  font-weight: bold;\n  font-size: 12px;\n  line-height: 1.5em;\n  font-family: \"å®‹ä½“\", sans-serif;\n}\n\n/* è¿™ä¹ˆå¤šè¡Œçš„ä»£ç å…¶å®å¯ä»¥ç¼©å†™ä¸ºä¸€å¥ï¼š*/\n\nbody {\n  font: italic small-caps bold 12px/1.5em \"å®‹ä½“\", sans-serif;\n}\n```\n\næ³¨æ„ï¼š\n\n- ä½¿ç”¨è¿™ä¸€ç®€å†™æ–¹å¼ä½ è‡³å°‘è¦æŒ‡å®š `font-size` å’Œ `font-family` å±æ€§ï¼Œå…¶ä»–çš„å±æ€§ï¼ˆå¦‚ font-weightã€font-styleã€font-variantã€line-heightï¼‰å¦‚æœªæŒ‡å®šå°†è‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼ã€‚\n- åœ¨ç¼©å†™æ—¶ `font-size` ä¸ `line-height` ä¸­é—´è¦åŠ å…¥ `/` æ–œæ‰›ã€‚\n- ä¸€èˆ¬æƒ…å†µä¸‹å› ä¸ºå¯¹äºä¸­æ–‡ç½‘ç«™ï¼Œè‹±æ–‡è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œæ‰€ä»¥ä¸‹é¢ç¼©å†™ä»£ç æ¯”è¾ƒå¸¸ç”¨ï¼š\n\n```css\nbody {\n  font: 12px/1.5em \"å®‹ä½“\", sans-serif;\n}\n/* åªæ˜¯æœ‰å­—å·ã€è¡Œé—´è·ã€ä¸­æ–‡å­—ä½“ã€è‹±æ–‡å­—ä½“è®¾ç½® */\n```\n\n## ç¬¬ 14 ç«  å•ä½å’Œå€¼\n\n### é¢œè‰²å€¼\n\nå­—ä½“é¢œè‰²ï¼ˆcolorï¼‰ã€èƒŒæ™¯é¢œè‰²ï¼ˆbackground-colorï¼‰ã€è¾¹æ¡†é¢œè‰²ï¼ˆborderï¼‰ç­‰ï¼š\n\n```css\n/* è‹±æ–‡å‘½ä»¤é¢œè‰² */\np {\n  color: red;\n}\n\n/* RGBé¢œè‰² */\np {\n  color: rgb(133, 45, 200);\n}\n\n/* æ¯ä¸€é¡¹çš„å€¼å¯ä»¥æ˜¯ 0~255 ä¹‹é—´çš„æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ 0%~100% çš„ç™¾åˆ†æ•°ã€‚å¦‚ï¼š*/\np {\n  color: rgb(20%, 33%, 25%);\n}\n\n/* åå…­è¿›åˆ¶é¢œè‰²ã€‚åŸç†å…¶å®ä¹Ÿæ˜¯ RGB è®¾ç½®ï¼Œå€¼ç”± 0-255 å˜æˆäº†åå…­è¿›åˆ¶ 00-ff */\np {\n  color: #00ffff;\n}\n```\n\n### é•¿åº¦å€¼\n\né•¿åº¦å•ä½æ€»ç»“ä¸€ä¸‹ï¼Œç›®å‰æ¯”è¾ƒå¸¸ç”¨åˆ° pxï¼ˆåƒç´ ï¼‰ã€emã€% ç™¾åˆ†æ¯”ï¼Œè¦æ³¨æ„å…¶å®è¿™ä¸‰ç§å•ä½éƒ½æ˜¯ç›¸å¯¹å•ä½ã€‚\n\n- åƒç´ ï¼šåƒç´ ä¸ºä»€ä¹ˆæ˜¯ç›¸å¯¹å•ä½å‘¢ï¼Ÿå› ä¸ºåƒç´ æŒ‡çš„æ˜¯æ˜¾ç¤ºå™¨ä¸Šçš„å°ç‚¹ï¼ˆCSS è§„èŒƒä¸­å‡è®¾â€œ90 åƒç´ =1 è‹±å¯¸â€ï¼‰ã€‚å®é™…æƒ…å†µæ˜¯æµè§ˆå™¨ä¼šä½¿ç”¨æ˜¾ç¤ºå™¨çš„å®é™…åƒç´ å€¼æœ‰å…³ï¼Œåœ¨ç›®å‰å¤§å¤šæ•°çš„è®¾è®¡è€…éƒ½å€¾å‘äºä½¿ç”¨åƒç´ ï¼ˆpxï¼‰ä½œä¸ºå•ä½\n- emï¼šå°±æ˜¯æœ¬å…ƒç´ ç»™å®šå­—ä½“çš„ font-size å€¼ï¼Œå¦‚æœå…ƒç´ çš„ font-size ä¸º 14px ï¼Œé‚£ä¹ˆ 1em = 14pxï¼›å¦‚æœ font-size ä¸º 18pxï¼Œé‚£ä¹ˆ 1em = 18pxã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n```css\np {\n  font-size: 12px;\n  text-indent: 2em;\n}\n/* ä¸Šé¢ä»£ç å°±æ˜¯å¯ä»¥å®ç°æ®µè½é¦–è¡Œç¼©è¿› 24pxï¼ˆä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—ä½“å¤§å°çš„è·ç¦»ï¼‰*/\n```\n\nä¸‹é¢æ³¨æ„ä¸€ä¸ªç‰¹æ®Šæƒ…å†µï¼š\nä½†å½“ç»™ font-size è®¾ç½®å•ä½ä¸º em æ—¶ï¼Œæ­¤æ—¶è®¡ç®—çš„æ ‡å‡†ä»¥ p çš„çˆ¶å…ƒç´ çš„ font-size ä¸ºåŸºç¡€ã€‚å¦‚ä¸‹ä»£ç ï¼š\n\n```html\n<p>ä»¥è¿™ä¸ª<span>ä¾‹å­</span>ä¸ºä¾‹ã€‚</p>\n// css: p{font-size:14px} span{font-size:0.8em;}\n// ç»“æœ span ä¸­çš„å­—ä½“â€œä¾‹å­â€å­—ä½“å¤§å°å°±ä¸º 11.2pxï¼ˆ14 * 0.8 = 11.2pxï¼‰ã€‚\n```\n\n- ç™¾åˆ†æ¯”\n\n```css\np {\n  font-size: 12px;\n  line-height: 130%;\n}\n```\n\nè®¾ç½®è¡Œé«˜ï¼ˆè¡Œé—´è·ï¼‰ä¸ºå­—ä½“çš„ `130%`ï¼ˆ12 \\* 1.3 = 15.6pxï¼‰\n\n## ç¬¬ 15 ç«  CSS æ ·å¼è®¾ç½®å°æŠ€å·§\n\n### æ°´å¹³å±…ä¸­ - è¡Œå†…å…ƒç´ \n\nå¦‚æœè¢«è®¾ç½®å…ƒç´ ä¸ºæ–‡æœ¬ã€å›¾ç‰‡ç­‰è¡Œå†…å…ƒç´ æ—¶ï¼Œæ°´å¹³å±…ä¸­æ˜¯é€šè¿‡ç»™çˆ¶å…ƒç´ è®¾ç½® `text-align:center` æ¥å®ç°çš„\n\n```html\n<body>\n  <div class=\"txtCenter\">æˆ‘æƒ³è¦åœ¨çˆ¶å®¹å™¨ä¸­æ°´å¹³å±…ä¸­æ˜¾ç¤ºã€‚</div>\n</body>\n<style>\n  .txtCenter {\n    text-align: center;\n  }\n</style>\n```\n\n### æ°´å¹³å±…ä¸­ - å®šå®½å—çŠ¶å…ƒç´ \n\nå½“è¢«è®¾ç½®å…ƒç´ ä¸º `å—çŠ¶å…ƒç´ ` æ—¶ç”¨ `text-aligncenter` å°±ä¸èµ·ä½œç”¨äº†ï¼Œè¿™æ—¶ä¹Ÿåˆ†ä¸¤ç§æƒ…å†µï¼š`å®šå®½å—çŠ¶å…ƒç´ ` å’Œ `ä¸å®šå®½å—çŠ¶å…ƒç´ `ã€‚\n\næ»¡è¶³ `å®šå®½` å’Œ `å—çŠ¶` ä¸¤ä¸ªæ¡ä»¶çš„å…ƒç´ æ˜¯å¯ä»¥é€šè¿‡è®¾ç½® `å·¦å³margin` å€¼ä¸º `auto` æ¥å®ç°å±…ä¸­çš„ã€‚\n\n```html\n<body>\n  <div>æˆ‘æ˜¯å®šå®½å—çŠ¶å…ƒç´ ï¼Œå“ˆå“ˆï¼Œæˆ‘è¦æ°´å¹³å±…ä¸­æ˜¾ç¤ºã€‚</div>\n</body>\n<style>\n  div {\n    border: 1px solid red; /*ä¸ºäº†æ˜¾ç¤ºå±…ä¸­æ•ˆæœæ˜æ˜¾ä¸º div è®¾ç½®äº†è¾¹æ¡†*/\n    width: 200px; /*å®šå®½*/\n    margin: 20px auto; /* margin-left ä¸ margin-right è®¾ç½®ä¸º auto */\n    // æ³¨æ„ï¼šå…ƒç´ çš„â€œä¸Šä¸‹ marginâ€ æ˜¯å¯ä»¥éšæ„è®¾ç½®çš„\n  }\n</style>\n```\n\n### æ°´å¹³å±…ä¸­ - ä¸å®šå®½å—çŠ¶å…ƒç´ æ–¹æ³•ï¼ˆä¸€ï¼‰\n\nä¸å®šå®½åº¦çš„å—çŠ¶å…ƒç´ æœ‰ä¸‰ç§æ–¹æ³•å±…ä¸­ï¼š\n\n1. åŠ å…¥ `table` æ ‡ç­¾\n2. è®¾ç½® `display: inline` æ–¹æ³•ï¼šä¸ç¬¬ä¸€ç§ç±»ä¼¼ï¼Œæ˜¾ç¤ºç±»å‹è®¾ä¸º è¡Œå†…å…ƒç´ ï¼Œè¿›è¡Œä¸å®šå®½å…ƒç´ çš„å±æ€§è®¾ç½®\n3. è®¾ç½® `position:relative` å’Œ `left:50%`ï¼šåˆ©ç”¨ ç›¸å¯¹å®šä½ çš„æ–¹å¼ï¼Œå°†å…ƒç´ å‘å·¦åç§» 50% ï¼Œå³è¾¾åˆ°å±…ä¸­çš„ç›®çš„\n\nåŠ å…¥ `table` æ ‡ç­¾æ˜¯åˆ©ç”¨ `table` æ ‡ç­¾çš„é•¿åº¦è‡ªé€‚åº”æ€§ï¼Œå³ä¸å®šä¹‰å…¶é•¿åº¦ä¹Ÿä¸é»˜è®¤çˆ¶å…ƒç´  body çš„é•¿åº¦ï¼ˆtable å…¶é•¿åº¦æ ¹æ®å…¶å†…æ–‡æœ¬é•¿åº¦å†³å®šï¼‰ï¼Œå› æ­¤å¯ä»¥çœ‹åšä¸€ä¸ªå®šå®½åº¦å—å…ƒç´ ï¼Œç„¶åå†åˆ©ç”¨å®šå®½åº¦å—çŠ¶å±…ä¸­çš„ margin çš„æ–¹æ³•ï¼Œä½¿å…¶æ°´å¹³å±…ä¸­\n\nç¬¬ä¸€æ­¥ï¼šä¸ºéœ€è¦è®¾ç½®çš„å±…ä¸­çš„å…ƒç´ å¤–é¢åŠ å…¥ä¸€ä¸ª table æ ‡ç­¾ ( åŒ…æ‹¬ `<tbody>`ã€`<tr>`ã€`<td>` )\n\nç¬¬äºŒæ­¥ï¼šä¸ºè¿™ä¸ª table è®¾ç½® `å·¦å³ margin å±…ä¸­`ï¼ˆè¿™ä¸ªå’Œå®šå®½å—çŠ¶å…ƒç´ çš„æ–¹æ³•ä¸€æ ·ï¼‰\n\n```html\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td>\n          <ul>\n            <li>æˆ‘æ˜¯ç¬¬ä¸€è¡Œæ–‡æœ¬</li>\n            <li>æˆ‘æ˜¯ç¬¬äºŒè¡Œæ–‡æœ¬</li>\n            <li>æˆ‘æ˜¯ç¬¬ä¸‰è¡Œæ–‡æœ¬</li>\n          </ul>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<style>\n  table {\n    border: 1px solid;\n    margin: 0 auto;\n  }\n</style>\n```\n\n### æ°´å¹³å±…ä¸­ - ä¸å®šå®½å—çŠ¶å…ƒç´ æ–¹æ³•ï¼ˆäºŒï¼‰\n\næ”¹å˜å—çº§å…ƒç´ çš„ `display` ä¸º `inline` ç±»å‹ï¼ˆè®¾ç½®ä¸º è¡Œå†…å…ƒç´  æ˜¾ç¤ºï¼‰ï¼Œç„¶åä½¿ç”¨ `text-align:center` æ¥å®ç°å±…ä¸­æ•ˆæœã€‚\n\n```html\n<body>\n  <div class=\"container\">\n    <ul>\n      <li><a href=\"#\">1</a></li>\n      <li><a href=\"#\">2</a></li>\n      <li><a href=\"#\">3</a></li>\n    </ul>\n  </div>\n</body>\n<style>\n  .container {\n    text-align: center;\n  }\n  /* margin:0;padding:0ï¼ˆæ¶ˆé™¤æ–‡æœ¬ä¸divè¾¹æ¡†ä¹‹é—´çš„é—´éš™ï¼‰*/\n  .container ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    display: inline;\n  }\n  /* margin-right:8pxï¼ˆè®¾ç½®liæ–‡æœ¬ä¹‹é—´çš„é—´éš”ï¼‰*/\n  .container li {\n    margin-right: 8px;\n    display: inline;\n  }\n</style>\n```\n\nè¿™ç§æ–¹æ³•ç›¸æ¯”ç¬¬ä¸€ç§æ–¹æ³•çš„ä¼˜åŠ¿æ˜¯ä¸ç”¨å¢åŠ æ— è¯­ä¹‰æ ‡ç­¾ï¼Œä½†ä¹Ÿå­˜åœ¨ç€ä¸€äº›é—®é¢˜ï¼šå®ƒå°†å—çŠ¶å…ƒç´ çš„ display ç±»å‹æ”¹ä¸º inlineï¼Œå˜æˆäº†**è¡Œå†…å…ƒç´ **ï¼Œæ‰€ä»¥å°‘äº†ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚è®¾å®šé•¿åº¦å€¼\n\n### æ°´å¹³å±…ä¸­ - ä¸å®šå®½å—çŠ¶å…ƒç´ æ–¹æ³•ï¼ˆä¸‰ï¼‰\n\n- é€šè¿‡ç»™çˆ¶å…ƒç´ è®¾ç½® `float`ï¼Œç„¶åç»™çˆ¶å…ƒç´ è®¾ç½® `position:relative` å’Œ `left:50%`ï¼Œå­å…ƒç´ è®¾ç½® `position:relative` å’Œ `left: -50%` æ¥å®ç°æ°´å¹³å±…ä¸­\n- `div` ä¸­é—´æœ‰æ¡å¹³åˆ†ç•Œçº¿ï¼Œç„¶åå°† `ul` çš„æœ€å·¦ç«¯ä¸ `div` çš„å¹³åˆ†çº¿å¯¹å…¶ï¼›\n- `li` ä¸­æœ‰æ¡å¹³åˆ†çº¿ï¼Œç„¶åå°† `li` çš„å¹³åˆ†çº¿ä¸ `ul` çš„æœ€å·¦ç«¯å¯¹å…¶ï¼›\n\nç®€å•çš„è¯´å°±æ˜¯ï¼š`div` å’Œ `li` éƒ½æœ‰æ¡å¹³åˆ†çº¿ï¼Œç„¶å `ul` çš„æœ€å·¦ç«¯ä½œä¸ºå¹³åˆ†çº¿æ ‡å‡†ï¼Œ`div` å’Œ `li` éƒ½ä¸å…¶å¯¹å…¶ï¼Œç„¶å `div` ç¡®å®šå¤–æ¡†ï¼Œåˆ™ `li` å°±æ˜¯åœ¨ `div` çš„ä¸­é—´\n\næ³¨ï¼šå¯ä»¥ä½¿ç”¨ `clear:both;` æ¸…é™¤æµ®åŠ¨\n\n```html\n<body>\n  <div class=\"container\">\n    <ul>\n      <li><a href=\"#\">1</a></li>\n      <li><a href=\"#\">2</a></li>\n      <li><a href=\"#\">3</a></li>\n    </ul>\n  </div>\n</body>\n<style>\n  .container {\n    float: left;\n    position: relative;\n    left: 50%;\n  }\n  .container ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n\n    position: relative;\n    left: -50%;\n  }\n  .container li {\n    float: left;\n    display: inline;\n    margin-right: 8px;\n  }\n</style>\n```\n\n### å‚ç›´å±…ä¸­ - çˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å•è¡Œæ–‡æœ¬\n\nåˆ†ä¸¤ç§æƒ…å†µï¼šçˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å•è¡Œæ–‡æœ¬ï¼Œä»¥åŠçˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å¤šè¡Œæ–‡æœ¬\n\nçˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å•è¡Œæ–‡æœ¬çš„ç«–ç›´å±…ä¸­çš„æ–¹æ³•æ˜¯é€šè¿‡è®¾ç½®çˆ¶å…ƒç´ çš„ height å’Œ line-height é«˜åº¦ä¸€è‡´æ¥å®ç°çš„ ï¼ˆheight: è¯¥å…ƒç´ çš„é«˜åº¦ï¼Œline-height: é¡¾åæ€ä¹‰ï¼Œè¡Œé«˜ï¼ˆè¡Œé—´è·ï¼‰ï¼ŒæŒ‡åœ¨æ–‡æœ¬ä¸­ï¼Œè¡Œä¸è¡Œä¹‹é—´çš„**åŸºçº¿é—´çš„è·ç¦»** ï¼‰\n\n`line-height` ä¸ `font-size` çš„è®¡ç®—å€¼ä¹‹å·®ï¼Œåœ¨ CSS ä¸­æˆä¸ºâ€œè¡Œé—´è·â€ã€‚åˆ†ä¸ºä¸¤åŠï¼Œåˆ†åˆ«åŠ åˆ°ä¸€ä¸ªæ–‡æœ¬è¡Œå†…å®¹çš„é¡¶éƒ¨å’Œåº•éƒ¨\n\nè¿™ç§æ–‡å­—è¡Œé«˜ä¸å—é«˜ä¸€è‡´å¸¦æ¥äº†ä¸€ä¸ªå¼Šç«¯ï¼šå½“æ–‡å­—å†…å®¹çš„é•¿åº¦å¤§äºå—çš„å®½æ—¶ï¼Œå°±æœ‰å†…å®¹è„±ç¦»äº†å—ï¼ˆæº¢å‡ºï¼‰\n\n```html\n<div class=\"container\">\n  hi,imooc!\n</div>\n<style>\n  .container {\n    height: 100px;\n    line-height: 100px;\n    background: #999;\n  }\n</style>\n```\n\n### å‚ç›´å±…ä¸­ - çˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å¤šè¡Œæ–‡æœ¬ï¼ˆæ–¹æ³•ä¸€ï¼‰\n\nä½¿ç”¨æ’å…¥ table (åŒ…æ‹¬ tbodyã€trã€td)æ ‡ç­¾ï¼ŒåŒæ—¶è®¾ç½® `vertical-alignï¼šmiddle`\n\nCSS ä¸­æœ‰ä¸€ä¸ªç”¨äºç«–ç›´å±…ä¸­çš„å±æ€§ `vertical-align`ï¼Œåœ¨çˆ¶å…ƒç´ è®¾ç½®æ­¤æ ·å¼æ—¶ï¼Œä¼šå¯¹ inline-block ç±»å‹çš„å­å…ƒç´ éƒ½æœ‰ç”¨ã€‚ä¸‹é¢çœ‹ä¸€ä¸‹ä¾‹å­ï¼š\n\n```html\n<table>\n  <tbody>\n    <tr>\n      <td class=\"wrap\">\n        <div>\n          <p>çœ‹æˆ‘æ˜¯å¦å¯ä»¥å±…ä¸­ã€‚</p>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<style>\n  table td {\n    height: 500px;\n    background: #ccc;\n  }\n</style>\n```\n\nå› ä¸º td æ ‡ç­¾é»˜è®¤æƒ…å†µä¸‹å°±é»˜è®¤è®¾ç½®äº† `vertical-align: middle`ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ˜¾å¼åœ°è®¾ç½®äº†\n\n### å‚ç›´å±…ä¸­ - çˆ¶å…ƒç´ é«˜åº¦ç¡®å®šçš„å¤šè¡Œæ–‡æœ¬ï¼ˆæ–¹æ³•äºŒï¼‰\n\nåœ¨ chromeã€firefox åŠ IE8 ä»¥ä¸Šçš„æµè§ˆå™¨ä¸‹å¯ä»¥è®¾ç½®å—çº§å…ƒç´ çš„ display ä¸º table-cellï¼ˆè®¾ç½®ä¸ºè¡¨æ ¼å•å…ƒæ˜¾ç¤ºï¼‰ï¼Œæ¿€æ´» vertical-align å±æ€§ï¼Œä½†æ³¨æ„ IE6ã€7 å¹¶ä¸æ”¯æŒè¿™ä¸ªæ ·å¼ï¼Œå…¼å®¹æ€§æ¯”è¾ƒå·®\n\n```html\n<div class=\"container\">\n  <div>\n    <p>çœ‹æˆ‘æ˜¯å¦å¯ä»¥å±…ä¸­ã€‚</p>\n    <p>çœ‹æˆ‘æ˜¯å¦å¯ä»¥å±…ä¸­ã€‚</p>\n    <p>çœ‹æˆ‘æ˜¯å¦å¯ä»¥å±…ä¸­ã€‚</p>\n  </div>\n</div>\n<style>\n  .container {\n    height: 300px;\n    background: #ccc;\n    display: table-cell; /*IE8ä»¥ä¸ŠåŠChromeã€Firefox*/\n    vertical-align: middle; /*IE8ä»¥ä¸ŠåŠChromeã€Firefox*/\n  }\n</style>\n```\n\nè¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯ä¸ç”¨æ·»åŠ å¤šä½™çš„æ— æ„ä¹‰çš„æ ‡ç­¾ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒçš„å…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œä¸å…¼å®¹ IE6ã€7 è€Œä¸”è¿™æ ·ä¿®æ”¹ display çš„ block å˜æˆäº† table-cellï¼Œç ´åäº†åŸæœ‰çš„å—çŠ¶å…ƒç´ çš„æ€§è´¨ï¼ˆç¬”è€…ï¼šIE6ã€7 åŸºæœ¬å¯ä»¥æ”¾å¼ƒäº†ï¼‰\n\n### éšæ€§æ”¹å˜ display ç±»å‹\n\næœ‰ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡å°±æ˜¯å½“ä¸ºå…ƒç´ ï¼ˆä¸è®ºä¹‹å‰æ˜¯ä»€ä¹ˆç±»å‹å…ƒç´ ï¼Œdisplay:none é™¤å¤–ï¼‰è®¾ç½®ä»¥ä¸‹ 2 ä¸ªå¥ä¹‹ä¸€ï¼š\n\n1. `position : absolute`\n2. `float : left` æˆ– `float:right`\n   åªè¦ HTML ä»£ç ä¸­å‡ºç°ä»¥ä¸Šä¸¤å¥ä¹‹ä¸€ï¼Œå…ƒç´ çš„ display æ˜¾ç¤ºç±»å‹å°±ä¼šè‡ªåŠ¨å˜ä¸ºä»¥ `display:inline-block`ï¼ˆå—çŠ¶å…ƒç´ ï¼‰çš„æ–¹å¼æ˜¾ç¤ºï¼Œå½“ç„¶å°±å¯ä»¥è®¾ç½®å…ƒç´ çš„ width å’Œ height äº†ï¼Œä¸”é»˜è®¤å®½åº¦ä¸å æ»¡çˆ¶å…ƒç´ \n\nå¦‚ä¸‹é¢çš„ä»£ç ï¼Œ`a` æ ‡ç­¾æ˜¯ è¡Œå†…å…ƒç´  ï¼Œæ‰€ä»¥è®¾ç½®å®ƒçš„ width æ˜¯ æ²¡æœ‰æ•ˆæœçš„ï¼Œä½†æ˜¯è®¾ç½®ä¸º `position:absolute` ä»¥åï¼Œå°±å¯ä»¥äº†\n\n```html\n<div class=\"container\">\n  <a href=\"#\" title=\"\">è¿›å…¥è¯¾ç¨‹è¯·å•å‡»è¿™é‡Œ</a>\n</div>\n<style>\n  .container a {\n    position: absolute;\n    width: 200px;\n    background: #ccc;\n  }\n</style>\n```\n","tags":["html","css"]},{"title":"IMOOC HTML+CSS åŸºç¡€è¯¾ç¨‹ Part 3","url":"/2017/02/26/imooc-html-css-basic-course-part3/","content":"\næ…•è¯¾ç½‘ä¸Šã€ HTML+CSS åŸºç¡€è¯¾ç¨‹ã€‘å­¦ä¹ ç¬”è®°ã€‚æœ¬æ–‡ä¸»è¦å†…å®¹ï¼š CSS ç›’æ¨¡å‹ã€CSS å¸ƒå±€æ¨¡å‹\n\n<!-- more -->\n\n## ç¬¬ 11 ç«  CSS ç›’æ¨¡å‹\n\n1ã€å…ƒç´ åˆ†ç±»\nHTML ä¸­æ ‡ç­¾å…ƒç´ å¤§ä½“è¢«åˆ†ä¸ºä¸‰ç±»ï¼šå—çŠ¶å…ƒç´ ã€å†…è”å…ƒç´ ï¼ˆåˆå«è¡Œå†…å…ƒç´ ï¼‰å’Œå†…è”å—çŠ¶å…ƒç´ ã€‚å¸¸ç”¨çš„å—çŠ¶å…ƒç´ æœ‰ï¼š\n\n```txt\n<div>ã€<p>ã€<h1>...<h6>ã€<ol>ã€<ul>ã€<dl>ã€<table>ã€<address>ã€<blockquote> ã€<form>\n```\n\nå¸¸ç”¨çš„å†…è”å…ƒç´ æœ‰ï¼š\n\n```txt\n<a>ã€<span>ã€<br>ã€<i>ã€<em>ã€<strong>ã€<label>ã€<q>ã€<var>ã€<cite>ã€<code>\n```\n\nå¸¸ç”¨çš„å†…è”å—çŠ¶å…ƒç´ æœ‰ï¼š\n\n```txt\n<img>ã€<input>\n```\n\n2ã€å—çº§å…ƒç´ \n\nåœ¨ HTML ä¸­ `<div>`ã€ `<p>`ã€`<h1>`ã€`<form>`ã€`<ul>` å’Œ `<li>` å°±æ˜¯å—çº§å…ƒç´ ã€‚è®¾ç½® `display:block` å°±æ˜¯å°†å…ƒç´ æ˜¾ç¤ºä¸ºå—çº§å…ƒç´ ã€‚\n\nå¦‚ä¸‹ä»£ç å°±æ˜¯å°†å†…è”å…ƒç´  `a` è½¬æ¢ä¸ºå—çŠ¶å…ƒç´ ï¼š\n\n```css\na {\n  display: block;\n}\n```\n\nå—çº§å…ƒç´ ç‰¹ç‚¹ï¼š\n\n- æ¯ä¸ªå—çº§å…ƒç´ éƒ½ä»æ–°çš„ä¸€è¡Œå¼€å§‹ï¼Œå¹¶ä¸”å…¶åçš„å…ƒç´ ä¹Ÿå¦èµ·ä¸€è¡Œï¼›\n- å…ƒç´ çš„é«˜åº¦ã€å®½åº¦ã€è¡Œé«˜ä»¥åŠé¡¶å’Œåº•è¾¹è·éƒ½å¯è®¾ç½®ï¼›\n- å…ƒç´ å®½åº¦åœ¨ä¸è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œæ˜¯å®ƒæœ¬èº«çˆ¶å®¹å™¨çš„ 100%ï¼ˆå’Œçˆ¶å…ƒç´ çš„å®½åº¦ä¸€è‡´ï¼‰ï¼Œé™¤éè®¾å®šä¸€ä¸ªå®½åº¦ï¼›\n\n3ã€å†…è”å…ƒç´ \n\nåœ¨ HTML ä¸­ï¼Œ`<span>`ã€`<a>`ã€`<label>`ã€ `<strong>` å’Œ `<em>` å°±æ˜¯å…¸å‹çš„å†…è”å…ƒç´ ï¼ˆè¡Œå†…å…ƒç´ ï¼‰ï¼ˆinlineï¼‰å…ƒç´ ã€‚å½“ç„¶å—çŠ¶å…ƒç´ ä¹Ÿå¯ä»¥é€šè¿‡ä»£ç  `display:inline` å°†å…ƒç´ è®¾ç½®ä¸ºå†…è”å…ƒç´ ã€‚\n\nå¦‚ä¸‹ä»£ç å°±æ˜¯å°†å—çŠ¶å…ƒç´  `div` è½¬æ¢ä¸ºå†…è”å…ƒç´ ï¼Œä»è€Œä½¿ `div` å…ƒç´ å…·æœ‰å†…è”å…ƒç´ ç‰¹ç‚¹\n\n```css\ndiv {\n  display: inline;\n}\n```\n\nå†…è”å…ƒç´ ç‰¹ç‚¹ï¼š\n\n- å’Œå…¶ä»–å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Šï¼›\n- å…ƒç´ çš„é«˜åº¦ã€å®½åº¦åŠé¡¶éƒ¨å’Œåº•éƒ¨è¾¹è·ä¸å¯è®¾ç½®ï¼›\n- å…ƒç´ çš„å®½åº¦å°±æ˜¯å®ƒåŒ…å«çš„æ–‡å­—æˆ–å›¾ç‰‡çš„å®½åº¦ï¼Œä¸å¯æ”¹å˜ï¼›\n\n4ã€å†…è”å—çŠ¶å…ƒç´ \n\nå†…è”å—çŠ¶å…ƒç´ ï¼ˆinline-blockï¼‰å°±æ˜¯åŒæ—¶å…·å¤‡å†…è”å…ƒç´ ã€å—çŠ¶å…ƒç´ çš„ç‰¹ç‚¹ã€‚`<img>`ã€`<input>` æ ‡ç­¾å°±æ˜¯è¿™ç§å†…è”å—çŠ¶æ ‡ç­¾ï¼š\n\n```css\ndiv {\n  display: inline-block;\n}\n```\n\ninline-block å…ƒç´ ç‰¹ç‚¹ï¼š\n\n- å’Œå…¶ä»–å…ƒç´ éƒ½åœ¨ä¸€è¡Œä¸Šï¼›\n- å…ƒç´ çš„é«˜åº¦ã€å®½åº¦ã€è¡Œé«˜ä»¥åŠé¡¶å’Œåº•è¾¹è·éƒ½å¯è®¾ç½®ï¼›\n\n5ã€ç›’æ¨¡å‹\n\n- å†…å¡«å……ï¼ˆpaddingï¼‰ï¼šé¡µé¢å…ƒç´ ä¸å†…å®¹ä¹‹é—´çš„è·ç¦»\n- å¤–è¾¹è·ï¼ˆmarginï¼‰ï¼šä¸¤ä¸ªç›’å­æ¨¡å‹ä¹‹é—´çš„è·ç¦»\n- è¾¹æ¡†ï¼ˆborderï¼‰\n- å†…å¡«å……ã€å¤–è¾¹è·ã€è¾¹æ¡†éƒ½æœ‰ 4 ä¸ªæ–¹å‘ï¼ˆå¦‚å†…å¡«å……åˆ†ä¸º padding-top/padding-bottom/padding-left/padding-rightï¼‰\n\næ³¨æ„ï¼šå†…éƒ¨å…ƒç´ çš„å®é™…é«˜åº¦æ˜¯ï¼šå†…å®¹é«˜åº¦+ä¸Šä¸‹å†…å¡«å……é«˜åº¦+ä¸Šä¸‹è¾¹æ¡†çš„é«˜åº¦ï¼Œå®½åº¦åŒç†\n\n6ã€è¾¹æ¡†\n\nè¾¹æ¡†å¯ä»¥è®¾ç½®å®ƒçš„ç²—ç»†ã€æ ·å¼å’Œé¢œè‰²\n\n```css\ndiv {\n  border: 2px solid red;\n}\n```\n\nä¸Šé¢æ˜¯ border ä»£ç çš„ç¼©å†™å½¢å¼ï¼Œåˆ†å¼€å†™ï¼š\n\n```css\ndiv {\n  border-width: 2px;\n  border-style: solid;\n  border-color: red;\n}\n```\n\næ³¨æ„ï¼š\n\n- border-styleï¼ˆè¾¹æ¡†æ ·å¼ï¼‰å¸¸è§æ ·å¼æœ‰ï¼šdashedï¼ˆè™šçº¿ï¼‰| dottedï¼ˆç‚¹çº¿ï¼‰| solidï¼ˆå®çº¿ï¼‰\n- border-colorï¼ˆè¾¹æ¡†é¢œè‰²ï¼‰ä¸­çš„é¢œè‰²å¯è®¾ç½®ä¸ºåå…­è¿›åˆ¶é¢œè‰²ï¼Œå¦‚ï¼šborder-color:#888;\n- border-widthï¼ˆè¾¹æ¡†å®½åº¦ï¼‰ä¸­çš„å®½åº¦ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºï¼šthin | medium | thickï¼Œæœ€å¸¸è¿˜æ˜¯ç”¨è±¡ç´ ï¼ˆpxï¼‰\n\nå•ç‹¬è®¾ç½®æŸä¸€è¾¹æ¡†\n\n```css\ndiv {\n  border-bottom: 1px solid red;\n  border-top: 1px solid red;\n  border-right: 1px solid red;\n  border-left: 1px solid red;\n}\n```\n\n7ã€å®½åº¦å’Œé«˜åº¦\n\nCSS å®šä¹‰çš„å®½ï¼ˆwidthï¼‰å’Œé«˜ï¼ˆheightï¼‰ï¼ŒæŒ‡çš„æ˜¯å¡«å……ä»¥é‡Œçš„å†…å®¹èŒƒå›´\n\nå› æ­¤ä¸€ä¸ªå…ƒç´ å®é™…å®½åº¦ï¼ˆç›’å­çš„å®½åº¦ï¼‰= å·¦è¾¹ç•Œ + å·¦è¾¹æ¡† + å·¦å¡«å…… + å†…å®¹å®½åº¦ + å³å¡«å…… + å³è¾¹æ¡† + å³è¾¹ç•Œ\n\n![ä¸€ä¸ªå…ƒç´ å®é™…å®½åº¦](https://img.mukewang.com/539fbb3a0001304305570259.jpg)\n\n```css\ndiv {\n  width: 200px;\n  padding: 20px;\n  border: 1px solid red;\n  margin: 10px;\n}\n```\n\nå…ƒç´ çš„å®é™…é•¿åº¦ä¸ºï¼š10px + 1px + 20px + 200px + 20px + 1px + 10px = 262px\n\n![å…ƒç´ çš„å®é™…é•¿åº¦](https://img.mukewang.com/543b4cae0001b34304300350.jpg)\n\n9ã€å¡«å……\n\nå…ƒç´ å†…å®¹ä¸è¾¹æ¡†ä¹‹é—´æ˜¯å¯ä»¥è®¾ç½®è·ç¦»çš„ï¼Œç§°ä¹‹ä¸ºâ€œå¡«å……â€ã€‚å¡«å……ä¹Ÿå¯åˆ†ä¸ºä¸Šã€å³ã€ä¸‹ã€å·¦ï¼ˆé¡ºæ—¶é’ˆï¼‰\n\n```css\ndiv {\n  padding: 20px 10px 15px 30px;\n}\n```\n\nå¯ä»¥åˆ†å¼€å†™ä¸Šé¢ä»£ç ï¼š\n\n```css\ndiv {\n  padding-top: 20px;\n  padding-right: 10px;\n  padding-bottom: 15px;\n  padding-left: 30px;\n}\n```\n\nå¦‚æœä¸Šã€å³ã€ä¸‹ã€å·¦çš„å¡«å……éƒ½ä¸º 10px; å¯ä»¥è¿™ä¹ˆå†™ï¼š\n\n```css\ndiv {\n  padding: 10px;\n}\n```\n\nå¦‚æœä¸Šä¸‹å¡«å……ä¸€æ ·ä¸º 10pxï¼Œå·¦å³ä¸€æ ·ä¸º 20pxï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š\n\n```css\ndiv {\n  padding: 10px 20px;\n}\n```\n\n10ã€è¾¹ç•Œ\n\nå…ƒç´ ä¸å…¶å®ƒå…ƒç´ ä¹‹é—´çš„è·ç¦»å¯ä»¥ä½¿ç”¨è¾¹ç•Œï¼ˆmarginï¼‰æ¥è®¾ç½®ã€‚è¾¹ç•Œä¹Ÿæ˜¯å¯åˆ†ä¸ºä¸Šã€å³ã€ä¸‹ã€å·¦\n\n```css\ndiv {\n  margin: 20px 10px 15px 30px;\n}\n```\n\nå…¶ä»–åŒ `padding`\n\n## ç¬¬ 12 ç«  CSS å¸ƒå±€æ¨¡å‹\n\n1ã€CSS å¸ƒå±€æ¨¡å‹\n\nå¦‚æœè¯´å¸ƒå±€æ¨¡å‹æ˜¯æœ¬ï¼Œé‚£ä¹ˆ CSS å¸ƒå±€æ¨¡æ¿å°±æ˜¯æœ«äº†ï¼Œæ˜¯å¤–åœ¨çš„è¡¨ç°å½¢å¼ã€‚CSS åŒ…å« 3 ç§åŸºæœ¬çš„å¸ƒå±€æ¨¡å‹ï¼Œç”¨è‹±æ–‡æ¦‚æ‹¬ä¸ºï¼šFlowã€Layer å’Œ Float\n\n- æµåŠ¨æ¨¡å‹ï¼ˆFlowï¼‰\n- æµ®åŠ¨æ¨¡å‹ (Float)\n- å±‚æ¨¡å‹ï¼ˆLayerï¼‰\n\n2ã€æµåŠ¨æ¨¡å‹\n\næµåŠ¨ï¼ˆFlowï¼‰æ˜¯é»˜è®¤çš„ç½‘é¡µå¸ƒå±€æ¨¡å¼ã€‚æµåŠ¨å¸ƒå±€æ¨¡å‹å…·æœ‰ 2 ä¸ªæ¯”è¾ƒå…¸å‹çš„ç‰¹å¾ï¼š\n\n- ç¬¬ä¸€ç‚¹ï¼Œå—çŠ¶å…ƒç´ éƒ½ä¼šåœ¨æ‰€å¤„çš„åŒ…å«å…ƒç´ å†…è‡ªä¸Šè€Œä¸‹æŒ‰é¡ºåºå‚ç›´å»¶ä¼¸åˆ†å¸ƒï¼Œå› ä¸ºåœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå—çŠ¶å…ƒç´ çš„å®½åº¦éƒ½ä¸º 100%ã€‚å®é™…ä¸Šï¼Œå—çŠ¶å…ƒç´ éƒ½ä¼šä»¥è¡Œçš„å½¢å¼å æ®ä½ç½®\n\n```html\n<div id=\"box2\">box2</div>\n<!--å—çŠ¶å…ƒç´ ï¼Œç”±äºæ²¡æœ‰è®¾ç½®å®½åº¦ï¼Œå®½åº¦é»˜è®¤æ˜¾ç¤ºä¸º100%-->\n<h1>æ ‡é¢˜</h1>\n<!--å—çŠ¶å…ƒç´ ï¼Œç”±äºæ²¡æœ‰è®¾ç½®å®½åº¦ï¼Œå®½åº¦é»˜è®¤æ˜¾ç¤ºä¸º100%-->\n<p>\n  æ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µæ–‡æœ¬æ®µã€‚\n</p>\n<!--å—çŠ¶å…ƒç´ ï¼Œç”±äºæ²¡æœ‰è®¾ç½®å®½åº¦ï¼Œå®½åº¦é»˜è®¤æ˜¾ç¤ºä¸º100%-->\n<div id=\"box1\">box1</div>\n<!--å—çŠ¶å…ƒç´ ï¼Œç”±äºè®¾ç½®äº†width:300pxï¼Œå®½åº¦æ˜¾ç¤ºä¸º300px-->\n```\n\nç¬¬äºŒç‚¹ï¼Œåœ¨æµåŠ¨æ¨¡å‹ä¸‹ï¼Œå†…è”å…ƒç´ éƒ½ä¼šåœ¨æ‰€å¤„çš„åŒ…å«å…ƒç´ å†…ä»å·¦åˆ°å³æ°´å¹³åˆ†å¸ƒæ˜¾ç¤º\n\n```html\n<a href=\"http://www.imooc.com\">www.imooc.com</a><span>å¼ºè°ƒ</span><em>é‡ç‚¹</em>\n<strong>å¼ºè°ƒ</strong>\n```\n\n3ã€æµ®åŠ¨æ¨¡å‹\n\nå—çŠ¶å…ƒç´ è¿™ä¹ˆéœ¸é“éƒ½æ˜¯ç‹¬å ä¸€è¡Œï¼Œè®¾ç½®å…ƒç´ æµ®åŠ¨å¯ä»¥å®ç°è®©ä¸¤ä¸ªå—çŠ¶å…ƒç´ å¹¶æ’æ˜¾ç¤º\n\nä»»ä½•å…ƒç´ åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸èƒ½æµ®åŠ¨çš„ï¼Œä½†å¯ä»¥ç”¨ CSS å®šä¹‰ä¸ºæµ®åŠ¨ï¼Œå¦‚ divã€pã€tableã€img ç­‰å…ƒç´ éƒ½å¯ä»¥è¢«å®šä¹‰ä¸ºæµ®åŠ¨ã€‚å¦‚ä¸‹ä»£ç å¯ä»¥å®ç°ä¸¤ä¸ª div å…ƒç´ ä¸€è¡Œæ˜¾ç¤ºã€‚\n\n```html\n<style>\n  div {\n    width: 200px;\n    height: 200px;\n    border: 2px red solid;\n    float: left;\n  }\n</style>\n\n<div id=\"div1\"></div>\n<div id=\"div2\"></div>\n```\n\n4ã€å±‚æ¨¡å‹\n\nå±‚å¸ƒå±€æ¨¡å‹å°±åƒæ˜¯å›¾åƒè½¯ä»¶ PhotoShop ä¸­éå¸¸æµè¡Œçš„å›¾å±‚ç¼–è¾‘åŠŸèƒ½ä¸€æ ·ï¼Œæ¯ä¸ªå›¾å±‚èƒ½å¤Ÿç²¾ç¡®å®šä½æ“ä½œã€‚ç½‘é¡µä¸Šå±€éƒ¨ä½¿ç”¨å±‚å¸ƒå±€æ˜¯æœ‰å…¶æ–¹ä¾¿ä¹‹å¤„çš„\n\nCSS å®šä¹‰äº†ä¸€ç»„å®šä½ï¼ˆpositioningï¼‰å±æ€§æ¥æ”¯æŒå±‚å¸ƒå±€æ¨¡å‹\n\n- ç»å¯¹å®šä½ï¼ˆposition: absoluteï¼‰\n- ç›¸å¯¹å®šä½ï¼ˆposition: relativeï¼‰\n- å›ºå®šå®šä½ï¼ˆposition: fixedï¼‰\n  å¦‚æœæƒ³ä¸ºå…ƒç´ è®¾ç½®å±‚æ¨¡å‹ä¸­çš„ç»å¯¹å®šä½ï¼Œéœ€è¦è®¾ç½® position:absolute(è¡¨ç¤ºç»å¯¹å®šä½)ï¼Œè¿™æ¡è¯­å¥çš„ä½œç”¨å°†å…ƒç´ ä»æ–‡æ¡£æµä¸­æ‹–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨ leftã€rightã€topã€bottom å±æ€§ç›¸å¯¹äºå…¶æœ€æ¥è¿‘çš„ä¸€ä¸ªå…·æœ‰å®šä½å±æ€§çš„çˆ¶åŒ…å«å—è¿›è¡Œç»å¯¹å®šä½ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„åŒ…å«å—ï¼Œåˆ™ç›¸å¯¹äº body å…ƒç´ ï¼Œå³ç›¸å¯¹äºæµè§ˆå™¨çª—å£ã€‚\n\n4ã€å±‚æ¨¡å‹ - ç»å¯¹å®šä½\n\nå¦‚æœæƒ³ä¸ºå…ƒç´ è®¾ç½®å±‚æ¨¡å‹ä¸­çš„ç»å¯¹å®šä½ï¼Œéœ€è¦è®¾ç½® `position:absolute` ï¼ˆè¡¨ç¤ºç»å¯¹å®šä½ï¼‰ï¼Œè¿™æ¡è¯­å¥çš„ä½œç”¨å°†å…ƒç´ ä»æ–‡æ¡£æµä¸­æ‹–å‡ºæ¥ï¼Œç„¶åä½¿ç”¨ leftã€rightã€topã€bottom å±æ€§ç›¸å¯¹äºå…¶**æœ€æ¥è¿‘çš„ä¸€ä¸ªå…·æœ‰å®šä½å±æ€§**çš„çˆ¶åŒ…å«å—è¿›è¡Œç»å¯¹å®šä½ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„åŒ…å«å—ï¼Œåˆ™ç›¸å¯¹äº body å…ƒç´ ï¼Œå³ç›¸å¯¹äºæµè§ˆå™¨çª—å£\n\nå¦‚ä¸‹é¢ä»£ç å¯ä»¥å®ç° div å…ƒç´ ç›¸å¯¹äºæµè§ˆå™¨çª—å£å‘å³ç§»åŠ¨ 100pxï¼Œå‘ä¸‹ç§»åŠ¨ 50px\n\n```html\n<style>\n  div {\n    width: 200px;\n    height: 200px;\n    border: 2px red solid;\n    position: absolute;\n    left: 100px;\n    top: 50px;\n  }\n</style>\n\n<div id=\"div1\"></div>\n```\n\n![å±‚æ¨¡å‹ - ç»å¯¹å®šä½ | 400x0](https://img.mukewang.com/53a00b130001e86707360547.jpg)\n\n5ã€å±‚æ¨¡å‹ - ç›¸å¯¹å®šä½\n\nå¦‚æœæƒ³ä¸ºå…ƒç´ è®¾ç½®å±‚æ¨¡å‹ä¸­çš„ç›¸å¯¹å®šä½ï¼Œéœ€è¦è®¾ç½® `position:relative`ï¼ˆè¡¨ç¤ºç›¸å¯¹å®šä½ï¼‰ï¼Œå®ƒé€šè¿‡ leftã€rightã€topã€bottom å±æ€§ç¡®å®šå…ƒç´ åœ¨æ­£å¸¸æ–‡æ¡£æµä¸­çš„åç§»ä½ç½®ã€‚ç›¸å¯¹å®šä½å®Œæˆçš„è¿‡ç¨‹æ˜¯é¦–å…ˆæŒ‰ static(float) æ–¹å¼ç”Ÿæˆä¸€ä¸ªå…ƒç´ (å¹¶ä¸”å…ƒç´ åƒå±‚ä¸€æ ·æµ®åŠ¨äº†èµ·æ¥)ï¼Œç„¶åç›¸å¯¹äºä»¥å‰çš„ä½ç½®ç§»åŠ¨ï¼Œç§»åŠ¨çš„æ–¹å‘å’Œå¹…åº¦ç”± leftã€rightã€topã€bottom å±æ€§ç¡®å®šï¼Œåç§»å‰çš„ä½ç½®ä¿ç•™ä¸åŠ¨\n\n```html\n<style>\n  #div1 {\n    width: 200px;\n    height: 200px;\n    border: 2px red solid;\n    position: relative;\n    left: 100px;\n    top: 50px;\n  }\n</style>\n\n<div id=\"div1\"></div>\n```\n\n<img src=\"https://img.mukewang.com/53a00d2b00015c4b06190509.jpg\" height=\"350px\" />\n\nä»€ä¹ˆå«åšâ€œåç§»å‰çš„ä½ç½®ä¿ç•™ä¸åŠ¨â€å‘¢ï¼Ÿ\n\n```html\n<body>\n  <div id=\"div1\"></div>\n  <span>åç§»å‰çš„ä½ç½®è¿˜ä¿ç•™ä¸åŠ¨ï¼Œè¦†ç›–ä¸äº†å‰é¢çš„divæ²¡æœ‰åç§»å‰çš„ä½ç½®</span>\n</body>\n```\n\n<img src=\"https://img.mukewang.com/541a4bfc0001abef05940489.jpg\" height=\"350px\" />\n\n6ã€å±‚æ¨¡å‹ - å›ºå®šå®šä½\n\nfixedï¼šè¡¨ç¤ºå›ºå®šå®šä½ï¼Œä¸ absolute å®šä½ç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒçš„ç›¸å¯¹ç§»åŠ¨çš„åæ ‡æ˜¯è§†å›¾ï¼ˆå±å¹•å†…çš„ç½‘é¡µçª—å£ï¼‰æœ¬èº«ã€‚ç”±äºè§†å›¾æœ¬èº«æ˜¯å›ºå®šçš„ï¼Œå®ƒä¸ä¼šéšæµè§ˆå™¨çª—å£çš„æ»šåŠ¨æ¡æ»šåŠ¨è€Œå˜åŒ–ï¼Œé™¤éä½ åœ¨å±å¹•ä¸­ç§»åŠ¨æµè§ˆå™¨çª—å£çš„å±å¹•ä½ç½®ï¼Œæˆ–æ”¹å˜æµè§ˆå™¨çª—å£çš„æ˜¾ç¤ºå¤§å°ï¼Œå› æ­¤å›ºå®šå®šä½çš„å…ƒç´ ä¼šå§‹ç»ˆä½äºæµè§ˆå™¨çª—å£å†…è§†å›¾çš„æŸä¸ªä½ç½®ï¼Œä¸ä¼šå—æ–‡æ¡£æµåŠ¨å½±å“ï¼Œè¿™ä¸ `background-attachment:fixedÍ¾` å±æ€§åŠŸèƒ½ç›¸åŒã€‚\n\nä»¥ä¸‹ä»£ç å¯ä»¥å®ç°ç›¸å¯¹äºæµè§ˆå™¨è§†å›¾å‘å³ç§»åŠ¨ 100pxï¼Œå‘ä¸‹ç§»åŠ¨ 50pxã€‚å¹¶ä¸”æ‹–åŠ¨æ»šåŠ¨æ¡æ—¶ä½ç½®å›ºå®šä¸å˜\n\n```html\n<style type=\"text/css\">\n  #div1 {\n    width: 200px;\n    height: 200px;\n    border: 2px red solid;\n    position: fixed;\n    left: 100px;\n    top: 50px;\n  }\n</style>\n<p>\n  æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬æ–‡æœ¬ã€‚\n</p>\n...\n```\n\n7ã€Relative ä¸ Absolute ç»„åˆä½¿ç”¨\n\nä½¿ç”¨ `position:absolute` å¯ä»¥å®ç°è¢«è®¾ç½®å…ƒç´ ç›¸å¯¹äºæµè§ˆå™¨ï¼ˆbodyï¼‰è®¾ç½®å®šä½ä»¥åï¼Œä½¿ç”¨ `position:relative` å¯ä»¥ç›¸å¯¹äºå…¶å®ƒå…ƒç´ è¿›è¡Œå®šä½ã€‚ä½†æ˜¯å¿…é¡»éµå®ˆä¸‹é¢è§„èŒƒï¼š\n\n- å‚ç…§å®šä½çš„å…ƒç´ å¿…é¡»æ˜¯ç›¸å¯¹å®šä½å…ƒç´ çš„å‰è¾ˆå…ƒç´ ï¼š\n\n```html\n<div id=\"box1\">\n  <!--å‚ç…§å®šä½çš„å…ƒç´ -->\n  <div id=\"box2\">ç›¸å¯¹å‚ç…§å…ƒç´ è¿›è¡Œå®šä½</div>\n  <!--ç›¸å¯¹å®šä½å…ƒç´ -->\n</div>\n```\n\n- å‚ç…§å®šä½çš„å…ƒç´ å¿…é¡»åŠ å…¥ `position:relative;`\n\n```css\n#box1 {\n  width: 200px;\n  height: 200px;\n  position: relative;\n}\n```\n\n- å®šä½å…ƒç´ åŠ å…¥ `position:absolute`ï¼Œä¾¿å¯ä»¥ä½¿ç”¨ topã€bottomã€leftã€right æ¥è¿›è¡Œåç§»å®šä½äº†\n\n```css\n#box2 {\n  position: absolute;\n  top: 20px;\n  left: 30px;\n}\n```\n\nè¿™æ · box2 å°±å¯ä»¥ç›¸å¯¹äºçˆ¶å…ƒç´  box1 å®šä½äº†ï¼ˆè¿™é‡Œæ³¨æ„å‚ç…§ç‰©å°±å¯ä»¥ä¸æ˜¯æµè§ˆå™¨äº†ï¼Œè€Œå¯ä»¥è‡ªç”±è®¾ç½®äº†ï¼‰\n","tags":["html","css"]},{"title":"IMOOC HTML+CSS åŸºç¡€è¯¾ç¨‹ Part 2","url":"/2017/02/23/imooc-html-css-basic-course-part2/","content":"\næ…•è¯¾ç½‘ä¸Šã€ HTML+CSS åŸºç¡€è¯¾ç¨‹ã€‘å­¦ä¹ ç¬”è®°ã€‚æœ¬æ–‡ä¸»è¦å†…å®¹ï¼šCSS ä»‹ç»ï¼Œé€‰æ‹©å™¨ï¼Œç»§æ‰¿ã€å±‚å å’Œç‰¹æ®Šæ€§ï¼Œæ ¼å¼åŒ–æ’ç‰ˆã€‚\n\n<!-- more -->\n\n## ç¬¬ 6 ç«  å¼€å§‹å­¦ä¹  CSSï¼Œä¸ºç½‘é¡µæ·»åŠ æ ·å¼\n\n1. è®¤è¯† CSS æ ·å¼ã€‚CSS å…¨ç§°ä¸ºâ€œå±‚å æ ·å¼è¡¨ (Cascading Style Sheets)â€ï¼Œå®ƒä¸»è¦æ˜¯ç”¨äºå®šä¹‰ HTML å†…å®¹åœ¨æµè§ˆå™¨å†…çš„æ˜¾ç¤ºæ ·å¼ï¼Œå¦‚æ–‡å­—å¤§å°ã€é¢œè‰²ã€å­—ä½“åŠ ç²—ç­‰\n2. CSS æ ·å¼çš„ä¼˜åŠ¿ã€‚æ‰¹é‡å®šä¹‰æ ·å¼\n3. CSS ä»£ç è¯­æ³•ã€‚CSS æ ·å¼ç”± `é€‰æ‹©ç¬¦` å’Œ `å£°æ˜` ç»„æˆï¼Œè€Œ `å£°æ˜` åˆç”± `å±æ€§` å’Œ `å€¼` ç»„æˆ\n   - é€‰æ‹©ç¬¦ï¼šåˆç§°é€‰æ‹©å™¨ï¼ŒæŒ‡æ˜ç½‘é¡µä¸­è¦åº”ç”¨æ ·å¼è§„åˆ™çš„å…ƒç´ \n   - å£°æ˜ï¼šåœ¨è‹±æ–‡å¤§æ‹¬å· `{}` ä¸­çš„çš„å°±æ˜¯å£°æ˜ï¼Œå±æ€§å’Œå€¼ä¹‹é—´ç”¨è‹±æ–‡å†’å· `:` åˆ†éš”ã€‚å½“æœ‰å¤šæ¡å£°æ˜æ—¶ï¼Œä¸­é—´å¯ä»¥è‹±æ–‡åˆ†å· `;` åˆ†éš”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```css\np {\n  font-size: 12px;\n  color: red;\n}\n```\n\n- æœ€åä¸€æ¡å£°æ˜å¯ä»¥æ²¡æœ‰åˆ†å·ï¼Œä½†æ˜¯ä¸ºäº†ä»¥åä¿®æ”¹æ–¹ä¾¿ï¼Œä¸€èˆ¬ä¹ŸåŠ ä¸Šåˆ†å·\n- ä¸ºäº†ä½¿ç”¨æ ·å¼æ›´åŠ å®¹æ˜“é˜…è¯»ï¼Œå¯ä»¥å°†æ¯æ¡ä»£ç å†™åœ¨ä¸€ä¸ªæ–°è¡Œå†…\n\n4ã€CSS æ³¨é‡Šä»£ç \n\nç”¨ `/*æ³¨é‡Šè¯­å¥*/` æ¥æ ‡æ˜ï¼ˆHTML ä¸­ä½¿ç”¨ `<!--æ³¨é‡Šè¯­å¥-->`ï¼‰\n\n## ç¬¬ 7 ç«  CSS æ ·å¼åŸºæœ¬çŸ¥è¯†\n\n1ã€å†…è”å¼ CSS æ ·å¼\n\nå†…è”å¼ CSS æ ·å¼è¡¨å°±æ˜¯æŠŠ CSS ä»£ç ç›´æ¥å†™åœ¨ç°æœ‰çš„ HTML æ ‡ç­¾ä¸­\n\n```html\n<p style=\"color:red\">è¿™é‡Œæ–‡å­—æ˜¯çº¢è‰²ã€‚</p>\n```\n\n2ã€åµŒå…¥å¼ CSS æ ·å¼\n\nåµŒå…¥å¼ CSS æ ·å¼ï¼Œå°±æ˜¯å¯ä»¥æŠŠ CSS æ ·å¼ä»£ç å†™åœ¨ `<style type=\"text/css\"></style>` æ ‡ç­¾ä¹‹é—´\n\n```html\n<style type=\"text/css\">\n  span {\n    color: red;\n  }\n</style>\n```\n\n3ã€å¤–éƒ¨å¼ CSS æ ·å¼\n\nå¤–éƒ¨å¼ CSS æ ·å¼ï¼ˆä¹Ÿå¯ç§°ä¸ºå¤–è”å¼ï¼‰å°±æ˜¯æŠŠ CSS ä»£ç å†™ä¸€ä¸ªå•ç‹¬çš„å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ª CSS æ ·å¼æ–‡ä»¶ä»¥ `.css` ä¸ºæ‰©å±•åï¼Œåœ¨ `<head>` å†…ï¼ˆä¸æ˜¯åœ¨ `<style>` æ ‡ç­¾å†…ï¼‰ä½¿ç”¨ `<link>` æ ‡ç­¾å°† CSS æ ·å¼æ–‡ä»¶é“¾æ¥åˆ° HTML æ–‡ä»¶å†…\n\n```html\n<link href=\"base.css\" rel=\"stylesheet\" type=\"text/css\" />\n```\n\n- CSS æ ·å¼æ–‡ä»¶åç§°ä»¥æœ‰æ„ä¹‰çš„è‹±æ–‡å­—æ¯å‘½åï¼Œå¦‚ main.css\n- `rel=\"stylesheet\" type=\"text/css\"` æ˜¯å›ºå®šå†™æ³•ä¸å¯ä¿®æ”¹\n- `<link>` æ ‡ç­¾ä½ç½®ä¸€èˆ¬å†™åœ¨ `<head>` æ ‡ç­¾ä¹‹å†…\n\n4ã€ä¸‰ç§æ–¹æ³•çš„ä¼˜å…ˆçº§\n\nå†…è”å¼ > åµŒå…¥å¼ > å¤–éƒ¨å¼\n\nä½†æ˜¯åµŒå…¥å¼>å¤–éƒ¨å¼æœ‰ä¸€ä¸ªå‰æï¼šåµŒå…¥å¼ css æ ·å¼çš„ä½ç½®ä¸€å®šåœ¨å¤–éƒ¨å¼çš„åé¢ã€‚å…¶å®æ€»ç»“æ¥è¯´ï¼Œå°±æ˜¯ **å°±è¿‘åŸåˆ™**ï¼ˆç¦»è¢«è®¾ç½®å…ƒç´ è¶Šè¿‘ä¼˜å…ˆçº§åˆ«è¶Šé«˜ï¼‰\n\n## ç¬¬ 8 ç«  CSS é€‰æ‹©å™¨\n\n1ã€ä»€ä¹ˆæ˜¯é€‰æ‹©å™¨ï¼Ÿ\n\næ¯ä¸€æ¡ CSS æ ·å¼å£°æ˜ï¼ˆå®šä¹‰ï¼‰ç”±ä¸¤éƒ¨åˆ†ç»„æˆ\n\n```css\né€‰æ‹©å™¨ {\n    æ ·å¼;\n}\n```\n\n2ã€æ ‡ç­¾é€‰æ‹©å™¨\n\næ ‡ç­¾é€‰æ‹©å™¨å…¶å®å°±æ˜¯ HTML ä»£ç ä¸­çš„æ ‡ç­¾ã€‚å¦‚å³ä¾§ä»£ç ç¼–è¾‘å™¨ä¸­çš„ `<html>`ã€`<body>`ã€`<h1>`ã€`<p>`\n\n```css\np {\n  font-size: 12px;\n  line-height: 1.6em;\n}\n```\n\n3ã€ç±»é€‰æ‹©å™¨\n\n```css\n.ç±»é€‰å™¨åç§°{cssæ ·å¼ä»£ç ;}\n```\n\n4ã€ID é€‰æ‹©å™¨\n\n```css\n#IDé€‰æ‹©å™¨åç§°{cssæ ·å¼ä»£ç ;}\n```\n\n5ã€ç±»å’Œ ID é€‰æ‹©å™¨çš„åŒºåˆ«\n\nç›¸åŒç‚¹ï¼šå¯ä»¥åº”ç”¨äºä»»ä½•å…ƒç´ \n\nä¸åŒç‚¹ï¼š\n\n- ID é€‰æ‹©å™¨åªèƒ½åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨ä¸€æ¬¡\n- å¯ä»¥ä½¿ç”¨ç±»é€‰æ‹©å™¨è¯åˆ—è¡¨æ–¹æ³•ä¸ºä¸€ä¸ªå…ƒç´ åŒæ—¶è®¾ç½®å¤šä¸ªæ ·å¼ï¼ˆä¸èƒ½ä½¿ç”¨ ID è¯åˆ—è¡¨ï¼‰\n\n```html\n<style>\n  .stress {\n    color: red;\n  }\n  .bigsize {\n    font-size: 25px;\n  }\n</style>\n<p>\n  åˆ°äº†<span class=\"stress bigsize\">ä¸‰å¹´çº§</span\n  >ä¸‹å­¦æœŸæ—¶ï¼Œæˆ‘ä»¬ç­ä¸Šäº†ä¸€èŠ‚å…¬å¼€è¯¾...\n</p>\n```\n\n6ã€å­é€‰æ‹©å™¨\n\nå­é€‰æ‹©å™¨ `>` ç”¨äºé€‰æ‹©æŒ‡å®šæ ‡ç­¾å…ƒç´ çš„ç¬¬ä¸€ä»£å­å…ƒç´ \n\n```css\n.food > li {\n  border: 1px solid red;\n}\n```\n\n7ã€åŒ…å«ï¼ˆåä»£ï¼‰é€‰æ‹©å™¨\n\nåŒ…å«é€‰æ‹©å™¨ `ç©ºæ ¼` ç”¨äºé€‰æ‹©æŒ‡å®šæ ‡ç­¾å…ƒç´ ä¸‹çš„åè¾ˆå…ƒç´ \n\n```css\n.first span {\n  color: red;\n}\n```\n\næ€»ç»“ï¼š`>` ä½œç”¨äºå…ƒç´ çš„ç¬¬ä¸€ä»£åä»£ï¼Œ`ç©ºæ ¼` ä½œç”¨äºå…ƒç´ çš„æ‰€æœ‰åä»£ã€‚\n\n8ã€é€šç”¨é€‰æ‹©å™¨\n\né€šç”¨é€‰æ‹©å™¨ `*` ä½œç”¨æ˜¯åŒ¹é… HTML ä¸­æ‰€æœ‰æ ‡ç­¾å…ƒç´ \n\n```css\n* {\n  color: red;\n}\n```\n\n9ã€ä¼ªç±»é€‰æ‹©ç¬¦\n\nä¼ªç±»é€‰æ‹©ç¬¦ï¼Œå®ƒå…è®¸ç»™ HTML ä¸å­˜åœ¨çš„æ ‡ç­¾ï¼ˆæ ‡ç­¾çš„æŸç§çŠ¶æ€ï¼‰è®¾ç½®æ ·å¼ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç»™ HTML ä¸­ä¸€ä¸ªæ ‡ç­¾å…ƒç´ çš„é¼ æ ‡æ»‘è¿‡çš„çŠ¶æ€æ¥è®¾ç½®å­—ä½“é¢œè‰²ï¼š\n\n```css\na:hover {\n  color: red;\n}\n```\n\n10ã€åˆ†ç»„é€‰æ‹©ç¬¦\n\nHTML å¤šä¸ªæ ‡ç­¾å…ƒç´ è®¾ç½®åŒä¸€ä¸ªæ ·å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç»„é€‰æ‹©ç¬¦ `,`\n\n```css\nh1,\nspan {\n  color: red;\n}\n```\n\nå®ƒç›¸å½“äºï¼š\n\n```css\nh1 {\n  color: red;\n}\nspan {\n  color: red;\n}\n```\n\n## ç¬¬ 9 ç«  CSS ç»§æ‰¿ã€å±‚å å’Œç‰¹æ®Šæ€§\n\n1ã€ç»§æ‰¿\n\nCSS çš„**æŸäº›æ ·å¼**æ˜¯å…·æœ‰ç»§æ‰¿æ€§çš„ã€‚ç»§æ‰¿æ˜¯ä¸€ç§è§„åˆ™ï¼Œå®ƒå…è®¸æ ·å¼ä¸ä»…åº”ç”¨äºæŸä¸ªç‰¹å®š HTML æ ‡ç­¾å…ƒç´ ï¼Œè€Œä¸”åº”ç”¨äºå…¶åä»£ã€‚\n\næ¯”å¦‚ä¸‹é¢ä»£ç ï¼šå¦‚æŸç§é¢œè‰²åº”ç”¨äº `p` æ ‡ç­¾ï¼Œè¿™ä¸ªé¢œè‰²è®¾ç½®ä¸ä»…åº”ç”¨ `p` æ ‡ç­¾ï¼Œè¿˜åº”ç”¨äº `p` æ ‡ç­¾ä¸­çš„æ‰€æœ‰å­å…ƒç´ æ–‡æœ¬ï¼Œè¿™é‡Œå­å…ƒç´ ä¸º `span` æ ‡ç­¾\n\n```html\np{color:red;}\n<p>ä¸‰å¹´çº§æ—¶ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ª<span>èƒ†å°å¦‚é¼ </span>çš„å°å¥³å­©ã€‚</p>\n```\n\nä½†æ³¨æ„æœ‰ä¸€äº› CSS æ ·å¼æ˜¯ä¸å…·æœ‰ç»§æ‰¿æ€§çš„ï¼Œä¾‹å¦‚ï¼š\n\n```html\np{border:1px solid red;}\n<p>ä¸‰å¹´çº§æ—¶ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ª<span>èƒ†å°å¦‚é¼ </span>çš„å°å¥³å­©ã€‚</p>\n```\n\nåœ¨ä¸Šé¢ä¾‹å­ä¸­å®ƒä»£ç çš„ä½œç”¨åªæ˜¯ç»™ `p` æ ‡ç­¾è®¾ç½®äº†è¾¹æ¡†ä¸º 1 åƒç´ ã€çº¢è‰²ã€å®å¿ƒè¾¹æ¡†çº¿ï¼Œè€Œå¯¹äºå­å…ƒç´  `span` æ˜¯æ²¡ç”¨èµ·åˆ°ä½œç”¨çš„\n\n2ã€ç‰¹æ®Šæ€§\n\næœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸ºåŒä¸€ä¸ªå…ƒç´ è®¾ç½®äº†ä¸åŒçš„ CSS æ ·å¼ä»£ç ï¼Œé‚£ä¹ˆå…ƒç´ ä¼šå¯ç”¨å“ªä¸€ä¸ª CSS æ ·å¼\n\n```html\np{color:red;} .first{color:green;}\n\n<p class=\"first\">ä¸‰å¹´çº§æ—¶ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ª<span>èƒ†å°å¦‚é¼ </span>çš„å°å¥³å­©ã€‚</p>\n```\n\n`p` å’Œ `.first` éƒ½åŒ¹é…åˆ°äº† `p` è¿™ä¸ªæ ‡ç­¾ä¸Šï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºå“ªç§é¢œè‰²å‘¢ï¼Ÿ`green` æ˜¯æ­£ç¡®çš„é¢œè‰²ã€‚å› ä¸ºæµè§ˆå™¨æ˜¯æ ¹æ®æƒå€¼æ¥åˆ¤æ–­ä½¿ç”¨å“ªç§ css æ ·å¼çš„ï¼Œæƒå€¼é«˜çš„å°±ä½¿ç”¨å“ªç§ css æ ·å¼ã€‚ä¸‹é¢æ˜¯æƒå€¼çš„è§„åˆ™ï¼š\n\n`æ ‡ç­¾` çš„æƒå€¼ä¸º 1ï¼Œ`ç±»é€‰æ‹©ç¬¦` çš„æƒå€¼ä¸º 10ï¼Œ`IDé€‰æ‹©ç¬¦` çš„æƒå€¼æœ€é«˜ä¸º 100\n\n```css\np {\n  color: red;\n} /*æƒå€¼ä¸º1*/\np span {\n  color: green;\n} /*æƒå€¼ä¸º1+1=2*/\n.warning {\n  color: white;\n} /*æƒå€¼ä¸º10*/\np span.warning {\n  color: purple;\n} /*æƒå€¼ä¸º1+1+10=12*/\n#footer .note p {\n  color: yellow;\n} /*æƒå€¼ä¸º100+10+1=111*/\n```\n\næ³¨æ„ï¼šè¿˜æœ‰ä¸€ä¸ªæƒå€¼æ¯”è¾ƒç‰¹æ®Š--ç»§æ‰¿ä¹Ÿæœ‰æƒå€¼ä½†å¾ˆä½ï¼Œæœ‰çš„æ–‡çŒ®æå‡ºå®ƒåªæœ‰ 0.1ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸ºç»§æ‰¿çš„æƒå€¼æœ€ä½\n\n3ã€å±‚å \n\nå±‚å å°±æ˜¯åœ¨ html æ–‡ä»¶ä¸­å¯¹äºåŒä¸€ä¸ªå…ƒç´ å¯ä»¥æœ‰å¤šä¸ª CSS æ ·å¼å­˜åœ¨ï¼Œå½“æœ‰ç›¸åŒæƒé‡çš„æ ·å¼å­˜åœ¨æ—¶ï¼Œä¼šæ ¹æ®è¿™äº› CSS æ ·å¼çš„å‰åé¡ºåºæ¥å†³å®šï¼Œå¤„äºæœ€åé¢çš„ css æ ·å¼ä¼šè¢«åº”ç”¨ã€‚\n\n```html\np{color:red;} p{color:green;}\n<p class=\"first\">ä¸‰å¹´çº§æ—¶ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ª<span>èƒ†å°å¦‚é¼ </span>çš„å°å¥³å­©ã€‚</p>\n```\n\næœ€å `p` ä¸­çš„æ–‡æœ¬ä¼šè®¾ç½®ä¸º greenã€‚æ‰€ä»¥ CSS æ ·å¼ä¼˜å…ˆçº§ï¼š\n\n**å†…è”æ ·å¼è¡¨ï¼ˆæ ‡ç­¾å†…éƒ¨ï¼‰> åµŒå…¥æ ·å¼è¡¨ï¼ˆå½“å‰æ–‡ä»¶ä¸­ï¼‰> å¤–éƒ¨æ ·å¼è¡¨ï¼ˆå¤–éƒ¨æ–‡ä»¶ä¸­ï¼‰**\n\n4ã€é‡è¦æ€§\n\nä½¿ç”¨ `!important` ä¸ºæŸäº›æ ·å¼è®¾ç½®å…·æœ‰æœ€é«˜æƒå€¼\n\n```html\np{color:red!important;} p{color:green;}\n<p class=\"first\">ä¸‰å¹´çº§æ—¶ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ª<span>èƒ†å°å¦‚é¼ </span>çš„å°å¥³å­©ã€‚</p>\n```\n\nè¿™æ—¶ `p` æ®µè½ä¸­çš„æ–‡æœ¬ä¼šæ˜¾ç¤ºçš„ red\n\næ³¨æ„ï¼š`!important` è¦å†™åœ¨åˆ†å·çš„å‰é¢\n\nå½“ç½‘é¡µåˆ¶ä½œè€…ä¸è®¾ç½® CSS æ ·å¼æ—¶ï¼Œæµè§ˆå™¨ä¼šæŒ‰ç…§è‡ªå·±çš„ä¸€å¥—æ ·å¼æ¥æ˜¾ç¤ºç½‘é¡µã€‚å¹¶ä¸”ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¾ç½®è‡ªå·±ä¹ æƒ¯çš„æ ·å¼ï¼Œæ¯”å¦‚æœ‰çš„ç”¨æˆ·ä¹ æƒ¯æŠŠå­—å·è®¾ç½®ä¸ºå¤§ä¸€äº›ï¼Œä½¿å…¶æŸ¥çœ‹ç½‘é¡µçš„æ–‡æœ¬æ›´åŠ æ¸…æ¥šã€‚è¿™æ—¶æ³¨æ„æ ·å¼ä¼˜å…ˆçº§ä¸ºï¼šæµè§ˆå™¨é»˜è®¤çš„æ ·å¼ < ç½‘é¡µåˆ¶ä½œè€…æ ·å¼ < ç”¨æˆ·è‡ªå·±è®¾ç½®çš„æ ·å¼ï¼Œä½†è®°ä½ `!important` ä¼˜å…ˆçº§æ ·å¼æ˜¯ä¸ªä¾‹å¤–ï¼Œæƒå€¼é«˜äºç”¨æˆ·è‡ªå·±è®¾ç½®çš„æ ·å¼\n\n## ç¬¬ 10 ç«  CSS æ ¼å¼åŒ–æ’ç‰ˆ\n\n1ã€å­—ä½“\n\n```css\nbody {\n  font-family: \"å®‹ä½“\";\n}\n```\n\nè¿™é‡Œæ³¨æ„ä¸è¦è®¾ç½®ä¸å¸¸ç”¨çš„å­—ä½“ï¼Œå› ä¸ºå¦‚æœç”¨æˆ·æœ¬åœ°ç”µè„‘ä¸Šå¦‚æœæ²¡æœ‰å®‰è£…ä½ è®¾ç½®çš„å­—ä½“ï¼Œå°±ä¼šæ˜¾ç¤ºæµè§ˆå™¨é»˜è®¤çš„å­—ä½“ã€‚ï¼ˆå› ä¸ºç”¨æˆ·æ˜¯å¦å¯ä»¥çœ‹åˆ°ä½ è®¾ç½®çš„å­—ä½“æ ·å¼å–å†³äºç”¨æˆ·æœ¬åœ°ç”µè„‘ä¸Šæ˜¯å¦å®‰è£…ä½ è®¾ç½®çš„å­—ä½“ã€‚ï¼‰\n\nç°åœ¨ä¸€èˆ¬ç½‘é¡µå–œæ¬¢è®¾ç½®â€œå¾®è½¯é›…é»‘â€ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```css\nbody {\n  font-family: \"Microsoft Yahei\";\n}\n```\n\næˆ–\n\n```css\nbody {\n  font-family: \"å¾®è½¯é›…é»‘\";\n}\n```\n\næ³¨æ„ï¼šç¬¬ä¸€ç§æ–¹æ³•æ¯”ç¬¬äºŒç§æ–¹æ³•å…¼å®¹æ€§æ›´å¥½ä¸€äº›ã€‚ä½¿ç”¨å¾®è½¯é›…é»‘ï¼Œæ²¡æœ‰ç‰ˆæƒé—®é¢˜å—ï¼Ÿï¼‰\n\n2ã€å­—å·ã€é¢œè‰²\n\n```css\nbody {\n  font-size: 12px;\n  color: #666;\n}\n```\n\n3ã€ç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿\n\n```css\np span {\n  font-weight: bold;\n}\np a {\n  font-style: italic;\n}\np a {\n  text-decoration: underline;\n}\n.oldPrice {\n  text-decoration: line-through;\n}\n```\n\n4ã€æ®µè½æ’ç‰ˆ - ç¼©è¿›\n\n```css\np {\n  text-indent: 2em;\n}\n```\n\næ³¨æ„ï¼š2em çš„æ„æ€å°±æ˜¯æ–‡å­—çš„ 2 å€å¤§å°\n\n5ã€æ®µè½æ’ç‰ˆ - è¡Œé—´è·ï¼ˆè¡Œé«˜ï¼‰\n\n```css\np {\n  line-height: 1.5em;\n}\n```\n\n6ã€æ®µè½æ’ç‰ˆ - ä¸­æ–‡å­—é—´è·ã€å­—æ¯é—´è·\n\n```css\nh1 {\n  letter-spacing: 50px; // ä¸­æ–‡å­—é—´éš”ã€å­—æ¯é—´éš”è®¾ç½®\n  word-spacing: 50px; // å•è¯é—´è·è®¾ç½®\n}\n```\n\n7ã€æ®µè½æ’ç‰ˆ - å¯¹é½\n&emsp;&emsp;ä¸ºå—çŠ¶å…ƒç´ ä¸­çš„æ–‡æœ¬ã€å›¾ç‰‡è®¾ç½®å±…ä¸­/å·¦/å³\n\n```css\nh1 {\n  text-align: center/left/right;\n}\n```\n","tags":["html","css"]},{"title":"IMOOC HTML+CSS åŸºç¡€è¯¾ç¨‹ Part 1","url":"/2017/02/23/imooc-html-css-basic-course-part1/","content":"\n2017 å¹´ä¸€ä¸ªå¿ƒæ„¿ï¼Œè®¤çœŸå­¦ä¹ å‰ç«¯ï¼Œæˆä¸ºå…¬å¸é‡Œæœ€å‰å®³å‰ç«¯å·¥ç¨‹å¸ˆã€‚Flag ç«‹çš„è¿˜æ˜¯å¾ˆå¤§çš„â€¦â€¦\n\næœ¬æ–‡ä¸»è¦å†…å®¹ï¼šHTML ä»‹ç»ï¼ŒåŸºæœ¬æ ‡ç­¾ï¼Œè¡¨å•æ ‡ç­¾\n\n<!-- more -->\n\n## ç¬¬ 1 ç«  HTML ä»‹ç»\n\n1ã€HTML æ˜¯ç½‘é¡µå†…å®¹çš„è½½ä½“ã€‚å†…å®¹å°±æ˜¯ç½‘é¡µåˆ¶ä½œè€…æ”¾åœ¨é¡µé¢ä¸Šæƒ³è¦è®©ç”¨æˆ·æµè§ˆçš„ä¿¡æ¯ï¼Œå¯ä»¥åŒ…å«æ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚\n\n2ã€CSS æ ·å¼æ˜¯è¡¨ç°ã€‚å°±åƒç½‘é¡µçš„å¤–è¡£ã€‚æ¯”å¦‚ï¼Œæ ‡é¢˜å­—ä½“ã€é¢œè‰²å˜åŒ–ï¼Œæˆ–ä¸ºæ ‡é¢˜åŠ å…¥èƒŒæ™¯å›¾ç‰‡ã€è¾¹æ¡†ç­‰ã€‚æ‰€æœ‰è¿™äº›ç”¨æ¥æ”¹å˜å†…å®¹å¤–è§‚çš„ä¸œè¥¿ç§°ä¹‹ä¸ºè¡¨ç°ã€‚\n\n3ã€JavaScript æ˜¯ç”¨æ¥å®ç°ç½‘é¡µä¸Šçš„ç‰¹æ•ˆæ•ˆæœã€‚å¦‚ï¼šé¼ æ ‡æ»‘è¿‡å¼¹å‡ºä¸‹æ‹‰èœå•ã€‚æˆ–é¼ æ ‡æ»‘è¿‡è¡¨æ ¼çš„èƒŒæ™¯é¢œè‰²æ”¹å˜ã€‚è¿˜æœ‰ç„¦ç‚¹æ–°é—»ï¼ˆæ–°é—»å›¾ç‰‡ï¼‰çš„è½®æ¢ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œæœ‰åŠ¨ç”»çš„ï¼Œæœ‰äº¤äº’çš„ä¸€èˆ¬éƒ½æ˜¯ç”¨ JavaScript æ¥å®ç°çš„ã€‚\n\n## ç¬¬ 2 ç«  è®¤è¯†æ ‡ç­¾(ç¬¬ä¸€éƒ¨åˆ†)\n\nå¸¸å¸¸ä¼šå¬åˆ°ä¸€ä¸ªè¯ï¼Œ**è¯­ä¹‰åŒ–**ã€‚è¯´çš„é€šä¿—ç‚¹å°±æ˜¯ï¼šæ˜ç™½æ¯ä¸ªæ ‡ç­¾çš„ç”¨é€”ï¼ˆåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨æ­¤æ ‡ç­¾åˆç†ï¼‰ã€‚\n\næ¯”å¦‚ï¼Œç½‘é¡µä¸Šçš„æ–‡ç« çš„æ ‡é¢˜å°±å¯ä»¥ç”¨æ ‡é¢˜æ ‡ç­¾ï¼Œç½‘é¡µä¸Šçš„å„ä¸ªæ ç›®çš„æ ç›®åç§°ä¹Ÿå¯ä»¥ä½¿ç”¨æ ‡é¢˜æ ‡ç­¾ã€‚æ–‡ç« ä¸­å†…å®¹çš„æ®µè½å°±å¾—æ”¾åœ¨æ®µè½æ ‡ç­¾ä¸­ï¼Œåœ¨æ–‡ç« ä¸­æœ‰æƒ³å¼ºè°ƒçš„æ–‡æœ¬ï¼Œå°±å¯ä»¥ä½¿ç”¨ `em` æ ‡ç­¾è¡¨ç¤ºå¼ºè°ƒç­‰ç­‰ã€‚\nè¯­ä¹‰åŒ–å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆæ ·çš„å¥½å¤„å‘¢ï¼Ÿ\n\n- æ›´å®¹æ˜“è¢«æœç´¢å¼•æ“æ”¶å½•ã€‚\n- æ›´å®¹æ˜“è®©å±å¹•é˜…è¯»å™¨è¯»å‡ºç½‘é¡µå†…å®¹ã€‚\n\n1ã€åœ¨ç½‘é¡µä¸Šè¦å±•ç¤ºå‡ºæ¥çš„é¡µé¢å†…å®¹ä¸€å®šè¦æ”¾åœ¨ `body` æ ‡ç­¾ä¸­ï¼›\n\n2ã€å¦‚æœæƒ³åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºæ–‡ç« ï¼Œè¿™æ—¶å°±éœ€è¦ `<p>` æ ‡ç­¾äº†ï¼ŒæŠŠæ–‡ç« çš„æ®µè½æ”¾åˆ° `<p>` æ ‡ç­¾ï¼›\n\n```html\n<p>æ®µè½æ–‡æœ¬</p>\n```\n\n3ã€æ ‡é¢˜æ ‡ç­¾ä¸€å…±æœ‰ 6 ä¸ªï¼Œh1ã€h2ã€h3ã€h4ã€h5ã€h6 åˆ†åˆ«ä¸ºä¸€çº§æ ‡é¢˜ã€äºŒçº§æ ‡é¢˜ã€ä¸‰çº§æ ‡é¢˜ã€å››çº§æ ‡é¢˜ã€äº”çº§æ ‡é¢˜ã€å…­çº§æ ‡é¢˜ã€‚å¹¶ä¸”ä¾æ®é‡è¦æ€§é€’å‡ã€‚`<h1>` æ˜¯æœ€é«˜çš„ç­‰çº§ï¼š\n\n```html\n<hx>æ ‡é¢˜æ–‡æœ¬</hx>(xä¸º1-6)\n```\n\n4ã€åœ¨ä¸€æ®µè¯ä¸­ç‰¹åˆ«å¼ºè°ƒæŸå‡ ä¸ªæ–‡å­—ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨åˆ° `<em>` æˆ– `<strong>` æ ‡ç­¾ã€‚åœ¨æµè§ˆå™¨ä¸­ `<em>` é»˜è®¤ç”¨æ–œä½“è¡¨ç¤ºï¼Œ`<strong>` ç”¨ç²—ä½“è¡¨ç¤ºã€‚ä¸¤ä¸ªæ ‡ç­¾ç›¸æ¯”ï¼Œç›®å‰å›½å†…å‰ç«¯ç¨‹åºå‘˜æ›´å–œæ¬¢ä½¿ç”¨ `<strong>` è¡¨ç¤ºå¼ºè°ƒï¼š\n\n```html\n<em>éœ€è¦å¼ºè°ƒçš„æ–‡æœ¬</em>\n```\n\n```html\n<strong>éœ€è¦å¼ºè°ƒçš„æ–‡æœ¬</strong>\n```\n\n5ã€`<span>` æ ‡ç­¾æ˜¯æ²¡æœ‰è¯­ä¹‰çš„ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¸ºäº†è®¾ç½®å•ç‹¬çš„æ ·å¼ç”¨çš„ï¼š\n\n```html\n<span>æ–‡æœ¬</span>\n```\n\n6ã€æƒ³å¼•ç”¨æŸä¸ªä½œå®¶çš„ä¸€å¥è¯—ï¼Œè¿™æ ·ä¼šä½¿ä½ çš„æ–‡ç« æ›´åŠ å‡ºå½©ï¼Œé‚£ä¹ˆ `<q>` æ ‡ç­¾æ˜¯ä½ æ‰€éœ€è¦çš„\n\n```html\n<q>å¼•ç”¨æ–‡æœ¬</q>\n```\n\n7ã€`<blockquote>` çš„ä½œç”¨ä¹Ÿæ˜¯å¼•ç”¨åˆ«äººçš„æ–‡æœ¬ã€‚ä½†å®ƒæ˜¯å¯¹é•¿æ–‡æœ¬çš„å¼•ç”¨ï¼Œå¦‚åœ¨æ–‡ç« ä¸­å¼•å…¥å¤§æ®µæŸçŸ¥åä½œå®¶çš„æ–‡å­—ï¼Œè¿™æ—¶éœ€è¦è¿™ä¸ªæ ‡ç­¾ã€‚\n\n```html\n<blockquote>å¼•ç”¨æ–‡æœ¬</blockquote>\n```\n\n8ã€ä½¿ç”¨ `<br>` æ ‡ç­¾åˆ†è¡Œæ˜¾ç¤ºæ–‡æœ¬\n\nxhtml1.0 å†™æ³•ï¼š`<br />`\n\nhtml4.01 å†™æ³•ï¼š`<br>`\n\n**æ³¨æ„ï¼šç°åœ¨ä¸€èˆ¬ä½¿ç”¨ xhtml1.0 çš„ç‰ˆæœ¬çš„å†™æ³•ï¼ˆå…¶å®ƒæ ‡ç­¾ä¹Ÿæ˜¯ï¼‰ï¼Œè¿™ç§ç‰ˆæœ¬æ¯”è¾ƒè§„èŒƒ**ã€‚\n\n9ã€ä¸ºä½ çš„ç½‘é¡µä¸­æ·»åŠ ä¸€äº›ç©ºæ ¼ `&nbsp;`\n\n10ã€`<hr>` æ·»åŠ æ°´å¹³æ¨ªçº¿\n\nhtml4.01 ç‰ˆæœ¬ï¼š`<hr>`\n\nxhtml1.0 ç‰ˆæœ¬ï¼š`<hr />`\n\n`<hr />` æ ‡ç­¾çš„åœ¨æµè§ˆå™¨ä¸­çš„é»˜è®¤æ ·å¼çº¿æ¡æ¯”è¾ƒç²—ï¼Œé¢œè‰²ä¸ºç°è‰²ï¼Œå¯èƒ½æœ‰äº›äººè§‰å¾—è¿™ç§æ ·å¼ä¸ç¾è§‚ï¼Œæ²¡æœ‰å…³ç³»ï¼Œè¿™äº›å¤–åœ¨æ ·å¼åœ¨æˆ‘ä»¬ä»¥åå­¦ä¹ äº† css æ ·å¼è¡¨ä¹‹åï¼Œéƒ½å¯ä»¥å¯¹å…¶ä¿®æ”¹\n\n11ã€è”ç³»åœ°å€ä¿¡æ¯å¦‚å…¬å¸çš„åœ°å€å°±å¯ä»¥ `<address>` æ ‡ç­¾ã€‚ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªåœ°å€ï¼ˆæ¯”å¦‚ç”µå­é‚®ä»¶åœ°å€ï¼‰ã€ç­¾åæˆ–è€…æ–‡æ¡£çš„ä½œè€…èº«ä»½\n\n```html\n<address>è”ç³»åœ°å€ä¿¡æ¯</address>\n```\n\n12ã€ç½‘é¡µä¸­æ˜¾ç¤ºä¸€äº›è®¡ç®—æœºä¸“ä¸šçš„ç¼–ç¨‹ä»£ç ï¼Œå½“ä»£ç ä¸ºä¸€è¡Œä»£ç æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ `<code>` æ ‡ç­¾\n\n```html\n<code>var i=i+300;</code>\n```\n\n13ã€å¦‚æœæ˜¯å¤šè¡Œä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ `<pre>` æ ‡ç­¾\n\n```\n<pre>è¯­è¨€ä»£ç æ®µ</pre>\n```\n\n`<pre>` æ ‡ç­¾çš„ä¸»è¦ä½œç”¨ï¼šé¢„æ ¼å¼åŒ–çš„æ–‡æœ¬ã€‚è¢«åŒ…å›´åœ¨ `</pre>` å…ƒç´ ä¸­çš„æ–‡æœ¬é€šå¸¸ä¼šä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œç¬¦\næ³¨æ„ï¼š`<pre>` æ ‡ç­¾ä¸åªæ˜¯ä¸ºæ˜¾ç¤ºè®¡ç®—æœºçš„æºä»£ç æ—¶ç”¨çš„ï¼Œåœ¨ä½ éœ€è¦åœ¨ç½‘é¡µä¸­é¢„æ˜¾ç¤ºæ ¼å¼æ—¶éƒ½å¯ä»¥ä½¿ç”¨å®ƒï¼Œåªæ˜¯ `<pre>` æ ‡ç­¾çš„ä¸€ä¸ªå¸¸è§åº”ç”¨å°±æ˜¯ç”¨æ¥å±•ç¤ºè®¡ç®—æœºçš„æºä»£ç \n\n## ç¬¬ 3 ç«  è®¤è¯†æ ‡ç­¾(ç¬¬äºŒéƒ¨åˆ†)\n\n1ã€ä½¿ç”¨ `ul`ï¼Œæ·»åŠ åˆ—è¡¨\n\n```html\n<ul>\n  <li>ä¿¡æ¯</li>\n  <li>ä¿¡æ¯</li>\n  ......\n</ul>\n```\n\n2ã€ä½¿ç”¨ `ol`ï¼Œæ·»åŠ æœ‰å‰åé¡ºåºçš„åˆ—è¡¨\n\n```html\n<ol>\n  <li>ä¿¡æ¯</li>\n  <li>ä¿¡æ¯</li>\n  ......\n</ol>\n```\n\n3ã€æŠŠä¸€äº›ç‹¬ç«‹çš„é€»è¾‘éƒ¨åˆ†åˆ’åˆ†å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€ä¸ª `<div>` æ ‡ç­¾ä¸­ï¼Œè¿™ä¸ª `<div>` æ ‡ç­¾çš„ä½œç”¨å°±ç›¸å½“äºä¸€ä¸ªå®¹å™¨\n\n```html\n<div>â€¦</div>\n```\n\n4ã€ç»™ `div` å‘½åï¼Œä½¿é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚å¯ä»¥ä¸ºè¿™ä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘éƒ¨åˆ†è®¾ç½®ä¸€ä¸ªåç§°ï¼Œç”¨ `id` å±æ€§æ¥ä¸º `<div>` æä¾›**å”¯ä¸€**çš„åç§°\n\n```html\n<div id=\"ç‰ˆå—åç§°\">â€¦</div>\n```\n\n5ã€`table` æ ‡ç­¾ï¼Œè®¤è¯†ç½‘é¡µä¸Šçš„è¡¨æ ¼\n\n`<table>â€¦</table>`ï¼šæ•´ä¸ªè¡¨æ ¼ä»¥ `<table>` æ ‡è®°å¼€å§‹ã€`</table>` æ ‡è®°ç»“æŸ\n\n`<tbody>â€¦</tbody>`ï¼šå½“è¡¨æ ¼å†…å®¹éå¸¸å¤šæ—¶ï¼Œè¡¨æ ¼ä¼šä¸‹è½½ä¸€ç‚¹æ˜¾ç¤ºä¸€ç‚¹ï¼Œä½†å¦‚æœåŠ ä¸Š `<tbody>` æ ‡ç­¾åï¼Œè¿™ä¸ªè¡¨æ ¼å°±è¦ç­‰è¡¨æ ¼å†…å®¹å…¨éƒ¨ä¸‹è½½å®Œæ‰ä¼šæ˜¾ç¤º\n\n`<tr>â€¦</tr>`ï¼šè¡¨æ ¼çš„ä¸€**è¡Œ**ï¼Œæ‰€ä»¥æœ‰å‡ å¯¹ `tr` è¡¨æ ¼å°±æœ‰å‡ è¡Œã€‚\n\n`<td>â€¦</td>`ï¼šè¡¨æ ¼çš„ä¸€ä¸ªå•å…ƒæ ¼ï¼Œä¸€è¡Œä¸­åŒ…å«å‡ å¯¹ `<td>...</td>`ï¼Œè¯´æ˜ä¸€è¡Œä¸­å°±æœ‰å‡ **åˆ—**\n\n`<th>â€¦</th>`ï¼šè¡¨æ ¼çš„å¤´éƒ¨çš„ä¸€ä¸ªå•å…ƒæ ¼ï¼Œè¡¨æ ¼**è¡¨å¤´**\n\n6ã€`caption` æ ‡ç­¾ï¼Œä¸ºè¡¨æ ¼æ·»åŠ æ ‡é¢˜å’Œæ‘˜è¦\n\næ‘˜è¦ï¼šæ‘˜è¦çš„å†…å®¹æ˜¯ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå‡ºæ¥çš„ã€‚å®ƒçš„ä½œç”¨æ˜¯å¢åŠ è¡¨æ ¼çš„å¯è¯»æ€§ï¼ˆè¯­ä¹‰åŒ–ï¼‰ï¼Œä½¿æœç´¢å¼•æ“æ›´å¥½çš„è¯»æ‡‚è¡¨æ ¼å†…å®¹ï¼Œè¿˜å¯ä»¥ä½¿å±å¹•é˜…è¯»å™¨æ›´å¥½çš„å¸®åŠ©ç‰¹æ®Šç”¨æˆ·è¯»å–è¡¨æ ¼å†…å®¹\n\n```html\n<table summary=\"è¡¨æ ¼ç®€ä»‹æ–‡æœ¬\"></table>\n```\n\næ ‡é¢˜ï¼šç”¨ä»¥æè¿°è¡¨æ ¼å†…å®¹ï¼Œæ ‡é¢˜çš„æ˜¾ç¤ºä½ç½®ï¼šè¡¨æ ¼ä¸Šæ–¹\n\n```html\n<table>\n  <caption>\n    æ ‡é¢˜æ–‡æœ¬\n  </caption>\n  <tr>\n    <td>â€¦</td>\n    <td>â€¦</td>\n    â€¦\n  </tr>\n  â€¦\n</table>\n```\n\n## ç¬¬ 4 ç«  è®¤è¯†æ ‡ç­¾(ç¬¬ä¸‰éƒ¨åˆ†)\n\n1ã€ä½¿ç”¨ `<a>` æ ‡ç­¾å¯å®ç°è¶…é“¾æ¥\n\n```html\n<a href=\"ç›®æ ‡ç½‘å€\" title=\"é¼ æ ‡æ»‘è¿‡æ˜¾ç¤ºçš„æ–‡æœ¬\">é“¾æ¥æ˜¾ç¤ºçš„æ–‡æœ¬</a>\n```\n\n`title` å±æ€§çš„ä½œç”¨ï¼Œé¼ æ ‡æ»‘è¿‡é“¾æ¥æ–‡å­—æ—¶ä¼šæ˜¾ç¤ºè¿™ä¸ªå±æ€§çš„æ–‡æœ¬å†…å®¹ã€‚è¿™ä¸ªå±æ€§åœ¨å®é™…ç½‘é¡µå¼€å‘ä¸­ä½œç”¨å¾ˆå¤§ï¼Œä¸»è¦æ–¹ä¾¿æœç´¢å¼•æ“äº†è§£é“¾æ¥åœ°å€çš„å†…å®¹ï¼ˆè¯­ä¹‰åŒ–æ›´å‹å¥½ï¼‰\n\n2ã€åœ¨æ–°å»ºæµè§ˆå™¨çª—å£ä¸­æ‰“å¼€é“¾æ¥\n\n```html\n<a href=\"ç›®æ ‡ç½‘å€\" target=\"_blank\">click here!</a>\n```\n\n3ã€ä½¿ç”¨ `mailto` åœ¨ç½‘é¡µä¸­é“¾æ¥ `Email` åœ°å€\n\n```html\n<a href=\"mailto:yy@imooc.com?subject=ä¸»é¢˜åç§°&body=é‚®ä»¶å†…å®¹&cc=yy@mail.com\"></a>\n```\n\n4ã€`<img>` ä¸ºç½‘é¡µæ’å…¥å›¾ç‰‡\n\n```html\n<img src=\"å›¾ç‰‡åœ°å€\" alt=\"ä¸‹è½½å¤±è´¥æ—¶çš„æ›¿æ¢æ–‡æœ¬\" title=\"æç¤ºæ–‡æœ¬\" />\n```\n\n## ç¬¬ 5 ç«  ä¸æµè§ˆè€…äº¤äº’ï¼Œè¡¨å•æ ‡ç­¾\n\n1ã€`form` æ ‡ç­¾ä¸ç”¨æˆ·äº¤äº’\n\nè¡¨å•æ˜¯å¯ä»¥æŠŠæµè§ˆè€…è¾“å…¥çš„æ•°æ®ä¼ é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œè¿™æ ·æœåŠ¡å™¨ç«¯ç¨‹åºå°±å¯ä»¥å¤„ç†è¡¨å•ä¼ è¿‡æ¥çš„æ•°æ®\n\nactionï¼šæµè§ˆè€…è¾“å…¥çš„æ•°æ®è¢«ä¼ é€åˆ°çš„åœ°æ–¹,æ¯”å¦‚ä¸€ä¸ª PHP é¡µé¢(save.php)\n\nmethodï¼šæ•°æ®ä¼ é€çš„æ–¹å¼ï¼ˆget/postï¼‰\n\n```html\n<form method=\"post/get\" action=\"save.php\">\n  <label for=\"username\">ç”¨æˆ·å:</label>\n  <input type=\"text\" name=\"username\" />\n  <label for=\"pass\">å¯†ç :</label>\n  <input type=\"password\" name=\"pass\" />\n</form>\n```\n\n2ã€æ–‡æœ¬è¾“å…¥æ¡†ã€å¯†ç è¾“å…¥æ¡†\n\n- typeï¼šå½“ `type=\"text\"` æ—¶ï¼Œè¾“å…¥æ¡†ä¸ºæ–‡æœ¬è¾“å…¥æ¡†ï¼›å½“ `type=\"password\"` æ—¶, è¾“å…¥æ¡†ä¸ºå¯†ç è¾“å…¥æ¡†\n- nameï¼šä¸ºæ–‡æœ¬æ¡†å‘½åï¼Œä»¥å¤‡åå°ç¨‹åºä½¿ç”¨\n- valueï¼šä¸ºæ–‡æœ¬è¾“å…¥æ¡†è®¾ç½®é»˜è®¤å€¼ï¼ˆä¸€èˆ¬èµ·åˆ°æç¤ºä½œç”¨ï¼‰\n\n```html\n<input type=\"text/password\" name=\"åç§°\" value=\"æ–‡æœ¬\" />\n```\n\n3ã€æ–‡æœ¬åŸŸï¼Œæ”¯æŒå¤šè¡Œæ–‡æœ¬è¾“å…¥\n\n```html\n<textarea rows=\"è¡Œæ•°\" cols=\"åˆ—æ•°\">æ–‡æœ¬</textarea>\n```\n\næ³¨æ„ï¼šè¿™ä¸¤ä¸ªå±æ€§å¯ç”¨ css æ ·å¼çš„ width å’Œ height æ¥ä»£æ›¿ï¼šcol ç”¨ widthã€row ç”¨ height æ¥ä»£æ›¿\n\n4ã€ä½¿ç”¨å•é€‰æ¡†ã€å¤é€‰æ¡†ï¼Œè®©ç”¨æˆ·é€‰æ‹©\n\ntypeï¼šå½“ type=\"radio\" æ—¶ï¼Œæ§ä»¶ä¸ºå•é€‰æ¡†ï¼›å½“ type=\"checkbox\" æ—¶ï¼Œæ§ä»¶ä¸ºå¤é€‰æ¡†\n\næ³¨æ„ï¼šåŒä¸€ç»„çš„å•é€‰æŒ‰é’®ï¼Œname å–å€¼ä¸€å®šè¦ä¸€è‡´ï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸ºåŒä¸€ä¸ªåç§°â€œradioLoveâ€ï¼Œè¿™æ ·åŒä¸€ç»„çš„å•é€‰æŒ‰é’®æ‰å¯ä»¥èµ·åˆ°å•é€‰çš„ä½œç”¨\n\n```html\n<input type=\"radio/checkbox\" value=\"å€¼\" name=\"åç§°\" checked=\"checked\" />\n```\n\n5ã€ä½¿ç”¨ä¸‹æ‹‰åˆ—è¡¨æ¡†ï¼ŒèŠ‚çœç©ºé—´\n\nè®¾ç½® `selected=\"selected\"` å±æ€§ï¼Œåˆ™è¯¥é€‰é¡¹å°±è¢«é»˜è®¤é€‰ä¸­\n\n```html\n<select>\n  <option value=\"çœ‹ä¹¦\">çœ‹ä¹¦</option>\n  <option value=\"æ—…æ¸¸\" selected=\"selected\">æ—…æ¸¸</option>\n  <option value=\"è¿åŠ¨\">è¿åŠ¨</option>\n  <option value=\"è´­ç‰©\">è´­ç‰©</option>\n</select>\n```\n\n6ã€ä½¿ç”¨æäº¤æŒ‰é’®ï¼Œæäº¤æ•°æ®\n\n```html\n<input type=\"submit\" value=\"æäº¤\" />\n```\n\n7ã€ä½¿ç”¨é‡ç½®æŒ‰é’®ï¼Œé‡ç½®è¡¨å•ä¿¡æ¯\n\n```html\n<input type=\"reset\" value=\"é‡ç½®\" />\n```\n\n8ã€form è¡¨å•ä¸­çš„ `label` æ ‡ç­¾\n\n`label` æ ‡ç­¾ä¸ä¼šå‘ç”¨æˆ·å‘ˆç°ä»»ä½•ç‰¹æ®Šæ•ˆæœï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºé¼ æ ‡ç”¨æˆ·æ”¹è¿›äº†å¯ç”¨æ€§ã€‚å¦‚æœä½ åœ¨ `label` æ ‡ç­¾å†…ç‚¹å‡»æ–‡æœ¬ï¼Œå°±ä¼šè§¦å‘æ­¤æ§ä»¶ã€‚å°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·å•å‡»é€‰ä¸­è¯¥ `label` æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æ§ä»¶ä¸Šï¼ˆå°±è‡ªåŠ¨é€‰ä¸­å’Œè¯¥ `label` æ ‡ç­¾ç›¸å…³è¿çš„è¡¨å•æ§ä»¶ä¸Šï¼‰\n\n```html\n<label for=\"æ§ä»¶idåç§°\"></label>\n```\n\næ³¨æ„ï¼šæ ‡ç­¾çš„ `for` å±æ€§ä¸­çš„å€¼åº”å½“ä¸ç›¸å…³æ§ä»¶çš„ `id` å±æ€§å€¼ä¸€å®šè¦ç›¸åŒ\n\n```html\n<form>\n  <label for=\"male\">ç”·</label>\n  <input type=\"radio\" name=\"gender\" id=\"male\" />\n  <br />\n  <label for=\"female\">å¥³</label>\n  <input type=\"radio\" name=\"gender\" id=\"female\" />\n  <label for=\"email\">è¾“å…¥ä½ çš„é‚®ç®±åœ°å€</label>\n  <input type=\"email\" id=\"email\" placeholder=\"Enter email\" />\n</form>\n```\n\n> References:\n>\n> - [HTML+CSS åŸºç¡€è¯¾ç¨‹-æ…•è¯¾ç½‘](http://www.imooc.com/learn/9)\n","tags":["html","css"]},{"title":"Git clean ä»å·¥ä½œåŒºä¸­åˆ é™¤æœªè·Ÿè¸ªçš„æ–‡ä»¶","url":"/2017/02/22/git-clean-remove-untracked-files-from-the-working-tree/","content":"\nä»å½“å‰ç›®å½•å¼€å§‹ï¼Œé€šè¿‡é€’å½’åˆ é™¤ä¸åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹ä¸‹çš„æ–‡ä»¶æ¥æ¸…é™¤å·¥ä½œæ ‘ã€‚\n\n## Manual\n\nä½¿ç”¨ `man` å‘½ä»¤ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŸ¥çœ‹å‘½ä»¤ä½¿ç”¨çš„æ–¹æ³•\n\n```bash\nman git clean\n\ngit clean -h\n```\n\n## SYNOPSIS æ¦‚è¦\n\n```bash\ngit clean [-d] [-f] [-i] [-n] [-q] [-e <pattern>] [-x | -X] [--] <path>...\n```\n\n## OPTIONS\n\n```bash\n-q, --quiet           do not print names of files removed\n-n, --dry-run         dry run\n-f, --force           force\n-i, --interactive     interactive cleaning\n-d                    remove whole directories\n-e, --exclude <pattern>\n                      add <pattern> to ignore rules\n-x                    remove ignored files, too\n-X                    remove only ignored files\n```\n\n- `-d` åˆ é™¤æœªè·Ÿè¸ªçš„ç›®å½•å’Œæœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚å¦‚æœä¸€ä¸ªæœªè·Ÿè¸ªçš„ç›®å½•æ˜¯å¦ä¸€ä¸ªä¸åŒçš„ Git åº“ï¼Œé»˜è®¤å°†ä¸ä¼šæŠŠå®ƒåˆ é™¤ã€‚å¦‚æœä½ æƒ³åˆ é™¤è¿™ä¸ªç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ `-f`ã€‚\n- `-f` , `--force` å¦‚æœ Git é…ç½®ä¸­ `clean.requireForce` æ²¡æœ‰è®¾ç½®ä¸º `false`ï¼Œgit clean å°†æ‹’ç»æ‰§è¡Œã€‚é™¤éæ˜¯ä½¿ç”¨ `-f` `-n` `-i`ã€‚\n- `-i` , `--interactive` ä½¿ç”¨äº¤äº’å¼æ˜¾ç¤ºå°†è¢«åˆ é™¤çš„æ–‡ä»¶ã€‚\n- `-n` , `--dry-run` ä»…ä»…æ˜¾ç¤ºå°†è¢«åˆ é™¤çš„æ–‡ä»¶ï¼Œä¸ä¼šçœŸæ­£çš„åˆ é™¤ã€‚\n- `-q` , `--quiet` é™é»˜ï¼Œä»…ä»…æ˜¾ç¤ºé”™è¯¯ï¼Œä¸åŒ…æ‹¬æˆåŠŸç§»é™¤çš„æ–‡ä»¶ã€‚\n- `-e <pattern>` , `--exclude=<pattern>` é™¤äº†åœ¨ `.gitignore`ï¼ˆæ¯ä¸ªç›®å½•ï¼‰å’Œ `$GIT_DIR/info/exclude`ï¼Œä¹Ÿè¦è€ƒè™‘è¿™äº›æ¨¡å¼è®¾ç½®çš„å¿½ç•¥è§„åˆ™ã€‚\n- `-x` ä¸ä½¿ç”¨ `.gitignore`ï¼ˆæ¯ä¸ªç›®å½•ï¼‰å’Œ `$GIT_DIR/info/exclude` çš„æ ‡å‡†å¿½ç•¥è§„åˆ™ï¼Œä½†ä»ç„¶ä½¿ç”¨ä½¿ç”¨ `-e` é€‰é¡¹ç»™å‡ºçš„å¿½ç•¥è§„åˆ™ã€‚è¿™å…è®¸åˆ é™¤æ‰€æœ‰æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ„å»ºäº§å“ã€‚ è¿™å¯ä»¥ä½¿ç”¨ï¼ˆå¯èƒ½ä¸ git resetï¼‰ä»¥åˆ›å»ºä¸€ä¸ªåŸå§‹çš„å·¥ä½œç›®å½•æ¥æµ‹è¯•ä¸€ä¸ªå¹²å‡€çš„æ„å»ºã€‚\n- `-X` åªåˆ é™¤ Git å¿½ç•¥çš„æ–‡ä»¶ã€‚è¿™å¯èƒ½æœ‰åŠ©äºä»å¤´é‡å»ºä¸€åˆ‡ï¼Œä½†ä¿ç•™æ‰‹åŠ¨åˆ›å»ºçš„æ–‡ä»¶ã€‚\n\n<!-- more -->\n\n## å¸¸ç”¨æ“ä½œ\n\né€šè¿‡ä»¥ä¸Šå‡ æ ¹å‚æ•°ç»„åˆï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³åˆ é™¤æœªè·Ÿè¸ªæ–‡ä»¶çš„éœ€æ±‚äº†\n\n1ã€ä¾‹å¦‚åœ¨åˆ é™¤å‰å…ˆæŸ¥çœ‹æœ‰å“ªäº›æ–‡ä»¶å°†è¢«åˆ é™¤è¿è¡Œï¼š\n\n```bash\ngit clean -n\n\n# æŸ¥çœ‹è¦è¢«åˆ é™¤ Git å¿½ç•¥çš„æ–‡ä»¶ä¸æ–‡ä»¶å¤¹\ngit clean -Xdn\n```\n\n2ã€æƒ³åˆ é™¤å½“å‰å·¥ä½œç›®å½•ä¸‹çš„æœªè·Ÿè¸ªæ–‡ä»¶ï¼Œä½†ä¸åˆ é™¤æ–‡ä»¶å¤¹è¿è¡Œï¼ˆå¦‚æœ `clean.requireForce` ä¸º `false` å¯ä»¥ä¸åŠ  `-f` é€‰é¡¹ï¼‰ï¼š\n\n```bash\ngit clean -f\n\n# è¦è¢«åˆ é™¤ Git å¿½ç•¥çš„æ–‡ä»¶ä¸æ–‡ä»¶å¤¹\ngit clean -Xdf\n```\n\n3ã€æƒ³åˆ é™¤å½“å‰å·¥ä½œç›®å½•ä¸‹çš„æœªè·Ÿè¸ªæ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹è¿è¡Œï¼š\n\n```bash\ngit clean -df\n```\n\n## References\n\n- [Git æ¸…é™¤æœªè·Ÿè¸ªæ–‡ä»¶ | github](http://glgjing.github.io/blog/2015/01/09/git-qing-chu-wei-gen-zong-wen-jian/)\n","tags":["git"]},{"title":"ä»é›¶æ­å»ºè‡ªå·± Ubuntu å·¥ä½œå¼€å‘ç¯å¢ƒ","url":"/2017/01/15/build-own-ubuntu-work-development-environment/","content":"\n2020-04-28 æ›´æ–°ï¼šæ­¤æ–‡ç« å†…å®¹ä¸ç¡®å®šæ˜¯å¦å·²å¤±æ•ˆã€‚\n\n**2019-05-25 æ›´æ–°ï¼š** MacBook + Docker å·²ç»æ˜¯æˆ‘å·¥ä½œçš„åŸºç¡€è®¾æ–½ï¼š\n\n- [My MacBook](/2019/05/20/my-macbook/)\n- [My Dock](https://github.com/imzyf/my-dock)\n\n<!-- more -->\n\n**2017-07-06 æ›´æ–°ï¼š** æœ€è¿‘å¼€å§‹ä½¿ç”¨ Vagrent å‘ç°å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ­å»º PHP å¼€å‘ç¯å¢ƒï¼Œå‚çœ‹ï¼š[Laravel Homestead](https://laravel.com/docs/5.4/homestead)\n\n---\n\nä¸ºè‡ªå·±çš„ Y400 åŠ è£…äº†ä¸€å— mSATA SSDï¼Œä¸“é—¨ç”¨æ¥è£… Ubuntu ç³»ç»Ÿã€‚æœ¬åŸçš„ç¡¬ç›˜ä½æ—©å°±æ¢æˆäº† OCZ çš„ 240G SSDï¼Œæœºæ¢°ç¡¬ç›˜ç§»åˆ°äº†å…‰é©±ä½ï¼Œ330 å¤§æ´‹å…¥çš„ OCZï¼Œ2017 å¹´åˆ JD.com ç«Ÿç„¶è¦ 560+ã€‚\n\næœ¬æ–‡å°±æ˜¯è®°å½•è‡ªå·±çš„ Lenovo Y400 è£…æ–° mSATA SSD çš„è¿‡ç¨‹ã€‚\n\n## Ubuntu ç³»ç»Ÿå®‰è£…\n\n1. ä½¿ç”¨ UltraISO è½¯ç¢Ÿé€šï¼Œå°† Ubuntu 16.04 å†™å…¥ U ç›˜\n2. åœ¨å¼€æœºæ—¶æŒ‰ F11 åˆ‡æ¢å¯åŠ¨é¡ºåºåˆ° U ç›˜\n3. å›¾å½¢åŒ–å®‰è£…ç•Œé¢ï¼Œæ³¨æ„é€‰æ‹©ï¼šè‡ªå®šä¹‰åˆ†é…ç£ç›˜ç©ºé—´å®‰è£…æ¨¡å¼\n4. æˆ‘çš„ç£ç›˜ç©ºé—´åˆ†é…æ˜¯ï¼š`/` 50Gï¼Œ`/home` 50Gï¼Œä¾›å‚è€ƒ\n5. å»ºè®®é€‰æ‹© _è‹±è¯­_ è¯­è¨€\n\n## åŸºç¡€è®¾ç½®\n\n### Enable workspaces & Add show desktop icon\n\n```txt\nSystem Settings -> Appearance -> Behavior -> Enable workspaces & Add show desktop icon\n```\n\nå¯ä»¥ä½¿ç”¨ ctrl + alt + æ–¹å‘é”®ï¼Œåˆ‡æ¢ Workspacesã€‚\n\n### Setting Termianl Style\n\n```txt\nTermianl Profiles ->Profile Preferences\nGeneral -> Custom font: Monospace Regular 16\ncolor -> Custom Text color: #F57900; Bold color: #73D216; Built-in schemes: XTerm\n```\n\n## åŸºç¡€è½¯ä»¶\n\n### Chrome\n\n[Chrome ä¸‹è½½åœ°å€](http://www.google.cn/chrome/browser/desktop/index.html)ï¼Œç³»ç»Ÿè‡ªå¸¦æœ‰ Firefoxï¼Œä½†æ˜¯ç°åœ¨è¶Šæ¥è¶Šå–œæ¬¢ Chrome äº†ã€‚\n\n### Shadowsocks-Qt5\n\n[Shadowsocks-Qt5 GitHub](https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation)ï¼Œå¦™ä¸å¯è¨€ã€‚\n\n### Sogou è¾“å…¥æ³•\n\n[Sogou è¾“å…¥æ³• ä¸‹è½½åœ°å€](http://pinyin.sogou.com/linux/?r=pinyin)ï¼Œè‡ªå·±åœ¨å®‰è£…è¾“å…¥æ³•æ—¶å…œäº†å¾ˆå¤§çš„åœˆå­ï¼Œåæ¥ä¹Ÿæä¸æ¸…åˆ°åº•æ˜¯é‚£ä¸ªæ–¹æ³•èµ·çš„ä½œç”¨äº†ï¼Œå°è±¡ä¸­æƒ…å†µï¼š\n\n```bash\n# ç›´æ¥å®‰è£…\nsudo dpkg --install sogoupinyin_2.1.0.0082_amd64.deb\n\n# å¯èƒ½é‡åˆ°ç¼ºå°‘ç»„ä»¶æŠ¥é”™ï¼Œåˆ™æ‰§è¡Œ\nsudo apt-get -f install\n\n# No such key 'Gtk/IMModule' in schema 'org.gnome.settings-daemon.plugins.xsettings' as specified in override file '/usr/share/glib-2.0/schemas/50_sogoupinyin.gschema.override'; ignoring override for this key.\n# ä»¥ä¸Šçš„è¿™ä¸ªé—®é¢˜å¥½åƒå¯ä»¥å¿½ç•¥ï¼Œæˆ‘åœ¨è¿™é‡ŒèŠ±è´¹äº†å¾ˆå¤šæ—¶é—´\n```\n\n1ã€ç‚¹å‡»æ¡Œé¢å³ä¸Šè§’çš„æŒ‰é’®ï¼ŒSystem Settings -> Language Support -> é”®ç›˜è¾“å…¥æ³•ç³»ç»Ÿä» iBus æ”¹æˆ fcitxï¼›\n2ã€éœ€è¦æ³¨é”€æ¬¡ç³»ç»Ÿï¼›\n3ã€æ‰“å¼€ Fcitx Configurationï¼Œç‚¹å‡» +ï¼Œå–æ¶ˆå‹¾é€‰ only show current languageï¼Œsearch sogouï¼Œok\n\n> Reference: [Ubuntu 16.04 å®‰è£…æœç‹—è¾“å…¥æ³•](http://www.voidcn.com/blog/caib1109/article/p-5793576.html)\n\n### aptitude\n\n```bash\nsudo apt install aptitude\n```\n\naptitude ä¸ apt-get ä¸€æ ·ï¼Œæ˜¯ Debian åŠå…¶è¡ç”Ÿç³»ç»Ÿä¸­åŠŸèƒ½æå…¶å¼ºå¤§çš„åŒ…ç®¡ç†å·¥å…·ã€‚ä¸ apt-get ä¸åŒçš„æ˜¯ï¼Œaptitude åœ¨å¤„ç†ä¾èµ–é—®é¢˜ä¸Šæ›´ä½³ä¸€äº›ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œaptitude åœ¨åˆ é™¤ä¸€ä¸ªåŒ…æ—¶ï¼Œä¼šåŒæ—¶åˆ é™¤æœ¬èº«æ‰€ä¾èµ–çš„åŒ…ã€‚è¿™æ ·ï¼Œç³»ç»Ÿä¸­ä¸ä¼šæ®‹ç•™æ— ç”¨çš„åŒ…ï¼Œæ•´ä¸ªç³»ç»Ÿæ›´ä¸ºå¹²å‡€ã€‚\n\n```txt\naptitude update æ›´æ–°å¯ç”¨çš„åŒ…åˆ—è¡¨\naptitude upgrade å‡çº§å¯ç”¨çš„åŒ…\naptitude dist-upgrade å°†ç³»ç»Ÿå‡çº§åˆ°æ–°çš„å‘è¡Œç‰ˆ\naptitude install pkgname å®‰è£…åŒ…\naptitude remove pkgname åˆ é™¤åŒ…\naptitude purge pkgname åˆ é™¤åŒ…åŠå…¶é…ç½®æ–‡ä»¶\naptitude search string æœç´¢åŒ…\naptitude show pkgname æ˜¾ç¤ºåŒ…çš„è¯¦ç»†ä¿¡æ¯\naptitude clean åˆ é™¤ä¸‹è½½çš„åŒ…æ–‡ä»¶\naptitude autoclean ä»…åˆ é™¤è¿‡æœŸçš„åŒ…æ–‡ä»¶\n```\n\n### git\n\n```bash\nsudo add-apt-repository ppa:git-core/ppa -y\nsudo apt-get update\nsudo apt-get install git -y\n```\n\n### vim\n\n```bash\nsudo aptitude install vim\n```\n\n### oh-my-zsh\n\n> [GitHub: oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh/)\n\né¦–å…ˆå®‰è£… zsh\n\n```bash\nsudo aptitude install zsh\n```\n\nè„šæœ¬å®‰è£… oh-my-zsh\n\n```bash\nsh -c \"$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n```\n\nåˆ‡æ¢åˆ° zsh æ¨¡å¼ï¼Œlogout ä¸€æ¬¡åç”Ÿæ•ˆ\n\n```bash\nchsh -s /usr/local/bin/zsh\n```\n\nps: oh-my-zsh æœ‰å¾ˆä½¿ç”¨çš„æŠ€å·§ï¼Œæ—¥åå°†ä¸“é—¨å†™æ–‡ç« æ€»ç»“\n\n## Node.js\n\n> [Ubuntu ä¸‹å®‰è£… Node.js ä¸å¸¸è§é—®é¢˜ Â· Yifans_Z](/2017/07/06/install-node-js-in-ubuntu-and-faq/)\n\nå…¶ä¸­è¿˜åŒ…å«ï¼š\n\n- cnpm - npm client for China mirror of npm.\n\n## NGINX\n\n```bash\nsudo vim /etc/apt/sources.list.d/nginx.list\n```\n\nadd:\n\n```bash\ndeb http://nginx.org/packages/ubuntu/ trusty nginx\ndeb-src http://nginx.org/packages/ubuntu/ trusty nginx\n```\n\n```bash\nwget -q \"http://nginx.org/packages/keys/nginx_signing.key\" -O-| sudo apt-key add -\nsudo apt-get update\nsudo apt-get install nginx -y\n```\n\n### å‘\n\n- æ³¨æ„ Nginx çš„è¿è¡Œç”¨æˆ·ï¼Œæ–°ç‰ˆæ˜¯ `nginx` ä¸æ˜¯ `www-data`\n- è®¿é—®è¿”å› 200 ä½†æ˜¯å‡ºç° ç©ºç™½é¡µé¢ å‚è€ƒï¼š[nginx ä¸Šï¼Œhttp çŠ¶æ€ 200 å“åº”ï¼ŒPHP ç©ºç™½è¿”å›çš„é—®é¢˜](http://www.cnxct.com/php-return-empty-result-on-nginx-without-script_filename/)ï¼Œåœ¨ `fastcgi_params` æ·»åŠ ï¼š\n\n```bash\nfastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n```\n\n- `include` æœ€å¥½ä½¿ç”¨ç»å¯¹è·¯å¾„\n\n## PHP\n\n> [Ubuntu ä¸‹å®‰è£… PHP ä¸å¸¸è§é—®é¢˜ Â· Yifans_Z](/2017/07/04/install-php-in-ubuntu-and-faq/)\n\n## MySQL\n\n```bash\nsudo aptitude install mysql-server\n```\n\n### Navicat\n\n> [Navicat GUI | DB Admin Tool for MySQL, MariaDB, SQL Server, SQLite, Oracle &amp; PostgreSQL client](https://www.navicat.com/)\n\n-- EOF --\n"},{"title":"å›é¡¾ 2016","url":"/2017/01/04/review-2016/","content":"\n2016 è‚¯å®šæ˜¯å¾ˆç‰¹åˆ«çš„ä¸€å¹´ã€‚å¹´åˆç¦»å¼€äº†è€å¸ˆçš„é˜Ÿä¼ï¼Œæ¥åŒ—äº¬æ‰¾å®ä¹ ã€‚å¹´ä¸­å’Œ 318 å‘Šåˆ«ï¼Œå¤§å­¦æ¯•ä¸šäº†ã€‚å¹´æœ«æ¢æˆ¿å­¦åšé¥­ï¼Œå¼€å§‹å¦ç§ç”Ÿæ´»ã€‚å¯¹äº 2017 æ›´å¤šäº†å¯¹è‡ªå·±çš„æœŸå¾…ã€‚\n\n<!-- more -->\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=260 height=52 src=\"//music.163.com/outchain/player?type=2&id=31445772&auto=0&height=32\"></iframe>\n\n2016 æ˜¯åœ¨ä¿å®šçš„é›¾éœ¾ä¸­å¼€å§‹ã€‚ç»“æŸäº†å¤§ä¸ºï¼Œå†³å®šç¦»å¼€è€å¸ˆçš„é˜Ÿä¼ï¼Œæ¥åŒ—äº¬å®ä¹ ï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªä¸å¤§ä¸å°çš„å†³å®šã€‚è€å¸ˆå¸¦ç€ï¼Œè·Ÿå­¦é•¿ä¸€èµ·èµ°åˆ°è¿™é‡Œï¼Œè¿™é‡Œæœ‰äº†å¾ˆå¤šå®è´µçš„ä¸œè¥¿ï¼Œæœ‰å¾ˆå¤šå›å¿†ï¼Œå¾ˆå¤šæ•…äº‹å¯ä»¥è®²ã€‚é€‰æ‹©ç¦»å¼€ï¼Œä¸»è¦è¿˜æ˜¯æƒ³çœ‹çœ‹åœ¨è¿™ä¹‹å¤–çš„æ˜¯ä»€ä¹ˆæ ·å­ã€‚\n\næœ‹å‹ã€è€å¸ˆã€çˆ¸å¦ˆéƒ½ä¸ºæˆ‘çš„å®ä¹ æ“è¿‡å¿ƒï¼Œä¸è¿‡æ¨èçš„åœ°æ–¹åœ¨å„ç§å¥‡æ€ªçš„ç†ç”±ä¸‹éƒ½æ²¡æœ‰æˆã€‚è‡ªå·±å¼€å§‹åœ¨æ‹‰å‹¾ä¸ŠæŠ•ç®€å†ï¼Œä¸€æ¬¡æ¬¡æ¥è¿”åœ¨äº¬çŸ³é“è·¯ä¸Šã€‚é¢è¯•ä¸€ç›´æ˜¯ä¸é¡ºçš„ã€‚å®Œå…¨æ²¡æœ‰æƒ³åˆ°å¯¹å®ä¹ ç”Ÿæœ‰å¦‚æ­¤é«˜çš„è¦æ±‚ï¼Œå¾ˆå¤šæŠ€æœ¯é—®é¢˜æ­£ä¸­ä¸‹æ€€ã€‚å¿ƒé‡Œæ˜¯æœ‰è½å·®çš„ï¼Œåœ¨æˆ‘å½“æ—¶çš„æƒ³æ³•é‡Œï¼Œé‚£äº›åœ¨å·¥ç¨‹ä¸­æ˜¯ç”¨ä¸æ˜“ç”¨åˆ°çš„ï¼Œä½†ä¹Ÿæ„Ÿåˆ°è‡ªå·±æŠ€æœ¯çŸ¥è¯†çš„æµ…è–„ã€‚é¢è¯•äº†ä¿©ä¸‰å®¶åä¹Ÿå‘ç°äº†å¥—è·¯ï¼Œå›ç­”ä¸å¥½çš„ã€ç­”ä¸ä¸Šçš„é—®é¢˜ï¼Œå›å»æŸ¥æŸ¥å‡†å¤‡å‡†å¤‡ï¼Œä¸‹å›å°±èƒ½ç”¨ä¸Šã€‚\n\næ²¡ä»€ä¹ˆéš¾åº¦çš„å¤§å­¦æ¯•ä¸šã€‚å¤§å­¦é‡Œæ›´å¤šçš„æ”¶è·æ˜¯è·Ÿç€è€å¸ˆã€å­¦é•¿åœ¨è¯¾å ‚å¤–æäº‹ï¼Œæ˜¯å’Œå®¿èˆçš„ã€å¥½æœ‹å‹åœ¨ä¸€èµ·çš„æ—¶é—´ã€‚çœŸçš„å¥½å¹¸è¿å•Šï¼Œé‡åˆ° 318 çš„èˆå‹ä»¬ã€‚æ²¡æƒ³åˆ°å’Œä½ ä»¬æ¯ä¸€ä¸ªäººéƒ½è¶…çº§èŠçš„æ¥ã€‚å¤§å››çš„æ—¶å€™äººå°±æ¸æ¸ä¸é½ï¼Œä½†åªè¦å®¿èˆåœ¨ï¼Œä¸åˆ°æœ€åæ¯•ä¸šçœŸçš„ä¸çŸ¥é“è¦åˆ†åˆ«äº†ã€‚æˆ‘ä»¬ç›¸äº’å½±å“ç€æˆé•¿ï¼Œè‡³å°‘é™¤å»äº†æˆ‘å¾ˆå¤šå¾ˆ low çš„æ€æƒ³ã€‚æˆ‘ä»¬ç›¸äº’ç»ƒç€é…’é‡ã€æ¯å¤©æ¼”ç€æˆã€æ—¥å¸¸è¯´ç€éªšè¯ã€‚\n\nå¾·è‚²ç­”è¾©ä¸Šä¸€ä¸ªåŒå­¦è¯´ï¼šæˆ‘å¸¸ç¿˜è¯¾ã€è€ƒè¯•æŒ‚ç§‘ï¼Œä½†æˆ‘å¤§å­¦å››å¹´è¿‡çš„å¾ˆå¦è¡ï¼Œæˆ‘ä¼šå› ä¸ºå’Œèˆå‹æ¸¸æˆä¸Šçš„ä¸€ä¸ªå¥½ç©çš„å¥—è·¯é«˜å…´å¾ˆä¹…ã€‚æˆ‘æ”¶è·æœ‹å‹ã€‚æˆ‘æ²¡ä»€ä¹ˆåæ‚”çš„ã€‚\nè¿™å¾ˆæˆ³ä¸­æˆ‘çš„æ³ªç‚¹ã€‚æ²¡ä»€ä¹ˆåæ‚”çš„ï¼Œä¹Ÿæ˜¯å¯¹æˆ‘å¤§å­¦çš„æ³¨è„šã€‚æ„¿ä½ ä»¬æˆå®¶çš„å¹¸ç¦ï¼Œå·¥ä½œçš„æœ‰æˆã€‚\n\nä»ä¸Šå­¦åˆ°å·¥ä½œï¼Œè¿‡æ¸¡çš„å¾ˆå¹³ç¨³ã€‚å·¥ä½œä¸­æœ‰ä¸€äº›æŒ‘æˆ˜ï¼Œä½†æ€»ä¹‹æ˜¯è¿˜åº”å¯¹çš„æ¥ã€‚å¯æ²¡æœ‰ä»€ä¹ˆå‡ºä¼—çš„åœ°æ–¹ï¼Œæˆ‘ä¸æƒ³è¿‡çš„å¤ªå¹³å‡¡ï¼Œæ„¿æœ‰ä¸€æŠ€ä¹‹é•¿ï¼Œç‹¬æŒ¡ä¸€é¢ã€‚æˆ‘å¸¸è¯´è‡ªå·±ï¼šèœå•Šã€å‚»å•Šã€ä»€ä¹ˆçš„ï¼Œæˆ‘ç¡®å®ä¸æƒ³ç”¨è¿™äº›æ¥è¯æ¥é€ƒé¿é—®é¢˜ï¼Œæˆ‘æƒ³å°½å¿«çš„ç”©æ‰è¿™äº›ã€‚æˆ‘ä¹Ÿæ„¿è‡ªå·±å¯ä»¥æ›´æœ‰åº•æ°”å’Œå‹‡æ°”è¯´å‡ºï¼Œç°åœ¨ä¸èƒ½è¯´å‡ºçš„è¯ï¼Œæ„¿æ›´å†³ç»çš„å¯¹å¤§äº‹å°æƒ…åšå†³å®šã€‚\n\nå¹´æœ«éšç€å…¬å¸æ¬å®¶ï¼Œè‡ªå·±ä¹Ÿæ¬äº†ã€‚ç‚’èœåšé¥­æˆäº†æ¯å¤©å¦ä¸€éƒ¨åˆ†ã€‚ä¹Ÿè®¸æ‰æ˜¯çœŸæ­£ç”Ÿæ´»äºŒå­—çš„å¼€å§‹ã€‚\n\nçªç„¶æƒ³åˆ°å­¦é•¿æçš„ä¸€ä¸ªé—®é¢˜ï¼šä½ ä»¬æœ‰è°æŠŠæŠ€æœ¯å½“åšä»¥åå®‰èº«ç«‹å‘½çš„æœ¬äº‹ï¼Ÿ\nç°åœ¨å¯¹äºæˆ‘æ¥è¯´ï¼Œè¿™é—®é¢˜çš„ç­”æ¡ˆæ¯”ä»»ä½•æ—¶å€™éƒ½æ›´åŠ æ¸…æ™°ã€‚\n\næœ€åï¼Œè¿˜æ˜¯æ€€æ£ç€ 2014 æœ«çš„æ•¬è¯·æœŸå¾…ï¼Œè®©ä¸€åˆ‡çš†æœ‰å¯èƒ½ï¼Œå¼€å§‹ 2017ã€‚\n\nâ€”â€” é€ç»™ æœ¨æ—æœ¨ä¸¶\n\n-- EOF --\n","tags":["report"],"categories":["report"]},{"title":"Markdown ä¸­ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹æ’ä»¶","url":"/2016/12/22/163-music-in-markdown/","content":"\n**2020-02-27 æ›´æ–°ï¼š** è¿˜æ˜¯ç»¿é’»é¦™å•Šã€‚\n\n---\n\nä¸€ç›´å¤§çˆ±ç½‘æ˜“äº‘éŸ³ä¹ï¼Œä¹Ÿæƒ³ç€åœ¨ markdown ä¸­æ’å…¥éŸ³ä¹æ’­æ”¾ç»„ä»¶ã€‚ç ”ç©¶äº†ä¸‹ï¼Œå‘ç°å®ç°å¾ˆå®¹æ˜“ã€‚\n\n## é€‰æ­Œã€ç”Ÿæˆä»£ç \n\nStep 1ï¼šæ‰“å¼€ [ç½‘æ˜“äº‘éŸ³ä¹ç½‘é¡µç‰ˆ](http://music.163.com/) ï¼Œæ£€ç´¢æ­Œæ›²æ‰“å¼€æ’­æ”¾é¡µé¢ï¼Œä¾‹å¦‚ [G.E.M. - å¶å°”](http://music.163.com/#/song?id=27836172) `http://music.163.com/#/song?id=27836172`ã€‚\n\n<!-- more -->\n\nStep 2ï¼šåœ¨é¡µé¢å·¦ä¾§ç‚¹å‡» [ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨](http://music.163.com/#/outchain/2/27836172/)ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„æ’ä»¶ï¼šiframeã€flashã€‚\n\n## iframe æ’ä»¶\n\n```html\n<iframe\n  frameborder=\"no\"\n  border=\"0\"\n  marginwidth=\"0\"\n  marginheight=\"0\"\n  width=\"330\"\n  height=\"86\"\n  src=\"//music.163.com/outchain/player?type=2&id=27836172&auto=0&height=66\"\n></iframe>\n\n<iframe\n  frameborder=\"no\"\n  border=\"0\"\n  marginwidth=\"0\"\n  marginheight=\"0\"\n  width=\"298\"\n  height=\"52\"\n  src=\"//music.163.com/outchain/player?type=2&id=27836172&auto=0&height=32\"\n></iframe>\n```\n\n### iframe æ’ä»¶æ•ˆæœ\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"//music.163.com/outchain/player?type=2&id=27836172&auto=0&height=66\"></iframe>\n\n<br />\n\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"298\" height=\"52\" src=\"//music.163.com/outchain/player?type=2&id=27836172&auto=0&height=32\"></iframe>\n\n## flash æ’ä»¶\n\n```html\n<embed src=\"//music.163.com/style/swf/widget.swf?sid=27836172&type=2&auto=0&width=320&height=66\" width=\"340\" height=\"86\"  allowNetworking=\"all\"></embed>\n```\n\n### flash æ’ä»¶æ•ˆæœ\n\n<embed src=\"//music.163.com/style/swf/widget.swf?sid=27836172&type=2&auto=0&width=320&height=66\" width=\"340\" height=\"86\"  allowNetworking=\"all\"></embed>\n\n-- EOF --\n"},{"title":"Ubuntu Git å›¾å½¢åŒ–å®¢æˆ·ç«¯ Git Cola","url":"/2016/11/25/git-client-gui-in-ubuntu-git-cola/","content":"\nGit Cola æ˜¯ä¸€ä¸ª Ubuntu ä¸‹çš„ Git å›¾å½¢åŒ–å®¢æˆ·ç«¯ã€‚åœ¨ä¸ç†Ÿæ‚‰ Git å‘½ä»¤æ—¶å’Œåœ¨è¿›è¡Œä»£ç æ¯”å¯¹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿ååŠ©å®Œæˆæ“ä½œã€‚\n\n<!-- more -->\n\n## Install Git Cola\n\n```bash\nsudo apt-get install git-core git-cola\n```\n\n## ä½¿ç”¨ Git Cola\n\nåœ¨æ¡Œé¢æœç´¢æ ä¸­è¾“å…¥ï¼š`cola`ï¼Œç‚¹æ‰“å¼€è½¯ä»¶ã€‚ç‚¹å‡» `Open..` é€‰æ‹© `git` é¡¹ç›®è·¯å¾„\n\nå¯ä»¥åœ¨ `Branch`-> `Visualize Current Branch` æŸ¥çœ‹å½“å‰çš„ `branch`ã€‚ç›®å‰çš„ branch ä¼šä»¥ `gitk` è§†å›¾æ˜¾ç¤º\n\n`Status` è§†å›¾ä¸­æ˜¾ç¤ºæ–‡ä»¶çš„çŠ¶æ€ï¼Œ`Diff` å¯æ–¹ä¾¿æŸ¥çœ‹æ–‡ä»¶çš„å˜åŠ¨\n\n## ä¸€ç‚¹ç»éªŒ\n\nå½“å‘ç° `Status` é¢æ¿ä¸­çš„å†…å®¹æ²¡æœ‰åˆ·æ–°æ—¶ï¼Œå¯ä»¥ `ctrl + r` è¿›è¡Œåˆ·æ–°\n\nä¸‹é¢çš„è¿™ç¯‡æ–‡ç« ä»‹ç»çš„å¾ˆå¥½ï¼Œå°±ä¸å†ç´¯è¿°äº†ï¼š\n\n- [åœ–è§£ Git ç‰ˆæœ¬æ§åˆ¶: Cola Git GUI (1)](http://graphicalgit.blogspot.com/2012/07/git-cola-git-gui-1.html)\n","tags":["git","ubuntu"]},{"title":"Ubuntu ä¸‹ä½¿ç”¨ UFW ç®¡ç†é˜²ç«å¢™æœåŠ¡","url":"/2016/10/10/manage-iptables-using-ufw-in-ubuntu/","content":"\nUFW (Uncomplicated Firewall) ä½œä¸º `iptables` çš„å‰ç«¯åº”ç”¨ï¼Œç»™ç”¨æˆ·æä¾›äº†ç®€å•çš„æ¥å£ç•Œé¢ã€‚ä½¿ç”¨ç€ä¸éœ€è¦å»è®°éå¸¸å¤æ‚çš„ `iptables` è¯­æ³•ã€‚UFW ä¹Ÿä½¿ç”¨äº† ç®€å•è‹±è¯­ ä½œä¸ºå®ƒçš„å‚æ•°ã€‚åƒ allowã€denyã€reset å°±æ˜¯ä»–ä»¬å½“ä¸­çš„ä¸€éƒ¨åˆ†ã€‚UFW ç»å¯¹æ˜¯é‚£äº›æƒ³è¦å¿«é€Ÿã€ç®€å•çš„å°±å»ºç«‹è‡ªå·±çš„é˜²ç«å¢™ï¼Œè€Œä¸”è¿˜å¾ˆå®‰å…¨çš„ç”¨æˆ·çš„æœ€ä½³æ›¿ä»£å“ä¹‹ä¸€ã€‚\n\n## æ£€æŸ¥ç³»ç»Ÿä¸Šæ˜¯å¦å·²ç»å®‰è£… UFW\n\n```bash\nsudo dpkg --get-selections | grep ufw\n```\n\n## å®‰è£… UFW\n\n```bash\nsudo apt-get install ufw\n```\n\n<!-- more -->\n\n## UFW å¸¸ç”¨å‘½ä»¤\n\n### æŸ¥çœ‹ UFW çŠ¶æ€\n\n```bash\nsudo ufw status\n```\n\n### see configured rules even when inactive\n\n```\nufw show added\n```\n\n### å¯ç”¨/ç¦ç”¨ UFW\n\n```bash\n# å¯ç”¨\nsudo ufw enable\n# ç¦ç”¨\nsudo ufw disable\n```\n\nå…ˆæ·»åŠ  `ufw allow ssh`ï¼Œé˜²æ­¢å¢™æ‰è‡ªå·±\n\n### æŸ¥çœ‹ UFW è§„åˆ™\n\néœ€è¦å…ˆå¯ç”¨ UFW\n\n```bash\nsudo ufw status verbose\n```\n\nåœ¨æ¯æ¡è§„åˆ™ä¸ŠåŠ ä¸ªåºå·æ•°å­—\n\n```bash\nsudo ufw status numbered\n```\n\n### æ·»åŠ  UFW å…è®¸è§„åˆ™\n\nå…è®¸ç‰¹å®šæœåŠ¡ç¨‹åº\n\n```bash\nsudo ufw allow ssh\n```\n\nå…è®¸ç‰¹å®šæœåŠ¡ç¨‹åºç‰¹å®šåè®®\n\n```bash\nsudo ufw allow ssh/tcp\n```\n\nå…è®¸ç‰¹å®šç«¯å£\n\n```bash\nsudo ufw allow 8080\n```\n\nå…è®¸ç‰¹å®šç«¯å£ç‰¹å®šåè®®\n\n```bash\nsudo ufw allow 8080/tcp\n```\n\nå…è®¸èŒƒå›´ç«¯å£ç‰¹å®šåè®®ï¼Œå¿…é¡»æŒ‡æ˜åè®® udp æˆ– tcp\n\n```bash\nsudo ufw allow 2290:2300/tcp\n```\n\nå…è®¸ç‰¹å®š IP\n\n```bash\nsudo ufw allow from 192.168.0.104\n```\n\nå…è®¸èŒƒå›´ IP\n\n```bash\nsudo ufw allow from 192.168.0.0/24\n```\n\n- [networking - UFW - allow range of IP addresees? - Ask Ubuntu](https://askubuntu.com/questions/646424/ufw-allow-range-of-ip-addresees)\n- [IPv4 subnetting reference - Wikipedia](https://en.wikipedia.org/wiki/IPv4_subnetting_reference)\n\nç»„åˆå‚æ•°\n\nå¯ä»¥æŠŠ IP åœ°å€ã€åè®®å’Œç«¯å£è¿™äº›ç»„åˆåœ¨ä¸€èµ·ç”¨ã€‚åˆ›å»ºä¸€æ¡è§„åˆ™ï¼Œé™åˆ¶ä»…ä»…æ¥è‡ªäº 192.168.0.104 çš„ IP ï¼Œè€Œä¸”åªèƒ½ä½¿ç”¨ tcp åè®®å’Œé€šè¿‡ 22 ç«¯å£æ¥è®¿é—®æœ¬åœ°èµ„æºï¼š\n\n```bash\nsudo ufw allow from 192.168.0.104 proto tcp to any port 22\n```\n\n### æ·»åŠ  UFW æ‹’ç»è§„åˆ™\n\nåˆ›å»ºæ‹’ç»è§„åˆ™çš„å‘½ä»¤å’Œå…è®¸çš„è§„åˆ™ç±»ä¼¼ï¼Œä»…éœ€è¦æŠŠ `allow` å‚æ•°æ¢æˆ `deny` å‚æ•°å°±å¯ä»¥ã€‚\n\n```bash\nsudo ufw deny ftp\n```\n\n### åˆ é™¤ UFW è§„åˆ™\n\næ–¹æ³•ä¸€ï¼š\n\n```bash\nsudo ufw delete allow ftp\n```\n\næ–¹æ³•äºŒï¼šæŒ‰è¡Œå·åˆ é™¤\n\n```bash\n# æ˜¾ç¤ºè¡Œå·\nsudo ufw status numbered\n\n# æŒ‰è¡Œå·åˆ é™¤\nsudo ufw delete 1\n```\n\n### é‡ç½® UFW æ‰€æœ‰è§„åˆ™\n\n```bash\nsudo ufw reset\n```\n\n## References\n\n- [Debian/Ubuntu ç³»ç»Ÿä¸­å®‰è£…å’Œé…ç½® UFWï¼ç®€å•çš„é˜²ç«å¢™-æŠ€æœ¯ â—† å­¦ä¹ |Linux.ä¸­å›½-å¼€æºç¤¾åŒº](https://linux.cn/article-2489-1.html)\n- [See configured rules even when inactive](https://askubuntu.com/questions/30781/see-configured-rules-even-when-inactive)\n","tags":["ubuntu"]},{"title":"ã€Core Javaã€‘è¯»ä¹¦ç¬”è®° Part 2","url":"/2016/09/23/core-java-reading-notes-part2/","content":"\næœ¬æ–‡æ€»ç»“çš„æ˜¯ä¹¦ä¸­çš„ï¼šç¬¬ 5 ç«  ç»§æ‰¿\n\nå‰å‡ ç« çš„æ€»ç»“åœ¨ï¼š[ZYF.IM-ã€Core Javaã€‘è¯»ä¹¦ç¬”è®° Part1](/2016/05/06/core-java-reading-notes/)\n\n<!-- more -->\n\n## 5 ç»§æ‰¿\n\n### 5.1 ç±»ã€è¶…ç±»å’Œå­ç±»\n\n1ã€æœ‰äº›äººè®¤ä¸º `super` ä¸ `this` å¼•ç”¨æ˜¯ç±»ä¼¼çš„æ¦‚å¿µï¼Œå®é™…ä¸Šï¼Œè¿™æ ·æ¯”è¾ƒå¹¶ä¸å¤ªæ°å½“ã€‚è¿™æ˜¯å› ä¸º `super` ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸èƒ½å°† `super` èµ‹äºˆå¦ä¸€ä¸ªå¯¹è±¡å˜é‡ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæŒ‡ç¤ºç¼–è¯‘å™¨è°ƒç”¨è¶…ç±»æ–¹æ³•çš„ç‰¹æ®Šå…³é”®å­—ã€‚\n2ã€ä½¿ç”¨ `super` æˆ– `this` è°ƒç”¨æ„é€ å™¨çš„è¯­å¥å¿…é¡»æ—¶å­ç±»æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ `super` å’Œ `this` ä¸èƒ½åŒæ—¶å‡ºç°åœ¨ä¸€ä¸ªæ„é€ å™¨ä¸­ã€‚\n3ã€`this` å…³é”®å­—ã€‚\n\n- å¼•ç”¨éšå¼å‚æ•°\n- è°ƒç”¨è¯¥ç±»å…¶ä»–çš„æ„é€ å™¨\n\n4ã€`super` å…³é”®å­—\n\n- è°ƒç”¨è¶…ç±»çš„æ–¹æ³•\n- è°ƒç”¨è¶…ç±»çš„æ„é€ å™¨\n\n5ã€è°ƒç”¨æ„é€ å™¨çš„è¯­å¥åªèƒ½ä½œä¸ºå¦ä¸€ä¸ªæ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥å‡ºç°ã€‚\n6ã€ä¸€ä¸ªå¯¹è±¡å˜é‡å¯ä»¥æŒ‡ç¤ºå¤šç§å®é™…ç±»å‹çš„ç°è±¡è¢«ç§°ä¸ºå¤šæ€ã€‚åœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè‡ªåŠ¨çš„é€‰æ‹©åˆ™è°ƒç”¨å“ªä¸ªæ–¹æ³•çš„ç°è±¡ç§°ä¸ºåŠ¨æ€ç»‘å®šã€‚\n7ã€`Manager[] managers = new Manager[10];` å°†å®ƒè½¬æ¢æˆ `Employee[]` æ•°ç»„æ˜¯å®Œå…¨åˆæ³•çš„ï¼š\n`Employee[] staff = managers;// OK`\næ¯•ç«Ÿå¦‚æœ`manager[i]`æ˜¯ä¸€ä¸ª Managerï¼Œä¹Ÿä¸€å®šæ˜¯ä¸€ä¸ª Employeeï¼Œç„¶è€Œï¼Œå®é™…ä¸Šï¼Œå°†ä¼šå‘ç”Ÿä¸€äº›ä»¤äººæƒŠè®¶çš„äº‹æƒ…ã€‚è¦åˆ‡è®° managers å’Œ staff å¼•ç”¨çš„æ—¶åŒä¸€ä¸ªæ•°ç»„ã€‚ç°åœ¨è¯·çœ‹ï¼š\n`staff[0] = new Employee(\"Harry Hacker\", ..);`\nç¼–è¯‘å™¨ç«Ÿç„¶æ¥çº³äº†è¿™ä¸ªèµ‹å€¼æ“ä½œã€‚`staff[0]`ä¸`manager[0]`å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¼¼ä¹æˆ‘ä»¬æŠŠä¸€ä¸ªæ™®é€šé›‡å‘˜æ“…è‡ªå½’å…¥äº†ç»ç†è¡Œåˆ—ä¸­äº†ã€‚è¿™æ—¶ä¸€ä¸ªç§å¾ˆå¿Œè®³å‘ç”Ÿçš„æƒ…å½¢ï¼Œå½“è°ƒç”¨`managers[0].setBonus(1000)`çš„æ—¶å€™ï¼Œå°†ä¼šå¯¼è‡´è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å®ä¾‹åŸŸï¼Œä»Šå„¿æ…ä¹±ç›¸é‚»å­˜å‚¨ç©ºé—´çš„å†…å®¹ã€‚\nä¸ºäº†ç¡®ä¿ä¸å‘ç”Ÿè¿™ç±»é”™è¯¯ï¼Œæ‰€æœ‰æ•°ç»„éƒ½è¦ç‰¢è®°åˆ›å»ºå®ƒä»¬çš„å…ƒç´ ç±»å‹ï¼Œå¹¶è´Ÿè´£ç›‘ç£ä»…å°†ç±»å‹å…¼å®¹çš„å¼•ç”¨å­˜å‚¨åˆ°æ•°ç»„ä¸­ã€‚\n\n8ã€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹\n\n- ç¼–è¯‘å™¨æŸ¥çœ‹å¯¹è±¡çš„å£°æ˜ç±»å‹å’Œæ–¹æ³•åã€‚å‡è®¾è°ƒç”¨ x.f(param)ï¼Œç¼–è¯‘å™¨å°†ä¼šä¸€ä¸€åˆ—ä¸¾æ‰€æœ‰ C ç±»ä¸­åä¸º f çš„æ–¹æ³•å’Œå…¶ä»–è¶…ç±»ä¸­è®¿é—®å±æ€§ä¸º public ä¸”åä¸º f çš„æ–¹æ³•ï¼ˆè¶…ç±»çš„ç§æœ‰æ–¹æ³•ä¸å¯è®¿é—®ï¼‰ã€‚\n- ç¼–è¯‘å™¨å°†æŸ¥çœ‹è°ƒç”¨æ–¹æ³•æ—¶æä¾›çš„å‚æ•°ç±»å‹ã€‚å¦‚æœåœ¨æ‰€æœ‰åä¸º f çš„æ–¹æ³•ä¸­å­˜åœ¨ä¸€ä¸ªä¸æä¾›çš„å‚æ•°ç±»å‹å®Œå…¨åŒ¹é…ï¼Œå°±é€‰æ‹©è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªå·¥ç¨‹ç§°ä¸ºé‡è½½è§£æã€‚\n- Tipsï¼šè¿”å›ç±»å‹ä¸æ˜¯ç­¾åæ–¹æ³•çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œåœ¨è¦†ç›–æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦ä¿è¯è¿”å›ç±»å‹çš„å…¼å®¹æ€§ã€‚å…è®¸å­ç±»å°†è¦†ç›–æ–¹æ³•çš„è¿”å›ç±»å‹å®šä¹‰ä¸ºåŸè¿”å›ç±»å‹çš„å­ç±»å‹ã€‚\n- å¦‚æœæ˜¯ private æ–¹æ³•ã€static æ–¹æ³•ã€final æ–¹æ³•æˆ–è€…æ„é€ å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†å¯ä»¥å‡†ç¡®çš„çŸ¥é“åº”è¯¥è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°†è¿™ç§è°ƒç”¨æ–¹å¼ç§°ä¸ºé™æ€ç»‘å®šã€‚ä¸æ­¤å¯¹åº”ï¼Œè°ƒç”¨çš„æ–¹æ³•ä¾èµ–äºéšå¼å‚æ•°çš„å®é™…ç±»å‹ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶å®ç°åŠ¨æ€ç»‘å®šã€‚\n\n9ã€åŠ¨æ€ç»‘å®šä¸é™æ€ç»‘å®šåŒºåˆ«å¯¹æ¯”\n9.1ï¼‰é™æ€ç»‘å®šå‘ç”Ÿåœ¨ç¼–è¯‘æ—¶æœŸï¼ŒåŠ¨æ€ç»‘å®šå‘ç”Ÿåœ¨è¿è¡Œæ—¶\n9.2ï¼‰ä½¿ç”¨ private æˆ– static æˆ– final ä¿®é¥°çš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œä½¿ç”¨é™æ€ç»‘å®šã€‚è€Œè™šæ–¹æ³•ï¼ˆå¯ä»¥è¢«å­ç±»é‡å†™çš„æ–¹æ³•ï¼‰åˆ™ä¼šæ ¹æ®è¿è¡Œæ—¶çš„å¯¹è±¡è¿›è¡ŒåŠ¨æ€ç»‘å®šã€‚\n9.3ï¼‰é™æ€ç»‘å®šä½¿ç”¨ç±»ä¿¡æ¯æ¥å®Œæˆï¼Œè€ŒåŠ¨æ€ç»‘å®šåˆ™éœ€è¦ä½¿ç”¨å¯¹è±¡ä¿¡æ¯æ¥å®Œæˆã€‚\n9.4ï¼‰é‡è½½(Overload)çš„æ–¹æ³•ä½¿ç”¨é™æ€ç»‘å®šå®Œæˆï¼Œè€Œé‡å†™(Override)çš„æ–¹æ³•åˆ™ä½¿ç”¨åŠ¨æ€ç»‘å®šå®Œæˆã€‚\n\n10ã€å½“ç¨‹åºè¿è¡Œï¼Œå¹¶ä¸”é‡‡ç”¨åŠ¨æ€ç»‘å®šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºä¸€å®šè°ƒç”¨ä¸ x æ‰€å¼•ç”¨å¯¹è±¡çš„å®é™…ç±»å‹æœ€åˆé€‚çš„é‚£ä¸ªç±»çš„æ–¹æ³•ã€‚å‡è®¾ x çš„å®é™…ç±»å‹æ˜¯ Dï¼Œå®ƒæ˜¯ C ç±»çš„å­ç±»ã€‚å¦‚æœ D ç±»å®šä¹‰äº†æ–¹æ³• f(String)ï¼Œå°±ç›´æ¥è°ƒç”¨å®ƒï¼›å¦åˆ™ï¼Œå°†åœ¨ D ç±»çš„è¶…ç±»ä¸­å¯»æ‰¾ f(String)ï¼Œä»¥æ­¤ç±»æ¨ã€‚\n\n11ã€æ¯æ¬¡è°ƒç”¨æ–¹æ³•éƒ½è¦è¿›è¡Œæœç´¢ï¼Œæ—¶é—´å¼€é”€ç›¸å½“å¤§ã€‚å› æ­¤ï¼Œè™šæ‹Ÿæœºé¢„å…ˆä¸ºæ¯ä¸ªç±»åˆ›å»ºäº†ä¸€ä¸ªæ–¹æ³•è¡¨ï¼Œå…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰æ–¹æ³•çš„ç­¾åå’Œå®é™…è°ƒç”¨çš„æ–¹æ³•ã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨çœŸæ­£è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºä»…æŸ¥æ‰¾è¿™ä¸ªè¡¨å°±è¡Œäº†ã€‚\n\n### 5.1 ç±»ã€è¶…ç±»å’Œå­ç±»\n\n1ã€4 ä¸ªè®¿é—®ä¿®é¥°ç¬¦\n\n- ä»…å¯¹æœ¬ç±»å¯ - private\n- å¯¹æ‰€æœ‰ç±»å¯è§ - publice\n- å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§ - protected\n- å¯¹æœ¬åŒ…å¯è§ - é»˜è®¤ï¼Œä¸éœ€è¦ä¿®é¥°ç¬¦\n\n2ã€ç¼–å†™ä¸€ä¸ªå®Œç¾çš„ equals æ–¹æ³•çš„å»ºè®®\n2.1ï¼‰å‚æ•°å‘½åä¸º otherObjectï¼Œç¨åéœ€è¦å°†å®ƒè½¬æ¢æˆå¦ä¸€ä¸ªå«åš other çš„å˜é‡\n2.2ï¼‰æ£€æµ‹ this ä¸ otherObject æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼š\n`if(this == otherObject) return true;`\nè¿™æ¡è¯­å¥åªæ˜¯ä¸€ä¸ªä¼˜åŒ–ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§ç»å¸¸é‡‡ç”¨çš„å½¢å¼ã€‚å› ä¸ºè®¡ç®—è¿™ä¸ªç­‰è¯•è¦æ¯”ä¸€ä¸ªä¸€ä¸ªçš„æ¯”è¾ƒç±»ä¸­çš„åŸŸä»˜å‡ºçš„ä»£ä»·å°å¾—å¤šã€‚\n2.3ï¼‰æ£€æµ‹ otherObject æ˜¯å¦ä¸º nullï¼Œå¦‚æœä¸º nullï¼Œè¿”å› falseã€‚è¿™é¡¹æ£€æµ‹æ—¶å¾ˆæœ‰å¿…è¦çš„ã€‚\n`if(otherObject == null) return false;`\n2.4ï¼‰æ¯”è¾ƒ this ä¸ otherObject æ˜¯å¦å±äºåŒä¸€ä¸ªç±»ã€‚å¦‚æœ equals çš„è¯­ä¹‰åœ¨æ¯ä¸€ä¸ªå­ç±»ä¸­æœ‰æ‰€æ”¹å˜ï¼ˆå­ç±»èƒ½å¤Ÿæ‹¥æœ‰è‡ªå·±çš„ç›¸ç­‰æ¦‚å¿µï¼‰ï¼Œå°±ä½¿ç”¨ getClass æ£€æµ‹ï¼š\n`if(getClass() != otherObject.getClass()) return false;`\nå¦‚æœæ‰€æœ‰çš„å­ç±»éƒ½æ‹¥æœ‰ç»Ÿä¸€çš„è¯­ä¹‰ï¼ˆç”±è¶…ç±»å†³å®šç›¸ç­‰çš„æ¦‚å¿µï¼‰å°±ä½¿ç”¨ instanceof æ£€æµ‹ï¼š\n`if(!(otherObject instanceof ClassName)) return false;`\n2.5ï¼‰å°† otherObject è½¬æ¢ä¸ºç›¸åº”çš„ç±»ç±»å‹å˜é‡\n`ClassName other = (ClassName)otherObject;`\n2.6ï¼‰ç°åœ¨å¼€å§‹å¯¹æ‰€æœ‰éœ€è¦æ¯”è¾ƒçš„åŸŸè¿›è¡Œæ¯”è¾ƒäº†ã€‚ä½¿ç”¨ == æ¯”è¾ƒåŸºæœ¬ç±»å‹åŸŸï¼Œä½¿ç”¨ equals æ¯”è¾ƒå¯¹è±¡åŸŸã€‚å¦‚æœæ‰€æœ‰çš„åŸŸéƒ½åŒ¹é…ï¼Œå°±è¿”å› trueï¼›å¦åˆ™è¿”å› false\n2.7ï¼‰å®Œæ•´çš„ä¾‹å­ï¼š\n\n```java\nclass Employee {\n\t...\n\tpublic boolean equals(Object otherObject) {\n\t\t// a quick test to see if the objects are identical\n\t\tif(this == otherObject) return true;\n\n\t\t// must return false if the explicit parameter is null\n\t\tif(otherObject == null) return false;\n\n\t\t// if the classes don`t match, they can`t be equal\n\t\tif(getClass() != otherObject.getClass()) return false;\n\n\t\t// now we know otherObject is a non-null values\n\t\tEmloyee other = (Emloyee)otherObject;\n\n\t\t// test whether the fields have identical values\n\t\treturn name.equals(other.name) && salary == other.salary\n\t\t&& hrieDay.equals(other.hirDay);\n\t}\n}\n```\n\n> Reference:\n>\n> - [æŠ€æœ¯å°é»‘å±‹-Java ä¸­çš„é™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®š](http://droidyue.com/blog/2014/12/28/static-biding-and-dynamic-binding-in-java/)\n","tags":["reading-notes","java"]},{"title":"LeetCode Shell è§£é¢˜é›†åˆ","url":"/2016/09/19/leetcode-shell-solutions/","content":"\nLeetCode Shell çš„è¯•é¢˜å¤šä¸ºæ–‡æœ¬æ“ä½œï¼Œ[195. Tenth Line](https://leetcode.com/problems/tenth-line/)ã€[193. Valid Phone Numbers](https://leetcode.com/problems/valid-phone-numbers/)ã€[192. Word Frequency](https://leetcode.com/problems/word-frequency/)ã€[194. Transpose File](https://leetcode.com/problems/transpose-file/) æš‚æ—¶åªæœ‰ 4 é“é¢˜ï¼Œå°±æ•´åˆåœ¨è¿™ä¸€èµ·äº†\n\nShell ä¸­æ–‡æœ¬å¤„ç†çš„äº‹æƒ…åŸºæœ¬ `awk` `sed` `grep` `sort` `uniq` `tail` `head` å‡ ä¸ªå‘½ä»¤ç»„åˆç»„åˆå°±æå®šäº†\n\n<!-- more -->\n\n## [195. Tenth Line](https://leetcode.com/problems/tenth-line/)\n\n### å¤§ä½“æ„æ€\n\nHow would you print just the 10th line of a file?\nFor example, assume that file.txt has the following content:\n\n```\nLine 1\nLine 2\nLine 3\nLine 4\nLine 5\nLine 6\nLine 7\nLine 8\nLine 9\nLine 10\n```\n\nYour script should output the tenth line, which is:\n\n```\nLine 10\n```\n\næ‰“å°å‡ºæ–‡æœ¬æ–‡ä»¶ä¸­ç¬¬ 10 è¡Œçš„å†…å®¹ã€‚\n\n### è‡ªå·±çš„è§£æ³•\n\n```bash\ncat  file.txt | tail -n +10 | head -n 1\n```\n\nè¿™æ˜¯å­¦ä¹ äº†ï¼š[linux å¦‚ä½•æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æŸå‡ è¡Œ(ä¸­é—´å‡ è¡Œ) - é¦™æ ¼é‡Œæ‹‰\\(^o^)/](http://www.cnblogs.com/xianghang123/archive/2011/08/03/2125977.html)\n\n### åˆ«äººçš„è§£æ³•\n\næ–¹æ³•ä¸€ï¼š\n\n```bash\nawk 'NR==10' file.txt\n# awkçš„é»˜è®¤åŠ¨ä½œå°±æ˜¯æ‰“å°$0ï¼Œæ‰€ä»¥NR==10åé¢å¯ä»¥ä¸ç”¨åŠ {print $0}\n```\n\næ–¹æ³•äºŒï¼š\n\n```bash\nsed -n '10p' file.txt\n# å¦‚æœä¸å¤Ÿ10è¡Œï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸æ‰“å°\n```\n\næ–¹æ³•ä¸‰ï¼š\n\n```bash\nline=$(cat file.txt | wc -l)     # åƒä¸‡æ³¨æ„ï¼Œç­‰å·å‰åä¸€å®šä¸è¦æœ‰ç©ºæ ¼\nif [ \"$line\" -ge 10 ] ; then     # $lineçš„åŒå¼•å·ä¹Ÿå¯ä»¥ä¸ç”¨åŠ \n  cat file.txt | head -n 10 | tail -n 1\nfi\n```\n\nReference: [leetcode-195 Tenth Line - 2&gt; /dev/null](http://blog.csdn.net/sole_cc/article/details/44977821)\n\n## [193. Valid Phone Numbers](https://leetcode.com/problems/valid-phone-numbers/)\n\n### å¤§ä½“æ„æ€\n\nGiven a text file `file.txt` that contains list of phone numbers (one per line), write a one liner bash script to print all valid phone numbers.\nYou may assume that a valid phone number must appear in one of the following two formats: (xxx) xxx-xxxx or xxx-xxx-xxxx. (x means a digit)\nYou may also assume each line in the text file must not contain leading or trailing white spaces.\n\nFor example, assume that `file.txt` has the following content:\n\n```\n987-123-4567\n123 456 7890\n(123) 456-7890\n```\n\nYour script should output the following valid phone numbers:\n\n```\n987-123-4567\n(123) 456-7890\n```\n\nåŒ¹é…æœ‰æ•ˆçš„ç”µè¯å·ç \n\n### è‡ªå·±çš„è§£æ³•\n\n```bash\ncat file.txt | grep '^[0-9]\\{3\\}-[0-9]\\{3\\}-[0-9]\\{4\\}$\\|^([0-9]\\{3\\}) [0-9]\\{3\\}-[0-9]\\{4\\}$'\n```\n\n### åˆ«äººçš„è§£æ³•\n\n```bash\ngrep -P '^(\\(\\d{3}\\)|\\d{3}-)\\d{3}-\\d{4}$' file.txt\n```\n\nReference: [LeetCode 193: Valid Phone Numbers &#8211; Revo](https://ruixublog.wordpress.com/2015/05/13/leetcode-193-valid-phone-numbers/)\n\n## [192. Word Frequency](https://leetcode.com/problems/word-frequency/)\n\n### å¤§ä½“æ„æ€\n\nWrite a bash script to calculate the frequency of each word in a text file `words.txt`.\n\nFor simplicity sake, you may assume:\n\n`words.txt` contains only lowercase characters and space `' '` characters.\nEach word must consist of lowercase characters only.\nWords are separated by one or more whitespace characters.\nFor example, assume that `words.txt` has the following content:\n\n```\nthe day is sunny the the\nthe sunny is is\n```\n\nYour script should output the following, sorted by descending frequency:\n\n```\nthe 4\nis 3\nsunny 2\nday 1\n```\n\nNote:\nDon't worry about handling ties, it is guaranteed that each word's frequency count is unique.\n\nç»Ÿè®¡å•è¯å‡ºç°çš„é¢‘æ¬¡ï¼Œç„¶åå€’åºæ’åˆ—\n\n### åˆ«äººçš„è§£æ³•\n\n```bash\nawk '{i=1;while(i<=NF){print $i;i++}}' words.txt  | sort | uniq -c  | sort -k1nr  | awk '{print $2 \" \" $1}'\n```\n\n1ã€åˆ©ç”¨ awk é»˜è®¤ä¸€è¡Œä¸€æ¡è®°å½•ï¼Œé»˜è®¤ä»¥ç©ºæ ¼åˆ’åˆ†æ¯æ¡è®°å½•ï¼ŒNF ä¸ºåˆ’åˆ†çš„æ€»å—æ•°å…ˆæ‰“å°å‡ºæ‰€æœ‰å•è¯\n2ã€æ’åº + ç»Ÿè®¡ + æ¶ˆé™¤é‡å¤\n3ã€è¾“å‡º\n\nReference: [LeetCode 192 Word Frequency - wangxiaobupt çš„ä¸“æ ](http://blog.csdn.net/wangxiaobupt/article/details/45201817)\n\n```bash\nawk '\n{ for (i=1; i<=NF; i++) { ++S[$i]; } }\nEND { for (i in S) { print i, S[i] } }\n' words.txt | sort -nr -k 2\n```\n\nReference: [leetcode/solutions/192.Word_Frequency at master Â· illuz/leetcode](https://github.com/illuz/leetcode/tree/master/solutions/192.Word_Frequency)\n\n## [194. Transpose File](https://leetcode.com/problems/transpose-file/)\n\n### å¤§ä½“æ„æ€\n\nGiven a text file `file.txt`, transpose its content.\n\nYou may assume that each row has the same number of columns and each field is separated by the `' '` character.\n\nFor example, if `file.txt` has the following content:\n\n```\nname age\nalice 21\nryan 30\n```\n\nOutput the following:\n\n```\nname alice ryan\nage 21 30\n```\n\n### åˆ«äººçš„è§£æ³•\n\n```\nawk '\n{\n    for (i = 1; i <= NF; i++) {\n        if(NR == 1) {\n            s[i] = $i;\n        } else {\n            s[i] = s[i] \" \" $i;\n        }\n    }\n}\nEND {\n    for (i = 1; s[i] != \"\"; i++) {\n        print s[i];\n    }\n}' file.txt\n```\n\nReference: [leetcode/solutions/194.Transpose_File at master Â· illuz/leetcode](https://github.com/illuz/leetcode/tree/master/solutions/194.Transpose_File)\n\n## æ€»ç»“\n\nShell ä¸­æ–‡æœ¬å¤„ç†çš„äº‹æƒ…åŸºæœ¬ `awk` `sed` `grep` `sort` `uniq` `tail` `head` å‡ ä¸ªå‘½ä»¤ç»„åˆç»„åˆå°±æå®šäº†ï¼Œå„å‘½ä»¤çš„å¸¸ç”¨æ–¹æ³•ä¹‹åæ€»ç»“\n","tags":["leetcode"]},{"title":"Ubuntu ä¸‹ä½¿ç”¨ sysv-rc-conf ç®¡ç†å¼€æœºå¯åŠ¨æœåŠ¡","url":"/2016/09/19/manage-startup-program-using-sysv-rc-conf-in-ubuntu/","content":"\n`sysv-rc-conf` gives an easy to use interface for managing \"/etc/rc{runlevel}.d/\" symlinks. The interface comes in two different flavors, one that simply allows turning services on or off and another that allows for more fine tuned management of the symlinks.\n\n## å®‰è£… sysv-rc-conf\n\n```bash\nsudo apt-get install sysv-rc-conf\n```\n\n## ä½¿ç”¨ sysv-rc-conf\n\n```bash\nsudo sysv-rc-conf\n```\n\næ“ä½œç•Œé¢ååˆ†ç®€æ´ï¼Œä½ å¯ä»¥ç”¨é¼ æ ‡ç‚¹å‡»ï¼Œä¹Ÿå¯ä»¥ç”¨é”®ç›˜æ–¹å‘é”®å®šä½ï¼Œç”¨ç©ºæ ¼é”®é€‰æ‹©ï¼Œç”¨ `Ctrl+n` ç¿»ä¸‹ä¸€é¡µï¼Œç”¨ `Ctrl+p` ç¿»ä¸Šä¸€é¡µï¼Œç”¨ `q` é€€å‡ºã€‚\n\n<!-- more -->\n\n## ç›¸å…³çŸ¥è¯†\n\n### Ubuntu è¿è¡Œçº§åˆ«\n\nLinux ç³»ç»Ÿä»»ä½•æ—¶å€™éƒ½è¿è¡Œåœ¨ä¸€ä¸ªæŒ‡å®šçš„è¿è¡Œçº§ä¸Šï¼Œå¹¶ä¸”ä¸åŒçš„è¿è¡Œçº§çš„ç¨‹åºå’ŒæœåŠ¡éƒ½ä¸åŒï¼Œæ‰€è¦å®Œæˆçš„å·¥ä½œå’Œè¦è¾¾åˆ°çš„ç›®çš„éƒ½ä¸åŒï¼Œç³»ç»Ÿå¯ä»¥åœ¨è¿™äº›è¿è¡Œçº§ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œä»¥å®Œæˆä¸åŒçš„å·¥ä½œã€‚\n\nUbuntu çš„ç³»ç»Ÿè¿è¡Œçº§åˆ«ï¼š\n\n```bash\n0 åœæœº\n1 å•ç”¨æˆ·ï¼ŒDoes not configure network interfaces, start daemons, or allow non-root logins\n2 å¤šç”¨æˆ·ï¼Œæ— ç½‘ç»œè¿æ¥ Does not configure network interfaces or start daemons\n3 å¤šç”¨æˆ·ï¼Œå¯åŠ¨ç½‘ç»œè¿æ¥ Starts the system normally.\n4 ç”¨æˆ·è‡ªå®šä¹‰\n5 å¤šç”¨æˆ·å¸¦å›¾å½¢ç•Œé¢\n6 é‡å¯\n```\n\næŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```bash\nrunlevel\n```\n\nrunlevel æ˜¾ç¤ºä¸Šæ¬¡çš„è¿è¡Œçº§åˆ«å’Œå½“å‰çš„è¿è¡Œçº§åˆ«ï¼Œâ€œNâ€è¡¨ç¤ºæ²¡æœ‰ä¸Šæ¬¡çš„è¿è¡Œçº§åˆ«ã€‚\n\nåˆ‡æ¢è¿è¡Œçº§åˆ«ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```bash\nint [0123456Ss]\n```\n\nå³åœ¨ init å‘½ä»¤åè·Ÿä¸€ä¸ªå‚æ•°ï¼Œæ­¤å‚æ•°æ˜¯è¦åˆ‡æ¢åˆ°çš„è¿è¡Œçº§çš„è¿è¡Œçº§ä»£å·ï¼Œå¦‚ï¼šç”¨ init 0 å‘½ä»¤å…³æœºï¼›ç”¨ init 6 å‘½ä»¤é‡æ–°å¯åŠ¨ã€‚\n\n```bash\nls /etc/rc*\n```\n\nå¯¹äºä»¥ K å¼€å¤´çš„æ–‡ä»¶ï¼Œç³»ç»Ÿå°†ç»ˆæ­¢å¯¹åº”çš„æœåŠ¡ï¼›\nå¯¹äºä»¥ S å¼€å¤´çš„æ–‡ä»¶ï¼Œç³»ç»Ÿå°†å¯åŠ¨å¯¹åº”çš„æœåŠ¡ï¼›\n\n### Linux ç³»ç»Ÿä¸»è¦å¯åŠ¨æ­¥éª¤\n\n1ã€è¯»å– MBR çš„ä¿¡æ¯ï¼Œå¯åŠ¨ Boot Manager\n\nWindows ä½¿ç”¨ NTLDR ä½œä¸º Boot Managerï¼Œå¦‚æœæ‚¨çš„ç³»ç»Ÿä¸­å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Windowsï¼Œæ‚¨å°±éœ€è¦åœ¨ NTLDR ä¸­é€‰æ‹©æ‚¨è¦è¿›å…¥çš„ç³»ç»Ÿã€‚Linux é€šå¸¸ä½¿ç”¨åŠŸèƒ½å¼ºå¤§ï¼Œé…ç½®çµæ´»çš„ GRUB ä½œä¸º Boot Managerã€‚\n\n2ã€åŠ è½½ç³»ç»Ÿå†…æ ¸ï¼Œå¯åŠ¨ init è¿›ç¨‹\n\ninit è¿›ç¨‹æ˜¯ Linux çš„æ ¹è¿›ç¨‹ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿè¿›ç¨‹éƒ½æ˜¯å®ƒçš„å­è¿›ç¨‹ã€‚\n\n3ã€init è¿›ç¨‹è¯»å– `/etc/inittab` æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œå¹¶è¿›å…¥é¢„è®¾çš„è¿è¡Œçº§åˆ«ï¼ŒæŒ‰é¡ºåºè¿è¡Œè¯¥è¿è¡Œçº§åˆ«å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„è„šæœ¬ã€‚è„šæœ¬é€šå¸¸ä»¥ start å‚æ•°å¯åŠ¨ï¼Œå¹¶æŒ‡å‘ä¸€ä¸ªç³»ç»Ÿä¸­çš„ç¨‹åºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ`/etc/rcS.d/` ç›®å½•ä¸‹çš„å¯åŠ¨è„šæœ¬é¦–å…ˆè¢«æ‰§è¡Œï¼Œç„¶åæ˜¯ `/etc/rcN.d/` ç›®å½•ã€‚ä¾‹å¦‚æ‚¨è®¾å®šçš„è¿è¡Œçº§åˆ«ä¸º `3`ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„å¯åŠ¨ç›®å½•ä¸º `/etc/rc3.d/`ã€‚\n\n4ã€æ ¹æ® `/etc/rcS.d/` æ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„è„šæœ¬å¯åŠ¨ Xwindow æœåŠ¡å™¨ xorg Xwindow ä¸º Linux ä¸‹çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ç³»ç»Ÿã€‚\n\n5ã€å¯åŠ¨ç™»å½•ç®¡ç†å™¨ï¼Œç­‰å¾…ç”¨æˆ·ç™»å½• Ubuntu ç³»ç»Ÿé»˜è®¤ä½¿ç”¨ GDM ä½œä¸ºç™»å½•ç®¡ç†å™¨ï¼Œæ‚¨åœ¨ç™»å½•ç®¡ç†å™¨ç•Œé¢ä¸­è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œä¾¿å¯ä»¥ç™»å½•ç³»ç»Ÿã€‚\n\n### å¸¸è§çš„ç³»ç»ŸæœåŠ¡\n\n```bash\nacpi-support é«˜çº§ç”µæºç®¡ç†æ”¯æŒ\nacpid acpi å®ˆæŠ¤ç¨‹åºã€‚è¿™ä¸¤ä¸ªç”¨äºç”µæºç®¡ç†ï¼Œéå¸¸é‡è¦\nalsa å£°éŸ³å­ç³»ç»Ÿ\nalsa-utils\nanacron cron çš„å­ç³»ç»Ÿï¼Œå°†ç³»ç»Ÿå…³é—­æœŸé—´çš„è®¡åˆ’ä»»åŠ¡ï¼Œåœ¨ä¸‹ä¸€æ¬¡ç³»ç»Ÿè¿è¡Œæ—¶æ‰§è¡Œ\napmd acpi çš„æ‰©å±•\natd ç±»ä¼¼äº cron çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚å»ºè®®å…³é—­\nbinfmt-support æ ¸å¿ƒæ”¯æŒå…¶ä»–äºŒè¿›åˆ¶çš„æ–‡ä»¶æ ¼å¼ã€‚å»ºè®®å¼€å¯\nbluez-utiles è“ç‰™è®¾å¤‡æ”¯æŒ\nbootlogd å¯åŠ¨æ—¥å¿—ã€‚å¼€å¯å®ƒ\ncron ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œå»ºè®®å¼€å¯\ncupsys æ‰“å°æœºå­ç³»ç»Ÿ\ndbus æ¶ˆæ¯æ€»çº¿ç³»ç»Ÿ(message bus system)ã€‚éå¸¸é‡è¦\ndns-clean ä½¿ç”¨æ‹¨å·è¿æ¥æ—¶ï¼Œæ¸…é™¤ dns ä¿¡æ¯\nevms ä¼ä¸šå·ç®¡ç†ç³»ç»Ÿ(Enterprise Volumn Management system)\nfetchmail é‚®ä»¶ç”¨æˆ·ä»£ç†å®ˆæŠ¤è¿›ç¨‹ï¼Œç”¨äºæ”¶å–é‚®ä»¶\ngdm gnome ç™»å½•å’Œæ¡Œé¢ç®¡ç†å™¨ã€‚\ngdomap\ngpm ç»ˆç«¯ä¸­çš„é¼ æ ‡æ”¯æŒ\nhalt åˆ«åŠ¨å®ƒ\nhdparm è°ƒæ•´ç¡¬ç›˜çš„è„šæœ¬ï¼Œé…ç½®æ–‡ä»¶ä¸º /etc/hdparm.conf\nhibernate ç³»ç»Ÿä¼‘çœ \nhotkey-setup ç¬”è®°æœ¬åŠŸèƒ½é”®æ”¯æŒã€‚æ”¯æŒç±»å‹åŒ…æ‹¬: HPï¼Œ Acerï¼Œ ASUSï¼Œ Sonyï¼ŒDellï¼Œ å’Œ IBM\nhotplug and hotplug-net å³æ’å³ç”¨æ”¯æŒï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®ä¸è¦åŠ¨å®ƒ\nhplip HP æ‰“å°æœºå’Œå›¾å½¢å­ç³»ç»Ÿ\nifrename ç½‘ç»œæ¥å£é‡å‘½åè„šæœ¬ã€‚å¦‚æœæ‚¨æœ‰åå—ç½‘å¡ï¼Œæ‚¨åº”è¯¥å¼€å¯å®ƒ\ninetd åœ¨æ–‡ä»¶ /etc/inetd.conf ä¸­ï¼Œæ³¨é‡Šæ‰æ‰€æœ‰ä½ ä¸éœ€è¦çš„æœåŠ¡ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸åŒ…å«ä»»ä½•æœåŠ¡ï¼Œé‚£å…³é—­å®ƒæ˜¯å¾ˆå®‰å…¨çš„\nklogd é‡è¦\nlinux-restricted-modules-common å—é™æ¨¡å—æ”¯æŒ\n/lib/linux-restricted-modules/ æ–‡ä»¶å¤¹ä¸­çš„æ¨¡å—ä¸ºå—é™æ¨¡å—ã€‚ä¾‹å¦‚æŸäº›é©±åŠ¨ç¨‹åºï¼Œå¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨å—é™æ¨¡å—ï¼Œå°±ä¸éœ€è¦å¼€å¯å®ƒ\nlvm é€»è¾‘å·ç®¡ç†ç³»ç»Ÿæ”¯æŒ\nmakedev åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼Œéå¸¸é‡è¦\nmdamd ç£ç›˜é˜µåˆ—\nmodule-init-tools ä»/etc/modules åŠ è½½æ‰©å±•æ¨¡å—ï¼Œå»ºè®®å¼€å¯\nnetworking ç½‘ç»œæ”¯æŒã€‚æŒ‰ /etc/network/interfaces æ–‡ä»¶é¢„è®¾æ¿€æ´»ç½‘ç»œï¼Œéå¸¸é‡è¦\nntpdate æ—¶é—´åŒæ­¥æœåŠ¡ï¼Œå»ºè®®å…³é—­\npcmcia pcmcia è®¾å¤‡æ”¯æŒ\npowernowd ç§»åŠ¨ CPU èŠ‚èƒ½æ”¯æŒ\nppp and ppp-dns æ‹¨å·è¿æ¥\nreadahead é¢„åŠ è½½åº“æ–‡ä»¶\nreboot åˆ«åŠ¨å®ƒ\nresolvconf è‡ªåŠ¨é…ç½® DNS\nrmnologin æ¸…é™¤ nologin\nrsync rsync å®ˆæŠ¤ç¨‹åº\nsendsigs åœ¨é‡å¯å’Œå…³æœºæœŸé—´å‘é€ä¿¡å·\nsingle æ¿€æ´»å•ç”¨æˆ·æ¨¡å¼\nssh ssh å®ˆæŠ¤ç¨‹åºã€‚å»ºè®®å¼€å¯\nstop-bootlogd åœ¨ 2ï¼Œ3ï¼Œ4ï¼Œ5 è¿è¡Œçº§åˆ«ä¸­åœæ­¢ bootlogd æœåŠ¡\nsudo æ£€æŸ¥ sudo çŠ¶æ€ã€‚é‡è¦\nsysklogd ç³»ç»Ÿæ—¥å¿—\nudev & udev-mab ç”¨æˆ·ç©ºé—´ dev æ–‡ä»¶ç³»ç»Ÿ(userspace dev filesystem)ã€‚é‡è¦\numountfs å¸è½½æ–‡ä»¶ç³»ç»Ÿ\nurandom éšæœºæ•°ç”Ÿæˆå™¨\nusplash å¼€æœºç”»é¢æ”¯æŒ\nvbesave æ˜¾å¡ BIOS é…ç½®å·¥å…·ã€‚ä¿å­˜æ˜¾å¡çš„çŠ¶æ€\nxorg-common è®¾ç½® X æœåŠ¡ ICE socketã€‚\nadjtimex è°ƒæ•´æ ¸å¿ƒæ—¶é’Ÿçš„å·¥å…·\ndirmngr è¯ä¹¦åˆ—è¡¨ç®¡ç†å·¥å…·ï¼Œå’Œ gnupg ä¸€èµ·å·¥ä½œã€‚\nhwtools irqs ä¼˜åŒ–å·¥å…·\nlibpam-devperm ç³»ç»Ÿå´©æºƒä¹‹åï¼Œç”¨äºä¿®ç†è®¾å¤‡æ–‡ä»¶è®¸å¯çš„å®ˆæŠ¤ç¨‹åºã€‚\nlm-sensors æ¿è½½ä¼ æ„Ÿå™¨æ”¯æŒ\nmdadm-raid ç£ç›˜é™ˆåˆ—ç®¡ç†å™¨\nscreen-cleanup æ¸…é™¤å¼€æœºå±å¹•çš„è„šæœ¬\nxinetd ç®¡ç†å…¶ä»–å®ˆæŠ¤è¿›ç¨‹çš„ä¸€ä¸ª inetd è¶…çº§å®ˆæŠ¤ç¨‹åº\n```\n\n## References\n\n- [Ubuntu ä¸‹ä½¿ç”¨ sysv-rc-conf ç®¡ç†æœåŠ¡ Â» å†°æ²³çš„åšå®¢](https://www.binghe.org/2009/12/manage-services-using-sysv-rc-conf-in-ubuntu/)\n- [Ubuntu ä¸‹ä½¿ç”¨ sysv-rc-conf ç®¡ç†æœåŠ¡ - AderStep](http://blog.csdn.net/gatieme/article/details/45251389)\n- [å¯åŠ¨ - Ubuntu ä¸­æ–‡](http://wiki.ubuntu.org.cn/%E5%90%AF%E5%8A%A8)\n","tags":["ubuntu"]},{"title":"Eclipse Java æ³¨é‡Šæ¨¡æ¿","url":"/2016/09/18/eclipse-java-comments-templates/","content":"\nè‡ªå·±æ€»ç»“çš„æ¯”è¾ƒè§„èŒƒçš„ Eclipse Java æ³¨é‡Šæ¨¡æ¿\n\n## Eclipse Java æ³¨é‡Šæ¨¡æ¿è®¾ç½®\n\nWindow -> Preference -> Java -> CodeStyle -> Code Template ç„¶åå±•å¼€ Comments èŠ‚ç‚¹å°±æ˜¯æ‰€æœ‰éœ€è®¾ç½®æ³¨é‡Šçš„å…ƒç´ \n\n<!-- more -->\n\n## å„é¡¹æ³¨é‡Šæ¨¡æ¿\n\n### Files\n\n```\n/**\n * Copyright Â© ${year}. All rights reserved.\n *\n * @Title: ${file_name}\n * @Prject: ${project_name}\n * @Package: ${package_name}\n * @Description: ${todo}\n * @author: ${user}\n * @date: ${date} ${time}\n */\n```\n\n### Types\n\n```\n/**\n *\n *\n * @ClassName: ${type_name}\n * @Description: ${todo}\n * @author: ${user}\n * @date: ${date} ${time}\n * ${tags}\n */\n```\n\n### Fields\n\n```\n/**\n * @fieldName: ${field}\n * @fieldType: ${field_type}\n * @Description: ${todo}\n */\n```\n\n### Constructors\n\n```\n/**\n * @Title:${enclosing_type}\n * @Description:${todo}\n * ${tags}\n */\n```\n\n### Methods\n\n```\n/**\n *\n *\n * @Title: ${enclosing_method}\n * @Description: ${todo}\n * @author: ${user}\n * ${tags}\n * @return: ${return_type}\n */\n```\n\n### Overriding methods\n\n```\n/* (no Javadoc)\n * <p>Title: ${enclosing_method}</p>\n * <p>Description: </p>\n * ${tags}\n * ${see_to_overridden}\n */\n```\n\n## å®šåˆ¶ \\${user} æ˜¾ç¤ºå†…å®¹\n\næ‰¾åˆ°ä½ çš„ Eclipse å®‰è£…è·¯å¾„ï¼Œæ‰“å¼€ `eclipse.ini` æ–‡ä»¶ï¼Œåœ¨ -vmargs ä¸‹é¢æ·»åŠ \n\n```\n-Duser.name=å§“å + ç©ºæ ¼ + é‚®ç®±åœ°å€\n```\n","tags":["java"]},{"title":"MySQL LIMIT æŸ¥è¯¢ä¼˜åŒ–","url":"/2016/09/18/mysql-limit-query-optimization/","content":"\næœ€è¿‘å¸¸åœ¨ SQL ä¸­ä½¿ç”¨åˆ° `LIMIT ? ?`ï¼Œåœ¨æ‰§è¡Œ `LIMIT 0, 1000` ä¸ `LIMIT 100000, 1000` æ—¶ï¼ŒæŸ¥è¯¢é€Ÿåº¦æ˜æ˜¾æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œè€Œä¸”éšç€ LIMIT çš„åç§»é‡çš„å¢åŠ ï¼ŒæŸ¥è¯¢é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ã€‚æ˜¯å¦æœ‰åŠæ³•å¯¹ SQL ä¸­ LIMIT æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–å‘¢ï¼Ÿ\n\n<!-- more -->\n\n## LIMIT é€Ÿåº¦æ…¢çš„åŸå› \n\nLIMIT 100000, 1000 çš„æ„æ€æ‰«ææ»¡è¶³æ¡ä»¶çš„ 101000 è¡Œï¼Œæ‰”æ‰å‰é¢çš„ 100000 è¡Œï¼Œè¿”å›æœ€åçš„ 1000 è¡Œï¼Œé—®é¢˜å°±åœ¨è¿™é‡Œã€‚\n\n## LIMIT ä¼˜åŒ–æ€è·¯\n\n1ã€å°½å¯èƒ½ä»ç´¢å¼•ä¸­ç›´æ¥è·å–æ•°æ®ï¼Œé¿å…æˆ–å‡å°‘ç›´æ¥æ‰«æè¡Œæ•°æ®çš„é¢‘ç‡\n2ã€å°½å¯èƒ½å‡å°‘æ‰«æçš„è®°å½•æ•°ï¼Œä¹Ÿå°±æ˜¯å…ˆç¡®å®šèµ·å§‹çš„èŒƒå›´ï¼Œå†å¾€åå– N æ¡è®°å½•å³å¯\n\n## LIMIT ä¼˜åŒ–ç¤ºä¾‹\n\n### åŸå§‹ SQL\n\n```sql\n-- å«æ¡ä»¶\nSELECT * FROM `t1` WHERE ftype=1 ORDER BY id DESC LIMIT 100, 10;\n-- ä¸å« WHERE\nSELECT * FROM `t1` ORDER BY id DESC LIMIT 100, 10;\n```\n\n### å­æŸ¥è¯¢ä¼˜åŒ– SQL\n\n```sql\n-- é‡‡ç”¨å­æŸ¥è¯¢çš„æ–¹å¼ä¼˜åŒ–ï¼Œåœ¨å­æŸ¥è¯¢é‡Œå…ˆä»ç´¢å¼•è·å–åˆ°æœ€å¤§ idï¼Œç„¶åå€’åºæ’ï¼Œå†å– 10 è¡Œç»“æœé›†\n-- æ³¨æ„è¿™é‡Œé‡‡ç”¨äº† 2 æ¬¡å€’åºæ’ï¼Œå› æ­¤åœ¨å– LIMIT çš„ start å€¼æ—¶ï¼Œæ¯”åŸæ¥çš„å€¼åŠ äº† 10ï¼Œå³ 935510ï¼Œå¦åˆ™ç»“æœå°†å’ŒåŸæ¥çš„ä¸ä¸€è‡´\nSELECT * FROM\n  (SELECT * FROM `t1` WHERE id >\n    ( SELECT id FROM `t1` WHERE ftype=1 ORDER BY id DESC LIMIT 935510, 1)\n  LIMIT 10) T\nORDER BY id DESC;\n```\n\n### INNER ä¼˜åŒ– SQL\n\n```sql\n-- é‡‡ç”¨ INNER JOIN ä¼˜åŒ–ï¼ŒJOIN å­å¥é‡Œä¹Ÿä¼˜å…ˆä»ç´¢å¼•è·å– ID åˆ—è¡¨ï¼Œç„¶åç›´æ¥å…³è”æŸ¥è¯¢è·å¾—æœ€ç»ˆç»“æœï¼Œè¿™é‡Œä¸éœ€è¦åŠ  10\nSELECT * FROM `t1`\n  INNER JOIN ( SELECT id FROM `t1`\n    WHERE ftype=1 ORDER BY id DESC LIMIT 935500,10) t2\n  USING (id);\n```\n\n1ã€è¦å­¦ç€ä½¿ç”¨ `EXPLAIN` å¯¹ SQL è¿›è¡Œä¼˜åŒ–è°ƒæ•´\n2ã€æ¨èä½¿ç”¨ INNER ä¼˜åŒ– SQL\n3ã€å‘ç°äº†ä¸€ä¸ª ubuntu ä¸­ç›‘æ§ MySQL çš„ `mytop` å‘½ä»¤ï¼Œåˆšåˆšå®‰è£…è¿˜æ²¡ç»†ç ”ç©¶\n\n```bash\nsudo apt-get install mytop\n```\n\n4ã€`USING (id)` å¦‚æœä¸¤ä¸ªè¡¨çš„å­—æ®µåéƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ using(å­—æ®µå) æ¥åå•†æ¡ä»¶ï¼Œæ•ˆæœè·Ÿ `on a.id = b.id` ä¸€æ ·\n\n## References\n\n- [MySQL ä¼˜åŒ–æ¡ˆä¾‹ç³»åˆ— â€” åˆ†é¡µä¼˜åŒ– | iMySQL](http://imysql.com/2014/07/26/mysql-optimization-case-paging-optimize.shtml)\n- [MYSQL åˆ†é¡µ limit é€Ÿåº¦å¤ªæ…¢ä¼˜åŒ–æ–¹æ³• | Fienda blog](http://www.fienda.com/archives/110)\n\n-- EOF --\n","tags":["mysql"]},{"title":"Eclipse Maven é…ç½®ä½¿ç”¨å›½å†…é•œåƒåº“","url":"/2016/09/14/eclipse-maven-settings-mirror-in-china/","content":"\nWindows ä¸‹å› ä¸º Eclipse è‡ªå¸¦äº† Maven æ’ä»¶ï¼Œè¿˜ç®—å¤Ÿç”¨å°±æ‡’å¾—å®‰è£… Maven äº†ã€‚åœ¨ä¸ä½¿ç”¨ä»£ç†çš„æƒ…å†µä¸‹ï¼Œç”¨ Maven çš„ä¸‹è½½åº“ä¸æ˜¯ä¸€èˆ¬çš„æ…¢ã€‚Eclipse Maven çš„æ’ä»¶æ€ä¹ˆé…ç½®å›½å†…çš„é•œåƒåº“å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ã€‚\n\n<!-- more -->\n\n## åˆ›å»º settings.xml æ–‡ä»¶\n\næ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼š\n1ã€`<localRepository>C:\\Users\\Lenovo\\.m2\\repository</localRepository>` æœ¬åœ°ä»“åº“ä½ç½®\n2ã€é•œåƒé…ç½®ï¼Œé€‰å–çš„æ˜¯ aliyun çš„\n\n```xml\n<mirrors>\n  <mirror>\n    <id>alimaven</id>\n    <name>aliyun maven</name>\n    <url>http://maven.aliyun.com/nexus/content/groups/public/</url>\n    <mirrorOf>central</mirrorOf>\n  </mirror>\n</mirrors>\n```\n\nå®Œæ•´çš„ settings.xml æ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<!--\n | This is the configuration file for Maven. It can be specified at two levels:\n |\n |  1. User Level. This settings.xml file provides configuration for a single user,\n |                 and is normally provided in ${user.home}/.m2/settings.xml.\n |\n |                 NOTE: This location can be overridden with the CLI option:\n |\n |                 -s /path/to/user/settings.xml\n |\n |  2. Global Level. This settings.xml file provides configuration for all Maven\n |                 users on a machine (assuming they're all using the same Maven\n |                 installation). It's normally provided in\n |                 ${maven.home}/conf/settings.xml.\n |\n |                 NOTE: This location can be overridden with the CLI option:\n |\n |                 -gs /path/to/global/settings.xml\n | |\n |-->\n<settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\"\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\">\n\n  <!--  Change in below line  -->\n  <localRepository>C:\\Users\\Lenovo\\.m2\\repository</localRepository>\n\n  <interactiveMode>true</interactiveMode>\n\n  <offline>false</offline>\n\n  <pluginGroups>\n    <!-- pluginGroup\n     | Specifies a further group identifier to use for plugin lookup.\n    <pluginGroup>com.your.plugins</pluginGroup>\n    -->\n  </pluginGroups>\n\n  <proxies>\n    <!--\n    <proxy>\n      <id>optional</id>\n      <active>true</active>\n      <protocol>http</protocol>\n      <username>proxyuser</username>\n      <password>proxypass</password>\n      <host>proxy.host.net</host>\n      <port>80</port>\n      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>\n    </proxy>\n    -->\n  </proxies>\n\n  <servers>\n    <!--\n    <server>\n      <id>deploymentRepo</id>\n      <username>crunchify</username>\n      <password>crunchify</password>\n    </server>\n \t-->\n  </servers>\n\n  <mirrors>\n    <mirror>\n        <id>alimaven</id>\n        <name>aliyun maven</name>\n    \t<url>http://maven.aliyun.com/nexus/content/groups/public/</url>\n\t    <mirrorOf>central</mirrorOf>\n     </mirror>\n  </mirrors>\n\n  <profiles>\n  </profiles>\n\n</settings>\n```\n\n## è®¾ç½® Eclipse Maven Plugin\n\nWindow -> Preferences -> Maven -> User Settings -> User settings Browse é€‰æ‹©ä¸Šé¢åˆ›å»ºçš„ `setting.xml` -> ok\n","tags":["java"]},{"title":"LeetCode Database Trips and Users 262","url":"/2016/09/14/leetcode-database-trips-and-users-262/","content":"\n[262. Trips and Users](https://leetcode.com/problems/trips-and-users/)\n&emsp;&emsp;The `Trips` table holds all taxi trips. Each trip has a unique Id, while Client_Id and Driver_Id are both foreign keys to the Users_Id at the `Users` table. Status is an ENUM type of (â€˜completedâ€™, â€˜cancelled_by_driverâ€™, â€˜cancelled_by_clientâ€™).\n\n``` sql\n+----+-----------+-----------+---------+--------------------+----------+\n| Id | Client_Id | Driver_Id | City_Id |        Status      |Request_at|\n+----+-----------+-----------+---------+--------------------+----------+\n| 1  |     1     |    10     |    1    |     completed      |2013-10-01|\n| 2  |     2     |    11     |    1    | cancelled_by_driver|2013-10-01|\n| 3  |     3     |    12     |    6    |     completed      |2013-10-01|\n| 4  |     4     |    13     |    6    | cancelled_by_client|2013-10-01|\n| 5  |     1     |    10     |    1    |     completed      |2013-10-02|\n| 6  |     2     |    11     |    6    |     completed      |2013-10-02|\n| 7  |     3     |    12     |    6    |     completed      |2013-10-02|\n| 8  |     2     |    12     |    12   |     completed      |2013-10-03|\n| 9  |     3     |    10     |    12   |     completed      |2013-10-03| \n| 10 |     4     |    13     |    12   | cancelled_by_driver|2013-10-03|\n+----+-----------+-----------+---------+--------------------+----------+\n```\n\n&emsp;&emsp;The `Users` table holds all users. Each user has an unique Users_Id, and Role is an ENUM type of (â€˜clientâ€™, â€˜driverâ€™, â€˜partnerâ€™).\n\n``` sql\n+----------+--------+--------+\n| Users_Id | Banned |  Role  |\n+----------+--------+--------+\n|    1     |   No   | client |\n|    2     |   Yes  | client |\n|    3     |   No   | client |\n|    4     |   No   | client |\n|    10    |   No   | driver |\n|    11    |   No   | driver |\n|    12    |   No   | driver |\n|    13    |   No   | driver |\n+----------+--------+--------+\n```\n&emsp;&emsp;Write a SQL query to find the cancellation rate of requests made by unbanned clients between Oct 1, 2013 and Oct 3, 2013. For the above tables, your SQL query should return the following rows with the cancellation rate being rounded to two decimal places.\n\n``` sql\n+------------+-------------------+\n|     Day    | Cancellation Rate |\n+------------+-------------------+\n| 2013-10-01 |       0.33        |\n| 2013-10-02 |       0.00        |\n| 2013-10-03 |       0.50        |\n+------------+-------------------+\n```\n<!-- more -->\n\n### å¤§ä½“æ„æ€\nå†™ä¸€ä¸ª SQL è¯­å¥ï¼ŒæŸ¥è¯¢éç¦æ­¢å®¢æˆ·ï¼ˆUsersè¡¨ä¸­Bannedåˆ—ä¸ºNoçš„å®¢æˆ·ï¼‰åœ¨ 2013-10-1 è‡³ 2013-10-3 é—´çš„å•æ®å–æ¶ˆç‡ï¼Œç»“æœä¸ºå››èˆäº”å…¥åçš„ä¸¤ä½æœ‰æ•ˆæ•°å­—ã€‚\n\n### åˆ«äººçš„è§£æ³•\n\n``` sql\nSELECT Request_at DAY,\n       ROUND(SUM(IF(Status = 'completed', 0, 1)) / COUNT(*), 2) 'Cancellation Rate'\nFROM   Trips t\n\tLEFT JOIN Users t1 ON t.Client_Id = t1.Users_Id\nWHERE  t1.Banned = 'No' AND Request_at BETWEEN '2013-10-01' AND '2013-10-03'\nGROUP  BY t.Re\tquest_at;\n```\n\nè¿™é“é¢˜ä¸»è¦æ˜¯ç»Ÿè®¡è®¡ç®—\n\nç¬”è®°ï¼š\n1ã€å‡½æ•°ï¼šROUND(column_name,decimals)\n`column_name`\tå¿…éœ€ã€‚è¦èˆå…¥çš„å­—æ®µ\n`decimals`\tå¿…éœ€ã€‚è§„å®šè¦è¿”å›çš„å°æ•°ä½æ•°\n\n2ã€`SUM(IF(Status = 'completed', 0, 1))`\nç»Ÿè®¡ SUM è¿™é‡Œä¹Ÿå¥½å·§å¦™\n\n3ã€`having` ä¸ `where` çš„åŒºåˆ«\nhaving å­—å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰æˆç»„åçš„å„ç§æ•°æ®ï¼Œwhere å­—å¥åœ¨èšåˆå‰å…ˆç­›é€‰è®°å½•ï¼Œä¹Ÿå°±æ˜¯è¯´ä½œç”¨åœ¨ group by å’Œ having å­—å¥å‰ã€‚è€Œ having å­å¥åœ¨èšåˆåå¯¹ç»„è®°å½•è¿›è¡Œç­›é€‰ã€‚\n``` sql\nSELECT region, SUM(population), SUM(area)\nFROM bbc\nGROUP BY region\nHAVING SUM(area) > 1000000\n```\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ where æ¥ç­›é€‰è¶…è¿‡ 1000000 çš„åœ°åŒºï¼Œå› ä¸ºè¡¨ä¸­ä¸å­˜åœ¨è¿™æ ·ä¸€æ¡è®°å½•ã€‚ç›¸åï¼Œhaving å­å¥å¯ä»¥è®©æˆ‘ä»¬ç­›é€‰æˆç»„åçš„å„ç»„æ•°æ®\n\n\n> Reference:\n> [LeetCodeï¼šTrips and Users - å‡ºç§Ÿè½¦æ¥å•å–æ¶ˆç‡ - Tsybius2014](https://my.oschina.net/Tsybius2014/blog/496047)\n> [mysqlä¸­çš„whereå’Œhavingå­å¥çš„åŒºåˆ« - Hukin](http://www.blogjava.net/Johnny-Ajun/archive/2011/08/28/357445.html)\n\n","tags":["mysql","leetcode"]},{"title":"LeetCode Database Department Highest Salary 184","url":"/2016/09/12/leetcode-database-department-highest-salary-184/","content":"\n[184. Department Highest Salary](https://leetcode.com/problems/department-highest-salary/)\n&emsp;&emsp;The `Employee` table holds all employees. Every employee has an Id, a salary, and there is also a column for the department Id.\n``` sql\n+----+-------+--------+--------------+\n| Id | Name  | Salary | DepartmentId |\n+----+-------+--------+--------------+\n| 1  | Joe   | 70000  | 1            |\n| 2  | Henry | 80000  | 2            |\n| 3  | Sam   | 60000  | 2            |\n| 4  | Max   | 90000  | 1            |\n+----+-------+--------+--------------+\n```\n&emsp;&emsp;The `Department` table holds all departments of the company.\n``` sql\n+----+----------+\n| Id | Name     |\n+----+----------+\n| 1  | IT       |\n| 2  | Sales    |\n+----+----------+\n```\n&emsp;&emsp;Write a SQL query to find employees who have the highest salary in each of the departments. For the above tables, Max has the highest salary in the IT department and Henry has the highest salary in the Sales department.\n``` sql\n+------------+----------+--------+\n| Department | Employee | Salary |\n+------------+----------+--------+\n| IT         | Max      | 90000  |\n| Sales      | Henry    | 80000  |\n+------------+----------+--------+\n```\n<!-- more -->\n\n### å¤§ä½“æ„æ€\næŸ¥è¯¢å‡ºæ¯ä¸€ä¸ªéƒ¨é—¨ä¸­æ”¶å…¥æœ€åçš„å‘˜å·¥çš„ä¿¡æ¯\n\n### è‡ªå·±çš„è§£æ³•\nä¸€å¼€å§‹æ—¶è‡ªå·±æ²¡æœ‰è€ƒè™‘æ”¶å…¥æœ€é«˜å¯èƒ½æœ‰å¹¶åˆ—çš„æƒ…å†µï¼Œå°±ç›´æ¥ MAX()ï¼ŒåŠ  join in äº†ï¼›åŒæ—¶ä¹Ÿè¦è€ƒè™‘åˆ°ï¼šæ‰€å±éƒ¨é—¨ä¸å­˜åœ¨çš„æƒ…å†µï¼›ä¿®æ”¹å SQL ä¸º\n\n``` sql\nselect d.Name as Department, e.Name as Employee, e.Salary\nfrom Employee e\n    right join \n        (select max(e.Salary) as Salary, e.DepartmentId \n        from Employee e \n        group by DepartmentId ) t\n    on e.Salary = t.Salary and e.DepartmentId = t.DepartmentId\n\n    left join \n        Department d \n    on e.DepartmentId = d.Id \n\nhaving d.Name is not null \n```\n\n### åˆ«äººçš„è§£æ³•\n\nåŸºæœ¬éƒ½æ˜¯è¿è¡¨æŸ¥è¯¢çš„å¥—è·¯ï¼Œä½†æ˜¯æœ‰ä¸€æ®µæ€»ç»“è¿˜æ˜¯æœ‰äº›æ„æ€çš„ã€‚\n\n1ã€èšåˆå‡½æ•° max() çš„æ•ˆç‡ä¸å¦‚åµŒå¥—å­æŸ¥è¯¢\n2ã€in ä¸ exists æ•ˆç‡å·®ä¸å¤šï¼Œå½“æ—¶åœ¨ç½‘ä¸ŠæŸ¥çš„æ˜¯ï¼š\n> in å’Œ not in ä¹Ÿè¦æ…ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´å…¨è¡¨æ‰«æ\n> å¾ˆå¤šæ—¶å€™ç”¨ exists ä»£æ›¿ in æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©\n\n3ã€å°† join on ä»£æ›¿äº† where åˆ¤æ–­ï¼Œæ•ˆç‡æå‡å¾ˆå¤šï¼Œåæ¥æœ‰ä¸ªçœ‹è¿‡ MYSQL æºç çš„å¤§ç¥è¯´ï¼š\n> åœ¨ MySQL çš„ SELECT æŸ¥è¯¢å½“ä¸­ï¼Œå…¶æ ¸å¿ƒç®—æ³•å°±æ˜¯ JOIN æŸ¥è¯¢ç®—æ³•ã€‚å…¶ä»–çš„æŸ¥è¯¢è¯­å¥éƒ½ç›¸åº”å‘ JOIN é æ‹¢ï¼šå•è¡¨æŸ¥è¯¢è¢«å½“ä½œ JOIN çš„ç‰¹ä¾‹ï¼›å­æŸ¥è¯¢è¢«å°½é‡è½¬æ¢ä¸º JOIN æŸ¥è¯¢\n\n4ã€å°† join æ›¿æ¢ä¸ºäº† straight_joinï¼Œè¿˜æ˜¯æºç å¤§ç¥è¯´çš„ï¼š\n> å¯¹äºå¤šè¡¨æŸ¥è¯¢ï¼Œå¦‚æœå¯ä»¥ç¡®å®šè¡¨æŒ‰ç…§æŸä¸€å›ºå®šæ¬¡åºå¤„ç†å¯ä»¥è·å¾—è¾ƒå¥½çš„æ•ˆç‡ï¼Œåˆ™å»ºè®®åŠ ä¸Š STRAIGHT_JOIN å­å¥ï¼Œä»¥å‡å°‘ä¼˜åŒ–å™¨å¯¹è¡¨è¿›è¡Œé‡æ’åºä¼˜åŒ–çš„è¿‡ç¨‹ã€‚\n> è¯¥å­å¥ä¸€æ–¹é¢å¯ä»¥ç”¨äºä¼˜åŒ–å™¨æ— æ³•ç»™å‡ºæœ€ä¼˜æ’åˆ—çš„ SQL è¯­å¥ï¼›å¦ä¸€æ–¹é¢åŒæ ·é€‚ç”¨äºä¼˜åŒ–å™¨å¯ä»¥ç»™å‡ºæœ€ä¼˜æ’åˆ—çš„ SQL è¯­å¥ï¼Œå› ä¸º MySQL ç®—å‡ºæœ€ä¼˜æ’åˆ—ä¹Ÿéœ€è¦è€—è´¹è¾ƒé•¿çš„æµç¨‹ã€‚\n> å¯¹äºåä¸€çŠ¶å†µï¼Œå¯ä»¥æ ¹æ® EXPLAIN çš„æç¤ºé€‰å®šè¡¨çš„é¡ºåºï¼Œå¹¶åŠ ä¸Š STRAIGHT_JOIN å­å¥å›ºå®šè¯¥é¡ºåºã€‚è¯¥çŠ¶å†µä¸‹çš„ä½¿ç”¨å‰ææ˜¯å‡ ä¸ªè¡¨ä¹‹é—´çš„æ•°æ®é‡æ¯”ä¾‹ä¼šä¸€ç›´ä¿æŒåœ¨æŸä¸€é¡ºåºï¼Œå¦åˆ™åœ¨å„è¡¨æ•°æ®æ­¤æ¶ˆå½¼é•¿ä¹‹åä¼šé€‚å¾—å…¶åã€‚\n\nå¯¹äºç»å¸¸è°ƒç”¨çš„ SQL è¯­å¥ï¼Œè¿™ä¸€æ–¹æ³•æ•ˆæœè¾ƒå¥½ï¼›åŒæ—¶æ“ä½œçš„è¡¨è¶Šå¤šï¼Œæ•ˆæœè¶Šå¥½ã€‚\n\n> Reference:\n> [leetcode-184-Department Highest Salary ä¼˜åŒ–è®°å½• - M-zyh](http://www.cnblogs.com/zhangyunhao/p/4896055.html)\n\n\n\n","tags":["mysql","leetcode"]},{"title":"LeetCode Database Consecutive Numbers 180","url":"/2016/09/11/leetcode-database-consecutive-numbers-180/","content":"\n[180. Consecutive Numbers](https://leetcode.com/problems/consecutive-numbers/)\n&emsp;&emsp;Write a SQL query to find all numbers that appear at least three times consecutively.\n``` sql\n+----+-----+\n| Id | Num |\n+----+-----+\n| 1  |  1  |\n| 2  |  1  |\n| 3  |  1  |\n| 4  |  2  |\n| 5  |  1  |\n| 6  |  2  |\n| 7  |  2  |\n+----+-----+\n```\nFor example, given the above `Logs` table, `1` is the only number that appears consecutively for at least three times.\n<!-- more -->\n\n### å¤§ä½“æ„æ€\nå†™ SQL æŸ¥è¯¢å‡ºè¿ç»­å‡ºç°è‡³å°‘ 3 æ¬¡çš„ Num\n\n### è‡ªå·±çš„è§£æ³•\n\n``` sql\nSELECT DISTINCT L1.Num AS ConsecutiveNums\nFROM Logs L1\n\tJOIN Logs L2 ON L1.Id + 1 = L2.Id\n\tJOIN Logs L3 ON L1.Id + 2 = L3.Id\nWHERE L1.Num = L2.Num AND L1.Num = L3.Num\n```\n\n å¾ˆä¼ ç»Ÿè¿è¡¨æŸ¥è¯¢ï¼Œä½†æ˜¯æœ‰å‘çš„åœ°æ–¹ï¼Œå°±æ˜¯ä¾é çš„æ—¶ Idï¼Œæ‰€ä»¥å±€é™æ˜¯ Id è¦è¿è´¯\n\n### åˆ«äººçš„è§£æ³•\n\né¦–å…ˆï¼Œå¢åŠ ä¸€ä¸ª rank å­—æ®µï¼Œè®°å½•åºå·ï¼Œåˆå§‹å€¼ä¸º 1ï¼Œå½“åä¸€ä¸ªå€¼ä¸å‰ä¸€ä¸ªå€¼ç›¸ç­‰æ—¶ï¼Œåºå·åŠ  1ã€‚ä¹‹åï¼ŒæŠŠæ‰€æœ‰ rank å€¼å¤§äºç­‰äº 3 çš„éƒ½æ£€ç´¢å‡ºæ¥ï¼Œå†å»é‡å³å¯ã€‚\n\n``` sql\nSELECT DISTINCT(Num) AS ConsecutiveNums FROM\n(SELECT Id,Num,\n@Rank:=IF(@prevNum != Num,1,@Rank+1) AS Rank,\n@prevNum:=Num \nFROM Logs) t, \n(SELECT @Rank:=0,@prevNum:=NULL) r \nWHERE t.Rank >= 3; \n```\n\n### è‡ªå·±çš„ç†è§£\n```\n(SELECT @Rank:=0,@prevNum:=NULL) r\n```\næ˜¯ä¸ªå·§å¦™çš„åœ°æ–¹ï¼Œå¯¹å˜é‡è¿›è¡Œäº†åˆå§‹åŒ–\n\n> Reference:\n> [ã€leetcode Databaseã€‘180. Consecutive Numbers - Kevin_zhaiçš„åšå®¢](http://blog.csdn.net/Kevin_zhai/article/details/52152289)\n\n","tags":["mysql","leetcode"]},{"title":"LeetCode Database Second Highest Salary 176","url":"/2016/09/11/leetcode-database-second-highest-salary-176/","content":"\n[176. Second Highest Salary](https://leetcode.com/problems/second-highest-salary/)\n&emsp;&emsp;Write a SQL query to get the second highest salary from the `Employee` table.\n\n``` sql\n+----+--------+\n| Id | Salary |\n+----+--------+\n| 1  | 100    |\n| 2  | 200    |\n| 3  | 300    |\n+----+--------+\n```\n\nFor example, given the above Employee table, the second highest salary is `200`. If there is no second highest salary, then the query should return `null`.\n\n<!-- more -->\n\n### å¤§ä½“æ„æ€\nå†™ SQL æŸ¥è¯¢å‡ºç¬¬äºŒé«˜è–ªæ°´çš„ Idã€‚å¦‚ä½•æ²¡æœ‰ç¬¬äºŒé«˜ï¼Œåˆ™è¿”å› `null`\n\n### è‡ªå·±çš„è§£æ³•\n\n```\nSELECT\n    Salary\nFROM\n    Employee\nORDER BY Salary DESC\nLIMIT 1,1\n```\n\nä½†æ˜¯åœ¨æ²¡æœ‰ç¬¬äºŒé«˜çš„æ—¶å€™å°†æ²¡æœ‰è¿”å›å€¼ï¼Œä¸ç¬¦åˆé¢˜æ„ï¼›çœ‹äº†åˆ«äººçš„ï¼Œå‘ç°è‡ªå·±ä¹Ÿå°‘è€ƒè™‘ `DISTINCT`\n\n### åˆ«äººçš„è§£æ³•\nå¤šåŠ ä¸€å±‚ SELECT å¹¶æ·»åŠ ä¸€ä¸ª IF æ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœç»“æœæœ‰ 0 è¡Œåˆ™è¿”å› NULLï¼Œæœ‰ 1 è¡Œè¿”å›æ­£å¸¸ç»“æœã€‚ç”±äºå¯ä»¥é¢„æœŸä¸Šä¸€æ­¥ç»“æœåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç”¨ COUNT è€Œä¸ç”¨ GROUP BYã€‚\n\næ„é€ æµ‹è¯•æ•°æ®ï¼š\n\n``` sql\nCREATE TABLE IF NOT EXISTS Employee (\n    Id INT,\n    Salary INT\n);\nDELETE FROM Employee;\nINSERT INTO Employee VALUES\n(1, 100),\n(2, 200),\n(3, 100),\n(4, 300);\n```\n\né¢„æœŸç»“æœï¼š\n\n``` sql\n+---------------------+\n| SecondHighestSalary |\n+---------------------+\n| 200                 |\n+---------------------+\n```\n\nè§£æ³•ä¸€ï¼š\n\n``` sql\nSELECT \n    IF(COUNT(Salary) >= 1, Salary, NULL) AS SecondHighestSalary\nFROM\n    (SELECT DISTINCT\n        Salary\n    FROM\n        Employee\n    ORDER BY Salary DESC\n    LIMIT 1 , 1) tmp\n```\n\nè§£æ³•äºŒï¼š\næ­£å¸¸ Ranking ç±»é—®é¢˜è§£æ³•ï¼Œä½¿ç”¨è‡ªå®šä¹‰å˜é‡è®¡ç®—æ’åã€‚æ¥ç€å’Œä¸Šé¢ä¸€ç§è§£æ³•ç±»ä¼¼éœ€è¦å¯¹ç»“æœè¿›è¡Œå¤„ç†ï¼Œæ²¡æœ‰ç¬¬ 2 åçš„è¿”å› NULLï¼š\n\n``` sql\nSELECT \n    IF(COUNT(Salary) >= 1, Salary, NULL) AS SecondHighestSalary\nFROM\n    (SELECT DISTINCT\n        Salary\n    FROM\n        (SELECT \n\t        Id,\n            Salary,\n            @rank:=IF(@prevVal > Salary, @rank:=@rank + 1, @rank) AS Rank,\n            @prevVal:=Salary\n\t    FROM\n\t        Employee, (SELECT @prevVal:=NULL) x, (SELECT @rank:=1) y\n\t    ORDER BY Salary DESC) tmp\n    WHERE\n        tmp.Rank = 2) tmp2\n```\n\nè§£æ³•ä¸‰ï¼š\nä¸Šé¢ä¸¤ç§è§£æ³•éƒ½æ˜¯å¯ä»¥æ‰©å±•åˆ°ä»»æ„æ’åçš„ï¼Œå¦‚æœæƒ³åä¸€ç‚¹å¯ä»¥å¾—åˆ°å…¶ä»–è§£æ³•ã€‚æ’åç¬¬ 2 å¯ä»¥çœ‹åšæ˜¯é™¤äº† MAX ä¹‹å¤–çš„ MAXï¼Œå¯ä»¥å¾—åˆ°è¿™ä¸¤ç§ç±»ä¼¼çš„è§£æ³•ã€‚ç”±äº MAX å‡½æ•°å¯ä»¥è¿”å› NULL ç»“æœï¼Œå°±ä¸ç”¨åœ¨è¿›ä¸€æ­¥åŠ å·¥ç»“æœã€‚\n\n``` sql\nSELECT \n    MAX(Salary)\nFROM\n    Employee\nWHERE\n    Salary < (SELECT \n            MAX(Salary)\n        FROM\n            Employee)\n```\n\n\n``` sql\nSELECT \n    MAX(Salary)\nFROM\n    Employee\nWHERE\n    Salary NOT IN (SELECT \n            MAX(Salary)\n        FROM\n            Employee)\n```\n\n> Reference:\n> [Leetcode Database: #176 Second Highest Salary | tsuinteru](http://tsuinte.ru/2015/04/05/leetcode-database-176-second-highest-salary/)\n\n","tags":["mysql","leetcode"]},{"title":"LeetCode Database Rising Temperature 197","url":"/2016/09/11/leetcode-database-rising-temperature-197/","content":"\n[197. Rising Temperature](https://leetcode.com/problems/rising-temperature/)\n&emsp;&emsp;Given a `Weather` table, write a SQL query to find all dates' Ids with higher temperature compared to its previous (yesterday's) dates.\n\n``` sql\n+---------+------------+------------------+\n| Id(INT) | Date(DATE) | Temperature(INT) |\n+---------+------------+------------------+\n|       1 | 2015-01-01 |               10 |\n|       2 | 2015-01-02 |               25 |\n|       3 | 2015-01-03 |               20 |\n|       4 | 2015-01-04 |               30 |\n+---------+------------+------------------+\n```\n\n<!-- more -->\nFor example, return the following Ids for the above Weather table:\n\n``` sql\n+----+\n| Id |\n+----+\n|  2 |\n|  4 |\n+----+\n```\n\n---\n\n### å¤§ä½“æ„æ€\nå†™ SQL æŸ¥è¯¢å‡ºæ¸©åº¦æ¯”æ˜¨å¤©å¤§çš„æ—¥æœŸ Id\n\n### åˆ«äººçš„è§£æ³•\n\nThe `DATEDIFF()` function returns the time between two dates\n\n``` sql\nSELECT w1.Id FROM Weather w1, Weather w2\nWHERE w1.Temperature > w2.Temperature AND (DATEDIFF(w1.Date, w2.Date) = 1 )\n```\n\n> Reference:\n> [LeetCode Q197 Rising Temperature | Lei Jiang Coding](https://leijiangcoding.wordpress.com/2015/05/01/leetcode-q197-rising-temperature/)\n\n","tags":["mysql","leetcode"]},{"title":"Mybatis Generator ä½¿ç”¨é…ç½®","url":"/2016/09/10/mybatis-generator-tutorial/","content":"\nMyBatis Generator (MBG) æ˜¯ä¸€ä¸ª Mybatis çš„ä»£ç ç”Ÿæˆå™¨ã€‚MBG å¯ä»¥å†…çœæ•°æ®åº“çš„è¡¨ï¼ˆæˆ–å¤šä¸ªè¡¨ï¼‰ç„¶åç”Ÿæˆå¯ä»¥ç”¨æ¥è®¿é—®ï¼ˆå¤šä¸ªï¼‰è¡¨çš„åŸºç¡€å¯¹è±¡ã€‚ è¿™æ ·å’Œæ•°æ®åº“è¡¨è¿›è¡Œäº¤äº’æ—¶ä¸éœ€è¦åˆ›å»ºå¯¹è±¡å’Œé…ç½®æ–‡ä»¶ã€‚MBG çš„è§£å†³äº†å¯¹æ•°æ®åº“æ“ä½œæœ‰æœ€å¤§å½±å“çš„ä¸€äº›ç®€å•çš„ CRUDï¼ˆæ’å…¥ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰æ“ä½œã€‚\n\n## Mybatis Generator æ–‡æ¡£\n\n- [Mybatis Generator å®˜æ–¹åŸç‰ˆ](http://www.mybatis.org/generator/index.html)\n- [Mybatis Generator ä¸­æ–‡ç‰ˆ](http://mbg.cndocs.tk/index.html)\n\n## é€šè¿‡ Maven è¿è¡Œ MBG\n\nMyBatis Generator (MBG) åŒ…å«äº†ä¸€ä¸ªå¯ä»¥é›†æˆåˆ° Maven æ„å»ºçš„ Maven æ’ä»¶ï¼ŒæŒ‰ç…§ Maven çš„é…ç½®æƒ¯ä¾‹ï¼Œå°† MBG é›†æˆåˆ° Maven å¾ˆå®¹æ˜“ã€‚\n\n<!-- more -->\n\n### `pom.xml` é…ç½®\n\n```xml\n...\n<properties>\n  ...\n  <!-- è®¾ç½®ä¸€äº›å˜é‡ -->\n  <!-- plugin versions -->\n  <plugin.mybatis.generator>1.3.5</plugin.mybatis.generator>\n  <!-- plugin setting -->\n  <mybatis.generator.generatorConfig.xml>${basedir}/src/test/resources/generatorConfig.xml</mybatis.generator.generatorConfig.xml>\n  <mybatis.generator.generatorConfig.properties>file:///${basedir}/src/test/resources/generatorConfig.properties</mybatis.generator.generatorConfig.properties>\n</properties>\n...\n<build>\n  ...\n  <plugins>\n    ...\n    <!-- Mybatis generatorä»£ç ç”Ÿæˆæ’ä»¶ é…ç½® -->\n    <plugin>\n      <groupId>org.mybatis.generator</groupId>\n      <artifactId>mybatis-generator-maven-plugin</artifactId>\n      <version>${plugin.mybatis.generator}</version>\n      <configuration>\n        <configurationFile>${mybatis.generator.generatorConfig.xml}</configurationFile>\n        <overwrite>true</overwrite>\n        <verbose>true</verbose>\n      </configuration>\n    </plugin>\n  </plugins>\n</build>\n...\n```\n\n### `generatorConfig.xml` æ ¸å¿ƒé…ç½®\n\néå¸¸å®Œæ•´çš„ MBG æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé…åˆæ–‡æ¡£æ•ˆæœæ›´ä½³ã€‚å› ä¸ºæœ‰å¤§é‡çš„æ³¨é‡Šç¯‡å¹…é•¿ï¼Œå»ºè®®å¤åˆ¶åˆ° xml æ–‡ä»¶ä¸­æŸ¥çœ‹\ngeneratorConfig.xml çš„æ–‡ä»¶ä½ç½®è¦å¯¹åº”åœ¨ pom.xml ä¸­çš„ï¼š\n\n```xml\n<mybatis.generator.generatorConfig.xml>${basedir}/src/test/resources/generatorConfig.xml</mybatis.generator.generatorConfig.xml>\n```\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE generatorConfiguration\n  PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\"\n\"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\">\n<!-- é…ç½®ç”Ÿæˆå™¨ -->\n<generatorConfiguration>\n  <!-- å¯ä»¥ç”¨äºåŠ è½½é…ç½®é¡¹æˆ–è€…é…ç½®æ–‡ä»¶ï¼Œåœ¨æ•´ä¸ªé…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨${propertyKey}çš„æ–¹å¼æ¥å¼•ç”¨é…ç½®é¡¹ -->\n  <!-- resourceï¼šé…ç½®èµ„æºåŠ è½½åœ°å€ï¼Œä½¿ç”¨resourceï¼ŒMBGä»classpathå¼€å§‹æ‰¾ï¼Œæ¯”å¦‚com/myproject/generatorConfig.properties -->\n  <!-- urlï¼šé…ç½®èµ„æºåŠ è½½åœ°è´¨ï¼Œä½¿ç”¨URLçš„æ–¹å¼ï¼Œæ¯”å¦‚file:///C:/myfolder/generatorConfig.properties.\n    æ³¨æ„ï¼Œä¸¤ä¸ªå±æ€§åªèƒ½é€‰å€ä¸€ä¸ª; -->\n  <!-- å¦å¤–ï¼Œå¦‚æœä½¿ç”¨äº†mybatis-generator-maven-pluginï¼Œé‚£ä¹ˆåœ¨pom.xmlä¸­å®šä¹‰çš„propertieséƒ½å¯ä»¥ç›´æ¥åœ¨generatorConfig.xmlä¸­ä½¿ç”¨ -->\n  <!-- <properties resource=\"\" url=\"\" /> -->\n\n  <!-- é…ç½®æ–‡ä»¶è·¯å¾„ -->\n  <properties url=\"${mybatis.generator.generatorConfig.properties}\" />\n\n  <!-- åœ¨MBGå·¥ä½œçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–åŠ è½½çš„ä¾èµ–åŒ… locationå±æ€§æŒ‡æ˜åŠ è½½jar/zipåŒ…çš„å…¨è·¯å¾„ -->\n  <!-- æ•°æ®åº“è®¿é—®çš„é©±åŠ¨åŒ… -->\n  <classPathEntry location=\"${mbg.drive.class.path}\" />\n\n  <!-- context:ç”Ÿæˆä¸€ç»„å¯¹è±¡çš„ç¯å¢ƒ id:å¿…é€‰ï¼Œä¸Šä¸‹æ–‡idï¼Œç”¨äºåœ¨ç”Ÿæˆé”™è¯¯æ—¶æç¤º -->\n  <!-- defaultModelType:æŒ‡å®šç”Ÿæˆå¯¹è±¡çš„æ ·å¼ 1ï¼Œconditionalï¼šç±»ä¼¼hierarchical; 2ï¼Œflatï¼šæ‰€æœ‰å†…å®¹ï¼ˆä¸»é”®ï¼Œblobï¼‰ç­‰å…¨éƒ¨ç”Ÿæˆåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­;\n    3ï¼Œhierarchicalï¼šä¸»é”®ç”Ÿæˆä¸€ä¸ªXXKeyå¯¹è±¡(key class)ï¼ŒBlobç­‰å•ç‹¬ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä»–ç®€å•å±æ€§åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­(record\n    class) -->\n  <!--targetRuntime: 1ï¼ŒMyBatis3ï¼šé»˜è®¤çš„å€¼ï¼Œç”ŸæˆåŸºäºMyBatis3.xä»¥ä¸Šç‰ˆæœ¬çš„å†…å®¹ï¼ŒåŒ…æ‹¬XXXBySample;\n    2ï¼ŒMyBatis3Simpleï¼šç±»ä¼¼MyBatis3ï¼Œåªæ˜¯ä¸ç”ŸæˆXXXBySample; introspectedColumnImplï¼šç±»å…¨é™å®šåï¼Œç”¨äºæ‰©å±•MBG -->\n  <context id=\"mysql_mbg\" defaultModelType=\"flat\" targetRuntime=\"MyBatis3Simple\">\n\n    <!-- è‡ªåŠ¨è¯†åˆ«æ•°æ®åº“å…³é”®å­—ï¼Œé»˜è®¤falseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œæ ¹æ®SqlReservedWordsä¸­å®šä¹‰çš„å…³é”®å­—åˆ—è¡¨; ä¸€èˆ¬ä¿ç•™é»˜è®¤å€¼ï¼Œé‡åˆ°æ•°æ®åº“å…³é”®å­—ï¼ˆJavaå…³é”®å­—ï¼‰ï¼Œä½¿ç”¨columnOverrideè¦†ç›– -->\n    <property name=\"autoDelimitKeywords\" value=\"false\" />\n    <!-- ç”Ÿæˆçš„Javaæ–‡ä»¶çš„ç¼–ç  -->\n    <property name=\"javaFileEncoding\" value=\"UTF-8\" />\n    <!-- æ ¼å¼åŒ–javaä»£ç  -->\n    <property name=\"javaFormatter\"\n      value=\"org.mybatis.generator.api.dom.DefaultJavaFormatter\" />\n    <!-- æ ¼å¼åŒ–XMLä»£ç  -->\n    <property name=\"xmlFormatter\"\n      value=\"org.mybatis.generator.api.dom.DefaultXmlFormatter\" />\n\n    <!-- beginningDelimiterå’ŒendingDelimiterï¼šæŒ‡æ˜æ•°æ®åº“çš„ç”¨äºæ ‡è®°æ•°æ®åº“å¯¹è±¡åçš„ç¬¦å·ï¼Œæ¯”å¦‚ORACLEå°±æ˜¯åŒå¼•å·ï¼ŒMYSQLé»˜è®¤æ˜¯`åå¼•å·; -->\n    <property name=\"beginningDelimiter\" value=\"`\" />\n    <property name=\"endingDelimiter\" value=\"`\" />\n\n    <!--å…³é—­æ³¨é‡Š -->\n    <commentGenerator>\n      <property name=\"suppressAllComments\" value=\"true\" />\n    </commentGenerator>\n\n    <!-- å¿…é¡»è¦æœ‰çš„ï¼Œä½¿ç”¨è¿™ä¸ªé…ç½®é“¾æ¥æ•°æ®åº“ @TODO:æ˜¯å¦å¯ä»¥æ‰©å±• -->\n    <jdbcConnection driverClass=\"com.mysql.jdbc.Driver\"\n      connectionURL=\"${mbg.jdbc.url}\" userId=\"${mbg.jdbc.username}\"\n      password=\"${mbg.jdbc.password}\">\n      <!-- è¿™é‡Œé¢å¯ä»¥è®¾ç½®propertyå±æ€§ï¼Œæ¯ä¸€ä¸ªpropertyå±æ€§éƒ½è®¾ç½®åˆ°é…ç½®çš„Driverä¸Š -->\n    </jdbcConnection>\n\n    <!-- javaç±»å‹å¤„ç†å™¨ ç”¨äºå¤„ç†DBä¸­çš„ç±»å‹åˆ°Javaä¸­çš„ç±»å‹ï¼Œé»˜è®¤ä½¿ç”¨JavaTypeResolverDefaultImpl; æ³¨æ„ä¸€ç‚¹ï¼Œé»˜è®¤ä¼šå…ˆå°è¯•ä½¿ç”¨Integerï¼ŒLongï¼ŒShortç­‰æ¥å¯¹åº”DECIMALå’Œ\n      NUMERICæ•°æ®ç±»å‹; -->\n    <javaTypeResolver\n      type=\"org.mybatis.generator.internal.types.JavaTypeResolverDefaultImpl\">\n      <!-- trueï¼šä½¿ç”¨BigDecimalå¯¹åº”DECIMALå’Œ NUMERICæ•°æ®ç±»å‹ falseï¼šé»˜è®¤, scale>0;length>18ï¼šä½¿ç”¨BigDecimal;\n        scale=0;length[10,18]ï¼šä½¿ç”¨Long; scale=0;length[5,9]ï¼šä½¿ç”¨Integer; scale=0;length<5ï¼šä½¿ç”¨Short; -->\n      <property name=\"forceBigDecimals\" value=\"false\" />\n    </javaTypeResolver>\n\n    <!-- javaæ¨¡å‹åˆ›å»ºå™¨ï¼Œæ˜¯å¿…é¡»è¦çš„å…ƒç´  è´Ÿè´£ï¼š1ï¼Œkeyç±»ï¼ˆè§contextçš„defaultModelTypeï¼‰;2ï¼Œjavaç±»;3ï¼ŒæŸ¥è¯¢ç±» -->\n    <!-- targetPackageï¼šç”Ÿæˆçš„ç±»è¦æ”¾çš„åŒ…ï¼ŒçœŸå®çš„åŒ…å—enableSubPackageså±æ€§æ§åˆ¶; -->\n    <!-- targetProjectï¼šç›®æ ‡é¡¹ç›®ï¼ŒæŒ‡å®šä¸€ä¸ªå­˜åœ¨çš„ç›®å½•ä¸‹ï¼Œç”Ÿæˆçš„å†…å®¹ä¼šæ”¾åˆ°æŒ‡å®šç›®å½•ä¸­ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ï¼ŒMBGä¸ä¼šè‡ªåŠ¨å»ºç›®å½• -->\n    <javaModelGenerator targetPackage=\"${mbg.model.package}\"\n      targetProject=\"src/test/java\">\n      <!-- for MyBatis3/MyBatis3Simple è‡ªåŠ¨ä¸ºæ¯ä¸€ä¸ªç”Ÿæˆçš„ç±»åˆ›å»ºä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•åŒ…å«äº†æ‰€æœ‰çš„field;è€Œä¸æ˜¯ä½¿ç”¨setter; -->\n      <property name=\"constructorBased\" value=\"false\" />\n\n      <!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse -->\n      <property name=\"enableSubPackages\" value=\"false\" />\n\n      <!-- for MyBatis3 / MyBatis3Simple æ˜¯å¦åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼Œå¦‚æœä¸ºtrueï¼Œ é‚£ä¹ˆMBGä¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰setteræ–¹æ³•çš„ç±»ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ç±»ä¼¼constructorBasedçš„ç±» -->\n      <property name=\"immutable\" value=\"false\" />\n\n      <!-- è®¾ç½®ä¸€ä¸ªæ ¹å¯¹è±¡ï¼Œå¦‚æœè®¾ç½®äº†è¿™ä¸ªæ ¹å¯¹è±¡ï¼Œé‚£ä¹ˆç”Ÿæˆçš„keyClassæˆ–è€…recordClassä¼šç»§æ‰¿è¿™ä¸ªç±»;åœ¨Tableçš„rootClasså±æ€§ä¸­å¯ä»¥è¦†ç›–è¯¥é€‰é¡¹ -->\n      <!-- æ³¨æ„ï¼šå¦‚æœåœ¨key classæˆ–è€…record classä¸­æœ‰root classç›¸åŒçš„å±æ€§ï¼ŒMBGå°±ä¸ä¼šé‡æ–°ç”Ÿæˆè¿™äº›å±æ€§äº†ï¼Œ åŒ…æ‹¬ï¼š\n        1ï¼Œå±æ€§åç›¸åŒï¼Œç±»å‹ç›¸åŒï¼Œæœ‰ç›¸åŒçš„getter/setteræ–¹æ³•; -->\n      <!-- <property name=\"rootClass\" value=\"com.domain.BaseDomain\" /> -->\n\n      <!-- è®¾ç½®æ˜¯å¦åœ¨getteræ–¹æ³•ä¸­ï¼Œå¯¹Stringç±»å‹å­—æ®µè°ƒç”¨trim()æ–¹æ³• -->\n      <property name=\"trimStrings\" value=\"false\" />\n    </javaModelGenerator>\n\n    <!-- ç”ŸæˆSQL mapçš„XMLæ–‡ä»¶ç”Ÿæˆå™¨ï¼Œæ³¨æ„ï¼Œåœ¨Mybatis3ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mapper.xmlæ–‡ä»¶+Mapperæ¥å£ï¼ˆæˆ–è€…ä¸ç”¨mapperæ¥å£ï¼‰ï¼Œ\n      æˆ–è€…åªä½¿ç”¨Mapperæ¥å£+Annotationï¼Œæ‰€ä»¥ï¼Œå¦‚æœ javaClientGeneratoré…ç½®ä¸­é…ç½®äº†éœ€è¦ç”ŸæˆXMLçš„è¯ï¼Œè¿™ä¸ªå…ƒç´ å°±å¿…é¡»é…ç½®\n      targetPackage/targetProject:åŒjavaModelGenerator -->\n    <sqlMapGenerator targetPackage=\"${mbg.xml.mapper.package}\"\n      targetProject=\"src/test/java\">\n      <!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse -->\n      <property name=\"enableSubPackages\" value=\"false\" />\n    </sqlMapGenerator>\n\n    <!-- å¯¹äºmybatisæ¥è¯´ï¼Œå³ç”ŸæˆMapperæ¥å£ï¼Œæ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰é…ç½®è¯¥å…ƒç´ ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ä¼šç”ŸæˆMapperæ¥å£ targetPackage/targetProject:åŒjavaModelGenerator -->\n    <!-- typeï¼šé€‰æ‹©æ€ä¹ˆç”Ÿæˆmapperæ¥å£ï¼ˆåœ¨MyBatis3/MyBatis3Simpleä¸‹ï¼‰ï¼š -->\n    <!-- 1ï¼ŒANNOTATEDMAPPERï¼šä¼šç”Ÿæˆä½¿ç”¨Mapperæ¥å£+Annotationçš„æ–¹å¼åˆ›å»ºï¼ˆSQLç”Ÿæˆåœ¨annotationä¸­ï¼‰ï¼Œä¸ä¼šç”Ÿæˆå¯¹åº”çš„XML; -->\n    <!-- 2ï¼ŒMIXEDMAPPERï¼šä½¿ç”¨æ··åˆé…ç½®ï¼Œä¼šç”ŸæˆMapperæ¥å£ï¼Œå¹¶é€‚å½“æ·»åŠ åˆé€‚çš„Annotationï¼Œä½†æ˜¯XMLä¼šç”Ÿæˆåœ¨XMLä¸­; -->\n    <!-- 3ï¼ŒXMLMAPPERï¼šä¼šç”ŸæˆMapperæ¥å£ï¼Œæ¥å£å®Œå…¨ä¾èµ–XML; -->\n    <!-- æ³¨æ„ï¼Œå¦‚æœcontextæ˜¯MyBatis3Simpleï¼šåªæ”¯æŒANNOTATEDMAPPERå’ŒXMLMAPPER -->\n    <javaClientGenerator targetPackage=\"${mbg.xml.mapper.package}\"\n      type=\"XMLMAPPER\" targetProject=\"src/test/java\">\n      <!-- åœ¨targetPackageçš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æ•°æ®åº“çš„schemaå†ç”Ÿæˆä¸€å±‚packageï¼Œæœ€ç»ˆç”Ÿæˆçš„ç±»æ”¾åœ¨è¿™ä¸ªpackageä¸‹ï¼Œé»˜è®¤ä¸ºfalse -->\n      <property name=\"enableSubPackages\" value=\"false\" />\n      <!-- å¯ä»¥ä¸ºæ‰€æœ‰ç”Ÿæˆçš„æ¥å£æ·»åŠ ä¸€ä¸ªçˆ¶æ¥å£ï¼Œä½†æ˜¯MBGåªè´Ÿè´£ç”Ÿæˆï¼Œä¸è´Ÿè´£æ£€æŸ¥ -->\n      <!-- <property name=\"rootInterface\" value=\"\"/> -->\n    </javaClientGenerator>\n\n    <!-- é€‰æ‹©ä¸€ä¸ªtableæ¥ç”Ÿæˆç›¸å…³æ–‡ä»¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªtableï¼Œå¿…é¡»è¦æœ‰tableå…ƒç´  é€‰æ‹©çš„tableä¼šç”Ÿæˆä¸€ä¸‹æ–‡ä»¶ï¼š -->\n    <!-- 1ï¼ŒSQL mapæ–‡ä»¶ 2ï¼Œç”Ÿæˆä¸€ä¸ªä¸»é”®ç±»; 3ï¼Œé™¤äº†BLOBå’Œä¸»é”®çš„å…¶ä»–å­—æ®µçš„ç±»; 4ï¼ŒåŒ…å«BLOBçš„ç±»; 5ï¼Œä¸€ä¸ªç”¨æˆ·ç”ŸæˆåŠ¨æ€æŸ¥è¯¢çš„æ¡ä»¶ç±»ï¼ˆselectByExample,\n      deleteByExampleï¼‰ï¼Œå¯é€‰; 6ï¼ŒMapperæ¥å£ï¼ˆå¯é€‰ï¼‰ -->\n    <!-- å¿…è¦ï¼š -->\n    <!-- tableName ï¼šè¦ç”Ÿæˆå¯¹è±¡çš„è¡¨å; æ³¨æ„ï¼šå¤§å°å†™æ•æ„Ÿé—®é¢˜ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒMBGä¼šè‡ªåŠ¨çš„å»è¯†åˆ«æ•°æ®åº“æ ‡è¯†ç¬¦çš„å¤§å°å†™æ•æ„Ÿåº¦ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMBGä¼š\n      æ ¹æ®è®¾ç½®çš„schemaï¼Œcatalogæˆ–tablenameå»æŸ¥è¯¢æ•°æ®è¡¨ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æµç¨‹ï¼š 1ï¼Œå¦‚æœschemaï¼Œcatalogæˆ–tablenameä¸­æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆè®¾ç½®çš„æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œå°±ç²¾ç¡®çš„ä½¿ç”¨æŒ‡å®šçš„å¤§å°å†™æ ¼å¼å»æŸ¥è¯¢;\n      2ï¼Œå¦åˆ™ï¼Œå¦‚æœæ•°æ®åº“çš„æ ‡è¯†ç¬¦ä½¿ç”¨å¤§å†™çš„ï¼Œé‚£ä¹ˆMBGè‡ªåŠ¨æŠŠè¡¨åå˜æˆå¤§å†™å†æŸ¥æ‰¾; 3ï¼Œå¦åˆ™ï¼Œå¦‚æœæ•°æ®åº“çš„æ ‡è¯†ç¬¦ä½¿ç”¨å°å†™çš„ï¼Œé‚£ä¹ˆMBGè‡ªåŠ¨æŠŠè¡¨åå˜æˆå°å†™å†æŸ¥æ‰¾;\n      4ï¼Œå¦åˆ™ï¼Œä½¿ç”¨æŒ‡å®šçš„å¤§å°å†™æ ¼å¼æŸ¥è¯¢; å¦å¤–çš„ï¼Œå¦‚æœåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½¿ç”¨çš„\"\"æŠŠæ•°æ®åº“å¯¹è±¡è§„å®šå¤§å°å†™ï¼Œå°±ç®—æ•°æ®åº“æ ‡è¯†ç¬¦æ˜¯ä½¿ç”¨çš„å¤§å†™ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¹Ÿä¼šä½¿ç”¨ç»™å®šçš„å¤§å°å†™æ¥åˆ›å»ºè¡¨å;\n      è¿™ä¸ªæ—¶å€™ï¼Œè¯·è®¾ç½®delimitIdentifiers=\"true\"å³å¯ä¿ç•™å¤§å°å†™æ ¼å¼; -->\n    <!-- å¯é€‰ï¼š -->\n    <!-- 1ï¼Œschemaï¼šæ•°æ®åº“çš„schema; -->\n    <!-- 2ï¼Œcatalogï¼šæ•°æ®åº“çš„catalog; -->\n    <!-- 3ï¼Œaliasï¼šä¸ºæ•°æ®è¡¨è®¾ç½®çš„åˆ«åï¼Œå¦‚æœè®¾ç½®äº†aliasï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ‰€æœ‰çš„SELECT SQLè¯­å¥ä¸­ï¼Œåˆ—åä¼šå˜æˆï¼šalias_actualColumnName -->\n    <!-- 4ï¼ŒdomainObjectNameï¼šç”Ÿæˆçš„domainç±»çš„åå­—ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œç›´æ¥ä½¿ç”¨è¡¨åä½œä¸ºdomainç±»çš„åå­—;å¯ä»¥è®¾ç½®ä¸ºsomepck.domainNameï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨æŠŠdomainNameç±»å†æ”¾åˆ°somepckåŒ…é‡Œé¢; -->\n    <!-- 5ï¼ŒenableInsertï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”Ÿæˆinsertè¯­å¥; 6ï¼ŒenableSelectByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®æŸ¥è¯¢å¯¹è±¡çš„è¯­å¥ï¼ˆå°±æ˜¯getByIdæˆ–getï¼‰; -->\n    <!-- 7ï¼ŒenableSelectByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€æŸ¥è¯¢è¯­å¥; -->\n    <!-- 8ï¼ŒenableUpdateByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®ä¿®æ”¹å¯¹è±¡çš„è¯­å¥ï¼ˆå³update); -->\n    <!-- 9ï¼ŒenableDeleteByPrimaryKeyï¼ˆé»˜è®¤trueï¼‰ï¼šæŒ‡å®šæ˜¯å¦ç”ŸæˆæŒ‰ç…§ä¸»é”®åˆ é™¤å¯¹è±¡çš„è¯­å¥ï¼ˆå³deleteï¼‰; -->\n    <!-- 10ï¼ŒenableDeleteByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€åˆ é™¤è¯­å¥; -->\n    <!-- 11ï¼ŒenableCountByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€æŸ¥è¯¢æ€»æ¡æ•°è¯­å¥ï¼ˆç”¨äºåˆ†é¡µçš„æ€»æ¡æ•°æŸ¥è¯¢ï¼‰; -->\n    <!-- 12ï¼ŒenableUpdateByExampleï¼ˆé»˜è®¤trueï¼‰ï¼šMyBatis3Simpleä¸ºfalseï¼ŒæŒ‡å®šæ˜¯å¦ç”ŸæˆåŠ¨æ€ä¿®æ”¹è¯­å¥ï¼ˆåªä¿®æ”¹å¯¹è±¡ä¸­ä¸ä¸ºç©ºçš„å±æ€§ï¼‰; -->\n    <!-- 13ï¼ŒmodelTypeï¼šå‚è€ƒcontextå…ƒç´ çš„defaultModelTypeï¼Œç›¸å½“äºè¦†ç›–; -->\n    <!-- 14ï¼ŒdelimitIdentifiersï¼šå‚è€ƒtableNameçš„è§£é‡Šï¼Œæ³¨æ„ï¼Œé»˜è®¤çš„delimitIdentifiersæ˜¯åŒå¼•å·ï¼Œå¦‚æœç±»ä¼¼MYSQLè¿™æ ·çš„æ•°æ®åº“ï¼Œä½¿ç”¨çš„æ˜¯`ï¼ˆåå¼•å·ï¼Œé‚£ä¹ˆè¿˜éœ€è¦è®¾ç½®contextçš„beginningDelimiterå’ŒendingDelimiterå±æ€§ï¼‰ -->\n    <!-- 15ï¼ŒdelimitAllColumnsï¼šè®¾ç½®æ˜¯å¦æ‰€æœ‰ç”Ÿæˆçš„SQLä¸­çš„åˆ—åéƒ½ä½¿ç”¨æ ‡è¯†ç¬¦å¼•èµ·æ¥ã€‚é»˜è®¤ä¸ºfalseï¼ŒdelimitIdentifierså‚è€ƒcontextçš„å±æ€§\n      æ³¨æ„ï¼Œtableé‡Œé¢å¾ˆå¤šå‚æ•°éƒ½æ˜¯å¯¹javaModelGeneratorï¼Œcontextç­‰å…ƒç´ çš„é»˜è®¤å±æ€§çš„ä¸€ä¸ªå¤å†™; -->\n    <table tableName=\"test_handbook\">\n\n      <!-- å‚è€ƒ javaModelGenerator çš„ constructorBasedå±æ€§ -->\n      <!-- <property name=\"constructorBased\" value=\"false\" /> -->\n      <!-- é»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œtableåå­—ä¸ä¼šåŠ ä¸Šcatalogæˆ–schema; -->\n      <!-- <property name=\"ignoreQualifiersAtRuntime\" value=\"false\" /> -->\n      <!-- å‚è€ƒ javaModelGenerator çš„ immutable å±æ€§ -->\n      <!-- <property name=\"immutable\" value=\"false\" /> -->\n      <!-- æŒ‡å®šæ˜¯å¦åªç”Ÿæˆdomainç±»ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåªç”Ÿæˆdomainç±»ï¼Œå¦‚æœè¿˜é…ç½®äº†sqlMapGeneratorï¼Œé‚£ä¹ˆåœ¨mapper\n        XMLæ–‡ä»¶ä¸­ï¼Œåªç”ŸæˆresultMapå…ƒç´  -->\n      <!-- <property name=\"modelOnly\" value=\"false\" /> -->\n      <!-- å‚è€ƒ javaModelGenerator çš„ rootClass å±æ€§ <property name=\"rootClass\" value=\"\"/> -->\n      <!-- å‚è€ƒjavaClientGenerator çš„ rootInterface å±æ€§ <property name=\"rootInterface\"\n        value=\"\"/> -->\n      <!-- å¦‚æœè®¾ç½®äº†runtimeCatalogï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„catalogï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„catalog\n        <property name=\"runtimeCatalog\" value=\"\"/> -->\n      <!-- å¦‚æœè®¾ç½®äº†runtimeSchemaï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„schemaï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„schema <property\n        name=\"runtimeSchema\" value=\"\"/> -->\n      <!-- å¦‚æœè®¾ç½®äº†runtimeTableNameï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„SQLä¸­ï¼Œä½¿ç”¨è¯¥æŒ‡å®šçš„tablenameï¼Œè€Œä¸æ˜¯tableå…ƒç´ ä¸Šçš„tablename\n        <property name=\"runtimeTableName\" value=\"\"/> -->\n      <!-- æ³¨æ„ï¼Œè¯¥å±æ€§åªé’ˆå¯¹MyBatis3Simpleæœ‰ç”¨; å¦‚æœé€‰æ‹©çš„runtimeæ˜¯MyBatis3Simpleï¼Œé‚£ä¹ˆä¼šç”Ÿæˆä¸€ä¸ªSelectAllæ–¹æ³•ï¼Œå¦‚æœæŒ‡å®šäº†selectAllOrderByClauseï¼Œé‚£ä¹ˆä¼šåœ¨è¯¥SQLä¸­æ·»åŠ æŒ‡å®šçš„è¿™ä¸ªorderæ¡ä»¶; -->\n      <!-- <property name=\"selectAllOrderByClause\" value=\"age desc,username\n        asc\" /> -->\n      <!-- å¦‚æœè®¾ç½®ä¸ºtrueï¼Œç”Ÿæˆçš„modelç±»ä¼šç›´æ¥ä½¿ç”¨columnæœ¬èº«çš„åå­—ï¼Œè€Œä¸ä¼šå†ä½¿ç”¨é©¼å³°å‘½åæ–¹æ³•ï¼Œæ¯”å¦‚BORN_DATEï¼Œç”Ÿæˆçš„å±æ€§åå­—å°±æ˜¯BORN_DATE,è€Œä¸ä¼šæ˜¯bornDate -->\n      <property name=\"useActualColumnNames\" value=\"true\" />\n\n      <!-- generatedKeyç”¨äºç”Ÿæˆç”Ÿæˆä¸»é”®çš„æ–¹æ³• -->\n      <!-- å¦‚æœè®¾ç½®äº†è¯¥å…ƒç´ ï¼ŒMBGä¼šåœ¨ç”Ÿæˆçš„<insert>å…ƒç´ ä¸­ç”Ÿæˆä¸€æ¡æ­£ç¡®çš„<selectKey>å…ƒç´ ï¼Œ -->\n      <!-- è¯¥å…ƒç´ å¯é€‰ column:ä¸»é”®çš„åˆ—å; sqlStatementï¼šè¦ç”Ÿæˆçš„selectKeyè¯­å¥ï¼Œ -->\n      <!-- æœ‰ä»¥ä¸‹å¯é€‰é¡¹ï¼š -->\n      <!-- Cloudscape:ç›¸å½“äºselectKeyçš„SQLä¸ºï¼š VALUES IDENTITY_VAL_LOCAL() -->\n      <!-- DB2 :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼š VALUES IDENTITY_VAL_LOCAL() -->\n      <!-- DB2_MF :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT IDENTITY_VAL_LOCAL() FROM SYSIBM.SYSDUMMY1 -->\n      <!-- Derby :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šVALUES IDENTITY_VAL_LOCAL() -->\n      <!-- HSQLDB :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šCALL IDENTITY() -->\n      <!-- Informix :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šselect dbinfo('sqlca.sqlerrd1') from\n        systables where tabid=1 -->\n      <!-- MySql :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT LAST_INSERT_ID() -->\n      <!-- SqlServer :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT SCOPE_IDENTITY() -->\n      <!-- SYBASE :ç›¸å½“äºselectKeyçš„SQLä¸ºï¼šSELECT @@IDENTITY -->\n      <!-- JDBC :ç›¸å½“äºåœ¨ç”Ÿæˆçš„insertå…ƒç´ ä¸Šæ·»åŠ useGeneratedKeys=\"true\"å’ŒkeyPropertyå±æ€§ -->\n      <!-- <generatedKey column=\"\" sqlStatement=\"\"/> -->\n\n      <!-- è¯¥å…ƒç´ ä¼šåœ¨æ ¹æ®è¡¨ä¸­åˆ—åè®¡ç®—å¯¹è±¡å±æ€§åä¹‹å‰å…ˆé‡å‘½ååˆ—åï¼Œéå¸¸é€‚åˆç”¨äºè¡¨ä¸­çš„åˆ—éƒ½æœ‰å…¬ç”¨çš„å‰ç¼€å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œ -->\n      <!-- æ¯”å¦‚åˆ—åä¸ºï¼šCUST_ID,CUST_NAME,CUST_EMAIL,CUST_ADDRESSç­‰; -->\n      <!-- é‚£ä¹ˆå°±å¯ä»¥è®¾ç½®searchStringä¸º\"^CUST_\"ï¼Œå¹¶ä½¿ç”¨ç©ºç™½æ›¿æ¢ï¼Œé‚£ä¹ˆç”Ÿæˆçš„Customerå¯¹è±¡ä¸­çš„å±æ€§åç§°å°±ä¸æ˜¯ custId,custNameç­‰ï¼Œè€Œæ˜¯å…ˆè¢«æ›¿æ¢ä¸ºID,NAME,EMAIL,ç„¶åå˜æˆå±æ€§ï¼šidï¼Œnameï¼Œemail; -->\n      <!-- æ³¨æ„ï¼ŒMBGæ˜¯ä½¿ç”¨java.util.regex.Matcher.replaceAllæ¥æ›¿æ¢searchStringå’ŒreplaceStringçš„ï¼Œ\n        å¦‚æœä½¿ç”¨äº†columnOverrideå…ƒç´ ï¼Œè¯¥å±æ€§æ— æ•ˆ; -->\n      <!-- <columnRenamingRule searchString=\"\" replaceString=\"\"/> -->\n\n      <!-- ç”¨æ¥ä¿®æ”¹è¡¨ä¸­æŸä¸ªåˆ—çš„å±æ€§ï¼ŒMBGä¼šä½¿ç”¨ä¿®æ”¹åçš„åˆ—æ¥ç”Ÿæˆdomainçš„å±æ€§; column:è¦é‡æ–°è®¾ç½®çš„åˆ—å; æ³¨æ„ï¼Œä¸€ä¸ªtableå…ƒç´ ä¸­å¯ä»¥æœ‰å¤šä¸ªcolumnOverrideå…ƒç´  -->\n      <!-- <columnOverride column=\"username\"> -->\n      <!-- ä½¿ç”¨propertyå±æ€§æ¥æŒ‡å®šåˆ—è¦ç”Ÿæˆçš„å±æ€§åç§° -->\n      <!-- <property name=\"property\" value=\"userName\" /> -->\n      <!-- javaTypeç”¨äºæŒ‡å®šç”Ÿæˆçš„domainçš„å±æ€§ç±»å‹ï¼Œä½¿ç”¨ç±»å‹çš„å…¨é™å®šå <property name=\"javaType\" value=\"\"/> -->\n      <!-- jdbcTypeç”¨äºæŒ‡å®šè¯¥åˆ—çš„JDBCç±»å‹ <property name=\"jdbcType\" value=\"\"/> -->\n      <!-- typeHandler ç”¨äºæŒ‡å®šè¯¥åˆ—ä½¿ç”¨åˆ°çš„TypeHandlerï¼Œå¦‚æœè¦æŒ‡å®šï¼Œé…ç½®ç±»å‹å¤„ç†å™¨çš„å…¨é™å®šå æ³¨æ„ï¼Œmybatisä¸­ï¼Œä¸ä¼šç”Ÿæˆåˆ°mybatis-config.xmlä¸­çš„typeHandler\n        åªä¼šç”Ÿæˆç±»ä¼¼ï¼šwhere id = #{id,jdbcType=BIGINT,typeHandler=com._520it.mybatis.MyTypeHandler}çš„å‚æ•°æè¿°\n        <property name=\"jdbcType\" value=\"\"/> -->\n      <!-- å‚è€ƒtableå…ƒç´ çš„delimitAllColumnsé…ç½®ï¼Œé»˜è®¤ä¸ºfalse <property name=\"delimitedColumnName\"\n        value=\"\"/> -->\n      <!-- </columnOverride> -->\n      <!-- ignoreColumnè®¾ç½®ä¸€ä¸ªMGBå¿½ç•¥çš„åˆ—ï¼Œå¦‚æœè®¾ç½®äº†æ”¹åˆ—ï¼Œé‚£ä¹ˆåœ¨ç”Ÿæˆçš„domainä¸­ï¼Œç”Ÿæˆçš„SQLä¸­ï¼Œéƒ½ä¸ä¼šæœ‰è¯¥åˆ—å‡ºç° column:æŒ‡å®šè¦å¿½ç•¥çš„åˆ—çš„åå­—;\n        delimitedColumnNameï¼šå‚è€ƒtableå…ƒç´ çš„delimitAllColumnsé…ç½®ï¼Œé»˜è®¤ä¸ºfalse æ³¨æ„ï¼Œä¸€ä¸ªtableå…ƒç´ ä¸­å¯ä»¥æœ‰å¤šä¸ªignoreColumnå…ƒç´ \n        <ignoreColumn column=\"deptId\" delimitedColumnName=\"\"/> -->\n    </table>\n  </context>\n</generatorConfiguration>\n```\n\n### ç›¸å…³çš„ properties æ–‡ä»¶ `generatorConfig.properties`\n\ngeneratorConfig.properties è¦å¯¹åº”åœ¨ pom.xml ä¸­çš„ï¼š\n\n```xml\n<mybatis.generator.generatorConfig.properties>file:///${basedir}/src/test/resources/generatorConfig.properties</mybatis.generator.generatorConfig.properties>\n```\n\n```xml\n# æ•°æ®åº“é©±åŠ¨ jar è·¯å¾„\nmbg.drive.class.path=/home/yifan/.m2/repository/mysql/mysql-connector-java/5.1.39/mysql-connector-java-5.1.39.jar\n# æ•°æ®åº“è¿æ¥å‚æ•°\nmbg.jdbc.driver=com.mysql.jdbc.Driver\nmbg.jdbc.url=jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf-8\nmbg.jdbc.username=root\nmbg.jdbc.password=root\n# åŒ…è·¯å¾„é…ç½®\nmbg.model.package=com.test.demo.mybatis\nmbg.dao.package=com.test.demo.mybatis\nmbg.xml.mapper.package=com.test.demo.mybatis\n```\n\n### ç”Ÿæˆä»£ç  æ–¹æ³•ä¸€ï¼šEclipse Maven è¿è¡Œ\n\nå¦‚æœæ˜¯åœ¨ Eclipse ä¸­ï¼Œé€‰æ‹© pom.xml æ–‡ä»¶ï¼Œå‡»å³é”®å…ˆæ‹©ï¼š\nRun AS > Maven Buildâ€¦ > åœ¨ Goals æ¡†ä¸­è¾“å…¥ï¼š`mybatis-generator:generate`\nåœ¨ `Console` ä¸­å¯ä»¥çœ‹ log\n\n### ç”Ÿæˆä»£ç  æ–¹æ³•äºŒï¼šShell è¿è¡Œ\n\nå¦‚æœåœ¨å‘½ä»¤è¡Œè¾“å…¥ Maven å‘½ä»¤å³å¯ï¼Œæ³¨æ„ï¼šä¸€å®šæ˜¯å½“å‰é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œè¯¥å‘½ä»¤ï¼š\n\n```bash\nmvn mybatis-generator:generate\n```\n\n## Eclipse Plugin è¿è¡Œ MGB\n\nè¯¦ç»†è§ï¼š[MyBatis Generator - Running MyBatis Generator with Eclipse](http://www.mybatis.org/generator/running/runningWithEclipse.html)\n\n1ã€å¦‚æœä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå°†ä¸åœ¨ä¾é  Mavenï¼Œpox.xml ä¸­çš„é…ç½®å°†å¯ä»¥çœå»\n2ã€åŠ è½½ properties æ–‡ä»¶éœ€å˜åŒ–ï¼Œè‡ªå·±ä¸€ç›´æ²¡ææ¸…æ¥š properties çš„è·¯å¾„åº”è¯¥æ€ä¹ˆå†™ï¼Œåæ¥å˜é‡å°±ç›´æ¥å†™åœ¨ generatorConfig.xml ä¸­äº†ã€‚è¦æ˜¯æœ‰æ˜ç™½çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åœ¨ä¸‹é¢ç•™è¨€\n3ã€éœ€è¦ä¸‹è½½ pluginï¼šHelp > Eclipse Marketplace... > Search for \"MyBatis Generator\"ï¼›è¿™ä¸ªä¹Ÿæ˜¯ä¸ªå±€é™ï¼Œå°±æ˜¯ç”¨çš„äººè¿˜éœ€è¦ä¸‹è½½ Eclipse pluginï¼Œæ‰€ä»¥æ¨èä¸Šé¢ä½¿ç”¨ Maven çš„æ–¹æ³•\n\n## References\n\n- [Mybatis Generator å®˜æ–¹åŸç‰ˆ](http://www.mybatis.org/generator/index.html)\n- [Mybatis Generator ä¸­æ–‡ç‰ˆ](http://mbg.cndocs.tk/index.html)\n- [Mybatis Generator æœ€å®Œæ•´é…ç½®è¯¦è§£ - ç®€ä¹¦](http://www.jianshu.com/p/e09d2370b796)\n- [ç”¨ Maven æ’ä»¶ç”Ÿæˆ Mybatis ä»£ç  - è¾¹åŸåˆ€å®¢çš„åšå®¢](http://my.oschina.net/lilw/blog/168304)\n","tags":["java"]},{"title":"SpringMVC å…¥é—¨ä½¿ç”¨","url":"/2016/09/07/springmvc-getting-started-tutorial/","content":"\næœ¬æ–‡ä¸»è¦å‚è€ƒäº† [imooc-SpringMVC èµ·æ­¥](http://www.imooc.com/video/7237) è§†é¢‘æ•™ç¨‹å’Œ [SpringMVC ä»å…¥é—¨åˆ°ç²¾é€š ç³»åˆ— - HansonQ](http://www.imooc.com/article/3804) ï¼Œè¿˜æœ‰è‡ªå·±çš„ä¸€äº›æ€»ç»“ã€‚\n\nä¸»è¦å†…å®¹ï¼šMVC ç®€ä»‹ã€å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ã€SpringMVC åŸºæœ¬æ¦‚å¿µã€SpringMVC é…ç½®ã€SpringMVC ä¸­çš„æ³¨è§£ã€SpringMVC æ•°æ®ç»‘å®šã€‚\n\n<!-- more -->\n\n## MVC ç®€ä»‹\n\n1ã€MVC æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼\n\nç¨‹åºåˆ†å±‚ï¼Œåˆ†å·¥åˆä½œï¼Œæ—¢ç›¸äº’ç‹¬ç«‹ï¼ŒåˆååŒå·¥ä½œï¼Œåˆ†ä¸ºä¸‰å±‚ï¼šæ¨¡å‹å±‚ã€è§†å›¾å±‚å’Œæ§åˆ¶å±‚\n\n2ã€MVC æ˜¯ä¸€ç§æ€è€ƒæ–¹å¼\n\n- Viewï¼šè§†å›¾å±‚ï¼Œä¸ºç”¨æˆ·æä¾› UIï¼Œé‡ç‚¹å…³æ³¨æ•°æ®çš„å‘ˆç°ï¼Œä¸ºç”¨æˆ·æä¾›ç•Œé¢\n- Modelï¼šæ¨¡å‹å±‚ï¼Œä¸šåŠ¡æ•°æ®çš„ä¿¡æ¯è¡¨ç¤ºï¼Œå…³æ³¨æ”¯æ’‘ä¸šåŠ¡çš„ä¿¡æ¯æ„æˆï¼Œé€šå¸¸æ˜¯å¤šä¸ªä¸šåŠ¡å®ä½“çš„ç»„åˆ\n- Controllerï¼šæ§åˆ¶å±‚ï¼Œè°ƒç”¨ä¸šåŠ¡é€»è¾‘äº§ç”Ÿåˆé€‚çš„æ•°æ®ï¼ˆModelï¼‰ï¼Œä¼ é€’æ•°æ®ç»™è§†å›¾ç”¨äºå‘ˆç°\n\nMVC è®¾è®¡æ¨¡å¼åœ¨ B/S ä¸‹çš„åº”ç”¨ï¼š\n\n![160907-springmvc-getting-started-tutorial-mvc](https://user-images.githubusercontent.com/9289792/80199601-1cfdee80-8654-11ea-8328-9d74c174b2bc.gif)\n\nâ‘ ï¼šæµè§ˆå™¨å‘é€è¯·æ±‚åˆ°æ§åˆ¶å™¨(è¿™é‡Œè¦çŸ¥é“æ§åˆ¶å™¨çš„ä½œç”¨)\nâ‘¡ï¼šæ§åˆ¶å™¨ä¸èƒ½å¤„ç†è¯·æ±‚å¿…é¡»äº¤ç»™æ¨¡å‹å±‚æ¥å¤„ç†æ¥ç€å»è®¿é—®æ•°æ®åº“\nâ‘¢ï¼šæ¨¡å‹å±‚å°†å¤„ç†å¥½çš„ç»“æœè¿”å›ç»™æ§åˆ¶å±‚\nâ‘£ï¼šæ§åˆ¶å±‚å°†é€»è¾‘è§†å›¾å“åº”ç»™æµè§ˆå™¨(æµè§ˆå™¨æ˜¾ç¤ºçš„æ˜¯æ¸²æŸ“è¿‡çš„è§†å›¾)\n\nMVC æœ¬è´¨ï¼š**MVC çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä¸šåŠ¡æ•°æ®æŠ½å–åŒä¸šåŠ¡æ•°æ®å‘ˆç°ç›¸åˆ†ç¦»ï¼›åˆ†ç¦»æœ‰åˆ©äºç¨‹åºç®€åŒ–ï¼Œæ–¹ä¾¿ç¼–ç¨‹**\n\n## å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼\n\nå‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰æ˜¯ç”¨æ¥æä¾›ä¸€ä¸ªé›†ä¸­çš„è¯·æ±‚å¤„ç†æœºåˆ¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å°†ç”±ä¸€ä¸ªå•ä¸€çš„å¤„ç†ç¨‹åºå¤„ç†ã€‚è¯¥å¤„ç†ç¨‹åºå¯ä»¥åšè®¤è¯/æˆæƒ/è®°å½•æ—¥å¿—ï¼Œæˆ–è€…è·Ÿè¸ªè¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚ä¼ ç»™ç›¸åº”çš„å¤„ç†ç¨‹åºã€‚\n\n- å‰ç«¯æ§åˆ¶å™¨ï¼ˆFront Controllerï¼‰- å¤„ç†åº”ç”¨ç¨‹åºæ‰€æœ‰ç±»å‹è¯·æ±‚çš„å•ä¸ªå¤„ç†ç¨‹åºï¼Œåº”ç”¨ç¨‹åºå¯ä»¥æ˜¯åŸºäº web çš„åº”ç”¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºæ¡Œé¢çš„åº”ç”¨ç¨‹åºã€‚\n- è°ƒåº¦å™¨ï¼ˆDispatcherï¼‰ - å‰ç«¯æ§åˆ¶å™¨å¯èƒ½ä½¿ç”¨ä¸€ä¸ªè°ƒåº¦å™¨å¯¹è±¡æ¥è°ƒåº¦è¯·æ±‚åˆ°ç›¸åº”çš„å…·ä½“å¤„ç†ç¨‹åºã€‚\n- è§†å›¾ï¼ˆViewï¼‰ - è§†å›¾æ˜¯ä¸ºè¯·æ±‚è€Œåˆ›å»ºçš„å¯¹è±¡ã€‚\n\nå‰ç«¯æ§åˆ¶å™¨çš„ä¸»è¦ä½œç”¨ï¼š\n\n- æŒ‡å‰ç«¯æ§åˆ¶å™¨å°†æˆ‘ä»¬çš„è¯·æ±‚åˆ†å‘ç»™æˆ‘ä»¬çš„æ§åˆ¶å™¨å»ç”Ÿæˆä¸šåŠ¡æ•°æ®\n- å°†ç”Ÿæˆçš„ä¸šåŠ¡æ•°æ®åˆ†å‘ç»™æ°å½“çš„è§†å›¾æ¨¡ç‰ˆæ¥ç”Ÿæˆæœ€ç»ˆçš„è§†å›¾ç•Œé¢\n\n![160907-springmvc-getting-started-tutorial-front-controller](https://user-images.githubusercontent.com/9289792/80201864-63a11800-8657-11ea-91cb-2b2a2f55f6a6.jpg)\n\n## SpringMVC åŸºæœ¬æ¦‚å¿µ\n\n![160907-springmvc-getting-started-tutorial-springmvc01](https://user-images.githubusercontent.com/9289792/80199605-1d968500-8654-11ea-8f05-57d4685934bb.jpg)\n\nå¯¹ç»„ä»¶è¯´æ˜ï¼š\n\n1. DispatherServletï¼šå‰ç«¯æ§åˆ¶å™¨ ç”¨æˆ·è¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ï¼Œç›¸å½“äº MVC ä¸­çš„ Cï¼Œè€Œ DispatherServlet æ˜¯æ•´ä¸ªæµç¨‹çš„æ ¸å¿ƒï¼Œå®ƒæ¥è°ƒç”¨å…¶ä»–ç»„ä»¶æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå‰ç«¯æ§åˆ¶å™¨çš„å­˜åœ¨é™ä½äº†å…¶ä»–ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚\n2. HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨ å®ƒçš„ä½œç”¨å°±å¥½æ¯”å»çœ‹ç”µå½±è¦æ‹¿ç€ç”µå½±ç¥¨æ ¹æ®ç”µå½±ç¥¨ä¸Šé¢çš„åº§ä½å·æ‰¾åˆ°åº§ä½å…¶ä¸­åº§ä½å°±æ˜¯ Handlerï¼Œç”µå½±ç¥¨ä»¥åŠä¸Šé¢çš„åº§ä½å·å°±æ˜¯ URL HandlerMapping è´Ÿè´£æ ¹æ®ç”¨æˆ·è¯·æ±‚æ‰¾åˆ° Handler å³å¤„ç†å™¨ï¼ŒSpringMVC æä¾›äº†ä¸åŒçš„æ˜ å°„å™¨å®ç°ä¸åŒçš„æ˜ å°„æ–¹å¼ï¼Œä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå®ç°æ¥å£æ–¹å¼ï¼Œæ³¨è§£æ–¹å¼ç­‰ã€‚\n3. Handlerï¼šå¤„ç†å™¨ Handler æ˜¯åç«¯æ§åˆ¶å™¨ï¼Œåœ¨å‰ç«¯æ§åˆ¶å™¨çš„æ§åˆ¶ä¸‹åç«¯æ§åˆ¶å™¨å¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†ï¼ŒHandler æ¶‰åŠåˆ°å…·ä½“çš„ç”¨æˆ·ä¸šåŠ¡è¯·æ±‚ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦ç¨‹åºå‘˜æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¼€å‘ã€‚\n4. HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨ é€šè¿‡ HandlerAdapter å¯¹å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨ï¼Œé€šè¿‡é€‚é…å™¨å¯ä»¥å¯¹æ›´å¤šç±»å‹çš„å¤„ç†å™¨è¿›è¡Œæ‰§è¡Œã€‚æ’­æ”¾çš„ç”µå½±æ˜¯ 3D çš„ä½ çœ‹ä¸æ¸…æ¥šï¼Œå› æ­¤ç”µå½±é™¢è·Ÿä½ è¯´ä½ è¦æƒ³çœ‹æ¸…ç”µå½±å°±å¿…é¡»æˆ´ 3D çœ¼é•œã€‚ä¹Ÿå°±æ˜¯è¯´ Handler æ»¡è¶³ä¸€å®šçš„è¦æ±‚æ‰å¯ä»¥è¢«æ‰§è¡Œã€‚\n5. ViewResolverï¼šè§†å›¾è§£æå™¨ ViewResolver è´Ÿè´£å°†å¤„ç†ç»“æœç”Ÿæˆ View è§†å›¾ï¼ŒViewResolver é¦–å…ˆæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆç‰©ç†è§†å›¾åå³å…·ä½“çš„é¡µé¢åœ°å€ï¼Œå†ç”Ÿæˆ View è§†å›¾å¯¹è±¡ï¼Œæœ€åå¯¹ View è¿›è¡Œæ¸²æŸ“å°†å¤„ç†ç»“æœé€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·ã€‚\n\n![160907-springmvc-getting-started-tutorial-springmvc02](https://user-images.githubusercontent.com/9289792/80199609-1d968500-8654-11ea-997b-67a5862bfd25.jpg)\n\nå·¥ä½œåŸç†è§£é‡Šè¯´æ˜ï¼š\n1ã€ç”¨æˆ·å‘é€è¯·æ±‚åˆ° SpringMVC æ¡†æ¶æä¾›çš„ DispatcherServlet è¿™ä¸ªå‰ç«¯æ§åˆ¶å™¨ï¼ˆäº†è§£ struts2 çš„æœ‹å‹ä¹Ÿéƒ½çŸ¥é“å…¶å® struts2 ä¹Ÿæœ‰ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨ web.xml ä¸­çš„ filter æ ‡ç­¾å°±æ˜¯ï¼‰ã€‚\n2ã€å‰ç«¯æ§åˆ¶å™¨ä¼šå»æ‰¾å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆHandlerMappingï¼‰ï¼Œå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚ url æ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨å¯¹è±¡åŠå¤„ç†å™¨æ‹¦æˆªå™¨ï¼ˆå¦‚æœæœ‰åˆ™ç”Ÿæˆï¼‰ä¸€å¹¶è¿”å›ç»™ DispatcherServlet ã€‚\n3ã€æ ¹æ®å¤„ç†å™¨æ˜ å°„å™¨è¿”å›çš„å¤„ç†å™¨ï¼ŒDispatcherServlet ä¼šæ‰¾â€œåˆé€‚â€çš„å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapterï¼‰\n4ã€å¤„ç†å™¨é€‚é…å™¨ HandlerAdpater ä¼šå»æ‰§è¡Œå¤„ç†å™¨ï¼ˆHandler å¼€å‘çš„æ—¶å€™ä¼šè¢«å«æˆ Controller ä¹Ÿå«åç«¯æ§åˆ¶å™¨åœ¨ struts2 ä¸­ action ä¹Ÿæ˜¯ä¸€ä¸ªåç«¯æ§åˆ¶å™¨ï¼‰æ‰§è¡Œä¹‹å‰ä¼šæœ‰è½¬æ¢å™¨ã€æ•°æ®ç»‘å®šã€æ ¡éªŒå™¨ç­‰ç­‰å®Œæˆä¸Šé¢è¿™äº›æ‰ä¼šå»æ­£åœ¨æ‰§è¡Œ Handler\n5ã€åç«¯æ§åˆ¶å™¨ Handler æ‰§è¡Œå®Œæˆä¹‹åè¿”å›ä¸€ä¸ª ModelAndView å¯¹è±¡ ã€‚\n6ã€å¤„ç†å™¨é€‚é…å™¨ HandlerAdpater ä¼šå°†è¿™ä¸ª ModelAndView è¿”å›å‰ç«¯æ§åˆ¶å™¨ DispatcherServletã€‚å‰ç«¯æ§åˆ¶å™¨ä¼šå°† ModelAndView å¯¹è±¡äº¤ç»™è§†å›¾è§£æå™¨ ViewResolverã€‚\n7ã€è§†å›¾è§£æå™¨ ViewResolver è§£æ ModelAndView å¯¹è±¡ä¹‹åè¿”å›é€»è¾‘è§†å›¾ã€‚\n8ã€å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet å¯¹é€»è¾‘è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼ˆæ•°æ®å¡«å……ï¼‰ä¹‹åè¿”å›çœŸæ­£çš„ç‰©ç† View å¹¶å“åº”ç»™æµè§ˆå™¨ã€‚\n\n![160907-springmvc-getting-started-tutorial-springmvc03](https://user-images.githubusercontent.com/9289792/80199612-1e2f1b80-8654-11ea-9245-65a4470bc5f5.jpg)\n\n## SpringMVC é…ç½®\n\n1ã€å‰ç«¯æ§åˆ¶å™¨éœ€è¦åœ¨ web.xml ä¸­é…ç½®\n\n```xml\n<!-- é…ç½®å‰ç«¯æ§åˆ¶å™¨ -->\n<servlet>\n  <servlet-name>web-dispatcher</servlet-name>\n  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n  <!--åŠ è½½å‰ç«¯æ§åˆ¶å™¨é…ç½®æ–‡ä»¶ ä¸Šä¸‹æ–‡é…ç½®ä½ç½®-->\n  <init-param>\n    <!-- å¤‡æ³¨ï¼š\n            contextConfigLocationï¼šæŒ‡å®š SpringMVC é…ç½®çš„åŠ è½½ä½ç½®ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤åŠ è½½\n            WEB-INF/[DispatcherServlet çš„ Servlet åå­—]-servlet.xml\n          -->\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:spring/spring-*.xml</param-value>\n  </init-param>\n  <!-- è¡¨ç¤ºéšWEBæœåŠ¡å™¨å¯åŠ¨ -->\n  <load-on-startup>1</load-on-startup>\n</servlet>\n<servlet-mapping>\n<servlet-name>web-dispatcher</servlet-name>\n  <!-- å¤‡æ³¨ï¼šå¯ä»¥æ‹¦æˆªä¸‰ç§è¯·æ±‚\n        ç¬¬ä¸€ç§ï¼šæ‹¦æˆªå›ºå®šåç¼€çš„urlï¼Œæ¯”å¦‚è®¾ç½®ä¸º *.doã€*.actionï¼Œ ä¾‹å¦‚ï¼š/user/add.action æ­¤æ–¹æ³•æœ€ç®€å•,ä¸ä¼šå¯¼è‡´é™æ€èµ„æºï¼ˆjpg,js,cssï¼‰è¢«æ‹¦æˆª\n        ç¬¬äºŒç§ï¼šæ‹¦æˆªæ‰€æœ‰,è®¾ç½®ä¸º/ï¼Œä¾‹å¦‚ï¼š/user/add  /user/add.actionæ­¤æ–¹æ³•å¯ä»¥å®ç°RESTé£æ ¼çš„url,\n        å¾ˆå¤šäº’è”ç½‘ç±»å‹çš„åº”ç”¨ä½¿ç”¨è¿™ç§æ–¹å¼.ä½†æ˜¯æ­¤æ–¹æ³•ä¼šå¯¼è‡´é™æ€æ–‡ä»¶(jpg,js,css)è¢«æ‹¦æˆªåä¸èƒ½æ­£å¸¸æ˜¾ç¤º.éœ€è¦ç‰¹æ®Šå¤„ç†\n        ç¬¬ä¸‰ç§ï¼šæ‹¦æˆªæ‰€æœ‰,è®¾ç½®ä¸º/*ï¼Œæ­¤è®¾ç½®æ–¹æ³•é”™è¯¯,å› ä¸ºè¯·æ±‚åˆ°Action,å½“actionè½¬åˆ°jspæ—¶å†æ¬¡è¢«æ‹¦æˆª,æç¤ºä¸èƒ½æ ¹æ®jspè·¯å¾„mappingæˆåŠŸ\n    -->\n  <!-- é»˜è®¤åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ -->\n  <url-pattern>/</url-pattern>\n</servlet-mapping>\n```\n\n2ã€åœ¨ `spring/spring-web.xml` é…ç½®è§†å›¾è§£æå™¨\n\n```xml\n<!-- é…ç½®è§†å›¾è§£æå™¨ -->\n<!-- InternalResourceViewResolverï¼šæ”¯æŒJSPè§†å›¾è§£æ -->\n<!-- viewClassï¼šJstlView è¡¨ç¤ºJSPæ¨¡æ¿é¡µé¢éœ€è¦ä½¿ç”¨JSTLæ ‡ç­¾åº“ï¼Œæ‰€ä»¥classpathä¸­å¿…é¡»åŒ…å«jstlçš„ç›¸å…³jaråŒ…ï¼› -->\n<!-- prefix å’Œ suffixï¼šæŸ¥æ‰¾è§†å›¾é¡µé¢çš„å‰ç¼€å’Œåç¼€ï¼Œæœ€ç»ˆè§†å›¾çš„å€ä¸ºï¼š -->\n<!-- å‰ç¼€+é€»è¾‘è§†å›¾å+åç¼€ï¼Œé€»è¾‘è§†å›¾åéœ€è¦åœ¨controllerä¸­è¿”å›ModelAndViewæŒ‡å®šï¼Œæ¯”å¦‚é€»è¾‘è§†å›¾åä¸ºhelloï¼Œ-->\n<!-- åˆ™æœ€ç»ˆè¿”å›çš„jspè§†å›¾åœ°å€ \"WEB-INF/jsp/hello.jsp\" -->\n<bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n  <!-- å†³å®šè§†å›¾ç±»å‹ï¼Œå¦‚æœæ·»åŠ äº†jstlæ”¯æŒï¼ˆå³æœ‰jstl.jarï¼‰ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯è§£æä¸ºjstlè§†å›¾ -->\n  <property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\" />\n  <!-- è§†å›¾å‰ç¼€ -->\n  <property name=\"prefix\" value=\"/WEB-INF/jsp/\" />\n  <!-- è§†å›¾åç¼€ -->\n  <property name=\"suffix\" value=\".jsp\" />\n</bean>\n```\n\n3ã€åœ¨ `spring/spring-web.xml` é…ç½® æ³¨è§£æ¨¡å¼\n\n```xml\n<!-- è‡ªåŠ¨åŠ è½½RequestMappingHandlerMappingå’ŒRequestMappingHandlerAdapterï¼Œ -->\n<!-- å¯ç”¨åœ¨xmlé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<mvc:annotation-driven>æ›¿ä»£æ³¨è§£å¤„ç†å™¨å’Œé€‚é…å™¨çš„é…ç½®ã€‚ -->\n<mvc:annotation-driven/>\n```\n\n4ã€åœ¨ `spring/spring-web.xml` é…ç½® æ‰«æ web ç›¸å…³çš„ bean\n\n```xml\n<!-- ç»„ä»¶æ‰«æå™¨ï¼šå¯ä»¥æ‰«æ @Controllerã€@Serviceã€@Repository ç­‰ç­‰ -->\n<context:component-scan base-package=\"com.controller\" />\n```\n\n## SpringMVC ä¸­çš„æ³¨è§£\n\n### `@Controller`\n\n@Controller æ³¨è§£ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåç«¯æ§åˆ¶å™¨ï¼ˆç±»ä¼¼ struts ä¸­çš„ actionï¼‰ï¼Œä¸»è¦ä½œç”¨å°±æ˜¯æ¥å—é¡µé¢çš„å‚æ•°ï¼Œè½¬å‘é¡µé¢ã€‚\n@Controller æºç ï¼š\n\n```java\n@Target({ElementType.TYPE}) // è¡¨æ˜åªèƒ½å®šä¹‰åœ¨ç±»ä¸Šé¢\n@Retention(RetentionPolicy.RUNTIME) //ä¿ç•™ç­–ç•¥æ˜¯RUNTIMEï¼Œåœ¨JVMåŠ è½½ç±»æ—¶ï¼Œä¼šæŠŠæ³¨è§£åŠ è½½åˆ°JVMå†…å­˜ä¸­ï¼ˆå®ƒæ˜¯å”¯ä¸€å¯ä»¥ç”¨åå°„æ¥è¯»å–æ³¨è§£çš„ç­–ç•¥ï¼‰\n@Documented //@Documentedç”¨äºæè¿°å…¶å®ƒç±»å‹çš„annotationåº”è¯¥è¢«ä½œä¸ºè¢«æ ‡æ³¨çš„ç¨‹åºæˆå‘˜çš„å…¬å…±APIï¼Œå› æ­¤å¯ä»¥è¢«ä¾‹å¦‚javadocæ­¤ç±»çš„å·¥å…·æ–‡æ¡£åŒ–ã€‚Documentedæ˜¯ä¸€ä¸ªæ ‡è®°æ³¨è§£ï¼Œæ²¡æœ‰æˆå‘˜ã€‚\n@Component //springæ¡†æ¶è§„å®šå½“ä¸€ä¸ªç±»ä¸å¥½å½’ç±»ï¼ˆserviceã€daoã€controllerï¼‰çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œç”±æ­¤å¯è§å³ä¾¿å¥½å½’ç±»å†…éƒ¨è¿˜æ˜¯ä½¿ç”¨çš„@Componentæ³¨è§£\npublic @interface Controller {\n  /**\n    * The value may indicate a suggestion for a logical component name,\n    * to be turned into a Spring bean in case of an autodetected component.\n    * @return the suggested component name, if any\n    */\n  String value() default \"\";\n}\n```\n\n### `@RequestMapping`\n\nè¿™ä¸ªæ³¨è§£çš„ä½œç”¨ç›®æ ‡å°±è·Ÿ @Controller ä¸ä¸€æ ·äº†ï¼Œè¿™ä¸ªæ³¨è§£å¯ä»¥å®šä¹‰åœ¨ç±»ä¸Šé¢ä¹Ÿå¯ä»¥å®šä¹‰åœ¨æ–¹æ³•ä¸Šé¢ã€‚\n\n```java\n/**\n* 1.@RequestMappingï¼šé™¤äº†ä¿®é¥°æ–¹æ³•,è¿˜å¯ä»¥ä¿®é¥°ç±»\n* 2.ç±»å®šä¹‰å¤„ï¼šæä¾›åˆæ­¥çš„è¯·æ±‚ä¿¡æ¯æ˜ å°„.ç›¸å¯¹äºWEBåº”ç”¨çš„æ ¹ç›®å½•(çª„åŒ–è¯·æ±‚)\n* 3.æ–¹æ³•å¤„ï¼šæä¾›è¿›ä¸€æ­¥çš„ç»†åˆ†æ˜ å°„ä¿¡æ¯ã€‚ç›¸å¯¹äºç±»å®šä¹‰å¤„çš„URLã€‚\n*      è‹¥ç±»å®šä¹‰å¤„ä¸ºæ ‡æ³¨@RequestMapping,åˆ™æ–¹æ³•å‡ºçš„URLç›¸å¯¹äºWEBåº”ç”¨çš„æ ¹ç›®å½•\n*/\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Mapping\npublic @interface RequestMapping {\n  String[] value() default {};\n  RequestMethod[] method() default {}; //é™åˆ¶è¯·æ±‚æ–¹å¼\n  String[] params() default {}; //è¦æ±‚è¯·æ±‚çš„URLåŒ…å«æŒ‡å®šçš„å‚æ•°\n}\n```\n\nä»£ç å®ä¾‹\n\n```java\n@Controller\n@RequestMapping(\"/demo\")\npublic class IndexController {\n  @RequestMapping(value = \"/test\", method = RequestMethod.GET)\n  public String index(Model model, HttpServletRequest request) {\n    // åœ¨æ¸¸è§ˆå™¨è®¿é—® http://localhost:8080/demo/test å°†è¿›å…¥è¿™é‡Œ\n    model.addAttribute(\"originURL\", \"\");\n    model.addAttribute(\"controllerName\", \"index\");\n    return \"index\";\n  }\n}\n```\n\n@RequestMapping è¿˜æ”¯æŒ Ant æ–¹æ ¼çš„è¯·æ±‚\n\n```txt\n?ï¼šåŒ¹é…æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦\n*ï¼šåŒ¹é…æ–‡ä»¶ä¸­ä»»æ„å­—ç¬¦\n**ï¼š**åŒ¹é…å¤šå±‚è·¯å¾„\n\n/user/*/createUser : åŒ¹é… -/user/aa/createUser æˆ–è€… -/user/aa/createUser\n/user/**/createUser : åŒ¹é… -/user/aa/createUser æˆ–è€… -/user/createUser æˆ–è€… -/user/aa/cc/createUser\n/user/createUser?? : åŒ¹é… -/user/aa/createUseraa\n```\n\n### `@PathVariable`\n\n@PathVariable è¿™ä¸ªæ³¨è§£æ”¯æŒç°åœ¨å½“ä¸‹è¾ƒä¸ºæµè¡Œçš„ Restful é£æ ¼çš„ URLã€‚ å…ˆè¯´è¯´è¿™ä¸ªæ³¨è§£çš„ä½œç”¨ï¼Œæ”¯æŒå°† url ä¸­çš„å ä½ç¬¦å‚æ•°ç»‘å®šåˆ°ç›®æ ‡æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œ è¯¥åŠŸèƒ½ä¹Ÿæ˜¯ SpringMVC å®ç° Restful é£æ ¼ url çš„é‡è¦æªæ–½ã€‚\n\nä»£ç å®ä¾‹\n\n```java\n// http://localhost:8080/demo/sss\n@RequestMapping(value = \"/{slug:.+}\", method = RequestMethod.GET)\npublic String index2(@PathVariable(\"slug\") String slug, Model model) {\n  LOG.info(\"DemoController index2 slug  \" + slug);\n  // common\n  model.addAttribute(\"originURL\", \"demo/\");\n  model.addAttribute(\"controllerName\", \"demo\");\n  model.addAttribute(\"controllerMethod\", \"index2\");\n  model.addAttribute(\"slug\", slug);\n  return \"demo\";\n}\n\n//slug = sss\n```\n\næˆ‘ä»¬ç†Ÿæ‚‰çš„è¯·æ±‚åº”è¯¥æ˜¯ POST å’Œ GET è¯·æ±‚ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„è€Œå®é™…ä¸Š HTTP1.1 è¯·æ±‚è¿˜æœ‰ PUTã€DELETE ç­‰ 8 ç§æ¥è¡¨åè¯·æ±‚çš„åŠ¨ä½œã€‚\n\nåœ¨ SpringMVC ä¸­è¦å®ç° PUT å’Œ DELETE è¯·æ±‚éœ€è¦åœ¨ web.xml é¢å¤–é…ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨çš„ä½œç”¨å°±æ˜¯æŠŠ POST è¯·æ±‚å˜ä¸º PUT å’Œ DELETE è¯·æ±‚ã€‚\n_å…³äº Restful çš„å†…å®¹è®¡åˆ’å•ç‹¬å†™ã€‚_\n\n### `@RequestParam`\n\n```java\n@Target(ElementType.PARAMETER)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface RequestParam {\n  String value() default \"\";//å€¼å³ä¸ºè¯·æ±‚å‚æ•°çš„å‚æ•°å\n  boolean required() default true;//è¯¥å‚æ•°æ˜¯å¦æ˜¯å¿…é¡»ã€‚é»˜è®¤å€¼ä¸ºtrue\n  String defaultValue() default ValueConstants.DEFAULT_NONE;//è¯·æ±‚å‚æ•°çš„é»˜è®¤å€¼\n}\n```\n\n```java\n// http://localhost:8080/demo/para?slug=google\n@RequestMapping(value = \"/para\", method = RequestMethod.GET)\npublic String index3(@RequestParam(value = \"slug\", defaultValue = \"\") String slug, Model model) {\n  model.addAttribute(\"originURL\", \"demo/\");\n  model.addAttribute(\"controllerName\", \"demo\");\n  model.addAttribute(\"controllerMethod\", \"index3\");\n  model.addAttribute(\"slug\", slug);\n  return \"demo\";\n}\nslug = google\n```\n\nå¦å¤–è¿˜æœ‰ä¸€ç‚¹è¦æç¤ºä¸€ä¸‹ï¼Œå‚æ•°æ²¡æœ‰åŠ è¿™ä¸ªæ³¨è§£ä¹Ÿèƒ½æ˜ å°„æˆåŠŸï¼Œè¿™æ˜¯åº”ä¸º SpringMVC æ¡†æ¶æ”¯æŒè¯·æ±‚å‚æ•°å’Œç›®æ ‡æ–¹æ³•å‚æ•°ä¸€è‡´çš„æ—¶å€™å¯ä»¥çœç•¥è¿™ä¸ªæ³¨è§£ã€‚\n\n### `@ResponseBody`\n\n```java\n/**\n * Annotation that indicates a method return value should be bound to the web\n * response body. Supported for annotated handler methods in Servlet environments.\n *\n * è¿™ä¸ªæ³¨è§£æŒ‡æ˜ä¸€ä¸ªæ–¹æ³•çš„è¿”å›å€¼åº”è¯¥ç»‘å®šåœ¨ web response body ä¸­ï¼Œåœ¨ Servlet ç¯å¢ƒä¸­æ”¯æŒæ³¨è§£å¤„ç†æ–¹æ³•\n *\n * <p>As of version 4.0 this annotation can also be added on the type level in\n * which case it is inherited and does not need to be added on the method level.\n */\n@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\npublic @interface ResponseBody {\n}\n```\n\nä»£ç \n\n```java\n// http://localhost:8080/demo/json\n@RequestMapping(value = \"/json\", method = RequestMethod.POST)\npublic @ResponseBody Domain index7(HttpServletRequest request, Model model) {\n  LOG.info(\"DemoController demo index7\");\n  model.addAttribute(\"originURL\", \"demo/\");\n  model.addAttribute(\"controllerName\", \"demo\");\n  model.addAttribute(\"controllerMethod\", \"index7\");\n\n  Domain domain = new Domain();\n  domain.setDomain(\"gggoogle.com\");\n  domain.setId(100);\n  return domain;\n}\n\n/* response body\n{\n  \"id\": 100,\n  \"domain\": \"gggoogle.com\"\n}\n*/\n```\n\n## SpringMVC æ•°æ®ç»‘å®š\n\nç®€å•è¯´ä¸€ä¸‹åœºæ™¯ï¼š\nå¯¹äºä¸€ä¸ªæ³¨å†Œé¡µé¢æœ‰å¾ˆå¤šä¿¡æ¯è­¬å¦‚ï¼šç”¨æˆ·åã€å¯†ç ã€ç¡®è®¤å¯†ç ã€é‚®ç®±ã€æ‰‹æœºã€å…´è¶£ç­‰ç­‰ã€‚è¿™æ—¶å€™å°±ä¼šæƒ³èƒ½ä¸èƒ½å°†è¿™äº›ä¸ªå‚æ•°åŒ…è£…åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼ˆPOJOï¼‰ï¼Œç”¨è¿™ä¸ª POJO æ¥åšç›®æ ‡æ–¹æ³•çš„å½¢å‚ä¸Šé¢ã€‚\n\nå¯ä»¥è¯´çš„æ˜¯ SpringMVC æ˜¯æ”¯æŒå°† POJO ä½œä¸ºç›®æ ‡å‚æ•°çš„ã€‚å½“ç„¶ä¹Ÿæ˜¯è¦éµå¾ªä¸€äº›è§„åˆ™çš„ï¼Œå°±æ˜¯è¡¨å•çš„ name å±æ€§å€¼è¦å’Œ POJO çš„å±æ€§å€¼è¦ä¸€è‡´ã€‚å½“ç„¶äº†ï¼Œè¿™æ ·åˆä¼šæœ‰ä¸€ä¸ªæ–°çš„ç–‘é—®æ”¯ä¸æ”¯æŒçº§è”å±æ€§ç­”æ¡ˆæ˜¯æ”¯æŒçš„ã€‚\n\n```java\npublic class Address {\n  private String city;\n  ...\n}\n```\n\n```java\npublic class Persion {\n  private String name;\n  private Address address;\n  ...\n}\n```\n\n```html\n<form action=\"/demo/pojo\">\n  NAME:<input type=\"text\" name=\"name\" /> CITY:<input\n    type=\"text\"\n    name=\"address.city\"\n  />\n</form>\n```\n\n```java\n@RequestMapping(value = \"/pojo\", method = RequestMethod.POST)\npublic String index4(Persion persion, Model model) {\n  `model.addAttribute(\"originURL\", \"demo/\");\n  model.addAttribute(\"controllerName\", \"demo\");\n  model.addAttribute(\"controllerMethod\", \"index4\");\n  model.addAttribute(\"persion\", persion);\n  return \"demo\";`\n}\n```\n\n### SpringMVC ä½¿ç”¨ Servlet API\n\nå¯ä»¥ä½¿ç”¨ Servlet åŸç”Ÿçš„ API ä½œä¸ºç›®æ ‡æ–¹æ³•çš„å‚æ•°ã€‚å…·ä½“æ”¯æŒä»¥ä¸‹ç±»å‹ï¼šHttpServletRequestã€HttpServletResponseã€HttpSessionã€java.security.Principalã€Localeã€InputStreamã€OutputStreamã€Readerã€Writer\n\n```java\n// http://localhost:8080/demo/req?slug=facebook\n@RequestMapping(value = \"/req\", method = RequestMethod.GET)\npublic String index5(HttpServletRequest request, Model model) {\n  String slug = request.getParameter(\"slug\");\n  model.addAttribute(\"originURL\", \"demo/\");\n  model.addAttribute(\"controllerName\", \"demo\");\n  model.addAttribute(\"controllerMethod\", \"index5\");\n  model.addAttribute(\"slug\", slug);\n  return \"demo\";\n}\n```\n\n## References\n\n- [IMOOC-SpringMVC èµ·æ­¥](http://www.imooc.com/video/7237)\n- [SpringMVC ä»å…¥é—¨åˆ°ç²¾é€š ç³»åˆ— - HansonQ](http://www.imooc.com/article/3804)\n","tags":["java"]},{"title":"åˆšåˆšæ¯•ä¸šçš„ä¸¤ä¸ªæœˆå°ç»“","url":"/2016/08/31/2016-08-report/","content":"\nèµ°å‡ºæ ¡å›­å·²ç»ä¸¤ä¸ªæœˆäº†ï¼Œå› ä¸ºä¹‹å‰çš„æš‘æœŸä¹Ÿæ²¡æ€ä¹ˆåœ¨å®¶å¾…è¿‡ï¼Œå¤§ä¸€åœ¨ä¸­åº·ã€å¤§äºŒåœ¨è…¾éªã€å¤§ä¸‰åœ¨å¤§ä¸ºï¼Œå¤§å››æ¯•ä¸šä¹Ÿå°±æ˜¯ç°åœ¨ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æ„Ÿè§‰ã€‚å¯ä»¥è¯´ï¼Œè¿™ä¸¤ä¸ªæœˆä¹Ÿåšäº†äº›äº‹æƒ…ï¼Œå­¦äº†äº›ä¸œè¥¿çš„ã€‚\n\n<!-- more -->\n\nä»å­¦æ ¡æ¯•ä¸šï¼Œæœ€ç›´æ¥çš„å½±å“å°±æ˜¯è‡ªå·±æ›´åŠ ä¸“æ³¨äºè®¡ç®—æœºçŸ¥è¯†ï¼Œä¸ç”¨å†ä¸ºå­¦ä¸šæ‹…å¿ƒã€‚ç¡®å®šäº†å…ˆèµ°æŠ€æœ¯çš„é“è·¯ï¼Œä¹Ÿè®©è‡ªå·±ä¸é‚£ä¹ˆè¿·èŒ«åšä»€ä¹ˆã€‚å·¥ä½œè§„å¾‹ï¼Œè‡ªå·±å¼€å§‹è¯»è¯»ä¹¦ï¼Œæ‰è§‰çš„è¯»ä¹¦æ˜¯ä»¶æœ‰æ„æ€çš„äº‹ã€‚ä¹Ÿé€¼ç€è‡ªå·±å¸¸å¸¸å†™ç‚¹ä¸œè¥¿ï¼Œä¸»è¦æ˜¯è§‰çš„ï¼šå†™ä¸œè¥¿çš„æ—¶å€™è‡ªå·±ä¼šä¸»åŠ¨çš„æ€è€ƒï¼Œæ–‡ç¬”ç»ƒç€ç»ƒç€ä¹Ÿå°±èƒ½è¿›æ­¥å§ã€‚\n\nï¼ˆä¸€ï¼‰\n\nDMV æ˜¯æ¯•ä¸šåè‡ªå·±ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œå…¨æ ˆå¼€å‘ã€‚åˆç‰ˆä¸¤å‘¨ä¸Šçº¿ï¼Œåæœ‰èŠ±äº†ä¸€å‘¨å¤šçš„æ—¶é—´ç¼–å†™äº†ç­”é¢˜è®°å½•çš„åŠŸèƒ½ã€‚å…¶ä¸­çš„æ”¶è·æ˜¯ï¼šé¡¹ç›®æ¡†æ¶çš„æ­å»ºå’Œå‰ç«¯å…¥é—¨çŸ¥è¯†ã€‚åŸæ¥çš„é¡¹ç›®æ­å»ºéƒ½ä¸æ˜¯è‡ªå·±åšçš„ï¼Œä¹Ÿä¸€ç›´è§‰çš„æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ã€‚ä¹Ÿè®¸å°±æ˜¯å› ä¸ºæ²¡æœ‰åšè¿‡æ‰è§‰çš„éš¾ï¼Œåšè¿‡ä¹‹åä¹Ÿè§‰çš„ä¸è¿‡å¦‚æ­¤ã€‚é¡¹ç›®çš„é¡µé¢ä¸å¤šï¼Œä½†éƒ½æ˜¯è‡ªå·±ä¸€ç‚¹ç‚¹å†™çš„ï¼ŒHTML JS åŸæ¥ä¹Ÿå°±æ˜¯è‡ªå·±æ”¹æ”¹ï¼Œæ²¡æœ‰å®Œæ•´å†™è¿‡ï¼Œè¿™æ¬¡ç®—æ˜¯ä¸€æ¬¡ä¸é”™çš„é”»ç‚¼ã€‚å†™å‰ç«¯çš„æ—¶å€™æ‰å‘ç°ç°åœ¨çš„å‰ç«¯çœŸçš„æ˜¯æ—¥æ–°æœˆå¼‚ AngularJS React å¥½å¤šå¥½å¤šè‡ªå·±éƒ½æ²¡æœ‰å¬è¿‡çš„ä¸œè¥¿ï¼Œä¹Ÿæ˜¯ä» Mengqi é‚£é‡Œäº†è§£åˆ°äº†å¾ˆå¤šã€‚å¯æƒœçš„æ˜¯è‡ªå·±æ²¡æœ‰å®é™…çš„ç”¨ä¸Šè¿™äº›ï¼Œå¦‚æœ‰æœºä¼šä¸€å®šå°è¯•ã€‚\n\nDMV é¡¹ç›®æµé‡å¹³å¹³ï¼Œå› ä¸ºæœ‰ Domain ç±»é¡¹ç›®çš„å·¥ä½œï¼ŒDMV çš„ç»´æŠ¤å°±æš‚æ—¶æ”¾ç½®äº†ï¼Œè¿˜æ˜¯å¿ƒæœ‰ä¸èˆçš„ã€‚æœŸé—´å’Œ John èŠè¿‡ä¸€æ¬¡å…³äºäº§å“çš„äº‹åŸºæœ¬æ€»ç»“ä¸ºï¼š\n\n- äº§å“é¡¹ç›®æ˜¯ä¼šæœ‰å¤±è´¥çš„ï¼Œæœ‰æµé‡çš„é¡¹ç›®æ‰æœ‰ç»´æŠ¤çš„æ„ä¹‰ã€‚\n- å¤§å‹é¡¹ç›®åªæœ‰æˆåŠŸä¸å¤±è´¥ä¹‹åˆ†ï¼Œæ²¡æœ‰ä¸­é—´é¡¹ï¼Œå¤±è´¥å°†ä»£ä»·å¾ˆå¤§ã€‚\n- ä¸ä¸€å®šè¦ç•™ä½ç”¨æˆ·ã€‚\n- æ›´å°çš„æˆæœ¬æ›´é«˜çš„æµé‡ï¼Œé«˜æµé‡åå°±å¯ä»¥åšå¾ˆå¤šçš„äº‹ã€‚\n\nï¼ˆäºŒï¼‰\n\nDomain ä¿¡æ¯ç±»é¡¹ç›®ï¼Œä½¿ç”¨çš„æ¶æ„å’Œ DMV ä¸€è‡´ï¼Œé€»è¾‘æ›´åŠ ç®€å•ã€‚è‡ªå·±ä¸»è¦åšäº†æ•°æ®æ•´ç†ï¼Œæ”¶è·æ˜¯å…³äº SQL å‘½ä»¤ã€‚SQL å°±å¯ä»¥ç›´æ¥å¤„ç†å¾ˆå¤šçš„äº‹æƒ…ã€‚ä½¿ç”¨äº† RMI åšæ•°æ®åŒæ­¥ï¼Œç”¨åå°„å†™äº†ä¸€æ®µç¨‹åºï¼Œæ˜¯ä¸€æ¬¡æœ‰çªç ´çš„å°è¯•ã€‚\nä¸€æ¬¡çœ‹åˆ°è‡ªå·±å¹´åˆçš„ç®€å†ï¼Œç¬‘äº†ã€‚è‡ªå·±æ˜¯çœŸæ•¢å†™ï¼Œèƒ½å†™ä¸ª Hello World å°±æ•¢æ ‡æˆäº†è§£ã€‚ä»ä¼šç”¨åˆ°åŸç†ï¼Œæ˜¯æ¥ä¸‹è¦èµ°çš„è·¯ã€‚\n\nï¼ˆä¸‰ï¼‰\n\næœ€è¿‘åœ¨çœ‹è®¾è®¡æ¨¡å¼å’Œç®—æ³•çš„ä¹¦ï¼Œä¸€ç›´åœ¨åš LeetCode çš„é¢˜ã€‚è®¾è®¡æ¨¡å¼æ²¡ç”¨è¿‡ï¼Œé€®åˆ°èƒ½ç”¨æœºä¼šç»ä¸é”™è¿‡ã€‚ç®—æ³•å¥è„‘ï¼Œåˆšåˆšå¼€å§‹æ¥è§¦è§‰çš„æŒºæœ‰æ„æ€ï¼Œå¯¹æ•°æ®ç»“æ„ä¹Ÿæ˜¯ç§äº†è§£ã€‚\n\nï¼ˆå››ï¼‰\n\nå†æ¬¡å‚åŠ èˆå‹çš„å©šç¤¼ï¼Œåˆä¸ªç»“å©šäº†ã€‚å¤§ä¸€å¥¶äº†ä¸€å£ï¼Œç°åœ¨æˆçœŸã€‚ç¥ç¦ Lu&Feifeiã€‚\n\nï¼ˆäº”ï¼‰\n\n> æ¥è¯´è¯´ç¨‹åºå‘˜é‚£æ— å¤„å®‰æ”¾çš„åˆ›é€ åŠ›\n>\n> æœ‰äº†é”¤å­æƒ³æ‰¾é’‰å­æ˜¯å¾ˆæ­£å¸¸çš„åŸå§‹å†²åŠ¨ï¼Œä½†æˆ‘ä»¬å¿…é¡»è®¤è¯†åˆ°ï¼Œåˆ›é€ åŠ›å¯¹äºç¨‹åºå‘˜è¿™ä¸ªèŒä¸šæ¥è®²ï¼Œæ˜¯é”¦ä¸Šæ·»èŠ±çš„ä¸œè¥¿ã€‚å¦‚æœä½ æ²¡æœ‰å¼ºå¤§çš„å·¥ç¨‹èƒ½åŠ›ï¼Œé‚£ä¹ˆåˆ›é€ åŠ›ä¹Ÿä¸è¿‡æ˜¯æ— æœ¬ä¹‹æœ¨ã€‚æ‰€ä»¥æ‰æ‰å®å®çš„æŠŠå·¥ç¨‹åŸºç¡€æ‰“å¥½ï¼Œè¿™æ˜¯æœ€æ ¹æœ¬çš„ã€‚\n>\n> åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘æ¯”è¾ƒæ¨èç¨‹åºå‘˜é‡‡ç”¨å†…å¤–ä¸¤æ¡çº¿æ¥åŸ¹å…»è‡ªå·±ã€‚åœ¨å…¬å¸å†…çš„é¡¹ç›®ä¸Šé‡‡å–ç›¸å¯¹ä¿å®ˆçš„ç­–ç•¥ï¼Œå°½åŠ›æŠŠç¨³å®šæ€§åšåˆ°æœ€å¥½ï¼ŒåŸ¹å…»å‡ºè‡ªå·±å“è¶Šçš„å·¥ç¨‹èƒ½åŠ›ï¼›ç„¶ååœ¨å…¬å¸å¤–çš„å¼€æºé¡¹ç›®å’Œè‡ªå·±çš„ç‹¬ç«‹é¡¹ç›®ä¸Šï¼Œé‡‡ç”¨ä¸€äº›æ–°çš„æŠ€æœ¯ã€å®è·µä¸€äº›æ–°çš„æƒ³æ³•ã€å……åˆ†å‘æŒ¥è‡ªå·±çš„åˆ›é€ åŠ›ï¼Œæ¢¦æƒ³è¿˜æ˜¯è¦æœ‰çš„ï¼Œå¯¹å§ã€‚\n>\n> è¿™æ ·åšæœ€æ˜æ˜¾çš„å¥½å¤„æ˜¯ï¼Œä½ å¯ä»¥äº†è§£åˆ°æ–°æŠ€æœ¯å’Œæ¿€è¿›æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼Œä»è€Œåœ¨è¿›è¡Œæ–¹æ¡ˆé€‰å‹æ—¶ï¼Œæœ‰æ›´å¤šçš„ä¾æ®ï¼›è¿˜æœ‰ä¸€ä¸ªèŒä¸šå‘å±•ä¸Šçš„å¥½å¤„ï¼šå¦‚æœä¸æ˜¯ä¸»è´Ÿè´£äººï¼Œå…¬å¸çš„é¡¹ç›®å¾€å¾€ä¸èƒ½ä»£è¡¨ä½ çš„èƒ½åŠ›ï¼›ä½†ç‹¬ç«‹é¡¹ç›®å´å¯ä»¥ä½œä¸ºä¸€ä¸ªéå¸¸å¥½çš„èƒ½åŠ›è¯æ˜å‡ºç°åœ¨ä½ çš„ç®€å†é‡Œè¾¹ã€‚\n>\n> ä½ å¯ä»¥æ˜¯ä¸€ä¸ªèº«æ€€ç»æŠ€çš„æ‰‹è‰ºäººï¼Œåœ¨è‡ªå·±å®¶é‡Œä½ å°è¯•å„ç§æ‰‹æ³•å„ç§é£æ ¼çš„ä¸ªäººä½œå“ï¼›ä½†å½“ä½ å‚ä¸é¢å’Œå›­è¿™ç§çº§åˆ«çš„å·¥ç¨‹æ—¶ï¼Œå¥½å¥½çš„æŠŠè‡ªå·±è´Ÿè´£çš„çŸ³å¤´é›•æˆæ€»è®¾è®¡å¸ˆè¦æ±‚çš„æ ·å­å°±å¥½ â€”â€” æ¯•ç«Ÿè¿™ä¸ªæ—¶ä»£ä¸€ä¸ªäººå·²ç»å¾ˆéš¾è´Ÿè´£æ•´ä¸ªé¡¹ç›®äº†ã€‚è¿™å°±æ˜¯æˆ‘æ‰€ç†è§£çš„ç¨‹åºå‘˜çš„å·¥åŒ ç²¾ç¥ã€‚\n>\n> æ‘˜è‡ªï¼š[ç¨‹åºå‘˜åˆ°åº•æ˜¯ä¸€ä¸ªä»€ä¹ˆèŒä¸šï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MzI5OTI5Njg2Mg==&mid=2247483667&idx=1&sn=d6e5953c7a7835148e3822b919b82416#rd)\n\nï¼ˆå°¾ï¼‰\n\nç°åœ¨è‡ªå·±èƒ½å¬è§è¿›å»ä¸€äº›åŸæ¥å¬ä¸å»çš„è¯äº†ã€‚æˆ‘ä¸è®¤ä¸ºè‡ªå·±æ˜¯è¢«åŒåŒ–äº†ï¼Œä¹Ÿè®¸æ˜¯å¿ƒä¸­å°‘äº†äº›æ¶æ„ã€‚\n\nçŠ¶æ€ä¸é”™ï¼Œç»§ç»­å‰è¿›ã€‚\n\n-- EOF --\n","tags":["report"],"categories":["report"]},{"title":"LeetCode Number of 1 Bits 191","url":"/2016/08/31/leetcode-number-of-1-bits-191/","content":"\n[191. Number of 1 Bits](https://leetcode.com/problems/number-of-1-bits/)\n&emsp;&emsp;Write a function that takes an unsigned integer and returns the number of â€™1' bits it has (also known as the Hamming weight).\n&emsp;&emsp;For example, the 32-bit integer â€™11' has binary representation `00000000000000000000000000001011`, so the function should return 3.\n<!-- more -->\n\n---\n\n### å¤§ä½“æ„æ€\nå†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œè¿”å›å…¶ä¸­å€¼ä¸º1çš„æ¯”ç‰¹ä½çš„ä¸ªæ•°ï¼ˆè¿™ä¸ªå€¼ä¹Ÿè¢«ç§°ä¸ºæ•°å­—æ±‰æ˜é‡é‡ï¼‰\n\n### è‡ªå·±çš„æ€è·¯\nå¾ªç¯åˆ¤æ–­æœ€åä¸€ä½æ˜¯å¦æ˜¯ `1`\n\n``` java\npublic int hammingWeight(int n) {\n\tint result = 0;\n\twhile (n != 0) {\n\t\tif ((n & 1) == 1) {\n\t\t\tresult++;\n\t\t}\n\t\tn = n >> 1;\n\t}\n\treturn result;\n}\n```\nåœ¨ Submit Solution\n\n```\nSubmission Result: Time Limit Exceeded\nLast executed input: 2147483648 (10000000000000000000000000000000)\n```\n\n### åˆ«äººçš„ç®—æ³•\n\n2147483648 è¾“å…¥è¶…è¿‡äº†Javaè¯­è¨€ä¸­æ•´å‹çš„ä¸Šé™\n\nåŸæ¥é—®é¢˜å°±å‡ºåœ¨è¾“å…¥å¯èƒ½æ˜¯æ— ç¬¦å·æ•°å­—ä¸Šï¼å½“è¾“å…¥ä¸º 2147483648 æ—¶ï¼ŒJava ä¼šå°†è¿™ä¸ªæ•°å­—åˆ¤æ–­ä½ -1ï¼Œè€Œå³ç§»ç¬¦å· >> åœ¨è®¡ç®—æ—¶ä¼šä¿æŒæ•°å­—çš„ç¬¦å·ä½ï¼Œå³æ­£æ•°å³ç§»é«˜ä½è¡¥ 0ï¼Œè´Ÿæ•°å³ç§»é«˜ä½è¡¥ 1ã€‚ä½¿ç”¨è¿™ç§è§„åˆ™è¿›è¡Œå³ç§»ï¼Œä¼šå¯¼è‡´æ•°å­—åœ¨å³ç§»è¿‡ç¨‹ä¸­è¢«ä¸æ–­è¡¥ 1ï¼Œè¿™æ ·å¾ªç¯æ°¸è¿œæ— æ³•åœæ­¢ï¼å› æ­¤ï¼Œå¦‚æœè¾“å…¥ä¸ºè´Ÿæ•°ï¼Œä¹Ÿåº”è¯¥ä¿æŒå³ç§»æ—¶é«˜ä½è¡¥ 0ï¼Œä½è¿ç®—ç¬¦ >>> å¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n```java\npublic int hammingWeight(int n) {\n\n\tint counter = 0;\n\twhile (n != 0)\n\t{\n\t    if (n % 2 != 0) {\n\t\tcounter++;\n\t    }\n\t    n = n >>> 1;\n\t}\n\treturn counter;\n}\n```\n\n1. `>>` æ˜¯å¸¦ç¬¦å·å³ç§»ï¼Œè´Ÿæ•°é«˜ä½è¡¥ 1ï¼Œæ­£æ•°è¡¥ 0\n2. `<<` å·¦ç§»ä¸ç®¡è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ï¼Œåœ¨ä½ä½æ°¸è¿œè¡¥ 0\n3. `>>>` æ˜¯ä¸å¸¦ç¬¦å·å³ç§»ï¼Œä¸è®ºè´Ÿæ•°è¿˜æ˜¯æ­£æ•°ï¼Œé«˜ä½è¡¥ 0\n\n> å¼•ç”¨ï¼š[LeetCodeï¼šNumber of 1 Bits-æ•´æ•°çš„æ±‰æ˜é‡é‡-Tsybius2014](http://my.oschina.net/Tsybius2014/blog/491381)\n\n\n### åˆ«äººçš„ç®—æ³• 2\n\n- èµ„æ–™ï¼š[Int å‹æ•°å€¼å­˜å‚¨](http://www.cnblogs.com/xinsheng/p/3419202.html)\n- èµ„æ–™ï¼š[åŸç , åç , è¡¥ç ](http://www.cnblogs.com/zhangziqiu/archive/2011/03/30/ComputerCode.html)\n\nè¡¥ç ï¼šæ­£æ•°ä¸ºå…¶æœ¬èº«ï¼Œè´Ÿæ•°ä¸ºå–ååŠ ä¸€\n\n```java\n// you need to treat n as an unsigned value\npublic int hammingWeight(int n) {\n\tlong l = Integer.toUnsignedLong(n);\n\tint count = 0;\n\tfor (; l != 0; l = l >> 1) {\n\t    if ((l & 1) == 1) count ++;\n\t}\n\treturn count;\n}\n```\n\næ‰€ä»¥åœ¨ Java ä¸­éœ€è¦å°† `int` è½¬æ¢ä¸º `unsigned int` çš„æ—¶å€™ï¼Œå¯ä»¥å°† `int` è½¬æ¢åˆ°å®¹é‡æ›´å¤§çš„ `long` ä¸­å°±è¡Œäº†ï¼Œç›´æ¥ `((long) x) & 0xffffffffL` æˆ–è€…ä½¿ç”¨å‡½æ•° `Integer.toUnsignedLong()`ã€‚\n\n> å¼•ç”¨ï¼š[nekocode/leetcode-solutions-191. Number of 1 Bits](https://github.com/nekocode/leetcode-solutions/blob/master/solutions/191.%20Number%20of%201%20Bits.md)\n\n","tags":["leetcode"]},{"title":"LeetCode  Happy Number 202","url":"/2016/08/29/leetcode-happy-number-202/","content":"\n[202. Happy Number](https://leetcode.com/problems/happy-number/)\n&emsp;&emsp;Write an algorithm to determine if a number is \"happy\".\n&emsp;&emsp;A happy number is a number defined by the following process: Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers.\n<!-- more -->\n&emsp;&emsp;**Example**: 19 is a happy number\n```\n1^2 + 9^2 = 82\n8^2 + 2^2 = 68\n6^2 + 8^2 = 100\n1^2 + 0^2 + 0^2 = 1\n```\n\n---\n\n### å¤§ä½“æ„æ€\né¢˜ç›®è¯´çš„æ˜¯å–ä»»æ„ä¸€ä¸ªæ­£æ•´æ•°ï¼Œä¸æ–­å„ä¸ªæ•°ä½ä¸Šæ•°å­—çš„å¹³æ–¹å’Œï¼Œè‹¥æœ€ç»ˆæ”¶æ•›ä¸º1ï¼Œåˆ™è¯¥æ•°å­—ä¸º`happy number`ï¼Œå¦åˆ™ç¨‹åºå¯èƒ½ä»æŸä¸ªæ•°å¼€å§‹é™·å…¥å¾ªç¯ã€‚\n\n### è‡ªå·±çš„æ€è·¯\nå…³é”®ï¼šé€šè¿‡ `/` å’Œ `%` å– int å„ä¸ªä½çš„æ•°å­—ï¼›ç”¨ `set` åˆ¤é‡å¤\n\n``` java\npublic static boolean isHappy(int n) {\n    Set<Integer> result = new HashSet<>();\n    int newN = 0;\n    do {\n        do {\n          int end = n % 10;\n          n = n / 10;\n          newN += Math.pow(end, 2);\n        } while (n != 0);\n\n        n = newN;\n        newN = 0;\n        if (result.contains(n)) {\n          return false;\n        } else {\n          if (n == 1) {\n            return true;\n          } else {\n            result.add(n);\n          }\n        }\n    } while (true);\n}\n```\n\nå¥—è·¯ï¼šå–å„ä¸ªä½æ•°å­—\n``` java\ndo {\n  int end = n % 10;\n  n = n / 10;\n} while (n != 0);\n```\n","tags":["leetcode"]},{"title":"LeetCode Roman to Integer 13","url":"/2016/08/25/leetcode-roman-to-integer-13/","content":"[13. Roman to Integer](https://leetcode.com/problems/roman-to-integer/)\n&emsp;&emsp;Given a roman numeral, convert it to an integer.\n&emsp;&emsp;Input is guaranteed to be within the range from 1 to 3999.\n<!-- more -->\n\n> [wikipedia-ç½—é©¬æ•°å­—](https://zh.wikipedia.org/wiki/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97)\n\nç½—é©¬æ•°å­—å…±æœ‰7ä¸ªï¼Œå³Iï¼ˆ1ï¼‰ã€Vï¼ˆ5ï¼‰ã€Xï¼ˆ10ï¼‰ã€Lï¼ˆ50ï¼‰ã€Cï¼ˆ100ï¼‰ã€Dï¼ˆ500ï¼‰å’ŒMï¼ˆ1000ï¼‰ã€‚æŒ‰ç…§ä¸‹è¿°çš„è§„åˆ™å¯ä»¥è¡¨ç¤ºä»»æ„æ­£æ•´æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ç½—é©¬æ•°å­—ä¸­æ²¡æœ‰â€œ0â€ï¼Œä¸è¿›ä½åˆ¶æ— å…³ã€‚ä¸€èˆ¬è®¤ä¸ºç½—é©¬æ•°å­—åªç”¨æ¥è®°æ•°ï¼Œè€Œä¸ä½œæ¼”ç®—ã€‚\n\né‡å¤æ•°æ¬¡ï¼šä¸€ä¸ªç½—é©¬æ•°å­—é‡å¤å‡ æ¬¡ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªæ•°çš„å‡ å€ã€‚\n\nå³åŠ å·¦å‡ï¼š\n- åœ¨è¾ƒå¤§çš„ç½—é©¬æ•°å­—çš„å³è¾¹è®°ä¸Šè¾ƒå°çš„ç½—é©¬æ•°å­—ï¼Œè¡¨ç¤ºå¤§æ•°å­—åŠ å°æ•°å­—ã€‚\n- åœ¨è¾ƒå¤§çš„ç½—é©¬æ•°å­—çš„å·¦è¾¹è®°ä¸Šè¾ƒå°çš„ç½—é©¬æ•°å­—ï¼Œè¡¨ç¤ºå¤§æ•°å­—å‡å°æ•°å­—ã€‚\n- å·¦å‡çš„æ•°å­—æœ‰é™åˆ¶ï¼Œä»…é™äºIã€Xã€Cã€‚æ¯”å¦‚45ä¸å¯ä»¥å†™æˆVLï¼Œåªèƒ½æ˜¯XLV\n- ä½†æ˜¯ï¼Œå·¦å‡æ—¶ä¸å¯è·¨è¶Šä¸€ä¸ªä½å€¼ã€‚æ¯”å¦‚ï¼Œ99ä¸å¯ä»¥ç”¨ICï¼ˆ100-1ï¼‰è¡¨ç¤ºï¼Œè€Œæ˜¯ç”¨XCIXï¼ˆ[100-10]+[10-1]ï¼‰è¡¨ç¤ºã€‚ï¼ˆç­‰åŒäºé˜¿æ‹‰ä¼¯æ•°å­—æ¯ä½æ•°å­—åˆ†åˆ«è¡¨ç¤ºã€‚ï¼‰\n- å·¦å‡æ•°å­—å¿…é¡»ä¸ºä¸€ä½ï¼Œæ¯”å¦‚8å†™æˆVIIIï¼Œè€ŒéIIXã€‚\n- å³åŠ æ•°å­—ä¸å¯è¿ç»­è¶…è¿‡ä¸‰ä½ï¼Œæ¯”å¦‚14å†™æˆXIVï¼Œè€ŒéXIIIIã€‚ï¼ˆè§ä¸‹æ–¹â€œæ•°ç é™åˆ¶â€ä¸€é¡¹ã€‚ï¼‰\n\nåŠ çº¿ä¹˜åƒï¼š\n- åœ¨ç½—é©¬æ•°å­—çš„ä¸Šæ–¹åŠ ä¸Šä¸€æ¡æ¨ªçº¿æˆ–è€…åŠ ä¸Šä¸‹æ ‡çš„â…¯ï¼Œè¡¨ç¤ºå°†è¿™ä¸ªæ•°ä¹˜ä»¥1000ï¼Œå³æ˜¯åŸæ•°çš„1000å€ã€‚\n- åŒç†ï¼Œå¦‚æœä¸Šæ–¹æœ‰ä¸¤æ¡æ¨ªçº¿ï¼Œå³æ˜¯åŸæ•°çš„1000000ï¼ˆ1000^{{2}}ï¼‰å€ã€‚\n\næ•°ç é™åˆ¶ï¼š\n- åŒä¸€æ•°ç æœ€å¤šåªèƒ½è¿ç»­å‡ºç°ä¸‰æ¬¡ï¼Œå¦‚40ä¸å¯è¡¨ç¤ºä¸ºXXXXï¼Œè€Œè¦è¡¨ç¤ºä¸ºXLã€‚\n- ä¾‹å¤–ï¼šç”±äºIVæ˜¯å¤ç½—é©¬ç¥è¯ä¸»ç¥æœ±åº‡ç‰¹ï¼ˆå³IVPITERï¼Œå¤ç½—é©¬å­—æ¯é‡Œæ²¡æœ‰Jå’ŒUï¼‰çš„é¦–å­—ï¼Œå› æ­¤æœ‰æ—¶ç”¨IIIIä»£æ›¿IVã€‚\n\n### è‡ªå·±çš„è§£æ³•\nåšä¸€ä¸ªæ•°ç»„å¯¹ç…§çš„å­—å…¸ï¼Œéµå®ˆæ­¤æ¡è§„å®šï¼šåœ¨è¾ƒå¤§çš„ç½—é©¬æ•°å­—çš„å·¦è¾¹è®°ä¸Šè¾ƒå°çš„ç½—é©¬æ•°å­—ï¼Œè¡¨ç¤ºå¤§æ•°å­—å‡å°æ•°å­—ã€‚\n\n``` java\npublic int romanToInt(String s) {\n\t\tchar[] chr = s.toCharArray();\n\t\tMap<String, Integer> map = new HashMap<>();\n\t\tmap.put(\"I\", 1);\n\t\tmap.put(\"V\", 5);\n\t\tmap.put(\"X\", 10);\n\t\tmap.put(\"L\", 50);\n\t\tmap.put(\"C\", 100);\n\t\tmap.put(\"D\", 500);\n\t\tmap.put(\"M\", 1000);\n\t\tint result = 0;\n\t\tfor (int i = 0; i < chr.length - 1; i++) {\n\t\t\tint nowInt = map.get(String.valueOf(chr[i]));\n\t\t\tint nextInt = map.get(String.valueOf(chr[i + 1]));\n\t\t\tif (nowInt < nextInt) {\n\t\t\t\tresult -= nowInt;\n\t\t\t} else {\n\t\t\t\tresult += nowInt;\n\t\t\t}\n\t\t}\n\t\tresult += map.get(String.valueOf(chr[chr.length - 1]));\n\t\treturn result;\n}\n```\n","tags":["leetcode"]},{"title":"LeetCode Majority Element 169","url":"/2016/08/24/leetcode-majority-element-169/","content":"[169. Majority Element](https://leetcode.com/problems/majority-element/)\n&emsp;&emsp;Given an array of size n, find the majority element. The majority element is the element that appears more than [ n/2 ] times.\n&emsp;&emsp;You may assume that the array is non-empty and the majority element always exist in the array.\n<!-- more -->\n### é¢˜ç›®å¤§æ„\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾è¿™ä¸ªæ•°ç»„ä¸­çš„ä¸»å…ƒç´ ï¼Œä¸»å…ƒç´ æ˜¯å…ƒç´ å‡ºç°æ¬¡æ•°å¤§äºâŒŠ n/2 âŒ‹çš„å…ƒç´ ã€‚\nå‡è®¾ç»™å®šçš„æ•°ç»„éç©ºï¼Œä¸»å…ƒç´ éƒ½å­˜åœ¨ã€‚\n\n### è‡ªå·±çš„è§£æ³•\nå°†æ•°ç»„è¿›è¡Œæ’åºï¼Œæ ¹æ®é¢˜æ„ï¼Œé‚£ä¹ˆä¸­é—´çš„è¿™ä¸ªæ•°å°±æ˜¯ majority element\n\n``` java\npublic int majorityElement(int[] nums) {\n\t\tArrays.sort(nums);\n\t\treturn nums[nums.length / 2];\n}\n```\n\n### åˆ«äººçš„è§£æ³•\n\n[ã€LeetCode-é¢è¯•ç®—æ³•ç»å…¸-Javaå®ç°ã€‘ã€169-Majority Elementï¼ˆä¸»å…ƒç´ ï¼‰ã€‘ ](http://blog.csdn.net/DERRANTCM/article/details/47902549)\n\n&emsp;&emsp;ç”¨ä¸€ä¸ªæ ‡è®° cnt è®°å½•æŸä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœåé¢çš„å…ƒç´ å’Œå®ƒç›¸åŒå°±åŠ ä¸€ï¼Œæœ‰ä¸€ä¸ªå…ƒç´ å’Œä»–ä¸ç›¸åŒå°±å‡ä¸€ï¼Œå½“ cnt å°äºç­‰äº0æ—¶é‡æ–°è®°å½•æ–°çš„å…ƒç´ ã€‚\n\n``` java\npublic int majorityElement(int[] nums) {\n\t\tint main = nums[0]; // ç”¨äºè®°å½•ä¸»å…ƒç´ ï¼Œå‡è®¾ç¬¬ä¸€ä¸ªæ˜¯ä¸»å…ƒç´ \n\t\tint count = 1; // ç”¨äºæŠµæ¶ˆæ•°çš„ä¸ªæ•°\n\t\tfor (int i = 1; i < nums.length; i++) { // ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹åˆ°æœ€åä¸€ä¸ªå…ƒç´ \n\t\t\tif (main == nums[i]) { // å¦‚æœä¸¤ä¸ªæ•°ç›¸åŒå°±ä¸èƒ½æŠµæ¶ˆ\n\t\t\t\tcount++; // ç”¨äºæŠµæ¶ˆçš„æ•°æ®åŠ 1\n\t\t\t} else {\n\t\t\t\tif (count > 0) { // å¦‚æœä¸ç›¸åŒï¼Œå¹¶ä¸”æœ‰å¯ä»¥æŠµæ¶ˆçš„æ•°\n\t\t\t\t\tcount--; // è¿›è¡Œæ•°æ®æŠµæ¶ˆ\n\t\t\t\t} else { // å¦‚æœä¸ç›¸åŒï¼Œå¹¶ä¸”æ²¡æœ‰å¯ä»¥æŠµæ¶ˆçš„æ•°\n\t\t\t\t\tmain = nums[i]; // è®°å½•æœ€åä¸å¯ä»¥æŠµæ¶ˆçš„æ•°\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// å¯¹äºæ•°ç»„ä¸­å¯èƒ½æ²¡æœ‰ä¸»å…ƒç´ çš„æƒ…å†µï¼Œé¢˜ä¸­è¯´æ˜å­˜åœ¨ï¼Œæ­¤æ­¥å¯ä»¥çœç•¥ã€‚\n\t\t// count = 0;\n\t\t// for (int a : nums) {\n\t\t// if (a == main) {\n\t\t// count++;\n\t\t// }\n\t\t// }\n\t\t// if (count >= nums.length / 2) {\n\t\t// return main;\n\t\t// } else {\n\t\t// throw new RuntimeException(\"No majority element\");\n\t\t// }\n\t\treturn main;\n}\n```\n","tags":["leetcode"]},{"title":"LeetCode First Unique Character in a String 387","url":"/2016/08/23/leetcode-first-unique-character-in-a-string-387/","content":"[387. First Unique Character in a String](https://leetcode.com/problems/first-unique-character-in-a-string/)\n&emsp;&emsp;Given a string, find the first non-repeating character in it and return it's index. If it doesn't exist, return -1.\n&emsp;&emsp;**Examples:**\n```\ns = \"leetcode\"\nreturn 0.\n\ns = \"loveleetcode\",\nreturn 2.\n```\n<!-- more -->\n&emsp;&emsp;**Note:**\n&emsp;&emsp;You may assume the string contain only lowercase letters.\n\n### è‡ªå·±çš„è§£æ³•\nå¼€å§‹è§‰çš„éå† char[] ç„¶ååˆ¤æ–­åœ¨ String çš„é¦–ä½ç½®å’Œæœ«ä½ç½®ï¼Œè‹¥ä¸€æ ·å°±è¿”å›ç´¢å¼•ã€‚å‘ƒï¼Œæ„Ÿè§‰æœ‰ç‚¹å·é¸¡\n\n``` java\npublic int firstUniqChar(String s) {\n  for (int i = 0; i < s.length(); i++) {\n    if (s.indexOf(s.charAt(i)) == s.lastIndexOf(s.charAt(i))) {\n      return i;\n    }\n  }\n  return -1;\n}\n```\n\næŸ¥äº†ä¸‹åˆ«äººçš„ï¼Œåˆæ˜¯ `new int[26]`\n\n``` java\npublic int firstUniqChar(String s) {\n  int[] count = new int[26];\n  for (int i = 0; i < s.length(); i++) {\n    count[s.charAt(i) - 'a']++;\n  }\n  for (int i = 0; i < s.length(); i++) {\n    if (count[s.charAt(i) - 'a'] == 1) {\n      return i;\n    }\n  }\n  return -1;\n}\n```\n\nä½†æ˜¯åœ¨è¿è¡Œæ—¶é—´ä¸Šï¼Œä¸‹é¢çš„æ–¹æ³•æ›´å¿«\n","tags":["leetcode"]},{"title":"LeetCode Maximum Depth of Binary Tree 104","url":"/2016/08/23/leetcode-maximum-depth-of-binary-tree-104/","content":"[104. Maximum Depth of Binary Tree](https://leetcode.com/problems/maximum-depth-of-binary-tree/)\n&emsp;&emsp;Given a binary tree, find its maximum depth.\n&emsp;&emsp;The maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node.\n<!-- more -->\n\n### è‡ªå·±çš„è§£æ³•\n\nè‡ªå·±æƒ³åˆ°åº”è¯¥ç”¨é€’å½’ã€ä¸ºç©ºçš„è¿”å› 0ï¼Œä¸ä¸ºç©ºçš„è¿”å› 1ï¼Œé€’å½’ç´¯åŠ ï¼›ä½†æ˜¯æœ‰ä¸¤ä¸ªç‚¹è¿™ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿå…¶å®å¾ˆå®¹æ˜“å–ä¸¤æ•°å­—çš„ MAX\n\n``` java\npublic int maxDepth(TreeNode root) {\n     if (root == null) {\n        return 0;\n    }\n    return 1 + Math.max(maxDepth(root.left), maxDepth(root.right));\n}\n```\n\nå‚è€ƒï¼š\n[104 Maximum Depth of Binary Tree | Data Structure and algorithm analysis](https://jingjingshao.gitbooks.io/data-structure-and-algorithm-analysis/content/Tree/104_maximum_depth_of_binary_tree.html)\n","tags":["leetcode"]},{"title":"è¯»ã€æ­¤ç”Ÿä¸ºå®Œæˆã€‘éšç¬”","url":"/2016/08/22/being-alive-is-a-gift-reading-notes/","content":"\n> æˆ‘ä»¬è¦ç”¨å¤šå¤§çš„ä»£ä»·ï¼Œæ‰èƒ½è®¤æ¸…æ´»ç€çš„æ„ä¹‰ï¼Ÿ\n> äºå¨Ÿï¼Œè¿™ä¸ªé£åæ­£èŒ‚çš„å¥³å­ï¼Œæ‹¥æœ‰ç•™æ´‹ç»å†å’Œåšå£«å­¦ä½çš„å¤æ—¦å¤§å­¦é’å¹´æ•™å¸ˆï¼Œåœ¨ä¸æ™šæœŸç™Œç—‡æŠ—äº‰ä¸€å¹´åˆå››ä¸ªæœˆåï¼Œç»ˆäºæ’’æ‰‹äººå¯°ã€‚å¥¹å¸¦èµ°çš„å®¶äººçš„æ€å¿µå’Œä¸èˆï¼Œç»™æˆ‘ä»¬ç•™ä¸‹åšå¼ºçš„åŠ›é‡ã€‚\n\nã€Šæ­¤ç”Ÿæœªå®Œæˆã€‹è¿™æœ¬ä¹¦æ˜¯ä¸Šå‘¨æœ«èšä¼šæ—¶ Zhen æåˆ°çš„ï¼Œä¸Šå‘¨äº¬ä¸œä¹°ä¹¦å°±å¸¦ä¸Šäº†ã€‚ä¹¦é‡Œå‰åŠæ¢è®¨ä½œè€…åœ¨ç”Ÿæ­»ä¸´ç•Œæ—¶å¯¹ç”Ÿæ´»ã€å·¥ä½œã€ååˆ©ã€å®¶äººã€æœ‹å‹çš„ä¸€äº›çœ‹æ³•å’Œæ€è€ƒã€‚è¿™å¯¹äºåˆšåˆšæ¯•ä¸šçš„æˆ‘æ¥è¯´ï¼Œç¡®å®æœ‰äº›æ˜¯æ— æ³•çœŸåˆ‡ä½“ä¼šåˆ°çš„ï¼Œæ¯•ç«Ÿç»å†å°‘ã€‚ä½†æ˜¯åœ¨ä¹¦çš„å­—é‡Œè¡Œé—´ä¸­ï¼Œä»ç„¶å¯ä»¥çœ‹åˆ°ä¸€ä¸ªï¼ˆä¸çŸ¥é“ç”¨ä»€ä¹ˆè¯ï¼‰çš„å¥³å­ã€‚\n\n<!-- more -->\n\n## ï¼ˆä¸€ï¼‰\n\nç–¾ç—…èƒ½è®©äººæœ‰æ€æ ·çš„ç–¼ç—›ï¼Ÿ\n\n> æˆ‘è¿˜æ˜¯æ²¡æœ‰å“­ï¼Œä¸æ˜¯å› ä¸ºåšå¼ºï¼Œè€Œæ˜¯å› ä¸ºç—›çš„æƒ³ä¸èµ·æ¥å“­ï¼Œé‚£ä¸ªæ—¶å€™ï¼Œåªè¦èƒ½ç”¨å°½å…¨åŠ›é¡¶ç€ã€‚å¦‚æœç¨å¾®åˆ†ç¥ï¼Œæˆ‘å°±ä¼šç—›çš„æ™•å¥ã€‚æˆ‘ä¸æƒ³å®¶äººçœ‹åˆ°æˆ‘çš„ç—›è‹¦ã€‚\n\nè¯´æ¥æƒ­æ„§çš„ä¸€ä¸ªå¯¹æ¯”ï¼Œè‡ªå·±åœ¨å–å¤šæ—¶æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼šè‡ªå·±æŠ±ç€åƒåœ¾æ¡¶ä½¿åŠ²é¡¶ç€ä¸€è‚¡åŠ²ï¼Œè¦æ˜¯æœ‰äººæ¥ç»™è‡ªå·±è¯´è¯ï¼Œå°±ä¼šåˆ†ç¥ä¼¼çš„ä½¿åŠ²çš„å‘•åã€‚å¯è¿™èš€éª¨ä¹‹ç—›è¦æ¯”è¿™ç–¼ç—›å¤šå°‘å€å‘¢ï¼Ÿ\n\n## ï¼ˆäºŒï¼‰\n\n> é‡è¦çš„æ˜¯å½“ä»–å¾—çŸ¥æˆ‘ç”Ÿç—…æ¶ˆæ¯åçš„ç¬¬ä¸€ååº”ï¼Œçœ¼ç¥è¡¨æƒ…ä¹ƒè‡³ç”µè¯è¯­æ°”ç½‘ç»œç•™è¨€é‡Œç«¯å€ªå°½å‡ºï¼Œä½ ä¼šè§‰å¾—ä¸–é—´å¾ˆå¤šäººæƒ…ä¸–æ•…æ˜¯é‚£ä¹ˆçš„è®©ä½ æ·¡ç„¶ä¸€ç¬‘ã€‚\n\nåœ¨é‡åˆ°å¤§äº‹çš„æ—¶å€™æ–¹æ˜¾å‡ºçœŸæ­£çš„æœ‹å‹å’Œæ‰€è°“çš„æœ‹å‹ï¼Œæ‰¬å°˜æ•£åœŸï¼Œæ´—æ²™ç•™é‡‘ã€‚èƒ½é‡åˆ°â€œå¤§äº‹â€çš„æœºä¼šä¸å¤šï¼Œé‡åˆ°çš„â€œå¤§äº‹â€è¿˜èƒ½å…¨èº«è€Œé€€çš„æœºä¼šå°±æ›´å°‘äº†ã€‚æ‰€ä»¥è§‰çš„è‡ªå·±åº”è¯¥åŠæ—¶å»æ˜è¾¨æ‰€æœ‰çš„æœ‹å‹ï¼Œå°†çœŸå¿ƒç»™æœ€çœŸçš„ï¼Œå¯¹äºå…¶ä»–çš„å°±éšä»–å»å§ã€‚æˆ‘ä¸å¯èƒ½è®¨æ‰€æœ‰äººå–œæ¬¢ï¼Œä¹Ÿç”¨ä¸ç€ã€‚\n\n## ï¼ˆä¸‰ï¼‰\n\n> ä¸‰åå²ä¹‹å‰çš„åŠªåŠ›æ›´å¤šæ˜¯å› ä¸ºè‡ªå·±æœ‰ç€å¤ªå¤šçš„æ¬²æœ›å’Œæ‰§è‘—ï¼Œä»æ²¡æœ‰â€œåªè¦æ´»ç€å°±å¥½â€çš„ç®€å•ã€‚ååˆ©æƒæƒ…ï¼Œæ²¡æœ‰ä¸€æ ·æ˜¯ä¸è¾›è‹¦çš„ï¼Œå´æ²¡æœ‰ä¸€æ ·å¯ä»¥å¸¦èµ°ã€‚\n\nè¿™æ˜¯ä¸€ä¸ªä½œè€…å¾ˆé‡è¦çš„ä¸€ä¸ªè§‚ç‚¹ã€‚åœ¨ç°åœ¨çš„æˆ‘çœ‹æ¥ï¼Œâ€œåªè¦æ´»ç€å°±å¥½â€çš„æ´»ç€ï¼Œæ˜¯ä¸€ç§ç²¾ç¥ä¸Šå¯Œæœ‰çš„æ´»ç€ï¼Œæ˜¯å……æ»¡æ™ºæ…§çš„æ´»ç€ã€‚\nå°±è¯´ç°åœ¨çš„è‡ªå·±ï¼Œä»€ä¹ˆéƒ½ä¸æ›¾æ‹¥æœ‰ï¼Œæˆ–è®¸ä¸ç”¨æ‹¥æœ‰è¿‡çš„åã€åˆ©ï¼Œä½†æ˜¯å…¶ä»–æ–¹é¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè‡ªå·±ä¸€åˆ‡éƒ½æ˜¯ç©ºçš„ï¼Œçœ‹åˆ°å¥½å°±ä¼šæœ‰å¼ºçƒˆçš„â€œæ¬²æœ›â€ï¼Œå¦‚æœå†å¼ºçƒˆä¸€ç‚¹å°±ä¼šæœ‰â€œæ‰§è‘—â€ã€‚åœ¨æ–‡å­—ä¸­æˆ‘æ„Ÿå—åˆ°äº†ä½œè€…åœ¨ç²¾ç¥æ–¹é¢çš„å¼ºå¤§ä¸å¯Œæœ‰ï¼Œæˆ–è®¸åœ¨è¿™ä¹‹åæ‰èƒ½æ„Ÿå—åˆ°åœ¨åã€åˆ©ä¹‹å¤–æ›´é‡è¦çš„ä¸œè¥¿ã€‚å…¶å®ï¼Œè‡ªå·±çœŸçš„å¾ˆéš¾æƒ³é€šï¼Œåˆ°åº•æ‹¥æœ‰ä»€ä¹ˆè‡ªå·±å°±å¯ä»¥â€œè‹Ÿâ€äº†ï¼Œè‡ªå·±åˆ°åº•æƒ³è¦ä»€ä¹ˆã€‚äº†è§£è‡ªå·±çœŸæ­£æƒ³è¦ä»€ä¹ˆçœŸæ˜¯ä¸€å¹¸äº‹ã€‚\nä½œè€…æåˆ°çš„æœ‰æ—¶é—´ï¼Œå¤šå¤šé™ªé™ªå®¶äººçˆ¶æ¯ã€æœ‰æœºä¼šå°±å°½å­ï¼Œè‡ªå·±æ˜¯å¾ˆèµåŒçš„ã€‚\n\n## ï¼ˆå››ï¼‰\n\n> å¤–å…¬åæ˜ åœŸè±†æ¯æ¬¡ç»è¿‡ï¼Œéƒ½è¶´åœ¨ç»ç’ƒä¸Šçœ‹ç»ç’ƒçª—é‡Œçš„åœ£è¯æ ‘ã€åœ£è¯å½©çƒå’Œå§œé¥¼å±‹ã€‚åœŸè±†çœ¼ç¥é‡Œæœ‰ç‚¹æƒ³ï¼Œä½†å´ä¹–ä¹–çœ‹ç€ï¼Œå¹¶ä¸è®¨ã€‚å¤–å…¬å›æƒ³è¯´ï¼šâ€œé‚£ä¸ªçœ¼ç¥æˆ‘æƒ³èµ·äº†å–ç«æŸ´çš„å°å¥³å­©ï¼Œæœ‰æ—¶å€™å­©å­å¬è¯ï¼Œä½ å´åè€Œä¼šå¿ƒé…¸ã€‚â€\n\nè¿™æ–‡å­—ç¢°è§¦å¿ƒçµæœ€æŸ”è½¯çš„åœ°æ–¹ã€‚\n\n## ï¼ˆäº”ï¼‰\n\n> ä½ çš„å¦ˆå¦ˆä¸æ˜¯æ‡¦å¤«ï¼Œæ‰€ä»¥ä½ çš„äººç”Ÿé‡Œï¼Œé‡åˆ°çè´µçš„äººä¸å…³é”®çš„äº‹ï¼Œéƒ½è¦ç§¯æäº‰å–ï¼Œå¯ä»¥å¤±è´¥ï¼Œä½†æ˜¯ä¸èƒ½æ”¾å¼ƒã€‚æˆ‘æƒ³åšä¸€ä¸ªè®©å„¿å­éª„å‚²çš„å¦ˆå¦ˆï¼Œåªæ­¤ä¸€ç‚¹ï¼Œæ— è®ºä»»ä½•åœ°æ­¥ï¼Œæˆ‘éƒ½ä¸ä¼šé€‰æ‹©è‡ªå·±èµ°ï¼Œå“ªæ€•ï¼Œä¸‡åŠ«ä¸å¤çš„ç—›ã€‚\n\n## ï¼ˆå…­ï¼‰\n\n> æ›´å¤šäººä¸ä¼šæ˜ç™½ï¼Œæˆ‘ä»¬ä¸¤ä¸ªçš„è°ˆç¬‘æ·±å¤„åŸ‹è—ç€å¤šå°‘ä¸èƒ½è¨€è¡¨çš„æ— å£°å¹æ¯ã€‚ä¸Šä¸€æ¬¡è§é¢ï¼Œæˆ‘å’Œæ¢…ä¸¤ä¸ªäº‹å¤šä¹ˆé£åæ­£èŒ‚ï¼Œåƒå±•ç¿…äº‘éœ„çš„é¹°éš¼ï¼ŒæŒ¥ç€ç¿…è†€ç›¸çº¦ä¸‹æ¬¡çš„å†²å¤©ã€‚è¿™æ¬¡çš„ç›¸é€¢ï¼Œæ˜¯ç°å¤´åœŸè„¸è¢«å‘½è¿æŒ‰åœ¨å°˜åœŸé‡Œä¾ç„¶å¾®ç¬‘çš„åœŸé¸¡ä¹‹é—´çš„é—®å€™ã€‚\n\n## ï¼ˆä¸ƒï¼‰\n\nâ€œä¸ºå•¥æ˜¯æˆ‘å¾—ç™Œç—‡â€ çš„éå­¦æœ¯æŠ¥å‘Šï¼Œæ˜¯ä¹¦çš„ç²¾åæ–‡ç« ã€‚ä»é¥®é£Ÿä¹ æƒ¯ã€ç¡çœ ä¹ æƒ¯ã€çªå‡»ä½œä¸šã€ç¯å¢ƒé—®é¢˜ï¼Œåˆ†æäº†å¯¹èº«ä½“ä¸åˆ©çš„å› ç´ ã€‚çªå‡»ä½œä¸šå…¶å®å°±æ˜¯å·¥ä½œä¹ æƒ¯ã€‚\n\nåœ¨é¥®é£Ÿä¸Šå¸¸åƒä¸å¯»å¸¸çš„åŠ¨ç‰©ã€æš´é¥®æš´é£Ÿã€å—œè¤å¦‚å‘½ã€‚\n\n> æˆ‘ä»¬è¦ç›¸ä¿¡èªæ˜çš„ç¥–å…ˆï¼Œå‡ åƒå¹´çš„æ™ºæ…§æ²‰æ·€ï¼Œæ‰æœ€ç»ˆé”å®šäº†æˆ‘ä»¬ç°åœ¨çš„é£Ÿæï¼Œå¹¶åœ¨è¿œå¤å¯¹ä»–ä»¬è¿›è¡Œè±¢å…»ã€‚å¦‚æœå­”é›€æ¯”é¸¡å¥½åƒï¼Œé‚£ä¹ˆç°åœ¨çš„å°±æ˜¯å­”é›€ï¼Œå­”é›€å°±æ˜¯é¸¡ã€‚\n\nåœ¨ç¡çœ ä¹ æƒ¯ä¸Šï¼š\n\n> äºŒåä¸‰æ—¶è‡³æ¬¡æ—¥ä¸‰æ—¶ï¼Œæ˜¯è‚è„æ´»åŠ¨èƒ½åŠ›æœ€å¼ºçš„æ—¶æ®µï¼Œä¹Ÿæ˜¯è‚è„æœ€ä½³çš„æ’æ¯’æ—¶æœŸï¼Œå¦‚æœè‚è„åŠŸèƒ½å¾—ä¸åˆ°ä¼‘æ¯ï¼Œä¼šå¼•èµ·è‚è„è¡€æµç›¸å¯¹ä¸è¶³ï¼Œå·²å—æŸçš„è‚ç»†èƒéš¾ä»¥ä¿®å¤å¹¶åŠ å‰§æ¶åŒ–ã€‚æ‰€ä»¥â€œé•¿æœŸç†¬å¤œç­‰äºæ…¢æ€§è‡ªæ€â€çš„è¯´æ³•å¹¶ä¸å¤¸å¼ ã€‚å› æ­¤åŒ»ç”Ÿå»ºè®®äººä»¬ä»äºŒåä¸‰æ—¶å·¦å³å¼€å§‹ä¸ŠåºŠç¡è§‰ï¼Œæ¬¡æ—¥ä¸€è‡³ä¸‰æ—¶è¿›å…¥æ·±ç¡çœ çŠ¶æ€ï¼Œå¥½å¥½åœ°å…»è¶³è‚è¡€ã€‚\n\nçªå‡»ä½œä¸šï¼š\n\n> ä¸€è¾†å¹³æ—¶å°±è·Œè·Œæ’æ’ä¸€ç›´ä¸ç»´ä¿®çš„ç ´è½¦ï¼Œä¸€è¸©æ²¹é—¨å°±å½»å¤œåœ°ç–¯è·‘ç–¯å¼€åŠä¸ªæœˆã€‚ä¸€å¹´æä¸ªäº”å…­æ¬¡ï¼Œå°±æ˜¯é’¢ç­‹é“æ‰“çš„æ±½è½¦ï¼Œå¼€ä¸ªäºŒåå‡ å¹´ä¹Ÿåˆ°æŠ¥åºŸäº†ã€‚\n\nç¯å¢ƒé—®é¢˜ï¼Œç©ºæ°”æ±¡æŸ“ã€æ°´æ±¡æŸ“å’Œé£Ÿå“å®‰å…¨å±æœºè¿˜æœ‰é‚£å¯æ€•çš„ç”²é†›å®¶å…·ã€‚\n\n## ï¼ˆå…«ï¼‰\n\n> ä¸å»æƒ³æ§åˆ¶å¤§å±€å°å±€ï¼Œä¸æƒ³å»å¤šç®¡é—²äº‹æ·¡äº‹ï¼Œæˆ‘ä¸åœ¨æœ‰å¯¹æ‰‹ï¼Œä¸å†æœ‰æ•Œäººï¼Œæˆ‘ä¹Ÿä¸åœ¨å…³å¿ƒè°æ¯”è°å¼ºï¼Œè¯¾é¢˜ä¹Ÿå¥½ï¼Œä»»åŠ¡ä¹Ÿç½¢ï¼Œæš‚ä¸”æ”¾ç€ã€‚\n\nä¹Ÿè®¸åªæœ‰æ­£åœ¨æƒ³æ˜ç™½çš„äººï¼Œæ‰æ‡‚çš„ä¸–é—´çš„ä¸€åˆ‡ï¼Œéš”å²¸çœ‹èŠ±ã€é£æ·¡äº‘è½»ã€‚\n","tags":["reading-notes"]},{"title":"LeetCode Intersection of Two Arrays 349","url":"/2016/08/22/leetcode-intersection-of-two-arrays-349/","content":"[349. Intersection of Two Arrays](https://leetcode.com/problems/intersection-of-two-arrays/)\n&emsp;&emsp;Given two arrays, write a function to compute their intersection.\n&emsp;&emsp;**Example:**\n&emsp;&emsp;Given nums1 = `[1, 2, 2, 1]`, nums2 = `[2, 2]`, return `[2]`.\n<!-- more -->\n&emsp;&emsp;**Note:**\n&emsp;&emsp;Each element in the result must be unique.\n&emsp;&emsp;The result can be in any order.\n\n### è‡ªå·±çš„è§£æ³•\n\nä½¿ç”¨ set è¿›è¡Œå»é‡\n\n``` java\npublic static int[] intersection2(int[] nums1, int[] nums2) {\n\tSet<Integer> nums1Set = new HashSet<>();\n\tSet<Integer> set = new HashSet<>();\n\tfor (int integer : nums1) {\n\t\tnums1Set.add(integer);\n\t}\n\tfor (int integer : nums2) {\n\t\tif (nums1Set.contains(integer)) {\n\t\t\tset.add(integer);\n\t\t}\n\t}\n\tint[] result = new int[set.size()];\n\tint i = 0;\n\tfor (int integer : set) {\n\t\tresult[i] = integer;\n\t\ti++;\n\t}\n\treturn result;\n}\n```\n### åˆ«äººçš„æ€è·¯\n\n[LeetCode â€“ Intersection of Two Arrays (Java)](www.programcreek.com/2015/05/leetcode-intersection-of-two-arrays-java/)\n\nBinary Search\n``` java\npublic int[] intersection(int[] nums1, int[] nums2) {\n    Arrays.sort(nums1);\n    Arrays.sort(nums2);\n    ArrayList<Integer> list = new ArrayList<Integer>();\n    for(int i=0; i<nums1.length; i++){\n        if(i==0 || (i>0 && nums1[i]!=nums1[i-1])){\n            if(Arrays.binarySearch(nums2, nums1[i])>-1){\n                list.add(nums1[i]);\n            }\n        }\n    }\n    int[] result = new int[list.size()];\n    int k=0;\n    for(int i: list){\n        result[k++] = i;\n    }\n    return result;\n}\n```\n\nTime = O(nlog(n)).\nSpace = O(n).\n","tags":["leetcode"]},{"title":"LeetCode Same Tree 100","url":"/2016/08/22/leetcode-same-tree-100/","content":"\n[100. Same Tree](https://leetcode.com/problems/same-tree/)\n&emsp;&emsp;Given two binary trees, write a function to check if they are equal or not. \n&emsp;&emsp;Two binary trees are considered equal if they are structurally identical and the nodes have the same value.\n<!-- more -->\n\nå…³äºæ ‘ç»“æ„è‡ªå·±æ²¡æ€ä¹ˆçœ‹è¿‡ï¼ŒæŸ¥äº†æŸ¥éå†é€šå¸¸æ˜¯ï¼šé€’å½’ã€stack\n### è‡ªå·±çš„è§£æ³•\n\n``` java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode(int x) { val = x; }\n * }\n */\npublic class Solution {\n    public boolean isSameTree(TreeNode p, TreeNode q) {\n        if (p == null && q == null) {\n\t\t\treturn true;\n\t\t}\n\t\tif (p == null || q == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (p.val == q.val) {\n\t\t\treturn isSameTree(p.left, q.left) && isSameTree(p.right, q.right);\n\t\t}\n\t\treturn false;\n    }\n}\n```\n\n","tags":["leetcode"]},{"title":"LeetCode Excel Sheet Column Title 168","url":"/2016/08/22/leetcode-excel-sheet-column-title-168/","content":"\n[168. Excel Sheet Column Title](https://leetcode.com/problems/excel-sheet-column-title/)\n&emsp;&emsp;Given a positive integer, return its corresponding column title as appear in an Excel sheet.\n<!-- more -->\nFor example:\n``` java\n    1 -> A\n    2 -> B\n    3 -> C\n    ...\n    26 -> Z\n    27 -> AA\n    28 -> AB \n```\n\n### è‡ªå·±çš„æ€è·¯\nåè¿›åˆ¶è½¬â€œäºŒåå…­è¿›åˆ¶â€\n\n``` java\npublic String convertToTitle(int n) {\n\tString str = \"\";\n\tdo {\n\t\tint chrInt = n % 26;\n\t\tchar chr;\n\t\tif (chrInt == 0) {\n\t\t\tchr = 'Z';\n\t\t\tn -= 26;\n\t\t} else {\n\t\t\tchr = (char) (chrInt - 1 + 'A');\n\t\t}\n\t\tstr = chr + str;\n\t\tn = n / 26;\n\t} while (n != 0);\n\treturn str;\n}\n```\n\n### åˆ«äººçš„æ€è·¯\n\n``` java\npublic String convertToTitle(int n) {\n    if(n <= 0){\n        throw new IllegalArgumentException(\"Input is not valid!\");\n    }\n \n    StringBuilder sb = new StringBuilder();\n \n    while(n > 0){\n        n--;\n        char ch = (char) (n % 26 + 'A');\n        n /= 26;\n        sb.append(ch);\n    }\n \n    sb.reverse();\n    return sb.toString();\n}\n```\næ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»£ç æ›´ç®€æ´ï¼Œä½¿ç”¨äº†`StringBuilder` å’Œ `reverse()`ï¼Œæå‰å‡1ä¹Ÿé¿å…äº†ç‰¹æ®Šå¤„ç†'Z'\n\n\nåœ¨ç®—æ³•é—®é¢˜ä¸­å¸¸å¸¸ç”¨åˆ°ï¼š\n- `1` çš„ ascii ä¸º33ï¼Œåå…­è¿›åˆ¶ä¸º21H\n- `A` çš„ ascii ä¸º65ï¼Œåå…­è¿›åˆ¶ä¸º41H\n- `a` çš„ ascii ä¸º97ï¼Œåå…­è¿›åˆ¶ä¸º61H\n\n","tags":["leetcode"]},{"title":"LeetCode Excel Sheet Column Number 171","url":"/2016/08/22/leetcode-excel-sheet-column-number-171/","content":"\n[171. Excel Sheet Column Number](https://leetcode.com/problems/excel-sheet-column-number/)\n&emsp;&emsp;Given a column title as appear in an Excel sheet, return its corresponding column number.\n<!-- more -->\nFor example:\n``` java\n    A -> 1\n    B -> 2\n    C -> 3\n    ...\n    Z -> 26\n    AA -> 27\n    AB -> 28 \n```\n\n### è‡ªå·±çš„æ€è·¯\n\nå¾ˆåƒæ˜¯â€œäºŒåå…­è¿›åˆ¶â€è½¬åè¿›åˆ¶\n\n``` java\npublic int titleToNumber(String s) {\n\tint col = 0;\n\tchar[] chars = s.toCharArray();\n\tint i = 0;\n\twhile (i < chars.length) {\n\t\tint charInt = chars[chars.length - 1 - i] - 64;\n\t\tcol += Math.pow(26, i) * charInt;\n\t\ti++;\n\t}\n\treturn col;\n}\n```\n\nåœ¨ç®—æ³•é—®é¢˜ä¸­å¸¸å¸¸ç”¨åˆ°ï¼š\n- `1` çš„ ascii ä¸º33ï¼Œåå…­è¿›åˆ¶ä¸º21H\n- `A` çš„ ascii ä¸º65ï¼Œåå…­è¿›åˆ¶ä¸º41H\n- `a` çš„ ascii ä¸º97ï¼Œåå…­è¿›åˆ¶ä¸º61H\n\nä¸Šé¢æœ‰ä¸ªå†™çš„ä¸å¥½çš„åœ°æ–¹å°±æ˜¯ 64ï¼Œå¥½åƒçš„å¾ˆè«åçš„ä¸€ä¸ªæ•°å­—ï¼Œå…¶å®æ—¶åœ¨å°† A æŠ˜ç®—ä¸º 1\n\n\n\n","tags":["leetcode"]},{"title":"è¯»ã€è›¤èŸ†çš„æ²¹ã€‘éšç¬”","url":"/2016/08/17/something-like-an-autobiography-reading-notes/","content":"\n> æ—¥æœ¬æ°‘é—´æµä¼ ç€è¿™æ ·ä¸€ä¸ªæ•…äº‹ï¼šåœ¨æ·±å±±é‡Œï¼Œæœ‰ä¸€ç§ç‰¹åˆ«çš„è›¤èŸ†ï¼Œå®ƒå’ŒåŒç±»ç›¸æ¯”ä¸ä»…å¤–è¡¨æ›´ä¸‘ï¼Œè€Œä¸”è¿˜å¤šé•¿äº†å‡ æ¡è…¿ã€‚äººä»¬è½¬åˆ°å®ƒåï¼Œå°†å…¶æ”¾åœ¨é•œå‰æˆ–è€…ç»ç’ƒç®±å†…ï¼Œè›¤èŸ†ä¸€çœ‹åˆ°è‡ªå·±ä¸‘é™‹ä¸å ªçš„çœŸé¢ç›®ï¼Œä¸ç¦å“å‡ºä¸€èº«æ²¹ã€‚è¿™ç§æ²¹ï¼Œä¹Ÿæ˜¯æ°‘é—´ç”¨æ¥æ²»ç–—çƒ§ä¼¤çƒ«ä¼¤çš„çè´µè¯æã€‚\n\nç¬¬ä¸€æ¬¡å†™äººæ–‡ç±»ä¹¦ç±çš„ç¬”è®°ã€‚\n\næ•…äº‹æ˜¯ä»é»‘æ³½æ˜ä¸€å²å¤šå…‰ç€èº«å­æ´—æ¾¡å¼€å§‹å›å¿†çš„ï¼Œç„¶åæŒ‰æ—¶é—´ï¼Œä¸€ä¸ªä¸ªå°æ•…äº‹è®²è¿°è‡ªå·±ã€‚\n\nï¼ˆä¸€ï¼‰\n\näºŒå¹´çº§æ˜¯ä»–å¾—åˆ°äº†â€œç³–é…¥â€è¿™ä¸ªç»°å·ï¼Œå› ä¸ºæœ‰äººæªä»–çš„å¤´å‘ï¼Œå¾€ä»–è¥¿è£…ä¸ŠæŠ¹é¼»æ¶•ï¼Œè®©ä»–å“­äº†å¥½å‡ æ¬¡ã€‚\n\næƒ³åˆ°äº†è‡ªå·±å¤§æ¦‚ä¸‰å››å¹´çº§çš„ä¸€ä»¶äº‹ï¼šä¸€æ¬¡åœ¨å…¬äº¤è½¦ç«™ç­‰è½¦è¢«äººå˜²ç¬‘å˜´å·´å¤§ï¼Œæ˜¯é™Œç”Ÿçš„åŒé¾„äººã€‚è‡ªå·±å½“æ—¶è¢«è’™æ‰äº†ï¼Œä¹Ÿä¸çŸ¥é“è¯´ä»€ä¹ˆæˆ–è€…åšç‚¹ä»€ä¹ˆï¼Œå‚»å‚»çš„ï¼Œåæ¥è½¦æ¥äº†ï¼Œä¸Šè½¦å›å®¶äº†ã€‚æˆ‘è®°å¾—æˆ‘æ˜¯åœ¨è½¦ä¸Šå§”å±ˆçš„å“­äº†ã€‚åå‡ å¹´æ¥è¿™ä»¶äº‹æˆ‘ä¸€ç›´éƒ½è®°å¾—ï¼Œæ€»æ˜¯æŠŠè¿™äº‹å½’ä¸ºé»‘å†å²ã€å¾ˆæ€‚çš„äº‹ï¼Œä¹Ÿä»æ¥æ²¡å’Œåˆ«äººè®²è¿‡ã€‚æˆ‘å½“æ—¶ä¸ºä»€ä¹ˆæ²¡æœ‰è¿˜å‡»ï¼Ÿæ˜¯è¢«å¤§äººæ•™è‚²çš„æ‰“æ¶ä¸æ˜¯å¥½å­©å­ï¼Ÿè¿˜æ˜¯è‡ªå·±çš„èƒ†å°ï¼Ÿè¿˜æ˜¯æ­£ä¸­ä¸‹æ€€ï¼Ÿç»†æ€è¿™äº›éƒ½æœ‰ï¼Œæ˜¯å¤ªå°æ²¡æœ‰è‡ªå·±çš„åˆ¤æ–­åŠ›ï¼Œä¹Ÿç¼ºå°‘ä¸€ä»½å¯¹è‡ªå·±ä¿¡å¿ƒä¸è‚¯å®šã€‚\n\nè¦èƒ½å†æ¥æˆ‘ä¸€å®šä¼šæŠŠé‚£å°å­æ‰“åˆ°å“­ã€‚\n\n<!-- more -->\n\nï¼ˆäºŒï¼‰\n\nå°é»‘é‡åˆ°äº†â€œå´‡å°šè‡ªç”±ã€ä»¥é²œæ´»çš„æ„Ÿæ€§åŠåˆ›é€ ç²¾ç¥ä»äº‹æ•™è‚²çš„è€å¸ˆâ€ï¼Œç«‹å·è€å¸ˆå¯¹æ™ºåŠ›å‘è‚²ç¼“æ…¢ã€æ€§æ ¼ä¹–åƒ»çš„ä»–å¤šæ–¹åº‡æŠ¤ï¼Œä½¿ä»–ç¬¬ä¸€æ¬¡æœ‰äº†è‡ªä¿¡ã€‚ç«‹å·è€å¸ˆè¿˜ä¸ºäº†ä½¿æ¤è‰ï¼ˆå°é»‘å¥½å‹ï¼‰å°½å¿«åœ°å¼€å‡ºç¿çƒ‚çš„èŠ±ï¼ŒæŠŠæ¤è‰ç§»æ ½åˆ°äº†å‰¯ç­é•¿è¿™ä¸ªç›†é‡Œï¼Œè€Œä¸”æ”¾åœ¨å‘é˜³ä¹‹å¤„ã€‚\n\né‡åˆ°ä¸€ä¸ªèƒ½æŒ‡å¯¼ä½ æˆé•¿çš„åŒå­¦ã€æœ‹å‹ã€è€å¸ˆã€å“¥å“¥å§å§çœŸçš„æ˜¯ä¸€ä»¶å¾ˆå¹¸è¿çš„äº‹æƒ…ã€‚æˆ‘è§‰çš„ä»–ä»¬åœ¨æœ‰æ™ºæ…§çš„äººç¾¤é‡Œï¼Œä¸æ˜¯çæŠ˜è…¾æˆ–è€…å¾ˆä¸–ä¿—ã€‚\n\nï¼ˆä¸‰ï¼‰\n\nç»™å®¢äººåƒçš„é±¼ï¼Œé±¼å¤´æœå·¦ï¼Œé±¼è…¹æœç€å®¢äººã€‚ç»™å‰–è…¹è€…ä¸Šçš„é±¼ï¼Œå¤§æ¦‚æ˜¯é±¼å¤´æœå³ï¼Œé±¼èƒŒæœç€æœ¬äººã€‚æˆ–è®¸æ˜¯å› ä¸ºï¼Œå¦‚æœè®©å‰–è…¹è€…çœ‹åˆ°å‰–å¼€çš„é±¼è…¹ï¼Œæœªå…å¤ªæ®‹é…·äº†ã€‚\n\nï¼ˆå››ï¼‰\n\nå°é»‘åœ¨å­¦å‰‘é“æ—¶ï¼Œé“åœºçš„ä¸»äººè¢«æ±½è½¦æ’äº†ï¼Œé‚£æ˜¯æ±½è½¦æœ¬æ¥æ˜¯ç¨€ç½•ä¹‹ç‰©ï¼Œå´åˆè®©è¿™ç¨€ç½•ä¹‹ç‰©æ’ä¼¤ï¼Œç®€ç›´åƒæŒ¨é©¬è¸¢ä¸€æ ·å¯ç¬‘ã€‚è€Œå¯¹é“åœºä¸»äººçš„å°Šæ•¬çƒŸæ¶ˆäº‘æ•£ã€‚è‡ªå·±åœ¨é«˜é‡ä½ä¸‰éƒçš„é“åœºåœ¨å­¦äº¤å‰åæ—¶ï¼Œè¢«å¼¹å›æ¥æ’åˆ°å¢™ä¸Šï¼Œçœ¼å‰ä¸€é˜µå‘é»‘ï¼Œä¸¤çœ¼ç›´å†’é‡‘æ˜Ÿï¼Œå¯¹è‡ªå·±å‰‘é“çš„è‡ªè±ªåŒ–ä¸ºä¹Œæœ‰ã€‚\n\näººä¸–å¹¶ä¸åƒæƒ³è±¡çš„é‚£ä¹ˆç®€å•ã€‚äººå¤–æœ‰äººï¼Œå¤©å¤–æœ‰å¤©ã€‚è‡ªå·±ä¸å…æ˜¯äº•åº•ä¹‹è›™ï¼Œæ€»æ˜¯ç®¡ä¸­çª¥è±¹ã€‚å¾ˆå¤šåƒè¿™æ ·çš„é“ç†ï¼Œæˆ‘éƒ½å¬è¿‡ï¼Œæˆ‘ä¹Ÿè®¤åŒï¼Œå¯åœ¨æ²¡æœ‰é‡åˆ°ä¸€ä»¶å…·ä½“çš„äº‹æƒ…çš„æ—¶å€™ï¼Œæ€»æ˜¯çœ‹ä¸åˆ°è®¤ä¸æ¸…è‡ªå·±çš„æµ…è–„ã€‚å¤šå¤šç»å†ï¼Œå¤šå¤šæ€è€ƒã€‚\n\nï¼ˆäº”ï¼‰\n\nåœ¨ä½“è‚²è¯¾ä¸Šï¼Œä½“è‚²è€å¸ˆæ•™è·³é«˜é‡‡å–æ¯”èµ›çš„æ–¹æ³•ï¼Œæ’æ‰ç«¿å°±è¢«æ·˜æ±°ä¸‹å»ã€‚é»‘æ³½æ˜åˆšä¸€èµ·è·‘ï¼ŒåŒå­¦ä»¬å°±å“„å ‚å¤§ç¬‘ã€‚ä»–ä»¬å‡†æ˜¯è§‰å¾—æˆ‘ä¼šå¤´ä¸€ä¸ªæŠŠæ¨ªæ†æ’ä¸‹æ¥ã€‚å‡ºä¹æ„æ–™çš„æ˜¯æˆ‘è½»æ¾è¶Šè¿‡äº†æ¨ªæ†ã€‚æ¨ªæ†é€æ¸ä¸Šç§»ï¼Œç„¶è€Œï¼ŒæŒ‘æˆ˜çš„äººä¸­é—´æ€»æœ‰æˆ‘ã€‚çœ‹çƒ­é—¹çš„äººä»¬å¯‚ç„¶æ— å£°äº†ã€‚ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œå±…ç„¶å‡ºç°äº†å¥‡è¿¹ï¼šåªå‰©æˆ‘ä¸€ä¸ªäººåœ¨æŒ‘æˆ˜äº†ã€‚ä¸€ä¸ªä¸ªæ— ä¸å‘†å‘†åœ°çœ‹ç€æˆ‘ã€‚è€Œä¸”ï¼Œåªå‰©ä¸‹æˆ‘ä¸€ä¸ªäººä¹‹åï¼Œä»ç„¶å‡ æ¬¡è·³è¿‡äº†æ¨ªæ†ã€‚ä¹Ÿè®¸æ˜¯å¤©ä½¿å“€æ€œæˆ‘ä½“æ“è¯¾æ€»å¾—é›¶åˆ†ï¼Œç»™æˆ‘çš„èƒŒæ’ä¸Šäº†ç¿…è†€ã€‚\næœ€åä¸€å¥ï¼Œå†™çš„çœŸç¾ã€‚\n\nï¼ˆå…­ï¼‰\n\näººæ˜¯å¯ç¬‘çš„ï¼Œè¿‡åˆ†å—æƒŠæ—¶ï¼Œå¤´è„‘çš„ä¸€éƒ¨åˆ†ä¼šè„±ç¦»ç°å®ï¼Œæƒ³å…¥ééï¼Œçœ‹èµ·æ¥æ˜¾å¾—ååˆ†æ²‰ç€ã€‚å½“å¤§åœ°éœ‡æ—¶ï¼ŒæŠ±ç€ç”µçº¿æ†å¿å—ç€å¼ºçƒˆçš„æ‘‡æ™ƒæ—¶ï¼Œä»ç„¶æƒ³åˆ°äº†è¿™äº›ï¼Œè€Œä¸”éå¸¸ä½©æœæ—¥å¼å»ºç­‘çš„ä¼˜è¶Šæ€§ã€‚ç„¶è€Œè¿™ç»ä¸æ„å‘³ç€æˆ‘é‡äº‹æ²‰ç€å†·é™ã€‚\n\nï¼ˆä¸ƒï¼‰\n\næ²¡æœ‰ç»å†è¿‡çš„äººæ— æ³•æƒ³è±¡å¯¹äººç±»æ¥è¯´ä½•è°“æ­£çœŸçš„é»‘æš—ï¼Œè¿™é»‘æš—åˆæ˜¯å¤šä¹ˆçš„å¯æ€•ã€‚è¿™ææ€–å¤ºèµ°äº†äººçš„æ­£æ°”ã€‚æ— è®ºæœå“ªé‡Œæœ›ï¼Œä»€ä¹ˆéƒ½çœ‹ä¸è§ï¼Œè¿™æ˜¯æœ€ä½¿äººæ„Ÿåˆ°å­¤ç«‹æ— æ´çš„åœ°æ–¹ï¼Œå®ƒä½¿äººå†…å¿ƒæ·±å¤„äº§ç”Ÿäº†æƒŠæ…Œå’Œä¸å®‰ï¼Œä¹Ÿä½¿äººå¤„äºåå‰¯å…¶å®çš„ç–‘å¿ƒç”Ÿæš—é¬¼çŠ¶æ€ã€‚\n\nå¥½åƒæœ‰ç‚¹åƒæˆ‘å›½çš„â€œåƒç›é˜²è¾å°„â€ï¼Œéƒ½æ˜¯å·§å¦™åœ°åˆ©ç”¨é»‘æš—å¯¹äººçš„å¨èƒåˆ¶é€ çš„é˜´è°‹ï¼Ÿè¿˜æ˜¯æ˜“å—è›Šæƒ‘çš„äººå¿ƒæ˜¯ç¤¾ä¼šå‘å±•çš„è¿‡ç¨‹ä¸­è¦çš„ç»å†ï¼Ÿ\n\nï¼ˆå…«ï¼‰\n\nç»“æŸè¿™è¶Ÿå¯æ€•çš„è¿œè¶³ï¼Œå½“å¤©æ™šä¸Šï¼Œæˆ‘ä»¥ä¸ºä¸€å®šéš¾ä»¥å…¥ç¡ï¼Œè¿˜ä¼šå¤§åšå™©æ¢¦ï¼Œä½†å¤´åˆšä¸€æ²¾æ•å°±åˆ°äº†ç¬¬äºŒå¤©æ—©æ™¨ã€‚å“¥å“¥è¯´ï¼šâ€œé¢å¯¹å¯æ€•çš„äº‹ç‰©é—­çœ¼ä¸æ•¢çœ‹ï¼Œå°±ä¼šè§‰å¾—å®ƒå¯æ€•ï¼›ä»€ä¹ˆéƒ½ä¸åœ¨ä¹ï¼Œå“ªé‡Œè¿˜æœ‰ä»€ä¹ˆå¯æ€•çš„å‘¢ï¼Ÿâ€ã€‚ç°åœ¨çœ‹æ¥ï¼Œé‚£è¶Ÿè¿œè¶³ï¼Œå¯¹å“¥å“¥æ¥è¯´å¯èƒ½ä¹Ÿæ˜¯å¯æ€•çš„ã€‚æ­£å› ä¸ºå¯æ€•ï¼Œæ‰€ä»¥å¿…é¡»å¾æœå®ƒã€‚è¿™æ¬¡è¿œè¶³ä¹Ÿæ˜¯ä¸€æ¬¡å¾æœææ€–çš„è¿œå¾ã€‚\n\nå¯æ˜¯é¢å¯¹äº†è‡ªå·±å¯æ€•çš„ä¸œè¥¿åï¼Œè¿˜æ˜¯æ€•çš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿˜æ²¡æœ‰æ­£é¢é¢å¯¹ï¼Ÿ\n\nï¼ˆä¹ï¼‰\n\né«˜å±±ä»°æ­¢\n\nå¯¹æœ‰æ°”è´¨ã€æœ‰ä¿®å…»æˆ–æœ‰å´‡é«˜å“å¾·ä¹‹äººçš„å´‡æ•¬ã€ä»°æ…•ä¹‹æƒ…ã€‚\n\nï¼ˆåï¼‰\n\näººèƒ½æŠŠå«æ˜Ÿé€è¿›å®‡å®™ï¼Œåœ¨ç²¾ç¥å±‚é¢å´ä¸ä¼šå‘ä¸Šçœ‹ï¼Œè€Œæ˜¯åƒé‡ç‹—ä¸€æ ·ï¼Œåªæ³¨æ„è„šä¸‹ï¼Œå¾˜å¾Šä¸å·²ã€‚\n\nï¼ˆåä¸€ï¼‰\n\nåå¨˜ç”¨è‰¾è‹¦æˆ‘èº«/æˆ‘ä¸ºåå¨˜ä¹°å¤§è‰¾/ä¸ºè®¨å¥¹æ¬¢å¿ƒã€‚ç»§æ¯ä¸ºä»€ä¹ˆè™å¾…å‰æˆ¿å­©å­ï¼Ÿå¦‚æœè¯´å‡ºäºæ†æ¨ä¸ˆå¤«çš„å‰å¦»è€Œè™å¾…å…¶å­ï¼Œè¿™æ˜¯æ²¡æœ‰é“ç†çš„ã€‚è®¤ä¸ºè¿™å®Œå…¨å‡ºäºæ„šæ˜§ã€‚æ„šæ˜§æ˜¯äººçš„ç–¯ç‹‚ç—…ç—‡ä¹‹ä¸€ï¼Œä»¥è™å¾…æ²¡æœ‰åæŠ—èƒ½åŠ›çš„å­©å­æˆ–è€…å°åŠ¨ç‰©ä¸ºä¹çš„äººï¼Œçº¯ç²¹æ˜¯ç–¯å­ã€‚ç„¶è€Œè¿™ç±»ç–¯å­å¹¶ä¸è®¤ä¸ºè¿™æ˜¯çŠ¯ç½ªï¼Œå´è®¤ä¸ºæ˜¯ç†æ‰€å½“ç„¶ï¼Œæ‰€ä»¥éš¾ä»¥å¯¹ä»˜ã€‚æˆ‘èƒ½è§£å¼€ç»‘å¥¹çš„å¸¦å­ï¼Œç„¶è€Œæ— æ³•æŠŠå¥¹ä»æ†ç»‘å¥¹çš„å¢ƒé‡ä¸­æ•‘å‡ºã€‚å¯¹è¿™ä¸ªå­©å­æ¥è¯´ï¼Œäººä»¬çš„åŒæƒ…æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚é‚£ç§æ¸©æƒ…åå€’ç»™å¥¹æ‹›æ¥æ›´å¤šçš„éº»çƒ¦ã€‚\n\næƒ³åˆ°äº†æ‰“åŠ«çš„æ•…äº‹ï¼Œè¯´ï¼šè¢«åŠ«æŒçš„äººåªè¦äº¤çš„é’±æ¯”ä¸Šä¸€äººäº¤çš„é’±å¤šä¸€å€ï¼Œå°±å¯ä»¥èµ°ã€‚äººäº‰å…ˆæåçš„äº¤èµé‡‘ï¼Œä¸å†æœ‰äººåæŠ—ã€‚\n\nï¼ˆåäºŒï¼‰\n\næœ¬æ¥æ˜¯çº¢çš„ï¼Œå´ä¸è€å®è¯´å®ƒæ˜¯çº¢çš„ï¼Œç­‰åˆ°èƒ½å¦ç‡è¯´å‡ºæ¥çš„æ—¶å€™ï¼Œå·²ç»åˆ°äº†æ™šå¹´ã€‚å¾ˆå¤šäººå¹´è½»æ—¶è¡¨ç°æ¬²è¿‡å¼ºï¼Œè¿™æ ·åå€’è¿·å¤±äº†è‡ªå·±ã€‚æˆ‘ä¹Ÿæ¯«ä¸ä¾‹å¤–ï¼Œæ‹¼å‘½çš„è€ƒæŠ€å·§ä½œç”»ï¼Œé‚£ç”»çš„ä¿—æ°”ä½¿æˆ‘å¯¹è‡ªå·±å¿ƒç”Ÿæ†æ¶ï¼Œé€æ¸ä¸§å¤±äº†å¯¹è‡ªå·±æ‰èƒ½æœ‰çš„ä¿¡å¿ƒï¼ŒæŠŠç»˜ç”»çœ‹ä½œç—›è‹¦äº†ã€‚ä¸ºäº†ä¹°æ²¹å½©å’Œç”»å¸ƒè¿˜å¾—å¹²äº›ä¸æ„¿å¹²çš„æ‚æ´»å„¿èµšé’±æ‰è¡Œã€‚\n\nå°‘æäº›å¥—è·¯ï¼Œç©èŠ±æ´»ï¼Œè¸è¸å®å®æ‰æ˜¯çœŸã€‚åˆ«çæŠ˜è…¾ï¼Œæ²¡æœ‰ç”¨ã€‚\n\nï¼ˆåä¸‰ï¼‰\n\näº§ç”Ÿè¿™ç§æ€¥äºå°±ä¸šçš„ç„¦è™‘å’Œé™æ ¼ä»¥æ±‚çš„å¿ƒæƒ…ï¼Œä¸»è¦æ˜¯ä»¥ä¸ºå“¥å“¥çªç„¶å»ä¸–ï¼Œæˆ‘è¦ç»§ä»–ä¹‹åè´Ÿèµ·é•¿å­çš„è´£ä»»ã€‚\n\nåœ¨å¹´åˆæœ‰ç±»ä¼¼çš„ç»å†ï¼Œæœ€åä¸€ä¸ªå­¦æœŸï¼Œéƒ½æ‰¾å·¥ä½œå»äº†ï¼Œä¹Ÿè¦æ¯•ä¸šè¦é•¿å¤§äº†ï¼Œæ€¥ç€ç¡®å®šä¸ªå·¥ä½œã€‚å…¶å®ç°åœ¨ä¹Ÿç€æ€¥ç€ï¼Œæƒ³å¿«æœ‰æ‰€ä½œä¸ºã€‚å‰å‡ æ—¥ï¼Œçœ‹åˆ°å¥½å‹æš—å¶çš„æœ‹å‹åœˆå‘ï¼šå¹´è½»äººæƒ³æ³•æ²¡å¤šï¼Œéƒ½æ˜¯è¿˜å¾—æ…¢æ…¢æ¥ã€‚æˆ‘åˆçœ‹æ˜¯ä¸èµåŒã€‚é»‘æ³½æ˜çš„çˆ¶äº²ä¹Ÿå‘Šè¯«ä»–è¯´ï¼šâ€œä¸è¦ç€æ€¥ï¼Œä¹Ÿæ²¡æœ‰ç€æ€¥çš„å¿…è¦â€ï¼Œâ€œè¦ç­‰ä¸‹å»ï¼Œå‰é¢çš„é“è·¯è‡ªç„¶ä¼šæ‰“å¼€çš„â€ã€‚è¿™äº›è¯æˆ‘ç¡®å®è¿˜ä¸å¤ªç†è§£ä¸ºä»€ä¹ˆï¼Œå¾—æ…¢æ…¢çš„ä½“ä¼šã€‚\n\nï¼ˆåå››ï¼‰\n\nå‡¡äº‹æƒ³ç”¨äººçš„ï¼Œå¿…é¡»å…ˆåŸ¹å…»äººã€‚åŸ¹å…»å‡ºäººï¼Œæ¿€å‘å‡ºäººçš„æ‰èƒ½ï¼Œè¿™æ‰èƒ½ç”¨ã€‚\n\nçº·æ‰°çš„ç°åœ¨ï¼Œè¿˜æœ‰å¤šå°‘äººæˆ–å…¬å¸æ„¿æ„åŸ¹å…»äººï¼Ÿåº”è¯¥è¯´äººåŸ¹å…»åº”è¯¥æ˜¯å¿…é¡»çš„ã€‚\n\nï¼ˆåäº”ï¼‰\n\nå±±æœ¬å…ˆç”Ÿå¯¹äºè¿½éšä»–çš„å‰¯å¯¼æ¼”ï¼Œç»ä¸å¹²æ”¹å˜ä»–ä»¬ä¸ªæ€§çš„äº‹ï¼Œè€Œæ˜¯ä¸€å¿ƒä¸€æ„çš„ç€åŠ›äºå‘æ˜ä»–ä»¬çš„ä¸ªæ€§ï¼›è€Œä¸”ä¸æ¯«ä¸è®©æˆ‘ä»¬æœ‰ä»å¸ˆå­¦ä¹ çš„æ‹˜æŸå¿ƒæƒ…ï¼Œè€Œæ˜¯è®©æˆ‘ä»¬å……åˆ†çš„å‘å±•è‡ªå·±ã€‚\nå±±æœ¬å…ˆç”Ÿä¸ºäº†åŸ¹å…»å‰¯å¯¼æ¼”ï¼Œä¸æƒœç‰ºç‰²è‡ªå·±çš„ä½œå“ã€‚\nâ€œé‚£æ˜¯å–é¦™è·åŒ…çš„æ‹›ç‰Œã€‚éšéšä¾¿ä¾¿è¯´è¯å¯ä¸è¡Œï¼ä¸çŸ¥é“çš„äº‹æƒ…å°±è¯¥è¯´ä¸çŸ¥é“ï¼â€\n\nï¼ˆåå…­ï¼‰\n\næå‡ºæ‰¹è¯„ä¸éš¾ã€‚ä½†æ˜¯ï¼Œæå‡ºæ‰¹è¯„çš„äººèƒ½å¤ŸæŒ‰ç…§è‡ªå·±çš„æ‰¹è¯„æ„è§äº²è‡ªæŠŠå‰§æœ¬æ”¹å¥½ï¼Œå´ä¸æ˜¯æ™®é€šäººèƒ½åšåˆ°çš„äº‹ã€‚\n\nå¤ªæœ‰åŒæ„Ÿäº†ï¼Œå¸¸å¸¸æœ‰äººåœ¨æ—è¾¹æŒ‡æ‰‹ç”»è„šï¼Œå´è¯´ä¸å‡ºä»€ä¹ˆåˆ‡å®å¯è¡Œçš„åŠæ³•å»ºè®®ã€‚\n\nï¼ˆåä¸ƒï¼‰\n\näººå¾€å¾€ä¹ æƒ¯äºè®¤ä¸ºä»·å€¼ä¸è¾›è‹¦æˆæ­£æ¯”ã€‚è¿™åœ¨ç”µå½±ç•Œå‰ªè¾‘ä¸Šæ˜¯æœ€è¦ä¸å¾—çš„ã€‚äººä»¬è¯´ç”µå½±æ˜¯æ—¶é—´çš„è‰ºæœ¯ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰ç”¨çš„æ—¶é—´å°±åº”åˆ å»ã€‚\n\nè¿™è§‚ç‚¹åœ¨äº’è”ç½‘è¡Œä¸šä¹Ÿè¡Œçš„é€šï¼Œåšå¥½çš„åŠŸèƒ½ä¸åˆé€‚äº†ï¼Œè¯´åºŸä¹Ÿå°±åºŸæ‰äº†ã€‚\n\nï¼ˆåå…«ï¼‰\n\næˆ‘å¸¸å¸¸æŠŠç¾¤ä¼—æ¼”å‘˜çš„åå­—å¿˜æ‰ï¼Œæ‰€ä»¥åªå¥½æŒ‰ä»–ä»¬çš„è¡£æœé¢œè‰²æ‹›å‘¼ã€‚ç»“æœè¢«å±±æœ¬å…ˆç”Ÿè®­äº†å‡ å¥ï¼šâ€œé»‘æ³½æ˜ï¼Œé‚£å¯ä¸è¡Œã€‚äººéƒ½æœ‰ä¸ªåå˜›ï¼â€ã€‚åä¸è§ç»ä¼ çš„æ¼”å‘˜å¬åˆ°å±±æœ¬å…ˆç”Ÿå¦‚æ­¤äº²åˆ‡çš„æ‹›å‘¼ä»–ï¼Œæ— ä¸æ„Ÿåˆ°ã€‚éš¾é“èƒ½è¯´å±±æœ¬å…ˆç”Ÿæœ‰äº›æ»‘å¤´å—ï¼Ÿæˆ‘çœ‹åº”è¯¥è¯´ä»–å–„äºç”¨äººã€‚\n\nè‡ªå·±è¿˜ä¸æ˜¯ä»€ä¹ˆé‡è¦äººç‰©ï¼Œä½†æ˜¯è®°ä½åˆ«äººçš„åå­—åº”è¯¥æ˜¯ä»¶é‡è¦çš„äº‹æƒ…ã€‚\n\nï¼ˆåä¹ï¼‰\n\nå…³äºæ¼”å‘˜çš„å…³é”®é—®é¢˜ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œäººå¾ˆéš¾äº†è§£è‡ªå·±ï¼Œä¸èƒ½å®¢è§‚çš„è§‚å¯Ÿè‡ªå·±çš„è¯´è¯æ–¹å¼å’Œè¡Œä¸ºä¸¾æ­¢ã€‚ç¬¬äºŒï¼Œå‡¡äº‹æœ‰æ„è¯†çš„åŠ¨ä½œï¼Œé¦–å…ˆæ³¨æ„çš„ä¸æ˜¯åŠ¨ä½œæœ¬èº«ï¼Œè€Œæ˜¯æ„è¯†ã€‚ç¬¬ä¸‰ï¼Œæ•™ç»™æ¼”å‘˜æ€ä¹ˆåšï¼ŒåŒæ—¶å¿…é¡»å‘Šè¯‰ä»–ä¸ºä»€ä¹ˆæ€ä¹ˆåšï¼Œè€Œä¸”è®©ä»–å……åˆ†ç†è§£ã€å¿ƒæ‚¦è¯šæœã€‚\n\nåšäº‹æƒ…çš„æ—¶å€™åº”è¯¥åå‘è€ƒè™‘ç¬¬ä¸‰ç‚¹ï¼Œä¸ºä»€ä¹ˆè¦æ€ä¹ˆåšäº‹æƒ…ï¼Ÿç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\n\nï¼ˆäºŒåï¼‰\n\nç”µå½±è¯„è®ºå®¶ä¸­å†²æœ‰è¿™æ ·çš„äººï¼Œçœ‹åˆ°ç”µå½±ä¸­ä¸€äº›è‡ªå·±è®¤ä¸ºæ˜¯ç¼ºç‚¹çš„åœ°æ–¹å°±å¦‚è·è‡³å®ï¼Œå¤§å‘è°¬è®ºï¼Œä½†æ˜¯ç”µå½±å¯¼æ¼”ä¹Ÿä¹äºæ­¤é“å¯å°±é”™äº†ã€‚\n\nç°åœ¨è¿™æ ·çš„äººè¶Šæ¥è¶Šå¤šï¼Œå“—ä¼—å–å® ã€‚\n\nï¼ˆäºŒåä¸€ï¼‰\n\nä»–ä»¬ä»¥ä¸ºä¸€éƒ¨å–åº§å½±ç‰‡çš„ç»­é›†ä¹Ÿå¿…ç„¶ä¼šæˆåŠŸï¼Œäºæ˜¯ä¸æƒ³å†å¼€æ‹“æ–°çš„é¢†åŸŸï¼Œæ€»æƒ³æ—§æ¢¦é‡æ¸©ã€‚é‡æ‹çš„å½±ç‰‡ç»ä¸å¦‚å‰ä½œï¼Œè¿™è™½ç„¶æ˜¯å·²ç»è¯æ˜çš„äº‹å®ï¼Œä½†ä»–ä»¬è¿˜è¦é‡è¹ˆè¦†è¾™ï¼Œè¿™æ‰æ˜¯åœ°åœ°é“é“çš„æ„šè ¢ä¹‹ä¸¾ã€‚\n\nå­¦ä¹ æ–°ä¸œè¥¿ï¼Œæ‰¾æ–°è·¯å­ã€‚\n\nï¼ˆäºŒåäºŒï¼‰\n\næˆ‘ä¸ºäº†æŠµæŠ—äººçš„è‹¦æ¼ï¼Œæˆ´ä¸Šä¸€å¹…å¼ºè€…çš„é¢å…·ï¼›è€Œæ¤è‰å´ä¸ºäº†æ²‰æººä¸äººçš„è‹¦æ¼ï¼Œæˆ´ä¸Šäº†ä¸€å¹…å¼±è€…çš„é¢å…·ã€‚äº‹å®ä¸è¿‡å¦‚æ­¤ã€‚ä½†è¿™åªæ˜¯è¡¨é¢çš„ä¸åŒï¼Œå°±æœ¬è´¨æ¥è¯´ã€‚æˆ‘ä»¬éƒ½æ˜¯å¼±è€…ã€‚æˆ‘ä¸æ˜¯ç‰¹åˆ«çš„äººã€‚æˆ‘æ—¢ä¸æ˜¯ç‰¹åˆ«å¼ºçš„äººï¼Œä¹Ÿä¸æ˜¯å¾—å¤©ç‹¬åšçš„æœ‰ç‰¹æ®Šæ‰èƒ½çš„äººã€‚æˆ‘ä¸è¿‡æ˜¯ä¸ªä¸æ„¿ç¤ºå¼±äºäººï¼Œä¸æ„¿è¾“ç»™åˆ«äººï¼Œå› è€Œä¸æ‡ˆåŠªåŠ›çš„äººã€‚\n\nåœ¨åŸæ¥çœ‹åˆ°è¿™æ ·çš„å¥å­æ˜¯å¾ˆä¸å±‘çš„ï¼Œè§‰çš„æˆåŠŸçš„äººï¼Œè¯´ä»€ä¹ˆéƒ½è¡Œã€‚ç°åœ¨ä¿¡äº†ï¼ŒçœŸçš„äººéƒ½æœ¬æ˜¯æ™®é€šäººï¼Œåªæ˜¯æœ‰çš„äººä¸€ç›´åœ¨è¿›æ­¥æˆé•¿å°±ç°åœ¨ä¸å†æ™®é€šäº†ã€‚\n\nï¼ˆäºŒåä¸‰ï¼‰\n\næœ‰ä¸€å¤©ï¼Œæˆ‘åœ¨ç”µè½¦é‡Œçœ‹åˆ°è¿™ç§æ‚å¿—çš„å¹¿å‘Šï¼Œç®€ç›´ç›®çªå£å‘†ã€‚é‚£ä¸Šé¢ç”¨å¤§å­—æ ‡é¢˜å†™ç€ï¼šæ˜¯è°å¤ºèµ°äº† XX çš„è´æ“ï¼Ÿä¹çœ‹èµ·æ¥ï¼Œè¿™ä¼¼ä¹åœ¨ä¸º XX å¥³å£«é¸£ä¸å¹³ï¼Œå®é™…åˆ™æ˜¯æŠŠ XX å½“ä½œç©ç‰©æ£æ„æˆè€ã€‚æˆ‘è®¤ä¸ºï¼Œè¿™ä¸æ˜¯è¨€è®ºè‡ªç”±ï¼Œè€Œæ˜¯è¨€è®ºæš´åŠ›ã€‚\n\næ²¡æƒ³åˆ°åœ¨é‚£ä¹ˆæ—©ï¼Œå°±æåˆ°äº†â€œè¨€è®ºæš´åŠ›â€çš„è¯é¢˜ï¼Œç¤¾äº¤å¹³å°çš„è¯„è®ºåŒºå¸¸å¸¸æœ‰çš„è¡€é›¨è…¥é£ã€‚\n\nï¼ˆäºŒåå››ï¼‰\n\næœ¬æ°‘æ—äººä¸ºä»€ä¹ˆå¯¹äºæœ¬æ°‘æ—çš„å­˜åœ¨æ¯«æ— è‡ªä¿¡å‘¢ï¼Ÿä¸ºä»€ä¹ˆå¯¹å¼‚åŸŸçš„ä¸œè¥¿é‚£ä¹ˆå°Šé‡ï¼Œå¯¹äºè‡ªå·±çš„ä¸œè¥¿å°±é‚£ä¹ˆè½»è§†å‘¢ï¼Ÿ\n\né»‘æ³½æ˜æåˆ°æ˜¯ï¼šå¯æ‚²çš„å›½æ°‘æ€§ã€‚è‡ªå·±æ²¡å¤ªç†è§£ã€‚\n\n> äººæ˜¯å¾ˆéš¾å¦‚å®çš„è°ˆè®ºè‡ªå·±çš„ã€‚äººæ€»æ˜¯æœ¬èƒ½çš„ç¾åŒ–è‡ªå·±ã€‚äººä¸ä¼šè€è€å®å®çš„è¯´è‡ªå·±æ˜¯æ€æ ·ä¸€ä¸ªäººï¼Œå¸¸å¸¸æ˜¯å‡æ‰˜åˆ«äººæ‰èƒ½è€è€å®å®çš„è°ˆè®ºè‡ªå·±ã€‚\n> å› ä¸ºï¼Œåœ¨æ²¡æœ‰ä»€ä¹ˆèƒ½æ¯”ä½œå“æ›´å¥½çš„è¯´æ˜ä½œè€…äº†ã€‚\n","tags":["reading-notes"]},{"title":"LeetCode Move Zeroes 283","url":"/2016/08/16/leetcode-move-zeroes-283/","content":"\n[283. Move Zeroes](https://leetcode.com/problems/move-zeroes/)\n&emsp;&emsp;Given an array nums, write a function to move all 0's to the end of it while maintaining the relative order of the non-zero elements. For example, given nums = [0, 1, 0, 3, 12], after calling your function, nums should be [1, 3, 12, 0, 0].\n<!-- more -->\nNote: \n- You must do this in-place without making a copy of the array. \n- Minimize the total number of operations.\n\n---\n \n### å¤§ä½“æ„æ€\nå°†æ•°ç»„ä¸­0å…ƒç´ ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œä¸æ”¹å˜å…¶ä»–å…ƒç´ çš„é¡ºåºï¼›ä¸èƒ½ copy æ•°ç»„ï¼Œæœ€å°åŒ–çš„æ“ä½œ\n\n### è‡ªå·±çš„æ€è·¯\n#### äº¤æ¢å†’æ³¡\n\n``` java\npublic static void moveZeroes(int[] nums) {\n\n\tboolean hasChange = false;\n\tdo {\n\t\thasChange = false;\n\t\tfor (int i = 0; i < nums.length - 1; i++) {\n\t\t\tif (nums[i] == 0 && nums[i + 1] != 0) {\n\t\t\t\tnums[i] = nums[i + 1];\n\t\t\t\tnums[i + 1] = 0;\n\t\t\t\thasChange = true;\n\t\t\t}\n\t\t}\n\t} while (hasChange);\n\tSystem.out.println(Arrays.toString(nums));\n}\n```\n\n#### ä¸0æ¢ä½ç½®ï¼Œå‚è€ƒäº†åˆ«äººçš„æƒ³æ³•\n \n``` java\npublic static void moveZeroes2(int[] nums) {\n\tint firstZoneIndex = -1;\n\tfor (int i = 0; i < nums.length; i++) {\n\t\tif (firstZoneIndex != -1) {\n\t\t\t// å‘ç°äº†è¿‡0\n\t\t\tif (nums[i] != 0) {\n\t\t\t\tnums[firstZoneIndex] = nums[i];\n\t\t\t\tnums[i] = 0;\n\t\t\t\tfirstZoneIndex++;\n\t\t\t}\n\t\t} else {\n\t\t\t// æ²¡æœ‰å‘ç°è¿‡0\n\t\t\tif (nums[i] == 0) {\n\t\t\t\tfirstZoneIndex = i;\n\t\t\t}\n\t\t}\n\t}\n\tSystem.out.println(Arrays.toString(nums));\n}\n```\n\n### åˆ«äººçš„ç®—æ³•\n\n- [è¥¿æ–½è±†è…æ¸£ - leetcode 283: Move Zeroes](http://blog.csdn.net/xudli/article/details/48574521)\n\n``` java\npublic void moveZeroes(int[] nums) {\n\tint i = 0;\n\tint j = 0;\n\twhile (j < nums.length) {\n\t\tif (nums[j] != 0) {\n\t\t\tif (j != i) {\n\t\t\t\tnums[i++] = nums[j];\n\t\t\t\tnums[j] = 0;\n\t\t\t} else {\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\t\t++j;\n\t}\n}\n```\n\n","tags":["leetcode"]},{"title":"LeetCode Ransom Note 383","url":"/2016/08/11/leetcode-ransom-note-383/","content":"\n[383. Ransom Note](https://leetcode.com/problems/ransom-note/)\n&emsp;&emsp;Given an arbitrary ransom note string and another string containing letters from all the magazines, write a function that will return true if the ransom note can be constructed from the magazines ; otherwise, it will return false.\n&emsp;&emsp;Each letter in the magazine string can only be used once in your ransom note.\n<!-- more -->\nNote:\nYou may assume that both strings contain only lowercase letters.\n```\ncanConstruct(\"a\", \"b\") -> false\ncanConstruct(\"aa\", \"ab\") -> false\ncanConstruct(\"aa\", \"aab\") -> true\n```\n\n---\nè‡ªå·±ç¬¬ä¸€æ¬¡åš LeetCode ä¸Šé¢çš„é¢˜ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç®—æ³•æ–¹é¢çš„å­¦ä¹ ï¼Œæ‘¸ç€çŸ³å¤´è¿‡æ²³ï¼Œæ­¥æ­¥æé«˜ã€‚\n\n### å¤§ä½“æ„æ€\nåˆ¤æ–­ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—æ¯æ˜¯å¦å¯ä»¥ç»„æˆç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—æ¯åªèƒ½ç”¨ä¸€æ¬¡ï¼›ä¸¤ä¸ªå­—ç¬¦ä¸²ä»…åŒ…å«å°å†™å­—æ¯\n\n### è‡ªå·±çš„æ€è·¯\nå°† ransom è½¬æˆ char æ•°ç»„ï¼Œéå†æ•°ç»„ï¼Œç„¶ååœ¨ magazinesï¼Œè¿›è¡Œå¯¹æ¯”ï¼Œç„¶åé™¤å»ä¸€ä¸ªä¸€æ ·çš„å­—æ¯\n\n``` java\npublic static boolean canConstruct(String ransom, String magazine) {\n\n\tif (ransom.length() > magazine.length()) {\n\t\treturn false;\n\t}\n\n\tchar[] ransomChar = ransom.toCharArray();\n\tfor (int i = 0; i < ransomChar.length; i++) {\n\t\tString str = String.valueOf(ransomChar[i]);\n\t\tif (magazine.indexOf(str) == -1) {\n\t\t\treturn false;\n\t\t} else if (magazine.indexOf(str) == magazine.length() - 2) {\n\t\t\tmagazine = magazine.substring(0, magazine.indexOf(str));\n\t\t} else {\n\t\t\tmagazine = magazine.substring(0, magazine.indexOf(str)) + magazine.substring(magazine.indexOf(str) + 1);\n\t\t}\n\t}\n\treturn true;\n}\n```\n\n### åˆ«äººçš„ç®—æ³•\n\n- [leetcode Ransom Note - ç»†è¯­å‘¢å–ƒ](https://www.hrwhisper.me/leetcode-ransom-note/)\n\n``` java\npublic class Solution {\n    public boolean canConstruct(String ransomNote, String magazine) {\n        int[] cnt = new int[26];\n        for (int i = 0; i < magazine.length(); i++) cnt[magazine.charAt(i) - 97]++;\n\t\tfor (int i = 0; i < ransomNote.length(); i++) if (--cnt[ransomNote.charAt(i) - 97] < 0) return false;\n\t\treturn true;\n    }\n}\n```\n\n- æˆ‘çš„ç†è§£\n26ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ å­˜æ”¾å­—æ¯çš„ä¸ªæ•°ï¼Œå¦‚æœéœ€è¦çš„å¤šäºå­˜åœ¨çš„ return false\n","tags":["leetcode"]},{"title":"ã€IMOOC-ä¸MySQLçš„é›¶è·ç¦»æ¥è§¦ã€‘ç¬”è®°","url":"/2016/07/31/imooc-meet-mysql-notes/","content":"\næ¶µç›–å…¨éƒ¨ MySQL æ•°æ®åº“çš„åŸºç¡€ï¼ŒMySQL æ•°æ®åº“çš„åŸºç¡€çŸ¥è¯†ã€æ•°æ®è¡¨çš„å¸¸ç”¨æ“ä½œåŠå„ç§çº¦æŸçš„ä½¿ç”¨ï¼Œä»¥åŠç»¼åˆçš„è¿ç”¨å„ç§å‘½ä»¤å®ç°è®°å½•è¿›è¡Œ CURD ç­‰æ“ä½œã€‚\n\n- MySQL å®‰è£…ä¸é…ç½®\n- æ•°æ®ç±»å‹\n- æµç¨‹æ§åˆ¶ä¸è¿ç®—ç¬¦\n- DDLã€DCLã€DQLã€DML\n- å¸¸ç”¨å‡½æ•°\n- è¡¨ç±»å‹ï¼ˆå­˜å‚¨å¼•æ“ï¼‰\n- å›¾å½¢åŒ–å·¥å…·\n\n<!-- more -->\n\n## ä¿®æ”¹ MySQL æç¤ºç¬¦\n\nMySQL å®¢æˆ·ç«¯çš„é»˜è®¤æç¤ºç¬¦æ˜¯ `mysql>`ï¼ŒåŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆå®é™…ä½œç”¨ã€‚å…¶å®å¯ä»¥ä¿®æ”¹è¿™ä¸ªæç¤ºç¬¦ï¼Œè®©å®ƒæ˜¾ç¤ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å½“å‰æ‰€åœ¨çš„æ•°æ®åº“ç­‰ã€‚ä¿®æ”¹æ–¹æ³•æœ‰å››ç§ï¼Œå…¶ä¸­å‰ä¸¤ç§åªå¯¹å½“å‰è¿æ¥æœ‰æ•ˆï¼Œåä¸¤ç§åˆ™å¯¹æ‰€æœ‰è¿æ¥æœ‰æ•ˆã€‚\n\n### è¿æ¥å®¢æˆ·ç«¯æ—¶é€šè¿‡å‚æ•°æŒ‡å®š\n\n```bash\nmysql --prompt=\"(\\u@\\h) [\\d]> \"\n```\n\n`my.cnf`\n\n```conf\n[mysql]\nprompt=mysql(\\\\u@\\\\h:\\\\d)>\n```\n\nè¿™æ ·æç¤ºç¬¦å°±ä¼šå˜æˆ `(user@host) [database]>`ã€‚å…¶ä¸­å¸¸ç”¨çš„å­—ç¬¦å‚æ•°æœ‰ï¼š\n\n- `\\D` å®Œæ•´çš„æ—¥æœŸ\n- `\\d` å½“å‰æ•°æ®åº“\n- `\\h` æœåŠ¡å™¨åç§°\n- `\\u` å½“å‰ç”¨æˆ·\n\nè¿æ¥ä¸Šå®¢æˆ·ç«¯åï¼Œé€šè¿‡ `prompt` å‘½ä»¤ä¿®æ”¹\n\n```sql\nprompt (\\u@\\h) [\\d]>\n```\n\nåœ¨ MySQL çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚\n\n```sql\nprompt=(\\\\u@\\\\h) [\\\\d]>\\\\_\n```\n\né€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ã€‚\n\n```sql\nexport MYSQL_PS1=\"(\\u@\\h) [\\d]> \"\n```\n\n> å‚è€ƒï¼šhttp://renial.iteye.com/blog/773675\n\n## MySQL è¯­æ³•è§„èŒƒ\n\n- å…³é”®å­—å’Œå‡½æ•°åç§°å…¨éƒ¨ **å¤§å†™**\n- æ•°æ®åº“åç§°ï¼Œè¡¨åç§°ï¼Œå­—æ®µåç§°å…¨éƒ¨ **å°å†™**\n- SQL è¯­å¥å¿…é¡»ä»¥ **åˆ†å·ç»“å°¾**\n\n## æ•°æ®åº“æ“ä½œ\n\n### æ•°æ®åº“åˆ›å»ºï¼šCREATE\n\n- è¯­æ³•ï¼šCREATE {DATABASE SCHEMA} [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset_name\n- DATABASE å’Œ SCHEMA æ˜¯ç›¸åŒçš„ï¼Œä»»é€‰å…¶ä¸€\n- IF NOT EXISTS:å¦‚æœåˆ›å»ºçš„æ•°æ®åº“å­˜åœ¨ï¼Œåˆ™ä¸åªæŠ¥å‡º warningï¼Œä¸å†™ä¼šæŠ¥é”™\n- CHRARCTER SET utf8:ä¸ºè¡¨è®¾ç½®ç¼–ç æ–¹å¼ï¼Œå¦‚æœä¸è®¾ç½®åˆ™ç”¨ mysql é»˜è®¤çš„ç¼–ç æ–¹å¼\n\n### æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ï¼šSHOW\n\n- SHOW { DATABASE SCHEMAS } [LIKE 'pattern' WHERE expr]\n- SHOW CREATE DATABASE xxï¼šæ˜¾ç¤º xx æ•°æ®åº“ä¿¡æ¯\n\n### æ•°æ®åº“çš„ä¿®æ”¹ï¼šALTER\n\n- ä¿®æ”¹æ•°æ®åº“ç¼–ç æ–¹å¼ï¼šALTER { DATABASE SCHEMAS } [db_name][default] CHARACTER SET [=] charset_name\n\n### åˆ é™¤æ•°æ®åº“ï¼šDROP\n\n- åˆ é™¤æ•°æ®åº“ï¼šDROP { DATABASE SCHEMAS } [IF EXISTS] db_name;\n\n```sql\n--ä¿®æ”¹mysqlæ“ä½œç¬¦ä¸ºå½“å‰æ—¥æœŸ\nmysql -uroot -proot prompt \\D\n--å±•ç¤ºæ‰€æœ‰æ•°æ®åº“\nshow databases;\n--åˆ›å»ºæ•°æ®åº“\ncreate database if not exists t1 character set gbk;\n--å±•ç¤ºæ•°æ®åº“t1çš„åˆ›å»ºå‘½ä»¤å’Œç¼–ç å½¢å¼\nshow create database t1;\n--ä¿®æ”¹æ•°æ®åº“ç¼–ç æ ¼å¼\nalter database t2 character set = utf8;\n--åˆ é™¤æ•°æ®åº“\ndrop database if exists t1;\n--å±•ç¤ºè­¦å‘Šä¿¡æ¯\nshow warnings;\n```\n\n## å››ã€æ•°æ®ç±»å‹\n\n![160731-imooc-mysql-tutorials-notes-int](https://user-images.githubusercontent.com/9289792/80199388-d5776280-8653-11ea-9182-29a23e53ba50.png)\n\n![160731-imooc-mysql-tutorials-notes-float](https://user-images.githubusercontent.com/9289792/80199384-d4decc00-8653-11ea-88ea-81e6e1f29f5a.png)\n\n![160731-imooc-mysql-tutorials-notes-char](https://user-images.githubusercontent.com/9289792/80199382-d3150880-8653-11ea-9c7c-2385530649ad.png)\n\n- char å‹å­—ç¬¦ä¸²æœ‰ 0-255 ä¹‹é—´çš„å­—èŠ‚ï¼Œé€šå¸¸è¢«ç§°ä½œå®šé•¿ç±»å‹ã€‚æ‰€å­˜å­—èŠ‚ä¸æ»¡ char å‹æ‰€ç»™å®ƒçš„å­—èŠ‚ï¼Œå‰©ä¸‹çš„ä»¥ç©ºæ ¼è¡¥é½ï¼Œä»ä¼šå­˜å‚¨æ»¡ä½ æ‰€ç»™å®ƒçš„å­—èŠ‚ã€‚\n- varchar å‹çš„å­—ç¬¦ä¸²æ˜¯å˜é•¿ç±»å‹ï¼Œå­˜å¤šå°‘å­—èŠ‚å®ƒå°±å­˜å‚¨å¤šå°‘å­—èŠ‚ï¼Œä¸ä¼šåœ¨åé¢è¡¥ä¸Šç©ºæ ¼ã€‚å­—èŠ‚é•¿åº¦åœ¨ 0-65535 ä¹‹é—´ã€‚\n- 1 ä¸ªå­—èŠ‚ç­‰äº 8 ä¸ª bitï¼ŒL+ å‡ ä¸ªå­—èŠ‚åé¢çš„å‡ ä¸ªå­—èŠ‚æŒ‡çš„æ˜¯ä»–çš„æœ€å¤§å­˜å‚¨èŒƒå›´ã€‚8 ä¸ª bit ç­‰äºå°±æ˜¯ 8 ä¸ª 1ï¼Œç›¸å½“äº 255ï¼Œå°±æ˜¯ 2 çš„ 8 æ¬¡æ–¹ã€‚16 ä¸ª 1 å°±ç›¸å½“äº 2 çš„ 16 æ¬¡æ–¹ã€‚3 ä¸ªå­—èŠ‚å››ä¸ªå­—èŠ‚ä¾æ¬¡ç±»æ¨ã€‚\n- ENUM æšä¸¾å€¼ å°±æ˜¯ç»™ä»–å‡ ä¸ªé€‰é¡¹ï¼Œå®ƒä»è¿™å‡ ä¸ªé€‰é¡¹ä¸­åšé€‰æ‹©ï¼Œæœ€å¤šæœ‰ 65535 ä¸ªå€¼ã€‚\n- SET æˆ‘ä»¬ç§°ä¹‹ä¸ºé›†åˆï¼Œé›†åˆæœ€å¤šæœ‰ 64 ä¸ªæˆå‘˜ï¼Œå®ƒåœ¨è¿™äº›é›†åˆæˆå‘˜ä¸­åšä»»æ„çš„æ’åˆ—ç»„åˆã€‚\n\n![160731-imooc-mysql-tutorials-notes-time](https://user-images.githubusercontent.com/9289792/80199391-d60ff900-8653-11ea-9836-4fa28ac1cb33.png)\n\n- YEARï¼š2 ä½æˆ–è€… 4 ä½ï¼Œ1970 åˆ° 2069 å¹´ï¼Œå…è®¸ 70 åˆ° 69\n- TIMEï¼š-8385959 åˆ° 8385959\n- DATEï¼š1000.01.01 åˆ° 9999.12.31\n- DATETIMEï¼š1000.01.01 00:00:00 åˆ° 9999.12.31 23:59:59\n- TIMESTAMPï¼š1970.01.01 00 ç‚¹èµ· åˆ° 2037 å¹´ä¹‹é—´çš„ä¸€ä¸ªå€¼\n\n## äº”ã€æ•°æ®è¡¨æ“ä½œ\n\n- æ•°æ®è¡¨ï¼ˆæˆ–è¡¨ï¼‰æ˜¯æ•°æ®åº“æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼Œæ˜¯å…¶ä»–å¯¹è±¡çš„åŸºç¡€\n- è¡¨æ˜¯ä¸€ä¸ªäºŒç»´è¡¨ï¼Œè¡Œç§°ä¸º `è®°å½•`ï¼Œåˆ—ç§°ä¸º `å­—æ®µ`\n\n### åˆ›å»ºæ•°æ®è¡¨æ®è¡¨\n\n1ã€æ‰“å¼€æ•°æ®åº“ï¼š`USE db_name;`\n2ã€æŸ¥çœ‹å½“å‰æ•°æ®åº“ï¼š`SELECT DATABASE();`\n3ã€åˆ›å»ºæ•°æ®è¡¨ï¼š\n\n```sql\nCREATE TABLE [IF NOT EXISTS] table_name(\ncolumn_name data_type,\n...\ncolumn_name data_type\n)\n```\n\n```sql\nCREATE TABLE tb1(\nusername VARCHAR(20),\nuserage TINYINT UNSIGNED,\nsalary FLOAT(8,2) UNSIGNED,\n);\n```\n\n### æŸ¥çœ‹æ•°æ®è¡¨\n\n```sql\nSHOW TABLES [FROM db_name] [LIKE 'pattern' WHERE expr];\n```\n\næŸ¥çœ‹å½“å‰é€‰æ‹©çš„æ•°æ®åº“çš„æ‰€æœ‰è¡¨\n\n```sql\nSHOW TABLES;\n```\n\næŸ¥çœ‹ MYSQL æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼Œå½“å‰é€‰æ‹©æ•°æ®åº“ä½ç½®ä¸å˜\n\n```sql\nSHOW TABLES FROM MYSQL;\n```\n\næŸ¥çœ‹å½“å‰é€‰æ‹©çš„æ•°æ®åº“\n\n```sql\nSELECT DATABASE();\n```\n\næŸ¥çœ‹æ•°æ®è¡¨ç»“æ„\n\n```sql\nSHOW COLUMNS FROM table_name;\n```\n\n### æ’å…¥ä¸æŸ¥æ‰¾\n\næ’å…¥è®°å½•\n\n```sql\nINSERT [INTO] tb_name [(col_name,col_name,...)] VALUES (va1,...)\n```\n\næŸ¥æ‰¾è®°å½•\n\n```sql\nSELECT expr,.. FROM tb_name\n```\n\n### ç©ºå€¼ä¸éç©º\n\nNULLï¼Œå­—æ®µå€¼å¯ä»¥ä¸ºç©º\nNOT NULLï¼Œå­—æ®µå€¼ç¦æ­¢ä¸ºç©º\n\n```sql\nCREATE TABLE tb2(\nusername VARCHAR(20) NOT NULL;\nage TINYINT UNSIGNE NULL;\n);\n```\n\n### è‡ªåŠ¨ç¼–å·\n\nè‡ªåŠ¨ç¼–å· `AUTO_INCREMENT`\nè‡ªåŠ¨ç¼–å·ï¼Œä¸”å¿…é¡»ä¸ä¸»é”®é…åˆä½¿ç”¨\n\nè‡ªåŠ¨ç¼–å· AUTO_INCREMENT ä½œç”¨\n1ã€è‡ªåŠ¨ç¼–å·ï¼šä¿è¯è®°å½•çš„å”¯ä¸€æ€§\n2ã€ç±»å‹å¿…é¡»ä¸ºæ•´å‹ï¼ˆå¯ä»¥æ˜¯ FLOAT(5,0)ç­‰ï¼Œå°æ•°ç‚¹åå¿…é¡»ä¸º 0ï¼‰ï¼Œå¿…é¡»å’Œä¸»é”® PRIMARY KEY ç»„åˆä½¿ç”¨\n3ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œèµ·å§‹å€¼ä¸º 1ï¼Œæ¯æ¬¡çš„å¢é‡ä¸º 1\n\n```sql\nCREATE TABLE tb3(\nid SMALLINT UNSIGNED AUTO_INCREMENT,\nusername VARCHAR(30) NOT NULL);\n-- æŠ¥é”™ï¼Œè‡ªåŠ¨å¢é‡å­—æ®µå¿…é¡»è®¾ç½®æˆä¸»é”®\n```\n\n### ä¸»é”®çº¦æŸ\n\n`PRIMARY KEY`ï¼Œä¹Ÿå¯ä»¥å†™æˆ`KEY`\n1ã€æ¯å¼ æ•°æ®è¡¨åªèƒ½å­˜åœ¨ä¸€ä¸ªä¸»é”®\n2ã€ä¸»é”®ä¿è¯è®°å½•çš„å”¯ä¸€æ€§\n3ã€ä¸»é”®è‡ªåŠ¨ä¸º`NOT NULL`ï¼Œå³å¿…é¡»è¦ä¸ºä¸»é”®èµ‹å€¼ã€‚ä½†å¦‚æœè®°å½•ä¸­æ·»åŠ äº†`AUTO_INCREMENT`ï¼Œé‚£ä¹ˆä¸éœ€è¦æ‰‹åŠ¨èµ‹å€¼\n4ã€`auto_increment`å¿…é¡»å’Œä¸»é”®`primary key`ä¸€èµ·ä½¿ç”¨ï¼Œä½†ä¸»é”®`primary key`ä¸ä¸€å®šè¦å’Œ`auto_increment`ä¸€å—ä½¿ç”¨\n\n```sql\nCREATE TABLE tb3(\nid SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\nusername VARCHAR(30) NOT NULL);\n```\n\n### å”¯ä¸€çº¦æŸ\n\n`PRIMARE KEY`\nä¸»é”®çº¦æŸ ä¸€å¼ è¡¨ä¸­åªèƒ½æœ‰ä¸€ä¸ª\n\n`UNIQUE KEY`\n1ã€å”¯ä¸€çº¦æŸ\n2ã€å”¯ä¸€çº¦æŸå¯ä»¥ä¿è¯è®°å½•çš„å”¯ä¸€æ€§\n3ã€å”¯ä¸€çº¦æŸçš„å­—æ®µå¯ä»¥ä¸ºç©ºå€¼\n4ã€æ¯å¼ æ•°æ®è¡¨å¯ä»¥å­˜åœ¨å¤šä¸ªå”¯ä¸€çº¦æŸ\n\n```sql\nCREATE TABLE tb3(\nid SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\nusername VARCHAR(30) NOT NULL UNIQUE KEY,\nage tinyint UNSIGNED\n);\n```\n\n- åœ¨åˆ›å»ºç´¢å¼•æ—¶ä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„\n\n### é»˜è®¤çº¦æŸ\n\n`DEFAULT` å½“æ’å…¥è®°å½•æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®ä¸ºå­—æ®µèµ‹å€¼ï¼Œåˆ™è‡ªåŠ¨èµ‹äºˆé»˜è®¤å€¼ã€‚\n\n```sql\nCREATE TABLE tb6(\nid SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\nusername VARCHAR(20) NOT NULL UNIQUE KEY,\nsex ENUM('1','2','3') DEFAULT '3'\n);\n```\n\nå…¶ä¸­å¯¹æ€§åˆ«å­—æ®µé»˜è®¤é€‰æ‹©`3`\n\n## å…­ã€çº¦æŸä»¥åŠä¿®æ”¹æ•°æ®è¡¨\n\n- FOREIGN KEYï¼šä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œå®Œæ•´æ€§ï¼›å®ç°ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šå…³ç³»ã€‚\n- è¦æ±‚ï¼šçˆ¶è¡¨å’Œå­è¡¨å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å­˜å‚¨å¼•æ“,è€Œä¸”ç¦æ­¢ä½¿ç”¨ä¸´æ—¶è¡¨ï¼›æ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“åªèƒ½ä¸º InnoDBï¼›å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»å…·æœ‰ç±»ä¼¼çš„æ•°æ®ç±»å‹ã€‚å…¶ä¸­æ•°å­—çš„é•¿åº¦æˆ–æ˜¯å¦æœ‰ç¬¦å·ä½å¿…é¡»ç›¸åŒï¼›è€Œå­—ç¬¦çš„é•¿åº¦åˆ™å¯ä»¥ä¸åŒï¼›å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»åˆ›å»ºç´¢å¼•ã€‚å¦‚æœå¤–é”®åˆ—ä¸å­˜åœ¨ç´¢å¼•çš„è¯ï¼ŒMySQL å°†è‡ªåŠ¨åˆ›å»ºç´¢å¼•ã€‚\n- åœ¨ MY.ini æ–‡ä»¶ä¸­ç¼–è¾‘é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼šdefault-storage-engine=INNODBï¼›\n- æ˜¾ç¤ºåˆ›å»ºè¡¨çš„è¯­å¥ï¼šSHOW CREATE TABLE table_nameï¼›\n- æŸ¥çœ‹è¡¨æ˜¯å¦æœ‰ç´¢å¼•ï¼šSHOW INDEXS FROM table_nameï¼›\n- ä»¥ç½‘æ ¼æŸ¥çœ‹è¡¨æ˜¯å¦æœ‰ç´¢å¼•ï¼šSHOW INDEXS FROM table_name\\Gï¼›\n\n```sql\nCREATE TABLE table_name1(\nid SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\nname VARCHAR(20) NOT NULL\n)\n```\n\n```sql\nCREATE TABLE table_name2(\nid SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\nusername VARCHAR(20) NOT NULL,\npid SMALLINT UNSIGNED,\nFOREIGN KEY (pid) REFERENCES table_name1(id) /* å¤–é”® pid å‚ç…§ table_name1ä¸­çš„ id å­—æ®µ */\n)\n```\n\n-- EOF --\n","tags":["mysql"]},{"title":"Linux SSH å¯†é’¥ç™»é™†å…å¯†ç ","url":"/2016/07/29/linux-ssh-key-login-without-password/","content":"\næœ€è¿‘æœ‰éœ€æ±‚ä½¿ç”¨ SSH è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸”è¦éœ€å…å¯†ç ï¼Œæ€»ç»“äº† SSH å¯†é’¥ç™»é™†å…å¯†ç çš„æ–¹æ³•ã€‚\n\n## å¿«é€Ÿé…ç½®\n\n- æœ¬æœº ipï¼š192.168.1.1\n- æœåŠ¡å™¨ ipï¼š192.168.1.2\n\nè¦å®ç°æœ¬æœºå…å¯†ç ç™»å½•æœåŠ¡å™¨ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š\n\n```bash\nssh-copy-id username@192.168.1.2\n```\n\nå¦‚æœå‘½ä»¤æˆåŠŸï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸã€‚å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œåˆ™éœ€è¦å‚è€ƒä¸‹é¢çš„æ­¥éª¤è¿›è¡Œé…ç½®ã€‚\n\n<!-- more -->\n\n## æœ¬åœ°é…ç½®æ­¥éª¤\n\n### å®¢æˆ·ç«¯ç”Ÿæˆå…¬é’¥ã€ç§é’¥\n\n```bash\nssh-keygen -t rsa -P ''\n```\n\n- `-t` è¡¨ç¤º `key` çš„ç±»å‹\n- `-P` è¡¨ç¤ºå¯†ç ï¼Œ`-P ''` å°±è¡¨ç¤ºç©ºå¯†ç ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨ `-P` å‚æ•°\n\nè¿è¡Œå®Œä¹‹ååœ¨ `~/.ssh` ç›®å½•ä¸‹ç”Ÿæˆç§é’¥ `id_rsa` å’Œå…¬é’¥ `id_rsa.pub`ã€‚\n\n### å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨\n\nå°†å®¢æˆ·ç«¯å…¬é’¥ `id_rsa.pub` å†™å…¥åˆ°æœåŠ¡ç«¯ `~/.ssh/authorzied_keys` ä¹‹ä¸­ã€‚\n\n```bash\ncat ~/.ssh/id_rsa.pub\n```\n\nå¤åˆ¶è¾“å‡ºçš„å†…å®¹ï¼Œç™»é™†æœåŠ¡ç«¯ï¼š\n\n```bash\nvim ~/.ssh/authorized_keys\n```\n\nç²˜è´´åˆ°æœ€åä¸€è¡Œã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ª `authorzied_keys` æ–‡ä»¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªã€‚\n\n### è®¾ç½®æ–‡ä»¶æƒé™\n\næœåŠ¡ç«¯ï¼Œéå¿…é¡»ã€‚\n\n```bash\nsudo chmod 755 ~/.ssh\nsudo chmod 600 ~/.ssh/authorized_keys\n```\n\n### å®¢æˆ·ç«¯é‡å¯æœåŠ¡\n\n```bash\nsudo service ssh restart\n```\n\næ­¤æ—¶å°±å¯ä»¥ä¸å…å¯†ç ç™»é™†æœåŠ¡ç«¯äº†ã€‚\n\n## ä»¥è¯ä¹¦ç™»å½•å ä½¿ç”¨ sudo æ“ä½œ\n\nè®¾ç½®ç”¨æˆ·ä»¥è¯ä¹¦ç™»å½•åï¼Œä½¿ç”¨ sudo æ“ä½œã€‚åœ¨æœåŠ¡ç«¯è®¾ç½®ï¼š\n\n```bash\nsudo visudo\n```\n\n```bash\n%sudo ALL=(ALL:ALL) ALL\n\n# å°†ä¸Šä¸€è¡Œæ›¿æ¢ä¸ºï¼š\n\n%sudo ALL=(ALL) NOPASSWD:ALL\n```\n\n## ç±»ä¼¼ AWS PEM é…ç½®æ–¹æ³•\n\näºšé©¬é€Š AWS è™šæ‹ŸæœåŠ¡å™¨ä½¿ç”¨ä¸€ä¸ªé¢„å…ˆç”Ÿæˆçš„ `*.pem` è¯ä¹¦æ–‡ä»¶ï¼ˆå¯†é’¥ï¼‰ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹è¿æ¥ã€‚ ä¾‹å¦‚ï¼š\n\n```bash\nssh -i ~/ec2.pem ubuntu@12.34.56.78\n```\n\né¦–å…ˆç¡®å®šä½ å¯ä»¥ä»¥å¯†ç çš„å½¢å¼è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ [åˆ›å»ºä¸€ä¸ªéè¶…çº§ç®¡ç†å‘˜ç”¨æˆ·ï¼Œå¹¶å¢åŠ  sudo æƒé™](http://blog.csdn.net/hanshileiai/article/details/51141854)ã€‚\n\n```bash\nsudo ssh root@12.34.56.78\n```\n\n### å®¢æˆ·ç«¯ç”ŸæˆéªŒè¯æ²¡æœ‰å¯†ç å¯†é’¥å¯¹\n\n```bash\nssh-keygen -t rsa -b 2048 -v\n```\n\næ‰§è¡Œä¸Šè¿°å‘½ä»¤é¦–å…ˆä¼šè®©ä½ è¾“å…¥ç”Ÿæˆå¯†é’¥çš„æ–‡ä»¶åï¼šæˆ‘è¿™é‡Œè¾“å…¥çš„ `myPemKey` ä¹‹åä¸€è·¯å›è½¦ã€‚\n\n```bash\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/anonymouse/.ssh/id_rsa): myPemKey\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in hetzner.\nYour public key has been saved in hetzner.pub.\nThe key fingerprint is:\nbb:c6:9c:ee:6b:c0:67:58:b2:bb:4b:44:72:d3:cc:a5 localhost@localhost\nThe key's randomart image is:\n```\n\nåœ¨æ‰§è¡Œå‘½ä»¤çš„å½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª `myPemKey.pub`ã€`myPemKey` ä¸¤ä¸ªæ–‡ä»¶ã€‚\n\n### æœåŠ¡ç«¯æ·»åŠ å…¬é’¥\n\næŠŠç”Ÿæˆçš„ `myPemKey.pub` é€šè¿‡æœ¬åœ°å‘½ä»¤æ¨é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œä½¿æœåŠ¡å™¨è‡ªåŠ¨æ·»åŠ è®¤è¯è¿™ä¸ªè¯ä¹¦\n\n```bash\nssh-copy-id -i ~/myPemKey.pub root@12.34.56.78\n```\n\nè¾“å…¥ä½ çš„ `root` ç”¨æˆ·å¯†ç \n\n### æµ‹è¯•è¿æ¥\n\n```bash\nsudo ssh -i ~/myPemKey root@12.34.56.78\n```\n\næˆ–è€…æŠŠ `myPemKey` é‡å‘½åä¸º `myPemKey.pem`\n\n```bash\nsudo ssh -i ~/myPemKey.pem root@12.34.56.78\n```\n\n### ç¦ç”¨å¯†ç è¿æ¥\n\n**æ³¨æ„ï¼šè¦ä¿è¯ .pem è¿æ¥æˆåŠŸçš„çŠ¶æ€ä¸‹ï¼Œç¦ç”¨å¯†ç è¿æ¥ã€‚**\n\n```bash\nsudo vi /etc/ssh/sshd_config\n```\n\næ‰¾åˆ°è¿™ä¸€è¡Œ `#PasswordAuthentication yes` å–æ¶ˆå‰è¾¹çš„ # æ³¨é‡Šï¼Œæ”¹ä¸ºï¼š\n\n```bash\nPasswordAuthentication no\n```\n\né‡å¯ ssh æœåŠ¡\n\n```bash\nsudo service ssh restart\n```\n\n## References\n\n- [éŸ©ä¸–ç£Š-ubuntu ç”Ÿæˆ .pem è¯ä¹¦è¿æ¥æœåŠ¡å™¨ï¼Œå–æ¶ˆ OpenSSH å¯†é’¥å¯†ç è®¤è¯](http://blog.csdn.net/hanshileiai/article/details/51141638)\n- [éŸ©ä¸–ç£Š-ubuntu ssh è¯ä¹¦ç™»å½•ï¼ˆä¸è¾“å…¥å¯†ç ï¼‰](http://blog.csdn.net/hanshileiai/article/details/50381467)\n\n-- EOF --\n","tags":["linux","ssh"]},{"title":"ã€IMOOC-MySQLå¼€å‘æŠ€å·§ã€‘ç¬”è®°","url":"/2016/07/25/imooc-mysql-development-skills-notes/","content":"\nä¸»è¦æ¶‰åŠï¼šJOIN ã€JOIN æ›´æ–°ã€GROUP BY HAVING æ•°æ®æŸ¥é‡/å»é‡ã€‚\n\n<!-- more -->\n\n## INNER\n\nINNER JOINã€LEFT JOINã€RIGHT JOINã€FULL JOIN(MySQL ä¸æ”¯æŒ)ã€CROSS JOIN\n\nè¿™æ˜¯åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„éå¸¸å¥½çš„ä¸€ç¯‡åšæ–‡ï¼Œå›¾è§£ JOIN è¯­å¥ï¼š\n\n> [CODING HORROR-A Visual Explanation of SQL Joins](https://blog.codinghorror.com/a-visual-explanation-of-sql-joins/)\n\nä¸‹å›¾å¯ä»¥å¾ˆæ¸…æ¥šçš„æ˜ç™½ï¼ŒJOIN çš„æ•°æ®é€‰å–èŒƒå›´ï¼š\n\n![160725-imooc-mysql-development-skills-notes-001](https://user-images.githubusercontent.com/9289792/80199172-9d701f80-8653-11ea-8d20-498f54e41708.png)\n\n![160725-imooc-mysql-development-skills-notes-002](https://user-images.githubusercontent.com/9289792/80199188-9fd27980-8653-11ea-9386-e76dca7b4d0c.jpeg)\n\n## æ›´æ–°ä½¿ç”¨è¿‡æ»¤æ¡ä»¶ä¸­åŒ…æ‹¬æœ¬èº«çš„è¡¨\n\næ›´æ–° `t1` `t2` è¡¨ä¸­ `col_a` é‡å¤çš„å­—æ®µï¼š\n\n```sql\nUPDATE t1\nSET col_a = 'hi'\nWHERE t1.col_a IN (\n  SELECT b.col_a\n  FROM t1 a INNER JOIN t2 b on\n  a.col_a = b.col_a\n)\n;\nERROR:1093\n```\n\nå¯è½¬æ¢ä¸ºï¼š\n\n```sql\nUPDATE t1 aa JOIN(\n  SELECT b.col_a\n  FROM t1 a INNER JOIN t2 b on\n  a.col_a = b.col_a\n)bb on aa.col_a= bb.col_a\nSET col_a = 'hi'\n;\n```\n\n## æŸ¥è¯¢é‡å¤æ•°æ®ã€åˆ é™¤é‡å¤æ•°æ®\n\nåˆ©ç”¨ `GROUP BY` å’Œ `HAVING` æŸ¥è¯¢é‡å¤æ•°æ®ï¼š\n\n```sql\nSELECT col_a, COUNT(*)\nFROM t1\nGROUP BY col_a HAVING COUNT(*) > 1\n;\n```\n\nåˆ é™¤é‡å¤æ•°æ®ï¼Œå¯¹äºç›¸åŒæ•°æ®ä¿ç•™ ID æœ€å¤§çš„ï¼š\n\n```sql\nDELETE a\nFROM t1 a JOIN (\n  SELECT col_a,COUNT(*),MAX(id) AS id\n  FROM t1\n  GROUP BY col_a HAVING COUNT(*) > 1\n)b ON a.col_a = b.col_a\nWHERE a.id < b.id\n;\n```\n\n-- EOF --\n","tags":["mysql"]},{"title":"å†™ä¸€äº›äººæ–‡çš„æ—¥å¿—","url":"/2016/07/11/write-some-humanities-diary/","content":"\nè¿˜æ˜¯è¶Šæ¥è¶Šè§‰çš„æ€æƒ³é‡è¦ã€‚æ¯å‘¨ç»™è‡ªå·±åšå®¢çš„è®¡åˆ’æ˜¯å†™ä¸‰ç¯‡ï¼Œç¨ç¨æ”¹åŠ¨ä¸‹ï¼šå…¶ä¸­ä¸€ç¯‡è¦æ˜¯å…³äºæ€æƒ³ä¸Šçš„ã€‚\n\nå‘¨æœ«çš„æ—¶å€™å’ŒåŒ—äº¬çš„æœ‹å‹ä»¬ï¼šé¾™ã€æ¢¦ã€æ€ï¼Œå°èšäº†ä¸‹ã€‚é—®èµ·æ¯•ä¸šä¸€ä¸ªæœˆæ„Ÿè§‰æœ‰å•¥å˜åŒ–ï¼Œéƒ½è¯´æ²¡å•¥ã€‚æ˜¯ï¼Œåˆšåˆšæ‰ä¸€ä¸ªæœˆã€‚å¯æˆ‘å¿ƒé‡Œå´æœ‰äº›å°æ…Œå¼ ï¼Œæ€»æƒ³æä¸ªå¤§æ–°é—»ï¼Œè®©è‡ªå·±ä¸é‚£ä¹ˆå¹³å‡¡ã€‚æ˜¯çœ¼é«˜æ‰‹ä½å—ï¼Ÿ\n\n<!-- more -->\n\nç°åœ¨æ¯å¤©éƒ½ä¼šè·‘è·‘æ­¥ï¼Œå·²ç»åšæŒäº† 6 å¤©äº†ä¹Ÿä¹ æƒ¯äº†ï¼ŒæŒºèµçš„ã€‚ä¹Ÿæ€»æ˜¯å»äº†è§£æ–°é²œçš„ä¸œè¥¿æŠ€æœ¯ï¼Œå¹¶ä¸”å°è¯•è¿ç”¨å®ƒä»¬ï¼Œæ‰æœ‰ç‚¹åŸæ¥å­¦é•¿ä»¬ä¸å–œæ¬¢ç”¨ç”¨è¿‡çš„ä¸œè¥¿åšäº‹æƒ…çš„åŠ²ã€‚å…³äºè‹±è¯­çš„å­¦ä¹ ï¼Œç°åœ¨æ‰¾åˆ°ä¸€ä¸ªæ³•ï¼šé˜…è¯»è‹±æ–‡çš„æŠ€æœ¯æ•™ç¨‹æˆ–è€…æŠ€æœ¯æ–‡æ¡£ã€‚è¿™äº›ä¸œè¥¿è‚¯å®šå’Œè®¡ç®—æœºæœ‰å…³ï¼Œä¹Ÿå†™çš„æ¯”è¾ƒé€šä¿—ï¼Œæ„Ÿè§‰æŒºæœ‰æ”¶è·çš„ã€‚\n\næœ€è¿‘çŠ¶æ€è¿˜ä¸é”™ï¼Œå°±æ˜¯æ™šä¸Šæƒ³çœ‹ä¼šä¹¦ï¼Œå¯çœ¼ç›æŒºç´¯çš„ã€‚èŒä¸šç”Ÿæ¶¯çš„ç¬¬ä¸€ä¸ªæœˆï¼Œç»æµæœ‰äº›å›°éš¾ã€‚æƒ³å‚ä¸ä¸ªå¼€æºé¡¹ç›®ã€‚ç°åœ¨æ‰‹å¤´é¡¹ç›®å°±è‡ªå·±ä¸€ä¸ªäººåœ¨ç¼–ï¼Œæœ‰ç‚¹å­¤ç‹¬ï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±è®¾è®¡çš„å’Œå†™çš„å“ªé‡Œå¥½å“ªé‡Œä¸å¥½ã€‚è¿˜æœ‰å°±æ˜¯åœ¨ GitHub æˆ–è€… StackOverflow æœ‰äººç»™è‡ªå·±ç‚¹èµï¼Œæ„Ÿè§‰æŒºæ¿€åŠ¨çš„ã€‚\n\nå› ä¸ºå…¬å¸éƒ½æ˜¯ Google çš„æœåŠ¡ï¼Œå‡ºé—¨å¾ˆæ–¹ä¾¿ï¼ŒGitHub ä¹Ÿç”¨çš„è¶Šæ¥è¶Šå¤šã€‚æ—¶ä¸æ—¶æ€»èƒ½æœåˆ°ã€çœ‹åˆ°å¾ˆå¤šå·¥ç¨‹å¸ˆå†™çš„åšå®¢ï¼Œæœ‰æ•™ç¨‹ã€æœ‰åˆ†äº«ï¼Œè¿˜æœ‰æˆ‘æœ€å–œæ¬¢çœ‹çš„ï¼šä»–ä»¬çš„æ€æƒ³ã€‚æˆ‘è§‰çš„ä»–ä»¬ç°åœ¨éƒ½æ˜¯æ¯”æˆ‘æ£’çš„ï¼Œæˆ‘æƒ³çŸ¥é“ä»–ä»¬æ˜¯æ€ä¹ˆæƒ³çš„ã€æ€ä¹ˆè§£å†³é—®é¢˜ã€æ€ä¹ˆçœ‹å¾…é—®é¢˜ã€çœ‹å¾…å·¥ä½œç”Ÿæ´»ã€‚\n\næœ€åæ¯’å¥¶ä¸€å£è‡ªå·±ï¼š\n\n> ä¸é‚£äº›åæ ¡çš„åŒå­¦çš„å·®è·ä¸æ˜¯æ¯•ä¸šåçš„è–ªæ°´ï¼Œä¹Ÿä¸æ˜¯å­¦ä¸šæ°´å¹³çš„å·®è·ï¼Œè€Œæ˜¯ä¸€ç§æ€ç»´æ–¹å¼ä¸åšäº‹æ ‡å‡†ã€‚\n> å¯¹è‡ªå·±çš„æ ‡å‡†ä¼šä¸ç”±è‡ªä¸»çš„é™ä½ä»¥é€‚åº”è¿™ä¸ªç¯å¢ƒï¼Œå‡å°‘è‡ªèº«ä¸ç¯å¢ƒçš„å†²çªï¼Œåœ¨ä¸€ä¸ªä½æ ‡å‡†ä¸‹ï¼Œè‡ªè§‰â€œæ»¡æ„â€çš„åº¦è¿‡æ¯ä¸€å¤©ã€‚\n> &nbsp;\n> ä¸ºä»€ä¹ˆåä¼å–œæ¬¢è¦åæ ¡çš„å­¦ç”Ÿï¼Ÿå…¶å®åä¼è¦çš„ä¸æ˜¯å¤šä¹ˆé«˜çš„ GPA æˆç»©ï¼Œè€Œæ˜¯ä¸€ç§å†…åœ¨çš„ç²¾ç¥çŠ¶æ€ã€‚ä»–ä»¬çš„è¾›è‹¦ä¸å«è¾›è‹¦ï¼Œä¹Ÿä¸ä¸ºç™¾ä¸‡å¹´è–ªã€‚è¾›è‹¦æ˜¯ä»–ä»¬è·å¾—è‡ªæˆ‘å®ç°çš„é€”å¾„ï¼Œè‡ªæˆ‘æ˜¯å®ç°ä½¿ä»–æ— ç©·å¿«ä¹ã€‚è¿™ä¸–ç•Œå°±æ˜¯ä¸€æ‹¨äººåœ¨æ˜¼å¤œä¸åœçš„é«˜é€Ÿè¿è½¬ï¼Œå¦ä¸€æ‹¨äººèµ·åºŠå‘ç°ä¸–ç•Œå˜äº†ã€‚\n> &nbsp;\n> æˆ‘ä»¬å¤§éƒ¨åˆ†äººçš„å·¥ä½œå’Œç”Ÿæ´»çŠ¶æ€æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ\n> ä¸Šç­ç¨å¾®åŠªåŠ›ç‚¹å°±å¼€å§‹è®²ç©¶å…¬å¹³ï¼Œè‡ªå·±ä¸å¾—å¿—å°±å¼€å§‹æŠ±æ€¨å…¬å¸å’Œé¢†å¯¼ï¼Œä¸‹ç­åçœ‹å‡ é¡µä¹¦å°±è§‰å¾—è‡ªå·±ç‰¹åˆ«ä¸Šè¿›ï¼Œè¾›è‹¦ä¸Šå‡ å¤©å°±è§‰å¾—è‡ªå·±è¦èµ¶ç´§å»äº«å—ä¸€ä¸‹ç”Ÿæ´»äº†ï¼ŒåŠ å‡ å¤©ç­å°±æ‹…å¿ƒè‡ªå·±ä¼šè¿‡åŠ³æ­»ã€‚\n> é‡åˆ°äº›é¸¡æ¯›è’œçš®çš„å°äº‹å„¿å°±éƒéƒå¯¡æ¬¢ï¼Œä»¿ä½›é‡åˆ°äº†å¤©å¤§çš„äººç”Ÿéš¾é¢˜ç£¨ç£¨å”§å”§è§£å†³ä¸æ¸…ã€‚çœ‹è§ç‰›é€¼çš„äººä¹Ÿä¼šå¿ƒç”Ÿç¾¡æ…•ï¼Œä½†æ€»ä¹Ÿçªç ´ä¸äº†åŠªåŠ›å´æ€»ä¸å¾—è¦é¢†é­”å’’ã€‚\n> &nbsp;\n> è¶Šèƒ½å¹²ï¼Œè¶ŠåŠªåŠ›ï¼›è¶Šæœ‰é’±ï¼Œè¶Šä¸Šè¿›\n> è€Œé€ æˆè¿™ä¸€åˆ‡çš„å·®å¼‚ï¼Œæœ€ä¸»è¦çš„æ¥è‡ªäººçš„ç²¾ç¥å†…æ ¸ã€‚\n> &nbsp;\n> ä½ è¦ç”¨ç‰›äººçš„æ ‡å‡†è¦æ±‚è‡ªå·±ï¼Œä¸æ–­çš„èµ°åˆ°ç‰›äººå½“ä¸­å»ï¼Œæ‹‰è¿‘å’Œç‰›äººä¹‹é—´çš„è·ç¦»ã€‚å½“ä½ è§‰å¾—è‡ªå·±èƒ½å¤Ÿæˆä¸ºä»–ä»¬ä¸­çš„ä¸€å‘˜çš„æ—¶å€™ï¼Œä½ æ‰èƒ½æˆä¸ºäº†çœŸæ­£çš„ç‰›äººã€‚\n\næˆåŠŸï¼Ÿæˆ‘æ‰åˆšä¸Šè·¯å‘¢ã€‚\n\n-- EOF --\n","tags":["report"],"categories":["report"]},{"title":"Ubuntu JDK Nginx WildFly MySQL ç¯å¢ƒé…ç½®","url":"/2016/07/07/ubuntu-jdk-nginx-wildfly-mysql-config/","content":"\næ–°é¡¹ç›®éƒ¨ç½²ä¸Šçº¿ï¼Œä¸»è¦å‚è€ƒ [ä¸–é›·åšå®¢](http://blog.csdn.net/hanshileiai) çš„å†…å®¹ï¼Œè‡ªå·±ä¹Ÿæ€»ç»“äº†ä¸‹ã€‚ä» JDK å®‰è£…ã€Web å®¹å™¨ã€æ•°æ®åº“ï¼Œéƒ½æœ‰æ¶‰åŠæ¯”è¾ƒå…¨é¢ã€‚\n\n## JDK8\n\n### å®‰è£… JDK8\n\n1ã€æ·»åŠ è½¯ä»¶æº\n\n```bash\nsudo add-apt-repository ppa:webupd8team/java\n```\n\n2ã€æ›´æ–°è½¯ä»¶æº\n\n```bash\nsudo apt-get update\n```\n\n3ã€å®‰è£… jdk1.8\n\n```bash\nsudo apt-get install oracle-java8-installer\n```\n\n### æŸ¥çœ‹ Java å®‰è£…è·¯å¾„\n\n```bash\nsudo update-alternatives --config java\nsudo update-alternatives --config javac\n```\n\n### æŸ¥çœ‹ Java å®‰è£…åçš„ç‰ˆæœ¬\n\n```bash\njava -version\n```\n\n### ï¼ˆæ‰©å±•ï¼‰å¢åŠ å¤šç‰ˆæœ¬ JDK å’Œåˆ‡æ¢æ–¹æ³•\n\n1ã€å®‰è£… JDK 6 å’Œ JDK 7\n\n```bash\nsudo apt-get install oracle-java6-installer\nsudo apt-get install oracle-java7-installer\n```\n\n2ã€æŸ¥çœ‹æ‰€æœ‰ JDK å®‰è£…ç‰ˆæœ¬\n\n```bash\nsudo update-java-alternatives -l\njava-6-oracle 3 /usr/lib/jvm/java-6-oracle\njava-7-oracle 4 /usr/lib/jvm/java-7-oracle\njava-8-oracle 2 /usr/lib/jvm/java-8-oracle\n```\n\n3ã€é€šè¿‡ `-s` å‚æ•°å¯ä»¥æ–¹ä¾¿çš„åˆ‡æ¢åˆ°å…¶å®ƒçš„ JDK ç‰ˆæœ¬\n\n```bash\nsudo update-java-alternatives -s java-6-oracle\n```\n\n```bash\nsudo update-java-alternatives -s java-7-oracle\n```\n\n```bash\nsudo update-java-alternatives -s java-8-oracle\n```\n\n4ã€å†æ¬¡æŸ¥çœ‹ JDK ç‰ˆæœ¬\n\n```\njava -version\n```\n\n```\njava version \"1.6.0_45\"\nJava(TM) SE Runtime Environment (build 1.6.0_45-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)\n```\n\n<!-- more -->\n\n## Nginx\n\n### Nginx å®‰è£…\n\n1ã€æ›´æ–°è½¯ä»¶æº\n\n```\nsudo apt-get update\n```\n\n2ã€å®‰è£… Nginx\n\n```\nsudo apt-get install nginx\n```\n\n3ã€æŸ¥çœ‹ Nginx ä½ç½®\n\n```\nwhereis nginx\n```\n\n### Nginx ç¦æ­¢å¤–ç½‘è®¿é—®\n\né˜²æ­¢ Google æ”¶å½•\n\n```\nsudo vi /etc/nginx/sites-enabled/default\n```\n\nåœ¨ `server` ä¸­æ·»åŠ \n\n```\n# server add\n# å…¬å¸ä»£ç†IP\nallow *.*.*.*;\ndeny all;\n```\n\n### Nginx åŸŸåè°ƒæ•´\n\nåŸŸå `www` è·³è½¬ `non www`ï¼Œ`server` ä¸­æ·»åŠ é…ç½®\n\n```\nserver_name www.aaa.org aaa.org;\nif ($host != 'aaa.org'){\n\trewrite ^/(.*)$ http://aaa.org/$1 permanent;\n}\n```\n\n### Nginx GZip\n\n```\n##\n# Gzip Settings\n##\n\ngzip on;\ngzip_disable \"msie6\";\n\ngzip_vary on;\ngzip_min_length 1k;\ngzip_proxied any;\ngzip_comp_level 6;\ngzip_buffers 16 8k;\ngzip_http_version 1.1;\ngzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/x-httpd-php image/jpeg image/gif image/png image/x-icon\n```\n\n### Nginx é™æ€æ–‡ä»¶ç¼“å­˜\n\n```\nlocation ~*\\.(gif|jpg|jpeg|png|bmp|swf|woff|icon)$ {\n\tproxy_cache my_zone;\n\tproxy_cache_bypass $http_cache_control;\n\tproxy_cache_valid 200 1d;\n\tadd_header X-Proxy-Cache $upstream_cache_status;\n\texpires 15d;\n}\n\nlocation ~ .*\\.(js|css|ttf)$ {\n\tproxy_cache my_zone;\n\tproxy_cache_bypass $http_cache_control;\n\tproxy_cache_valid 200 1d;\n\tadd_header X-Proxy-Cache $upstream_cache_status;\n\texpires 15d;\n}\n```\n\né™æ€æ–‡ä»¶æ”¾åœ¨é…ç½®çš„ `root` ä¸‹\n\n```\nroot /opt/***;\n```\n\nè¿˜æœ‰ä¸ªæŠ€å·§ï¼Œé¡¹ç›®ä¸­å¤§é‡èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ PDFï¼Œåœ¨è®¾è®¡è®¿é—® url æ—¶å¯ä»¥ `**/pdf/**`ï¼Œè¿™æ ·åœ¨ Nginx è¿›è¡Œé…ç½®å°±å¯ä»¥å°†æ–‡ä»¶åˆ†ç¦»å‡ºé¡¹ç›®ï¼›è¿™äº›æ–‡ä»¶ä¹Ÿæ”¾åœ¨ `root` è·¯å¾„ä¸‹ã€‚\n\n```\nlocation ^~ /html/ {\n}\nlocation ^~ /pdf/ {\n}\n```\n\n### Nginx Commands\n\n```\nsudo service nginx stop\nsudo service nginx start\nsudo service nginx restart\n```\n\n### Nginx Show Log\n\n```\nsudo tail -f /var/log/nginx/error.log\n```\n\n## WildFly 10.0.0.Final\n\n### WildFly å®‰è£…\n\n1ã€ä¸‹è½½ WildFlyï¼Œå¹¶æå–åˆ° /opt ç›®å½• WildFly 10.0.0.Final [ä¸‹è½½åœ°å€](http://wildfly.org/downloads/)\n\n```\ncd /opt\nsudo wget -c http://download.jboss.org/wildfly/10.0.0.Final/wildfly-10.0.0.Final.tar.gz\nsudo tar -xzvf wildfly-10.0.0.Final.tar.gz\n```\n\n2ã€åˆ›å»º WildFly ç”¨æˆ·å’Œç»„\n\n```\nsudo addgroup wildfly\nsudo useradd -g wildfly wildfly\n```\n\næ”¹å˜ wildfly æ–‡ä»¶å¤¹çš„æ‰€æœ‰æƒï¼š\n\n```\nsudo chown -R wildfly:wildfly /opt/wildfly-10.0.0.Final\n```\n\nåˆ›å»ºä¸€ä¸ªé“¾æ¥æ˜ å°„ï¼ˆå¥½å¤„ï¼šå¦‚æœä½ æ”¹å˜ WildFly ç‰ˆæœ¬,ä¸éœ€è¦æ›´æ–°å…¶ä»–é…ç½®ï¼‰\n\n```\nsudo ln -s wildfly-10.0.0.Final /opt/wildfly\n```\n\n3ã€å®‰è£… init.d è„šæœ¬\nè®¾ç½®å¹¶ä½¿ç”¨ init.d è„šæœ¬æ¥å¯åŠ¨å’Œåœæ­¢ WildFlyã€‚å¤åˆ¶`/opt/wildfly/bin/init.d/wildfly-init-debian.sh`è„šæœ¬åˆ° `/etc/init.d/wildfly`ï¼Œæ›´æ”¹æƒé™,å¹¶ä½¿å…¶å¯æ‰§è¡Œ\n\n```\nsudo cp /opt/wildfly/docs/contrib/scripts/init.d/wildfly-init-debian.sh /etc/init.d/wildfly\nsudo chown root:root /etc/init.d/wildfly\nsudo chmod ug+x /etc/init.d/wildfly\n```\n\nå¯åŠ¨/åœæ­¢ WildFly å‘½ä»¤\n\n```\nsudo /etc/init.d/wildfly start\nsudo /etc/init.d/wildfly stop\n```\n\n4ã€WildFly åšä¸ºç³»ç»ŸæœåŠ¡ï¼Œå¼€æœºå¯åŠ¨\n\n```\nsudo update-rc.d wildfly defaults\n```\n\n### é…ç½® WildFly å…è®¸æ‰€æœ‰ ip è®¿é—®\n\n1ã€æ‰“å¼€é…ç½®æ–‡ä»¶ `standalone.xml`\n\n```\nsudo vi /opt/wildfly/standalone/configuration/standalone.xml\n```\n\n2ã€æ›¿æ¢æ­¤å¤„\n\n```\n<interface name=\"management\">\n    <inet-address value=\"${jboss.bind.address.management:127.0.0.1}\"/>\n</interface>\n<interface name=\"public\">\n    <inet-address value=\"${jboss.bind.address:0.0.0.0}\"/>\n</interface>\n```\n\næ”¹ä¸º\n\n```\n<interface name=\"management\">\n    <any-address/>\n</interface>\n<interface name=\"public\">\n    <any-address/>\n</interface>\n```\n\n3ã€ä¿å­˜åï¼Œé‡æ–°å¯åŠ¨ WildFily\n\n```\nsudo service wildfly restart\n```\n\n### åˆ é™¤é»˜è®¤æ¬¢è¿å†…å®¹ï¼ˆå¯é€‰ï¼‰\n\nå¦‚æœä½ éƒ¨ç½²äº†åº”ç”¨ç¨‹åºåœ¨ä¸Šä¸‹æ–‡æ ¹ç›®å½•é‡Œï¼Œæ¬¢è¿ä½  å°†éœ€è¦ä» WildFly é…ç½®åˆ é™¤é»˜è®¤å†…å®¹ã€‚åœ¨ standalone.xml æ–‡ä»¶é‡Œåˆ é™¤ç²—ä½“çªå‡ºæ˜¾ç¤ºçš„è¡Œ\n\n```\n<server name=\"default-server\">\n    <http-listener name=\"default\" socket-binding=\"http\"/>\n    <host name=\"default-host\" alias=\"localhost\">\n        **<!-- <location name=\"/\" handler=\"welcome-content\"/> -->**\n        <filter-ref name=\"server-header\"/>\n        <filter-ref name=\"x-powered-by-header\"/>\n    </host>\n</server>\n<handlers>\n    **<!-- <file name=\"welcome-content\" path=\"${jboss.home.dir}/welcome-content\"/> -->**\n</handlers>\n```\n\n### å…¶å®ƒè®¾ç½®\n\næ”¹ä¸ºå¯ä»¥ä¿®æ”¹ JSP é¡µé¢ä¸ç”¨é‡å¯\n\n```\n<servlet-container name=\"default\">\n      <jsp-config development=\"true\"/>\n</servlet-container>\n```\n\n### æ³¨æ„äº‹é¡¹\n\n1ã€é¡¹ç›®ä»¥ç«™ç‚¹æ ¹ç›®å½•è®¿é—®\nä½ ç°åœ¨å¯ä»¥å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° WildFly è§†å›¾åœ¨ your_ip:8080\nåœ¨ä½ çš„é¡¹ç›®ç›®å½• WEB-INF ä¸‹æ·»åŠ  jboss-web.xmlï¼Œç¡®ä¿ä½ çš„é…ç½® context-root è®¾ç½®ä¸º /\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<jboss-web>\n    <context-root>/</context-root>\n</jboss-web>\n```\n\n2ã€Linux é‡Œè®¾ç½®ç«¯å£ 80 åˆ° 8080\n**æ³¨æ„ï¼šåœ¨ä¹‹åçš„é…ç½®ä¼šä½¿ç”¨ Nginx åå‘ä»£ç†ï¼Œæ‰€ç”¨ WildFly ç«¯å£ä¸ç”¨æ˜ å°„ä¸º 80ï¼Œè¿™é‡Œåªæ˜¯ä¸ªæ–¹æ³•çš„ç¬”è®°**\n\næ³¨æ„ï¼Œåœ¨ linux é‡Œï¼Œç”±äºå†…æ ¸çš„é™åˆ¶ï¼Œæ™®é€šç”¨æˆ·ä¸èƒ½ä½¿ç”¨ 1024 ä¸€ä¸‹çš„ç«¯å£ã€‚æ‰€ä»¥åœ¨é…ç½®æ–‡ä»¶ï¼ˆstandalone.xmlï¼‰é‡Œæ”¹æˆ 80ï¼Œç”¨æ™®é€šç”¨æˆ·æ˜¯å¯åŠ¨ä¸äº†çš„ã€‚\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ linux ä¸‹ä½¿ç”¨ root ç”¨æˆ·è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œä½¿è®¿é—® 80 ç«¯å£çš„åº”ç”¨è½¬åˆ° 8080 ä¸Šï¼š\n\n```\nsudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080\n```\n\nä»¥ä¸Šç«¯å£è½¬å‘ä¸ºä¸´æ—¶æ“ä½œï¼Œé‡å¯ linux æœåŠ¡å™¨åå¤±æ•ˆã€‚å¦‚æœè¦é‡å¯æœåŠ¡å™¨ä¸ä¸¢å¤± FORWARD è½¬å‘â€æ“ä½œï¼Œå¯å†™å…¥é…ç½®ã€‚\n\n> åœ¨ Linux çš„ä¸‹é¢éƒ¨ç½²äº† tomcatï¼Œä¸ºäº†å®‰å…¨æˆ‘ä»¬ä½¿ç”¨é root ç”¨æˆ·è¿›è¡Œå¯åŠ¨ï¼Œä½†æ˜¯åœ¨åŸŸåç»‘å®šæ—¶æ— æ³•ç›´æ¥è®¿é—® 80 ç«¯å£å·ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ unix ä¸‹ï¼Œé root ç”¨æˆ·ä¸èƒ½ç›‘å¬ 1024 ä»¥ä¸Šçš„ç«¯å£å·ï¼Œè¿™ä¸ª tomcat æœåŠ¡å™¨å°±æ²¡åŠæ³•ç»‘å®šåœ¨ 80 ç«¯å£ä¸‹ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦ä½¿ç”¨ linux çš„ç«¯å£è½¬å‘æœºåˆ¶ï¼ŒæŠŠåˆ° 80 ç«¯å£çš„æœåŠ¡è¯·æ±‚éƒ½è½¬åˆ° 8080 ç«¯å£ä¸Šã€‚\n\n2.1ã€å®‰è£… iptables-persistent\n\n```\nsudo apt-get update\nsudo apt-get install iptables-persistent\n```\n\n2.2ã€æ·»åŠ  80 ç«¯å£è·³è½¬åˆ° 8080 è§„åˆ™\n\n```\nsudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080\n```\n\n2.3ã€ä¿å­˜è·³è½¬è§„åˆ™\n\n```\nsudo service iptables-persistent save\n```\n\n3ã€wildfly ä¸æ”¯æŒ struts2 çš„é…ç½®æ–‡ä»¶ï¼ˆ.xmlï¼‰é‡Œç”¨é€šé…ç¬¦\n**è¿™æ˜¯åŸåšæ–‡çš„å†…å®¹ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨ struts2ï¼›åœ¨ spring ä¸­æœ‰ç”¨é€šé…ç¬¦ï¼Œä½†æ˜¯å¥½åƒæ²¡ä»€ä¹ˆå½±å“**\njboss wildfly ä¸æ”¯æŒ struts2 é…ç½®æ–‡ä»¶é‡Œç”¨é€šé…ç¬¦ `*.xml`ï¼Œå¦‚ä¸‹ï¼š\n\n```\n    <!-- <include file=\"struts/*.xml\"></include> -->\n    <include file=\"struts/struts_post.xml\"></include>\n    <include file=\"struts/struts_user.xml\"></include>\n```\n\n4ã€å¢åŠ éƒ¨ç½²æ‰«æä»ªçš„è¶…æ—¶è®¾ç½®\nä½ç½®ï¼š\n\n```\n<subsystem xmlns=\"urn:jboss:domain:deployment-scanner:2.0\">\n    <deployment-scanner path=\"deployments\" relative-to=\"jboss.server.base.dir\" scan-interval=\"5000\" />\n</subsystem>\n```\n\n`<deployment-scanner>` å†…å¢åŠ å±æ€§ `deployment-timeout=\"1200\"` å¦‚ä¸‹ï¼š\n\n```\n<subsystem xmlns=\"urn:jboss:domain:deployment-scanner:2.0\">\n    <deployment-scanner path=\"deployments\" relative-to=\"jboss.server.base.dir\" scan-interval=\"5000\" deployment-timeout=\"1200\" />\n</subsystem>\n```\n\n### Nginx åå‘ä»£ç† WildFly\n\n1ã€åœ¨ `http` ä¸­æ·»åŠ \n\n```\nupstream jboss {\n\tserver 127.0.0.1:8080;\n}\n```\n\n2ã€åœ¨ `server` ä¸­ä¿®æ”¹\n\n```\nlocation /{\n\tproxy_pass http://jboss;\n\tproxy_redirect off;\n\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\tproxy_set_header X-Real-IP $remote_addr;\n\tproxy_set_header Host $http_host;\n\tindex index.html index.htm index.jsp;\n\t# åŠ¨æ€ç½‘ç«™è¦å°å¿ƒè¿™ä¸ª ç¼“å­˜ é€‰é¡¹\n\tadd_header Cache-Control max-age=1728000;\n}\n```\n\n## MySQL\n\n### MySQL5.6 å®‰è£…\n\n```bash\nsudo apt-get install mysql-server-5.6\n```\n\n### MySQL åˆ›å»ºæ•°æ®åº“\n\n```bash\nCREATE DATABASE IF NOT EXISTS scrapy DEFAULT CHARSET utf8 COLLATE utf8_general_ci;\n```\n\n### MySQL æ•°æ®åº“å¯¼å‡º/å¯¼å…¥\n\n```bash\nmysqldump -u root -p123456 db_name | gzip > /home/backup/db_name.sql.gz\nmysqldump -u root -p123456 --all-databases | gzip > /home/backup/all.sql.gz\n\nmysqldump -h192.168.1.100 -uroot -p db_name > db_name.sql\nmysqldump -uroot -p db_name_1 db_name_2 > db_name_1_and_2.sql\n```\n\n```bash\ngunzip < db_name.sql.gz | mysql -u root -p123456 db_name\ngunzip < all.sql.gz | mysql -u root -p123456\n\nmysql -uroot -p\nshow databases;\nuse db_name;\nsource ~/db_name.sql\n```\n\n### MySQL æŸ¥çœ‹è¡¨ç»“æ„\n\n```sql\ndesc user\n```\n\n## Project\n\n### robots.txt config ç¦æ­¢æ‰€æœ‰çˆ¬è™«çˆ¬å–\n\n```\nUser-agent: *\nDisallow: /\n```\n\n> Renference:\n>\n> - [éŸ©ä¸–é›·-ubuntu é…ç½® java jdk1.8 ç¯å¢ƒï¼Œå¢åŠ å¤šç‰ˆæœ¬ jdk å’Œåˆ‡æ¢æ–¹æ³•](http://blog.csdn.net/hanshileiai/article/details/46968275)\n> - [éŸ©ä¸–é›·-ubuntu14.04 Terminal é…ç½® wildfly-10.0.0.Final æœåŠ¡å™¨](http://blog.csdn.net/hanshileiai/article/details/46987859)\n> - [éŸ©ä¸–é›·-Ubuntu14.04 é…ç½® iptables æŠŠ 80 ç«¯å£è½¬åˆ° 8080](http://blog.csdn.net/hanshileiai/article/details/47757217)\n","tags":["java"]},{"title":"GitHub Webhook è‡ªåŠ¨éƒ¨ç½² Hexo","url":"/2016/07/01/github-webhook-example/","content":"\nåœ¨ [GitHub Pages ä¸è¢«ç™¾åº¦æ”¶å½•è§£å†³æ–¹æ¡ˆ](/2016/06/30/github-pages-forbidden-baiduspide-solution/) ä¸­ï¼Œæ€è·¯äºŒæ˜¯é€šè¿‡ Dnspod çš„æ™ºèƒ½ DNS æœåŠ¡ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯æ­å»ºä¸€ä¸ª Serverï¼Œåšä¸€ä¸ª Blog çš„é•œåƒç«™ï¼Œä¸“ä¸ºç™¾åº¦æ”¶å½•ä½¿ç”¨ã€‚\n\nä½†æ˜¯æ¯æ¬¡å°†æ–°å»ºçš„åšå®¢æ–‡ç«  `PUSH` åˆ° GitHub åï¼Œè¿˜è¦å†ç™»é™† Server `PULL` ä¸€ä¸‹ï¼Œç®€ç›´æ˜¯å¤ªè ¢äº†ã€‚é‚£æœ‰ä»€ä¹ˆè§£å†³åŠæ³•å—ï¼Ÿç­”ï¼šGitHub Webhookã€‚\n\n<!-- more -->\n\n## Webhook\n\nWebhookï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„é’©å­ï¼Œæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ã€‚ä½ å¯ä»¥é€šè¿‡å®šåˆ¶ Webhook æ¥ç›‘æµ‹ä½ åœ¨ Github.com ä¸Šçš„å„ç§äº‹ä»¶ï¼Œæœ€å¸¸è§çš„è«è¿‡äº push äº‹ä»¶ã€‚\n\nå¦‚æœä½ è®¾ç½®äº†ä¸€ä¸ªç›‘æµ‹ push äº‹ä»¶çš„ Webhookï¼Œé‚£ä¹ˆæ¯å½“ä½ çš„è¿™ä¸ªé¡¹ç›®æœ‰äº†ä»»ä½•æäº¤ï¼Œè¿™ä¸ª Webhook éƒ½ä¼šè¢«è§¦å‘ï¼Œè¿™æ—¶ Github å°±ä¼šå‘é€ä¸€ä¸ª HTTP POST è¯·æ±‚åˆ°ä½ é…ç½®å¥½çš„åœ°å€ã€‚\n\nå¦‚æ­¤ä¸€æ¥ï¼Œä½ å°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å»è‡ªåŠ¨å®Œæˆä¸€äº›é‡å¤æ€§å·¥ä½œï¼›æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨ Webhook æ¥è‡ªåŠ¨è§¦å‘ä¸€äº›æŒç»­é›†æˆï¼ˆCIï¼‰å·¥å…·çš„è¿ä½œï¼Œæ¯”å¦‚ Travis CIï¼›åˆæˆ–è€…æ˜¯é€šè¿‡ Webhook å»éƒ¨ç½²ä½ çš„çº¿ä¸ŠæœåŠ¡å™¨ã€‚\n\nGithub å¼€å‘è€…å¹³å°çš„æ–‡æ¡£ä¸­å¯¹ Webhook çš„æ‰€èƒ½åšçš„äº‹æ˜¯è¿™æ ·æè¿°çš„ï¼š\n\n> Youâ€™re only limited by your imagination.\n\n## å“åº” Webhook\n\nåœ¨å‚è€ƒæ–‡ç« é‡Œåšä¸»æ˜¯ä½¿ç”¨ Node.js ç¼–å†™çš„æœåŠ¡ç«¯å“åº”ä»£ç ï¼Œä½†è€ƒè™‘åˆ°è‡ªå·±å¯¹ Node.js ä¸ç†Ÿæ‚‰ï¼Œè¿˜è¦éƒ¨ç½²ç¯å¢ƒï¼Œæ‰€ä»¥æ”¹ç”¨ Python è¯­è¨€ç¼–å†™å“åº”ä»£ç ã€‚\n\nè‡ªå·±åœ¨ GitHub æœç´¢ä¸‹ `github webhook`ï¼Œ`language` é€‰æ‹© `Python` ä¾¿æ‰¾åˆ°äº† Python ç¼–å†™çš„ï¼š[razius/github-webhook-handler](https://github.com/razius/github-webhook-handler)\n\nè‡ªå·±çš„ VPS æ˜¯åœ¨ [Bandwagon Host](https://bandwagonhost.com/aff.php?aff=5403) ä¸Šè´­ä¹°çš„ï¼Œæœ€åˆé€‚çš„é…ç½®ï¼š\n\n- Self-managed service\n- SSD: 10 GB\n- RAM: 512 MB\n- CPU: 1x Intel Xeon\n- BW: 1000 GB/mo\n- Link speed: 1 Gigabit\n- VPS technology: OpenVZ/KiwiVM\n- Linux OS: 32-bit and 64-bit Centos, Debian, Ubuntu, Fedora\n\nè´¹ç”¨ï¼š\n\n- \\$2.99 USD Monthly\n- \\$7.99 USD Quarterly\n- \\$12.99 USD Semi-Annually\n- \\$19.99 USD Annually\n\nBandwagon Host æ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾å¾ˆæ˜¯æ–¹ä¾¿ï¼Œä¼˜æƒ ç ï¼š`IAMSMART52J3NC` å†æ‰“ä¸ª 9.5 æŠ˜å·¦å³ã€‚è¿™é…ç½®æœ‰æ—¶ä¼š `(out of stock)` ç­‰ç­‰éšç¼˜ä¼šæœ‰çš„ã€‚\n\n### å®‰è£… Git\n\n```\napt-get update\napt-get install git\n```\n\n### clone [razius/github-webhook-handler](https://github.com/razius/github-webhook-handler)\n\n```bash\ngit clone https://github.com/razius/github-webhook-handler.git\n```\n\næ ¹æ® github-webhook-handler Gettings started:\n\n#### Installation Requirements\n\nInstall dependencies found in requirements.txt\n\n```bash\npip install -r requirements.txt\n```\n\n#### Repository Configuration\n\nEdit repos.json to configure repositories, each repository must be registered under the form `GITHUB_USER/REPOSITORY_NAME`.\n\n```\n{\n    \"razius/puppet\": {\n        \"path\": \"/home/puppet\",\n        \"key\": \"MyVerySecretKey\",\n        \"action\": [[\"git\", \"pull\", \"origin\", \"master\"]]\n    },\n    \"d3non/somerandomexample/branch:live\": {\n        \"path\": \"/home/exampleapp\",\n        \"key\": \"MyVerySecretKey\",\n        \"action\": [[\"git\", \"pull\", \"origin\", \"live\"],\n            [\"echo\", \"execute\", \"some\", \"commands\", \"...\"]]\n    }\n}\n```\n\nè¿‡ç¨‹å¦‚æœå‡ºç°ï¼š`pip: command not found` å¯ä»¥æ‰§è¡Œï¼š\n\n```\nsudo apt-get install python-pip\n```\n\n#### Set environment variable for the repos.json config\n\n```\nexport REPOS_JSON_PATH=/path/to/repos.json\n```\n\n#### Start the server\n\n```\npython index.py 80\n```\n\n#### clone and pull your Blog\n\n```\ngit clone git@github.com:imzyf/imzyf.github.io.git\ngit pull origin master\n```\n\nè¿‡ç¨‹å¦‚æœå‡ºç°ï¼š`Permission denied (publickey).` å¯ä»¥å‚è€ƒï¼š\n\n- [Stack Overflow-Git - Permission denied (publickey)](http://stackoverflow.com/questions/2643502/git-permission-denied-publickey)\n\n```\ncd ~/.ssh && ssh-keygen\ncat id_rsa.pub | xclip\n```\n\nç„¶åæ·»åŠ åˆ°ä½ çš„ GitHub è´¦æˆ·ï¼šSettings -> SSH keys ä¸­ã€‚\n\n### config imzyf.github.io Webhooks\n\né¦–å…ˆè¿›å…¥ä½ çš„ repo ä¸»é¡µï¼Œé€šè¿‡ç‚¹å‡»é¡µé¢ä¸Šçš„æŒ‰é’® [settings] -> [Webhooks & service] è¿›å…¥ Webhooks é…ç½®ä¸»é¡µé¢ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªé“¾æ¥ç›´æ¥è¿›å…¥é…ç½®é¡µé¢ï¼š\n\n```\nhttps://github.com/[ ç”¨æˆ·å ]/[ ä»“åº“åç§° ]/settings/hooks\n```\n\næ­¤å¤„åªéœ€è¦é…ç½® Webhook æ‰€å‘å‡ºçš„ POST è¯·æ±‚å‘å¾€ä½•å¤„å³å¯ï¼Œäºæ˜¯æˆ‘ä»¬å°±é…ç½®æˆ‘ä»¬æ‰€éœ€è¦çš„è·¯å¾„ï¼š\n[http://104.236.xxx.xxx:9988/deploy/]()ã€‚è¿™ä¸ªåœ°å€æŒ‡å‘çš„å°±æ˜¯é‚£ä¸ªèƒ½å¤Ÿå“åº” Webhook æ‰€å‘å‡ºè¯·æ±‚çš„æœåŠ¡å™¨ã€‚\n\né…ç½®å¥½ Webhook åï¼ŒGithub ä¼šå‘é€ä¸€ä¸ª ping æ¥æµ‹è¯•è¿™ä¸ªåœ°å€ã€‚å¦‚æœæˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™ä¸ª Webhook å‰å°±ä¼šåŠ ä¸Šä¸€ä¸ªç»¿è‰²çš„å‹¾ï¼›å¦‚æœä½ å¾—åˆ°çš„æ˜¯ä¸€ä¸ªçº¢è‰²çš„å‰ï¼Œé‚£å°±å¥½å¥½æ£€æŸ¥ä¸€ä¸‹å“ªå„¿å‡ºé—®é¢˜äº†å§ï¼\n\n### config Nginx server\n\n## æœ€åæƒ³è¯´çš„\n\nä¸ºäº†ä¸€ä¸ªç™¾åº¦æ”¶å½•å¤§å¯ä¸å¿…è¿™ä¹ˆéº»çƒ¦ï¼ŒåˆšåˆšæŸ¥åˆ°è¿™äº›è§£å†³æ–¹æ¡ˆæ—¶å¿ƒé‡Œä¹Ÿæ˜¯çƒ¦çš„ã€è™šçš„ï¼Œä½†è¿˜æ˜¯ç¡¬çš„å¤´çš®æäº†ã€‚è¿‡ç¨‹ä¸­å·²ç»ä¸å•å•æ˜¯ä¸ºäº†ç™¾åº¦æ”¶å½•è‡ªå·±çš„åšå®¢ï¼Œè€Œæ˜¯å˜æˆå­¦ä¹ äº†ä¸œè¥¿ã€æ€è€ƒé—®é¢˜ã€‚è¿™äº›è§£å†³æ–¹æ¡ˆç½‘ä¸Šéƒ½æœ‰ï¼Œä¹Ÿä¸æ˜¯è‡ªå·±åˆ›é€ çš„ï¼Œä½†æ˜¯åˆ«äººçš„ä¸œè¥¿è‡ªå·±ä¸å°è¯•ï¼Œå°±è¿˜æ˜¯åˆ«äººçš„ã€‚\n\nç°åœ¨ç™¾åº¦å·²ç»æ”¶å½•æˆ‘çš„åšå®¢äº†ï¼Œimzyf.github.io åˆ° Server ä¹Ÿæ˜¯è‡ªåŠ¨éƒ¨ç½²çš„ã€‚è§£å†³é—®é¢˜åçš„å¿«ä¹å’Œä¿¡å¿ƒï¼Œæ‰æ˜¯æˆ‘è¿™æ¬¡æœ€å¤§çš„æ”¶è·ã€‚\n\n> References\n>\n> - [jerryzou-Webhook å®è·µ â€”â€” è‡ªåŠ¨éƒ¨ç½²](http://jerryzou.com/posts/webhook-practice/)\n","tags":["github","hexo","git"]},{"title":"GitHub Pages ä¸è¢«ç™¾åº¦æ”¶å½•è§£å†³æ–¹æ¡ˆ","url":"/2016/06/30/github-pages-forbidden-baiduspide-solution/","content":"\n2019-12-02 æ›´æ–°ï¼šç°åœ¨æˆ‘çš„ Blog è¿˜æ˜¯ç”¨çš„ GitHub Pagesï¼Œåæ­£æ²¡æœ‰å¤‡æ¡ˆçš„åŸŸåä¸ä¼šè¢«ç™¾åº¦æ”¶å½•ã€‚\n\n2017-04-22 æ›´æ–°ï¼šç°åœ¨æˆ‘çš„ Blog ä½¿ç”¨çš„æ˜¯ [UFOVPS](https://www.ufovps.com/) ç›´æ¥éƒ¨ç½²çš„ã€‚\n\n---\n\nåœ¨ [ä½¿ç”¨ Hexo å’Œ Github æ­å»ºä¸ªäººç‹¬ç«‹åšå®¢](/2016/06/24/hexo-github-blog/) å‡ å¤©åï¼Œå‘ç°ç™¾åº¦å¹¶ä¸å¯¹åšå®¢è¿›è¡Œæ”¶å½•ã€‚\n\nåœ¨å¤©æœä½¿ç”¨ç™¾åº¦æœç´¢æ¯•ç«Ÿå¤šæ•°ï¼Œä½¿ç”¨ç™¾åº¦ç«™é•¿å·¥å…·-æŠ“å–è¯Šæ–­ï¼Œåœ¨ç™¾åº¦ Spider æŠ“å–ç»“æœè¿”å› HTTP å¤´ï¼šHTTP/1.1 403 Forbiddenï¼ŒåŸæ¥æ˜¯ GitHub ç¦æ­¢äº†ç™¾åº¦çˆ¬è™«çš„çˆ¬å»ã€‚\n\n<!-- more -->\n\nGoogle åæ—©å·²æœ‰è®¸å¤šçƒ­å¿ƒç½‘å‹ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œè‡ªå·±åœ¨è¿™é‡Œæ€»ç»“ä¸‹ã€‚\n\n## æ€è·¯ä¸€ï¼šåˆ©ç”¨ CDN è§£å†³ç™¾åº¦çˆ¬è™«è¢« Github Pages æ‹’ç»çš„é—®é¢˜\n\n### è§£å†³æ€è·¯\n\næ—¢ç„¶ Github å½»åº•å’Œç™¾åº¦å†³è£‚äº†ï¼Œé‚£æˆ‘ä»¬ä¹Ÿåªèƒ½è‡ªå·±åŠ¨æ‰‹æ¥è§£å†³äº†ã€‚Github å¯èƒ½æ˜¯å°äº†ç™¾åº¦çš„ IPï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°äº†ç™¾åº¦çˆ¬è™«çš„ User-Agentã€‚\n\næ‰€ä»¥è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€å¥½å°±ä¸è¦è®©ç™¾åº¦çˆ¬è™«ç›´æ¥è®¿é—® Github äº†ï¼Œéœ€è¦åœ¨ä¸­é—´å¥—ä¸€å±‚ [åå‘ä»£ç†](https://zh.wikipedia.org/wiki/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86)ã€‚\n\né‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæ—¢ç„¶æˆ‘å¯ä»¥æ­ä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨äº†ï¼Œé‚£æˆ‘ä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠåšå®¢æ”¾åœ¨è¿™å°æœåŠ¡å™¨ä¸Šï¼Ÿæ”¾ Github Pages ä¸Šä¸å°±æ˜¯ä¸ºäº†å°‘ä¸€å°æœåŠ¡å™¨ï¼Œå°‘ä¸€ç‚¹è´¹ç”¨å—ï¼Ÿ\n\né‚£æœ‰æ²¡æœ‰å…è´¹çš„ç¬¬ä¸‰æ–¹åå‘ä»£ç†æœåŠ¡å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œå…¶å®ç°åœ¨å„ç§ **CDN æœåŠ¡** ä¸å°±æ˜¯å—ï¼Ÿè€Œä¸”è¿˜é¢å¤–æä¾›äº†å„ç§ç½‘ç»œç¯å¢ƒä¸‹çš„åŠ é€ŸåŠŸèƒ½ã€‚\n\nä½†æ˜¯ä½¿ç”¨ CDN ä¹Ÿä¼šæœ‰ä¸€ä¸ªéå¸¸å¤§çš„ç¼ºç‚¹ï¼šåªèƒ½å¯¹ **é™æ€èµ„æº** åšï¼Œå› ä¸º CDN å’Œåå‘ä»£ç†æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¸åŒå°±æ˜¯ï¼šå®ƒä¼šåšç¼“å­˜ï¼Œå¹¶å‘å„ä¸ªèŠ‚ç‚¹åˆ†å‘ã€‚\n\næ‰€ä»¥ CDN ä¸€èˆ¬éƒ½æ˜¯ç”¨æ¥ç»™é™æ€èµ„æºåšåŠ é€Ÿçš„ã€‚å¦‚æœä½ å¯¹åŠ¨æ€é¡µé¢åšåŠ é€Ÿï¼Œç”¨æˆ·çœ‹åˆ°çš„é¡µé¢åœ¨ä¸€æ®µæ—¶é—´å†…å°±ä¸€ç›´ä¸ä¼šå˜äº†ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸æ€•ï¼å› ä¸º Github Pages æœ¬æ¥å°±æ˜¯å…¨é™æ€çš„ï¼\n\nå›½å†…æä¾› CDN æœåŠ¡çš„æœ‰ï¼šåŠ é€Ÿä¹ã€ä¸ƒç‰›äº‘å­˜å‚¨ã€åˆæ‹äº‘ç­‰ã€‚\n\næœ€åé€‰æ‹©äº† [**åˆæ‹äº‘**](https://www.upyun.com/index.html)\n\nCDN å›æºé…ç½®\n\næœ‰è®¾ç½®ç¼“å­˜æ—¶é—´çš„åŠŸèƒ½ï¼Œä¸Šé¢æ˜ç¡®å†™äº†ï¼šCDN ç¼“å­˜æ—¶é—´æ˜¯æŒ‡ UPYUN å›æºå–å¾—æ–‡ä»¶åï¼Œæ–‡ä»¶åœ¨ UPYUN CDN ç½‘ç»œä¸­çš„ç¼“å­˜çš„æ—¶é—´ï¼Œè¶…è¿‡ç¼“å­˜æ—¶é—´åˆ™é‡æ–°å›æºè·å–æ–‡ä»¶ã€‚\n\næ˜¯çš„ï¼Œè¿™æ‰æ˜¯çœŸæ­£æ»¡è¶³æˆ‘éœ€æ±‚çš„åŠŸèƒ½ï¼\n\nè¿™ä¸ªè§£å†³æ–¹æ¡ˆæˆ‘å°è¯•äº†ï¼Œä½†æ˜¯åœ¨ CDN åŸŸåé…ç½®æ—¶ï¼Œæœ‰å¤©æœç‰¹è‰²è¦æ±‚åŸŸåå¿…é¡»å¤‡æ¡ˆï¼Œæˆ‘çš„åŸŸå `zyf.im` æ˜¯åœ¨ [name.com](http://www.name.com) ä¸Šæ³¨å†Œçš„ï¼Œ`.im` çš„å°¾ç¼€ä¹Ÿæ— æ³•åœ¨å›½å†…å¤‡æ¡ˆã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¸é€‚åˆæˆ‘ã€‚\n\n## æ€è·¯äºŒï¼šé€šè¿‡ Dnspod çš„æ™ºèƒ½ DNS æœåŠ¡\n\nåœ¨è¿™é‡Œåšä¸»é¦–å…ˆåˆ†æäº†ï¼šä½¿ç”¨ CDN å¯èƒ½ **æ— æ³•** çœŸæ­£è§£å†³ç™¾åº¦è¢«æ‹’ç»çš„é—®é¢˜ã€‚ç†ç”±æ˜¯ï¼š**CDN èŠ‚ç‚¹ä¼—å¤šï¼Œç™¾åº¦çˆ¬å–çš„èŠ‚ç‚¹å¯èƒ½å¹¶æ²¡æœ‰é¡µé¢çš„ç¼“å­˜**ã€‚\n\né€šè¿‡ Dnspod çš„æ™ºèƒ½ DNS æœåŠ¡å¯ä»¥å˜ç›¸è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¤§æ¦‚çš„è®¾ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªè¦ä¸ºä½ æ‰€æœ‰çš„ä¸»æœºè®°å½•é‡å¤æ·»åŠ  A è®°å½•ï¼ŒæŠŠçº¿è·¯ç±»å‹è®¾ç½®ä¸ºç™¾åº¦ï¼Œå¹¶å°†è®°å½•å€¼æŒ‡å‘ä½ è‡ªå·±çš„äº‘ä¸»æœºå³å¯ã€‚\n\nä½ è¯´ä»€ä¹ˆï¼Ÿç­‰ä¸‹ï¼è‡ªå·±çš„äº‘ä¸»æœºï¼Ÿæ²¡é”™ï¼Œå…¶å®è¿™ç§æ–¹å¼å°±æ˜¯ **ä¸“é—¨ä¸ºç™¾åº¦çš„çˆ¬è™«å¢å¼€äº†ä¸€ä¸ªå°çª—å£**ï¼Œä½¿å¾—å®ƒå¯ä»¥åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ä¸Šçˆ¬å–å†…å®¹ï¼Œè€Œä¸æ˜¯ç›´æ¥å»çˆ¬å– Github Pages çš„å†…å®¹ã€‚ä½ éœ€è¦è‡ªå·±æ­ä¸ªæœåŠ¡å™¨ï¼Œå¹¶å°†ä½ çš„é™æ€ç½‘ç«™æ¶åœ¨ä¸Šé¢ã€‚\n\næˆ‘åšå®¢è§£å†³æ–¹æ¡ˆå°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚çœ‹èµ·æ¥æœ‰äº›â€œç¬¨â€å› ä¸ºæˆ‘åˆæ­å»ºäº†ä¸€ä¸ª Server ç”¨äºåšå®¢ï¼Œç›¸å½“äºæ²¡æœ‰å®Œå…¨åˆ©ç”¨ GitHub Pagesï¼Œå®é™…ä¸Šæ™®é€šç”¨æˆ·è®¿é—®æˆ‘çš„åšå®¢å°±æ˜¯æœ‰åˆ©ç”¨ GitHub çš„ CDN æœåŠ¡çš„ï¼Œæ›´å¿«ä¸€äº›ã€‚è€Œä¸”æˆ‘è¿™ä¹ˆåšè¿˜åˆ©ç”¨äº† GitHub Webhookï¼Œå½“æˆ‘æŠŠæ–°çš„é¡µé¢æäº¤åˆ° GitHub æ—¶ï¼Œæˆ‘çš„åšå®¢æœåŠ¡å™¨ä¼šè‡ªåŠ¨ `pull` æœ€æ–°çš„é¡¹ç›®ï¼Œè¿™ä¹ˆçœ‹ä¹Ÿå°±ä¸é‚£ä¹ˆâ€œå‚»â€äº†ã€‚\n\nè¯·å‚çœ‹ï¼š[GitHub Webhook è‡ªåŠ¨éƒ¨ç½² Hexo](/2016/06/30/github-webhook-example/)\n\nç»è¿‡è¿™ä¹ˆä¸€é…ç½®ï¼Œæˆ‘çš„åšå®¢ç°åœ¨å·²ç»è¢«ç™¾åº¦æ”¶å½•äº†ã€‚ç™¾åº¦æœç´¢ï¼š`site:zyf.im`\n\n> Reference:\n>\n> - [DOZER-åˆ©ç”¨ CDN è§£å†³ç™¾åº¦çˆ¬è™«è¢« Github Pages æ‹’ç»çš„é—®é¢˜](http://www.dozer.cc/2015/06/github-pages-and-cdn.html)\n> - [jerryzou-è§£å†³ Github Pages ç¦æ­¢ç™¾åº¦çˆ¬è™«çš„æ–¹æ³•ä¸å¯è¡Œæ€§åˆ†æ](http://jerryzou.com/posts/feasibility-of-allowing-baiduSpider-for-Github-Pages/)\n","tags":["github","hexo","git"]},{"title":"Eclipse Maven Spring SpringMVC Mybatis æ•´åˆ","url":"/2016/06/27/eclipse-maven-spring-springmvc-mybatis-example/","content":"\næ–°é¡¹ç›®è‡ªå·±æ’˜æ¡†æ¶ï¼Œæƒ³ç€ç”¨ç‚¹æ–°çš„ã€‚çœ‹æ…•è¯¾ç½‘ [Java é«˜å¹¶å‘ç§’æ€ API](http://www.imooc.com/index/search?words=%E7%A7%92%E6%9D%80) çš„ç³»åˆ—è¯¾ç¨‹æ—¶å¾ˆå—ç›Šã€‚æ‰€ä»¥æƒ³ç€ä»¿ç€æ¥ä½¿ç”¨ï¼šMavan-Spring-SpringMVC-Mybatis çš„æ¶æ„ã€‚æ¡†æ¶æ•´åˆçš„ä»£ç æˆ‘å·²ä¸Šä¼ åˆ°æˆ‘çš„ Githubï¼š[maven-mybatis-spring-springmvc](https://github.com/imzyf/maven-mybatis-spring-springmvc)ã€‚\n\næœ¬ç¤ºä¾‹æ˜¯åœ¨ï¼šUbuntu15 ä¸Šå®ç°çš„ï¼›Windows ä¸Šå®‰è£… Maven å°†ä¸å¤ªç›¸åŒã€‚\n\n## Maven Install\n\n> 2016-09-10 æ›´æ–°ï¼šè¾ƒæ–°ç‰ˆ Eclipse éƒ½æœ‰é›†æˆ Mavenï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å®‰è£…\n\n1. Run command `sudo apt-get install maven`, to install the latest Apache Maven.\n2. Run command `mvn -version to verify` your installation.\n3. Where is Maven installed?\n   The command `apt-get` install the Maven in `/usr/share/maven`\n   The Maven configuration files are stored in `/etc/maven`\n\n## Eclipse Maven Plugin - m2e\n\n> 2016-09-10 æ›´æ–°ï¼šè¾ƒæ–°ç‰ˆ Eclipse éƒ½æœ‰é›†æˆ Mavenï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å®‰è£…\n\n1. open Eclipse -> Help -> click \"Install New Software\" -> click \"add\"\n\n```txt\nName:m2e\nLocation:http://download.eclipse.org/technology/m2e/releases\n```\n\n2. click \"ok\" -> click \"Maven Integration for Eclipse\" -> click \"Next\"\n3. restrat Eclipse\n4. config m2e -> Window -> Preferences -> Maven -> Installations -> click \"Addâ€¦\" -> select Maven\n\n<!-- more -->\n\n## Create a Maven Project\n\n1. File -> New -> New Maven project\n2. select \"Use default Workspace location\"\n3. select \"maven-archetype-j2ee-simple\"\n4. input info -> Finish\n5. é€‰ä¸­é¡¹ç›®å³é”®èœå•ä¸­é€‰æ‹© Properties -> Project Facets -> select \"Dynamic Web Module\" Version \"3.1\"\n\nTips:\n\n- å¦‚æœåœ¨ `Project Facets` é€‰æ‹©ç‰ˆæœ¬æ—¶â€œcan not changeâ€ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰‹åŠ¨ä¿®æ”¹ `.settings/org.eclipse.wst.common.project.facet.core.xml` æ–‡ä»¶é…ç½®\n- é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆçš„ `web.xml` ç‰ˆæœ¬è¾ƒä½ï¼Œæ‰‹åŠ¨ä¿®æ”¹\n\n```xml\n<web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee\n                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\"\n\tversion=\"3.1\" metadata-complete=\"true\">\n</web-app>\n```\n\n- é¡¹ç›®ç»“æ„\n\n```\nâ”œâ”€â”€ src\n    â”œâ”€â”€ main\n    |   â”œâ”€â”€ java //javaæºä»£ç \n    |   â”œâ”€â”€ resources //é…ç½®èµ„æºæ–‡ä»¶\n    |   â””â”€â”€ webapp //webæ–‡ä»¶\n    |\n    â””â”€â”€ test\n\t    â””â”€â”€ java //junitæµ‹è¯•\n```\n\n## pom.xml Config\n\n[Github-maven-mybatis-spring-springmvc pom.xml](https://github.com/imzyf/maven-mybatis-spring-springmvc/blob/master/pom.xml)\n\n```xml\n<!-- junit4 -->\n<dependency>\n\t<groupId>junit</groupId>\n\t<artifactId>junit</artifactId>\n\t<version>4.11</version>\n\t<scope>test</scope>\n</dependency>\n<!-- æ—¥å¿— -->\n<!-- å®ç°slf4jæ¥å£æ•´åˆ -->\n<!-- JDBC MySQL Driver -->\n<!-- DAOæ¡†æ¶ mybatis -->\n<!-- Servlet API -->\n<!-- 1 Spring æ ¸å¿ƒä¾èµ– -->\n<!-- 2 Spring DAOä¾èµ– -->\n<!-- 3 Spring webç›¸å…³ä¾èµ– -->\n<!-- 4 Spring Testç›¸å…³ä¾èµ– -->\n```\n\n## logback.xml Config\n\n```xml\n<configuration>\n\t<appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\">\n\t\t<!-- encoders are assigned the type ch.qos.logback.classic.encoder.PatternLayoutEncoder\n\t\t\tby default -->\n\t\t<encoder>\n\t\t\t<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\n\t\t\t</pattern>\n\t\t</encoder>\n\t</appender>\n\t<root level=\"info\">\n\t\t<appender-ref ref=\"STDOUT\" />\n\t</root>\n</configuration>\n```\n\n## Mybatis Config\n\n[Github-maven-mybatis-spring-springmvc mybatis-config.xml](https://github.com/imzyf/maven-mybatis-spring-springmvc/blob/master/src/main/resources/mybatis-config.xml)\n\n```xml\n<configuration>\n\t<settings>\n\t\t<!-- ä½¿ç”¨jdbcçš„getGeneratedKays è·å–æ•°æ®åº“è‡ªå¢ä¸»é”® -->\n\t\t<setting name=\"useGeneratedKeys\" value=\"true\" />\n\t\t<!-- ä½¿ç”¨åˆ—åˆ«åæ›¿æ¢åˆ—å -->\n\t\t<setting name=\"useColumnLabel\" value=\"true\" />\n\t\t<!-- æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™ï¼ˆcamel caseï¼‰æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN åˆ°ç»å…¸ Java å±æ€§å aColumn çš„ç±»ä¼¼æ˜ å°„ã€‚ -->\n\t\t<setting name=\"mapUnderscoreToCamelCase\" value=\"true\" />\n\t</settings>\n</configuration>\n```\n\n## Spring Config\n\n[Github-maven-mybatis-spring-springmvc spring](https://github.com/imzyf/maven-mybatis-spring-springmvc/tree/master/src/main/resources/spring)\n\n### Spring-DAO Config\n\n```xml\n<!-- 1 æ•°æ®åº“é…ç½®æ–‡ä»¶ä½ç½® -->\n<context:property-placeholder location=\"classpath:jdbc.properties\" />\n\n<!-- 2 æ•°æ®åº“è¿æ¥æ±  -->\n<!-- Employee DB data source. -->\n<bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\">\n\n\t<property name=\"driverClass\" value=\"${jdbc.driverClassName}\" />\n\t<property name=\"jdbcUrl\" value=\"${jdbc.dburl}\" />\n\t<property name=\"user\" value=\"${jdbc.username}\" />\n\t<property name=\"password\" value=\"${jdbc.password}\" />\n\n\t<!-- c3p0è¿æ¥æ±  ç§æœ‰å±æ€§ -->\n\t<property name=\"maxPoolSize\" value=\"${jdbc.maxPoolSize}\" />\n\t<property name=\"minPoolSize\" value=\"${jdbc.minPoolSize}\" />\n\t<!-- å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit -->\n\t<property name=\"autoCommitOnClose\" value=\"false\" />\n\t<!-- è·å–è¿æ¥è¶…æ—¶æ—¶é—´ -->\n\t<property name=\"checkoutTimeout\" value=\"1000\" />\n\t<!-- è·å–è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•° -->\n\t<property name=\"acquireRetryAttempts\" value=\"2\" />\n</bean>\n\n<!-- è®¾è®¡åŸåˆ™ï¼šçº¦å®šå¤§äºé…ç½® -->\n\n<!-- 3 é…ç½® SqlSessionFactory å¯¹è±¡ -->\n<bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\">\n\t<!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  -->\n\t<property name=\"dataSource\" ref=\"dataSource\" />\n\t<!-- é…ç½®mybitis å…¨å±€é…ç½®æ–‡ä»¶ -->\n\t<property name=\"configLocation\" value=\"classpath:mybatis-config.xml\" />\n\t<!-- æ‰«æentityåŒ… ä½¿ç”¨åˆ«å -->\n\t<property name=\"typeAliasesPackage\" value=\"com.moma.dmv.entity\" />\n\t<!-- æ‰«æsqlé…ç½®æ–‡ä»¶ mapper éœ€è¦çš„xml -->\n\t<property name=\"mapperLocations\" value=\"classpath:mapper/*.xml\" />\n</bean>\n\n<!-- 4 é…ç½®æ‰«æDaoæ¥å£åŒ…ï¼ŒåŠ¨æ€å®ç°Daoæ¥å£ï¼Œæ³¨å…¥åˆ°springå®¹å™¨ä¸­ -->\n<bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\">\n\t<!-- æ³¨å…¥sqlsessionFactory -->\n\t<property name=\"sqlSessionFactoryBeanName\" value=\"sqlSessionFactory\" />\n\t<!-- ç»™å‡ºéœ€è¦æ‰«æDaoæ¥å£åŒ… -->\n\t<property name=\"basePackage\" value=\"com.moma.dmv.dao\" />\n</bean>\n```\n\n### Spring-Service Config\n\n```xml\n<!-- æ‰«æserviceåŒ…ä¸‹ æ‰€æœ‰ä½¿ç”¨æ³¨è§£çš„ç±»å‹ -->\n<context:component-scan base-package=\"com.moma.dmv.service\" />\n\n<!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ -->\n<bean id=\"transactionManager\"\n\tclass=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n\t<property name=\"dataSource\" ref=\"dataSource\" />\n</bean>\n\n<!-- é…ç½®åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡ -->\n<tx:annotation-driven transaction-manager=\"transactionManager\" />\n\n<!-- ä½¿ç”¨æ³¨è§£æ§åˆ¶äº‹åŠ¡æ–¹æ³•çš„ä¼˜ç‚¹\n1ï¼šå¼€å‘å›¢é˜Ÿè¾¾æˆä¸€è‡´çº¦å®šï¼Œæ˜ç¡®æ ‡æ³¨äº‹åŠ¡æ–¹æ³•çš„ç¼–ç¨‹é£æ ¼\n2ï¼šä¿è¯äº‹åŠ¡æ–¹æ³•çš„æ‰§è¡Œæ—¶é—´å°½å¯èƒ½çŸ­ï¼Œä¸è¦ç©¿æ’å…¶ä»–ç½‘ç»œæ“ä½œRPC/HTTPè¯·æ±‚æˆ–è€…å‰¥ç¦»åˆ°äº‹åŠ¡æ–¹æ³•å¤–éƒ¨\n3ï¼šä¸æ˜¯æ‰€æœ‰çš„æ–¹æ³•éƒ½éœ€è¦äº‹åŠ¡ï¼Œæ¯”å¦‚åªæœ‰ä¸€æ¡ä¿®æ”¹æ“ä½œï¼Œåªè¯»æ“ä½œä¸éœ€è¦äº‹åŠ¡æ§åˆ¶\n-->\n```\n\n### Spring-Web Config\n\n```xml\n<!-- 1:å¼€å¯springMVC æ³¨è§£æ¨¡å¼ -->\n<mvc:annotation-driven />\n\n<!-- 2 é™æ€èµ„æºé»˜è®¤servleté…ç½® 1 åŠ å…¥å¯¹é™æ€èµ„æºçš„å¤„ç† js gif png 2 å…è®¸ä½¿ç”¨â€œ/â€åšæ•´ä½“æ˜ å°„ -->\n<mvc:default-servlet-handler />\n\n<!-- 3:é…ç½®jsp æ˜¾ç¤ºViewResolver -->\n<bean\n\tclass=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n\t<!-- å†³å®šè§†å›¾ç±»å‹ï¼Œå¦‚æœæ·»åŠ äº†jstlæ”¯æŒï¼ˆå³æœ‰jstl.jarï¼‰ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ˜¯è§£æä¸ºjstlè§†å›¾ -->\n\t<property name=\"viewClass\"\n\t\tvalue=\"org.springframework.web.servlet.view.JstlView\" />\n\t<!-- è§†å›¾å‰ç¼€ -->\n\t<property name=\"prefix\" value=\"/WEB-INF/jsp/\" />\n\t<!-- è§†å›¾åç¼€ -->\n\t<property name=\"suffix\" value=\".jsp\" />\n</bean>\n\n<mvc:resources location=\"/resources/\" mapping=\"/resources/**\" />\n\n<!-- 4:æ‰«æwebç›¸å…³çš„bean -->\n<context:component-scan base-package=\"com.moma.dmv.web\" />\n```\n\n## DAO Mapper Example\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.moma.dmv.dao.InfoDao\">\n\n  \t<select id=\"queryById\" resultType=\"Info\" parameterType=\"long\">\n\t\t<![CDATA[\n\t\tselect id,`key`,`value` from info where id = #{id}\n\t\t]]>\n\t</select>\n\n\t<select id=\"queryAll\" resultType=\"Info\">\n\t\t<![CDATA[\n\t\tselect id,key,value\n\t\tfrom info\n\t\tlimit #{offset},#{limit}\n\t\t]]>\n\t</select>\n\n</mapper>\n```\n\n## web.xml Config\n\n```xml\n<servlet>\n\t<servlet-name>dmv-dispatcher</servlet-name>\n\t<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n\t<!-- é…ç½®springMVCéœ€è¦åŠ è½½çš„é…ç½®æ–‡ä»¶ spring-dao.xml spring-service.xml spring-web.xml\n\t\tmybatis -> spring -> springMVC -->\n\t<init-param>\n\t\t<param-name>contextConfigLocation</param-name>\n\t\t<param-value>classpath:spring/spring-*.xml</param-value>\n\t</init-param>\n</servlet>\n<servlet-mapping>\n\t<servlet-name>dmv-dispatcher</servlet-name>\n\t<!-- é»˜è®¤åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ -->\n\t<url-pattern>/</url-pattern>\n</servlet-mapping>\n```\n\n## JUnit Example\n\n```java\nimport javax.annotation.Resource;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit4.SpringJUnit4ClassRunner;\n\nimport com.moma.dmv.dao.InfoDao;\nimport com.moma.dmv.entity.Info;\n\nRunWith(SpringJUnit4ClassRunner.class)\nContextConfiguration(locations = { \"classpath:spring/spring-dao.xml\" })\npublic class InfoDaoTest {\n\n\t@Resource\n\tprivate InfoDao infoDao;\n\tprivate Logger logger = LoggerFactory.getLogger(this.getClass());\n\n\t@Test\n\tpublic void testQueryById() throws Exception {\n\t\tlong id = 1;\n\t\tInfo info = infoDao.queryById(id);\n\t\tlogger.info(info.toString());\n\t}\n}\n```\n\n> Reference:\n>\n> - [MKyong-How to install Maven on Ubuntu](http://www.mkyong.com/maven/how-to-install-maven-in-ubuntu/)\n> - [Java ä¹‹é“-ä½¿ç”¨ Eclipse æ„å»º Maven é¡¹ç›® (step-by-step)](http://blog.csdn.net/qjyong/article/details/9098213)\n","tags":["java"]},{"title":"ä½¿ç”¨ GitHub å’Œ Hexo æ­å»ºä¸ªäººç‹¬ç«‹åšå®¢","url":"/2016/06/24/hexo-github-blog/","content":"\n`Wordpress` è¿™ç±»åšå®¢ç³»ç»ŸåŠŸèƒ½å¼ºå¤§ï¼Œå¯å¯¹ä¸æˆ‘åªæƒ³åˆ’æ‹‰çš„å†™ç‚¹ä¸œè¥¿çš„äººï¼Œæ„Ÿè§‰å¤§æå°ç”¨äº†ã€‚è€Œä¸” `Wordpress` éœ€è¦éƒ¨ç½²ï¼Œç½‘ç«™çš„æœåŠ¡å™¨ä¹Ÿä¼šå¸¦æ¥é—®é¢˜ï¼Œå›½å†…çš„æœåŠ¡å™¨é¦–å…ˆéœ€è¦å¤‡æ¡ˆï¼Œè´¹ç”¨ä¸ä½ï¼Œå›½å¤–æœåŠ¡å™¨è®¿é—®é€Ÿåº¦å—å½±å“ã€‚\n\nè¿‘æ¥æ¥è§¦åˆ°ä¸€ç§æ–°çš„åšå®¢ç³»ç»Ÿ Hexoï¼Œå®ƒçš„ä¸åŒåœ°æ–¹å°±æ˜¯å°†ï¼š**åœ¨ä¸Šçº¿ç¼–å†™åšå®¢å’Œé¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹åœ¨çº¿ä¸‹å®Œæˆ**ã€‚\n\nåœ¨æœ¬åœ°ç¼–å†™åšæ–‡çš„ Markdown æ–‡ä»¶ï¼Œä½¿ç”¨ Hexo å°†åšå®¢ç½‘ç«™çš„æ‰€æœ‰å‰å° HTML ç­‰å…¨éƒ¨ç”Ÿæˆï¼Œè®©åå°†ç”Ÿæˆçš„æ–‡ä»¶ä¸Šä¼ çš„æœåŠ¡å™¨å°±è¡Œäº†ã€‚\n\né‚£ä¹ˆåŸæ¥ wp ä¸­çš„è¯„è®ºç­‰åŠ¨æ€åŠŸèƒ½æ€ä¹ˆåŠå‘¢ï¼Ÿæ”¾å¿ƒç¬¬ä¸‰æ–¹æœåŠ¡å•†æ—©å·²ä¸ºæˆ‘ä»¬è€ƒè™‘äº†ã€‚ä¾‹å¦‚ï¼š[disqus](https://disqus.com/)å°±æ˜¯ä¸€å®¶ç¬¬ä¸‰æ–¹ç¤¾ä¼šåŒ–è¯„è®ºç³»ç»Ÿï¼Œä¸»è¦ä¸ºç½‘ç«™ä¸»æä¾›è¯„è®ºæ‰˜ç®¡æœåŠ¡ã€‚\n\næœ¬æ–‡çš„æ“ä½œçš„ç³»ç»Ÿç¯å¢ƒæ˜¯ Ubuntu 15ï¼ŒWindows ä¸‹çš„æ­å»ºå¯è§¦ç±»æ—é€šã€‚\n\n## äº†è§£ Hexo\n\n> A fast, simple & powerful blog framework\n\n[Hexo](https://hexo.io/) æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µï¼Œ[Hexo setup å®˜æ–¹æ–‡æ¡£](https://hexo.io/zh-cn/docs/setup.html)ã€‚\n\n<!--more-->\n\n## å®‰è£… Git\n\n> [Download for Linux and Unix | git-scm](https://git-scm.com/download/linux)\n\n## å®‰è£… Node.js\n\n> [Linux | Mac å®‰è£… Node.js ä¸å¸¸è§é—®é¢˜ | zyf.im](/2017/07/06/install-node-js-in-ubuntu-and-faq/)\n\n## å®‰è£… Hexo\n\næ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoï¼š\n\n```bash\nnpm install -g hexo-cli\n```\n\n## å»ºç«™\n\nå®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ï¼š\n\n```bash\n$ hexo init <folder>\n$ cd <folder>\n$ npm install\n```\n\næ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š\n\n```txt\nâ”œâ”€â”€ _config.yml\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ scaffolds\nâ”œâ”€â”€ source\n| â”œâ”€â”€ _drafts\n| â””â”€â”€ _posts\nâ””â”€â”€ themes\n```\n\n### æ–°å»ºä¸€ç¯‡æ–‡ç« \n\n```bash\nhexo new [layout] <title>\n```\n\nå¦‚æœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ `_config.yml` ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚\n\n### ç”Ÿæˆé™æ€æ–‡ä»¶\n\n```bash\nhexo generate\n\n# å¯ä»¥ç®€å†™ä¸º\n\nhexo g\n```\n\n### å¯åŠ¨æœåŠ¡å™¨\n\n```bash\nhexo server\n\n# å¯ä»¥ç®€å†™ä¸º\n\nhexo s\n```\n\nç½‘ç«™ä¼šåœ¨ [http://localhost:4000](http://localhost:4000) ä¸‹å¯åŠ¨ã€‚åœ¨æœåŠ¡å™¨å¯åŠ¨æœŸé—´ï¼ŒHexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚\n\n## éƒ¨ç½²é™æ€ç½‘é¡µåˆ° GitHub\n\n### æ³¨å†Œè®¾ç½® GitHub\n\n1. ç™»å½• GitHubï¼Œæ³¨å†Œè‡ªå®šä¹‰ç”¨æˆ·åå¦‚ï¼š`imzyf`\n2. åœ¨ä¸»é¡µå³ä¸‹è§’åˆ›å»º New repositoryï¼Œname å¿…é¡»å’Œç”¨æˆ·åä¸€è‡´å¦‚ï¼š`imzyf.github.io`\n3. ç­‰å¾… 3 åˆ†é’Ÿå·¦å³ï¼Œä¹‹åå³å¯è®¿é—®é™æ€ä¸»é¡µå¦‚ï¼š`https://imzyf.github.io`\n\n### åŒæ­¥å†…å®¹è‡³ GitHub\n\n1. åœ¨ Hexo ç›®å½•ä¸‹ `git clone git@github.com:imzyf/imzyf.github.io.git`\n2. å°† `public` æ–‡ä»¶ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ° `imzyf.github.io` ä¸‹\n3. `git add .` å¢åŠ å½“å‰å­ç›®å½•ä¸‹æ‰€æœ‰æ›´æ”¹è¿‡çš„æ–‡ä»¶è‡³ index\n4. `git commit -m 'xxx'` æäº¤åˆ°æœ¬åœ°\n5. `git push origin master` å°†å½“å‰åˆ†æ”¯ push åˆ°è¿œç¨‹ master åˆ†æ”¯\n6. æœ€åè®¿é—®ä¸»é¡µ`http://imzyf.github.io` è§‚å¯Ÿæ•ˆæœ\n\n## ç»‘å®šä¸ªäººåŸŸå\n\nåœ¨ GitHub é¡¹ç›®é¡µé¢ï¼ŒSettings -> GitHub Pagesï¼ŒSource é€‰æ‹© master branchï¼ŒCustom domain å¡«å†™è‡ªå·±çš„åŸŸåï¼ŒåŒæ—¶å‹¾é€‰ Enforce HTTPS è®©ä½ çš„ç½‘å€æ”¯æŒ HTTPSã€‚\n\nåœ¨ä½ çš„åŸŸåæœåŠ¡å•†é‚£é‡Œï¼Œå°†å¡«å†™çš„åŸŸåè§£æåˆ°ï¼š`<username>.github.io` åˆ©äº `imzyf.github.io`ã€‚\n\n## References\n\n- [HellDog-ä½¿ç”¨ GitHub å’Œ Hexo æ­å»ºå…è´¹é™æ€ Blog](https://wsgzao.github.io/post/hexo-guide/)\n","tags":["github","hexo","git"]},{"title":"Ubuntu ä¸‹è¿æ¥è“ç‰™é”®ç›˜","url":"/2016/06/14/ubuntu-bluetooth-keyboard/","content":"\næ–°ä¹°äº† `Filco Majestouch Convertible 2` é”®ç›˜ã€‚åœ¨è‡ªå·±çš„ç¬”è®°æœ¬ä¸Šè¿æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ¬åˆ°å…¬å¸ Ubuntu çš„ IBM ç¬”è®°æœ¬è¿™ä¹ˆéƒ½è¿æ¥ä¸ä¸Šï¼ŒæŸ¥æ‰¾è§£å†³ã€‚\n\nå®‰è£…è“ç‰™çš„ `hcidump`ï¼š\n\n```bash\nsudo apt-get install bluez-hcidump\n```\n\nç„¶åï¼Œç›‘æµ‹è“ç‰™äº‹ä»¶\n\n```bash\nsudo hcidump -at\n```\n\nå†æ¬¡è¿æ¥è“ç‰™é”®ç›˜ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºäº‹ä»¶ä¸­æœ‰ä¸€æ¡ `Pin ...` é”®ç›˜è¾“å…¥å¯¹åº”çš„ Pinï¼ŒEnterï¼Œè¿æ¥æˆåŠŸã€‚\n\n<!-- more -->\n\n-- EOF --\n","tags":["ubuntu"]},{"title":"Java final ä¿®é¥°ç¬¦","url":"/2016/06/13/java-modifier-final/","content":"\n## final ä¿®é¥°ç¬¦\n\nfinal ä¿®é¥°ç¬¦è¡¨ç¤ºä¸å¯å˜ã€‚ç±»ä¼¼ C ä¸­çš„ constantã€‚ç”¨äºä¿®é¥°å˜é‡è¡¨ç¤ºä¸å¯å˜çš„å˜é‡ã€‚ç”¨äºä¿®é¥°æ–¹æ³•è¡¨ç¤ºä¸å¯è¢«é‡å†™ã€‚ç”¨äºä¿®é¥°ç±»è¡¨ç¤ºä¸å¯è¢«ç»§æ‰¿ã€‚\n\n## final çš„æˆå‘˜å˜é‡\n\næˆå‘˜å˜é‡éšç€ç±»æˆ–è€…å®ä¾‹çš„åˆå§‹åŒ–è€Œåˆå§‹åŒ–ã€‚åœ¨ç±»åˆå§‹åŒ–æ—¶ï¼Œé™æ€å˜é‡å°±ä¼šè¢«åˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–ã€‚å¯¹äºå®ä¾‹å˜é‡ï¼Œç³»ç»Ÿä¼šåœ¨å®ä¾‹åˆå§‹åŒ–çš„æ—¶å€™åˆå§‹åŒ–è¿™äº›å˜é‡ã€‚\n\nç”±äºæˆå‘˜å˜é‡ä¼šè¢«ç³»ç»Ÿéšå¼çš„åˆå§‹åŒ–ã€‚å¦‚æœç¨‹åºå‘˜ä¸æ˜¾å¼çš„åˆå§‹åŒ–å®ƒä»¬ï¼Œé‚£ä»–ä»¬ä¼šå˜æˆ 0ï¼Œfalseï¼Œnull è¿™æ ·çš„å€¼ã€‚å¤±å»äº†æ„ä¹‰ã€‚\n\næ‰€ä»¥ **final ä¿®é¥°çš„æˆå‘˜å˜é‡å¿…é¡»æ˜¾å¼çš„åˆå§‹åŒ–ã€‚**\n\n- ç±»å˜é‡ï¼šå¿…é¡»åœ¨é™æ€åˆå§‹åŒ–å—ï¼Œæˆ–è€…åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–\n- å®ä¾‹å˜é‡ï¼šå¿…é¡»åœ¨éé™æ€åˆå§‹åŒ–å—ï¼Œå£°æ˜æ—¶ï¼Œæˆ–è€…æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ã€‚\n\n<!-- more -->\n\n## final çš„å±€éƒ¨å˜é‡\n\nå¯¹äºå½¢å‚ï¼šåœ¨æ–¹æ³•å†…éƒ¨æ— æ³•å¯¹å…¶è¿›è¡Œèµ‹å€¼ã€‚\næ–¹æ³•ä½“å†…çš„ final å±€éƒ¨å˜é‡ï¼šåªèƒ½èµ‹å€¼ä¸€æ¬¡ã€‚\nfinal çš„åŸºæœ¬ç±»å‹å˜é‡å’Œå¼•ç”¨ç±»å‹å˜é‡\n\nåŸºæœ¬ç±»å‹å˜é‡ï¼šå€¼ä¸å¯å˜ã€‚\nå¼•ç”¨ç±»å‹å˜é‡ï¼šæŒ‡é’ˆä¸å¯å˜ï¼Œä½†æ˜¯æŒ‡å‘çš„å†…å­˜åŒºåŸŸå¯å˜ã€‚\n\n```java\npublic class FinalVariableTest {\n\tpublic static void main(String[] agrs){\n\t\tfinal int[] arr = {1,23,4,5};\n\t\tSystem.out.println(Arrays.toString(arr));\n\t\tarr[2] = 20;\n        System.out.print(Arrays.toString(arr));\n   }\n}\n\n//Console\n//[1, 23, 4, 5]\n//[1, 23, 20, 5]\n```\n\n## final çš„å®æ›¿æ¢\n\nå¯¹äº final çš„å˜é‡æ¥è¯´ï¼Œä¸ç®¡æ˜¯ç±»å˜é‡ï¼Œå®ä¾‹å˜é‡è¿˜æ˜¯å±€éƒ¨å˜é‡ã€‚åªè¦åœ¨ç¼–è¯‘çš„æ—¶å€™å¯ä»¥ç¡®å®šï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæŠŠå®ƒçœ‹æˆä¸€ä¸ªç›´æ¥é‡è€Œä¸æ˜¯å˜é‡ã€‚\næ¯”å¦‚:\n\n```java\npublic class FinalVar{\n   public static void main(String[] args){\n       final int a =5;\n       System.out.println(a);\n   }\n}\n```\n\nå®é™…ç¼–è¯‘å™¨åœ¨æ‰§è¡Œ System.out.println(a);ç­‰åŒäºæ‰§è¡Œ System.out.println(5);\n**ä»€ä¹ˆå«åšç¼–è¯‘æ—¶å¯ä»¥ç¡®å®š**\nä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚\nstr1 åœ¨ç¼–è¯‘çš„æ—¶å€™å°±å¯ä»¥ç¡®å®šã€‚è€Œ str2 éœ€è¦è°ƒç”¨ valueOf() æ–¹æ³•æ‰èƒ½å¾—åˆ°åé¢ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚åœ¨ç¼–è¯‘çš„æ—¶å€™æ— æ³•ç¡®å®šã€‚ä»ç»“æœä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ã€‚\n\n```java\nfinal String str1 = \"hello world\"+2016;\nfinal String str2 = \"hello world\"+String.valueOf(2016);\n\nSystem.out.println(str1==\"hello world2016\");\nSystem.out.println(str2==\"hello world2016\");\n```\n\nå†çœ‹è¿™ä¸ª\n\n```java\nString str1 = \"hello world\";\nString str2 = \"hello \" + \"world\";\n\nString s1 = \"hello \";\nString s2 = \"world\";\n\nString str3 = s1 + s2;\n\nSystem.out.println(str1 == str2);\nSystem.out.println(str1 == str3);\n```\n\nstr1 == str3 è¿”å›æ˜¯ falseã€‚å› ä¸º str3 åœ¨ç¼–è¯‘æ˜¯æ— æ³•ç¡®å®šã€‚æ‰€ä»¥ä¸ä¼šè¢«å½“ä½œç›´æ¥é‡ã€‚ä½†æ˜¯å¦‚ s1 å’Œ s2 éƒ½åŠ ä¸Š finalã€‚ç¼–è¯‘å™¨ä¼šè¿›è¡Œå®æ›¿æ¢ã€‚str3 å°±ç­‰åŒäºâ€hello â€œ + â€worldâ€ã€‚\n\n## final çš„æ–¹æ³•\n\nfinal çš„æ–¹æ³•ä¸ä¼šè¢«é‡å†™ã€‚\n\n## final çš„ç±»\n\nfinal çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚\n\n## ä¸å¯å˜ç±»\n\nJava æä¾›çš„åŸºç¡€å˜é‡ç±»å‹çš„åŒ…è£…ç±»å’Œ String ç±»éƒ½æ˜¯ä¸å¯å˜ç±»ã€‚å¦‚æœè¦è‡ªå·±åˆ›å»ºä¸å¯å˜çš„ç±»éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š\n\n- ä½¿ç”¨ private å’Œ final ä¿®é¥°æˆå‘˜å˜é‡ã€‚\n- æä¾›å¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œç”¨äºæ ¹æ®éœ€è¦ä¼ å…¥å‚æ•°æ¥åˆå§‹åŒ–ç±»é‡Œçš„æˆå‘˜å˜é‡ã€‚\n- ä»…æä¾› getter æ–¹æ³•ï¼Œä¸æä¾› setter æ–¹æ³•ã€‚\n- å¦‚æœæœ‰å¿…è¦é‡å†™ hashCode() å’Œ equals() æ–¹æ³•ã€‚è¿˜è¦ä¿è¯ä¸¤ä¸ªç”¨ equals æ–¹æ³•åˆ¤æ–­ç›¸ç­‰çš„å¯¹è±¡ hasdCode() ä¹Ÿç›¸ç­‰ã€‚\n\n```java\npublic class Address {\n   private final String detail;\n   private final String postCode;\n   public Address(){\n      this.detail=\"\";\n      this.postCode=\"\";\n   }\n   public Address(String detailï¼ŒString postCode){\n       this.detail=detail;\n       this.postCode=postCode;\n   }\n   public String getDetail(){\n       return this.detail;\n   }\n   public String getPoetCode(){\n       return this.postCode;\n   }\n   public boolean equals(Object obj){\n       if(this == obj){\n           return true;\n       }\n       if(obj!=null&&obj.getClass()==Address.class){\n           Address ad = (Address)obj;\n           if(this.getClass().equals(ad.getDetail())&&this.getPoetCode().equals(ad.getPoetCode())){\n               return true;\n           }\n       }\n       return false;\n   }\n   public int hashCode(){\n       return this.detail.hashCode()+this.postCode.hashCode();\n   }\n}\n```\n\nç¼–å†™ä¸å¯å˜ç±»çš„æ—¶å€™ï¼Œåªéœ€è¦æä¾› getter æ–¹æ³•ï¼Œä¸æä¾› setter æ–¹æ³•å°±å¯ä»¥äº†ã€‚ä½†æ˜¯å¯¹å¼•ç”¨ä¼ é€’ä¸€å®šè¦æ³¨æ„ã€‚å› ä¸ºå¼•ç”¨ä¼ é€’ä¼ çš„æ˜¯å°¼ç›æŒ‡é’ˆã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¤±è´¥çš„ä¾‹å­ã€‚\n\n```java\npublic class Person {\n   public final Name name;\n   public Person(Name name){\n       this.name = name;\n   }\n   public Name getName(){\n       return this.name;\n   }\n   public static void main(String[] agrs){\n       Name n = new Name(\"Brady\"ï¼Œ\"Gao\");\n       Person p = new Person(n);\n       System.out.println(p.getName().getFirstName());\n       n.setFirstName(\"heihei\");\n       System.out.println(p.getName().getFirstName());\n   }\n}\nclass Name {\n   private String firstName;\n   private String lastName;\n   public Name(){}\n   public Name(String firstNameï¼ŒString lastName){\n       this.firstName = firstName;\n       this.lastName = lastName;\n   }\n   public String getFirstName(){\n       return this.firstName;\n   }\n   public void setFirstName(String firstName){\n       this.firstName = firstName;\n   }\n   public String getLastName(){\n       return this.lastName;\n   }\n   public void setLastName(String lastName){\n       this.lastName = lastName;\n   }\n}\n```\n\nè¦æƒ³è§£å†³è¿™ä¸ªï¼Œå°±è¦åšåˆ°ï¼Œé¿å…å¼•ç”¨ä¼ é€’å¸¦æ¥çš„æŒ‡é’ˆçš„ç›´æ¥ä¼ é€’ã€‚\né‡å†™ Person çš„æ„é€ æ–¹æ³•ã€‚\n\n```java\npublic Person (Name name){\n\tthis.name = new Name(name.getFirstName()ï¼Œname.getLastName());\n}\n```\n\n> Reference\n>\n> - ç•ªèŒ„åšå®¢-final ä¿®é¥°ç¬¦ï¼ˆåŸé“¾æ¥å¤±æ•ˆï¼‰\n","tags":["java"]},{"title":"ã€Core Javaã€‘è¯»ä¹¦ç¬”è®°","url":"/2016/05/06/core-java-reading-notes/","content":"\nè‡ªå·±æ˜¯ç¬¬ä¸€æ¬¡æŠŠä¸€æœ¬åšåšçš„çš„æŠ€æœ¯ç±»ä¹¦è¯»ä¸€éã€‚ä¸è¿‡ 7ã€8ã€9ã€10 ç« è®²çš„æ˜¯å…³äºå›¾å½¢çš„å°±æ˜¯ç¿»äº†ç¿»ï¼Œæ²¡æ€ä¹ˆçœ‹ã€‚ç¬¬ 4 ç«  å¯¹è±¡ä¸ç±»ï¼Œé‡Œé¢æœ‰å¾ˆå¤šéå¸¸åŸºç¡€ï¼Œå¯ä»¥è¡¥å……ä¸€äº›çŸ¥è¯†ç»†èŠ‚ã€‚ç¬¬ 14 ç«  å¤šçº¿ç¨‹ï¼Œæ˜¯è‡ªå·±æœ€é™Œç”Ÿçš„ï¼Œæ…•è¯¾ç½‘ä¸Šæœ‰èŠ‚è¯¾ [æ·±å…¥æµ…å‡º Java å¤šçº¿ç¨‹](http://www.imooc.com/view/202) è®²åˆ°çš„ä¾‹å­å°±æ˜¯ä¹¦ä¸Šä¾‹å­çš„å˜å½¢ï¼Œå¯ä»¥å¯¹ç…§ç†è§£ã€‚ç¬¬äºŒéé˜…è¯»åšåšç¬”è®°ã€‚\n\næœ¬æ–‡æ€»ç»“çš„æ˜¯ä¹¦ä¸­çš„ï¼šç¬¬ 3 ç«  Java çš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„ã€ç¬¬ 4 ç«  å¯¹è±¡ä¸ç±»ã€‚\n\n<!-- more -->\n\n## 3 Java çš„åŸºç¡€ç¨‹åºè®¾è®¡ç»“æ„\n\n### 3.3 æ•°æ®ç±»å‹\n\n- Java æ˜¯ä¸€ç§å¼ºç±»å‹è¯­éŸ³ã€‚åœ¨ Java ä¸­ï¼Œä¸€å…±æœ‰ 8 ä¸­åŸºæœ¬ç±»å‹ï¼ˆprimitive typeï¼‰ï¼Œå…¶ä¸­æœ‰ 4 ç§æ•´å‹ã€2 ç§æµ®ç‚¹ç±»å‹ã€1 ç§ç”¨äºè¡¨ç¤º Unicode ç¼–ç çš„å­—ç¬¦å•å…ƒçš„å­—ç¬¦ç±»å‹ char å’Œ 1 ç§ç”¨äºè¡¨ç¤ºçœŸå€¼çš„ boolean ç±»å‹ã€‚\n- Java7 å¼€å§‹ï¼Œè¿˜å¯ä»¥ä¸ºæ•°å­—å­—é¢é‡åŠ ä¸‹åˆ’çº¿ï¼Œå¦‚ç”¨ 1_000_000 è¡¨ç¤ºä¸€ç™¾ä¸‡ã€‚è¿™äº›ä¸‹åˆ’çº¿åªæ˜¯ä¸ºäº†è®©äººæ›´æ˜“è¯»ã€‚Java ç¼–è¯‘å™¨ä¼šå»é™¤è¿™äº›ä¸‹åˆ’çº¿ã€‚\n- æµ®ç‚¹æ•°å€¼ä¸é€‚ç”¨äºå‡ºç°èˆå…¥è¯¯å·®çš„é‡‘èè®¡ç®—ä¸­ã€‚å…¶ä¸»è¦åŸå› æ—¶æµ®ç‚¹æ•°å€¼é‡‡ç”¨äºŒè¿›åˆ¶ç³»ç»Ÿè¡¨ç¤ºï¼Œè€Œåœ¨äºŒè¿›åˆ¶ç³»ç»Ÿä¸­æ— æ³•ç²¾ç¡®çš„è¡¨ç¤ºåˆ†æ•° 1/10ã€‚è¿™å°±å¥½åƒåè¿›åˆ¶æ— æ³•ç²¾ç¡®åœ°è¡¨ç¤º 1/3 ä¸€æ ·ã€‚å¦‚æœéœ€è¦åœ¨æ•°å€¼è®¡ç®—ä¸­ä¸å«æœ‰ä»»ä½•èˆå…¥è¯¯å·®ï¼Œå°±åº”è¯¥ä½¿ç”¨ BigDecimal ç±»ã€‚\n\n### 3.4 å˜é‡\n\n- å°½ç®¡\\$æ˜¯ä¸€ä¸ªåˆæ³•çš„ Java å­—ç¬¦ï¼Œä½†ä¸è¦åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªå­—ç¬¦ã€‚å®ƒåªç”¨åœ¨ Java ç¼–è¯‘å™¨æˆ–å…¶ä»–å·¥å…·ç”Ÿæˆçš„åå­—ä¸­ã€‚\n\n### 3.6 å­—ç¬¦ä¸²\n\n- ç”±äºä¸èƒ½ä¿®æ”¹ Java å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨ Java æ–‡æ¡£ä¸­å°† String ç±»å¯¹è±¡ç§°ä¸ºä¸å¯å˜å­—ç¬¦ä¸²ã€‚\n- å¦‚æœè™šæ‹Ÿæœºå§‹ç»ˆå°†ç›¸åŒçš„å­—ç¬¦ä¸²å…±äº«ï¼Œå°±å¯ä»¥ä½¿ç”¨ == è¿ç®—ç¬¦æ£€æµ‹æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®é™…ä¸Šåªæœ‰å­—ç¬¦ä¸²å¸¸é‡æ˜¯å…±äº«çš„ï¼Œè€Œ + æˆ–è€… substring ç­‰æ“ä½œäº§ç”Ÿçš„ç»“æœå¹¶ä¸æ˜¯å…±äº«çš„ã€‚å› æ­¤ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨ == è¿ç®—ç¬¦æµ‹è¯•å­—ç¬¦ä¸²çš„ç›¸ç­‰æ€§ï¼Œä»¥å…åœ¨ç¨‹åºä¸­å‡ºç°ç³Ÿç³•çš„ bugã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œè¿™ç§ bug å¾ˆåƒéšæœºäº§ç”Ÿçš„é—´æ­‡æ€§é”™è¯¯ã€‚\n\n### 3.10 æ•°ç»„\n\n- åœ¨ Java ä¸­ï¼Œå…è®¸å°†ä¸€ä¸ªæ•°ç»„å˜é‡æ‹·è´ç»™å¦ä¸€ä¸ªæ•°ç»„å˜é‡ã€‚è¿™æ—¶ï¼Œä¸¤ä¸ªå˜é‡å°†å¼•ç”¨åŒä¸€ä¸ªæ•°ç»„ï¼š\n\n```java\nint[] luckyNumbers = smallPrimes;\nluckNumbers[5] = 12; // now smallPrimes[5] is also 12\n```\n\n- å¦‚æœå¸Œæœ›å°†ä¸€ä¸ªæ•°ç»„çš„æ‰€ç”¨å€¼æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­å»ï¼Œå°±è¦ä½¿ç”¨ Arrays ç±»çš„ copyOf æ–¹æ³•ï¼š\n\n```java\nint[] copiedLuckyNumbers = Arrays.copyOf(luckyNumbers, luckyNumbers.length);\n```\n\n## 4 å¯¹è±¡ä¸ç±»\n\n### 4.1 é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¦‚è¿°\n\n- ç±»ä¹‹é—´çš„å…³ç³»\n  ä¾èµ–ï¼ˆuses-aï¼‰\n  èšåˆï¼ˆhas-aï¼‰\n  ç»§æ‰¿ï¼ˆis-aï¼‰\n- ä¾èµ–ï¼ˆdependenceï¼‰ï¼Œå³ uses-a å…³ç³»ã€‚ä¾‹å¦‚ï¼ŒOrder ç±»ä½¿ç”¨ Account ç±»æ˜¯å› ä¸º Order å¯¹è±¡éœ€è¦è®¿é—® Account å¯¹è±¡æŸ¥çœ‹ä¿¡ç”¨çŠ¶æ€ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªç±»çš„æ–¹æ³•æ“çºµå¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±è¯´ä¸€ä¸ªç±»ä¾èµ–äºå¦ä¸€ä¸ªç±»ã€‚\n  åº”è¯¥å°½å¯èƒ½çš„å°†ç›¸äº’ä¾èµ–çš„ç±»å‡è‡³æœ€å°‘ã€‚æˆ‘ä»¬å¦‚æœ A ä¸çŸ¥é“ B çš„å­˜åœ¨ï¼Œä»–å°±ä¸ä¼šå…³å¿ƒ B çš„ä»»ä½•æ”¹å˜ï¼ˆè¿™æ„å‘³ç€ B çš„æ”¹å˜ä¸ä¼šå¯¼è‡´ A äº§ç”Ÿä»»ä½• bugï¼‰ã€‚ç”¨è½¯ä»¶å·¥ç¨‹çš„æœ¯è¯­æ¥è¯´ï¼Œå°±æ˜¯è®©ç±»ä¹‹é—´çš„è€¦åˆåº¦æœ€å°ã€‚\n- èšåˆï¼ˆaggressiveï¼‰ï¼Œå³ has-a å…³ç³»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª Order å¯¹è±¡åŒ…å«ä¸€äº› Item å¯¹è±¡ã€‚èšåˆå…³ç³»æ„å‘³ç€ç±» A çš„å¯¹è±¡åŒ…å«ç±» B çš„å¯¹è±¡ã€‚\n- ç»§æ‰¿ï¼ˆinheritanceï¼‰ï¼Œå³ is-a å…³ç³»ã€‚ä¾‹å¦‚ï¼ŒRushOrder ç±»ç”± Order ç±»ç»§æ‰¿è€Œæ¥ã€‚åœ¨å…·æœ‰ç‰¹æ®Šæ€§çš„ RushOrder ç±»ä¸­åŒ…å«äº†ä¸€äº›ç”¨äºä¼˜å…ˆå¤„ç†çš„ç‰¹æ®Šæ–¹æ³•ï¼Œä»¥åŠä¸€ä¸ªè®¡ç®—è¿è´¹çš„ä¸åŒæ–¹æ³•ï¼›è€Œå…¶ä»–çš„æ–¹æ³•ä» Order ç±»ç»§æ‰¿äº†æ¥çš„ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¦‚æœç±» A æ‰©å±•ç±» Bï¼Œç±» A ä¸ä½†åŒ…å«ä»ç±» B ç»§æ‰¿çš„æ–¹æ³•ï¼Œè¿˜ä¼šæ‹¥æœ‰ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚\n\n### 4.2 ä½¿ç”¨é¢„å®šä¹‰ç±»\n\n- åœ¨å¯¹è±¡ä¸å¯¹è±¡å˜é‡ä¹‹é—´å­˜åœ¨ç€ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¾‹å¦‚ï¼š\n\n```java\nDate deadline; // deadline doesn't refer to any object\n```\n\n- å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡å˜é‡ deadlineï¼Œå®ƒå¯ä»¥å¼•ç”¨ Date ç±»å‹çš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸€å®šè¦è®¤è¯†åˆ°ï¼šå˜é‡ deading ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®é™…ä¸Šä¹Ÿæ²¡æœ‰å¼•ç”¨å¯¹è±¡ã€‚æ­¤æ—¶ï¼Œä¸èƒ½å°†ä»»ä½• Date æ–¹æ³•åº”ç”¨ä¸è¿™ä¸ªå˜é‡ä¸Šã€‚\n\n```java\ns = deadline.toString(); // not yet\n```\n\n- å¿…é¡»é¦–å…ˆåˆå§‹åŒ–å˜é‡ deadlineï¼Œå¯ä»¥ç”¨æ–°æ„é€ çš„å¯¹è±¡åˆå§‹åŒ–è¿™ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥è®©è¿™ä¸ªå˜é‡å¼•ç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ã€‚\n- ä¸€å®šè¦è®¤è¯†åˆ°ï¼šä¸€ä¸ªå¯¹è±¡å˜é‡å¹¶æ²¡æœ‰å®é™…åŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»…ä»…å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ã€‚\n- åœ¨ Java ä¸­ï¼Œä»»ä½•å¯¹è±¡å˜é‡çš„å€¼éƒ½æ—¶å¯¹å­˜å‚¨åœ¨å¦ä¸€ä¸ªåœ°æ–¹çš„ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚new æ“ä½œç¬¦çš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¼•ç”¨ã€‚\n- å¯æ˜¾ç¤ºåœ°å°†å¯¹è±¡å˜é‡è®¾ç½®ä¸º nullï¼Œè¡¨æ˜è¿™ä¸ªå¯¹è±¡å˜é‡ç›®å‰æ²¡æœ‰å¼•ç”¨ä»»ä½•å¯¹è±¡ã€‚\n\n### 4.3 ç”¨æˆ·è‡ªå®šä¹‰ç±»\n\n- ç±»æ–‡ä»¶å¿…é¡»ä¸ public ç±»çš„åå­—ç›¸åŒ¹é…ã€‚åœ¨ä¸€ä¸ªåŸæ–‡ä»¶ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå…±æœ‰ç±»ï¼Œä½†å¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„éå…±æœ‰ç±»ã€‚\n- å¯ä»¥ç”¨ public æ ‡è®°å®ä¾‹åŸŸï¼Œä½†è¿™æ˜¯ä¸€ç§æä¸ºä¸æå€¡çš„åšæ³•ã€‚public æ•°æ®åŸŸå…è®¸ç¨‹åºä¸­çš„ä»»ä½•æ–¹æ³•å¯¹å…¶è¿›è¡Œè¯»å–å’Œä¿®æ”¹ã€‚è¿™å°±å®Œå…¨ç ´åäº†å°è£…ã€‚è¿™é‡Œå¼ºçƒˆå»ºè®®å°†å®ä¾‹åŸŸæ ‡è®°ä¸º privateã€‚\n- æ„é€ å™¨ï¼š\n  æ„é€ å™¨ä¸ç±»åŒå\n  æ¯ä¸ªç±»å¯ä»¥æœ‰ä¸€ä¸ªä»¥ä¸Šçš„æ„é€ å™¨\n  æ„é€ å™¨å¯ä»¥æœ‰ 0 ä¸ªã€1 ä¸ªæˆ–å¤šä¸ªå‚æ•°\n  æ„é€ å™¨æ²¡æœ‰è¿”å›å€¼\n  æ„é€ å™¨æ€»æ˜¯ä¼´éšç€ new æ“ä½œä¸€èµ·è°ƒç”¨\n- ç±»ï¼š\n  ç§æœ‰çš„æ•°æ®åŸŸ\n  å…¬æœ‰çš„åŸŸæœåŠ¡å™¨æ–¹æ³•\n  å…¬æœ‰çš„åŸŸæ”¹å˜æ–¹æ³•\n- ä¸è¦ç¼–å†™è¿”å›å¼•ç”¨å¯å˜å¯¹è±¡çš„è®¿é—®å™¨æ–¹æ³•ã€‚\n\n```java\nclass Employee {\n    ...\n    private Date hireDay;\n    public Date getHireDay() {\n        return Date hireDay;\n    }\n}\n```\n\n- è¿™æ ·ä¼šç ´åå°è£…æ€§ï¼ä»£ç ï¼š\n\n```java\nEmployee harry = ...;\nDate d = harry.getHireDay();\ndoule tenYearsInMilliSeconds = 10 * 365.25 * 24 * 60 * 60 * 1000;\nd.setTime(d.getTime() - (long)tenYearsInMilliSeconds);\n// let's give Harry ten years of added seniority\n```\n\n- å‡ºé”™çš„åŸå› å¾ˆå¾®å¦™ã€‚d å’Œ harry.hireDay å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚å¯¹ d è°ƒç”¨æ›´æ”¹å™¨æ–¹æ³•å°±å¯ä»¥è‡ªåŠ¨åœ°æ”¹å˜è¿™ä¸ªé›‡å‘˜çš„ç§æœ‰çŠ¶æ€ï¼\n- å¦‚æœéœ€è¦è¿”å›ä¸€ä¸ªå¯å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œåº”è¯¥é¦–å…ˆå¯¹å®ƒè¿›è¡Œå…‹éš†ï¼ˆcloneï¼‰ã€‚å¯¹è±¡ clone æ˜¯æŒ‡å­˜æ”¾åœ¨å¦ä¸€ä¸ªä½ç½®ä¸Šçš„å¯¹è±¡å‰¯æœ¬ã€‚\n\n```java\n    public Date getHireDay() {\n        return Date hireDay.clone();\n    }\n```\n\n- Employee ç±»çš„æ–¹æ³•å¯ä»¥è®¿é—® Emloyee ç±»çš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„**ç§æœ‰åŸŸ ** ã€‚\n\n```java\nclass Employee {\n    public boolen equals(Employee other) {\n        return name.equals(other.name);\n    }\n}\n```\n\n- final ä¿®é¥°ç¬¦å¤§éƒ½åº”ç”¨äºåŸºæœ¬ï¼ˆprimitiveï¼‰ç±»å‹åŸŸï¼Œæˆ–ä¸å¯å˜ï¼ˆimmutableï¼‰ç±»çš„åŸŸï¼ˆå¦‚æœç±»ä¸­çš„æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ä¸ä¼šæ”¹å˜å…¶å¯¹è±¡ï¼Œè¿™ä¸­ç±»å°±æ˜¯ä¸å¯å˜çš„ç±»ã€‚ä¾‹å¦‚ï¼ŒString ç±»å°±æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ç±»ï¼‰ã€‚å¯¹äºå¯å˜çš„ç±»ï¼Œä½¿ç”¨ final ä¿®é¥°ç¬¦å¯èƒ½ä¼šå¯¹è¯»è€…é€ æˆæ··ä¹±ã€‚ä»£ç \n\n```java\nprivate final Date hiredate;\n```\n\n- ä»…ä»…æ„å‘³ç€å­˜å‚¨å­ hiredate å˜é‡ä¸­çš„å¯¹è±¡å¼•ç”¨åœ¨å¯¹è±¡æ„é€ ä¹‹åä¸èƒ½è¢«æ”¹å˜ï¼Œè€Œå¹¶ä¸æ„å‘³ç€ hiredate å¯¹è±¡æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚ä»»ä½•æ–¹æ³•éƒ½å¯ä»¥å¯¹ hiredate å¼•ç”¨çš„å¯¹è±¡è°ƒç”¨ setTime æ›´æ”¹å™¨ã€‚\n\n### 4.4 é™æ€åŸŸä¸é™æ€æ–¹æ³•\n\n- æ¯ä¸€ä¸ªé›‡å‘˜å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ id åŸŸï¼Œä½†è¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å°†å…±äº«ä¸€ä¸ª nextId åŸŸã€‚\n\n```java\nclass Employee {\n    private static int nextId = 1;\n    private int id;\n}\n```\n\n- æ¢å¥è¯è¯´ï¼Œå¦‚æœæœ‰ 1000 ä¸ª Employee ç±»çš„å¯¹è±¡ï¼Œåˆ™æœ‰ 1000 ä¸ªå®ä¾‹åŸŸ idã€‚ä½†æ˜¯ï¼Œè¿™æœ‰ä¸€ä¸ªé™æ€åŸŸ nextIdã€‚å³ä½¿æ²¡æœ‰ä¸€ä¸ªé›‡å‘˜å¯¹è±¡ï¼Œé™æ€åŸŸ nextId ä¹Ÿæ˜¯å­˜åœ¨ã€‚å®ƒå±äºç±»ï¼Œè€Œä¸å±äºä»»ä½•ç‹¬ç«‹çš„å¯¹è±¡ã€‚\n- å¯ä»¥ä½¿ç”¨å¯¹è±¡è°ƒç”¨é™æ€æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ harry æ˜¯ä¸€ä¸ª Employee å¯¹è±¡ï¼Œå¯ä»¥ç”¨ harry.getNextId() ä»£æ›¿ Employee.getNextId()ã€‚ä¸è¿‡è¿™ä¸­æ–¹å¼å¾ˆå®¹æ˜“é€ æˆæ··æ·†ï¼Œå…¶åŸå› æ˜¯ getNextId æ–¹æ³•è®¡ç®—çš„ç»“æœä¸ harry æ¯«æ— å…³ç³»ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ç±»åæ¥è°ƒç”¨é™æ€æ–¹æ³•ã€‚\n- æ¯ä¸€ä¸ªç±»å¯ä»¥æœ‰ä¸€ä¸ª main æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨äºå¯¹ç±»è¿›è¡Œå•å…ƒæµ‹è¯•çš„æŠ€å·§ã€‚\n\n### 4.5 å‚æ•°æ–¹æ³•\n\n- Java ç¨‹åºè®¾è®¡è¯­è¨€æ€»æ˜¯é‡‡ç”¨æŒ‰å€¼è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ªæ‹·è´ã€‚\n- Java ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æ–¹æ³•å‚æ•°çš„ä½¿ç”¨æƒ…å†µï¼š\n  ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ã€‚\n  ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ã€‚\n  ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚\n\n### 4.6 å¯¹è±¡æ„é€ \n\n- è¦å®Œæ•´çš„æè¿°ä¸€ä¸ªæ–¹æ³•éœ€è¦æŒ‡å‡ºæ–¹æ³•ä»¥åŠå‚æ•°ç±»å‹ï¼Œè¿™å«åšæ–¹æ³•çš„ç­¾åï¼ˆsignatureï¼‰ã€‚\n- è¿”å›ç±»å‹ä¸æ˜¯æ–¹æ³•ç­¾åçš„ä¸€éƒ¨åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªåå­—ç›¸åŒã€å‚æ•°ç±»å‹ä¹Ÿç›¸åŒå´è¿”å›ä¸åŒç±»å‹å€¼çš„æ–¹æ³•ã€‚\n- å¦‚æœåœ¨ç¼–å†™ä¸€ä¸ªç±»æ—¶æ²¡æœ‰ç¼–å†™æ„é€ å™¨ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šæä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚è¿™ä¸ªæ„é€ å™¨å°†æ‰€æœ‰çš„å®ä¾‹åŸŸè®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚å®ä¾‹åŸŸä¸­çš„æ•°å€¼ç±»å‹æ•°æ®è®¾ç½®ä¸º 0ã€å¸ƒå°”å‹æ•°å€¼è®¾ç½®ä¸º falseã€æ‰€æœ‰å¯¹è±¡å˜é‡å°†è®¾ç½®ä¸º nullã€‚\n- å¦‚æœç±»ä¸­æä¾›äº†è‡³å°‘ä¸€ä¸ªæ„é€ å™¨ï¼Œä½†æ˜¯æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨ï¼Œåˆ™åœ¨æ„é€ å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰æä¾›å‚æ•°å°±ä¼šè¢«è§†ä¸ºä¸åˆæ³•ã€‚\n- å¯¹æ¯ä¸€ä¸ªå®ä¾‹åŸŸéƒ½å¯ä»¥è¢«è®¾ç½®ä¸ºä¸€ä¸ªæœ‰æ„ä¹‰çš„åˆå€¼ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„è®¾è®¡ä¹ æƒ¯ã€‚\n\n```java\nclass Employee {\n    private String name = \"\";\n    ...\n}\n```\n\n### 4.10 ç±»è®¾è®¡æŠ€å·§\n\n- ä¸€å®šè¦ä¿è¯æ•°æ®ç§æœ‰ã€‚ç»å¯¹ä¸è¦ç ´åå°è£…æ€§ã€‚\n- ä¸€å®šè¦å¯¹æ•°æ®åˆå§‹åŒ–ã€‚\n- ä¸è¦åœ¨ç±»ä¸­ä½¿ç”¨è¿‡å¤šçš„åŸºæœ¬ç±»å‹ã€‚å°±æ˜¯è¯´ï¼Œç”¨å…¶ä»–çš„ç±»ä»£æ›¿å¤šä¸ªç›¸å…³çš„åŸºæœ¬ç±»å‹çš„ä½¿ç”¨ã€‚\n- ä¸æ˜¯æ‰€æœ‰çš„åŸŸéƒ½éœ€è¦ç‹¬ç«‹çš„åŸŸè®¿é—®å™¨å’ŒåŸŸæ›´æ”¹å™¨ã€‚\n- å°†èŒè´£è¿‡å¤šçš„ç±»è¿›è¡Œåˆ†è§£ã€‚\n- ç±»åå’Œæ–¹æ³•åè¦èƒ½å¤Ÿä½“ç°å®ƒä»¬çš„èŒè´£ã€‚\n","tags":["reading-notes","java"]},{"title":"ã€Core Javaã€‘å¯¹è±¡ä¸ç±»-æ–¹æ³•å‚æ•°ä¼ é€’","url":"/2016/04/19/core-java-method-parameter/","content":"\næé—®ï¼šJava å¯¹è±¡é‡‡ç”¨çš„æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ\n\næœ‰äº›ç¨‹åºå‘˜è®¤ä¸º Java å¯¹è±¡é‡‡ç”¨çš„æ˜¯å¼•ç”¨è°ƒç”¨ï¼Œå®é™…ä¸Šï¼Œè¿™ç§ç†è§£æ˜¯ä¸å¯¹çš„ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªåä¾‹æ¥è¯¦ç»†çš„é˜è¿°ä¸€ä¸‹è¿™ä¸€é—®é¢˜ã€‚\n\né¦–å…ˆï¼Œç¼–å†™ä¸€ä¸ªäº¤æ¢ä¸¤ä¸ªé›‡å‘˜å¯¹è±¡çš„æ–¹æ³•ï¼š\n\n```java\npublic static void swap(Employee x, Employee y)\n{\n   Employee temp = x;\n   x = y;\n   y = temp;\n}\n```\n\n<!-- more -->\n\nå¦‚æœ Java ç¨‹åºæ—¶å¼•ç”¨è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±åº”è¯¥èƒ½éƒ½å®ç°äº¤æ¢å®é™…çš„æ•ˆæœã€‚\n\n```java\nSystem.out.println(\"\\nTesting swap:\");\n\nEmployee a = new Employee(\"Alice\", 70000);\nEmployee b = new Employee(\"Bob\", 60000);\n\nSystem.out.println(\"Before: a=\" + a.getName());\nSystem.out.println(\"Before: b=\" + b.getName());\n\nswap(a, b);\n\nSystem.out.println(\"After: a=\" + a.getName());\nSystem.out.println(\"After: b=\" + b.getName());\n```\n\nä½†æ˜¯ç»“æœ a ä»ç„¶æ—¶ Aliceï¼Œb æ˜¯ Bobã€‚å¯¹è±¡å¼•ç”¨è¿›è¡Œçš„æ˜¯å€¼ä¼ é€’ã€‚\n\nå…¶å®ä¸å¿…å–æ‰£æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’çš„å­—çœ¼ï¼Œç†è§£å…¶ä¸­çš„åŸå› æ˜¯æœ€å¥½ã€‚\n\n![160419-core-java-method-parameter-001](https://user-images.githubusercontent.com/9289792/80198302-72d19700-8652-11ea-9ddf-595a2be198b5.jpg)\n\nåœ¨è°ƒç”¨ swap æ—¶ï¼Œa å°†ä¸€ä¸ª **å¼•ç”¨çš„å‰¯æœ¬** ä¼ é€’ç»™äº† xï¼Œè®© x ä¹ŸæŒ‡å‘äº†ï¼Œç›¸åŒä¸ a æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„ Employee å¯¹è±¡ Aliceï¼Œb å°†ä¸€ä¸ªå¼•ç”¨çš„å‰¯æœ¬ä¼ é€’ç»™äº† yï¼Œè®© y ä¹ŸæŒ‡å‘äº†ï¼Œç›¸åŒä¸ b æŒ‡å‘çš„å†…å­˜å•å…ƒä¸­çš„ Employee å¯¹è±¡ Bobã€‚\n\nè¿™æ—¶æ‰§è¡Œ swap æ–¹æ³•å†…éƒ¨çš„å†…å®¹ï¼Œäº¤æ¢äº† xï¼Œy çš„å¼•ç”¨æŒ‡å‘ï¼Œè¿™æ˜¯ x æŒ‡å‘çš„æ—¶ Bobï¼Œy æ˜¯ Aliceï¼Œä½†æ˜¯åœ¨æ–¹æ³•ç»“æŸåï¼Œæ–¹æ³•å¤–çš„ aï¼Œb çš„æŒ‡å‘æ˜¯ä»ç„¶æ²¡æœ‰å˜åŒ–ï¼Œa æ˜¯ Aliceï¼Œb æ˜¯ Bobã€‚\n\n## ä¹¦ä¸Šæ€»ç»“\n\nä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ã€‚\nä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ã€‚\nä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚\n\n-- EOF --\n","tags":["reading-notes","java"]},{"title":"ã€Core Javaã€‘å½©ç¥¨é€‰å–ä¸­å¥–æ•°å­—-æ•°ç»„ä¾‹å­","url":"/2016/03/23/core-java-array-dome/","content":"\nä» 1,2,3...h ä¸­éšæœºå– k ä¸ªä¸­å¥–å·ç ã€‚\n\n<!-- more -->\n\n```java\npackage im.zyf.javacore;\n\nimport java.util.Arrays;\nimport java.util.Scanner;\n\npublic class LotteryDrawing {\n\n    public static void main(String[] args) {\n\n        Scanner in = new Scanner(System.in);\n        System.out.println(\"how many numbers do you need?\");\n        int k = in.nextInt();\n\n        System.out.println(\"what is the highest number?\");\n        int h = in.nextInt();\n\n        int[] harr = new int[h];\n        for (int i = 0; i < h; i++) {\n            harr[i] = i + 1;\n        }\n\n        int[] karr = new int[k];\n        for (int i = 0; i < k; i++) {\n            int random = (int) (Math.random() * h);\n            karr[i] = harr[random];\n            //å°†æ•°ç»„æœ€åçš„å€¼ï¼Œä»£æ›¿æ‰è¢«å–èµ°çš„å€¼\n            harr[random] = harr[h - 1];\n            //æ•°ç»„é•¿åº¦å‡1\n            h--;\n        }\n        Arrays.sort(karr);\n        System.out.println(Arrays.toString(karr));\n    }\n}\n```\n\nConsole:\n\n```bash\nhow many numbers do you need?\n3\nwhat is the highest number?\n4444444\n[433177, 827621, 2607294]\n```\n\næœ‰å‡ ä¸ªç‚¹ï¼š\n\n- å–è¿‡çš„æ•°ä¸èƒ½å†å–\n- å–åå‡åºæ’åˆ—\n\nå…³é”®ç‚¹ï¼š\n\n- æ¯æ¬¡å–çš„éƒ½æ˜¯ä¸‹æ ‡ï¼Œè€Œä¸æ˜¯å®é™…çš„å€¼ã€‚ä¸‹æ ‡æŒ‡å‘åŒ…å«å°šæœªæŠ½å–çš„æ•°ç»„å…ƒç´ \n\n-- EOF --\n","tags":["reading-notes","java"]},{"title":"è¯•ç€å†™ä¸œè¥¿","url":"/2016/03/18/try-to-write-something/","content":"\nç°åœ¨æ˜¯å¤§å››ä¸‹ä»å­¦æ ¡å‡ºæ¥å®ä¹ ã€‚åœ¨é¢è¯•ä¸€å®¶å…¬å¸æ—¶ï¼Œé¢è¯•å®˜çœ‹åˆ°æˆ‘çš„é‚®ç®±ï¼ˆ168#yifans.comï¼‰æ˜¯è‡ªå·±çš„åŸŸååè¯´ï¼š\n\n> é—®ï¼šâ€œæœ‰è‡ªå·±çš„ç½‘ç«™å—ï¼Ÿâ€\n> â€œæ²¡æœ‰ã€‚â€\n> é—®ï¼šâ€œåŸŸåéƒ½ä¹°äº†ä¸è‡ªå·±æ­ä¸ªç½‘ç«™?â€\n> â€œâ€¦â€¦â€\n\n<!-- more -->\n\nå…¶å®è¿™ä¹Ÿä¸æ˜¯è‡ªå·±è¦æ­åšå®¢çš„æ ¹æœ¬åŸå› ã€‚\n\nåœ¨å¤§å­¦é‡Œï¼Œå­¦äº†äº›åšäº†äº›ä¸œè¥¿ï¼Œå¯æ€è€ƒçš„ä¸å¤šã€‚ç°åœ¨è¶Šå‘è§‰çš„ä¸€ä¸ªäººçš„å¼ºå¤§åœ¨äºæ€æƒ³ã€‚çœ‹ä¹¦å†™äº›ä¸œè¥¿æˆ‘æƒ³æ˜¯æé«˜ä¸€ä¸ªäººæ€æƒ³çš„æ–¹æ³•å§ã€‚æ–‡å­—å†™ä¸‹æ¥äº†ä¹Ÿæ–¹ä¾¿äº¤æµã€‚\n\nå‡ºæ¥äº†æ¢äº†ä¸€ä¸ªç¯å¢ƒï¼Œé‡åˆ°æ–°çš„äººï¼Œæ–°çš„äº‹ï¼Œå¯ä»¥æ¢ä¸ªè§’åº¦çœ‹äººçœ‹äº‹ã€‚åŸæ¥æˆ‘ç†è§£çš„ä¸€äº›æŠ€æœ¯åšå®¢ï¼Œå°±æ˜¯è§£å†³é—®é¢˜åçš„ç¬”è®°æœ¬ï¼Œæœ‰é—®é¢˜ä»ä¸­æ‰¾ï¼Œè€Œä¸”è§‰å¾—å¾ˆå¤šç½‘ä¸Šçš„æŠ€æœ¯åšå®¢é‡Œçš„å†…å®¹éƒ½æ˜¯æ¥å›çš„è½¬æ¥è½¬å»ï¼Œå¾ˆå¤šè§£å†³æ–¹æ¡ˆéƒ½æ˜¯è¿‡æ—¶çš„ï¼Œæ²¡ä»€ä¹ˆçš„ã€‚å¯æœ€è¿‘åœ¨æµè§ˆåšå®¢å›­ã€csdn å‘ç°äº†å¾ˆå¤šç²¾åçš„å‰äººåˆ†äº«è‡ªå·±æ‰€ç†è§£çš„çŸ¥è¯†ã€æŠ€æœ¯ä¸­èµ°çš„å¼¯è·¯ï¼Œé˜…è¯»åå¾ˆå—ç›Šã€‚\n\næƒ³æƒ³è‡ªå·±ï¼Œå¾ˆå¤šäº‹ã€å¾ˆå¤šæƒ…å†µä¸‹å°±æ˜¯è¿™æ ·ï¼šæ²¡è§å¤šå°‘å°±ä¸‹ç»“è®ºï¼Œç®¡ä¸­çª¥è±¹ï¼Œtoo young.\n\nå…¶ä¸­æœ‰è¿™æ ·çš„ä¸€ä¸ªç­¾å:\n\n> æˆ‘ä¸èƒ½ä¿è¯å†™çš„æ¯ä¸ªåœ°æ–¹éƒ½æ˜¯å¯¹çš„ï¼Œä½†æ˜¯è‡³å°‘èƒ½ä¿è¯ä¸å¤åˆ¶ã€ä¸é»è´´ï¼Œä¿è¯æ¯ä¸€å¥è¯ã€æ¯ä¸€è¡Œä»£ç éƒ½ç»è¿‡äº†è®¤çœŸçš„æ¨æ•²ã€ä»”ç»†çš„æ–Ÿé…Œã€‚æ¯ä¸€ç¯‡æ–‡ç« çš„èƒŒåï¼Œå¸Œæœ›éƒ½èƒ½çœ‹åˆ°è‡ªå·±å¯¹äºæŠ€æœ¯ã€å¯¹äºç”Ÿæ´»çš„æ€åº¦ã€‚\n> æˆ‘ç›¸ä¿¡ä¹”å¸ƒæ–¯è¯´çš„ï¼Œåªæœ‰é‚£äº›ç–¯ç‹‚åˆ°è®¤ä¸ºè‡ªå·±å¯ä»¥æ”¹å˜ä¸–ç•Œçš„äººæ‰èƒ½çœŸæ­£åœ°æ”¹å˜ä¸–ç•Œã€‚é¢å¯¹å‹åŠ›ï¼Œæˆ‘å¯ä»¥æŒ‘ç¯å¤œæˆ˜ã€ä¸çœ ä¸ä¼‘ï¼›é¢å¯¹å›°éš¾ï¼Œæˆ‘æ„¿æ„è¿éš¾è€Œä¸Šã€æ°¸ä¸é€€ç¼©ã€‚\n> å…¶å®æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œæˆ‘åªæ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œè¿™å°±æ˜¯æˆ‘ç°åœ¨çº¯ç²¹äººç”Ÿçš„å…¨éƒ¨ã€‚\n\nå†è®¤åŒä¸è¿‡äº†ã€‚\n\n-- EOF --\n","tags":["report"],"categories":["report"]}]