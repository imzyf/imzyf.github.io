<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.146.7"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ZYF.IM BLOG</title>
<meta name=keywords content="ZYF,ZYF.IM,Blog,Portfolio,PaperMod"><meta name=description content="Code. Create. Conquer."><meta name=author content="Me"><link rel=canonical href=https://zyf.im/><link crossorigin=anonymous href=/assets/css/stylesheet.eb010ba19da259e1633d31a246087e3b0656d556c30406763ea24160333d238f.css integrity="sha256-6wELoZ2iWeFjPTGiRgh+OwZW1VbDBAZ2PqJBYDM9I48=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zyf.im/index.xml><link rel=alternate type=application/json href=https://zyf.im/index.json><link rel=alternate hreflang=en href=https://zyf.im/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="ZYF.IM BLOG"><meta property="og:description" content="Code. Create. Conquer."><meta property="og:locale" content="en-us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="ZYF.IM BLOG"><meta name=twitter:description content="Code. Create. Conquer."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"ZYF.IM BLOG","url":"https://zyf.im/","description":"Code. Create. Conquer.","logo":"https://zyf.im/favicon.ico","sameAs":["https://github.com/","https://space.bilibili.com/29991589","/links/"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>Vue Code Snippet</h2></header><div class=entry-content><p>重置 data 的数据为初始状态 this.$data = { ...this.$data, ...this.$options.data() }; // Object.assign(this.$data, this.$options.data()); Object.assign({}, this.$options.data().form, { type: 1 }); 修改 ElementUI 默认样式 vue 中令人头疼的 element-ui 组件默认 css 样式修改 | juejin
&lt;template> &lt;div class="my-class"> &lt;el-table> &lt;/el-table> &lt;/div> &lt;/template> &lt;style lang="scss" scoped> .my-class__expand-column .cell { display: none; } .my-class .el-table tbody tr:hover > td { cursor: pointer; } &lt;/style> watch 对象的属性 data: { a: 100, msg: { channel: "音乐", style: "活泼" } }, watch: { a(newval, oldVal) { console.log("new: %s, old: %s", newval, oldVal); } } watch: { msg: { handler(newValue, oldValue) { console.log(newValue) }, // 深度监听 deep: true } } 监听对象内的某一具体属性，可以通过 computed 做中间层来实现：
computed: { channel() { return this.msg.channel } }, watch:{ channel(newValue, oldValue) { console.log('new: %s, old: %s', newValue, oldValue) } } 判断 data 中的对象是否为空 1、利用 jQuery 的 isEmptyObject：
...</p></div><footer class=entry-footer><span title='2019-08-08 17:33:38 +0000 UTC'>August 8, 2019</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;437 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1622173233666-5685f70b0aa9?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to Vue Code Snippet" href=https://zyf.im/2019/08/08/vue-code-snippet/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>npx 入门使用</h2></header><div class=entry-content><p>今天在使用的 Gulp 时看到首页的一段命令：
... npx -p touch nodetouch gulpfile.js ... npx 是个啥？决定一探究竟。
调用项目安装的模块 npx 是 npm 的自带模块，可以直接使用，手动安装为：
npm install -g npx npx - execute npm package binaries. 它解决的问题是：更方便的从本地 node_modules/.bin 或中央缓存中执行命令。
比如项目安装了 gulp 需要执行命令时需要：
node_modules/.bin/gulp -v 如果使用 npx 只需要：
npx gulp -v npx 的原理很简单，就是运行的时候，会到 node_modules/.bin 路径和环境变量 $PATH 里面，检查命令是否存在。由于 npx 会检查环境变量 $PATH，所以系统命令也可以调用。
# 等同于 ls npx ls 注意，Bash 内置的命令不在 $PATH 里面，所以不能用。比如，cd 是 Bash 命令，因此就不能用 npx cd。
避免全局安装模块 create-react-app 这个模块是全局安装，npx 可以运行它，而且不进行全局安装：
...</p></div><footer class=entry-footer><span title='2019-07-17 20:24:41 +0000 UTC'>July 17, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;167 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1543966888-7c1dc482a810?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to npx 入门使用" href=https://zyf.im/2019/07/17/npx-getting-started/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>VSCode 使用经验</h2></header><div class=entry-content><p>编辑 settings.json command + , 右上角点击 打开设置。
{ // 通过整体放大窗口比例 "window.zoomLevel": 1.1, // 字体 "editor.fontSize": 14, // 软换行 "editor.wordWrap": "on", } 显示空格和 tab 符号 Editor: Render Whitespace 控制编辑器在空白字符上显示符号的方式。 all Settings 同步 只需从左下角的设置齿轮启用内置同步。
扩展推荐 Community Material Theme EditerConfig For VS Code ESLint Git History GitLens — Git supercharged markdownlint Material Icon Theme Material Theme Prettier - Code formatter Terminal Vetur – EOF –</p></div><footer class=entry-footer><span title='2019-06-11 17:01:39 +0000 UTC'>June 11, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;62 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1580460848325-6b8d06d628cc?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to VSCode 使用经验" href=https://zyf.im/2019/06/11/vscode-using-experience/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>Git 提交 message 规范</h2></header><div class=entry-content><p>commit message 应该清晰明了，说明本次提交的目的。基本公式：
&lt;type>(&lt;scope>): &lt;subject> 完整公式：
&lt;type>(&lt;scope>): &lt;subject> &lt;BLANK LINE> &lt;body> &lt;BLANK LINE> &lt;footer> type 用于说明 commit 的类别，只允许使用下面 7 个标识。
feat：新功能（feature） fix：修补 bug docs：文档（documentation） style：格式（不影响代码运行的变动） refactor：重构（即不是新增功能，也不是修改 bug 的代码变动） test：增加测试 chore：构建过程或辅助工具的变动 scope 用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。
subject 是 commit 目的的简短描述，不超过 50 个字符。
以动词开头，使用第一人称现在时，比如 change，而不是 changed 或 changes 第一个字母小写 结尾不加句号 . cli 工具 commitizen cli commitizen/cz-cli 使用它提供的 git cz 命令替代我们的 git commit 命令，帮助我们生成符合规范的 commit message。
除此之外，我们还需要为 commitizen 指定一个 Adapter 比如：commitizen/cz-conventional-changelog（一个符合 Angular 团队规范的 preset）使得 commitizen 按照我们指定的规范帮助我们生成 commit message。
...</p></div><footer class=entry-footer><span title='2019-06-04 14:07:46 +0000 UTC'>June 4, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;178 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1493124071986-cccebebe4cc3?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to Git 提交 message 规范" href=https://zyf.im/2019/06/04/git-commit-message-style-guide/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>最左前缀原理与相关优化</h2></header><div class=entry-content><p>MySQL 中的索引可以以一定顺序引用多个列，这种索引叫做联合索引，一般的，一个联合索引是一个有序元组 &lt;a1, a2, …, an>，其中各个元素均为数据表的一列。另外，单列索引可以看成联合索引元素数为 1 的特例。
我们在 Employees Sample Database 中实验，MySQL 版本 5.7。
以 employees.titles 为例，查看其索引：
SHOW INDEX FROM employees.titles; +--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ | Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | +--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ | titles | 0 | PRIMARY | 1 | emp_no | A | 301292 | NULL | NULL | | BTREE | | | | titles | 0 | PRIMARY | 2 | title | A | 442605 | NULL | NULL | | BTREE | | | | titles | 0 | PRIMARY | 3 | from_date | A | 442605 | NULL | NULL | | BTREE | | | +--------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+ 全列匹配 EXPLAIN SELECT * FROM employees.titles WHERE emp_no = '10009' AND title = 'Senior Engineer' AND from_date = '1995-02-18'; +----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+ | id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra | +----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+ | 1 | SIMPLE | titles | NULL | const | PRIMARY | PRIMARY | 159 | const,const,const | 1 | 100.00 | NULL | +----+-------------+--------+------------+-------+---------------+---------+---------+-------------------+------+----------+-------+ 当按照索引中所有列进行精确匹配（这里精确匹配指 = 或 IN 匹配）时，索引可以被用到。
...</p></div><footer class=entry-footer><span title='2019-05-25 11:05:46 +0000 UTC'>May 25, 2019</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1297 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1525081905268-fc0b46e9d786?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to 最左前缀原理与相关优化" href=https://zyf.im/2019/05/25/the-left-prefix-index-rule/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>归并排序</h2></header><div class=entry-content><p>归并排序（英语：Merge sort，或 mergesort），是创建在归并操作上的一种有效的排序算法，效率为 O(nlogn)。1945 年由约翰·冯·诺伊曼首次提出。该算法是采用分治法（Divide and Conquer）的一个非常典型的应用，且各层分治递归可以同时进行。
采用分治法：
分割：递归地把当前序列平均分割成两半。 集成：在保持元素顺序的同时将上一步得到的子序列集成到一起（归并）。 归并操作（merge），也叫归并算法，指的是将两个已经排序的序列合并成一个序列的操作。归并排序算法依赖归并操作。
&lt;?php function mergeSort($arr) { $len = count($arr); if ($len &lt;= 1) { return $arr; } // 递归结束条件, 到达这步的时候, 数组就只剩下一个元素了, 也就是分离了数组 $mid = $len / 2; $left = array_slice($arr, 0, $mid); // 拆分数组0-mid这部分给左边left $right = array_slice($arr, $mid); // 拆分数组mid-末尾这部分给右边right $left = mergeSort($left); // 左边拆分完后开始递归合并往上走 $right = mergeSort($right); // 右边拆分完毕开始递归往上走 $arr = merge($left, $right); // 合并两个数组,继续递归 return $arr; } // merge函数将指定的两个有序数组(arrA, arr)合并并且排序 function merge($arrA, $arrB) { $arrC = array(); while (count($arrA) && count($arrB)) { // 这里不断的判断哪个值小, 就将小的值给到arrC, 但是到最后肯定要剩下几个值, // 不是剩下arrA里面的就是剩下arrB里面的而且这几个有序的值, 肯定比arrC里面所有的值都大所以使用 $arrC[] = $arrA[0] &lt; $arrB[0] ? array_shift($arrA) : array_shift($arrB); } return array_merge($arrC, $arrA, $arrB); } $startTime = microtime(1); $arr = range(1, 1000); shuffle($arr); echo 'before sort: ', implode(', ', $arr), "\n"; $sortArr = mergeSort($arr); echo 'after sort: ', implode(', ', $sortArr), "\n"; echo 'use time: ', microtime(1) - $startTime, "s\n"; 假设被排序的数列中有 N 个数。遍历一趟的时间复杂度是 O(N)，需要遍历多少次呢？
...</p></div><footer class=entry-footer><span title='2019-05-23 14:44:40 +0000 UTC'>May 23, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;156 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1557043728-3edef94d093b?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to 归并排序" href=https://zyf.im/2019/05/23/merge-sort/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>My MacBook</h2></header><div class=entry-content><p>个人 MacBook 食用说明。推荐自动化环境配置脚本项目 imzyf/dotfiles。
软件下载 使用 brew cask 安装软件，非常方便。
安装 brew：
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" # 查找软件 brew desc iterm2 brew search iterm2 brew info iterm2 # 安装软件 brew install --cask iterm2 软件清单 brew cask arc Chromium based browser chromium - Free and open-source web browser 🌐 dbeaver-community - Universal database tool and SQL client 🌐 docker - App to build and share containerised applications and microservices 🌐 office network can’t access https://desktop.docker.com/, have to manual install. drawio - Online diagram software 🌐 figma - Collaborative team software 💅🏼 firefox fork GIT client github - Desktop client for GitHub repositories 🌐 google-chrome - Web browser 💻 iina - Free and open-source media player 💻 imageoptim - Tool to optimise images to a smaller size 💻 iterm2 - Terminal emulator as alternative to Apple’s Terminal app 💻 itsycal - Menu bar calendar 💻 licecap - Animated screen capture application 💻 logitech-g-hub - Support for Logitech G gear 💻 mysqlworkbench notion - App to write, plan, collaborate, and get organised 💻 openinterminal orbstack Replacement for Docker Desktop phpstorm postman - Collaboration platform for API development 💻 qlstephen - Quick Look plugin for plaintext files without an extension 💻 raycast Control your tools with a few keystrokes sequel-ace slack snipaste - Snip or pin screenshots 💻 sourcetree - Graphical client for Git version control 💻 the-unarchiver - Unpacks archive files visual-studio-code warp - Rust-based terminal 💻 wetype - Text input app from WeChat team for Chinese users 💻 youdaodict - Youdao Dictionary 💻 zoom-for-it-admins brew cask archive adrive - Intelligent cloud storage platform 💻 another-redis-desktop-manager - Redis desktop manager 🌐 baidunetdisk - Cloud storage service 💻 blender - 3D creation suite 💅🏼 lens - Kubernetes IDE 🌐 mongodb-compass - Interactive tool for analyzing MongoDB data 🌐 fliqlo - Flip clock screensaver - 可以配合 触发角 使用 paper - Pap.er, 4K 5K HD Wallpaper Application 💻 wireshark - Network analyzer and capture tool - without graphical user interface 🌐 path-finder - 💰 dash - API documentation browser and code snippet manager - 💰 Medis 2 - 💰 redisinsight GUI for streamlined Redis application development craft Native document editor input-source-pro Tool for multi-language users cleanshot Screen capturing tool cleanmymac-zh - Tool to remove unnecessary files and folders from disk - 💰 # brew list # brew list --cask # # ==> Casks # # arc # chromium # dbeaver-community # drawio # eudic # figma # firefox # fork # github # google-chrome # iina # imageoptim # iterm2 # itsycal # licecap # logitech-g-hub # mysqlworkbench # notion # openinterminal # orbstack # phpstorm # postman # qlstephen # raycast # sequel-ace # slack # snipaste # sourcetree # the-unarchiver # visual-studio-code # warp # wetype # youdaodict # zoom-for-it-admins # # 💻 brew install --cask adrive alfred google-chrome visual-studio-code brew install --cask visual-studio-code wetype youdaodict # 🌐 brew install --cask itsycal # 💅🏼 brew install --cask blender brew mas Mac App Store command-line interface nvm curl jmeter - Load testing and performance measurement application wget yarn protobuf - Protocol buffers (Google’s data interchange format) ripgrep recursively searches directories for a regex pattern while respecting your gitignore fish Manual charles - Web debugging Proxy application - 💰 Navicat Premium - 💰 oh-my-zsh ClashX Pro axure-rp - Planning and prototyping tool for developers - 💰 Badgeify Add Any App to Your Mac Menu Bar one-key-hidpi 3182x1332 App Store  Xnip - Handy Screenshot App for Mac iHosts - /etc/hosts 编辑器 Xiaomi Home # brew install mas # mas search Xnip # mas upgrade # Xnip mas install 1221250572 # iHosts mas install 408981434 # WeChat mas install 836500024 # QQ音乐 mas install 595615424 # Xcode mas install 497799835 # MoneyThings 记账 mas install 1549694221 # Xiaomi Home, needed manual install mas install 957323480 AI BoltAI TypingMind LobeChat Ollama 快捷键 Mac 键盘快捷键 Chrome 键盘快捷键 个性化设置 触发角：系统偏好设置 -> 桌面与屏幕保护程序 -> 屏幕保护程序 -> 触发角 – EOF –
...</p></div><footer class=entry-footer><span title='2019-05-20 17:14:59 +0000 UTC'>May 20, 2019</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;649 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1517336714731-489689fd1ca8?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to My MacBook" href=https://zyf.im/2019/05/20/my-macbook/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>Laravel 中 composer 加载流程</h2></header><div class=entry-content><p>启动 Laravel 5.8 文章以 Laravel 学习。入口文件 public/index.php：
// Register The Auto Loader require __DIR__.'/../vendor/autoload.php'; autoload.php 不负责具体功能逻辑，只做了两件事：初始化自动加载类、注册自动加载类。
autoload_real.php 中的类名为 ComposerAutoloaderInit... 这可能是为防止与用户自定义类名跟这个类重复冲突，加上了哈希值。
其实还有一个做法我们更加熟悉，是定义一个命名空间。这里为什么不定义一个命名空间呢？一种理解：命名空间一般都是为了复用，而这个类只需要运行一次即可，以后也不会用得到，用哈希值更加合适。
autoload_real.php autoload.php 主要调用了 getLoader()：
public static function getLoader() { // 单例模式，自动加载类只能有一个 1 if (null !== self::$loader) { return self::$loader; } // 获得自动加载核心类对象 2 spl_autoload_register(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'), true, true); self::$loader = $loader = new \Composer\Autoload\ClassLoader(); spl_autoload_unregister(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader')); // 初始化自动加载核心类对象 3 $useStaticLoader = PHP_VERSION_ID >= 50600 && !defined('HHVM_VERSION') && (!function_exists('zend_loader_file_encoded') || !zend_loader_file_encoded()); if ($useStaticLoader) { require_once __DIR__ . '/autoload_static.php'; call_user_func(\Composer\Autoload\ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::getInitializer($loader)); } else { $map = require __DIR__ . '/autoload_namespaces.php'; foreach ($map as $namespace => $path) { $loader->set($namespace, $path); } $map = require __DIR__ . '/autoload_psr4.php'; foreach ($map as $namespace => $path) { $loader->setPsr4($namespace, $path); } $classMap = require __DIR__ . '/autoload_classmap.php'; if ($classMap) { $loader->addClassMap($classMap); } } // 注册自动加载核心类对象 4 $loader->register(true); // 自动加载全局函数 5 if ($useStaticLoader) { $includeFiles = Composer\Autoload\ComposerStaticInit76e88f0b305cd64c7c84b90b278c31db::$files; } else { $includeFiles = require __DIR__ . '/autoload_files.php'; } foreach ($includeFiles as $fileIdentifier => $file) { composerRequire76e88f0b305cd64c7c84b90b278c31db($fileIdentifier, $file); } return $loader; } 单例模式 1 if (null !== self::$loader) { return self::$loader; } 构造 ClassLoader 核心类 2 spl_autoload_register(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader'), true, true); self::$loader = $loader = new \Composer\Autoload\ClassLoader(); spl_autoload_unregister(array('ComposerAutoloaderInit76e88f0b305cd64c7c84b90b278c31db', 'loadClassLoader')); public static function loadClassLoader($class) { if ('Composer\Autoload\ClassLoader' === $class) { require __DIR__ . '/ClassLoader.php'; } } composer 先向 PHP 自动加载机制注册了一个函数，这个函数 require 了 ClassLoader 文件。成功 new 出该文件中核心类 ClassLoader() 后，又销毁了该函数。
...</p></div><footer class=entry-footer><span title='2019-04-28 19:21:12 +0000 UTC'>April 28, 2019</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1435 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover></div><a class=entry-link aria-label="post link to Laravel 中 composer 加载流程" href=https://zyf.im/2019/04/28/composer-autoload-in-laravel/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>PHP 请小心判断 strpos</h2></header><div class=entry-content><p>又开始写世界上最后的语言 PHP 了（狗头保命）。一个很简单的字符串是否包含判断就掉坑了。
方法签名：
strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) : int $mystring = 'abc'; $findme = 'a'; if (strpos($mystring, $findme)) { dump('yes'); } 注意这时是不会输出 yes，因为 strpos($mystring, $findme) 返回的是 0。就想官方文档说的：
Warning 此函数可能返回布尔值 FALSE，但也可能返回等同于 FALSE 的非布尔值。应使用 === 运算符来测试此函数的返回值。
正解：
if (strpos($mystring, $findme) !== false) { dump('yes'); } 这次问题是网上一搜，找到 strpos 后看到 如果没找到 needle，将返回 FALSE 就没多想就用了。语言间的差异还有注意。
References php.net - strpos – EOF –</p></div><footer class=entry-footer><span title='2019-04-10 20:27:21 +0000 UTC'>April 10, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;68 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover><figure class=entry-cover><img loading=lazy src="https://images.unsplash.com/photo-1562387086-27c489c722b3?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80" alt></figure></div><a class=entry-link aria-label="post link to PHP 请小心判断 strpos" href=https://zyf.im/2019/04/10/php-strpos-warning/></a></article><article class=post-entry><div class=post-entry-content><header class=entry-header><h2 class=entry-hint-parent>ES6 中使用 jQuery $(this) 的问题</h2></header><div class=entry-content><p>在老项目中，我开始使用 laravel-mix 和 ES6 进行逐渐过渡。在这个过程中，发现了一个问题：当 jQuery 和 箭头函数 一起使用时，$(this) 的含义会发生变化。
问题解释 这个问题主要是因为没有理解 箭头函数 的特性。箭头函数不会创建自己的 this 上下文，而是继承父作用域的 this。
看下面的例子：
// 问题代码 $('.js-bottom-btn').click(() => { let flag = $(this).data('flag'); // ... }); 在箭头函数中，this 不是指向被点击的元素，而是指向父作用域的 this（可能是 window 或 undefined）。
解决方案 根据 jQuery click 文档，可以使用以下方法解决：
方法 1: 使用传统函数 $('.js-bottom-btn').click(function() { let flag = $(this).data('flag'); // ... }); 方法 2: 使用事件参数 $('.js-bottom-btn').click(event => { let flag = $(event.currentTarget).data('flag'); // ... }); 其他常见场景 jQuery 的 .each() 方法中也会遇到类似问题：
// 问题代码 $("jquery-selector").each(() => { $(this).click(); }); 需要修改为：
$("jquery-selector").each((index, element) => { $(element).click(); }); 箭头函数和 this 绑定 箭头函数的一个主要特点是词法绑定（lexical binding）。这意味着：
箭头函数不创建自己的 this 上下文 箭头函数继承定义它的外部作用域的 this 值 这种行为与传统函数不同，传统函数中的 this 是根据调用方式决定的 参考资料 Using jQuery $(this) with ES6 Arrow Functions (lexical this binding) – EOF –
...</p></div><footer class=entry-footer><span title='2019-04-10 17:09:23 +0000 UTC'>April 10, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;113 words&nbsp;·&nbsp;Me</footer></div><div class=post-entry-cover></div><a class=entry-link aria-label="post link to ES6 中使用 jQuery $(this) 的问题" href=https://zyf.im/2019/04/10/es6-jquery-this-arrow-function/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://zyf.im/page/6/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://zyf.im/page/8/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>