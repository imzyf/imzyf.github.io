<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MySQL 管理用户与访问授权 | ZYF.IM BLOG</title>
<meta name=keywords content="mysql"><meta name=description content="MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。
-- 创建用户 + 授权
GRANT ALL PRIVILEGES ON _._ TO 'tom'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION;
-- 查询权限
SHOW GRANTS FOR 'tom'@'%';
-- 授权
GRANT SELECT ON `my_db`.* TO 'tom'@'%';
-- 撤权
REVOKE ALL PRIVILEGES ON `my_db`.* FROM  'tom'@'%';
REVOKE GRANT OPTION ON `my_db`.* from 'tom'@'%';

-- not necessary
FLUSH PRIVILEGES;
管理用户
创建用户
CREATE USER 'username'@'host' IDENTIFIED BY 'password';

username：创建的用户名
host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 %
password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器

例子："><meta name=author content="Me"><link rel=canonical href=https://zyf.im/2017/04/11/mysql-manage-user-and-grant/><link crossorigin=anonymous href=/assets/css/stylesheet.eb010ba19da259e1633d31a246087e3b0656d556c30406763ea24160333d238f.css integrity="sha256-6wELoZ2iWeFjPTGiRgh+OwZW1VbDBAZ2PqJBYDM9I48=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zyf.im/2017/04/11/mysql-manage-user-and-grant/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/2017/04/11/mysql-manage-user-and-grant/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="MySQL 管理用户与访问授权"><meta property="og:description" content="MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。
-- 创建用户 + 授权 GRANT ALL PRIVILEGES ON _._ TO 'tom'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION; -- 查询权限 SHOW GRANTS FOR 'tom'@'%'; -- 授权 GRANT SELECT ON `my_db`.* TO 'tom'@'%'; -- 撤权 REVOKE ALL PRIVILEGES ON `my_db`.* FROM 'tom'@'%'; REVOKE GRANT OPTION ON `my_db`.* from 'tom'@'%'; -- not necessary FLUSH PRIVILEGES; 管理用户 创建用户 CREATE USER 'username'@'host' IDENTIFIED BY 'password'; username：创建的用户名 host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 % password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器 例子："><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-11T11:00:00+00:00"><meta property="article:modified_time" content="2017-04-11T11:00:00+00:00"><meta property="article:tag" content="Mysql"><meta property="og:image" content="https://images.unsplash.com/photo-1543039625-14cbd3802e7d?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1543039625-14cbd3802e7d?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=960&amp;q=80"><meta name=twitter:title content="MySQL 管理用户与访问授权"><meta name=twitter:description content="MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。
-- 创建用户 + 授权
GRANT ALL PRIVILEGES ON _._ TO 'tom'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION;
-- 查询权限
SHOW GRANTS FOR 'tom'@'%';
-- 授权
GRANT SELECT ON `my_db`.* TO 'tom'@'%';
-- 撤权
REVOKE ALL PRIVILEGES ON `my_db`.* FROM  'tom'@'%';
REVOKE GRANT OPTION ON `my_db`.* from 'tom'@'%';

-- not necessary
FLUSH PRIVILEGES;
管理用户
创建用户
CREATE USER 'username'@'host' IDENTIFIED BY 'password';

username：创建的用户名
host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 %
password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器

例子："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zyf.im/posts/"},{"@type":"ListItem","position":2,"name":"MySQL 管理用户与访问授权","item":"https://zyf.im/2017/04/11/mysql-manage-user-and-grant/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MySQL 管理用户与访问授权","name":"MySQL 管理用户与访问授权","description":"MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。\n-- 创建用户 + 授权 GRANT ALL PRIVILEGES ON _._ TO \u0026#39;tom\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED BY \u0026#39;pwd123\u0026#39; WITH GRANT OPTION; -- 查询权限 SHOW GRANTS FOR \u0026#39;tom\u0026#39;@\u0026#39;%\u0026#39;; -- 授权 GRANT SELECT ON `my_db`.* TO \u0026#39;tom\u0026#39;@\u0026#39;%\u0026#39;; -- 撤权 REVOKE ALL PRIVILEGES ON `my_db`.* FROM \u0026#39;tom\u0026#39;@\u0026#39;%\u0026#39;; REVOKE GRANT OPTION ON `my_db`.* from \u0026#39;tom\u0026#39;@\u0026#39;%\u0026#39;; -- not necessary FLUSH PRIVILEGES; 管理用户 创建用户 CREATE USER \u0026#39;username\u0026#39;@\u0026#39;host\u0026#39; IDENTIFIED BY \u0026#39;password\u0026#39;; username：创建的用户名 host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 % password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器 例子：\n","keywords":["mysql"],"articleBody":"MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。\n-- 创建用户 + 授权 GRANT ALL PRIVILEGES ON _._ TO 'tom'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION; -- 查询权限 SHOW GRANTS FOR 'tom'@'%'; -- 授权 GRANT SELECT ON `my_db`.* TO 'tom'@'%'; -- 撤权 REVOKE ALL PRIVILEGES ON `my_db`.* FROM 'tom'@'%'; REVOKE GRANT OPTION ON `my_db`.* from 'tom'@'%'; -- not necessary FLUSH PRIVILEGES; 管理用户 创建用户 CREATE USER 'username'@'host' IDENTIFIED BY 'password'; username：创建的用户名 host：该用户在哪个主机上可以登陆。如果是本地用户可用 localhost；如果想让该用户可以从任意远程主机登陆，可以使用通配符 % password：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器 例子：\nCREATE USER 'dog'@'localhost' IDENTIFIED BY '123456'; CREATE USER 'pig'@'192.168.1.%' IDENDIFIED BY '123456'; CREATE USER 'pig'@'%' IDENTIFIED BY '123456'; CREATE USER 'pig'@'%' IDENTIFIED BY ''; CREATE USER 'pig'@'%'; 修改用户密码 SET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword'); SET PASSWORD FOR 'pig'@'%' = PASSWORD(\"123456\"); 如果修改当前登陆用户密码：\nSET PASSWORD = PASSWORD(\"newpassword\"); 删除用户 DROP USER 'username'@'host'; 访问授权 查看用户权限 SHOW GRANTS FOR 'pig'@'%'; 授予用户权限 GRANT PRIVILEGES ON databasename.tablename TO 'username'@'host' GRANT SELECT, INSERT ON test.user TO 'pig'@'%'; GRANT ALL ON *.* TO 'pig'@'%'; privileges：用户的操作权限，如 SELECT INSERT UPDATE 等，如果要授予所的权限则使用 ALL databasename：数据库名 tablename：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用 * 表示 注意： 用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用 WITH GRANT OPTION 命令：\nGRANT PRIVILEGES ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION; 撤销用户权限 REVOKE PRIVILEGE ON databasename.tablename FROM 'username'@'host'; REVOKE SELECT ON *.* FROM 'pig'@'%'; 注意： 假如你在给用户’pig’@’%‘授权的时候是这样的（或类似的）：\nGRANT SELECT ON test.user TO 'pig'@'%'; 则在使用：\nREVOKE SELECT ON _._ FROM 'pig'@'%'; 命令并 不能 撤销该用户对 test 数据库中 user 表的 SELECT 操作。\n相反，如果授权使用的是：\nGRANT SELECT ON _._ TO 'pig'@'%'; 则：\nREVOKE SELECT ON test.user FROM 'pig'@'%'; 命令 也不能 撤销该用户对 test 数据库中 user 表的 SELECT 权限。\n具体信息可以用查看命令：\nSHOW GRANTS FOR 'pig'@'%'; 刷新权限 FLUSH PRIVILEGES; 开启远程访问 通过上面的配置，可以发现：开启 MySQL 远程访问，其实就是修改用户权限：\n-- 只允许 192.168.1.100 连接 GRANT ALL PRIVILEGES ON _._ TO 'root'@'192.168.1.100' IDENTIFIED BY 'pwd123' WITH GRANT OPTION; -- 允许所有 ip 访问 GRANT ALL PRIVILEGES ON _._ TO 'root'@'%' IDENTIFIED BY 'pwd123' WITH GRANT OPTION; 注意： Ubuntu 上还需要修改 MySQL 配置文件\nsudo vim /etc/mysql/mysql.conf.d/mysqld.cnf 将 bind-address = 127.0.0.1 这一行注释掉, 即:\n#bind-address = 127.0.0.1 重启 MySQL\n补充 查询当前用户：\nmysql\u003e SELECT CURRENT_USER(); HOST User 被条目匹配的连接 ’thomas.loc.gov’ ‘fred’ fred, 从 thomas.loc.gov 连接 ’thomas.loc.gov' '' 任何用户, 从 thomas.loc.gov 连接 ‘%’ ‘fred’ fred, 从任何主机连接 ‘%’ '' 任何用户, 从任何主机连接 ‘%.loc.gov’ ‘fred’ fred, 从在 loc.gov 域的任何主机连接 ‘x.y.%’ ‘fred’ fred, 从 x.y.net、x.y.com,x.y.edu 等联接（这或许无用） ‘144.155.166.177’ ‘fred’ fred, 从有 144.155.166.177 的主机连接 ‘144.155.166.%’ ‘fred’ fred, 从 144.155.166 C 类子网的任何主机连接 可以在 Host 字段使用 IP 通配符值（例如，'144.155.166.%' 匹配在一个子网上的每台主机），有可能某人可能企图探究这种能力，通过命名一台主机为 144.155.166.somewhere.com。为了阻止这样的企图，MySQL 不允许匹配以数字和一个点起始的主机名，这样，如果你用一个命名为类似 1.2.foo.com 的主机，它的名字决不会匹配授权表中的 Host 列。只有一个 IP 数字能匹配 IP 通配符值。\nReferences MySQL 创建用户与授权 - 简书 5.7.5. 访问控制, 阶段 1：连接核实 – EOF –\n","wordCount":"376","inLanguage":"en","image":"https://images.unsplash.com/photo-1543039625-14cbd3802e7d?ixlib=rb-4.0.3\u0026ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D\u0026auto=format\u0026fit=crop\u0026w=960\u0026q=80","datePublished":"2017-04-11T11:00:00Z","dateModified":"2017-04-11T11:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zyf.im/2017/04/11/mysql-manage-user-and-grant/"},"publisher":{"@type":"Organization","name":"ZYF.IM BLOG","logo":{"@type":"ImageObject","url":"https://zyf.im/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">MySQL 管理用户与访问授权</h1><div class=post-meta><span title='2017-04-11 11:00:00 +0000 UTC'>April 11, 2017</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;376 words&nbsp;·&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#管理用户>管理用户</a><ul><li><a href=#创建用户>创建用户</a></li><li><a href=#修改用户密码>修改用户密码</a></li><li><a href=#删除用户>删除用户</a></li></ul></li><li><a href=#访问授权>访问授权</a><ul><li><a href=#查看用户权限>查看用户权限</a></li><li><a href=#授予用户权限>授予用户权限</a></li><li><a href=#撤销用户权限>撤销用户权限</a></li><li><a href=#刷新权限>刷新权限</a></li><li><a href=#开启远程访问>开启远程访问</a></li></ul></li><li><a href=#补充>补充</a></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><p>MySQL 创建用户、修改密码、删除用户；查看、授予、撤销用户权限；对 MySQL 远程访问的新理解。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- 创建用户 + 授权
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GRANT</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>_</span><span class=p>.</span><span class=n>_</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;tom&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=w> </span><span class=n>IDENTIFIED</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=s1>&#39;pwd123&#39;</span><span class=w> </span><span class=k>WITH</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>OPTION</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 查询权限
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SHOW</span><span class=w> </span><span class=n>GRANTS</span><span class=w> </span><span class=k>FOR</span><span class=w> </span><span class=s1>&#39;tom&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 授权
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>GRANT</span><span class=w> </span><span class=k>SELECT</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>`</span><span class=n>my_db</span><span class=o>`</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=s1>&#39;tom&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- 撤权
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>REVOKE</span><span class=w> </span><span class=k>ALL</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>`</span><span class=n>my_db</span><span class=o>`</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w>  </span><span class=s1>&#39;tom&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>REVOKE</span><span class=w> </span><span class=k>GRANT</span><span class=w> </span><span class=k>OPTION</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=o>`</span><span class=n>my_db</span><span class=o>`</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=s1>&#39;tom&#39;</span><span class=o>@</span><span class=s1>&#39;%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- not necessary
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>FLUSH</span><span class=w> </span><span class=k>PRIVILEGES</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h2 id=管理用户>管理用户<a hidden class=anchor aria-hidden=true href=#管理用户>#</a></h2><h3 id=创建用户>创建用户<a hidden class=anchor aria-hidden=true href=#创建用户>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CREATE USER <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span> IDENTIFIED BY <span class=s1>&#39;password&#39;</span><span class=p>;</span>
</span></span></code></pre></div><ul><li><code>username</code>：创建的用户名</li><li><code>host</code>：该用户在哪个主机上可以登陆。如果是本地用户可用 <code>localhost</code>；如果想让该用户可以从任意远程主机登陆，可以使用通配符 <code>%</code></li><li><code>password</code>：该用户的登陆密码。密码可以为空，如果为空则该用户可以不需要密码登陆服务器</li></ul><p>例子：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CREATE USER <span class=s1>&#39;dog&#39;</span>@<span class=s1>&#39;localhost&#39;</span> IDENTIFIED BY <span class=s1>&#39;123456&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE USER <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;192.168.1.%&#39;</span> IDENDIFIED BY <span class=s1>&#39;123456&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE USER <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span> IDENTIFIED BY <span class=s1>&#39;123456&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE USER <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span> IDENTIFIED BY <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>CREATE USER <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=修改用户密码>修改用户密码<a hidden class=anchor aria-hidden=true href=#修改用户密码>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SET PASSWORD FOR <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span> <span class=o>=</span> PASSWORD<span class=o>(</span><span class=s1>&#39;newpassword&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SET PASSWORD FOR <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span> <span class=o>=</span> PASSWORD<span class=o>(</span><span class=s2>&#34;123456&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><p>如果修改当前登陆用户密码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SET <span class=nv>PASSWORD</span> <span class=o>=</span> PASSWORD<span class=o>(</span><span class=s2>&#34;newpassword&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=删除用户>删除用户<a hidden class=anchor aria-hidden=true href=#删除用户>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>DROP USER <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span><span class=p>;</span>
</span></span></code></pre></div><h2 id=访问授权>访问授权<a hidden class=anchor aria-hidden=true href=#访问授权>#</a></h2><h3 id=查看用户权限>查看用户权限<a hidden class=anchor aria-hidden=true href=#查看用户权限>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SHOW GRANTS FOR <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=授予用户权限>授予用户权限<a hidden class=anchor aria-hidden=true href=#授予用户权限>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GRANT PRIVILEGES ON databasename.tablename TO <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>GRANT SELECT, INSERT ON test.user TO <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>GRANT ALL ON *.* TO <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><ul><li><code>privileges</code>：用户的操作权限，如 <code>SELECT</code> <code>INSERT</code> <code>UPDATE</code> 等，如果要授予所的权限则使用 <code>ALL</code></li><li><code>databasename</code>：数据库名</li><li><code>tablename</code>：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用 <code>*</code> 表示</li></ul><p><strong>注意：</strong> 用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用 <code>WITH GRANT OPTION</code> 命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GRANT PRIVILEGES ON databasename.tablename TO <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span> WITH GRANT OPTION<span class=p>;</span>
</span></span></code></pre></div><h3 id=撤销用户权限>撤销用户权限<a hidden class=anchor aria-hidden=true href=#撤销用户权限>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>REVOKE PRIVILEGE ON databasename.tablename FROM <span class=s1>&#39;username&#39;</span>@<span class=s1>&#39;host&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>REVOKE SELECT ON *.* FROM <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p><strong>注意：</strong> 假如你在给用户&rsquo;pig&rsquo;@&rsquo;%&lsquo;授权的时候是这样的（或类似的）：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GRANT SELECT ON test.user TO <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>则在使用：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>REVOKE SELECT ON _._ FROM <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>命令并 <strong>不能</strong> 撤销该用户对 test 数据库中 user 表的 SELECT 操作。</p><p>相反，如果授权使用的是：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>GRANT SELECT ON _._ TO <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>则：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>REVOKE SELECT ON test.user FROM <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><p>命令 <strong>也不能</strong> 撤销该用户对 test 数据库中 user 表的 SELECT 权限。</p><p>具体信息可以用查看命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SHOW GRANTS FOR <span class=s1>&#39;pig&#39;</span>@<span class=s1>&#39;%&#39;</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=刷新权限>刷新权限<a hidden class=anchor aria-hidden=true href=#刷新权限>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>FLUSH PRIVILEGES<span class=p>;</span>
</span></span></code></pre></div><h3 id=开启远程访问>开启远程访问<a hidden class=anchor aria-hidden=true href=#开启远程访问>#</a></h3><p>通过上面的配置，可以发现：开启 MySQL 远程访问，其实就是修改用户权限：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>-- 只允许 192.168.1.100 连接
</span></span><span class=line><span class=cl>GRANT ALL PRIVILEGES ON _._ TO <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;192.168.1.100&#39;</span> IDENTIFIED BY <span class=s1>&#39;pwd123&#39;</span> WITH GRANT OPTION<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-- 允许所有 ip 访问
</span></span><span class=line><span class=cl>GRANT ALL PRIVILEGES ON _._ TO <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;%&#39;</span> IDENTIFIED BY <span class=s1>&#39;pwd123&#39;</span> WITH GRANT OPTION<span class=p>;</span>
</span></span></code></pre></div><p><strong>注意：</strong> Ubuntu 上还需要修改 MySQL 配置文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf
</span></span></code></pre></div><p>将 <code>bind-address = 127.0.0.1</code> 这一行注释掉, 即:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#bind-address = 127.0.0.1</span>
</span></span></code></pre></div><p>重启 MySQL</p><h2 id=补充>补充<a hidden class=anchor aria-hidden=true href=#补充>#</a></h2><p>查询当前用户：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mysql&gt; SELECT CURRENT_USER<span class=o>()</span><span class=p>;</span>
</span></span></code></pre></div><table><thead><tr><th>HOST</th><th>User</th><th>被条目匹配的连接</th></tr></thead><tbody><tr><td>&rsquo;thomas.loc.gov&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从 thomas.loc.gov 连接</td></tr><tr><td>&rsquo;thomas.loc.gov'</td><td>''</td><td>任何用户, 从 thomas.loc.gov 连接</td></tr><tr><td>&lsquo;%&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从任何主机连接</td></tr><tr><td>&lsquo;%&rsquo;</td><td>''</td><td>任何用户, 从任何主机连接</td></tr><tr><td>&lsquo;%.loc.gov&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从在 loc.gov 域的任何主机连接</td></tr><tr><td>&lsquo;x.y.%&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从 x.y.net、x.y.com,x.y.edu 等联接（这或许无用）</td></tr><tr><td>&lsquo;144.155.166.177&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从有 144.155.166.177 的主机连接</td></tr><tr><td>&lsquo;144.155.166.%&rsquo;</td><td>&lsquo;fred&rsquo;</td><td>fred, 从 144.155.166 C 类子网的任何主机连接</td></tr></tbody></table><p>可以在 Host 字段使用 IP 通配符值（例如，<code>'144.155.166.%'</code> 匹配在一个子网上的每台主机），有可能某人可能企图探究这种能力，通过命名一台主机为 144.155.166.somewhere.com。为了阻止这样的企图，MySQL 不允许匹配以数字和一个点起始的主机名，这样，如果你用一个命名为类似 1.2.foo.com 的主机，它的名字决不会匹配授权表中的 Host 列。只有一个 IP 数字能匹配 IP 通配符值。</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=http://www.jianshu.com/p/d7b9c468f20d>MySQL 创建用户与授权 - 简书</a></li><li><a href=http://www.iteedu.com/database/mysql/mysqlmanualcn/database-administration/connection-access.php>5.7.5. 访问控制, 阶段 1：连接核实</a></li></ul><p>&ndash; EOF &ndash;</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zyf.im/tags/mysql/>Mysql</a></li></ul><nav class=paginav><a class=prev href=https://zyf.im/2017/04/20/mysql-group-by-and-order-by-difference-between-56-57/><span class=title>« Prev</span><br><span>MySQL 5.6 5.7 组内排序的区别</span>
</a><a class=next href=https://zyf.im/2017/04/10/execute-sudo-without-password-in-ubuntu-terminal/><span class=title>Next »</span><br><span>Ubuntu 命令行下免密码执行 sudo 命令</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>