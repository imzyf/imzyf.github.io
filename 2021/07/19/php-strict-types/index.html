<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PHP strict_types 严格模式 | ZYF.IM BLOG</title>
<meta name=keywords content="php"><meta name=description content="
严格模式的声明 必须 放在文件的顶部。
严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。

声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。
使用提示类型没有 strict_types 可能导致微妙的错误。
严格类型之前，int $x 意味着 $x must have a value coercible to an int。

a float (example: 13.1459 -> 13)
a bool (example: true -> 1)
a null (example: null -> 0)
a string with leading digits (example: “15 Trees” -> 15)

设置严格模式后，you tell the engine that int $x means $x must only be an int proper, no type coercion allowed。
谁给更关心 strict_type 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:"><meta name=author content="Me"><link rel=canonical href=https://zyf.im/2021/07/19/php-strict-types/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zyf.im/2021/07/19/php-strict-types/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://zyf.im/2021/07/19/php-strict-types/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="PHP strict_types 严格模式"><meta property="og:description" content=" 严格模式的声明 必须 放在文件的顶部。 严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。 声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。
使用提示类型没有 strict_types 可能导致微妙的错误。
严格类型之前，int $x 意味着 $x must have a value coercible to an int。
a float (example: 13.1459 -> 13) a bool (example: true -> 1) a null (example: null -> 0) a string with leading digits (example: “15 Trees” -> 15) 设置严格模式后，you tell the engine that int $x means $x must only be an int proper, no type coercion allowed。
谁给更关心 strict_type 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-19T19:58:26+00:00"><meta property="article:modified_time" content="2021-07-19T19:58:26+00:00"><meta property="article:tag" content="Php"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP strict_types 严格模式"><meta name=twitter:description content="
严格模式的声明 必须 放在文件的顶部。
严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。

声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。
使用提示类型没有 strict_types 可能导致微妙的错误。
严格类型之前，int $x 意味着 $x must have a value coercible to an int。

a float (example: 13.1459 -> 13)
a bool (example: true -> 1)
a null (example: null -> 0)
a string with leading digits (example: “15 Trees” -> 15)

设置严格模式后，you tell the engine that int $x means $x must only be an int proper, no type coercion allowed。
谁给更关心 strict_type 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zyf.im/posts/"},{"@type":"ListItem","position":2,"name":"PHP strict_types 严格模式","item":"https://zyf.im/2021/07/19/php-strict-types/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PHP strict_types 严格模式","name":"PHP strict_types 严格模式","description":" 严格模式的声明 必须 放在文件的顶部。 严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。 声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。\n使用提示类型没有 strict_types 可能导致微妙的错误。\n严格类型之前，int $x 意味着 $x must have a value coercible to an int。\na float (example: 13.1459 -\u0026gt; 13) a bool (example: true -\u0026gt; 1) a null (example: null -\u0026gt; 0) a string with leading digits (example: “15 Trees” -\u0026gt; 15) 设置严格模式后，you tell the engine that int $x means $x must only be an int proper, no type coercion allowed。\n谁给更关心 strict_type 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:\n","keywords":["php"],"articleBody":" 严格模式的声明 必须 放在文件的顶部。 严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。 声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。\n使用提示类型没有 strict_types 可能导致微妙的错误。\n严格类型之前，int $x 意味着 $x must have a value coercible to an int。\na float (example: 13.1459 -\u003e 13) a bool (example: true -\u003e 1) a null (example: null -\u003e 0) a string with leading digits (example: “15 Trees” -\u003e 15) 设置严格模式后，you tell the engine that int $x means $x must only be an int proper, no type coercion allowed。\n谁给更关心 strict_type 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:\nThe types in this current scope are treated strictly.\n对比 \u003c?php function add(int $a, int $b): int { return $a + $b; } var_dump(add(1.0, 2.0)); 运行输出 int(3)。\n\u003c?php declare(strict_types=1); function add(int $a, int $b): int { return $a + $b; } var_dump(add(1.0, 2.0)); 运行输出：\nPHP Fatal error: Uncaught TypeError: Argument 1 passed to add() must be of the type int, float given, ... 声明位置 必须在脚本最前。不能写在脚本的中间，如下写法是错误的：\n\u003c?php function add(int $a, int $b): int { return $a + $b; } declare(strict_types=1); var_dump(add(1.0, 2.0)); 运行后报错：\nPHP Fatal error: strict_types declaration must be the very first statement in the script in ... 不得使用 block mode 进行声明：\n\u003c?php declare(strict_types=1) { var_dump(1); } 运行后报错：\nPHP Fatal error: strict_types declaration must not use block mode in ... 多文件场景 例子 1 A.php\n\u003c?php // 严格模式 declare(strict_types=1); function add(int $a, int $b): int { return $a + $b; } B.php\n\u003c?php // 非严格模式 require 'A.php'; // 违反了 A 的定义 var_dump(add(1.0, 2.0)); 运行\nphp B.php int(3) 例子 2 A.php\n\u003c?php // 非严格模式 function add(int $a, int $b): int { return $a + $b; } B.php\n\u003c?php // 严格模式 declare(strict_types=1); require 'A.php'; // 违反了 A 的定义 var_dump(add(1.0, 2.0)); 运行\nphp B.php PHP Fatal error: Uncaught TypeError: Argument 1 passed to add() must be of the type int, float given, called in ... 小结 函数定义时的严格模式，行为并不会出现什么不同。 函数执行时的，严格模式会出现差异。 declare(strict_types=1); 的声明本身在 A.php 文件中完成。被 B.php 文件 require，而 B.php 并没有定义严格模式，那么执行 require 的 B.php 文件不会变成严格模式。 总结 只有在写 declare 的文件的执行部分才会执行严格模式，该文件中调用的其它函数（其它文件中的函数）也会被影响。\n若果想完全使用严格模式，比较简单的方法是在所有 php 文件都写上 declare(strict_types=1);。\n工具 推荐自动格式化工具：symplify/easy-coding-standard。\nReferences 关于 declare(strict_types=1) 的有效范围 | segmentfault Strict Types in PHP | medium Scalar type declarations | php Strict typing | php – EOF –\n","wordCount":"349","inLanguage":"en","datePublished":"2021-07-19T19:58:26Z","dateModified":"2021-07-19T19:58:26Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zyf.im/2021/07/19/php-strict-types/"},"publisher":{"@type":"Organization","name":"ZYF.IM BLOG","logo":{"@type":"ImageObject","url":"https://zyf.im/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">PHP strict_types 严格模式</h1><div class=post-meta><span title='2021-07-19 19:58:26 +0000 UTC'>July 19, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;349 words&nbsp;·&nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#对比>对比</a></li><li><a href=#声明位置>声明位置</a></li><li><a href=#多文件场景>多文件场景</a><ul><li><a href=#例子-1>例子 1</a></li><li><a href=#例子-2>例子 2</a></li><li><a href=#小结>小结</a></li></ul></li><li><a href=#总结>总结</a></li><li><a href=#工具>工具</a></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><ul><li>严格模式的声明 <em>必须</em> 放在文件的顶部。</li><li>严格模式不仅作用于函数参数的类型声明，也作用于函数的返回值类型。</li></ul><p>声明 PHP 文件作为严格模式的一个好事是，实际上只适用于当前文件。这确保了这个文件是严格类型，但是他没有影响到整个项目中的其他文件。这允许你一步一步的迁移非严格模式的代码。</p><p>使用提示类型没有 strict_types 可能导致微妙的错误。</p><p>严格类型之前，<code>int $x</code> 意味着 <code>$x must have a value coercible to an int</code>。</p><ul><li>a float (example: 13.1459 -> 13)</li><li>a bool (example: true -> 1)</li><li>a null (example: null -> 0)</li><li>a string with leading digits (example: “15 Trees” -> 15)</li></ul><p>设置严格模式后，you tell the engine that <code>int $x</code> means <code>$x must only be an int proper, no type coercion allowed</code>。</p><p>谁给更关心 <code>strict_type</code> 这行？is more for the reader than for the writer. Why? Bacause it will explicitly tell the reader:</p><p>The types in this current scope are treated strictly.</p><h2 id=对比>对比<a hidden class=anchor aria-hidden=true href=#对比>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>var_dump</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>));</span>
</span></span></code></pre></div><p>运行输出 <code>int(3)</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>var_dump</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>));</span>
</span></span></code></pre></div><p>运行输出：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>PHP Fatal error:  Uncaught TypeError: Argument <span class=m>1</span> passed to add<span class=o>()</span> must be of the <span class=nb>type</span> int, float given, ...
</span></span></code></pre></div><h2 id=声明位置>声明位置<a hidden class=anchor aria-hidden=true href=#声明位置>#</a></h2><p>必须在脚本最前。不能写在脚本的中间，如下写法是错误的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>var_dump</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>));</span>
</span></span></code></pre></div><p>运行后报错：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>PHP Fatal error:  strict_types declaration must be the very first statement in the script in ...
</span></span></code></pre></div><p>不得使用 block mode 进行声明：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>var_dump</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>运行后报错：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>PHP Fatal error:  strict_types declaration must not use block mode in ...
</span></span></code></pre></div><h2 id=多文件场景>多文件场景<a hidden class=anchor aria-hidden=true href=#多文件场景>#</a></h2><h3 id=例子-1>例子 1<a hidden class=anchor aria-hidden=true href=#例子-1>#</a></h3><p><code>A.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=c1>// 严格模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>B.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=c1>// 非严格模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>require</span> <span class=s1>&#39;A.php&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 违反了 A 的定义
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>var_dump</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>));</span>
</span></span></code></pre></div><p>运行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php B.php
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>int<span class=o>(</span>3<span class=o>)</span>
</span></span></code></pre></div><h3 id=例子-2>例子 2<a hidden class=anchor aria-hidden=true href=#例子-2>#</a></h3><p><code>A.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=c1>// 非严格模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>B.php</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=c1>// 严格模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>declare</span><span class=p>(</span><span class=nx>strict_types</span><span class=o>=</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>require</span> <span class=s1>&#39;A.php&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 违反了 A 的定义
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>var_dump</span><span class=p>(</span><span class=nx>add</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>));</span>
</span></span></code></pre></div><p>运行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php B.php
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>PHP Fatal error:  Uncaught TypeError: Argument <span class=m>1</span> passed to add<span class=o>()</span> must be of the <span class=nb>type</span> int, float given, called in ...
</span></span></code></pre></div><h3 id=小结>小结<a hidden class=anchor aria-hidden=true href=#小结>#</a></h3><ul><li>函数定义时的严格模式，行为并不会出现什么不同。</li><li>函数执行时的，严格模式会出现差异。</li><li><code>declare(strict_types=1);</code> 的声明本身在 A.php 文件中完成。被 B.php 文件 require，而 B.php 并没有定义严格模式，那么执行 require 的 B.php 文件不会变成严格模式。</li></ul><h2 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h2><p>只有在写 declare 的文件的执行部分才会执行严格模式，该文件中调用的其它函数（其它文件中的函数）也会被影响。</p><p>若果想完全使用严格模式，比较简单的方法是在所有 php 文件都写上 <code>declare(strict_types=1);</code>。</p><h2 id=工具>工具<a hidden class=anchor aria-hidden=true href=#工具>#</a></h2><p>推荐自动格式化工具：<a href=https://github.com/symplify/easy-coding-standard>symplify/easy-coding-standard</a>。</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://segmentfault.com/a/1190000018389227>关于 declare(strict_types=1) 的有效范围 | segmentfault</a></li><li><a href=https://chemaclass.medium.com/strict-types-in-php-d4166bd25394>Strict Types in PHP | medium</a></li><li><a href=https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.scalar-type-declarations>Scalar type declarations | php</a></li><li><a href=https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.strict>Strict typing | php</a></li></ul><p>&ndash; EOF &ndash;</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zyf.im/tags/php/>Php</a></li></ul><nav class=paginav><a class=prev href=https://zyf.im/2021/07/20/php-invoke-is-anybody-using-it/><span class=title>« Prev</span><br><span>PHP __invoke 使用</span>
</a><a class=next href=https://zyf.im/2021/07/12/git-and-github-secrets/><span class=title>Next »</span><br><span>Git and GitHub Secrets</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>