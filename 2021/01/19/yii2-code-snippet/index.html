<!doctype html><html lang=en dir=auto data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Yii2 Code Snippet | ZYF.IM BLOG</title><meta name=keywords content><meta name=description content="2025-02-15：已告别 Yii2，文章内容不再维护。

gii CLI
php yii help gii/mode

php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns='app\models\gii' --tableName=&#34;*&#34;

# 多数据库
php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=&#34;hub_db&#34; --ns='app\models\hub\gii' --tableName=&#34;*&#34;
连接数据库时设置时区
  'class' => 'yii\db\Connection',
  'dsn' => 'mysql:host=mysql;port=3306;dbname=hub',
  'username' => 'root',
  'password' => 'root',
  'charset' => 'utf8',

  // 关闭日志记录，防止被 logs 平台拿走
  'enableLogging' => YII_DEBUG ? true : false,
  'enableProfiling' => YII_DEBUG ? true : false,

  // 设置时区
  'on afterOpen' => static function ($event) {
    // set 'Asia/Bangkok' timezone
    $event->sender->createCommand(&#34;SET time_zone='+08:00';&#34;)->execute();
  },
ActiveRecord one

yii\db\ActiveRecord::findOne() 和 yii\db\ActiveQuery::one() 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 limit(1) 来提高性能，比如 Customer::find()->limit(1)->one()。

DB where

查询构建器 | yiiframework
YII where 条件 | csdn"><meta name=author content="Me"><link rel=canonical href=https://zyf.im/2021/01/19/yii2-code-snippet/><link crossorigin=anonymous href=/assets/css/stylesheet.88888b1f97bcb20b824590bc7c6603a852913a2540638b3b3e2663e642691da3.css integrity="sha256-iIiLH5e8sguCRZC8fGYDqFKROiVAY4s7PiZj5kJpHaM=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zyf.im/2021/01/19/yii2-code-snippet/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/2021/01/19/yii2-code-snippet/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="Yii2 Code Snippet"><meta property="og:description" content="2025-02-15：已告别 Yii2，文章内容不再维护。
gii CLI php yii help gii/mode php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns='app\models\gii' --tableName=&#34;*&#34; # 多数据库 php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=&#34;hub_db&#34; --ns='app\models\hub\gii' --tableName=&#34;*&#34; 连接数据库时设置时区 'class' => 'yii\db\Connection', 'dsn' => 'mysql:host=mysql;port=3306;dbname=hub', 'username' => 'root', 'password' => 'root', 'charset' => 'utf8', // 关闭日志记录，防止被 logs 平台拿走 'enableLogging' => YII_DEBUG ? true : false, 'enableProfiling' => YII_DEBUG ? true : false, // 设置时区 'on afterOpen' => static function ($event) { // set 'Asia/Bangkok' timezone $event->sender->createCommand(&#34;SET time_zone='+08:00';&#34;)->execute(); }, ActiveRecord one yii\db\ActiveRecord::findOne() 和 yii\db\ActiveQuery::one() 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 limit(1) 来提高性能，比如 Customer::find()->limit(1)->one()。
DB where 查询构建器 | yiiframework YII where 条件 | csdn"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-19T12:08:13+08:00"><meta property="article:modified_time" content="2021-01-19T12:08:13+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Yii2 Code Snippet"><meta name=twitter:description content="2025-02-15：已告别 Yii2，文章内容不再维护。

gii CLI
php yii help gii/mode

php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns='app\models\gii' --tableName=&#34;*&#34;

# 多数据库
php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=&#34;hub_db&#34; --ns='app\models\hub\gii' --tableName=&#34;*&#34;
连接数据库时设置时区
  'class' => 'yii\db\Connection',
  'dsn' => 'mysql:host=mysql;port=3306;dbname=hub',
  'username' => 'root',
  'password' => 'root',
  'charset' => 'utf8',

  // 关闭日志记录，防止被 logs 平台拿走
  'enableLogging' => YII_DEBUG ? true : false,
  'enableProfiling' => YII_DEBUG ? true : false,

  // 设置时区
  'on afterOpen' => static function ($event) {
    // set 'Asia/Bangkok' timezone
    $event->sender->createCommand(&#34;SET time_zone='+08:00';&#34;)->execute();
  },
ActiveRecord one

yii\db\ActiveRecord::findOne() 和 yii\db\ActiveQuery::one() 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 limit(1) 来提高性能，比如 Customer::find()->limit(1)->one()。

DB where

查询构建器 | yiiframework
YII where 条件 | csdn"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zyf.im/posts/"},{"@type":"ListItem","position":2,"name":"Yii2 Code Snippet","item":"https://zyf.im/2021/01/19/yii2-code-snippet/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Yii2 Code Snippet","name":"Yii2 Code Snippet","description":"2025-02-15：已告别 Yii2，文章内容不再维护。\ngii CLI php yii help gii/mode php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns=\u0026#39;app\\models\\gii\u0026#39; --tableName=\u0026#34;*\u0026#34; # 多数据库 php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=\u0026#34;hub_db\u0026#34; --ns=\u0026#39;app\\models\\hub\\gii\u0026#39; --tableName=\u0026#34;*\u0026#34; 连接数据库时设置时区 \u0026#39;class\u0026#39; =\u0026gt; \u0026#39;yii\\db\\Connection\u0026#39;, \u0026#39;dsn\u0026#39; =\u0026gt; \u0026#39;mysql:host=mysql;port=3306;dbname=hub\u0026#39;, \u0026#39;username\u0026#39; =\u0026gt; \u0026#39;root\u0026#39;, \u0026#39;password\u0026#39; =\u0026gt; \u0026#39;root\u0026#39;, \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8\u0026#39;, // 关闭日志记录，防止被 logs 平台拿走 \u0026#39;enableLogging\u0026#39; =\u0026gt; YII_DEBUG ? true : false, \u0026#39;enableProfiling\u0026#39; =\u0026gt; YII_DEBUG ? true : false, // 设置时区 \u0026#39;on afterOpen\u0026#39; =\u0026gt; static function ($event) { // set \u0026#39;Asia/Bangkok\u0026#39; timezone $event-\u0026gt;sender-\u0026gt;createCommand(\u0026#34;SET time_zone=\u0026#39;+08:00\u0026#39;;\u0026#34;)-\u0026gt;execute(); }, ActiveRecord one yii\\db\\ActiveRecord::findOne() 和 yii\\db\\ActiveQuery::one() 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 limit(1) 来提高性能，比如 Customer::find()-\u0026gt;limit(1)-\u0026gt;one()。\nDB where 查询构建器 | yiiframework YII where 条件 | csdn\n","keywords":[],"articleBody":"2025-02-15：已告别 Yii2，文章内容不再维护。\ngii CLI php yii help gii/mode php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --ns='app\\models\\gii' --tableName=\"*\" # 多数据库 php yii gii/model --generateLabelsFromComments=1 --overwrite=1 --standardizeCapitals=1 --db=\"hub_db\" --ns='app\\models\\hub\\gii' --tableName=\"*\" 连接数据库时设置时区 'class' =\u003e 'yii\\db\\Connection', 'dsn' =\u003e 'mysql:host=mysql;port=3306;dbname=hub', 'username' =\u003e 'root', 'password' =\u003e 'root', 'charset' =\u003e 'utf8', // 关闭日志记录，防止被 logs 平台拿走 'enableLogging' =\u003e YII_DEBUG ? true : false, 'enableProfiling' =\u003e YII_DEBUG ? true : false, // 设置时区 'on afterOpen' =\u003e static function ($event) { // set 'Asia/Bangkok' timezone $event-\u003esender-\u003ecreateCommand(\"SET time_zone='+08:00';\")-\u003eexecute(); }, ActiveRecord one yii\\db\\ActiveRecord::findOne() 和 yii\\db\\ActiveQuery::one() 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 limit(1) 来提高性能，比如 Customer::find()-\u003elimit(1)-\u003eone()。\nDB where 查询构建器 | yiiframework YII where 条件 | csdn\n字符串格式，例如：'status=1' 哈希格式，例如： ['status' =\u003e 1, 'type' =\u003e 2] 操作符格式，例如：['like', 'name', 'test'] 对象格式，例如：new LikeCondition('name', 'LIKE', 'test') 简单条件 // SQL: (type = 1) AND (status = 2). $cond = ['type' =\u003e 1, 'status' =\u003e 2] // SQL: (id IN (1, 2, 3)) AND (status = 2) $cond = ['id' =\u003e [1, 2, 3], 'status' =\u003e 2] // SQL: status IS NULL $cond = ['status' =\u003e null] AND OR // SQL: `id=1 AND id=2` $cond = ['and', 'id=1', 'id=2'] // SQL: `type=1 AND (id=1 OR id=2)` $cond = ['and', 'type=1', ['or', 'id=1', 'id=2']] // SQL: `type=1 AND (id=1 OR id=2)` // 此写法 '=' 可以换成其他操作符，例：in like != \u003e= 等 $cond = [ 'and', ['=', 'type', 1], [ 'or', ['=', 'id', '1'], ['=', 'id', '2'], ] ] NOT // SQL: `NOT (attribute IS NULL)` $cond = ['not', ['attribute' =\u003e null]] BETWEEN // not between 用法相同 // SQL: `id BETWEEN 1 AND 10` $cond = ['between', 'id', 1, 10] IN // not in 用法相同 // SQL: `id IN (1, 2, 3)` $cond = ['between', 'id', 1, 10] $cond = ['id' =\u003e [1, 2, 3]] // IN 条件也适用于多字段 // SQL: (`id`, `name`) IN ((1, 'foo'), (2, 'bar')) $cond = ['in', ['id', 'name'], [['id' =\u003e 1, 'name' =\u003e 'foo'], ['id' =\u003e 2, 'name' =\u003e 'bar']]] // 也适用于内嵌 SQL 语句 $cond = ['in', 'user_id', (new Query())-\u003eselect('id')-\u003efrom('users')-\u003ewhere(['active' =\u003e 1])] LIKE // SQL: `name LIKE '%tester%'` $cond = ['like', 'name', 'tester'] // SQL: `name LIKE '%test%' AND name LIKE '%sample%'` $cond = ['like', 'name', ['test', 'sample']] // SQL: `name LIKE '%tester'` $cond = ['like', 'name', '%tester', false] EXIST // not exists用法类似 // SQL: EXISTS (SELECT \"id\" FROM \"users\" WHERE \"active\"=1) $cond = ['exists', (new Query())-\u003eselect('id')-\u003efrom('users')-\u003ewhere(['active' =\u003e 1])] Yii2 Vue 跨域问题 解决 Yii2 + Vue 前后台分离时跨域的问题 | shiqidu 跨源资源共享（CORS） | mozilla\n旧的解决办法 在控制器的 behaviors 方法中增加下面的代码：\npublic function behaviors() { $behaviors = parent::behaviors(); if (YII_ENV_DEV) { // add CORS filter $behaviors['corsFilter'] = [ 'class' =\u003e Cors::class, 'cors' =\u003e [ 'Origin' =\u003e ['http://localhost:8080'], 'Access-Control-Request-Method' =\u003e ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'], 'Access-Control-Request-Headers' =\u003e ['*'], 'Access-Control-Allow-Credentials' =\u003e true, 'Access-Control-Max-Age' =\u003e 86400, 'Access-Control-Expose-Headers' =\u003e [], ], ]; } return $behaviors; } 上边配置的解释：\nOrigin 即 Access-Control-Allow-Origin 表示：响应头指定了该响应的资源是否被允许与给定的 origin 共享。 Access-Control-Request-Method 用于通知服务器在真正的请求中会采用哪种 HTTP 方法。因为预检请求所使用的方法总是 OPTIONS ，与实际请求所使用的方法不一样，所以这个请求头是必要的。 Access-Control-Request-Headers 用于通知服务器在真正的请求中会采用哪些请求头。 Access-Control-Allow-Credentials 表示是否可以将对请求的响应暴露给页面。返回 true 则可以，其他值均不可以。 Access-Control-Max-Age 表示返回结果（即 Access-Control-Allow-Methods 和 Access-Control-Allow-Headers 提供的信息） 可以被缓存多久。 Access-Control-Expose-Headers 列出了哪些首部可以作为响应的一部分暴露给外部。 注意：\n如果设置 Origin 为 ['*']，即所有的前端跨域请求可以接受，同时把 Access-Control-Allow-Credentials 设置为 true，Yii 会直接报错：Allowing credentials for wildcard origins is insecure. Please specify more restrictive origins or set ‘credentials’ to false in your CORS configuration.。\n告诉你使用通配符的凭证是不安全的，让你设置更严格的 Origin 或者把 Access-Control-Allow-Credentials 设置为 false。\n也就是说不能 Access-Control-Allow-Credentials 为 true 并且 Access-Control-Allow-Origin 为 *。\n因为 Access-Control-Allow-Credentials 的意思就是允许跨域请求在请求头中携带凭证，比如 cookie，做身份识别，但是你又把 Access-Control-Allow-Origin 设置为 *，这是说不通的，是相悖的。\n具体可参考：Reason: Credential is not supported if the CORS header ‘Access-Control-Allow-Origin’ is ‘*’ | mozilla\n新的问题 上面的理论上解决了跨域问题，但是新版 Chrome 根据 Cookie 的 SameSite 属性，仍然会阻止 Cookie 的发送 network show filtered out request cookies。\n参考：\nWhat’s New In DevTools (Chrome 79) | medium Cookie 的 SameSite 属性 | ruanyifeng 在开发环境根治跨域问题，使用 webpack-dev-server 代理。\n前端：abc.test 后端：abc-api.test 代理：abc.test/web-api -\u003e abc-api.test\nproxy: { '/web-api/': { target: 'http://abc-api.test/', pathRewrite: { '^/web-api': '' }, changeOrigin: true, // 默认情况下，代理时会保留主机头的来源，您可以将 changeOrigin 设置为true 来覆盖此行为。 secure: false, // 接受在 HTTPS 上运行带有无效证书的后端服务器。 }, } 参考：dev-server devserverproxy | webpack\n– EOF –\n","wordCount":"613","inLanguage":"en","datePublished":"2021-01-19T12:08:13+08:00","dateModified":"2021-01-19T12:08:13+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zyf.im/2021/01/19/yii2-code-snippet/"},"publisher":{"@type":"Organization","name":"ZYF.IM BLOG","logo":{"@type":"ImageObject","url":"https://zyf.im/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Yii2 Code Snippet</h1><div class=post-meta><span title='2021-01-19 12:08:13 +0800 CST'>January 19, 2021</span>&nbsp;·&nbsp;<span>3 min</span>&nbsp;·&nbsp;<span>613 words</span>&nbsp;·&nbsp;<span>Me</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#gii-cli>gii CLI</a></li><li><a href=#连接数据库时设置时区>连接数据库时设置时区</a></li><li><a href=#activerecord-one>ActiveRecord one</a></li><li><a href=#db-where>DB where</a><ul><li><a href=#简单条件>简单条件</a></li><li><a href=#and-or>AND OR</a></li><li><a href=#not>NOT</a></li><li><a href=#between>BETWEEN</a></li><li><a href=#in>IN</a></li><li><a href=#like>LIKE</a></li><li><a href=#exist>EXIST</a></li></ul></li><li><a href=#yii2-vue-跨域问题>Yii2 Vue 跨域问题</a><ul><li><a href=#旧的解决办法>旧的解决办法</a></li><li><a href=#新的问题>新的问题</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>2025-02-15：已告别 Yii2，文章内容不再维护。</p><hr><h2 id=gii-cli>gii CLI<a hidden class=anchor aria-hidden=true href=#gii-cli>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php yii <span class=nb>help</span> gii/mode
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>php yii gii/model --generateLabelsFromComments<span class=o>=</span><span class=m>1</span> --overwrite<span class=o>=</span><span class=m>1</span> --standardizeCapitals<span class=o>=</span><span class=m>1</span> --ns<span class=o>=</span><span class=s1>&#39;app\models\gii&#39;</span> --tableName<span class=o>=</span><span class=s2>&#34;*&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 多数据库</span>
</span></span><span class=line><span class=cl>php yii gii/model --generateLabelsFromComments<span class=o>=</span><span class=m>1</span> --overwrite<span class=o>=</span><span class=m>1</span> --standardizeCapitals<span class=o>=</span><span class=m>1</span> --db<span class=o>=</span><span class=s2>&#34;hub_db&#34;</span> --ns<span class=o>=</span><span class=s1>&#39;app\models\hub\gii&#39;</span> --tableName<span class=o>=</span><span class=s2>&#34;*&#34;</span>
</span></span></code></pre></div><h2 id=连接数据库时设置时区>连接数据库时设置时区<a hidden class=anchor aria-hidden=true href=#连接数据库时设置时区>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>  <span class=s1>&#39;class&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;yii\db\Connection&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;dsn&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;mysql:host=mysql;port=3306;dbname=hub&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;username&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;password&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;charset&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;utf8&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 关闭日志记录，防止被 logs 平台拿走
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s1>&#39;enableLogging&#39;</span> <span class=o>=&gt;</span> <span class=nx>YII_DEBUG</span> <span class=o>?</span> <span class=k>true</span> <span class=o>:</span> <span class=k>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;enableProfiling&#39;</span> <span class=o>=&gt;</span> <span class=nx>YII_DEBUG</span> <span class=o>?</span> <span class=k>true</span> <span class=o>:</span> <span class=k>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 设置时区
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s1>&#39;on afterOpen&#39;</span> <span class=o>=&gt;</span> <span class=k>static</span> <span class=k>function</span> <span class=p>(</span><span class=nv>$event</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// set &#39;Asia/Bangkok&#39; timezone
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nv>$event</span><span class=o>-&gt;</span><span class=na>sender</span><span class=o>-&gt;</span><span class=na>createCommand</span><span class=p>(</span><span class=s2>&#34;SET time_zone=&#39;+08:00&#39;;&#34;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span></code></pre></div><h2 id=activerecord-one>ActiveRecord one<a hidden class=anchor aria-hidden=true href=#activerecord-one>#</a></h2><blockquote><p><code>yii\db\ActiveRecord::findOne()</code> 和 <code>yii\db\ActiveQuery::one()</code> 都不会添加 LIMIT 1 到 生成的 SQL 语句中。如果你的查询会返回很多行的数据， 你明确的应该加上 <code>limit(1)</code> 来提高性能，比如 <code>Customer::find()->limit(1)->one()</code>。</p></blockquote><h2 id=db-where>DB where<a hidden class=anchor aria-hidden=true href=#db-where>#</a></h2><blockquote><p><a href=https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-query-builder>查询构建器 | yiiframework</a>
<a href=https://blog.csdn.net/u013697959/article/details/79687746>YII where 条件 | csdn</a></p></blockquote><ul><li>字符串格式，例如：<code>'status=1'</code></li><li>哈希格式，例如： <code>['status' => 1, 'type' => 2]</code></li><li>操作符格式，例如：<code>['like', 'name', 'test']</code></li><li>对象格式，例如：<code>new LikeCondition('name', 'LIKE', 'test')</code></li></ul><h3 id=简单条件>简单条件<a hidden class=anchor aria-hidden=true href=#简单条件>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// SQL: (type = 1) AND (status = 2).
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;type&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: (id IN (1, 2, 3)) AND (status = 2)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: status IS NULL
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;status&#39;</span> <span class=o>=&gt;</span> <span class=k>null</span><span class=p>]</span>
</span></span></code></pre></div><h3 id=and-or>AND OR<a hidden class=anchor aria-hidden=true href=#and-or>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// SQL: `id=1 AND id=2`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;and&#39;</span><span class=p>,</span> <span class=s1>&#39;id=1&#39;</span><span class=p>,</span> <span class=s1>&#39;id=2&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: `type=1 AND (id=1 OR id=2)`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;and&#39;</span><span class=p>,</span> <span class=s1>&#39;type=1&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;or&#39;</span><span class=p>,</span> <span class=s1>&#39;id=1&#39;</span><span class=p>,</span> <span class=s1>&#39;id=2&#39;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: `type=1 AND (id=1 OR id=2)`
</span></span></span><span class=line><span class=cl><span class=c1>// 此写法 &#39;=&#39; 可以换成其他操作符，例：in like != &gt;= 等
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;and&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=s1>&#39;=&#39;</span><span class=p>,</span> <span class=s1>&#39;type&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;or&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;=&#39;</span><span class=p>,</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;1&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;=&#39;</span><span class=p>,</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;2&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=not>NOT<a hidden class=anchor aria-hidden=true href=#not>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// SQL: `NOT (attribute IS NULL)`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;not&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;attribute&#39;</span> <span class=o>=&gt;</span> <span class=k>null</span><span class=p>]]</span>
</span></span></code></pre></div><h3 id=between>BETWEEN<a hidden class=anchor aria-hidden=true href=#between>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// not between 用法相同
</span></span></span><span class=line><span class=cl><span class=c1>// SQL: `id BETWEEN 1 AND 10`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;between&#39;</span><span class=p>,</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span></code></pre></div><h3 id=in>IN<a hidden class=anchor aria-hidden=true href=#in>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// not in 用法相同
</span></span></span><span class=line><span class=cl><span class=c1>// SQL: `id IN (1, 2, 3)`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;between&#39;</span><span class=p>,</span> <span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>10</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// IN 条件也适用于多字段
</span></span></span><span class=line><span class=cl><span class=c1>// SQL: (`id`, `name`) IN ((1, &#39;foo&#39;), (2, &#39;bar&#39;))
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;in&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>],</span> <span class=p>[[</span><span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;foo&#39;</span><span class=p>],</span> <span class=p>[</span><span class=s1>&#39;id&#39;</span> <span class=o>=&gt;</span> <span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span> <span class=o>=&gt;</span> <span class=s1>&#39;bar&#39;</span><span class=p>]]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 也适用于内嵌 SQL 语句
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;in&#39;</span><span class=p>,</span> <span class=s1>&#39;user_id&#39;</span><span class=p>,</span> <span class=p>(</span><span class=k>new</span> <span class=nx>Query</span><span class=p>())</span><span class=o>-&gt;</span><span class=na>select</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=s1>&#39;users&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>([</span><span class=s1>&#39;active&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>])]</span>
</span></span></code></pre></div><h3 id=like>LIKE<a hidden class=anchor aria-hidden=true href=#like>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// SQL: `name LIKE &#39;%tester%&#39;`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;like&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;tester&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: `name LIKE &#39;%test%&#39; AND name LIKE &#39;%sample%&#39;`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;like&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=s1>&#39;sample&#39;</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// SQL: `name LIKE &#39;%tester&#39;`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;like&#39;</span><span class=p>,</span> <span class=s1>&#39;name&#39;</span><span class=p>,</span> <span class=s1>&#39;%tester&#39;</span><span class=p>,</span> <span class=k>false</span><span class=p>]</span>
</span></span></code></pre></div><h3 id=exist>EXIST<a hidden class=anchor aria-hidden=true href=#exist>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=c1>// not exists用法类似
</span></span></span><span class=line><span class=cl><span class=c1>// SQL: EXISTS (SELECT &#34;id&#34; FROM &#34;users&#34; WHERE &#34;active&#34;=1)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$cond</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;exists&#39;</span><span class=p>,</span> <span class=p>(</span><span class=k>new</span> <span class=nx>Query</span><span class=p>())</span><span class=o>-&gt;</span><span class=na>select</span><span class=p>(</span><span class=s1>&#39;id&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>from</span><span class=p>(</span><span class=s1>&#39;users&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>where</span><span class=p>([</span><span class=s1>&#39;active&#39;</span> <span class=o>=&gt;</span> <span class=mi>1</span><span class=p>])]</span>
</span></span></code></pre></div><h2 id=yii2-vue-跨域问题>Yii2 Vue 跨域问题<a hidden class=anchor aria-hidden=true href=#yii2-vue-跨域问题>#</a></h2><blockquote><p><a href=https://www.shiqidu.com/d/846>解决 Yii2 + Vue 前后台分离时跨域的问题 | shiqidu</a>
<a href=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS>跨源资源共享（CORS） | mozilla</a></p></blockquote><h3 id=旧的解决办法>旧的解决办法<a hidden class=anchor aria-hidden=true href=#旧的解决办法>#</a></h3><p>在控制器的 behaviors 方法中增加下面的代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>public</span> <span class=k>function</span> <span class=nf>behaviors</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$behaviors</span> <span class=o>=</span> <span class=k>parent</span><span class=o>::</span><span class=na>behaviors</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>YII_ENV_DEV</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// add CORS filter
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=nv>$behaviors</span><span class=p>[</span><span class=s1>&#39;corsFilter&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;class&#39;</span> <span class=o>=&gt;</span> <span class=nx>Cors</span><span class=o>::</span><span class=na>class</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;cors&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Origin&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s1>&#39;http://localhost:8080&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Access-Control-Request-Method&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span> <span class=s1>&#39;PUT&#39;</span><span class=p>,</span> <span class=s1>&#39;PATCH&#39;</span><span class=p>,</span> <span class=s1>&#39;DELETE&#39;</span><span class=p>,</span> <span class=s1>&#39;HEAD&#39;</span><span class=p>,</span> <span class=s1>&#39;OPTIONS&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Access-Control-Request-Headers&#39;</span> <span class=o>=&gt;</span> <span class=p>[</span><span class=s1>&#39;*&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Access-Control-Allow-Credentials&#39;</span> <span class=o>=&gt;</span> <span class=k>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Access-Control-Max-Age&#39;</span> <span class=o>=&gt;</span> <span class=mi>86400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Access-Control-Expose-Headers&#39;</span> <span class=o>=&gt;</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$behaviors</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>上边配置的解释：</p><ul><li><code>Origin</code> 即 <code>Access-Control-Allow-Origin</code> 表示：响应头指定了该响应的资源是否被允许与给定的 origin 共享。</li><li><code>Access-Control-Request-Method</code> 用于通知服务器在真正的请求中会采用哪种 HTTP 方法。因为预检请求所使用的方法总是 <code>OPTIONS</code> ，与实际请求所使用的方法不一样，所以这个请求头是必要的。</li><li><code>Access-Control-Request-Headers</code> 用于通知服务器在真正的请求中会采用哪些请求头。</li><li><code>Access-Control-Allow-Credentials</code> 表示是否可以将对请求的响应暴露给页面。返回 true 则可以，其他值均不可以。</li><li><code>Access-Control-Max-Age</code> 表示返回结果（即 <code>Access-Control-Allow-Methods</code> 和 <code>Access-Control-Allow-Headers</code> 提供的信息） 可以被缓存多久。</li><li><code>Access-Control-Expose-Headers</code> 列出了哪些首部可以作为响应的一部分暴露给外部。</li></ul><p>注意：</p><p>如果设置 <code>Origin</code> 为 <code>['*']</code>，即所有的前端跨域请求可以接受，同时把 <code>Access-Control-Allow-Credentials</code> 设置为 <code>true</code>，Yii 会直接报错：<strong>Allowing credentials for wildcard origins is insecure. Please specify more restrictive origins or set &lsquo;credentials&rsquo; to false in your CORS configuration.</strong>。</p><p>告诉你使用通配符的凭证是不安全的，让你设置更严格的 <code>Origin</code> 或者把 <code>Access-Control-Allow-Credentials</code> 设置为 <code>false</code>。</p><p>也就是说不能 <code>Access-Control-Allow-Credentials</code> 为 <code>true</code> 并且 <code>Access-Control-Allow-Origin</code> 为 <code>*</code>。</p><p>因为 <code>Access-Control-Allow-Credentials</code> 的意思就是允许跨域请求在请求头中携带凭证，比如 <code>cookie</code>，做身份识别，但是你又把 <code>Access-Control-Allow-Origin</code> 设置为 <code>*</code>，这是说不通的，是相悖的。</p><p>具体可参考：<a href=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials>Reason: Credential is not supported if the CORS header &lsquo;Access-Control-Allow-Origin&rsquo; is &lsquo;*&rsquo; | mozilla</a></p><h3 id=新的问题>新的问题<a hidden class=anchor aria-hidden=true href=#新的问题>#</a></h3><p>上面的理论上解决了跨域问题，但是新版 Chrome 根据 Cookie 的 SameSite 属性，仍然会阻止 Cookie 的发送 <code>network</code> <code>show filtered out request cookies</code>。</p><p>参考：</p><ul><li><a href=https://medium.com/faun/whats-new-in-devtools-chrome-79-1b2df6cdd759>What’s New In DevTools (Chrome 79) | medium</a></li><li><a href=https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html>Cookie 的 SameSite 属性 | ruanyifeng</a></li></ul><p>在开发环境根治跨域问题，使用 <code>webpack-dev-server</code> 代理。</p><p>前端：abc.test
后端：abc-api.test
代理：<code>abc.test/web-api</code> -> <code>abc-api.test</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl>  <span class=nx>proxy</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;/web-api/&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>target</span><span class=o>:</span> <span class=s1>&#39;http://abc-api.test/&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>pathRewrite</span><span class=o>:</span> <span class=p>{</span> <span class=s1>&#39;^/web-api&#39;</span><span class=o>:</span> <span class=s1>&#39;&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nx>changeOrigin</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=c1>// 默认情况下，代理时会保留主机头的来源，您可以将 changeOrigin 设置为true 来覆盖此行为。
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>secure</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>// 接受在 HTTPS 上运行带有无效证书的后端服务器。
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div><p>参考：<a href=https://webpack.js.org/configuration/dev-server/#devserverproxy>dev-server devserverproxy | webpack</a></p><p>&ndash; EOF &ndash;</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://zyf.im/2021/01/27/php-strtotime-month/><span class=title>« Prev</span><br><span>PHP 月份加减问题</span>
</a><a class=next href=https://zyf.im/2020/12/31/review-2020/><span class=title>Next »</span><br><span>回顾 2020</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>