<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>L01 Web 开发实战入门 | ZYF.IM BLOG</title><meta name=keywords content="php"><meta name=description content='
Laravel 教程 - Web 开发实战入门
基础信息
Laravel 与 PHP
Ruby on Rails 有以下原则：

强调与注重敏捷开发；
约定高于配置（Convention over configuration）；
DRY（Don&rsquo;t repeat yourself）不要重复自己，提倡代码重用；
重视「编码愉悦性」。

如何正确阅读本书
随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。
编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。
开发环境布置
第一个应用
composer create-project laravel/laravel Laravel --prefer-dist "5.5.*"
Git 与 GitHub
设置 push 的默认模式为 simple
git config --global push.default simple
部署上线
注册 Heroku 后：
heroku login

# 添加 SSH Key 到 Heroku 上
heroku keys:add

# 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器
echo web: vendor/bin/heroku-php-apache2 public/ > Procfile
git add -A
git commit -m "Procfile for Heroku"

# 创建一个新应用
heroku create

# 对应用名称进行更改，保证未被其它人占用
heroku rename imzyf-laravel-essential

# 声明应用是用 PHP 写的
heroku buildpacks:set heroku/php

# 设置 APP key
php artisan key:generate
heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA=

# 部署上线
git push heroku master

# 快速打开线上应用
heroku open

# 输出生产环境上的日志
heroku logs
构建页面
静态页面
生成静态页面控制器：'><meta name=author content="Me"><link rel=canonical href=https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/><link crossorigin=anonymous href=/assets/css/stylesheet.63618a0fd0c7dd946ad6f368012c097fc6e5a8464cefd289c140dd28c01ec58d.css integrity="sha256-Y2GKD9DH3ZRq1vNoASwJf8blqEZM79KJwUDdKMAexY0=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="L01 Web 开发实战入门"><meta property="og:description" content=' Laravel 教程 - Web 开发实战入门
基础信息 Laravel 与 PHP Ruby on Rails 有以下原则：
强调与注重敏捷开发； 约定高于配置（Convention over configuration）； DRY（Don’t repeat yourself）不要重复自己，提倡代码重用； 重视「编码愉悦性」。 如何正确阅读本书 随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。
编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。
开发环境布置 第一个应用 composer create-project laravel/laravel Laravel --prefer-dist "5.5.*" Git 与 GitHub 设置 push 的默认模式为 simple
git config --global push.default simple 部署上线 注册 Heroku 后：
heroku login # 添加 SSH Key 到 Heroku 上 heroku keys:add # 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器 echo web: vendor/bin/heroku-php-apache2 public/ > Procfile git add -A git commit -m "Procfile for Heroku" # 创建一个新应用 heroku create # 对应用名称进行更改，保证未被其它人占用 heroku rename imzyf-laravel-essential # 声明应用是用 PHP 写的 heroku buildpacks:set heroku/php # 设置 APP key php artisan key:generate heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA= # 部署上线 git push heroku master # 快速打开线上应用 heroku open # 输出生产环境上的日志 heroku logs 构建页面 静态页面 生成静态页面控制器：'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-05-09T17:00:00+08:00"><meta property="article:modified_time" content="2018-05-09T17:00:00+08:00"><meta property="article:tag" content="Php"><meta name=twitter:card content="summary"><meta name=twitter:title content="L01 Web 开发实战入门"><meta name=twitter:description content='
Laravel 教程 - Web 开发实战入门
基础信息
Laravel 与 PHP
Ruby on Rails 有以下原则：

强调与注重敏捷开发；
约定高于配置（Convention over configuration）；
DRY（Don&rsquo;t repeat yourself）不要重复自己，提倡代码重用；
重视「编码愉悦性」。

如何正确阅读本书
随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。
编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。
开发环境布置
第一个应用
composer create-project laravel/laravel Laravel --prefer-dist "5.5.*"
Git 与 GitHub
设置 push 的默认模式为 simple
git config --global push.default simple
部署上线
注册 Heroku 后：
heroku login

# 添加 SSH Key 到 Heroku 上
heroku keys:add

# 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器
echo web: vendor/bin/heroku-php-apache2 public/ > Procfile
git add -A
git commit -m "Procfile for Heroku"

# 创建一个新应用
heroku create

# 对应用名称进行更改，保证未被其它人占用
heroku rename imzyf-laravel-essential

# 声明应用是用 PHP 写的
heroku buildpacks:set heroku/php

# 设置 APP key
php artisan key:generate
heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA=

# 部署上线
git push heroku master

# 快速打开线上应用
heroku open

# 输出生产环境上的日志
heroku logs
构建页面
静态页面
生成静态页面控制器：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zyf.im/posts/"},{"@type":"ListItem","position":2,"name":"L01 Web 开发实战入门","item":"https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"L01 Web 开发实战入门","name":"L01 Web 开发实战入门","description":" Laravel 教程 - Web 开发实战入门\n基础信息 Laravel 与 PHP Ruby on Rails 有以下原则：\n强调与注重敏捷开发； 约定高于配置（Convention over configuration）； DRY（Don\u0026rsquo;t repeat yourself）不要重复自己，提倡代码重用； 重视「编码愉悦性」。 如何正确阅读本书 随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。\n编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。\n开发环境布置 第一个应用 composer create-project laravel/laravel Laravel --prefer-dist \u0026#34;5.5.*\u0026#34; Git 与 GitHub 设置 push 的默认模式为 simple\ngit config --global push.default simple 部署上线 注册 Heroku 后：\nheroku login # 添加 SSH Key 到 Heroku 上 heroku keys:add # 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器 echo web: vendor/bin/heroku-php-apache2 public/ \u0026gt; Procfile git add -A git commit -m \u0026#34;Procfile for Heroku\u0026#34; # 创建一个新应用 heroku create # 对应用名称进行更改，保证未被其它人占用 heroku rename imzyf-laravel-essential # 声明应用是用 PHP 写的 heroku buildpacks:set heroku/php # 设置 APP key php artisan key:generate heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA= # 部署上线 git push heroku master # 快速打开线上应用 heroku open # 输出生产环境上的日志 heroku logs 构建页面 静态页面 生成静态页面控制器：\n","keywords":["php"],"articleBody":" Laravel 教程 - Web 开发实战入门\n基础信息 Laravel 与 PHP Ruby on Rails 有以下原则：\n强调与注重敏捷开发； 约定高于配置（Convention over configuration）； DRY（Don’t repeat yourself）不要重复自己，提倡代码重用； 重视「编码愉悦性」。 如何正确阅读本书 随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。\n编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。\n开发环境布置 第一个应用 composer create-project laravel/laravel Laravel --prefer-dist \"5.5.*\" Git 与 GitHub 设置 push 的默认模式为 simple\ngit config --global push.default simple 部署上线 注册 Heroku 后：\nheroku login # 添加 SSH Key 到 Heroku 上 heroku keys:add # 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器 echo web: vendor/bin/heroku-php-apache2 public/ \u003e Procfile git add -A git commit -m \"Procfile for Heroku\" # 创建一个新应用 heroku create # 对应用名称进行更改，保证未被其它人占用 heroku rename imzyf-laravel-essential # 声明应用是用 PHP 写的 heroku buildpacks:set heroku/php # 设置 APP key php artisan key:generate heroku config:set APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA= # 部署上线 git push heroku master # 快速打开线上应用 heroku open # 输出生产环境上的日志 heroku logs 构建页面 静态页面 生成静态页面控制器：\nphp artisan make:controller StaticPagesController 页面优化 样式美化 # 升级 yarn brew upgrade yarn yarn install --no-bin-links yarn add cross-env 每次检测到 .scss 文件发生更改时，自动将其编译为 .css 文件：\nnpm run watch-poll Laravel 前端工作流 Laravel Mix 一款前端任务自动化管理工具。Mix 提供了简洁流畅的 API，让你能够为你的 Laravel 应用定义 Webpack 编译任务。\n_header.blade.php 为局部视图增加前缀下划线是『约定俗成』的做法。\n布局中的链接 ","wordCount":"371","inLanguage":"en","datePublished":"2018-05-09T17:00:00+08:00","dateModified":"2018-05-09T17:00:00+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/"},"publisher":{"@type":"Organization","name":"ZYF.IM BLOG","logo":{"@type":"ImageObject","url":"https://zyf.im/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">L01 Web 开发实战入门</h1><div class=post-meta><span title='2018-05-09 17:00:00 +0800 CST'>May 9, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;371 words&nbsp;·&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#基础信息>基础信息</a><ul><li><a href=#laravel-与-php>Laravel 与 PHP</a></li><li><a href=#如何正确阅读本书>如何正确阅读本书</a></li></ul></li><li><a href=#开发环境布置>开发环境布置</a><ul><li><a href=#第一个应用>第一个应用</a></li><li><a href=#git-与-github>Git 与 GitHub</a></li><li><a href=#部署上线>部署上线</a></li></ul></li><li><a href=#构建页面>构建页面</a><ul><li><a href=#静态页面>静态页面</a></li></ul></li><li><a href=#页面优化>页面优化</a><ul><li><a href=#样式美化>样式美化</a></li><li><a href=#laravel-前端工作流>Laravel 前端工作流</a></li><li><a href=#布局中的链接>布局中的链接</a></li></ul></li><li><a href=#用户模型>用户模型</a><ul><li><a href=#数据库迁移>数据库迁移</a></li><li><a href=#查看数据库表>查看数据库表</a></li><li><a href=#模型文件>模型文件</a></li><li><a href=#创建用户对象>创建用户对象</a></li></ul></li><li><a href=#用户注册>用户注册</a><ul><li><a href=#显示用户的信息>显示用户的信息</a></li><li><a href=#注册表单>注册表单</a></li><li><a href=#用户数据验证>用户数据验证</a></li><li><a href=#注册失败错误消息>注册失败错误消息</a></li><li><a href=#注册成功>注册成功</a></li></ul></li><li><a href=#会话管理>会话管理</a><ul><li><a href=#用户登录>用户登录</a></li><li><a href=#记住我>记住我</a></li></ul></li><li><a href=#用户-crud>用户 CRUD</a><ul><li><a href=#更新用户>更新用户</a></li><li><a href=#权限系统>权限系统</a></li><li><a href=#列出所有用户>列出所有用户</a></li></ul></li><li><a href=#邮件发送>邮件发送</a><ul><li><a href=#账户激活>账户激活</a></li><li><a href=#在生产环境中发送邮件>在生产环境中发送邮件</a></li></ul></li><li><a href=#微博-crud>微博 CRUD</a><ul><li><a href=#显示微博>显示微博</a></li></ul></li></ul></nav></div></details></div><div class=post-content><blockquote><p><a href="https://laravel-china.org/courses?rf=10678">Laravel 教程 - Web 开发实战入门</a></p></blockquote><h2 id=基础信息>基础信息<a hidden class=anchor aria-hidden=true href=#基础信息>#</a></h2><h3 id=laravel-与-php>Laravel 与 PHP<a hidden class=anchor aria-hidden=true href=#laravel-与-php>#</a></h3><p><code>Ruby on Rails</code> 有以下原则：</p><ul><li>强调与注重敏捷开发；</li><li>约定高于配置（Convention over configuration）；</li><li>DRY（Don&rsquo;t repeat yourself）不要重复自己，提倡代码重用；</li><li>重视「编码愉悦性」。</li></ul><h3 id=如何正确阅读本书>如何正确阅读本书<a hidden class=anchor aria-hidden=true href=#如何正确阅读本书>#</a></h3><p>随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。</p><p>编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。</p><h2 id=开发环境布置>开发环境布置<a hidden class=anchor aria-hidden=true href=#开发环境布置>#</a></h2><h3 id=第一个应用>第一个应用<a hidden class=anchor aria-hidden=true href=#第一个应用>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>composer create-project laravel/laravel Laravel --prefer-dist <span class=s2>&#34;5.5.*&#34;</span>
</span></span></code></pre></div><h3 id=git-与-github>Git 与 GitHub<a hidden class=anchor aria-hidden=true href=#git-与-github>#</a></h3><p>设置 push 的默认模式为 simple</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config --global push.default simple
</span></span></code></pre></div><h3 id=部署上线>部署上线<a hidden class=anchor aria-hidden=true href=#部署上线>#</a></h3><p>注册 Heroku 后：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>heroku login
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加 SSH Key 到 Heroku 上</span>
</span></span><span class=line><span class=cl>heroku keys:add
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> web: vendor/bin/heroku-php-apache2 public/ &gt; Procfile
</span></span><span class=line><span class=cl>git add -A
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;Procfile for Heroku&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建一个新应用</span>
</span></span><span class=line><span class=cl>heroku create
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 对应用名称进行更改，保证未被其它人占用</span>
</span></span><span class=line><span class=cl>heroku rename imzyf-laravel-essential
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 声明应用是用 PHP 写的</span>
</span></span><span class=line><span class=cl>heroku buildpacks:set heroku/php
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置 APP key</span>
</span></span><span class=line><span class=cl>php artisan key:generate
</span></span><span class=line><span class=cl>heroku config:set <span class=nv>APP_KEY</span><span class=o>=</span>base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA<span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 部署上线</span>
</span></span><span class=line><span class=cl>git push heroku master
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 快速打开线上应用</span>
</span></span><span class=line><span class=cl>heroku open
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 输出生产环境上的日志</span>
</span></span><span class=line><span class=cl>heroku logs
</span></span></code></pre></div><h2 id=构建页面>构建页面<a hidden class=anchor aria-hidden=true href=#构建页面>#</a></h2><h3 id=静态页面>静态页面<a hidden class=anchor aria-hidden=true href=#静态页面>#</a></h3><p>生成静态页面控制器：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan make:controller StaticPagesController
</span></span></code></pre></div><h2 id=页面优化>页面优化<a hidden class=anchor aria-hidden=true href=#页面优化>#</a></h2><h3 id=样式美化>样式美化<a hidden class=anchor aria-hidden=true href=#样式美化>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 升级 yarn</span>
</span></span><span class=line><span class=cl>brew  upgrade yarn
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>yarn install --no-bin-links
</span></span><span class=line><span class=cl>yarn add cross-env
</span></span></code></pre></div><p>每次检测到 <code>.scss</code> 文件发生更改时，自动将其编译为 <code>.css</code> 文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm run watch-poll
</span></span></code></pre></div><h3 id=laravel-前端工作流>Laravel 前端工作流<a hidden class=anchor aria-hidden=true href=#laravel-前端工作流>#</a></h3><p>Laravel Mix 一款前端任务自动化管理工具。Mix 提供了简洁流畅的 API，让你能够为你的 Laravel 应用定义 Webpack 编译任务。</p><p><code>_header.blade.php</code> 为局部视图增加前缀下划线是『约定俗成』的做法。</p><h3 id=布局中的链接>布局中的链接<a hidden class=anchor aria-hidden=true href=#布局中的链接>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;/help&#34;</span>&gt;帮助&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 可以改写为
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;{{ route(&#39;help&#39;) }}&#34;</span>&gt;帮助&lt;/a&gt;&lt;/li&gt;
</span></span></code></pre></div><p>路由中修改：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Route::get<span class=o>(</span><span class=s1>&#39;/help&#39;</span>, <span class=s1>&#39;StaticPagesController@help&#39;</span><span class=o>)</span>-&gt;name<span class=o>(</span><span class=s1>&#39;help&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span></code></pre></div><p><code>route('help')</code> 将被渲染为 <code>http://sample.test/help</code>。</p><h2 id=用户模型>用户模型<a hidden class=anchor aria-hidden=true href=#用户模型>#</a></h2><h3 id=数据库迁移>数据库迁移<a hidden class=anchor aria-hidden=true href=#数据库迁移>#</a></h3><ul><li>当我们运行迁移时，<code>up</code> 方法会被调用</li><li>当我们回滚迁移时，<code>down</code> 方法会被调用</li></ul><h3 id=查看数据库表>查看数据库表<a hidden class=anchor aria-hidden=true href=#查看数据库表>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>php artisan migrate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 回滚</span>
</span></span><span class=line><span class=cl>php artisan migrate:rollback
</span></span></code></pre></div><h3 id=模型文件>模型文件<a hidden class=anchor aria-hidden=true href=#模型文件>#</a></h3><p>创建模型命令指定命名空间，同时顺便创建数据库迁移使用 <code>--migration</code> 或 <code>-m</code> 选项</p><pre tabindex=0><code>php artisan make:model Models/Article -m
</code></pre><p>『约定优于配置』（convention over configuration），也称作按约定编程，这是一种软件设计范式，旨在减少软件开发人员需做决定的数量，获得简单的好处，而又不失灵活性。如果所用工具的约定与你的期待相符，便可省去配置；反之，你可以配置来达到你所期待的方式。</p><h3 id=创建用户对象>创建用户对象<a hidden class=anchor aria-hidden=true href=#创建用户对象>#</a></h3><pre tabindex=0><code>php artisan tinker

&gt;&gt;&gt; App\Models\User::create([&#39;name&#39;=&gt; &#39;Aufree&#39;, &#39;email&#39;=&gt;&#39;aufree@yousails.com&#39;,&#39;password&#39;=&gt;bcrypt(&#39;password&#39;)])
</code></pre><h2 id=用户注册>用户注册<a hidden class=anchor aria-hidden=true href=#用户注册>#</a></h2><h3 id=显示用户的信息>显示用户的信息<a hidden class=anchor aria-hidden=true href=#显示用户的信息>#</a></h3><p>Laravel 遵从 RESTful 架构的设计原则，将数据看做一个资源，由 URI 来指定资源。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>resource</span><span class=p>(</span><span class=s1>&#39;users&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>上面代码将等同于：</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@index&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.index&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;/users/{user}&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@show&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.show&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;/users/create&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@create&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.create&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>post</span><span class=p>(</span><span class=s1>&#39;/users&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@store&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.store&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>get</span><span class=p>(</span><span class=s1>&#39;/users/{user}/edit&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@edit&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.edit&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>patch</span><span class=p>(</span><span class=s1>&#39;/users/{user}&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@update&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.update&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>Route</span><span class=o>::</span><span class=na>delete</span><span class=p>(</span><span class=s1>&#39;/users/{user}&#39;</span><span class=p>,</span> <span class=s1>&#39;UsersController@destroy&#39;</span><span class=p>)</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>(</span><span class=s1>&#39;users.destroy&#39;</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=注册表单>注册表单<a hidden class=anchor aria-hidden=true href=#注册表单>#</a></h3><p>全局辅助函数 old 来帮助我们在 Blade 模板中显示旧输入数据</p><pre tabindex=0><code>{{ old(&#39;name&#39;) }}
</code></pre><h3 id=用户数据验证>用户数据验证<a hidden class=anchor aria-hidden=true href=#用户数据验证>#</a></h3><p>为了安全考虑，会让我们提供一个 token（令牌）来防止我们的应用受到 CSRF（跨站请求伪造）的攻击。</p><pre tabindex=0><code>{{ csrf_field() }}
</code></pre><p>会被转换为：</p><pre tabindex=0><code>&lt;input type=&#34;hidden&#34; name=&#34;_token&#34; value=&#34;fhcxqT67dNowMoWsAHGGPJOAWJn8x5R5ctSwZrAq&#34;&gt;
</code></pre><h3 id=注册失败错误消息>注册失败错误消息<a hidden class=anchor aria-hidden=true href=#注册失败错误消息>#</a></h3><pre tabindex=0><code>composer require &#34;overtrue/laravel-lang:~3.0&#34;
</code></pre><p><code>config/app.php</code> 修改：</p><pre tabindex=0><code>    &#39;locale&#39; =&gt; &#39;zh-CN&#39;,
</code></pre><h3 id=注册成功>注册成功<a hidden class=anchor aria-hidden=true href=#注册成功>#</a></h3><p>临时保存用户数据的方法 - 会话（Session），并附带支持多种会话后端驱动，可通过统一的 API 进行使用。</p><pre tabindex=0><code>session()-&gt;flash(&#39;success&#39;, &#39;欢迎，您将在这里开启一段新的旅程~&#39;);

session()-&gt;get(&#39;success&#39;)
</code></pre><h2 id=会话管理>会话管理<a hidden class=anchor aria-hidden=true href=#会话管理>#</a></h2><h3 id=用户登录>用户登录<a hidden class=anchor aria-hidden=true href=#用户登录>#</a></h3><p><code>Auth::check()</code> 方法用于判断当前用户是否已登录，已登录返回 true，未登录返回 false。</p><h3 id=记住我>记住我<a hidden class=anchor aria-hidden=true href=#记住我>#</a></h3><p><code>Auth::attempt()</code> 方法可接收两个参数，第一个参数为需要进行用户身份认证的数组，第二个参数为是否为用户开启『记住我』功能的布尔值。</p><h2 id=用户-crud>用户 CRUD<a hidden class=anchor aria-hidden=true href=#用户-crud>#</a></h2><h3 id=更新用户>更新用户<a hidden class=anchor aria-hidden=true href=#更新用户>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>form</span> <span class=na>method</span><span class=o>=</span><span class=s>&#34;POST&#34;</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;{{ route(&#39;users.update&#39;, $user-&gt;id )}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 将转为：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>form</span> <span class=na>method</span><span class=o>=</span><span class=s>&#34;POST&#34;</span> <span class=na>action</span><span class=o>=</span><span class=s>&#34;http://sample.test/users/1&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=权限系统>权限系统<a hidden class=anchor aria-hidden=true href=#权限系统>#</a></h3><p>在 Laravel 中可以使用 授权策略 (Policy) 来对用户的操作权限进行验证，在用户未经授权进行操作时将返回 403 禁止访问的异常。</p><p><code>redirect()</code> 实例提供了一个 intended 方法，该方法可将页面重定向到上一次请求尝试访问的页面上，并接收一个默认跳转地址参数，当上一次请求记录为空时，跳转到默认地址上。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>return</span> <span class=nx>redirect</span><span class=p>()</span><span class=o>-&gt;</span><span class=na>intended</span><span class=p>(</span><span class=nx>route</span><span class=p>(</span><span class=s1>&#39;users.show&#39;</span><span class=p>,</span> <span class=p>[</span><span class=nx>Auth</span><span class=o>::</span><span class=na>user</span><span class=p>()]));</span>
</span></span></code></pre></div><h3 id=列出所有用户>列出所有用户<a hidden class=anchor aria-hidden=true href=#列出所有用户>#</a></h3><p>假数据的生成分为两个阶段：</p><ol><li>对要生成假数据的模型指定字段进行赋值 - 『模型工厂』</li><li>批量生成假数据模型 - 『数据填充』</li></ol><p>数据库的重置和填充操作：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nx>php</span> <span class=nx>artisan</span> <span class=nx>migrate</span><span class=o>:</span><span class=nx>refresh</span> <span class=o>--</span><span class=nx>seed</span>
</span></span></code></pre></div><h2 id=邮件发送>邮件发送<a hidden class=anchor aria-hidden=true href=#邮件发送>#</a></h2><h3 id=账户激活>账户激活<a hidden class=anchor aria-hidden=true href=#账户激活>#</a></h3><ol><li>用户注册成功后，自动生成激活令牌</li><li>将激活令牌以链接的形式附带在注册邮件里面，并将邮件发送到用户的注册邮箱上</li><li>用户点击注册链接跳到指定路由，路由收到激活令牌参数后映射给相关控制器动作处理</li><li>控制器拿到激活令牌并进行验证，验证通过后对该用户进行激活，并将其激活状态设置为已激活</li><li>用户激活成功，自动登录</li></ol><p>使用 log 邮件驱动的方式来调试邮件发送功能，这么做的好处是邮件并不会真正被发送出去，而是会出现在 <code>storage/logs/laravel.log</code> 文件中：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=cl><span class=nv>MAIL_DRIVER</span><span class=o>=</span>log
</span></span></code></pre></div><h3 id=在生产环境中发送邮件>在生产环境中发送邮件<a hidden class=anchor aria-hidden=true href=#在生产环境中发送邮件>#</a></h3><p>QQ 邮箱的账号设置里开启 <code>POP3</code> 和 <code>SMTP</code> 服务。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-env data-lang=env><span class=line><span class=cl><span class=nv>MAIL_DRIVER</span><span class=o>=</span>smtp
</span></span><span class=line><span class=cl><span class=nv>MAIL_HOST</span><span class=o>=</span>smtp.qq.com
</span></span><span class=line><span class=cl><span class=nv>MAIL_PORT</span><span class=o>=</span><span class=m>25</span>
</span></span><span class=line><span class=cl><span class=nv>MAIL_USERNAME</span><span class=o>=</span>xxxxxxxxxxxxxx@qq.com
</span></span><span class=line><span class=cl><span class=nv>MAIL_PASSWORD</span><span class=o>=</span>xxxxxxxxx // 密码是我们第一步拿到的授权码
</span></span><span class=line><span class=cl><span class=nv>MAIL_ENCRYPTION</span><span class=o>=</span>tls
</span></span><span class=line><span class=cl><span class=nv>MAIL_FROM_ADDRESS</span><span class=o>=</span>xxxxxxxxxxxxxx@qq.com
</span></span><span class=line><span class=cl><span class=nv>MAIL_FROM_NAME</span><span class=o>=</span>SampleApp
</span></span></code></pre></div><h2 id=微博-crud>微博 CRUD<a hidden class=anchor aria-hidden=true href=#微博-crud>#</a></h2><h3 id=显示微博>显示微博<a hidden class=anchor aria-hidden=true href=#显示微博>#</a></h3><p><code>diffForHumans()</code> 该方法的作用是将日期进行友好化处理：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>$created_at</span>-&gt;diffForHumans<span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>=</span>&gt; <span class=s2>&#34;17 years ago&#34;</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://zyf.im/tags/php/>Php</a></li></ul><nav class=paginav><a class=prev href=https://zyf.im/2018/05/25/select-the-appropriate-date-type-in-mysql/><span class=title>« Prev</span><br><span>在 MySQL 中选择合适的日期类型</span>
</a><a class=next href=https://zyf.im/2018/05/08/modern-php-reading-notes/><span class=title>Next »</span><br><span>【Modern PHP】笔记</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>