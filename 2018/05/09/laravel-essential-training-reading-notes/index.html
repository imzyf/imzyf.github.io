<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="【Laravel 教程 - Web 开发实战入门】读书笔记">




  <meta name="keywords" content="php, Yifans_Z Blog">










  <link rel="alternate" href="/atom.xml" title="Yifans_Z Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.3">



<link rel="canonical" href="https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">






<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.3">



  


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84666938-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84666938-1');
</script>


  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "er5hlK0M8mWKUTrVtqnHl97N-gzGzoHsz",
      appKey: "a6lIOEoJs3ijGvj3eP2rkFGG"
    });
  </script>





<script>
  window.config = {"leancloud":{"app_id":"er5hlK0M8mWKUTrVtqnHl97N-gzGzoHsz","app_key":"a6lIOEoJs3ijGvj3eP2rkFGG"},"toc":true,"fancybox":true,"pjax":false};
</script>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2330747317815601",
    enable_page_level_ads: true
  });
</script>

    <title> 【Laravel 教程 - Web 开发实战入门】读书笔记 - Yifans_Z Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Yifans_Z Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Yifans_Z Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              关于
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          【Laravel 教程 - Web 开发实战入门】读书笔记
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-05-09
        </span>
        
        
        <span class="post-visits" data-url="/2018/05/09/laravel-essential-training-reading-notes/" data-title="【Laravel 教程 - Web 开发实战入门】读书笔记">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#基础信息"><span class="toc-text">基础信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Laravel-与-PHP"><span class="toc-text">Laravel 与 PHP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何正确阅读本书？"><span class="toc-text">如何正确阅读本书？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发环境布置"><span class="toc-text">开发环境布置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#第一个应用"><span class="toc-text">第一个应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-与-GitHub"><span class="toc-text">Git 与 GitHub</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部署上线"><span class="toc-text">部署上线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建页面"><span class="toc-text">构建页面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#静态页面"><span class="toc-text">静态页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#页面优化"><span class="toc-text">页面优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#样式美化"><span class="toc-text">样式美化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Laravel-前端工作流"><span class="toc-text">Laravel 前端工作流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布局中的链接"><span class="toc-text">布局中的链接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户模型"><span class="toc-text">用户模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库迁移"><span class="toc-text">数据库迁移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看数据库表"><span class="toc-text">查看数据库表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模型文件"><span class="toc-text">模型文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建用户对象"><span class="toc-text">创建用户对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户注册"><span class="toc-text">用户注册</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#显示用户的信息"><span class="toc-text">显示用户的信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册表单"><span class="toc-text">注册表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户数据验证"><span class="toc-text">用户数据验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册失败错误消息"><span class="toc-text">注册失败错误消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注册成功"><span class="toc-text">注册成功</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#会话管理"><span class="toc-text">会话管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户登录"><span class="toc-text">用户登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#记住我"><span class="toc-text">记住我</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户-CRUD"><span class="toc-text">用户 CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#更新用户"><span class="toc-text">更新用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#权限系统"><span class="toc-text">权限系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列出所有用户"><span class="toc-text">列出所有用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#邮件发送"><span class="toc-text">邮件发送</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#账户激活"><span class="toc-text">账户激活</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在生产环境中发送邮件"><span class="toc-text">在生产环境中发送邮件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#微博-CRUD"><span class="toc-text">微博 CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#显示微博"><span class="toc-text">显示微博</span></a></li></ol></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <p><a href="https://laravel-china.org/courses?rf=10678" target="_blank" rel="noopener">Laravel 教程 - Web 开发实战入门</a> 读书笔记。</p>
<h2 id="基础信息"><a href="#基础信息" class="headerlink" title="基础信息"></a>基础信息</h2><h3 id="Laravel-与-PHP"><a href="#Laravel-与-PHP" class="headerlink" title="Laravel 与 PHP"></a>Laravel 与 PHP</h3><p><code>Ruby on Rails</code> 有以下原则：</p>
<ul>
<li>强调与注重敏捷开发；</li>
<li>约定高于配置（Convention over configuration）；</li>
<li>DRY（Don’t repeat yourself）不要重复自己，提倡代码重用；</li>
<li>重视「编码愉悦性」。</li>
</ul>
<h3 id="如何正确阅读本书？"><a href="#如何正确阅读本书？" class="headerlink" title="如何正确阅读本书？"></a>如何正确阅读本书？</h3><p>随后你会有很多机会来学习它们。现在最重要的是保持『训练』的连贯性。</p>
<p>编程是技能，不是知识，技能只有在不断刻意练习下才会有进步。</p>
<a id="more"></a>
<h2 id="开发环境布置"><a href="#开发环境布置" class="headerlink" title="开发环境布置"></a>开发环境布置</h2><h3 id="第一个应用"><a href="#第一个应用" class="headerlink" title="第一个应用"></a>第一个应用</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ composer create-project laravel/laravel Laravel --prefer-dist &quot;5.5.*&quot;</span><br></pre></td></tr></table></figure>
<h3 id="Git-与-GitHub"><a href="#Git-与-GitHub" class="headerlink" title="Git 与 GitHub"></a>Git 与 GitHub</h3><p>设置 push 的默认模式为 simple</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ git config --global push.default simple</span><br></pre></td></tr></table></figure>
<h3 id="部署上线"><a href="#部署上线" class="headerlink" title="部署上线"></a>部署上线</h3><p>注册 Heroku 后：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ heroku login</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加 SSH Key 到 Heroku 上</span></span><br><span class="line">$ heroku keys:add</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建配置文件来告诉 Heroku 应当使用什么命令来启动 Web 服务器</span></span><br><span class="line">$ <span class="built_in">echo</span> web: vendor/bin/heroku-php-apache2 public/ &gt; Procfile</span><br><span class="line">$ git add -A</span><br><span class="line">$ git commit -m <span class="string">"Procfile for Heroku"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个新应用</span></span><br><span class="line">$ heroku create</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对应用名称进行更改，保证未被其它人占用</span></span><br><span class="line">$ heroku rename imzyf-laravel-essential</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明应用是用 PHP 写的</span></span><br><span class="line">$ heroku buildpacks:<span class="built_in">set</span> heroku/php</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 APP key</span></span><br><span class="line">$ php artisan key:generate</span><br><span class="line">$ heroku config:<span class="built_in">set</span> APP_KEY=base64:wuWj8Kicza6I9YxgWczviNVcueVN2RroqiUILreyNmA=</span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署上线</span></span><br><span class="line">$ git push heroku master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 快速打开线上应用</span></span><br><span class="line">$ heroku open</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出生产环境上的日志</span></span><br><span class="line">$ heroku logs</span><br></pre></td></tr></table></figure>
<h2 id="构建页面"><a href="#构建页面" class="headerlink" title="构建页面"></a>构建页面</h2><h3 id="静态页面"><a href="#静态页面" class="headerlink" title="静态页面"></a>静态页面</h3><p>生成静态页面控制器：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ php artisan make:controller StaticPagesController</span><br></pre></td></tr></table></figure>
<h2 id="页面优化"><a href="#页面优化" class="headerlink" title="页面优化"></a>页面优化</h2><h3 id="样式美化"><a href="#样式美化" class="headerlink" title="样式美化"></a>样式美化</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 升级 yarn</span><br><span class="line">$ brew  upgrade yarn</span><br><span class="line"></span><br><span class="line">$ yarn install --no-bin-links</span><br><span class="line">$ yarn add cross-env</span><br></pre></td></tr></table></figure>
<p>每次检测到 <code>.scss</code> 文件发生更改时，自动将其编译为 <code>.css</code> 文件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm run watch-poll</span><br></pre></td></tr></table></figure>
<h3 id="Laravel-前端工作流"><a href="#Laravel-前端工作流" class="headerlink" title="Laravel 前端工作流"></a>Laravel 前端工作流</h3><p>Laravel Mix 一款前端任务自动化管理工具。Mix 提供了简洁流畅的 API，让你能够为你的 Laravel 应用定义 Webpack 编译任务。</p>
<p><code>_header.blade.php</code> 为局部视图增加前缀下划线是『约定俗成』的做法。</p>
<h3 id="布局中的链接"><a href="#布局中的链接" class="headerlink" title="布局中的链接"></a>布局中的链接</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;li&gt;&lt;a href=&quot;/help&quot;&gt;帮助&lt;/a&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">// 可以改写为</span><br><span class="line"></span><br><span class="line">&lt;li&gt;&lt;a href=&quot;&#123;&#123; route(&apos;help&apos;) &#125;&#125;&quot;&gt;帮助&lt;/a&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<p>路由中修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Route::get(&apos;/help&apos;, &apos;StaticPagesController@help&apos;)-&gt;name(&apos;help&apos;);</span><br></pre></td></tr></table></figure>
<p><code>route(&#39;help&#39;)</code> 将被渲染为 <code>http://sample.test/help</code>。</p>
<h2 id="用户模型"><a href="#用户模型" class="headerlink" title="用户模型"></a>用户模型</h2><h3 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h3><ul>
<li>当我们运行迁移时，<code>up</code> 方法会被调用</li>
<li>当我们回滚迁移时，<code>down</code> 方法会被调用</li>
</ul>
<h3 id="查看数据库表"><a href="#查看数据库表" class="headerlink" title="查看数据库表"></a>查看数据库表</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ php artisan migrate</span><br><span class="line"></span><br><span class="line"># 回滚</span><br><span class="line">$ php artisan migrate:rollback</span><br></pre></td></tr></table></figure>
<h3 id="模型文件"><a href="#模型文件" class="headerlink" title="模型文件"></a>模型文件</h3><p>创建模型命令指定命名空间，同时顺便创建数据库迁移使用 <code>--migration</code> 或 <code>-m</code> 选项</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ php artisan make:model Models/Article -m</span><br></pre></td></tr></table></figure>
<p>『约定优于配置』（convention over configuration），也称作按约定编程，这是一种软件设计范式，旨在减少软件开发人员需做决定的数量，获得简单的好处，而又不失灵活性。如果所用工具的约定与你的期待相符，便可省去配置；反之，你可以配置来达到你所期待的方式。</p>
<h3 id="创建用户对象"><a href="#创建用户对象" class="headerlink" title="创建用户对象"></a>创建用户对象</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ php artisan tinker</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; App\Models\User::create([&apos;name&apos;=&gt; &apos;Aufree&apos;, &apos;email&apos;=&gt;&apos;aufree@yousails.com&apos;,&apos;password&apos;=&gt;bcrypt(&apos;password&apos;)])</span><br></pre></td></tr></table></figure>
<h2 id="用户注册"><a href="#用户注册" class="headerlink" title="用户注册"></a>用户注册</h2><h3 id="显示用户的信息"><a href="#显示用户的信息" class="headerlink" title="显示用户的信息"></a>显示用户的信息</h3><p>Laravel 遵从 RESTful 架构的设计原则，将数据看做一个资源，由 URI 来指定资源。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Route::resource(&apos;users&apos;, &apos;UsersController&apos;);</span><br><span class="line"></span><br><span class="line">上面代码将等同于：</span><br><span class="line"></span><br><span class="line">Route::get(&apos;/users&apos;, &apos;UsersController@index&apos;)-&gt;name(&apos;users.index&apos;);</span><br><span class="line">Route::get(&apos;/users/&#123;user&#125;&apos;, &apos;UsersController@show&apos;)-&gt;name(&apos;users.show&apos;);</span><br><span class="line">Route::get(&apos;/users/create&apos;, &apos;UsersController@create&apos;)-&gt;name(&apos;users.create&apos;);</span><br><span class="line">Route::post(&apos;/users&apos;, &apos;UsersController@store&apos;)-&gt;name(&apos;users.store&apos;);</span><br><span class="line">Route::get(&apos;/users/&#123;user&#125;/edit&apos;, &apos;UsersController@edit&apos;)-&gt;name(&apos;users.edit&apos;);</span><br><span class="line">Route::patch(&apos;/users/&#123;user&#125;&apos;, &apos;UsersController@update&apos;)-&gt;name(&apos;users.update&apos;);</span><br><span class="line">Route::delete(&apos;/users/&#123;user&#125;&apos;, &apos;UsersController@destroy&apos;)-&gt;name(&apos;users.destroy&apos;);</span><br></pre></td></tr></table></figure>
<h3 id="注册表单"><a href="#注册表单" class="headerlink" title="注册表单"></a>注册表单</h3><p>全局辅助函数 old 来帮助我们在 Blade 模板中显示旧输入数据</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123; old(&apos;name&apos;) &#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用户数据验证"><a href="#用户数据验证" class="headerlink" title="用户数据验证"></a>用户数据验证</h3><p>为了安全考虑，会让我们提供一个 token（令牌）来防止我们的应用受到 CSRF（跨站请求伪造）的攻击。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&#123; csrf_field() &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>会被转换为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;input type=&quot;hidden&quot; name=&quot;_token&quot; value=&quot;fhcxqT67dNowMoWsAHGGPJOAWJn8x5R5ctSwZrAq&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="注册失败错误消息"><a href="#注册失败错误消息" class="headerlink" title="注册失败错误消息"></a>注册失败错误消息</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ composer require &quot;overtrue/laravel-lang:~3.0&quot;</span><br></pre></td></tr></table></figure>
<p><code>config/app.php</code> 修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&apos;locale&apos; =&gt; &apos;zh-CN&apos;,</span><br></pre></td></tr></table></figure>
<h3 id="注册成功"><a href="#注册成功" class="headerlink" title="注册成功"></a>注册成功</h3><p>临时保存用户数据的方法 - 会话（Session），并附带支持多种会话后端驱动，可通过统一的 API 进行使用。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">session()-&gt;flash(&apos;success&apos;, &apos;欢迎，您将在这里开启一段新的旅程~&apos;);</span><br><span class="line"></span><br><span class="line">session()-&gt;get(&apos;success&apos;)</span><br></pre></td></tr></table></figure>
<h2 id="会话管理"><a href="#会话管理" class="headerlink" title="会话管理"></a>会话管理</h2><h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><p><code>Auth::check()</code> 方法用于判断当前用户是否已登录，已登录返回 true，未登录返回 false。</p>
<h3 id="记住我"><a href="#记住我" class="headerlink" title="记住我"></a>记住我</h3><p><code>Auth::attempt()</code> 方法可接收两个参数，第一个参数为需要进行用户身份认证的数组，第二个参数为是否为用户开启『记住我』功能的布尔值。</p>
<h2 id="用户-CRUD"><a href="#用户-CRUD" class="headerlink" title="用户 CRUD"></a>用户 CRUD</h2><h3 id="更新用户"><a href="#更新用户" class="headerlink" title="更新用户"></a>更新用户</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;form method=&quot;POST&quot; action=&quot;&#123;&#123; route(&apos;users.update&apos;, $user-&gt;id )&#125;&#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">// 将转为：</span><br><span class="line"></span><br><span class="line">&lt;form method=&quot;POST&quot; action=&quot;http://sample.test/users/1&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="权限系统"><a href="#权限系统" class="headerlink" title="权限系统"></a>权限系统</h3><p>在 Laravel 中可以使用 授权策略 (Policy) 来对用户的操作权限进行验证，在用户未经授权进行操作时将返回 403 禁止访问的异常。</p>
<p><code>redirect()</code> 实例提供了一个 intended 方法，该方法可将页面重定向到上一次请求尝试访问的页面上，并接收一个默认跳转地址参数，当上一次请求记录为空时，跳转到默认地址上。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">return redirect()-&gt;intended(route(&apos;users.show&apos;, [Auth::user()]));</span><br></pre></td></tr></table></figure>
<h3 id="列出所有用户"><a href="#列出所有用户" class="headerlink" title="列出所有用户"></a>列出所有用户</h3><p>假数据的生成分为两个阶段：</p>
<ol>
<li>对要生成假数据的模型指定字段进行赋值 - 『模型工厂』</li>
<li>批量生成假数据模型 - 『数据填充』</li>
</ol>
<p>数据库的重置和填充操作：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ php artisan migrate:refresh --seed</span><br></pre></td></tr></table></figure>
<h2 id="邮件发送"><a href="#邮件发送" class="headerlink" title="邮件发送"></a>邮件发送</h2><h3 id="账户激活"><a href="#账户激活" class="headerlink" title="账户激活"></a>账户激活</h3><ol>
<li>用户注册成功后，自动生成激活令牌</li>
<li>将激活令牌以链接的形式附带在注册邮件里面，并将邮件发送到用户的注册邮箱上</li>
<li>用户点击注册链接跳到指定路由，路由收到激活令牌参数后映射给相关控制器动作处理</li>
<li>控制器拿到激活令牌并进行验证，验证通过后对该用户进行激活，并将其激活状态设置为已激活</li>
<li>用户激活成功，自动登录</li>
</ol>
<p>使用 log 邮件驱动的方式来调试邮件发送功能，这么做的好处是邮件并不会真正被发送出去，而是会出现在 <code>storage/logs/laravel.log</code> 文件中：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MAIL_DRIVER=log</span><br></pre></td></tr></table></figure>
<h3 id="在生产环境中发送邮件"><a href="#在生产环境中发送邮件" class="headerlink" title="在生产环境中发送邮件"></a>在生产环境中发送邮件</h3><p>QQ 邮箱的账号设置里开启 <code>POP3</code> 和 <code>SMTP</code> 服务。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">MAIL_DRIVER=smtp</span><br><span class="line">MAIL_HOST=smtp.qq.com</span><br><span class="line">MAIL_PORT=25</span><br><span class="line">MAIL_USERNAME=xxxxxxxxxxxxxx@qq.com</span><br><span class="line">MAIL_PASSWORD=xxxxxxxxx // 密码是我们第一步拿到的授权码</span><br><span class="line">MAIL_ENCRYPTION=tls</span><br><span class="line">MAIL_FROM_ADDRESS=xxxxxxxxxxxxxx@qq.com</span><br><span class="line">MAIL_FROM_NAME=SampleApp</span><br></pre></td></tr></table></figure>
<h2 id="微博-CRUD"><a href="#微博-CRUD" class="headerlink" title="微博 CRUD"></a>微博 CRUD</h2><h3 id="显示微博"><a href="#显示微博" class="headerlink" title="显示微博"></a>显示微博</h3><p><code>diffForHumans()</code> 该方法的作用是将日期进行友好化处理：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; $created_at-&gt;diffForHumans()</span><br><span class="line">=&gt; &quot;17 years ago&quot;</span><br></pre></td></tr></table></figure>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="https://zyf.im">Yifans_Z</a>
    </p>
    <p class="copyright-item">
      <span>原文链接: </span>
      <a href="https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/">https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/</a>
    </p>
    <p class="copyright-item">
      <span>许可协议: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden>
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="https://cdn-qn.yifans.com/imzyf/reward_wechat.jpg" title="wechat">
        </label>
      
      
    </div>
  </div>


    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/php/">php</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/05/20/nginx-ip-forbidden/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Nginx 禁止 IP 访问</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2018/05/08/modern-php-reading-notes/">
        <span class="next-text nav-default">【Modern PHP】读书笔记</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:168@yifans.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
        
          <a href="https://github.com/imzyf" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://stackoverflow.com/users/5958443/yifan" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" rel="nofollow" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 -
    <a class="theme-link" rel="nofollow" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    
    &copy;
    
      2016 -
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Yifans_Z</span>
  </span>
</div>

<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=11262529;
var sc_invisible=1;
var sc_security="476b93ef";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web analytics" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="//c.statcounter.com/11262529/0/476b93ef/1/" alt="web
analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://zyf.im/2018/05/09/laravel-essential-training-reading-notes/';
        this.page.identifier = '2018/05/09/laravel-essential-training-reading-notes/';
        this.page.title = '【Laravel 教程 - Web 开发实战入门】读书笔记';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//yifans.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  

  



    
  







  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.3"></script>

  </body>
</html>
