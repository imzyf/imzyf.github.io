<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ubuntu 下使用 UFW 管理防火墙服务 | ZYF.IM BLOG</title><meta name=keywords content="ubuntu"><meta name=description content="UFW (Uncomplicated Firewall) 作为 iptables 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 iptables 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。
检查系统上是否已经安装 UFW
sudo dpkg --get-selections | grep ufw
安装 UFW
sudo apt-get install ufw

UFW 常用命令
查看 UFW 状态
sudo ufw status
see configured rules even when inactive
ufw show added
启用/禁用 UFW
# 启用
sudo ufw enable
# 禁用
sudo ufw disable
先添加 ufw allow ssh，防止墙掉自己
查看 UFW 规则
需要先启用 UFW
sudo ufw status verbose
在每条规则上加个序号数字"><meta name=author content="Me"><link rel=canonical href=https://zyf.im/2016/10/10/manage-iptables-using-ufw-in-ubuntu/><link crossorigin=anonymous href=/assets/css/stylesheet.63618a0fd0c7dd946ad6f368012c097fc6e5a8464cefd289c140dd28c01ec58d.css integrity="sha256-Y2GKD9DH3ZRq1vNoASwJf8blqEZM79KJwUDdKMAexY0=" rel="preload stylesheet" as=style><link rel=icon href=https://zyf.im/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zyf.im/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zyf.im/favicon-32x32.png><link rel=apple-touch-icon href=https://zyf.im/apple-touch-icon.png><link rel=mask-icon href=https://zyf.im/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://zyf.im/2016/10/10/manage-iptables-using-ufw-in-ubuntu/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-6DVZ6E58DG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-6DVZ6E58DG")}</script><meta property="og:url" content="https://zyf.im/2016/10/10/manage-iptables-using-ufw-in-ubuntu/"><meta property="og:site_name" content="ZYF.IM BLOG"><meta property="og:title" content="Ubuntu 下使用 UFW 管理防火墙服务"><meta property="og:description" content="UFW (Uncomplicated Firewall) 作为 iptables 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 iptables 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。
检查系统上是否已经安装 UFW sudo dpkg --get-selections | grep ufw 安装 UFW sudo apt-get install ufw UFW 常用命令 查看 UFW 状态 sudo ufw status see configured rules even when inactive ufw show added 启用/禁用 UFW # 启用 sudo ufw enable # 禁用 sudo ufw disable 先添加 ufw allow ssh，防止墙掉自己
查看 UFW 规则 需要先启用 UFW
sudo ufw status verbose 在每条规则上加个序号数字"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-10-10T13:00:00+00:00"><meta property="article:modified_time" content="2016-10-10T13:00:00+00:00"><meta property="article:tag" content="Ubuntu"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu 下使用 UFW 管理防火墙服务"><meta name=twitter:description content="UFW (Uncomplicated Firewall) 作为 iptables 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 iptables 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。
检查系统上是否已经安装 UFW
sudo dpkg --get-selections | grep ufw
安装 UFW
sudo apt-get install ufw

UFW 常用命令
查看 UFW 状态
sudo ufw status
see configured rules even when inactive
ufw show added
启用/禁用 UFW
# 启用
sudo ufw enable
# 禁用
sudo ufw disable
先添加 ufw allow ssh，防止墙掉自己
查看 UFW 规则
需要先启用 UFW
sudo ufw status verbose
在每条规则上加个序号数字"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zyf.im/posts/"},{"@type":"ListItem","position":2,"name":"Ubuntu 下使用 UFW 管理防火墙服务","item":"https://zyf.im/2016/10/10/manage-iptables-using-ufw-in-ubuntu/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ubuntu 下使用 UFW 管理防火墙服务","name":"Ubuntu 下使用 UFW 管理防火墙服务","description":"UFW (Uncomplicated Firewall) 作为 iptables 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 iptables 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。\n检查系统上是否已经安装 UFW sudo dpkg --get-selections | grep ufw 安装 UFW sudo apt-get install ufw UFW 常用命令 查看 UFW 状态 sudo ufw status see configured rules even when inactive ufw show added 启用/禁用 UFW # 启用 sudo ufw enable # 禁用 sudo ufw disable 先添加 ufw allow ssh，防止墙掉自己\n查看 UFW 规则 需要先启用 UFW\nsudo ufw status verbose 在每条规则上加个序号数字\n","keywords":["ubuntu"],"articleBody":"UFW (Uncomplicated Firewall) 作为 iptables 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 iptables 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。\n检查系统上是否已经安装 UFW sudo dpkg --get-selections | grep ufw 安装 UFW sudo apt-get install ufw UFW 常用命令 查看 UFW 状态 sudo ufw status see configured rules even when inactive ufw show added 启用/禁用 UFW # 启用 sudo ufw enable # 禁用 sudo ufw disable 先添加 ufw allow ssh，防止墙掉自己\n查看 UFW 规则 需要先启用 UFW\nsudo ufw status verbose 在每条规则上加个序号数字\nsudo ufw status numbered 添加 UFW 允许规则 允许特定服务程序\nsudo ufw allow ssh 允许特定服务程序特定协议\nsudo ufw allow ssh/tcp 允许特定端口\nsudo ufw allow 8080 允许特定端口特定协议\nsudo ufw allow 8080/tcp 允许范围端口特定协议，必须指明协议 udp 或 tcp\nsudo ufw allow 2290:2300/tcp 允许特定 IP\nsudo ufw allow from 192.168.0.104 允许范围 IP\nsudo ufw allow from 192.168.0.0/24 networking - UFW - allow range of IP addresees? - Ask Ubuntu IPv4 subnetting reference - Wikipedia 组合参数\n可以把 IP 地址、协议和端口这些组合在一起用。创建一条规则，限制仅仅来自于 192.168.0.104 的 IP ，而且只能使用 tcp 协议和通过 22 端口来访问本地资源：\nsudo ufw allow from 192.168.0.104 proto tcp to any port 22 添加 UFW 拒绝规则 创建拒绝规则的命令和允许的规则类似，仅需要把 allow 参数换成 deny 参数就可以。\nsudo ufw deny ftp 删除 UFW 规则 方法一：\nsudo ufw delete allow ftp 方法二：按行号删除\n# 显示行号 sudo ufw status numbered # 按行号删除 sudo ufw delete 1 重置 UFW 所有规则 sudo ufw reset References Debian/Ubuntu 系统中安装和配置 UFW－简单的防火墙-技术 ◆ 学习|Linux.中国-开源社区 See configured rules even when inactive ","wordCount":"212","inLanguage":"en","datePublished":"2016-10-10T13:00:00Z","dateModified":"2016-10-10T13:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zyf.im/2016/10/10/manage-iptables-using-ufw-in-ubuntu/"},"publisher":{"@type":"Organization","name":"ZYF.IM BLOG","logo":{"@type":"ImageObject","url":"https://zyf.im/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zyf.im/ accesskey=h title="ZYF.IM (Alt + H)"><img src=https://zyf.im/apple-touch-icon.png alt aria-label=logo height=35>ZYF.IM</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zyf.im/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://zyf.im/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://zyf.im/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://zyf.im/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zyf.im/>Home</a>&nbsp;»&nbsp;<a href=https://zyf.im/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Ubuntu 下使用 UFW 管理防火墙服务</h1><div class=post-meta><span title='2016-10-10 13:00:00 +0000 UTC'>October 10, 2016</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;212 words&nbsp;·&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#检查系统上是否已经安装-ufw>检查系统上是否已经安装 UFW</a></li><li><a href=#安装-ufw>安装 UFW</a></li><li><a href=#ufw-常用命令>UFW 常用命令</a><ul><li><a href=#查看-ufw-状态>查看 UFW 状态</a></li><li><a href=#see-configured-rules-even-when-inactive>see configured rules even when inactive</a></li><li><a href=#启用禁用-ufw>启用/禁用 UFW</a></li><li><a href=#查看-ufw-规则>查看 UFW 规则</a></li><li><a href=#添加-ufw-允许规则>添加 UFW 允许规则</a></li><li><a href=#添加-ufw-拒绝规则>添加 UFW 拒绝规则</a></li><li><a href=#删除-ufw-规则>删除 UFW 规则</a></li><li><a href=#重置-ufw-所有规则>重置 UFW 所有规则</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><p>UFW (Uncomplicated Firewall) 作为 <code>iptables</code> 的前端应用，给用户提供了简单的接口界面。使用着不需要去记非常复杂的 <code>iptables</code> 语法。UFW 也使用了 简单英语 作为它的参数。像 allow、deny、reset 就是他们当中的一部分。UFW 绝对是那些想要快速、简单的就建立自己的防火墙，而且还很安全的用户的最佳替代品之一。</p><h2 id=检查系统上是否已经安装-ufw>检查系统上是否已经安装 UFW<a hidden class=anchor aria-hidden=true href=#检查系统上是否已经安装-ufw>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo dpkg --get-selections <span class=p>|</span> grep ufw
</span></span></code></pre></div><h2 id=安装-ufw>安装 UFW<a hidden class=anchor aria-hidden=true href=#安装-ufw>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install ufw
</span></span></code></pre></div><h2 id=ufw-常用命令>UFW 常用命令<a hidden class=anchor aria-hidden=true href=#ufw-常用命令>#</a></h2><h3 id=查看-ufw-状态>查看 UFW 状态<a hidden class=anchor aria-hidden=true href=#查看-ufw-状态>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw status
</span></span></code></pre></div><h3 id=see-configured-rules-even-when-inactive>see configured rules even when inactive<a hidden class=anchor aria-hidden=true href=#see-configured-rules-even-when-inactive>#</a></h3><pre tabindex=0><code>ufw show added
</code></pre><h3 id=启用禁用-ufw>启用/禁用 UFW<a hidden class=anchor aria-hidden=true href=#启用禁用-ufw>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 启用</span>
</span></span><span class=line><span class=cl>sudo ufw <span class=nb>enable</span>
</span></span><span class=line><span class=cl><span class=c1># 禁用</span>
</span></span><span class=line><span class=cl>sudo ufw disable
</span></span></code></pre></div><p>先添加 <code>ufw allow ssh</code>，防止墙掉自己</p><h3 id=查看-ufw-规则>查看 UFW 规则<a hidden class=anchor aria-hidden=true href=#查看-ufw-规则>#</a></h3><p>需要先启用 UFW</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw status verbose
</span></span></code></pre></div><p>在每条规则上加个序号数字</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw status numbered
</span></span></code></pre></div><h3 id=添加-ufw-允许规则>添加 UFW 允许规则<a hidden class=anchor aria-hidden=true href=#添加-ufw-允许规则>#</a></h3><p>允许特定服务程序</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow ssh
</span></span></code></pre></div><p>允许特定服务程序特定协议</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow ssh/tcp
</span></span></code></pre></div><p>允许特定端口</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow <span class=m>8080</span>
</span></span></code></pre></div><p>允许特定端口特定协议</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow 8080/tcp
</span></span></code></pre></div><p>允许范围端口特定协议，必须指明协议 udp 或 tcp</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow 2290:2300/tcp
</span></span></code></pre></div><p>允许特定 IP</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow from 192.168.0.104
</span></span></code></pre></div><p>允许范围 IP</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow from 192.168.0.0/24
</span></span></code></pre></div><ul><li><a href=https://askubuntu.com/questions/646424/ufw-allow-range-of-ip-addresees>networking - UFW - allow range of IP addresees? - Ask Ubuntu</a></li><li><a href=https://en.wikipedia.org/wiki/IPv4_subnetting_reference>IPv4 subnetting reference - Wikipedia</a></li></ul><p>组合参数</p><p>可以把 IP 地址、协议和端口这些组合在一起用。创建一条规则，限制仅仅来自于 192.168.0.104 的 IP ，而且只能使用 tcp 协议和通过 22 端口来访问本地资源：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow from 192.168.0.104 proto tcp to any port <span class=m>22</span>
</span></span></code></pre></div><h3 id=添加-ufw-拒绝规则>添加 UFW 拒绝规则<a hidden class=anchor aria-hidden=true href=#添加-ufw-拒绝规则>#</a></h3><p>创建拒绝规则的命令和允许的规则类似，仅需要把 <code>allow</code> 参数换成 <code>deny</code> 参数就可以。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw deny ftp
</span></span></code></pre></div><h3 id=删除-ufw-规则>删除 UFW 规则<a hidden class=anchor aria-hidden=true href=#删除-ufw-规则>#</a></h3><p>方法一：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw delete allow ftp
</span></span></code></pre></div><p>方法二：按行号删除</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 显示行号</span>
</span></span><span class=line><span class=cl>sudo ufw status numbered
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 按行号删除</span>
</span></span><span class=line><span class=cl>sudo ufw delete <span class=m>1</span>
</span></span></code></pre></div><h3 id=重置-ufw-所有规则>重置 UFW 所有规则<a hidden class=anchor aria-hidden=true href=#重置-ufw-所有规则>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw reset
</span></span></code></pre></div><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://linux.cn/article-2489-1.html>Debian/Ubuntu 系统中安装和配置 UFW－简单的防火墙-技术 ◆ 学习|Linux.中国-开源社区</a></li><li><a href=https://askubuntu.com/questions/30781/see-configured-rules-even-when-inactive>See configured rules even when inactive</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://zyf.im/tags/ubuntu/>Ubuntu</a></li></ul><nav class=paginav><a class=prev href=https://zyf.im/2016/12/31/review-2016/><span class=title>« Prev</span><br><span>回顾 2016</span>
</a><a class=next href=https://zyf.im/2016/09/23/core-java-reading-notes-part2/><span class=title>Next »</span><br><span>【Core Java】读书笔记 Part 2</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://zyf.im/>ZYF.IM BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>